<!doctype html><html lang=en-us><head><meta charset=utf-8><title>Mindmap | Lotus Docs Example Site</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=keywords content="Documentation,Hugo,Hugo Theme,Bootstrap"><meta name=author content="Colin Wilson - Lotus Labs"><meta name=email content="support@aigis.uk"><meta name=website content="https://lotusdocs.dev"><meta name=Version content="v0.1.0"><link rel=icon href=https://blahvalf.github.io/favicon.ico sizes=any><link rel=icon type=image/svg+xml href=https://blahvalf.github.io/favicon.svg><link rel=apple-touch-icon sizes=180x180 href=https://blahvalf.github.io/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://blahvalf.github.io/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://blahvalf.github.io/favicon-16x16.png><link rel=manifest crossorigin=use-credentials href=https://blahvalf.github.io/site.webmanifest><meta property="og:title" content="Mindmap"><meta property="og:description" content="Mindmap link
Mindmap: This is an experimental diagram for now. The syntax and properties can change in future releases. The syntax is stable except for the icon integration which is the experimental part.
&ldquo;A mind map is a diagram used to visually organize information into a hierarchy, showing relationships among pieces of the whole. It is often created around a single concept, drawn as an image in the center of a blank page, to which associated representations of ideas such as images, words and parts of words are added. Major ideas are connected directly to the central concept, and other ideas branch out from those major ideas.&rdquo; Wikipedia"><meta property="og:type" content="article"><meta property="og:url" content="https://blahvalf.github.io/docs/mix/mermaid/syntax/mindmap/"><meta property="og:image" content="https://blahvalf.github.io/opengraph/card-base-2_hu_dd1c34c7839ea233.png"><meta property="article:section" content="docs"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://blahvalf.github.io/opengraph/card-base-2_hu_dd1c34c7839ea233.png"><meta name=twitter:title content="Mindmap"><meta name=twitter:description content="Mindmap link
Mindmap: This is an experimental diagram for now. The syntax and properties can change in future releases. The syntax is stable except for the icon integration which is the experimental part.
&ldquo;A mind map is a diagram used to visually organize information into a hierarchy, showing relationships among pieces of the whole. It is often created around a single concept, drawn as an image in the center of a blank page, to which associated representations of ideas such as images, words and parts of words are added. Major ideas are connected directly to the central concept, and other ideas branch out from those major ideas.&rdquo; Wikipedia"><link rel=alternate type=application/atom+xml title="Atom feed for My New Hugo Site" href=/index.xml><script>(()=>{var t=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,e=localStorage.getItem("theme");t&&e===null&&(localStorage.setItem("theme","dark"),document.documentElement.setAttribute("data-dark-mode","")),t&&e==="dark"&&document.documentElement.setAttribute("data-dark-mode",""),e==="dark"&&document.documentElement.setAttribute("data-dark-mode","")})()</script><script type=text/javascript src=https://blahvalf.github.io/docs/js/flexsearch.bundle.min.f5159d5a2151ffbb653996ec17eaff7da4e04c286bd879fc41839d36a5586f3f20eaead0b6089de48f9adc669cdee771.js integrity=sha384-9RWdWiFR/7tlOZbsF+r/faTgTChr2Hn8QYOdNqVYbz8g6urQtgid5I+a3Gac3udx crossorigin=anonymous></script><link rel=preconnect href=https://fonts.gstatic.com/><link rel=preconnect href=https://fonts.gstatic.com/ crossorigin><link href="https://fonts.googleapis.com/css?family=Inter:300,400,600,700|Fira+Code:500,700&display=block" rel=stylesheet><link rel=stylesheet href=/docs/scss/style.min.4c5fa9c08f95877bc2682d6faa056a62706c546ef29e7d986102520046b465930a94653c18b40d9201e6da9504f45393.css integrity=sha384-TF+pwI+Vh3vCaC1vqgVqYnBsVG7ynn2YYQJSAEa0ZZMKlGU8GLQNkgHm2pUE9FOT crossorigin=anonymous></head><body><div class=content><div class="page-wrapper toggled"><nav id=sidebar class=sidebar-wrapper><div class=sidebar-brand><a href=/ aria-label=HomePage alt=HomePage><svg id="Layer_1" viewBox="0 0 250 250"><path d="m143 39.5c-18 0-18 18-18 18s0-18-18-18H22c-2.76.0-5 2.24-5 5v143c0 2.76 2.24 5 5 5h76c7.2.0 8.64 11.52 8.93 16.13.07 1.05.95 1.87 2 1.87h32.14c1.06.0 1.94-.82 2-1.87.29-4.61 1.73-16.13 8.93-16.13h76c2.76.0 5-2.24 5-5V44.5c0-2.76-2.24-5-5-5h-85zM206 163c0 1.38-1.12 2.5-2.5 2.5H143c-18 0-18 18-18 18s0-18-18-18H46.5c-1.38.0-2.5-1.12-2.5-2.5V69c0-1.38 1.12-2.5 2.5-2.5H98c7.2.0 8.64 11.52 8.93 16.13.07 1.05.95 1.87 2 1.87h32.14c1.06.0 1.94-.82 2-1.87.29-4.61 1.73-16.13 8.93-16.13h51.5c1.38.0 2.5 1.12 2.5 2.5v94z" style="fill:#06f"/></svg></a></div><div class=sidebar-content style="height:calc(100% - 131px)"><ul class=sidebar-menu><li class=sidebar-dropdown><button class=btn>
<i class="material-icons me-2">bolt</i>
æˆé•¿</button><div class=sidebar-submenu><ul><li><a class=sidebar-nested-link href=https://blahvalf.github.io/docs/develop/ask/>å¦‚ä½•æé—®ï¼šæé—®çš„æ™ºæ…§</a></li><li><a class=sidebar-nested-link href=https://blahvalf.github.io/docs/develop/analysis/>é—®é¢˜åˆ†æï¼š5W2H</a></li><li><a class=sidebar-nested-link href=https://blahvalf.github.io/docs/develop/demand/>ä¸ªäººéœ€æ±‚ï¼šé©¬æ–¯æ´›ç†è®º</a></li><li><a class=sidebar-nested-link href=https://blahvalf.github.io/docs/develop/value/>ä¸ªäººä»·å€¼ï¼šå†°å±±æ¨¡å‹</a></li></ul></div></li><li class=sidebar-dropdown><button class=btn>
<i class="material-icons me-2">webhook</i>
ä¿¡æ¯æŠ€æœ¯</button><div class=sidebar-submenu><ul><li class="sidebar-dropdown nested"><button class=btn>
è½¯ä»¶</button><div class=sidebar-submenu><ul><li class="sidebar-dropdown nested"><button class=btn>
äº‘åŸç”Ÿ</button><div class=sidebar-submenu><ul><li><a class=sidebar-nested-link href=https://blahvalf.github.io/docs/information/software/cloud/k8s_arch/>K8sæ¶æ„</a></li><li class="sidebar-dropdown nested"><button class=btn>
K8sé›†ç¾¤æ§åˆ¶</button><div class=sidebar-submenu><ul><li><a class=sidebar-nested-link href=https://blahvalf.github.io/docs/information/software/cloud/k8s_rs_manager/resources/>èµ„æºå¯¹è±¡</a></li><li><a class=sidebar-nested-link href=https://blahvalf.github.io/docs/information/software/cloud/k8s_rs_manager/pod/>Pod</a></li><li><a class=sidebar-nested-link href=https://blahvalf.github.io/docs/information/software/cloud/k8s_rs_manager/node/>Node</a></li><li><a class=sidebar-nested-link href=https://blahvalf.github.io/docs/information/software/cloud/k8s_rs_manager/namespace/>Namespace</a></li><li><a class=sidebar-nested-link href=https://blahvalf.github.io/docs/information/software/cloud/k8s_rs_manager/label/>Label</a></li><li><a class=sidebar-nested-link href=https://blahvalf.github.io/docs/information/software/cloud/k8s_rs_manager/annotation/>Annotation</a></li><li><a class=sidebar-nested-link href=https://blahvalf.github.io/docs/information/software/cloud/k8s_rs_manager/taint_toleration/>Taint & Toleration</a></li><li><a class=sidebar-nested-link href=https://blahvalf.github.io/docs/information/software/cloud/k8s_rs_manager/garbage-collection/>åƒåœ¾å›æ”¶</a></li><li><a class=sidebar-nested-link href=https://blahvalf.github.io/docs/information/software/cloud/k8s_rs_manager/scheduling/>èµ„æºè°ƒåº¦</a></li><li><a class=sidebar-nested-link href=https://blahvalf.github.io/docs/information/software/cloud/k8s_rs_manager/qos/>Qos æœåŠ¡è´¨é‡ç­‰çº§</a></li><li><a class=sidebar-nested-link href=https://blahvalf.github.io/docs/information/software/cloud/k8s_rs_manager/deployment/>Deployment</a></li><li><a class=sidebar-nested-link href=https://blahvalf.github.io/docs/information/software/cloud/k8s_rs_manager/statefulset/>StatefulSet</a></li><li><a class=sidebar-nested-link href=https://blahvalf.github.io/docs/information/software/cloud/k8s_rs_manager/deamonset/>DaemonSet</a></li><li><a class=sidebar-nested-link href=https://blahvalf.github.io/docs/information/software/cloud/k8s_rs_manager/replicaset/>ReplicationController å’Œ ReplicaSet</a></li><li><a class=sidebar-nested-link href=https://blahvalf.github.io/docs/information/software/cloud/k8s_rs_manager/job_cronjob/>Job & CronJob</a></li><li><a class=sidebar-nested-link href=https://blahvalf.github.io/docs/information/software/cloud/k8s_rs_manager/ingress/>Ingress</a></li><li><a class=sidebar-nested-link href=https://blahvalf.github.io/docs/information/software/cloud/k8s_rs_manager/custom_hpa/>è‡ªå®šä¹‰æŒ‡æ ‡ HPA</a></li><li><a class=sidebar-nested-link href=https://blahvalf.github.io/docs/information/software/cloud/k8s_rs_manager/admission_controller/>å‡†å…¥æ§åˆ¶å™¨ï¼ˆAdmission Controllerï¼‰</a></li><li><a class=sidebar-nested-link href=https://blahvalf.github.io/docs/information/software/cloud/k8s_rs_manager/revision_generation/>ResourceVersion & Generation</a></li></ul></div></li><li class="sidebar-dropdown nested"><button class=btn>
æœåŠ¡å‘ç°</button><div class=sidebar-submenu><ul><li><a class=sidebar-nested-link href=https://blahvalf.github.io/docs/information/software/cloud/service-discovery/service/>Service</a></li><li><a class=sidebar-nested-link href=https://blahvalf.github.io/docs/information/software/cloud/service-discovery/topology-aware-routing/>æ‹“æ‰‘æ„ŸçŸ¥è·¯ç”±</a></li><li><a class=sidebar-nested-link href=https://blahvalf.github.io/docs/information/software/cloud/service-discovery/ingress/>Ingress</a></li><li><a class=sidebar-nested-link href=https://blahvalf.github.io/docs/information/software/cloud/service-discovery/gateway/>GatewayAPI</a></li></ul></div></li><li class="sidebar-dropdown nested"><button class=btn>
è®¤è¯</button><div class=sidebar-submenu><ul><li><a class=sidebar-nested-link href=https://blahvalf.github.io/docs/information/software/cloud/auth/serviceaccount/>ServiceAccount</a></li><li><a class=sidebar-nested-link href=https://blahvalf.github.io/docs/information/software/cloud/auth/rbac/>RBAC</a></li><li><a class=sidebar-nested-link href=https://blahvalf.github.io/docs/information/software/cloud/auth/networkpolicy/>NetworkPolicy</a></li><li><a class=sidebar-nested-link href=https://blahvalf.github.io/docs/information/software/cloud/auth/spiffe/>SPIFFE</a></li></ul></div></li><li class="sidebar-dropdown nested"><button class=btn>
å­˜å‚¨</button><div class=sidebar-submenu><ul><li><a class=sidebar-nested-link href=https://blahvalf.github.io/docs/information/software/cloud/storage/secret/>Secret</a></li><li><a class=sidebar-nested-link href=https://blahvalf.github.io/docs/information/software/cloud/storage/configmap/>ConfigMap</a></li><li><a class=sidebar-nested-link href=https://blahvalf.github.io/docs/information/software/cloud/storage/volume/>Volume</a></li><li><a class=sidebar-nested-link href=https://blahvalf.github.io/docs/information/software/cloud/storage/pv/>æŒä¹…åŒ–å·ï¼ˆPersistent Volumeï¼‰</a></li><li><a class=sidebar-nested-link href=https://blahvalf.github.io/docs/information/software/cloud/storage/storageclass/>StorageClass</a></li><li><a class=sidebar-nested-link href=https://blahvalf.github.io/docs/information/software/cloud/storage/local-persistent-storage/>æœ¬åœ°æŒä¹…åŒ–å­˜å‚¨</a></li></ul></div></li><li><a class=sidebar-nested-link href=https://blahvalf.github.io/docs/information/software/cloud/resource_oversold/>èµ„æºè¶…å–</a></li><li><a class=sidebar-nested-link href=https://blahvalf.github.io/docs/information/software/cloud/autoscale/>Cluster Autoscaler</a></li></ul></div></li><li><a class=sidebar-nested-link href=https://blahvalf.github.io/docs/information/software/serven_rules/>è®¾è®¡æ¨¡å¼ä¸ä¸ƒå¤§åŸåˆ™</a></li><li><a class=sidebar-nested-link href=https://blahvalf.github.io/docs/information/software/clean_arch/>ç®€æ´æ¶æ„</a></li></ul></div></li><li class="sidebar-dropdown nested"><button class=btn>
é€šä¿¡</button><div class=sidebar-submenu><ul></ul></div></li><li class="sidebar-dropdown nested"><button class=btn>
æ•°æ®</button><div class=sidebar-submenu><ul><li><a class=sidebar-nested-link href=https://blahvalf.github.io/docs/information/data/data_classification/>æ•°æ®å­˜å‚¨ç±»å‹åŠç‰¹ç‚¹</a></li></ul></div></li><li class="sidebar-dropdown nested"><button class=btn>
å®‰å…¨</button><div class=sidebar-submenu><ul><li><a class=sidebar-nested-link href=https://blahvalf.github.io/docs/information/secure/basic_cryptography/>å¯†ç å­¦åŸºç¡€</a></li><li><a class=sidebar-nested-link href=https://blahvalf.github.io/docs/information/secure/modern_cryptography/>ç°ä»£å¯†ç å­¦</a></li><li><a class=sidebar-nested-link href=https://blahvalf.github.io/docs/information/secure/cryptographic_protocol/>å¯†ç åè®®</a></li></ul></div></li><li class="sidebar-dropdown nested"><button class=btn>
AIGC</button><div class=sidebar-submenu><ul></ul></div></li><li class="sidebar-dropdown nested"><button class=btn>
æ‚</button><div class=sidebar-submenu><ul></ul></div></li></ul></div></li><li><a class=sidebar-root-link href=https://blahvalf.github.io/docs/math/><i class="material-icons me-2">calculate</i>
æ•°å­¦</a></li><li class=sidebar-dropdown><button class=btn>
<i class="material-icons me-2">moving</i>
ç»æµ</button><div class=sidebar-submenu><ul><li><a class=sidebar-nested-link href=https://blahvalf.github.io/docs/economy/microeconomics_base/>å¾®è§‚ç»æµå­¦åŸºç¡€</a></li><li><a class=sidebar-nested-link href=https://blahvalf.github.io/docs/economy/macroeconomics_base/>å®è§‚ç»æµå­¦åŸºç¡€</a></li><li><a class=sidebar-nested-link href=https://blahvalf.github.io/docs/economy/financial_market_base/>é‡‘èå¸‚åœºåŸºç¡€</a></li></ul></div></li><li><a class=sidebar-root-link href=https://blahvalf.github.io/docs/history/><i class="material-icons me-2">history</i>
å†å²</a></li><li class="sidebar-dropdown current active"><button class=btn>
<i class="material-icons me-2">book</i>
æ‚</button><div class="sidebar-submenu d-block"><ul><li><a class=sidebar-nested-link href=https://blahvalf.github.io/docs/mix/list/>æ‘©æ—…æ¸…å•</a></li><li class="sidebar-dropdown nested current active"><button class=btn>
Mermaid@v10.6.1 Syntax</button><div class="sidebar-submenu d-block"><ul><li><a class=sidebar-nested-link href=https://blahvalf.github.io/docs/mix/mermaid/syntax/c4/>C4 Diagrams</a></li><li><a class=sidebar-nested-link href=https://blahvalf.github.io/docs/mix/mermaid/syntax/classdiagram/>Class diagrams</a></li><li><a class=sidebar-nested-link href=https://blahvalf.github.io/docs/mix/mermaid/syntax/entityrelationshipdiagram/>Entity Relationship Diagrams</a></li><li><a class=sidebar-nested-link href=https://blahvalf.github.io/docs/mix/mermaid/syntax/examples/>Examples</a></li><li><a class=sidebar-nested-link href=https://blahvalf.github.io/docs/mix/mermaid/syntax/flowchart/>Flowcharts - Basic Syntax</a></li><li><a class=sidebar-nested-link href=https://blahvalf.github.io/docs/mix/mermaid/syntax/gantt/>Gantt diagrams</a></li><li><a class=sidebar-nested-link href=https://blahvalf.github.io/docs/mix/mermaid/syntax/gitgraph/>Gitgraph Diagrams</a></li><li class=current><a class=sidebar-nested-link href=https://blahvalf.github.io/docs/mix/mermaid/syntax/mindmap/>Mindmap</a></li><li><a class=sidebar-nested-link href=https://blahvalf.github.io/docs/mix/mermaid/syntax/pie/>Pie chart diagrams</a></li><li><a class=sidebar-nested-link href=https://blahvalf.github.io/docs/mix/mermaid/syntax/quadrantchart/>Quadrant Chart</a></li><li><a class=sidebar-nested-link href=https://blahvalf.github.io/docs/mix/mermaid/syntax/requirementdiagram/>Requirement Diagram</a></li><li><a class=sidebar-nested-link href=https://blahvalf.github.io/docs/mix/mermaid/syntax/sankey/>Sankey diagram (v10.3.0+)</a></li><li><a class=sidebar-nested-link href=https://blahvalf.github.io/docs/mix/mermaid/syntax/sequencediagram/>Sequence diagrams</a></li><li><a class=sidebar-nested-link href=https://blahvalf.github.io/docs/mix/mermaid/syntax/statediagram/>State diagrams</a></li><li><a class=sidebar-nested-link href=https://blahvalf.github.io/docs/mix/mermaid/syntax/timeline/>Timeline Diagram</a></li><li><a class=sidebar-nested-link href=https://blahvalf.github.io/docs/mix/mermaid/syntax/userjourney/>User Journey Diagram</a></li><li><a class=sidebar-nested-link href=https://blahvalf.github.io/docs/mix/mermaid/syntax/xychart/>XY Chart</a></li></ul></div></li></ul></div></li></ul></div><ul class="sidebar-footer list-unstyled mb-0"></ul></nav><main class="page-content bg-transparent"><div id=top-header class="top-header d-print-none"><div class="header-bar d-flex justify-content-between"><div class="d-flex align-items-center"><a href=/ class="logo-icon me-3" aria-label=HomePage alt=HomePage><div class=small><svg id="Layer_1" viewBox="0 0 250 250"><path d="m143 39.5c-18 0-18 18-18 18s0-18-18-18H22c-2.76.0-5 2.24-5 5v143c0 2.76 2.24 5 5 5h76c7.2.0 8.64 11.52 8.93 16.13.07 1.05.95 1.87 2 1.87h32.14c1.06.0 1.94-.82 2-1.87.29-4.61 1.73-16.13 8.93-16.13h76c2.76.0 5-2.24 5-5V44.5c0-2.76-2.24-5-5-5h-85zM206 163c0 1.38-1.12 2.5-2.5 2.5H143c-18 0-18 18-18 18s0-18-18-18H46.5c-1.38.0-2.5-1.12-2.5-2.5V69c0-1.38 1.12-2.5 2.5-2.5H98c7.2.0 8.64 11.52 8.93 16.13.07 1.05.95 1.87 2 1.87h32.14c1.06.0 1.94-.82 2-1.87.29-4.61 1.73-16.13 8.93-16.13h51.5c1.38.0 2.5 1.12 2.5 2.5v94z" style="fill:#06f"/></svg></div><div class=big><svg id="Layer_1" viewBox="0 0 250 250"><path d="m143 39.5c-18 0-18 18-18 18s0-18-18-18H22c-2.76.0-5 2.24-5 5v143c0 2.76 2.24 5 5 5h76c7.2.0 8.64 11.52 8.93 16.13.07 1.05.95 1.87 2 1.87h32.14c1.06.0 1.94-.82 2-1.87.29-4.61 1.73-16.13 8.93-16.13h76c2.76.0 5-2.24 5-5V44.5c0-2.76-2.24-5-5-5h-85zM206 163c0 1.38-1.12 2.5-2.5 2.5H143c-18 0-18 18-18 18s0-18-18-18H46.5c-1.38.0-2.5-1.12-2.5-2.5V69c0-1.38 1.12-2.5 2.5-2.5H98c7.2.0 8.64 11.52 8.93 16.13.07 1.05.95 1.87 2 1.87h32.14c1.06.0 1.94-.82 2-1.87.29-4.61 1.73-16.13 8.93-16.13h51.5c1.38.0 2.5 1.12 2.5 2.5v94z" style="fill:#06f"/></svg></div></a><button id=close-sidebar class="btn btn-icon btn-soft">
<span class="material-icons size-20 menu-icon align-middle">menu</span>
</button>
<button id=flexsearch-button class="ms-3 btn btn-soft" data-bs-toggle=collapse data-bs-target=#FlexSearchCollapse aria-expanded=false aria-controls=FlexSearchCollapse>
<span class="material-icons size-20 menu-icon align-middle">search</span>
<span class="flexsearch-button-placeholder ms-1 me-2 d-none d-sm-block">Search</span><div class="d-none d-sm-block"><span class=flexsearch-button-keys><kbd class=flexsearch-button-cmd-key><svg width="44" height="15"><path d="M2.118 11.5A1.519 1.519.0 011 11.042 1.583 1.583.0 011 8.815a1.519 1.519.0 011.113-.458h.715V6.643h-.71A1.519 1.519.0 011 6.185 1.519 1.519.0 01.547 5.071 1.519 1.519.0 011 3.958 1.519 1.519.0 012.118 3.5a1.519 1.519.0 011.114.458A1.519 1.519.0 013.69 5.071v.715H5.4V5.071A1.564 1.564.0 016.976 3.5 1.564 1.564.0 018.547 5.071 1.564 1.564.0 016.976 6.643H6.261V8.357h.715a1.575 1.575.0 011.113 2.685 1.583 1.583.0 01-2.227.0A1.519 1.519.0 015.4 9.929V9.214H3.69v.715a1.519 1.519.0 01-.458 1.113A1.519 1.519.0 012.118 11.5zm0-.857a.714.714.0 00.715-.714V9.214H2.118a.715.715.0 100 1.429zm4.858.0a.715.715.0 100-1.429H6.261v.715a.714.714.0 00.715.714zM3.69 8.357H5.4V6.643H3.69zM2.118 5.786h.715V5.071a.714.714.0 00-.715-.714.715.715.0 00-.5 1.22A.686.686.0 002.118 5.786zm4.143.0h.715a.715.715.0 00.5-1.22.715.715.0 00-1.22.5z" fill="currentColor"/><path d="M12.4 11.475H11.344l3.879-7.95h1.056z" fill="currentColor"/><path d="M25.073 5.384l-.864.576a2.121 2.121.0 00-1.786-.923 2.207 2.207.0 00-2.266 2.326 2.206 2.206.0 002.266 2.325 2.1 2.1.0 001.782-.918l.84.617a3.108 3.108.0 01-2.622 1.293 3.217 3.217.0 01-3.349-3.317 3.217 3.217.0 013.349-3.317A3.046 3.046.0 0125.073 5.384z" fill="currentColor"/><path d="M30.993 5.142h-2.07v5.419H27.891V5.142h-2.07V4.164h5.172z" fill="currentColor"/><path d="M34.67 4.164c1.471.0 2.266.658 2.266 1.851.0 1.087-.832 1.809-2.134 1.855l2.107 2.691h-1.28L33.591 7.87H33.07v2.691H32.038v-6.4zm-1.6.969v1.8h1.572c.832.0 1.22-.3 1.22-.918s-.411-.882-1.22-.882z" fill="currentColor"/><path d="M42.883 10.561H38.31v-6.4h1.033V9.583h3.54z" fill="currentColor"/></svg>
</kbd><kbd class=flexsearch-button-key><svg width="15" height="15"><path d="M5.926 12.279H4.41L9.073 2.721H10.59z" fill="currentColor"/></svg></kbd></span></div></button></div><div class="d-flex align-items-center"><ul class="list-unstyled mb-0"></ul><button id=mode class="btn btn-icon btn-default ms-2" type=button aria-label="Toggle user interface mode">
<span class=toggle-dark><svg height="30" width="30" viewBox="0 0 48 48" fill="currentColor"><title>Enable dark mode</title><path d="M24 42q-7.5.0-12.75-5.25T6 24t5.25-12.75T24 6q.4.0.85.025.45.025 1.15.075-1.8 1.6-2.8 3.95t-1 4.95q0 4.5 3.15 7.65Q28.5 25.8 33 25.8q2.6.0 4.95-.925T41.9 22.3q.05.6.075.975Q42 23.65 42 24q0 7.5-5.25 12.75T24 42zm0-3q5.45.0 9.5-3.375t5.05-7.925q-1.25.55-2.675.825Q34.45 28.8 33 28.8q-5.75.0-9.775-4.025T19.2 15q0-1.2.25-2.575t.9-3.125q-4.9 1.35-8.125 5.475Q9 18.9 9 24q0 6.25 4.375 10.625T24 39zm-.2-14.85z"/></svg>
</span><span class=toggle-light><svg height="30" width="30" viewBox="0 0 48 48" fill="currentColor"><title>Enable light mode</title><path d="M24 31q2.9.0 4.95-2.05T31 24t-2.05-4.95T24 17t-4.95 2.05T17 24t2.05 4.95T24 31zm0 3q-4.15.0-7.075-2.925T14 24t2.925-7.075T24 14t7.075 2.925T34 24t-2.925 7.075T24 34zM3.5 25.5q-.65.0-1.075-.425Q2 24.65 2 24t.425-1.075Q2.85 22.5 3.5 22.5h5q.65.0 1.075.425Q10 23.35 10 24t-.425 1.075T8.5 25.5zm36 0q-.65.0-1.075-.425Q38 24.65 38 24t.425-1.075T39.5 22.5h5q.65.0 1.075.425Q46 23.35 46 24t-.425 1.075-1.075.425zM24 10q-.65.0-1.075-.425Q22.5 9.15 22.5 8.5v-5q0-.65.425-1.075Q23.35 2 24 2t1.075.425T25.5 3.5v5q0 .65-.425 1.075Q24.65 10 24 10zm0 36q-.65.0-1.075-.425T22.5 44.5v-5q0-.65.425-1.075Q23.35 38 24 38t1.075.425.425 1.075v5q0 .65-.425 1.075Q24.65 46 24 46zM12 14.1l-2.85-2.8q-.45-.45-.425-1.075.025-.625.425-1.075.45-.45 1.075-.45t1.075.45L14.1 12q.4.45.4 1.05.0.6-.4 1-.4.45-1.025.45T12 14.1zm24.7 24.75L33.9 36q-.4-.45-.4-1.075t.45-1.025q.4-.45 1-.45t1.05.45l2.85 2.8q.45.45.425 1.075-.025.625-.425 1.075-.45.45-1.075.45t-1.075-.45zM33.9 14.1q-.45-.45-.45-1.05.0-.6.45-1.05l2.8-2.85q.45-.45 1.075-.425.625.025 1.075.425.45.45.45 1.075t-.45 1.075L36 14.1q-.4.4-1.025.4t-1.075-.4zM9.15 38.85q-.45-.45-.45-1.075t.45-1.075L12 33.9q.45-.45 1.05-.45.6.0 1.05.45.45.45.45 1.05.0.6-.45 1.05l-2.8 2.85q-.45.45-1.075.425-.625-.025-1.075-.425zM24 24z"/></svg></span></button></div></div><div class=collapse id=FlexSearchCollapse><div class=flexsearch-container><div class=flexsearch-keymap><li><kbd class=flexsearch-button-cmd-key><svg width="15" height="15" aria-label="Arrow down" role="img"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M7.5 3.5v8m3-3-3 3-3-3"/></g></svg></kbd>
<kbd class=flexsearch-button-cmd-key><svg width="15" height="15" aria-label="Arrow up" role="img"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M7.5 11.5v-8m3 3-3-3-3 3"/></g></svg></kbd>
<span class=flexsearch-key-label>to navigate</span></li><li><kbd class=flexsearch-button-cmd-key><svg width="15" height="15" aria-label="Enter key" role="img"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M12 3.53088v3c0 1-1 2-2 2H4m3 3-3-3 3-3"/></g></svg></kbd>
<span class=flexsearch-key-label>to select</span></li><li><kbd class=flexsearch-button-cmd-key><svg width="15" height="15" aria-label="Escape key" role="img"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M13.6167 8.936c-.1065.3583-.6883.962-1.4875.962-.7993.0-1.653-.9165-1.653-2.1258v-.5678c0-1.2548.7896-2.1016 1.653-2.1016s1.3601.4778 1.4875 1.0724M9 6c-.1352-.4735-.7506-.9219-1.46-.8972-.7092.0246-1.344.57-1.344 1.2166s.4198.8812 1.3445.9805C8.465 7.3992 8.968 7.9337 9 8.5s-.454 1.398-1.4595 1.398C6.6593 9.898 6 9 5.963 8.4851m-1.4748.5368c-.2635.5941-.8099.876-1.5443.876s-1.7073-.6248-1.7073-2.204v-.4603c0-1.0416.721-2.131 1.7073-2.131.9864.0 1.6425 1.031 1.5443 2.2492h-2.956"/></g></svg></kbd>
<span class=flexsearch-key-label>to close</span></li></div><form class="flexsearch position-relative flex-grow-1 ms-2 me-2"><div class="d-flex flex-row"><input id=flexsearch class=form-control type=search placeholder=Search aria-label=Search autocomplete=off>
<button id=hideFlexsearch type=button class="ms-2 btn btn-soft">
cancel</button></div><div id=suggestions class="shadow rounded-1 d-none"></div></form></div></div></div><div class=container-fluid><div class=layout-spacing><div class="d-md-flex justify-content-between align-items-center"><nav aria-label=breadcrumb class="d-inline-block pb-2 mt-1 mt-sm-0"><ul id=breadcrumbs class="breadcrumb bg-transparent mb-0" itemscope itemtype=https://schema.org/BreadcrumbList><li class="breadcrumb-item text-capitalize active" aria-current=page itemprop=itemListElement itemscope itemtype=https://schema.org/ListItem><a itemprop=item href=/docs/><i class="material-icons size-20 align-text-bottom" itemprop=name>Home</i>
</a><meta itemprop=position content='1'></li><li class="breadcrumb-item text-capitalize" itemprop=itemListElement itemscope itemtype=https://schema.org/ListItem><a itemprop=item href=/docs/mix/><span itemprop=name>æ‚</span>
</a><meta itemprop=position content='2'></li><li class="breadcrumb-item text-capitalize" itemprop=itemListElement itemscope itemtype=https://schema.org/ListItem><a itemprop=item href=/docs/mix/mermaid/><span itemprop=name>Mermaid@v10.6.1 Syntax</span>
</a><meta itemprop=position content='3'></li><li class="breadcrumb-item text-capitalize active" itemprop=itemListElement itemscope itemtype=https://schema.org/ListItem><span itemprop=name>Mindmap</span>
<meta itemprop=position content='4'></li></ul></nav></div><div class="row flex-xl-nowrap"><div class="docs-toc col-xl-3 d-xl-block"><toc><div class="fw-bold text-uppercase mb-2">On this page</div><nav id=toc><ul><li><a href=#mindmap>Mindmap</a><ul><li><ul><li><a href=#an-example-of-a-mindmap>An example of a mindmap.</a></li></ul></li><li><a href=#syntax>Syntax</a></li><li><a href=#different-shapes>Different shapes</a><ul><li><a href=#square>Square</a></li><li><a href=#rounded-square>Rounded square</a></li><li><a href=#circle>Circle</a></li><li><a href=#bang>Bang</a></li><li><a href=#cloud>Cloud</a></li><li><a href=#hexagon>Hexagon</a></li><li><a href=#default>Default</a></li></ul></li></ul></li><li><a href=#icons-and-classes>Icons and classes</a><ul><li><a href=#icons>Icons</a></li><li><a href=#classes>Classes</a></li><li><a href=#unclear-indentation>Unclear indentation</a></li><li><a href=#markdown-strings>Markdown Strings</a></li><li><a href=#integrating-with-your-librarywebsite>Integrating with your library/website.</a></li></ul></li></ul></nav></toc></div><div class="docs-toc-mobile d-print-none d-xl-none"><button id=toc-dropdown-btn class="btn-secondary dropdown-toggle" type=button data-bs-toggle=dropdown data-bs-offset=0,0 aria-expanded=false>
Table of Contents</button><nav id=toc-mobile><ul class=dropdown-menu><li><a href=#mindmap>Mindmap</a><ul><li><ul><li><a href=#an-example-of-a-mindmap>An example of a mindmap.</a></li></ul></li><li><a href=#syntax>Syntax</a></li><li><a href=#different-shapes>Different shapes</a><ul><li><a href=#square>Square</a></li><li><a href=#rounded-square>Rounded square</a></li><li><a href=#circle>Circle</a></li><li><a href=#bang>Bang</a></li><li><a href=#cloud>Cloud</a></li><li><a href=#hexagon>Hexagon</a></li><li><a href=#default>Default</a></li></ul></li></ul></li><li><a href=#icons-and-classes>Icons and classes</a><ul><li><a href=#icons>Icons</a></li><li><a href=#classes>Classes</a></li><li><a href=#unclear-indentation>Unclear indentation</a></li><li><a href=#markdown-strings>Markdown Strings</a></li><li><a href=#integrating-with-your-librarywebsite>Integrating with your library/website.</a></li></ul></li></ul></nav></div><div class="docs-content col-12 col-xl-9 mt-0"><div class="mb-0 d-flex"><i class="material-icons title-icon me-2">article</i><h1 class="content-title mb-0">Mindmap</h1></div><p class="lead mb-3"></p><div id=content class=main-content data-bs-spy=scroll data-bs-root-margin="0px 0px -65%" data-bs-target=#toc-mobile><div data-prismjs-copy data-prismjs-copy-success data-prismjs-copy-error><h1 id=mindmap>Mindmap <a href=#mindmap class=anchor aria-hidden=true><i class="material-icons align-middle">link</i></a></h1><blockquote><p>Mindmap: This is an experimental diagram for now. The syntax and properties can change in future releases. The syntax is stable except for the icon integration which is the experimental part.</p></blockquote><p>&ldquo;A mind map is a diagram used to visually organize information into a hierarchy, showing relationships among pieces of the whole. It is often created around a single concept, drawn as an image in the center of a blank page, to which associated representations of ideas such as images, words and parts of words are added. Major ideas are connected directly to the central concept, and other ideas branch out from those major ideas.&rdquo; Wikipedia</p><h3 id=an-example-of-a-mindmap>An example of a mindmap. <a href=#an-example-of-a-mindmap class=anchor aria-hidden=true><i class="material-icons align-middle">link</i></a></h3><div class=prism-codeblock><pre id=1609723 class=language-mermaid-example>
  <code>mindmap
  root((mindmap))
    Origins
      Long history
      ::icon(fa fa-book)
      Popularisation
        British popular psychology author Tony Buzan
    Research
      On effectiveness&lt;br/&gt;and features
      On Automatic creation
        Uses
            Creative techniques
            Strategic planning
            Argument mapping
    Tools
      Pen and paper
      Mermaid</code>
  </pre></div><pre class=mermaid>mindmap
  root((mindmap))
    Origins
      Long history
      ::icon(fa fa-book)
      Popularisation
        British popular psychology author Tony Buzan
    Research
      On effectiveness&lt;br/&gt;and features
      On Automatic creation
        Uses
            Creative techniques
            Strategic planning
            Argument mapping
    Tools
      Pen and paper
      Mermaid
</pre><h2 id=syntax>Syntax <a href=#syntax class=anchor aria-hidden=true><i class="material-icons align-middle">link</i></a></h2><p>The syntax for creating Mindmaps is simple and relies on indentation for setting the levels in the hierarchy.</p><p>In the following example you can see how there are 3 different levels. One with starting at the left of the text and another level with two rows starting at the same column, defining the node A. At the end there is one more level where the text is indented further than the previous lines defining the nodes B and C.</p><pre><code>mindmap
    Root
        A
            B
            C
</code></pre><p>In summary is a simple text outline where there is one node at the root level called <code>Root</code> which has one child <code>A</code>. <code>A</code> in turn has two children <code>B</code>and <code>C</code>. In the diagram below we can see this rendered as a mindmap.</p><div class=prism-codeblock><pre id=680b801 class=language-mermaid-example>
  <code>mindmap
Root
    A
      B
      C</code>
  </pre></div><pre class=mermaid>mindmap
Root
    A
      B
      C
</pre><p>In this way we can use a text outline to generate a hierarchical mindmap.</p><h2 id=different-shapes>Different shapes <a href=#different-shapes class=anchor aria-hidden=true><i class="material-icons align-middle">link</i></a></h2><p>Mermaid mindmaps can show nodes using different shapes. When specifying a shape for a node the syntax is similar to flowchart nodes, with an id followed by the shape definition and with the text within the shape delimiters. Where possible we try/will try to keep the same shapes as for flowcharts, even though they are not all supported from the start.</p><p>Mindmap can show the following shapes:</p><h3 id=square>Square <a href=#square class=anchor aria-hidden=true><i class="material-icons align-middle">link</i></a></h3><div class=prism-codeblock><pre id=82e501b class=language-mermaid-example>
  <code>mindmap
    id[I am a square]</code>
  </pre></div><pre class=mermaid>mindmap
    id[I am a square]
</pre><h3 id=rounded-square>Rounded square <a href=#rounded-square class=anchor aria-hidden=true><i class="material-icons align-middle">link</i></a></h3><div class=prism-codeblock><pre id=a01d279 class=language-mermaid-example>
  <code>mindmap
    id(I am a rounded square)</code>
  </pre></div><pre class=mermaid>mindmap
    id(I am a rounded square)
</pre><h3 id=circle>Circle <a href=#circle class=anchor aria-hidden=true><i class="material-icons align-middle">link</i></a></h3><div class=prism-codeblock><pre id=28d25b5 class=language-mermaid-example>
  <code>mindmap
    id((I am a circle))</code>
  </pre></div><pre class=mermaid>mindmap
    id((I am a circle))
</pre><h3 id=bang>Bang <a href=#bang class=anchor aria-hidden=true><i class="material-icons align-middle">link</i></a></h3><div class=prism-codeblock><pre id=8e9c7ed class=language-mermaid-example>
  <code>mindmap
    id))I am a bang((</code>
  </pre></div><pre class=mermaid>mindmap
    id))I am a bang((
</pre><h3 id=cloud>Cloud <a href=#cloud class=anchor aria-hidden=true><i class="material-icons align-middle">link</i></a></h3><div class=prism-codeblock><pre id=c7bf4c8 class=language-mermaid-example>
  <code>mindmap
    id)I am a cloud(</code>
  </pre></div><pre class=mermaid>mindmap
    id)I am a cloud(
</pre><h3 id=hexagon>Hexagon <a href=#hexagon class=anchor aria-hidden=true><i class="material-icons align-middle">link</i></a></h3><div class=prism-codeblock><pre id=f2fa2dd class=language-mermaid-example>
  <code>mindmap
    id{{I am a hexagon}}</code>
  </pre></div><pre class=mermaid>mindmap
    id{{I am a hexagon}}
</pre><h3 id=default>Default <a href=#default class=anchor aria-hidden=true><i class="material-icons align-middle">link</i></a></h3><div class=prism-codeblock><pre id=2dafb88 class=language-mermaid-example>
  <code>mindmap
    I am the default shape</code>
  </pre></div><pre class=mermaid>mindmap
    I am the default shape
</pre><p>More shapes will be added, beginning with the shapes available in flowcharts.</p><h1 id=icons-and-classes>Icons and classes <a href=#icons-and-classes class=anchor aria-hidden=true><i class="material-icons align-middle">link</i></a></h1><h2 id=icons>Icons <a href=#icons class=anchor aria-hidden=true><i class="material-icons align-middle">link</i></a></h2><p>As with flowcharts you can add icons to your nodes but with an updated syntax. The styling for the font based icons are added during the integration so that they are available for the web page. <em>This is not something a diagram author can do but has to be done with the site administrator or the integrator</em>. Once the icon fonts are in place you add them to the mind map nodes using the <code>::icon()</code> syntax. You place the classes for the icon within the parenthesis like in the following example where icons for material design and <a href="https://fontawesome.com/v5/search?o=r&m=free" rel=external target=_blank>Font Awesome 5<svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentColor" d="M14 5c-.552.0-1-.448-1-1s.448-1 1-1h6c.552.0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1V6.414l-7.293 7.293c-.391.39-1.024.39-1.414.0-.391-.391-.391-1.024.0-1.414L17.586 5H14zM5 7c-.552.0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552.0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1V19c0 1.657-1.343 3-3 3H5c-1.657.0-3-1.343-3-3V8c0-1.657 1.343-3 3-3h4.563c.552.0 1 .448 1 1s-.448 1-1 1H5z"/></svg></a> are displayed. The intention is that this approach should be used for all diagrams supporting icons. <strong>Experimental feature:</strong> This wider scope is also the reason Mindmaps are experimental as this syntax and approach could change.</p><div class=prism-codeblock><pre id=9f86a76 class=language-mermaid-example>
  <code>mindmap
    Root
        A
        ::icon(fa fa-book)
        B(B)
        ::icon(mdi mdi-skull-outline)</code>
  </pre></div><pre class=mermaid>mindmap
    Root
        A
        ::icon(fa fa-book)
        B(B)
        ::icon(mdi mdi-skull-outline)
</pre><h2 id=classes>Classes <a href=#classes class=anchor aria-hidden=true><i class="material-icons align-middle">link</i></a></h2><p>Again the syntax for adding classes is similar to flowcharts. You can add classes using a triple colon following a number of css classes separated by space. In the following example one of the nodes has two custom classes attached urgent turning the background red and the text white and large increasing the font size:</p><div class=prism-codeblock><pre id=31ad41d class=language-mermaid-example>
  <code>mindmap
    Root
        A[A]
        :::urgent large
        B(B)
        C</code>
  </pre></div><pre class=mermaid>mindmap
    Root
        A[A]
        :::urgent large
        B(B)
        C
</pre><p><em>These classes need to be supplied by the site administrator.</em></p><h2 id=unclear-indentation>Unclear indentation <a href=#unclear-indentation class=anchor aria-hidden=true><i class="material-icons align-middle">link</i></a></h2><p>The actual indentation does not really matter only compared with the previous rows. If we take the previous example and disrupt it a little we can see how the calculations are performed. Let us start with placing C with a smaller indentation than <code>B</code> but larger then <code>A</code>.</p><pre><code>mindmap
    Root
        A
            B
          C
</code></pre><p>This outline is unclear as <code>B</code> clearly is a child of <code>A</code> but when we move on to <code>C</code> the clarity is lost. <code>C</code> is not a child of <code>B</code> with a higher indentation nor does it have the same indentation as <code>B</code>. The only thing that is clear is that the first node with smaller indentation, indicating a parent, is A. Then Mermaid relies on this known truth and compensates for the unclear indentation and selects <code>A</code> as a parent of <code>C</code> leading till the same diagram with <code>B</code> and <code>C</code> as siblings.</p><div class=prism-codeblock><pre id=724b59d class=language-mermaid-example>
  <code>mindmap
Root
    A
        B
      C</code>
  </pre></div><pre class=mermaid>mindmap
Root
    A
        B
      C
</pre><h2 id=markdown-strings>Markdown Strings <a href=#markdown-strings class=anchor aria-hidden=true><i class="material-icons align-middle">link</i></a></h2><p>The &ldquo;Markdown Strings&rdquo; feature enhances mind maps by offering a more versatile string type, which supports text formatting options such as bold and italics, and automatically wraps text within labels.</p><div class=prism-codeblock><pre id=cb9cb2c class=language-mermaid-example>
  <code>mindmap
    id1[&#34;`**Root** with
a second line
Unicode works too: ğŸ¤“`&#34;]
      id2[&#34;`The dog in **the** hog... a *very long text* that wraps to a new line`&#34;]
      id3[Regular labels still works]</code>
  </pre></div><pre class=mermaid>mindmap
    id1[&#34;`**Root** with
a second line
Unicode works too: ğŸ¤“`&#34;]
      id2[&#34;`The dog in **the** hog... a *very long text* that wraps to a new line`&#34;]
      id3[Regular labels still works]
</pre><p>Formatting:</p><ul><li>For bold text, use double asterisks ** before and after the text.</li><li>For italics, use single asterisks * before and after the text.</li><li>With traditional strings, you needed to add<br>tags for text to wrap in nodes. However, markdown strings automatically wrap text when it becomes too long and allows you to start a new line by simply using a newline character instead of a<br>tag.</li></ul><h2 id=integrating-with-your-librarywebsite>Integrating with your library/website. <a href=#integrating-with-your-librarywebsite class=anchor aria-hidden=true><i class="material-icons align-middle">link</i></a></h2><p>Mindmap uses the experimental lazy loading & async rendering features which could change in the future. From version 9.4.0 this diagram is included in mermaid but use lazy loading in order to keep the size of mermaid down. This is important in order to be able to add additional diagrams going forward.</p><p>You can still use the pre 9.4.0 method to add mermaid with mindmaps to a web page:</p><div class=prism-codeblock><pre id=15cd8ac class=language-html>
  <code>&lt;script type=&#34;module&#34;&gt;
  import mermaid from &#39;https://cdn.jsdelivr.net/npm/mermaid@9.3.0/dist/mermaid.esm.min.mjs&#39;;
  import mindmap from &#39;https://cdn.jsdelivr.net/npm/@mermaid-js/mermaid-mindmap@9.3.0/dist/mermaid-mindmap.esm.min.mjs&#39;;
  await mermaid.registerExternalDiagrams([mindmap]);
&lt;/script&gt;</code>
  </pre></div><p>From version 9.4.0 you can simplify this code to:</p><div class=prism-codeblock><pre id=81d203c class=language-html>
  <code>&lt;script type=&#34;module&#34;&gt;
  import mermaid from &#39;https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs&#39;;
&lt;/script&gt;</code>
  </pre></div><p>You can also refer the implementation in the live editor <a href=https://github.com/mermaid-js/mermaid-live-editor/blob/develop/src/lib/util/mermaid.ts rel=external target=_blank>here<svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentColor" d="M14 5c-.552.0-1-.448-1-1s.448-1 1-1h6c.552.0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1V6.414l-7.293 7.293c-.391.39-1.024.39-1.414.0-.391-.391-.391-1.024.0-1.414L17.586 5H14zM5 7c-.552.0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552.0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1V19c0 1.657-1.343 3-3 3H5c-1.657.0-3-1.343-3-3V8c0-1.657 1.343-3 3-3h4.563c.552.0 1 .448 1 1s-.448 1-1 1H5z"/></svg></a> to see how the async loading is done.</p></div><script src=/docs/js/mermaid.min.a4a583544e57b0ee421947966ee3a1ece84217be936d80e4ebb1ab6e798219816de5512403f79735bfef34e4d955e6cd.js integrity=sha384-pKWDVE5XsO5CGUeWbuOh7OhCF76TbYDk67GrbnmCGYFt5VEkA/eXNb/vNOTZVebN></script><script>const config={startOnLoad:!0,logLevel:"error",align:"center",theme:"null"};mermaid.initialize(config)</script></div><div><hr class=doc-hr><div id=doc-nav class=d-print-none><div class="row flex-xl-nowrap"><div class="col-sm-6 pt-2 doc-next"><a href=/docs/mix/mermaid/syntax/gitgraph/><div class="card h-100 my-1"><div class="card-body py-2"><p class="card-title fs-5 fw-semibold lh-base mb-0"><i class="material-icons align-middle">navigate_before</i> Gitgraph Diagrams</p><p class="card-text ms-2"></p></div></div></a></div><div class="col-sm-6 pt-2 doc-prev"><a class=ms-auto href=/docs/mix/mermaid/syntax/pie/><div class="card h-100 my-1 text-end"><div class="card-body py-2"><p class="card-title fs-5 fw-semibold lh-base mb-0">Pie chart diagrams <i class="material-icons align-middle">navigate_next</i></p><p class="card-text me-2"></p></div></div></a></div></div></div></div></div></div></div></div><footer class="shadow py-3 d-print-none"><div class=container-fluid><div class="row align-items-center"><div class=col><div class="text-sm-start text-center mx-md-2"><p class=mb-0>Â© 2025 Blahvalf.</p></div></div></div></div></footer></main></div></div><button onclick=topFunction() id=back-to-top aria-label="Back to Top Button" class="back-to-top fs-5"><svg width="24" height="24"><path d="M12 10.224l-6.3 6.3-1.38-1.372L12 7.472l7.68 7.68-1.38 1.376z" style="fill:#fff"/></svg></button>
<script>(()=>{var e=document.getElementById("mode");e!==null&&(window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>{e.matches?(localStorage.setItem("theme","dark"),document.documentElement.setAttribute("data-dark-mode","")):(localStorage.setItem("theme","light"),document.documentElement.removeAttribute("data-dark-mode"))}),e.addEventListener("click",()=>{document.documentElement.toggleAttribute("data-dark-mode"),localStorage.setItem("theme",document.documentElement.hasAttribute("data-dark-mode")?"dark":"light")}),localStorage.getItem("theme")==="dark"?document.documentElement.setAttribute("data-dark-mode",""):document.documentElement.removeAttribute("data-dark-mode"))})()</script><script src=/docs/js/bootstrap.c7927bdd82eceb076739257add3f4b0e11379da037c07d5c7110daeb6de0e3edcb2de867604550f88815157e4ec4ddb7.js integrity=sha384-x5J73YLs6wdnOSV63T9LDhE3naA3wH1ccRDa623g4+3LLehnYEVQ+IgVFX5OxN23 defer></script><script type=text/javascript src=https://blahvalf.github.io/docs/js/bundle.min.482e4e9c7213a721af4f033c69129711f8e6b00e365c43dffa349a62a94367dfdeaefb02c723d750a5571347dbe04edd.js integrity=sha384-SC5OnHITpyGvTwM8aRKXEfjmsA42XEPf+jSaYqlDZ9/ervsCxyPXUKVXE0fb4E7d crossorigin=anonymous defer></script><script type=module>
    var suggestions = document.getElementById('suggestions');
    var search = document.getElementById('flexsearch');

    const flexsearchContainer = document.getElementById('FlexSearchCollapse');

    const hideFlexsearchBtn = document.getElementById('hideFlexsearch');

    const configObject = { toggle: false }
    const flexsearchContainerCollapse = new Collapse(flexsearchContainer, configObject) 

    if (search !== null) {
        document.addEventListener('keydown', inputFocus);
        flexsearchContainer.addEventListener('shown.bs.collapse', function () {
            search.focus();
        });
        
        var topHeader = document.getElementById("top-header");
        document.addEventListener('click', function(elem) {
            if (!flexsearchContainer.contains(elem.target) && !topHeader.contains(elem.target))
                flexsearchContainerCollapse.hide();
        });
    }

    hideFlexsearchBtn.addEventListener('click', () =>{
        flexsearchContainerCollapse.hide()
    })

    function inputFocus(e) {
        if (e.ctrlKey && e.key === '/') {
            e.preventDefault();
            flexsearchContainerCollapse.toggle();
        }
        if (e.key === 'Escape' ) {
            search.blur();
            
            flexsearchContainerCollapse.hide();
        }
    };

    document.addEventListener('click', function(event) {

    var isClickInsideElement = suggestions.contains(event.target);

    if (!isClickInsideElement) {
        suggestions.classList.add('d-none');
    }

    });

    


    document.addEventListener('keydown',suggestionFocus);

    function suggestionFocus(e) {
    const suggestionsHidden = suggestions.classList.contains('d-none');
    if (suggestionsHidden) return;

    const focusableSuggestions= [...suggestions.querySelectorAll('a')];
    if (focusableSuggestions.length === 0) return;

    const index = focusableSuggestions.indexOf(document.activeElement);

    if (e.key === "ArrowUp") {
        e.preventDefault();
        const nextIndex = index > 0 ? index - 1 : 0;
        focusableSuggestions[nextIndex].focus();
    }
    else if (e.key === "ArrowDown") {
        e.preventDefault();
        const nextIndex= index + 1 < focusableSuggestions.length ? index + 1 : index;
        focusableSuggestions[nextIndex].focus();
    }

    }

    


    (function(){

    var index = new FlexSearch.Document({
        
        tokenize: "forward",
        minlength:  0 ,
        cache:  100 ,
        optimize:  true ,
        document: {
        id: 'id',
        store: [
            "href", "title", "description"
        ],
        index: ["title", "description", "content"]
        }
    });


    


    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    


    

    

    index.add(
            {
                id:  0 ,
                href: "\/docs\/information\/software\/cloud\/k8s_arch\/",
                title: "K8sæ¶æ„",
                description: "ç³»ç»Ÿæ¶æ„ linkKubernetes æœ€åˆæºäºè°·æ­Œå†…éƒ¨çš„ Borgï¼Œæä¾›äº†é¢å‘åº”ç”¨çš„å®¹å™¨é›†ç¾¤éƒ¨ç½²å’Œç®¡ç†ç³»ç»Ÿã€‚Kubernetes çš„ç›®æ ‡æ—¨åœ¨æ¶ˆé™¤ç¼–æ’ç‰©ç† / è™šæ‹Ÿè®¡ç®—ï¼Œç½‘ç»œå’Œå­˜å‚¨åŸºç¡€è®¾æ–½çš„è´Ÿæ‹…ï¼Œå¹¶ä½¿åº”ç”¨ç¨‹åºè¿è¥å•†å’Œå¼€å‘äººå‘˜å®Œå…¨å°†é‡ç‚¹æ”¾åœ¨ä»¥å®¹å™¨ä¸ºä¸­å¿ƒçš„åŸè¯­ä¸Šè¿›è¡Œè‡ªåŠ©è¿è¥ã€‚Kubernetes ä¹Ÿæä¾›ç¨³å®šã€å…¼å®¹çš„åŸºç¡€ï¼ˆå¹³å°ï¼‰ï¼Œç”¨äºæ„å»ºå®šåˆ¶åŒ–çš„ workflows å’Œæ›´é«˜çº§çš„è‡ªåŠ¨åŒ–ä»»åŠ¡ã€‚ Kubernetes å…·å¤‡å®Œå–„çš„é›†ç¾¤ç®¡ç†èƒ½åŠ›ï¼ŒåŒ…æ‹¬å¤šå±‚æ¬¡çš„å®‰å…¨é˜²æŠ¤å’Œå‡†å…¥æœºåˆ¶ã€å¤šç§Ÿæˆ·åº”ç”¨æ”¯æ’‘èƒ½åŠ›ã€é€æ˜çš„æœåŠ¡æ³¨å†Œå’ŒæœåŠ¡å‘ç°æœºåˆ¶ã€å†…å»ºè´Ÿè½½å‡è¡¡å™¨ã€æ•…éšœå‘ç°å’Œè‡ªæˆ‘ä¿®å¤èƒ½åŠ›ã€æœåŠ¡æ»šåŠ¨å‡çº§å’Œåœ¨çº¿æ‰©å®¹ã€å¯æ‰©å±•çš„èµ„æºè‡ªåŠ¨è°ƒåº¦æœºåˆ¶ã€å¤šç²’åº¦çš„èµ„æºé…é¢ç®¡ç†èƒ½åŠ›ã€‚Kubernetes è¿˜æä¾›å®Œå–„çš„ç®¡ç†å·¥å…·ï¼Œæ¶µç›–å¼€å‘ã€éƒ¨ç½²æµ‹è¯•ã€è¿ç»´ç›‘æ§ç­‰å„ä¸ªç¯èŠ‚ã€‚\nKubernetes å€Ÿé‰´äº† Borg çš„è®¾è®¡ç†å¿µï¼Œæ¯”å¦‚ Podã€Serviceã€Label å’Œå• Pod å• IP ç­‰ã€‚Kubernetes çš„æ•´ä½“æ¶æ„è·Ÿ Borg éå¸¸åƒï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚\ngraph TD subgraph å¤–éƒ¨ç”¨æˆ· K[kubectl] end subgraph MasterèŠ‚ç‚¹ A[API ServerRESTæ¨¡å¼] AD[Admissionæ ¡éªŒ/å˜æ›´] S[Storageetcd] CM[Controller Manager] SCH[Scheduler] end subgraph NodeèŠ‚ç‚¹ K1[kubelet] K2[kubelet] P1[Pod] P2[Pod] C1[Container] C2[Container] C3[Container] end ç½‘ç»œ((Internet)) --\u003e FW[Firewall] FW --\u003e PR[Proxy] K -- è®¤è¯è¯·æ±‚ --\u003e A A \u003c-- Valid \u0026 Mutex --\u003e AD A -- å­˜å‚¨ --\u003e S CM \u003c-- ç›‘å¬/è¯»å†™/èµ„æºå˜æ›´ --\u003e A A \u003c-- è¯»å†™/è°ƒåº¦ --\u003e SCH A \u003c-- è·å–çŠ¶æ€/æ›´æ–°çŠ¶æ€ --\u003e K1 K1 --\u003e P1 --\u003e C1 \u0026 C2 K1 --\u003e P2 --\u003e C3 PR -. æµé‡ä»£ç† .-\u003e P1 PR -. æµé‡ä»£ç† .-\u003e P2 classDef master fill:#f9f,stroke:#333; classDef node fill:#ccf,stroke:#333; classDef pod fill:#cff,stroke:#333; class K1,K2,PR node; class A,AD,S,CM,SCH master; class P1,P2 pod; Kubernetes ä¸»è¦ç”±ä»¥ä¸‹å‡ ä¸ªæ ¸å¿ƒç»„ä»¶ç»„æˆï¼š\n",
                content: "ç³»ç»Ÿæ¶æ„ linkKubernetes æœ€åˆæºäºè°·æ­Œå†…éƒ¨çš„ Borgï¼Œæä¾›äº†é¢å‘åº”ç”¨çš„å®¹å™¨é›†ç¾¤éƒ¨ç½²å’Œç®¡ç†ç³»ç»Ÿã€‚Kubernetes çš„ç›®æ ‡æ—¨åœ¨æ¶ˆé™¤ç¼–æ’ç‰©ç† / è™šæ‹Ÿè®¡ç®—ï¼Œç½‘ç»œå’Œå­˜å‚¨åŸºç¡€è®¾æ–½çš„è´Ÿæ‹…ï¼Œå¹¶ä½¿åº”ç”¨ç¨‹åºè¿è¥å•†å’Œå¼€å‘äººå‘˜å®Œå…¨å°†é‡ç‚¹æ”¾åœ¨ä»¥å®¹å™¨ä¸ºä¸­å¿ƒçš„åŸè¯­ä¸Šè¿›è¡Œè‡ªåŠ©è¿è¥ã€‚Kubernetes ä¹Ÿæä¾›ç¨³å®šã€å…¼å®¹çš„åŸºç¡€ï¼ˆå¹³å°ï¼‰ï¼Œç”¨äºæ„å»ºå®šåˆ¶åŒ–çš„ workflows å’Œæ›´é«˜çº§çš„è‡ªåŠ¨åŒ–ä»»åŠ¡ã€‚ Kubernetes å…·å¤‡å®Œå–„çš„é›†ç¾¤ç®¡ç†èƒ½åŠ›ï¼ŒåŒ…æ‹¬å¤šå±‚æ¬¡çš„å®‰å…¨é˜²æŠ¤å’Œå‡†å…¥æœºåˆ¶ã€å¤šç§Ÿæˆ·åº”ç”¨æ”¯æ’‘èƒ½åŠ›ã€é€æ˜çš„æœåŠ¡æ³¨å†Œå’ŒæœåŠ¡å‘ç°æœºåˆ¶ã€å†…å»ºè´Ÿè½½å‡è¡¡å™¨ã€æ•…éšœå‘ç°å’Œè‡ªæˆ‘ä¿®å¤èƒ½åŠ›ã€æœåŠ¡æ»šåŠ¨å‡çº§å’Œåœ¨çº¿æ‰©å®¹ã€å¯æ‰©å±•çš„èµ„æºè‡ªåŠ¨è°ƒåº¦æœºåˆ¶ã€å¤šç²’åº¦çš„èµ„æºé…é¢ç®¡ç†èƒ½åŠ›ã€‚Kubernetes è¿˜æä¾›å®Œå–„çš„ç®¡ç†å·¥å…·ï¼Œæ¶µç›–å¼€å‘ã€éƒ¨ç½²æµ‹è¯•ã€è¿ç»´ç›‘æ§ç­‰å„ä¸ªç¯èŠ‚ã€‚\nKubernetes å€Ÿé‰´äº† Borg çš„è®¾è®¡ç†å¿µï¼Œæ¯”å¦‚ Podã€Serviceã€Label å’Œå• Pod å• IP ç­‰ã€‚Kubernetes çš„æ•´ä½“æ¶æ„è·Ÿ Borg éå¸¸åƒï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚\ngraph TD subgraph å¤–éƒ¨ç”¨æˆ· K[kubectl] end subgraph MasterèŠ‚ç‚¹ A[API ServerRESTæ¨¡å¼] AD[Admissionæ ¡éªŒ/å˜æ›´] S[Storageetcd] CM[Controller Manager] SCH[Scheduler] end subgraph NodeèŠ‚ç‚¹ K1[kubelet] K2[kubelet] P1[Pod] P2[Pod] C1[Container] C2[Container] C3[Container] end ç½‘ç»œ((Internet)) --\u003e FW[Firewall] FW --\u003e PR[Proxy] K -- è®¤è¯è¯·æ±‚ --\u003e A A \u003c-- Valid \u0026 Mutex --\u003e AD A -- å­˜å‚¨ --\u003e S CM \u003c-- ç›‘å¬/è¯»å†™/èµ„æºå˜æ›´ --\u003e A A \u003c-- è¯»å†™/è°ƒåº¦ --\u003e SCH A \u003c-- è·å–çŠ¶æ€/æ›´æ–°çŠ¶æ€ --\u003e K1 K1 --\u003e P1 --\u003e C1 \u0026 C2 K1 --\u003e P2 --\u003e C3 PR -. æµé‡ä»£ç† .-\u003e P1 PR -. æµé‡ä»£ç† .-\u003e P2 classDef master fill:#f9f,stroke:#333; classDef node fill:#ccf,stroke:#333; classDef pod fill:#cff,stroke:#333; class K1,K2,PR node; class A,AD,S,CM,SCH master; class P1,P2 pod; Kubernetes ä¸»è¦ç”±ä»¥ä¸‹å‡ ä¸ªæ ¸å¿ƒç»„ä»¶ç»„æˆï¼š\netcd ä¿å­˜äº†æ•´ä¸ªé›†ç¾¤çš„çŠ¶æ€ï¼› apiserver æä¾›äº†èµ„æºæ“ä½œçš„å”¯ä¸€å…¥å£ï¼Œå¹¶æä¾›è®¤è¯ã€æˆæƒã€è®¿é—®æ§åˆ¶ã€API æ³¨å†Œå’Œå‘ç°ç­‰æœºåˆ¶ï¼› controller manager è´Ÿè´£ç»´æŠ¤é›†ç¾¤çš„çŠ¶æ€ï¼Œæ¯”å¦‚æ•…éšœæ£€æµ‹ã€è‡ªåŠ¨æ‰©å±•ã€æ»šåŠ¨æ›´æ–°ç­‰ï¼› scheduler è´Ÿè´£èµ„æºçš„è°ƒåº¦ï¼ŒæŒ‰ç…§é¢„å®šçš„è°ƒåº¦ç­–ç•¥å°† Pod è°ƒåº¦åˆ°ç›¸åº”çš„æœºå™¨ä¸Šï¼› kubelet è´Ÿè´£ç»´æŠ¤å®¹å™¨çš„ç”Ÿå‘½å‘¨æœŸï¼ŒåŒæ—¶ä¹Ÿè´Ÿè´£ Volumeï¼ˆCSIï¼‰å’Œç½‘ç»œï¼ˆCNIï¼‰çš„ç®¡ç†ï¼› Container runtime è´Ÿè´£é•œåƒç®¡ç†ä»¥åŠ Pod å’Œå®¹å™¨çš„çœŸæ­£è¿è¡Œï¼ˆCRIï¼‰ï¼› kube-proxy è´Ÿè´£ä¸º Service æä¾› cluster å†…éƒ¨çš„æœåŠ¡å‘ç°å’Œè´Ÿè½½å‡è¡¡ï¼› é™¤äº†æ ¸å¿ƒç»„ä»¶ï¼Œè¿˜æœ‰ä¸€äº›æ¨èçš„æ’ä»¶ï¼Œå…¶ä¸­æœ‰çš„å·²ç»æˆä¸º CNCF ä¸­çš„æ‰˜ç®¡é¡¹ç›®ï¼š\nCoreDNS è´Ÿè´£ä¸ºæ•´ä¸ªé›†ç¾¤æä¾› DNS æœåŠ¡ Ingress Controller ä¸ºæœåŠ¡æä¾›å¤–ç½‘å…¥å£ Prometheus æä¾›èµ„æºç›‘æ§ Dashboard æä¾› GUI Federation æä¾›è·¨å¯ç”¨åŒºçš„é›†ç¾¤ graph TD subgraph Control Plane APIServer[APIServer] \u003c--\u003e |grpc|ETCD[ETCD] Controller[Controller Manager] \u003c--\u003e|Controller Loops with protobuf| APIServer Scheduler[Kube-Scheduler] \u003c--\u003e|Bind Pod to Node with protobuf| APIServer end User(User) --\u003e |Json|APIServer subgraph Node Kubelet(Kubelet) \u003c--\u003e|with protobuf| APIServer Kubelet --\u003e|CRI| ContainerRuntime[Container Runtime] ContainerRuntime --\u003e|OCI| OS(OS) Kubelet--\u003e|CNI|NetWork[CNI Network] OS --\u003e Hardware(Hardware) end classDef control fill:#e6f7ff,stroke:#1890ff; classDef node fill:#e8f5e9,stroke:#4caf50; classDef infra fill:#f5f5f5,stroke:#9e9e9e; class ControlPlane,APIServer,ETCD,Controller,Scheduler control; class Node,Kubelet,ContainerRuntime,NetWork node; class OS,Hardware,User infra; K8sè®¾è®¡ç†å¿µ linkåˆ†å±‚æ¶æ„ linkKubernetes è®¾è®¡ç†å¿µå’ŒåŠŸèƒ½å…¶å®å°±æ˜¯ä¸€ä¸ªç±»ä¼¼ Linux çš„åˆ†å±‚æ¶æ„ã€‚\næ ¸å¿ƒå±‚ï¼šKubernetes æœ€æ ¸å¿ƒçš„åŠŸèƒ½ï¼Œå¯¹å¤–æä¾› API æ„å»ºé«˜å±‚çš„åº”ç”¨ï¼Œå¯¹å†…æä¾›æ’ä»¶å¼åº”ç”¨æ‰§è¡Œç¯å¢ƒ åº”ç”¨å±‚ï¼šéƒ¨ç½²ï¼ˆæ— çŠ¶æ€åº”ç”¨ã€æœ‰çŠ¶æ€åº”ç”¨ã€æ‰¹å¤„ç†ä»»åŠ¡ã€é›†ç¾¤åº”ç”¨ç­‰ï¼‰å’Œè·¯ç”±ï¼ˆæœåŠ¡å‘ç°ã€DNS è§£æç­‰ï¼‰ ç®¡ç†å±‚ï¼šç³»ç»Ÿåº¦é‡ï¼ˆå¦‚åŸºç¡€è®¾æ–½ã€å®¹å™¨å’Œç½‘ç»œçš„åº¦é‡ï¼‰ï¼Œè‡ªåŠ¨åŒ–ï¼ˆå¦‚è‡ªåŠ¨æ‰©å±•ã€åŠ¨æ€ Provision ç­‰ï¼‰ä»¥åŠç­–ç•¥ç®¡ç†ï¼ˆRBACã€Quotaã€PSPã€NetworkPolicy ç­‰ï¼‰ æ¥å£å±‚ï¼škubectl å‘½ä»¤è¡Œå·¥å…·ã€å®¢æˆ·ç«¯ SDK ä»¥åŠé›†ç¾¤è”é‚¦ ç”Ÿæ€ç³»ç»Ÿï¼šåœ¨æ¥å£å±‚ä¹‹ä¸Šçš„åºå¤§å®¹å™¨é›†ç¾¤ç®¡ç†è°ƒåº¦çš„ç”Ÿæ€ç³»ç»Ÿï¼Œå¯ä»¥åˆ’åˆ†ä¸ºä¸¤ä¸ªèŒƒç•´ Kubernetes å¤–éƒ¨ï¼šæ—¥å¿—ã€ç›‘æ§ã€é…ç½®ç®¡ç†ã€CIã€CDã€Workflowã€FaaSã€OTS åº”ç”¨ã€ChatOps ç­‰ Kubernetes å†…éƒ¨ï¼šCRIã€CNIã€CVIã€é•œåƒä»“åº“ã€Cloud Providerã€é›†ç¾¤è‡ªèº«çš„é…ç½®å’Œç®¡ç†ç­‰ äº‘åŸç”Ÿç”Ÿæ€ç³»ç»Ÿ æ¥å£å±‚ï¼šå®¢æˆ·ç«¯åº“å’Œå®ç”¨å·¥å…· ç®¡ç†å±‚ï¼šè‡ªåŠ¨åŒ–å’Œç­–ç•¥ç®¡ç† åº”ç”¨å±‚ï¼šéƒ¨ç½²å’Œè·¯ç”± æ ¸å¿ƒå±‚ï¼šKubernetes APIå’Œæ‰§è¡Œç¯å¢ƒ å®¹å™¨è¿è¡Œæ—¶æ¥å£(CRI) å®¹å™¨ç½‘ç»œæ¥å£(CNI) å®¹å™¨å­˜å‚¨æ¥å£(CSI) é•œåƒä»“åº“ äº‘ä¾›åº”å•† èº«ä»½ä¾›åº”å•† API è®¾è®¡åŸåˆ™ linkå¯¹äºäº‘è®¡ç®—ç³»ç»Ÿï¼Œç³»ç»Ÿ API å®é™…ä¸Šå¤„äºç³»ç»Ÿè®¾è®¡çš„ç»Ÿé¢†åœ°ä½ï¼Œæ­£å¦‚æœ¬æ–‡å‰é¢æ‰€è¯´ï¼ŒKubernetes é›†ç¾¤ç³»ç»Ÿæ¯æ”¯æŒä¸€é¡¹æ–°åŠŸèƒ½ï¼Œå¼•å…¥ä¸€é¡¹æ–°æŠ€æœ¯ï¼Œä¸€å®šä¼šæ–°å¼•å…¥å¯¹åº”çš„ API å¯¹è±¡ï¼Œæ”¯æŒå¯¹è¯¥åŠŸèƒ½çš„ç®¡ç†æ“ä½œï¼Œç†è§£æŒæ¡çš„ APIï¼Œå°±å¥½æ¯”æŠ“ä½äº† Kubernetes ç³»ç»Ÿçš„ç‰›é¼»å­ã€‚Kubernetes ç³»ç»Ÿ API çš„è®¾è®¡æœ‰ä»¥ä¸‹å‡ æ¡åŸåˆ™ï¼š\næ‰€æœ‰ API åº”è¯¥æ˜¯å£°æ˜å¼çš„ã€‚æ­£å¦‚å‰æ–‡æ‰€è¯´ï¼Œå£°æ˜å¼çš„æ“ä½œï¼Œç›¸å¯¹äºå‘½ä»¤å¼æ“ä½œï¼Œå¯¹äºé‡å¤æ“ä½œçš„æ•ˆæœæ˜¯ç¨³å®šçš„ï¼Œè¿™å¯¹äºå®¹æ˜“å‡ºç°æ•°æ®ä¸¢å¤±æˆ–é‡å¤çš„åˆ†å¸ƒå¼ç¯å¢ƒæ¥è¯´æ˜¯å¾ˆé‡è¦çš„ã€‚å¦å¤–ï¼Œå£°æ˜å¼æ“ä½œæ›´å®¹æ˜“è¢«ç”¨æˆ·ä½¿ç”¨ï¼Œå¯ä»¥ä½¿ç³»ç»Ÿå‘ç”¨æˆ·éšè—å®ç°çš„ç»†èŠ‚ï¼Œéšè—å®ç°çš„ç»†èŠ‚çš„åŒæ—¶ï¼Œä¹Ÿå°±ä¿ç•™äº†ç³»ç»Ÿæœªæ¥æŒç»­ä¼˜åŒ–çš„å¯èƒ½æ€§ã€‚æ­¤å¤–ï¼Œå£°æ˜å¼çš„ APIï¼ŒåŒæ—¶éšå«äº†æ‰€æœ‰çš„ API å¯¹è±¡éƒ½æ˜¯åè¯æ€§è´¨çš„ï¼Œä¾‹å¦‚ Serviceã€Volume è¿™äº› API éƒ½æ˜¯åè¯ï¼Œè¿™äº›åè¯æè¿°äº†ç”¨æˆ·æ‰€æœŸæœ›å¾—åˆ°çš„ä¸€ä¸ªç›®æ ‡åˆ†å¸ƒå¼å¯¹è±¡ã€‚ API å¯¹è±¡æ˜¯å½¼æ­¤äº’è¡¥è€Œä¸”å¯ç»„åˆçš„ã€‚è¿™é‡Œé¢å®é™…æ˜¯é¼“åŠ± API å¯¹è±¡å°½é‡å®ç°é¢å‘å¯¹è±¡è®¾è®¡æ—¶çš„è¦æ±‚ï¼Œå³ â€œé«˜å†…èšï¼Œæ¾è€¦åˆâ€ï¼Œå¯¹ä¸šåŠ¡ç›¸å…³çš„æ¦‚å¿µæœ‰ä¸€ä¸ªåˆé€‚çš„åˆ†è§£ï¼Œæé«˜åˆ†è§£å‡ºæ¥çš„å¯¹è±¡çš„å¯é‡ç”¨æ€§ã€‚äº‹å®ä¸Šï¼ŒKubernetes è¿™ç§åˆ†å¸ƒå¼ç³»ç»Ÿç®¡ç†å¹³å°ï¼Œä¹Ÿæ˜¯ä¸€ç§ä¸šåŠ¡ç³»ç»Ÿï¼Œåªä¸è¿‡å®ƒçš„ä¸šåŠ¡å°±æ˜¯è°ƒåº¦å’Œç®¡ç†å®¹å™¨æœåŠ¡ã€‚ é«˜å±‚ API ä»¥æ“ä½œæ„å›¾ä¸ºåŸºç¡€è®¾è®¡ã€‚å¦‚ä½•èƒ½å¤Ÿè®¾è®¡å¥½ APIï¼Œè·Ÿå¦‚ä½•èƒ½ç”¨é¢å‘å¯¹è±¡çš„æ–¹æ³•è®¾è®¡å¥½åº”ç”¨ç³»ç»Ÿæœ‰ç›¸é€šçš„åœ°æ–¹ï¼Œé«˜å±‚è®¾è®¡ä¸€å®šæ˜¯ä»ä¸šåŠ¡å‡ºå‘ï¼Œè€Œä¸æ˜¯è¿‡æ—©çš„ä»æŠ€æœ¯å®ç°å‡ºå‘ã€‚å› æ­¤ï¼Œé’ˆå¯¹ Kubernetes çš„é«˜å±‚ API è®¾è®¡ï¼Œä¸€å®šæ˜¯ä»¥ Kubernetes çš„ä¸šåŠ¡ä¸ºåŸºç¡€å‡ºå‘ï¼Œä¹Ÿå°±æ˜¯ä»¥ç³»ç»Ÿè°ƒåº¦ç®¡ç†å®¹å™¨çš„æ“ä½œæ„å›¾ä¸ºåŸºç¡€è®¾è®¡ã€‚ ä½å±‚ API æ ¹æ®é«˜å±‚ API çš„æ§åˆ¶éœ€è¦è®¾è®¡ã€‚è®¾è®¡å®ç°ä½å±‚ API çš„ç›®çš„ï¼Œæ˜¯ä¸ºäº†è¢«é«˜å±‚ API ä½¿ç”¨ï¼Œè€ƒè™‘å‡å°‘å†—ä½™ã€æé«˜é‡ç”¨æ€§çš„ç›®çš„ï¼Œä½å±‚ API çš„è®¾è®¡ä¹Ÿè¦ä»¥éœ€æ±‚ä¸ºåŸºç¡€ï¼Œè¦å°½é‡æŠµæŠ—å—æŠ€æœ¯å®ç°å½±å“çš„è¯±æƒ‘ã€‚ å°½é‡é¿å…ç®€å•å°è£…ï¼Œä¸è¦æœ‰åœ¨å¤–éƒ¨ API æ— æ³•æ˜¾å¼çŸ¥é“çš„å†…éƒ¨éšè—çš„æœºåˆ¶ã€‚ç®€å•çš„å°è£…ï¼Œå®é™…æ²¡æœ‰æä¾›æ–°çš„åŠŸèƒ½ï¼Œåè€Œå¢åŠ äº†å¯¹æ‰€å°è£… API çš„ä¾èµ–æ€§ã€‚å†…éƒ¨éšè—çš„æœºåˆ¶ä¹Ÿæ˜¯éå¸¸ä¸åˆ©äºç³»ç»Ÿç»´æŠ¤çš„è®¾è®¡æ–¹å¼ï¼Œä¾‹å¦‚ StatefulSet å’Œ ReplicaSetï¼Œæœ¬æ¥å°±æ˜¯ä¸¤ç§ Pod é›†åˆï¼Œé‚£ä¹ˆ Kubernetes å°±ç”¨ä¸åŒ API å¯¹è±¡æ¥å®šä¹‰å®ƒä»¬ï¼Œè€Œä¸ä¼šè¯´åªç”¨åŒä¸€ä¸ª ReplicaSetï¼Œå†…éƒ¨é€šè¿‡ç‰¹æ®Šçš„ç®—æ³•å†æ¥åŒºåˆ†è¿™ä¸ª ReplicaSet æ˜¯æœ‰çŠ¶æ€çš„è¿˜æ˜¯æ— çŠ¶æ€ã€‚ API æ“ä½œå¤æ‚åº¦ä¸å¯¹è±¡æ•°é‡æˆæ­£æ¯”ã€‚è¿™ä¸€æ¡ä¸»è¦æ˜¯ä»ç³»ç»Ÿæ€§èƒ½è§’åº¦è€ƒè™‘ï¼Œè¦ä¿è¯æ•´ä¸ªç³»ç»Ÿéšç€ç³»ç»Ÿè§„æ¨¡çš„æ‰©å¤§ï¼Œæ€§èƒ½ä¸ä¼šè¿…é€Ÿå˜æ…¢åˆ°æ— æ³•ä½¿ç”¨ï¼Œé‚£ä¹ˆæœ€ä½çš„é™å®šå°±æ˜¯ API çš„æ“ä½œå¤æ‚åº¦ä¸èƒ½è¶…è¿‡ O(N)ï¼ŒN æ˜¯å¯¹è±¡çš„æ•°é‡ï¼Œå¦åˆ™ç³»ç»Ÿå°±ä¸å…·å¤‡æ°´å¹³ä¼¸ç¼©æ€§äº†ã€‚ API å¯¹è±¡çŠ¶æ€ä¸èƒ½ä¾èµ–äºç½‘ç»œè¿æ¥çŠ¶æ€ã€‚ç”±äºä¼—æ‰€å‘¨çŸ¥ï¼Œåœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸‹ï¼Œç½‘ç»œè¿æ¥æ–­å¼€æ˜¯ç»å¸¸å‘ç”Ÿçš„äº‹æƒ…ï¼Œå› æ­¤è¦ä¿è¯ API å¯¹è±¡çŠ¶æ€èƒ½åº”å¯¹ç½‘ç»œçš„ä¸ç¨³å®šï¼ŒAPI å¯¹è±¡çš„çŠ¶æ€å°±ä¸èƒ½ä¾èµ–äºç½‘ç»œè¿æ¥çŠ¶æ€ã€‚ å°½é‡é¿å…è®©æ“ä½œæœºåˆ¶ä¾èµ–äºå…¨å±€çŠ¶æ€ï¼Œå› ä¸ºåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­è¦ä¿è¯å…¨å±€çŠ¶æ€çš„åŒæ­¥æ˜¯éå¸¸å›°éš¾çš„ã€‚ æ§åˆ¶æœºåˆ¶è®¾è®¡åŸåˆ™ link æ§åˆ¶é€»è¾‘åº”è¯¥åªä¾èµ–äºå½“å‰çŠ¶æ€ã€‚è¿™æ˜¯ä¸ºäº†ä¿è¯åˆ†å¸ƒå¼ç³»ç»Ÿçš„ç¨³å®šå¯é ï¼Œå¯¹äºç»å¸¸å‡ºç°å±€éƒ¨é”™è¯¯çš„åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œå¦‚æœæ§åˆ¶é€»è¾‘åªä¾èµ–å½“å‰çŠ¶æ€ï¼Œé‚£ä¹ˆå°±éå¸¸å®¹æ˜“å°†ä¸€ä¸ªæš‚æ—¶å‡ºç°æ•…éšœçš„ç³»ç»Ÿæ¢å¤åˆ°æ­£å¸¸çŠ¶æ€ï¼Œå› ä¸ºä½ åªè¦å°†è¯¥ç³»ç»Ÿé‡ç½®åˆ°æŸä¸ªç¨³å®šçŠ¶æ€ï¼Œå°±å¯ä»¥è‡ªä¿¡çš„çŸ¥é“ç³»ç»Ÿçš„æ‰€æœ‰æ§åˆ¶é€»è¾‘ä¼šå¼€å§‹æŒ‰ç…§æ­£å¸¸æ–¹å¼è¿è¡Œã€‚ å‡è®¾ä»»ä½•é”™è¯¯çš„å¯èƒ½ï¼Œå¹¶åšå®¹é”™å¤„ç†ã€‚åœ¨ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿä¸­å‡ºç°å±€éƒ¨å’Œä¸´æ—¶é”™è¯¯æ˜¯å¤§æ¦‚ç‡äº‹ä»¶ã€‚é”™è¯¯å¯èƒ½æ¥è‡ªäºç‰©ç†ç³»ç»Ÿæ•…éšœï¼Œå¤–éƒ¨ç³»ç»Ÿæ•…éšœä¹Ÿå¯èƒ½æ¥è‡ªäºç³»ç»Ÿè‡ªèº«çš„ä»£ç é”™è¯¯ï¼Œä¾é è‡ªå·±å®ç°çš„ä»£ç ä¸ä¼šå‡ºé”™æ¥ä¿è¯ç³»ç»Ÿç¨³å®šå…¶å®ä¹Ÿæ˜¯éš¾ä»¥å®ç°çš„ï¼Œå› æ­¤è¦è®¾è®¡å¯¹ä»»ä½•å¯èƒ½é”™è¯¯çš„å®¹é”™å¤„ç†ã€‚ å°½é‡é¿å…å¤æ‚çŠ¶æ€æœºï¼Œæ§åˆ¶é€»è¾‘ä¸è¦ä¾èµ–æ— æ³•ç›‘æ§çš„å†…éƒ¨çŠ¶æ€ã€‚å› ä¸ºåˆ†å¸ƒå¼ç³»ç»Ÿå„ä¸ªå­ç³»ç»Ÿéƒ½æ˜¯ä¸èƒ½ä¸¥æ ¼é€šè¿‡ç¨‹åºå†…éƒ¨ä¿æŒåŒæ­¥çš„ï¼Œæ‰€ä»¥å¦‚æœä¸¤ä¸ªå­ç³»ç»Ÿçš„æ§åˆ¶é€»è¾‘å¦‚æœäº’ç›¸æœ‰å½±å“ï¼Œé‚£ä¹ˆå­ç³»ç»Ÿå°±ä¸€å®šè¦èƒ½äº’ç›¸è®¿é—®åˆ°å½±å“æ§åˆ¶é€»è¾‘çš„çŠ¶æ€ï¼Œå¦åˆ™ï¼Œå°±ç­‰åŒäºç³»ç»Ÿé‡Œå­˜åœ¨ä¸ç¡®å®šçš„æ§åˆ¶é€»è¾‘ã€‚ å‡è®¾ä»»ä½•æ“ä½œéƒ½å¯èƒ½è¢«ä»»ä½•æ“ä½œå¯¹è±¡æ‹’ç»ï¼Œç”šè‡³è¢«é”™è¯¯è§£æã€‚ç”±äºåˆ†å¸ƒå¼ç³»ç»Ÿçš„å¤æ‚æ€§ä»¥åŠå„å­ç³»ç»Ÿçš„ç›¸å¯¹ç‹¬ç«‹æ€§ï¼Œä¸åŒå­ç³»ç»Ÿç»å¸¸æ¥è‡ªä¸åŒçš„å¼€å‘å›¢é˜Ÿï¼Œæ‰€ä»¥ä¸èƒ½å¥¢æœ›ä»»ä½•æ“ä½œè¢«å¦ä¸€ä¸ªå­ç³»ç»Ÿä»¥æ­£ç¡®çš„æ–¹å¼å¤„ç†ï¼Œè¦ä¿è¯å‡ºç°é”™è¯¯çš„æ—¶å€™ï¼Œæ“ä½œçº§åˆ«çš„é”™è¯¯ä¸ä¼šå½±å“åˆ°ç³»ç»Ÿç¨³å®šæ€§ã€‚ æ¯ä¸ªæ¨¡å—éƒ½å¯ä»¥åœ¨å‡ºé”™åè‡ªåŠ¨æ¢å¤ã€‚ç”±äºåˆ†å¸ƒå¼ç³»ç»Ÿä¸­æ— æ³•ä¿è¯ç³»ç»Ÿå„ä¸ªæ¨¡å—æ˜¯å§‹ç»ˆè¿æ¥çš„ï¼Œå› æ­¤æ¯ä¸ªæ¨¡å—è¦æœ‰è‡ªæˆ‘ä¿®å¤çš„èƒ½åŠ›ï¼Œä¿è¯ä¸ä¼šå› ä¸ºè¿æ¥ä¸åˆ°å…¶ä»–æ¨¡å—è€Œè‡ªæˆ‘å´©æºƒã€‚ æ¯ä¸ªæ¨¡å—éƒ½å¯ä»¥åœ¨å¿…è¦æ—¶ä¼˜é›…åœ°é™çº§æœåŠ¡ã€‚æ‰€è°“ä¼˜é›…åœ°é™çº§æœåŠ¡ï¼Œæ˜¯å¯¹ç³»ç»Ÿé²æ£’æ€§çš„è¦æ±‚ï¼Œå³è¦æ±‚åœ¨è®¾è®¡å®ç°æ¨¡å—æ—¶åˆ’åˆ†æ¸…æ¥šåŸºæœ¬åŠŸèƒ½å’Œé«˜çº§åŠŸèƒ½ï¼Œä¿è¯åŸºæœ¬åŠŸèƒ½ä¸ä¼šä¾èµ–é«˜çº§åŠŸèƒ½ï¼Œè¿™æ ·åŒæ—¶å°±ä¿è¯äº†ä¸ä¼šå› ä¸ºé«˜çº§åŠŸèƒ½å‡ºç°æ•…éšœè€Œå¯¼è‡´æ•´ä¸ªæ¨¡å—å´©æºƒã€‚æ ¹æ®è¿™ç§ç†å¿µå®ç°çš„ç³»ç»Ÿï¼Œä¹Ÿæ›´å®¹æ˜“å¿«é€Ÿåœ°å¢åŠ æ–°çš„é«˜çº§åŠŸèƒ½ï¼Œå› ä¸ºä¸å¿…æ‹…å¿ƒå¼•å…¥é«˜çº§åŠŸèƒ½å½±å“åŸæœ‰çš„åŸºæœ¬åŠŸèƒ½ã€‚ Kubernetes çš„æ ¸å¿ƒæŠ€æœ¯æ¦‚å¿µå’Œ API å¯¹è±¡ linkAPI å¯¹è±¡æ˜¯ Kubernetes é›†ç¾¤ä¸­çš„ç®¡ç†æ“ä½œå•å…ƒã€‚Kubernetes é›†ç¾¤ç³»ç»Ÿæ¯æ”¯æŒä¸€é¡¹æ–°åŠŸèƒ½ï¼Œå¼•å…¥ä¸€é¡¹æ–°æŠ€æœ¯ï¼Œä¸€å®šä¼šæ–°å¼•å…¥å¯¹åº”çš„ API å¯¹è±¡ï¼Œæ”¯æŒå¯¹è¯¥åŠŸèƒ½çš„ç®¡ç†æ“ä½œã€‚ä¾‹å¦‚å‰¯æœ¬é›† Replica Set å¯¹åº”çš„ API å¯¹è±¡æ˜¯ RSã€‚\næ¯ä¸ª API å¯¹è±¡éƒ½æœ‰ 3 å¤§ç±»å±æ€§ï¼šå…ƒæ•°æ® metadataã€è§„èŒƒ spec å’ŒçŠ¶æ€ statusã€‚å…ƒæ•°æ®æ˜¯ç”¨æ¥æ ‡è¯† API å¯¹è±¡çš„ï¼Œæ¯ä¸ªå¯¹è±¡éƒ½è‡³å°‘æœ‰ 3 ä¸ªå…ƒæ•°æ®ï¼šnamespaceï¼Œname å’Œ uidï¼›é™¤æ­¤ä»¥å¤–è¿˜æœ‰å„ç§å„æ ·çš„æ ‡ç­¾ labels ç”¨æ¥æ ‡è¯†å’ŒåŒ¹é…ä¸åŒçš„å¯¹è±¡ï¼Œä¾‹å¦‚ç”¨æˆ·å¯ä»¥ç”¨æ ‡ç­¾ env æ¥æ ‡è¯†åŒºåˆ†ä¸åŒçš„æœåŠ¡éƒ¨ç½²ç¯å¢ƒï¼Œåˆ†åˆ«ç”¨ env=devã€env=testingã€env=production æ¥æ ‡è¯†å¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§çš„ä¸åŒæœåŠ¡ã€‚è§„èŒƒæè¿°äº†ç”¨æˆ·æœŸæœ› Kubernetes é›†ç¾¤ä¸­çš„åˆ†å¸ƒå¼ç³»ç»Ÿè¾¾åˆ°çš„ç†æƒ³çŠ¶æ€ï¼ˆDesired Stateï¼‰ï¼Œä¾‹å¦‚ç”¨æˆ·å¯ä»¥é€šè¿‡å¤åˆ¶æ§åˆ¶å™¨ Replication Controller è®¾ç½®æœŸæœ›çš„ Pod å‰¯æœ¬æ•°ä¸º 3ï¼›status æè¿°äº†ç³»ç»Ÿå®é™…å½“å‰è¾¾åˆ°çš„çŠ¶æ€ï¼ˆStatusï¼‰ï¼Œä¾‹å¦‚ç³»ç»Ÿå½“å‰å®é™…çš„ Pod å‰¯æœ¬æ•°ä¸º 2ï¼›é‚£ä¹ˆå¤åˆ¶æ§åˆ¶å™¨å½“å‰çš„ç¨‹åºé€»è¾‘å°±æ˜¯è‡ªåŠ¨å¯åŠ¨æ–°çš„ Podï¼Œäº‰å–è¾¾åˆ°å‰¯æœ¬æ•°ä¸º 3ã€‚\nKubernetes ä¸­æ‰€æœ‰çš„é…ç½®éƒ½æ˜¯é€šè¿‡ API å¯¹è±¡çš„ spec å»è®¾ç½®çš„ï¼Œä¹Ÿå°±æ˜¯ç”¨æˆ·é€šè¿‡é…ç½®ç³»ç»Ÿçš„ç†æƒ³çŠ¶æ€æ¥æ”¹å˜ç³»ç»Ÿï¼Œè¿™æ˜¯ Kubernetes é‡è¦è®¾è®¡ç†å¿µä¹‹ä¸€ï¼Œå³æ‰€æœ‰çš„æ“ä½œéƒ½æ˜¯å£°æ˜å¼ï¼ˆDeclarativeï¼‰çš„è€Œä¸æ˜¯å‘½ä»¤å¼ï¼ˆImperativeï¼‰çš„ã€‚å£°æ˜å¼æ“ä½œåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„å¥½å¤„æ˜¯ç¨³å®šï¼Œä¸æ€•ä¸¢æ“ä½œæˆ–è¿è¡Œå¤šæ¬¡ï¼Œä¾‹å¦‚è®¾ç½®å‰¯æœ¬æ•°ä¸º 3 çš„æ“ä½œè¿è¡Œå¤šæ¬¡ä¹Ÿè¿˜æ˜¯ä¸€ä¸ªç»“æœï¼Œè€Œç»™å‰¯æœ¬æ•°åŠ  1 çš„æ“ä½œå°±ä¸æ˜¯å£°æ˜å¼çš„ï¼Œè¿è¡Œå¤šæ¬¡ç»“æœå°±é”™äº†ã€‚\nPod linkKubernetes æœ‰å¾ˆå¤šæŠ€æœ¯æ¦‚å¿µï¼ŒåŒæ—¶å¯¹åº”å¾ˆå¤š API å¯¹è±¡ï¼Œæœ€é‡è¦çš„ä¹Ÿæ˜¯æœ€åŸºç¡€çš„æ˜¯ Podã€‚Pod æ˜¯åœ¨ Kubernetes é›†ç¾¤ä¸­è¿è¡Œéƒ¨ç½²åº”ç”¨æˆ–æœåŠ¡çš„æœ€å°å•å…ƒï¼Œå®ƒæ˜¯å¯ä»¥æ”¯æŒå¤šå®¹å™¨çš„ã€‚Pod çš„è®¾è®¡ç†å¿µæ˜¯æ”¯æŒå¤šä¸ªå®¹å™¨åœ¨ä¸€ä¸ª Pod ä¸­å…±äº«ç½‘ç»œåœ°å€å’Œæ–‡ä»¶ç³»ç»Ÿï¼Œå¯ä»¥é€šè¿‡è¿›ç¨‹é—´é€šä¿¡å’Œæ–‡ä»¶å…±äº«è¿™ç§ç®€å•é«˜æ•ˆçš„æ–¹å¼ç»„åˆå®ŒæˆæœåŠ¡ã€‚Pod å¯¹å¤šå®¹å™¨çš„æ”¯æŒæ˜¯ K8 æœ€åŸºç¡€çš„è®¾è®¡ç†å¿µã€‚æ¯”å¦‚ä½ è¿è¡Œä¸€ä¸ªæ“ä½œç³»ç»Ÿå‘è¡Œç‰ˆçš„è½¯ä»¶ä»“åº“ï¼Œä¸€ä¸ª Nginx å®¹å™¨ç”¨æ¥å‘å¸ƒè½¯ä»¶ï¼Œå¦ä¸€ä¸ªå®¹å™¨ä¸“é—¨ç”¨æ¥ä»æºä»“åº“åšåŒæ­¥ï¼Œè¿™ä¸¤ä¸ªå®¹å™¨çš„é•œåƒä¸å¤ªå¯èƒ½æ˜¯ä¸€ä¸ªå›¢é˜Ÿå¼€å‘çš„ï¼Œä½†æ˜¯ä»–ä»¬ä¸€å—å„¿å·¥ä½œæ‰èƒ½æä¾›ä¸€ä¸ªå¾®æœåŠ¡ï¼›è¿™ç§æƒ…å†µä¸‹ï¼Œä¸åŒçš„å›¢é˜Ÿå„è‡ªå¼€å‘æ„å»ºè‡ªå·±çš„å®¹å™¨é•œåƒï¼Œåœ¨éƒ¨ç½²çš„æ—¶å€™ç»„åˆæˆä¸€ä¸ªå¾®æœåŠ¡å¯¹å¤–æä¾›æœåŠ¡ã€‚\nPod æ˜¯ Kubernetes é›†ç¾¤ä¸­æ‰€æœ‰ä¸šåŠ¡ç±»å‹çš„åŸºç¡€ï¼Œå¯ä»¥çœ‹ä½œè¿è¡Œåœ¨ Kubernetes é›†ç¾¤ä¸­çš„å°æœºå™¨äººï¼Œä¸åŒç±»å‹çš„ä¸šåŠ¡å°±éœ€è¦ä¸åŒç±»å‹çš„å°æœºå™¨äººå»æ‰§è¡Œã€‚ç›®å‰ Kubernetes ä¸­çš„ä¸šåŠ¡ä¸»è¦å¯ä»¥åˆ†ä¸ºé•¿æœŸä¼ºæœå‹ï¼ˆlong-runningï¼‰ã€æ‰¹å¤„ç†å‹ï¼ˆbatchï¼‰ã€èŠ‚ç‚¹åå°æ”¯æ’‘å‹ï¼ˆnode-daemonï¼‰å’Œæœ‰çŠ¶æ€åº”ç”¨å‹ï¼ˆstateful applicationï¼‰ï¼›åˆ†åˆ«å¯¹åº”çš„å°æœºå™¨äººæ§åˆ¶å™¨ä¸º Deploymentã€Jobã€DaemonSet å’Œ StatefulSetï¼Œæœ¬æ–‡åé¢ä¼šä¸€ä¸€ä»‹ç»ã€‚\nå‰¯æœ¬æ§åˆ¶å™¨ï¼ˆReplication Controllerï¼ŒRCï¼‰ linkRC æ˜¯ Kubernetes é›†ç¾¤ä¸­æœ€æ—©çš„ä¿è¯ Pod é«˜å¯ç”¨çš„ API å¯¹è±¡ã€‚é€šè¿‡ç›‘æ§è¿è¡Œä¸­çš„ Pod æ¥ä¿è¯é›†ç¾¤ä¸­è¿è¡ŒæŒ‡å®šæ•°ç›®çš„ Pod å‰¯æœ¬ã€‚æŒ‡å®šçš„æ•°ç›®å¯ä»¥æ˜¯å¤šä¸ªä¹Ÿå¯ä»¥æ˜¯ 1 ä¸ªï¼›å°‘äºæŒ‡å®šæ•°ç›®ï¼ŒRC å°±ä¼šå¯åŠ¨è¿è¡Œæ–°çš„ Pod å‰¯æœ¬ï¼›å¤šäºæŒ‡å®šæ•°ç›®ï¼ŒRC å°±ä¼šæ€æ­»å¤šä½™çš„ Pod å‰¯æœ¬ã€‚å³ä½¿åœ¨æŒ‡å®šæ•°ç›®ä¸º 1 çš„æƒ…å†µä¸‹ï¼Œé€šè¿‡ RC è¿è¡Œ Pod ä¹Ÿæ¯”ç›´æ¥è¿è¡Œ Pod æ›´æ˜æ™ºï¼Œå› ä¸º RC ä¹Ÿå¯ä»¥å‘æŒ¥å®ƒé«˜å¯ç”¨çš„èƒ½åŠ›ï¼Œä¿è¯æ°¸è¿œæœ‰ 1 ä¸ª Pod åœ¨è¿è¡Œã€‚RC æ˜¯ Kubernetes è¾ƒæ—©æœŸçš„æŠ€æœ¯æ¦‚å¿µï¼Œåªé€‚ç”¨äºé•¿æœŸä¼ºæœå‹çš„ä¸šåŠ¡ç±»å‹ï¼Œæ¯”å¦‚æ§åˆ¶å°æœºå™¨äººæä¾›é«˜å¯ç”¨çš„ Web æœåŠ¡ã€‚\nå‰¯æœ¬é›†ï¼ˆReplica Setï¼ŒRSï¼‰ linkRS æ˜¯æ–°ä¸€ä»£ RCï¼Œæä¾›åŒæ ·çš„é«˜å¯ç”¨èƒ½åŠ›ï¼ŒåŒºåˆ«ä¸»è¦åœ¨äº RS åæ¥å±…ä¸Šï¼Œèƒ½æ”¯æŒæ›´å¤šç§ç±»çš„åŒ¹é…æ¨¡å¼ã€‚å‰¯æœ¬é›†å¯¹è±¡ä¸€èˆ¬ä¸å•ç‹¬ä½¿ç”¨ï¼Œè€Œæ˜¯ä½œä¸º Deployment çš„ç†æƒ³çŠ¶æ€å‚æ•°ä½¿ç”¨ã€‚\néƒ¨ç½²ï¼ˆDeploymentï¼‰ linkéƒ¨ç½²è¡¨ç¤ºç”¨æˆ·å¯¹ Kubernetes é›†ç¾¤çš„ä¸€æ¬¡æ›´æ–°æ“ä½œã€‚éƒ¨ç½²æ˜¯ä¸€ä¸ªæ¯” RS åº”ç”¨æ¨¡å¼æ›´å¹¿çš„ API å¯¹è±¡ï¼Œå¯ä»¥æ˜¯åˆ›å»ºä¸€ä¸ªæ–°çš„æœåŠ¡ï¼Œæ›´æ–°ä¸€ä¸ªæ–°çš„æœåŠ¡ï¼Œä¹Ÿå¯ä»¥æ˜¯æ»šåŠ¨å‡çº§ä¸€ä¸ªæœåŠ¡ã€‚æ»šåŠ¨å‡çº§ä¸€ä¸ªæœåŠ¡ï¼Œå®é™…æ˜¯åˆ›å»ºä¸€ä¸ªæ–°çš„ RSï¼Œç„¶åé€æ¸å°†æ–° RS ä¸­å‰¯æœ¬æ•°å¢åŠ åˆ°ç†æƒ³çŠ¶æ€ï¼Œå°†æ—§ RS ä¸­çš„å‰¯æœ¬æ•°å‡å°åˆ° 0 çš„å¤åˆæ“ä½œï¼›è¿™æ ·ä¸€ä¸ªå¤åˆæ“ä½œç”¨ä¸€ä¸ª RS æ˜¯ä¸å¤ªå¥½æè¿°çš„ï¼Œæ‰€ä»¥ç”¨ä¸€ä¸ªæ›´é€šç”¨çš„ Deployment æ¥æè¿°ã€‚ä»¥ Kubernetes çš„å‘å±•æ–¹å‘ï¼Œæœªæ¥å¯¹æ‰€æœ‰é•¿æœŸä¼ºæœå‹çš„çš„ä¸šåŠ¡çš„ç®¡ç†ï¼Œéƒ½ä¼šé€šè¿‡ Deployment æ¥ç®¡ç†ã€‚\næœåŠ¡ï¼ˆServiceï¼‰ linkRCã€RS å’Œ Deployment åªæ˜¯ä¿è¯äº†æ”¯æ’‘æœåŠ¡çš„å¾®æœåŠ¡ Pod çš„æ•°é‡ï¼Œä½†æ˜¯æ²¡æœ‰è§£å†³å¦‚ä½•è®¿é—®è¿™äº›æœåŠ¡çš„é—®é¢˜ã€‚ä¸€ä¸ª Pod åªæ˜¯ä¸€ä¸ªè¿è¡ŒæœåŠ¡çš„å®ä¾‹ï¼Œéšæ—¶å¯èƒ½åœ¨ä¸€ä¸ªèŠ‚ç‚¹ä¸Šåœæ­¢ï¼Œåœ¨å¦ä¸€ä¸ªèŠ‚ç‚¹ä»¥ä¸€ä¸ªæ–°çš„ IP å¯åŠ¨ä¸€ä¸ªæ–°çš„ Podï¼Œå› æ­¤ä¸èƒ½ä»¥ç¡®å®šçš„ IP å’Œç«¯å£å·æä¾›æœåŠ¡ã€‚è¦ç¨³å®šåœ°æä¾›æœåŠ¡éœ€è¦æœåŠ¡å‘ç°å’Œè´Ÿè½½å‡è¡¡èƒ½åŠ›ã€‚æœåŠ¡å‘ç°å®Œæˆçš„å·¥ä½œï¼Œæ˜¯é’ˆå¯¹å®¢æˆ·ç«¯è®¿é—®çš„æœåŠ¡ï¼Œæ‰¾åˆ°å¯¹åº”çš„çš„åç«¯æœåŠ¡å®ä¾‹ã€‚åœ¨ K8 é›†ç¾¤ä¸­ï¼Œå®¢æˆ·ç«¯éœ€è¦è®¿é—®çš„æœåŠ¡å°±æ˜¯ Service å¯¹è±¡ã€‚æ¯ä¸ª Service ä¼šå¯¹åº”ä¸€ä¸ªé›†ç¾¤å†…éƒ¨æœ‰æ•ˆçš„è™šæ‹Ÿ IPï¼Œé›†ç¾¤å†…éƒ¨é€šè¿‡è™šæ‹Ÿ IP è®¿é—®ä¸€ä¸ªæœåŠ¡ã€‚åœ¨ Kubernetes é›†ç¾¤ä¸­å¾®æœåŠ¡çš„è´Ÿè½½å‡è¡¡æ˜¯ç”± Kube-proxy å®ç°çš„ã€‚Kube-proxy æ˜¯ Kubernetes é›†ç¾¤å†…éƒ¨çš„è´Ÿè½½å‡è¡¡å™¨ã€‚å®ƒæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼ä»£ç†æœåŠ¡å™¨ï¼Œåœ¨ Kubernetes çš„æ¯ä¸ªèŠ‚ç‚¹ä¸Šéƒ½æœ‰ä¸€ä¸ªï¼›è¿™ä¸€è®¾è®¡ä½“ç°äº†å®ƒçš„ä¼¸ç¼©æ€§ä¼˜åŠ¿ï¼Œéœ€è¦è®¿é—®æœåŠ¡çš„èŠ‚ç‚¹è¶Šå¤šï¼Œæä¾›è´Ÿè½½å‡è¡¡èƒ½åŠ›çš„ Kube-proxy å°±è¶Šå¤šï¼Œé«˜å¯ç”¨èŠ‚ç‚¹ä¹Ÿéšä¹‹å¢å¤šã€‚ä¸ä¹‹ç›¸æ¯”ï¼Œæˆ‘ä»¬å¹³æ—¶åœ¨æœåŠ¡å™¨ç«¯åšä¸ªåå‘ä»£ç†åšè´Ÿè½½å‡è¡¡ï¼Œè¿˜è¦è¿›ä¸€æ­¥è§£å†³åå‘ä»£ç†çš„è´Ÿè½½å‡è¡¡å’Œé«˜å¯ç”¨é—®é¢˜ã€‚\nä»»åŠ¡ï¼ˆJobï¼‰ linkJob æ˜¯ Kubernetes ç”¨æ¥æ§åˆ¶æ‰¹å¤„ç†å‹ä»»åŠ¡çš„ API å¯¹è±¡ã€‚æ‰¹å¤„ç†ä¸šåŠ¡ä¸é•¿æœŸä¼ºæœä¸šåŠ¡çš„ä¸»è¦åŒºåˆ«æ˜¯æ‰¹å¤„ç†ä¸šåŠ¡çš„è¿è¡Œæœ‰å¤´æœ‰å°¾ï¼Œè€Œé•¿æœŸä¼ºæœä¸šåŠ¡åœ¨ç”¨æˆ·ä¸åœæ­¢çš„æƒ…å†µä¸‹æ°¸è¿œè¿è¡Œã€‚Job ç®¡ç†çš„ Pod æ ¹æ®ç”¨æˆ·çš„è®¾ç½®æŠŠä»»åŠ¡æˆåŠŸå®Œæˆå°±è‡ªåŠ¨é€€å‡ºäº†ã€‚æˆåŠŸå®Œæˆçš„æ ‡å¿—æ ¹æ®ä¸åŒçš„ spec.completions ç­–ç•¥è€Œä¸åŒï¼šå• Pod å‹ä»»åŠ¡æœ‰ä¸€ä¸ª Pod æˆåŠŸå°±æ ‡å¿—å®Œæˆï¼›å®šæ•°æˆåŠŸå‹ä»»åŠ¡ä¿è¯æœ‰ N ä¸ªä»»åŠ¡å…¨éƒ¨æˆåŠŸï¼›å·¥ä½œé˜Ÿåˆ—å‹ä»»åŠ¡æ ¹æ®åº”ç”¨ç¡®è®¤çš„å…¨å±€æˆåŠŸè€Œæ ‡å¿—æˆåŠŸã€‚\nåå°æ”¯æ’‘æœåŠ¡é›†ï¼ˆDaemonSetï¼‰ linké•¿æœŸä¼ºæœå‹å’Œæ‰¹å¤„ç†å‹æœåŠ¡çš„æ ¸å¿ƒåœ¨ä¸šåŠ¡åº”ç”¨ï¼Œå¯èƒ½æœ‰äº›èŠ‚ç‚¹è¿è¡Œå¤šä¸ªåŒç±»ä¸šåŠ¡çš„ Podï¼Œæœ‰äº›èŠ‚ç‚¹ä¸Šåˆæ²¡æœ‰è¿™ç±» Pod è¿è¡Œï¼›è€Œåå°æ”¯æ’‘å‹æœåŠ¡çš„æ ¸å¿ƒå…³æ³¨ç‚¹åœ¨ Kubernetes é›†ç¾¤ä¸­çš„èŠ‚ç‚¹ï¼ˆç‰©ç†æœºæˆ–è™šæ‹Ÿæœºï¼‰ï¼Œè¦ä¿è¯æ¯ä¸ªèŠ‚ç‚¹ä¸Šéƒ½æœ‰ä¸€ä¸ªæ­¤ç±» Pod è¿è¡Œã€‚èŠ‚ç‚¹å¯èƒ½æ˜¯æ‰€æœ‰é›†ç¾¤èŠ‚ç‚¹ä¹Ÿå¯èƒ½æ˜¯é€šè¿‡ nodeSelector é€‰å®šçš„ä¸€äº›ç‰¹å®šèŠ‚ç‚¹ã€‚å…¸å‹çš„åå°æ”¯æ’‘å‹æœåŠ¡åŒ…æ‹¬ï¼Œå­˜å‚¨ï¼Œæ—¥å¿—å’Œç›‘æ§ç­‰åœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šæ”¯æŒ Kubernetes é›†ç¾¤è¿è¡Œçš„æœåŠ¡ã€‚\næœ‰çŠ¶æ€æœåŠ¡é›†ï¼ˆStatefulSetï¼‰ linkKubernetes åœ¨ 1.3 ç‰ˆæœ¬é‡Œå‘å¸ƒäº† Alpha ç‰ˆçš„ PetSet åŠŸèƒ½ï¼Œåœ¨ 1.5 ç‰ˆæœ¬é‡Œå°† PetSet åŠŸèƒ½å‡çº§åˆ°äº† Beta ç‰ˆæœ¬ï¼Œå¹¶é‡æ–°å‘½åä¸º StatefulSetï¼Œæœ€ç»ˆåœ¨ 1.9 ç‰ˆæœ¬é‡Œæˆä¸ºæ­£å¼ GA ç‰ˆæœ¬ã€‚åœ¨äº‘åŸç”Ÿåº”ç”¨çš„ä½“ç³»é‡Œï¼Œæœ‰ä¸‹é¢ä¸¤ç»„è¿‘ä¹‰è¯ï¼›ç¬¬ä¸€ç»„æ˜¯æ— çŠ¶æ€ï¼ˆstatelessï¼‰ã€ç‰²ç•œï¼ˆcattleï¼‰ã€æ— åï¼ˆnamelessï¼‰ã€å¯ä¸¢å¼ƒï¼ˆdisposableï¼‰ï¼›ç¬¬äºŒç»„æ˜¯æœ‰çŠ¶æ€ï¼ˆstatefulï¼‰ã€å® ç‰©ï¼ˆpetï¼‰ã€æœ‰åï¼ˆhaving nameï¼‰ã€ä¸å¯ä¸¢å¼ƒï¼ˆnon-disposableï¼‰ã€‚RC å’Œ RS ä¸»è¦æ˜¯æ§åˆ¶æä¾›æ— çŠ¶æ€æœåŠ¡çš„ï¼Œå…¶æ‰€æ§åˆ¶çš„ Pod çš„åå­—æ˜¯éšæœºè®¾ç½®çš„ï¼Œä¸€ä¸ª Pod å‡ºæ•…éšœäº†å°±è¢«ä¸¢å¼ƒæ‰ï¼Œåœ¨å¦ä¸€ä¸ªåœ°æ–¹é‡å¯ä¸€ä¸ªæ–°çš„ Podï¼Œåå­—å˜äº†ã€‚åå­—å’Œå¯åŠ¨åœ¨å“ªå„¿éƒ½ä¸é‡è¦ï¼Œé‡è¦çš„åªæ˜¯ Pod æ€»æ•°ï¼›è€Œ StatefulSet æ˜¯ç”¨æ¥æ§åˆ¶æœ‰çŠ¶æ€æœåŠ¡ï¼ŒStatefulSet ä¸­çš„æ¯ä¸ª Pod çš„åå­—éƒ½æ˜¯äº‹å…ˆç¡®å®šçš„ï¼Œä¸èƒ½æ›´æ”¹ã€‚StatefulSet ä¸­ Pod çš„åå­—çš„ä½œç”¨ï¼Œå¹¶ä¸æ˜¯ã€Šåƒä¸åƒå¯»ã€‹çš„äººæ€§åŸå› ï¼Œè€Œæ˜¯å…³è”ä¸è¯¥ Pod å¯¹åº”çš„çŠ¶æ€ã€‚\nå¯¹äº RC å’Œ RS ä¸­çš„ Podï¼Œä¸€èˆ¬ä¸æŒ‚è½½å­˜å‚¨æˆ–è€…æŒ‚è½½å…±äº«å­˜å‚¨ï¼Œä¿å­˜çš„æ˜¯æ‰€æœ‰ Pod å…±äº«çš„çŠ¶æ€ï¼ŒPod åƒç‰²ç•œä¸€æ ·æ²¡æœ‰åˆ†åˆ«ï¼ˆè¿™ä¼¼ä¹ä¹Ÿç¡®å®æ„å‘³ç€å¤±å»äº†äººæ€§ç‰¹å¾ï¼‰ï¼›å¯¹äº StatefulSet ä¸­çš„ Podï¼Œæ¯ä¸ª Pod æŒ‚è½½è‡ªå·±ç‹¬ç«‹çš„å­˜å‚¨ï¼Œå¦‚æœä¸€ä¸ª Pod å‡ºç°æ•…éšœï¼Œä»å…¶ä»–èŠ‚ç‚¹å¯åŠ¨ä¸€ä¸ªåŒæ ·åå­—çš„ Podï¼Œè¦æŒ‚è½½ä¸ŠåŸæ¥ Pod çš„å­˜å‚¨ç»§ç»­ä»¥å®ƒçš„çŠ¶æ€æä¾›æœåŠ¡ã€‚\né€‚åˆäº StatefulSet çš„ä¸šåŠ¡åŒ…æ‹¬æ•°æ®åº“æœåŠ¡ MySQL å’Œ PostgreSQLï¼Œé›†ç¾¤åŒ–ç®¡ç†æœåŠ¡ ZooKeeperã€etcd ç­‰æœ‰çŠ¶æ€æœåŠ¡ã€‚StatefulSet çš„å¦ä¸€ç§å…¸å‹åº”ç”¨åœºæ™¯æ˜¯ä½œä¸ºä¸€ç§æ¯”æ™®é€šå®¹å™¨æ›´ç¨³å®šå¯é çš„æ¨¡æ‹Ÿè™šæ‹Ÿæœºçš„æœºåˆ¶ã€‚ä¼ ç»Ÿçš„è™šæ‹Ÿæœºæ­£æ˜¯ä¸€ç§æœ‰çŠ¶æ€çš„å® ç‰©ï¼Œè¿ç»´äººå‘˜éœ€è¦ä¸æ–­åœ°ç»´æŠ¤å®ƒï¼Œå®¹å™¨åˆšå¼€å§‹æµè¡Œæ—¶ï¼Œæˆ‘ä»¬ç”¨å®¹å™¨æ¥æ¨¡æ‹Ÿè™šæ‹Ÿæœºä½¿ç”¨ï¼Œæ‰€æœ‰çŠ¶æ€éƒ½ä¿å­˜åœ¨å®¹å™¨é‡Œï¼Œè€Œè¿™å·²è¢«è¯æ˜æ˜¯éå¸¸ä¸å®‰å…¨ã€ä¸å¯é çš„ã€‚ä½¿ç”¨ StatefulSetï¼ŒPod ä»ç„¶å¯ä»¥é€šè¿‡æ¼‚ç§»åˆ°ä¸åŒèŠ‚ç‚¹æä¾›é«˜å¯ç”¨ï¼Œè€Œå­˜å‚¨ä¹Ÿå¯ä»¥é€šè¿‡å¤–æŒ‚çš„å­˜å‚¨æ¥æä¾›é«˜å¯é æ€§ï¼ŒStatefulSet åšçš„åªæ˜¯å°†ç¡®å®šçš„ Pod ä¸ç¡®å®šçš„å­˜å‚¨å…³è”èµ·æ¥ä¿è¯çŠ¶æ€çš„è¿ç»­æ€§ã€‚\né›†ç¾¤è”é‚¦ï¼ˆFederationï¼‰ linkKubernetes åœ¨ 1.3 ç‰ˆæœ¬é‡Œå‘å¸ƒäº† beta ç‰ˆçš„ Federation åŠŸèƒ½ã€‚åœ¨äº‘è®¡ç®—ç¯å¢ƒä¸­ï¼ŒæœåŠ¡çš„ä½œç”¨è·ç¦»èŒƒå›´ä»è¿‘åˆ°è¿œä¸€èˆ¬å¯ä»¥æœ‰ï¼šåŒä¸»æœºï¼ˆHostï¼ŒNodeï¼‰ã€è·¨ä¸»æœºåŒå¯ç”¨åŒºï¼ˆAvailable Zoneï¼‰ã€è·¨å¯ç”¨åŒºåŒåœ°åŒºï¼ˆRegionï¼‰ã€è·¨åœ°åŒºåŒæœåŠ¡å•†ï¼ˆCloud Service Providerï¼‰ã€è·¨äº‘å¹³å°ã€‚Kubernetes çš„è®¾è®¡å®šä½æ˜¯å•ä¸€é›†ç¾¤åœ¨åŒä¸€ä¸ªåœ°åŸŸå†…ï¼Œå› ä¸ºåŒä¸€ä¸ªåœ°åŒºçš„ç½‘ç»œæ€§èƒ½æ‰èƒ½æ»¡è¶³ Kubernetes çš„è°ƒåº¦å’Œè®¡ç®—å­˜å‚¨è¿æ¥è¦æ±‚ã€‚è€Œè”åˆé›†ç¾¤æœåŠ¡å°±æ˜¯ä¸ºæä¾›è·¨ Region è·¨æœåŠ¡å•† Kubernetes é›†ç¾¤æœåŠ¡è€Œè®¾è®¡çš„ã€‚\næ¯ä¸ª Kubernetes Federation æœ‰è‡ªå·±çš„åˆ†å¸ƒå¼å­˜å‚¨ã€API Server å’Œ Controller Managerã€‚ç”¨æˆ·å¯ä»¥é€šè¿‡ Federation çš„ API Server æ³¨å†Œè¯¥ Federation çš„æˆå‘˜ Kubernetes Clusterã€‚å½“ç”¨æˆ·é€šè¿‡ Federation çš„ API Server åˆ›å»ºã€æ›´æ”¹ API å¯¹è±¡æ—¶ï¼ŒFederation API Server ä¼šåœ¨è‡ªå·±æ‰€æœ‰æ³¨å†Œçš„å­ Kubernetes Cluster éƒ½åˆ›å»ºä¸€ä»½å¯¹åº”çš„ API å¯¹è±¡ã€‚åœ¨æä¾›ä¸šåŠ¡è¯·æ±‚æœåŠ¡æ—¶ï¼ŒKubernetes Federation ä¼šå…ˆåœ¨è‡ªå·±çš„å„ä¸ªå­ Cluster ä¹‹é—´åšè´Ÿè½½å‡è¡¡ï¼Œè€Œå¯¹äºå‘é€åˆ°æŸä¸ªå…·ä½“ Kubernetes Cluster çš„ä¸šåŠ¡è¯·æ±‚ï¼Œä¼šä¾ç…§è¿™ä¸ª Kubernetes Cluster ç‹¬ç«‹æä¾›æœåŠ¡æ—¶ä¸€æ ·çš„è°ƒåº¦æ¨¡å¼å»åš Kubernetes Cluster å†…éƒ¨çš„è´Ÿè½½å‡è¡¡ã€‚è€Œ Cluster ä¹‹é—´çš„è´Ÿè½½å‡è¡¡æ˜¯é€šè¿‡åŸŸåæœåŠ¡çš„è´Ÿè½½å‡è¡¡æ¥å®ç°çš„ã€‚\nFederation V1 çš„è®¾è®¡æ˜¯å°½é‡ä¸å½±å“ Kubernetes Cluster ç°æœ‰çš„å·¥ä½œæœºåˆ¶ï¼Œè¿™æ ·å¯¹äºæ¯ä¸ªå­ Kubernetes é›†ç¾¤æ¥è¯´ï¼Œå¹¶ä¸éœ€è¦æ›´å¤–å±‚çš„æœ‰ä¸€ä¸ª Kubernetes Federationï¼Œä¹Ÿå°±æ˜¯æ„å‘³ç€æ‰€æœ‰ç°æœ‰çš„ Kubernetes ä»£ç å’Œæœºåˆ¶ä¸éœ€è¦å› ä¸º Federation åŠŸèƒ½æœ‰ä»»ä½•å˜åŒ–ã€‚\nç›®å‰æ­£åœ¨å¼€å‘çš„ Federation V2ï¼Œåœ¨ä¿ç•™ç°æœ‰ Kubernetes API çš„åŒæ—¶ï¼Œä¼šå¼€å‘æ–°çš„ Federation ä¸“ç”¨çš„ API æ¥å£ï¼Œè¯¦ç»†å†…å®¹å¯ä»¥åœ¨ è¿™é‡Œ æ‰¾åˆ°ã€‚\nå­˜å‚¨å·ï¼ˆVolumeï¼‰ linkKubernetes é›†ç¾¤ä¸­çš„å­˜å‚¨å·è·Ÿ Docker çš„å­˜å‚¨å·æœ‰äº›ç±»ä¼¼ï¼Œåªä¸è¿‡ Docker çš„å­˜å‚¨å·ä½œç”¨èŒƒå›´ä¸ºä¸€ä¸ªå®¹å™¨ï¼Œè€Œ Kubernetes çš„å­˜å‚¨å·çš„ç”Ÿå‘½å‘¨æœŸå’Œä½œç”¨èŒƒå›´æ˜¯ä¸€ä¸ª Podã€‚æ¯ä¸ª Pod ä¸­å£°æ˜çš„å­˜å‚¨å·ç”± Pod ä¸­çš„æ‰€æœ‰å®¹å™¨å…±äº«ã€‚Kubernetes æ”¯æŒéå¸¸å¤šçš„å­˜å‚¨å·ç±»å‹ï¼Œç‰¹åˆ«çš„ï¼Œæ”¯æŒå¤šç§å…¬æœ‰äº‘å¹³å°çš„å­˜å‚¨ï¼ŒåŒ…æ‹¬ AWSï¼ŒGoogle å’Œ Azure äº‘ï¼›æ”¯æŒå¤šç§åˆ†å¸ƒå¼å­˜å‚¨åŒ…æ‹¬ GlusterFS å’Œ Cephï¼›ä¹Ÿæ”¯æŒè¾ƒå®¹æ˜“ä½¿ç”¨çš„ä¸»æœºæœ¬åœ°ç›®å½• emptyDir, hostPath å’Œ NFSã€‚Kubernetes è¿˜æ”¯æŒä½¿ç”¨ Persistent Volume Claim å³ PVC è¿™ç§é€»è¾‘å­˜å‚¨ï¼Œä½¿ç”¨è¿™ç§å­˜å‚¨ï¼Œä½¿å¾—å­˜å‚¨çš„ä½¿ç”¨è€…å¯ä»¥å¿½ç•¥åå°çš„å®é™…å­˜å‚¨æŠ€æœ¯ï¼ˆä¾‹å¦‚ AWSï¼ŒGoogle æˆ– GlusterFS å’Œ Cephï¼‰ï¼Œè€Œå°†æœ‰å…³å­˜å‚¨å®é™…æŠ€æœ¯çš„é…ç½®äº¤ç»™å­˜å‚¨ç®¡ç†å‘˜é€šè¿‡ Persistent Volume æ¥é…ç½®ã€‚\næŒä¹…å­˜å‚¨å·ï¼ˆPersistent Volumeï¼ŒPVï¼‰å’ŒæŒä¹…å­˜å‚¨å·å£°æ˜ï¼ˆPersistent Volume Claimï¼ŒPVCï¼‰ linkPV å’Œ PVC ä½¿å¾— Kubernetes é›†ç¾¤å…·å¤‡äº†å­˜å‚¨çš„é€»è¾‘æŠ½è±¡èƒ½åŠ›ï¼Œä½¿å¾—åœ¨é…ç½® Pod çš„é€»è¾‘é‡Œå¯ä»¥å¿½ç•¥å¯¹å®é™…åå°å­˜å‚¨æŠ€æœ¯çš„é…ç½®ï¼Œè€ŒæŠŠè¿™é¡¹é…ç½®çš„å·¥ä½œäº¤ç»™ PV çš„é…ç½®è€…ï¼Œå³é›†ç¾¤çš„ç®¡ç†è€…ã€‚å­˜å‚¨çš„ PV å’Œ PVC çš„è¿™ç§å…³ç³»ï¼Œè·Ÿè®¡ç®—çš„ Node å’Œ Pod çš„å…³ç³»æ˜¯éå¸¸ç±»ä¼¼çš„ï¼›PV å’Œ Node æ˜¯èµ„æºçš„æä¾›è€…ï¼Œæ ¹æ®é›†ç¾¤çš„åŸºç¡€è®¾æ–½å˜åŒ–è€Œå˜åŒ–ï¼Œç”± Kubernetes é›†ç¾¤ç®¡ç†å‘˜é…ç½®ï¼›è€Œ PVC å’Œ Pod æ˜¯èµ„æºçš„ä½¿ç”¨è€…ï¼Œæ ¹æ®ä¸šåŠ¡æœåŠ¡çš„éœ€æ±‚å˜åŒ–è€Œå˜åŒ–ï¼Œæœ‰ Kubernetes é›†ç¾¤çš„ä½¿ç”¨è€…å³æœåŠ¡çš„ç®¡ç†å‘˜æ¥é…ç½®ã€‚\nèŠ‚ç‚¹ï¼ˆNodeï¼‰ linkKubernetes é›†ç¾¤ä¸­çš„è®¡ç®—èƒ½åŠ›ç”± Node æä¾›ï¼Œæœ€åˆ Node ç§°ä¸ºæœåŠ¡èŠ‚ç‚¹ Minionï¼Œåæ¥æ”¹åä¸º Nodeã€‚Kubernetes é›†ç¾¤ä¸­çš„ Node ä¹Ÿå°±ç­‰åŒäº Mesos é›†ç¾¤ä¸­çš„ Slave èŠ‚ç‚¹ï¼Œæ˜¯æ‰€æœ‰ Pod è¿è¡Œæ‰€åœ¨çš„å·¥ä½œä¸»æœºï¼Œå¯ä»¥æ˜¯ç‰©ç†æœºä¹Ÿå¯ä»¥æ˜¯è™šæ‹Ÿæœºã€‚ä¸è®ºæ˜¯ç‰©ç†æœºè¿˜æ˜¯è™šæ‹Ÿæœºï¼Œå·¥ä½œä¸»æœºçš„ç»Ÿä¸€ç‰¹å¾æ˜¯ä¸Šé¢è¦è¿è¡Œ kubelet ç®¡ç†èŠ‚ç‚¹ä¸Šè¿è¡Œçš„å®¹å™¨ã€‚\nå¯†é’¥å¯¹è±¡ï¼ˆSecretï¼‰ linkSecret æ˜¯ç”¨æ¥ä¿å­˜å’Œä¼ é€’å¯†ç ã€å¯†é’¥ã€è®¤è¯å‡­è¯è¿™äº›æ•æ„Ÿä¿¡æ¯çš„å¯¹è±¡ã€‚ä½¿ç”¨ Secret çš„å¥½å¤„æ˜¯å¯ä»¥é¿å…æŠŠæ•æ„Ÿä¿¡æ¯æ˜æ–‡å†™åœ¨é…ç½®æ–‡ä»¶é‡Œã€‚åœ¨ Kubernetes é›†ç¾¤ä¸­é…ç½®å’Œä½¿ç”¨æœåŠ¡ä¸å¯é¿å…çš„è¦ç”¨åˆ°å„ç§æ•æ„Ÿä¿¡æ¯å®ç°ç™»å½•ã€è®¤è¯ç­‰åŠŸèƒ½ï¼Œä¾‹å¦‚è®¿é—® AWS å­˜å‚¨çš„ç”¨æˆ·åå¯†ç ã€‚ä¸ºäº†é¿å…å°†ç±»ä¼¼çš„æ•æ„Ÿä¿¡æ¯æ˜æ–‡å†™åœ¨æ‰€æœ‰éœ€è¦ä½¿ç”¨çš„é…ç½®æ–‡ä»¶ä¸­ï¼Œå¯ä»¥å°†è¿™äº›ä¿¡æ¯å­˜å…¥ä¸€ä¸ª Secret å¯¹è±¡ï¼Œè€Œåœ¨é…ç½®æ–‡ä»¶ä¸­é€šè¿‡ Secret å¯¹è±¡å¼•ç”¨è¿™äº›æ•æ„Ÿä¿¡æ¯ã€‚è¿™ç§æ–¹å¼çš„å¥½å¤„åŒ…æ‹¬ï¼šæ„å›¾æ˜ç¡®ï¼Œé¿å…é‡å¤ï¼Œå‡å°‘æš´æ¼æœºä¼šã€‚\nç”¨æˆ·å¸æˆ·ï¼ˆUser Accountï¼‰å’ŒæœåŠ¡å¸æˆ·ï¼ˆService Accountï¼‰ linké¡¾åæ€ä¹‰ï¼Œç”¨æˆ·å¸æˆ·ä¸ºäººæä¾›è´¦æˆ·æ ‡è¯†ï¼Œè€ŒæœåŠ¡è´¦æˆ·ä¸ºè®¡ç®—æœºè¿›ç¨‹å’Œ Kubernetes é›†ç¾¤ä¸­è¿è¡Œçš„ Pod æä¾›è´¦æˆ·æ ‡è¯†ã€‚ç”¨æˆ·å¸æˆ·å’ŒæœåŠ¡å¸æˆ·çš„ä¸€ä¸ªåŒºåˆ«æ˜¯ä½œç”¨èŒƒå›´ï¼›ç”¨æˆ·å¸æˆ·å¯¹åº”çš„æ˜¯äººçš„èº«ä»½ï¼Œäººçš„èº«ä»½ä¸æœåŠ¡çš„ namespace æ— å…³ï¼Œæ‰€ä»¥ç”¨æˆ·è´¦æˆ·æ˜¯è·¨ namespace çš„ï¼›è€ŒæœåŠ¡å¸æˆ·å¯¹åº”çš„æ˜¯ä¸€ä¸ªè¿è¡Œä¸­ç¨‹åºçš„èº«ä»½ï¼Œä¸ç‰¹å®š namespace æ˜¯ç›¸å…³çš„ã€‚\nå‘½åç©ºé—´ï¼ˆNamespaceï¼‰ linkå‘½åç©ºé—´ä¸º Kubernetes é›†ç¾¤æä¾›è™šæ‹Ÿçš„éš”ç¦»ä½œç”¨ï¼ŒKubernetes é›†ç¾¤åˆå§‹æœ‰ä¸¤ä¸ªå‘½åç©ºé—´ï¼Œåˆ†åˆ«æ˜¯é»˜è®¤å‘½åç©ºé—´ default å’Œç³»ç»Ÿå‘½åç©ºé—´ kube-systemï¼Œé™¤æ­¤ä»¥å¤–ï¼Œç®¡ç†å‘˜å¯ä»¥å¯ä»¥åˆ›å»ºæ–°çš„å‘½åç©ºé—´æ»¡è¶³éœ€è¦ã€‚\nRBAC è®¿é—®æˆæƒ linkKubernetes åœ¨ 1.3 ç‰ˆæœ¬ä¸­å‘å¸ƒäº† alpha ç‰ˆçš„åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼ˆRole-based Access Controlï¼ŒRBACï¼‰çš„æˆæƒæ¨¡å¼ã€‚ç›¸å¯¹äºåŸºäºå±æ€§çš„è®¿é—®æ§åˆ¶ï¼ˆAttribute-based Access Controlï¼ŒABACï¼‰ï¼ŒRBAC ä¸»è¦æ˜¯å¼•å…¥äº†è§’è‰²ï¼ˆRoleï¼‰å’Œè§’è‰²ç»‘å®šï¼ˆRoleBindingï¼‰çš„æŠ½è±¡æ¦‚å¿µã€‚åœ¨ ABAC ä¸­ï¼ŒKubernetes é›†ç¾¤ä¸­çš„è®¿é—®ç­–ç•¥åªèƒ½è·Ÿç”¨æˆ·ç›´æ¥å…³è”ï¼›è€Œåœ¨ RBAC ä¸­ï¼Œè®¿é—®ç­–ç•¥å¯ä»¥è·ŸæŸä¸ªè§’è‰²å…³è”ï¼Œå…·ä½“çš„ç”¨æˆ·åœ¨è·Ÿä¸€ä¸ªæˆ–å¤šä¸ªè§’è‰²ç›¸å…³è”ã€‚æ˜¾ç„¶ï¼ŒRBAC åƒå…¶ä»–æ–°åŠŸèƒ½ä¸€æ ·ï¼Œæ¯æ¬¡å¼•å…¥æ–°åŠŸèƒ½ï¼Œéƒ½ä¼šå¼•å…¥æ–°çš„ API å¯¹è±¡ï¼Œä»è€Œå¼•å…¥æ–°çš„æ¦‚å¿µæŠ½è±¡ï¼Œè€Œè¿™ä¸€æ–°çš„æ¦‚å¿µæŠ½è±¡ä¸€å®šä¼šä½¿é›†ç¾¤æœåŠ¡ç®¡ç†å’Œä½¿ç”¨æ›´å®¹æ˜“æ‰©å±•å’Œé‡ç”¨ã€‚\nå¼€æ”¾å®¹å™¨æ¥å£ linkå®¹å™¨è¿è¡Œæ—¶æ¥å£ï¼ˆCRIï¼‰ linkCRIï¼ˆContainer Runtime Interfaceï¼Œå®¹å™¨è¿è¡Œæ—¶æ¥å£ï¼‰æ˜¯ Kubernetes ä¸­çš„ä¸€ä¸ªæ ¸å¿ƒæŠ½è±¡å±‚ï¼Œç”¨äºæ ‡å‡†åŒ– Kubernetes ä¸ä¸åŒå®¹å™¨è¿è¡Œæ—¶ä¹‹é—´çš„äº¤äº’ã€‚å®ƒçš„æ ¸å¿ƒç›®æ ‡æ˜¯è§£è€¦ Kubernetes ç»„ä»¶ï¼ˆå¦‚ kubeletï¼‰ä¸å…·ä½“çš„å®¹å™¨è¿è¡Œæ—¶ï¼Œä½¿ Kubernetes èƒ½å¤Ÿçµæ´»æ”¯æŒå¤šç§å®¹å™¨æŠ€æœ¯ï¼ˆcontainerdã€dockerdâ€¦ï¼‰ã€‚\nCRI ä¸­å®šä¹‰äº† å®¹å™¨ å’Œ é•œåƒ çš„æœåŠ¡çš„æ¥å£ï¼Œå› ä¸ºå®¹å™¨è¿è¡Œæ—¶ä¸é•œåƒçš„ç”Ÿå‘½å‘¨æœŸæ˜¯å½¼æ­¤éš”ç¦»çš„ï¼Œå› æ­¤éœ€è¦å®šä¹‰ä¸¤ä¸ªæœåŠ¡ã€‚è¯¥æ¥å£ä½¿ç”¨ Protocol Bufferï¼ŒåŸºäº gRPCï¼Œåœ¨ Kubernetes v1.10 + ç‰ˆæœ¬ä¸­æ˜¯åœ¨ pkg/kubelet/apis/cri/runtime/v1alpha2 çš„ api.proto ä¸­å®šä¹‰çš„ã€‚\nContainer Runtime å®ç°äº† CRI gRPC Serverï¼ŒåŒ…æ‹¬ RuntimeService å’Œ ImageServiceã€‚è¯¥ gRPC Server éœ€è¦ç›‘å¬æœ¬åœ°çš„ Unix socketï¼Œè€Œ kubelet åˆ™ä½œä¸º gRPC Client è¿è¡Œã€‚\nRuntimeServiceå¤„ç†ä¸å®¹å™¨è¿è¡Œæ—¶ç›¸å…³çš„æ“ä½œï¼Œç®¡ç†å®¹å™¨çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸã€‚\nImageServiceå¤„ç†ä¸å®¹å™¨é•œåƒç›¸å…³çš„æ“ä½œï¼Œç®¡ç†é•œåƒçš„æ‹‰å–ã€å­˜å‚¨å’Œæ¸…ç†ã€‚\ngraph LR subgraph Kubelet grpcclient[gRPC Client] end subgraph CRI_Shim grpcserver[gRPC Server] end subgraph Container_Runtime runtime[Runtime Daemon] container1[Container 1] container2[Container 2] container3[Container 3] end grpcclient -- \"gRPC è¯·æ±‚ (Create/Start/Stop)\" --\u003e grpcserver grpcserver -- \"CRI å‘½ä»¤ (containerd/CRI-O)\" --\u003e runtime runtime -. \"å®¹å™¨ç”Ÿå‘½å‘¨æœŸç®¡ç†\" .-\u003e container1 runtime -. \"å®¹å™¨ç”Ÿå‘½å‘¨æœŸç®¡ç†\" .-\u003e container2 runtime -. \"å®¹å™¨ç”Ÿå‘½å‘¨æœŸç®¡ç†\" .-\u003e container3 å®¹å™¨ç½‘ç»œæ¥å£ï¼ˆCNIï¼‰ linkCNIæ˜¯Kubernetesç½‘ç»œæ’ä»¶çš„åŸºç¡€æ¥å£è§„èŒƒï¼Œå®ƒå®šä¹‰äº†å®¹å™¨è¿è¡Œæ—¶ï¼ˆå¦‚kubeletï¼‰ä¸ç½‘ç»œæ’ä»¶ä¹‹é—´çš„äº¤äº’åè®®ã€‚é€šè¿‡CNIï¼Œä¸åŒçš„ç½‘ç»œæ–¹æ¡ˆï¼ˆå¦‚Calicoã€Flannelã€Weaveã€Ciliumç­‰ï¼‰å¯ä»¥çµæ´»æ¥å…¥Kubernetesï¼Œå®ç°Podä¹‹é—´çš„ç½‘ç»œé€šä¿¡ã€‚\nCNI è®¾è®¡çš„åŸºæœ¬æ€è·¯æ˜¯ï¼šå®¹å™¨è¿è¡Œæ—¶åˆ›å»ºç½‘ç»œå‘½ä»¤ç©ºé—´ (network namepsace) åï¼Œç„¶åç”± CNI æ’ä»¶è´Ÿè´£ç½‘ç»œé…ç½®ï¼Œæœ€åå¯åŠ¨å®¹å™¨å†…çš„åº”ç”¨ã€‚CNI å®šä¹‰äº†ä¸¤ä¸ªæ’ä»¶ï¼Œ CNI plugin ä¸»è¦ç”¨äºè´Ÿè´£é…ç½®ç½‘ç»œï¼Œä»¥åŠè´Ÿè´£å®¹å™¨åœ°å€çš„ IPAM pluginã€‚æˆ‘ä»¬ä»¥å®¹å™¨çš„å¯åŠ¨ä¸ºä¾‹ï¼Œä»‹ç»è¿™ä¸¤ä¸ªæ’ä»¶çš„åº”ç”¨ã€‚\nkubelet åœ¨å¯åŠ¨å®¹å™¨ä¹‹å‰ï¼Œå…ˆå¯ç”¨ Pause å®¹å™¨ã€‚ Pause å®¹å™¨å¯åŠ¨ä¹‹å‰åˆ›å»ºç½‘ç»œ namespaceã€‚ å¦‚æœ Kubelet é…ç½®äº† CNIï¼Œä¼šè°ƒç”¨å¯¹åº”çš„ CNI æ’ä»¶ CNI æ’ä»¶æ‰§è¡Œç½‘ç»œé…ç½®æ“ä½œï¼Œå¦‚åˆ›å»ºè™šæ‹Ÿç½‘å¡ã€åŠ å…¥ç½‘ç»œç©ºé—´ç­‰ã€‚ CNI è°ƒç”¨ ipam åˆ†é…åœ°å€ã€‚ å¯åŠ¨ Pod å†…å…¶ä»–å®¹å™¨ï¼Œå¹¶å…±äº« Pause å®¹å™¨å†…ç½‘ç»œç©ºé—´ã€‚ graph LR subgraph ä¸»æœº A[å®¹å™¨è¿è¡Œæ—¶] --\u003e|1.è°ƒç”¨| B(CNIæ’ä»¶) B --\u003e|2.è¯»å–| C[/etc/cni/net.d/conf\\] B --\u003e|3.è°ƒç”¨| D[IPAM] D --\u003e|4.åˆ†é…IP| B B --\u003e|5.åˆ›å»ºveth| E[ç½‘ç»œè®¾å¤‡] E --\u003e|6.è¿æ¥ç½‘æ¡¥| F[ä¸»æœºç½‘ç»œ] end A --\u003e|7.è¿”å›é…ç½®| G[å®¹å™¨ç½‘ç»œæ ˆ] å®¹å™¨å­˜å‚¨æ¥å£ï¼ˆCSIï¼‰ linkæ—©æœŸ Kubernetes å­˜å‚¨æ’ä»¶ï¼ˆå¦‚ in-tree å·æ’ä»¶ï¼‰ä¸æ ¸å¿ƒä»£ç æ·±åº¦ç»‘å®šï¼Œå¯¼è‡´ï¼šæ–°å¢å­˜å‚¨ç±»å‹éœ€ä¿®æ”¹ Kubernetes æºç ï¼Œå‡çº§å’Œç»´æŠ¤å›°éš¾ã€‚ç”¨æˆ·å—é™äº Kubernetes å®˜æ–¹æ”¯æŒçš„å­˜å‚¨ç±»å‹ã€‚\nK8s CSIï¼ˆContainer Storage Interfaceï¼‰ æ˜¯ Kubernetes ä¸­ç”¨äºæ ‡å‡†åŒ–å­˜å‚¨æ’ä»¶å¼€å‘çš„æ¥å£è§„èŒƒï¼Œæ—¨åœ¨å°†å­˜å‚¨ç³»ç»Ÿçš„å®ç°ä¸ Kubernetes æ ¸å¿ƒä»£ç è§£è€¦ï¼Œä½¿ç¬¬ä¸‰æ–¹å­˜å‚¨æä¾›å•†ï¼ˆå¦‚äº‘å‚å•†ã€å­˜å‚¨å‚å•†ï¼‰èƒ½æ›´çµæ´»åœ°ä¸ºé›†ç¾¤æä¾›æŒä¹…åŒ–å­˜å‚¨æœåŠ¡ã€‚\nCSI Driverï¼šç”±å­˜å‚¨æä¾›å•†å®ç°ï¼ŒåŒ…å«ï¼š\nIdentity Serviceï¼šæŠ¥å‘Šé©±åŠ¨åç§°å’Œå…¼å®¹æ€§ã€‚ Controller Serviceï¼šç®¡ç†å·çš„åˆ›å»º/åˆ é™¤ã€å¿«ç…§ç­‰ã€‚ Node Serviceï¼šåœ¨èŠ‚ç‚¹ä¸Šæ‰§è¡Œå·æŒ‚è½½/å¸è½½æ“ä½œã€‚ Kubernetes ä¾§ç»„ä»¶ï¼š\nexternal-provisionerï¼šç›‘å¬ PVCï¼ˆPersistentVolumeClaimï¼‰ï¼Œè§¦å‘å·åˆ›å»ºã€‚ external-attacherï¼šå°†å·ç»‘å®šåˆ°èŠ‚ç‚¹ã€‚ node-driver-registrarï¼šå‘ Kubelet æ³¨å†Œ CSI é©±åŠ¨ã€‚ å·¥ä½œæµç¨‹ï¼Œä»¥åˆ›å»ºå­˜å‚¨å·ä¸ºä¾‹\nç”¨æˆ·åˆ›å»º PersistentVolumeClaimï¼ˆPVCï¼‰ã€‚ CSI Driver çš„ Controller Service æ”¶åˆ°è¯·æ±‚ï¼Œè°ƒç”¨äº‘å­˜å‚¨ API åˆ›å»ºå­˜å‚¨å·ã€‚ Node Service åœ¨ç›®æ ‡èŠ‚ç‚¹æŒ‚è½½å·ï¼Œä¾› Pod ä½¿ç”¨ã€‚ StorageClassï¼šå®šä¹‰åŠ¨æ€å­˜å‚¨çš„é…ç½®ç­–ç•¥ï¼Œæ˜¯è¿æ¥ PVC å’Œ CSI é©±åŠ¨çš„æ¡¥æ¢ã€‚\nPVï¼šå­˜å‚¨èµ„æºçš„å®ä½“ï¼ŒåŠ¨æ€åœºæ™¯ä¸‹ç”± CSI é©±åŠ¨è‡ªåŠ¨åˆ›å»ºã€‚\nPVCï¼šç”¨æˆ·è¯·æ±‚å­˜å‚¨çš„æŠ½è±¡ï¼Œè§¦å‘ CSI é©±åŠ¨çš„åŠ¨æ€é…ç½®æµç¨‹ã€‚\n"
            }
        );
    index.add(
            {
                id:  1 ,
                href: "\/docs\/information\/software\/cloud\/storage\/secret\/",
                title: "Secret",
                description: "Secret è§£å†³äº†å¯†ç ã€tokenã€å¯†é’¥ç­‰æ•æ„Ÿæ•°æ®çš„é…ç½®é—®é¢˜ï¼Œè€Œä¸éœ€è¦æŠŠè¿™äº›æ•æ„Ÿæ•°æ®æš´éœ²åˆ°é•œåƒæˆ–è€… Pod Spec ä¸­ã€‚Secret å¯ä»¥ä»¥ Volume æˆ–è€…ç¯å¢ƒå˜é‡çš„æ–¹å¼ä½¿ç”¨ã€‚\nSecret æœ‰ä¸‰ç§ç±»å‹ï¼š\nService Account ï¼šç”¨æ¥è®¿é—® Kubernetes APIï¼Œç”± Kubernetes è‡ªåŠ¨åˆ›å»ºï¼Œå¹¶ä¸”ä¼šè‡ªåŠ¨æŒ‚è½½åˆ° Pod çš„ /run/secrets/kubernetes.io/serviceaccount ç›®å½•ä¸­ï¼› Opaque ï¼šbase64 ç¼–ç æ ¼å¼çš„ Secretï¼Œç”¨æ¥å­˜å‚¨å¯†ç ã€å¯†é’¥ç­‰ï¼› kubernetes.io/dockerconfigjson ï¼šç”¨æ¥å­˜å‚¨ç§æœ‰ docker registry çš„è®¤è¯ä¿¡æ¯ã€‚ Opaque Secret linkOpaque ç±»å‹çš„æ•°æ®æ˜¯ä¸€ä¸ª map ç±»å‹ï¼Œè¦æ±‚ value æ˜¯ base64 ç¼–ç æ ¼å¼ï¼š\n$ echo -n \"admin\" | base64 YWRtaW4= $ echo -n \"1f2d1e2e67df\" | base64 MWYyZDFlMmU2N2Rm secrets.yml\napiVersion: v1 kind: Secret metadata: name: mysecret type: Opaque data: password: MWYyZDFlMmU2N2Rm username: YWRtaW4= æ¥ç€ï¼Œå°±å¯ä»¥åˆ›å»º secret äº†ï¼škubectl create -f secrets.ymlã€‚\n",
                content: "Secret è§£å†³äº†å¯†ç ã€tokenã€å¯†é’¥ç­‰æ•æ„Ÿæ•°æ®çš„é…ç½®é—®é¢˜ï¼Œè€Œä¸éœ€è¦æŠŠè¿™äº›æ•æ„Ÿæ•°æ®æš´éœ²åˆ°é•œåƒæˆ–è€… Pod Spec ä¸­ã€‚Secret å¯ä»¥ä»¥ Volume æˆ–è€…ç¯å¢ƒå˜é‡çš„æ–¹å¼ä½¿ç”¨ã€‚\nSecret æœ‰ä¸‰ç§ç±»å‹ï¼š\nService Account ï¼šç”¨æ¥è®¿é—® Kubernetes APIï¼Œç”± Kubernetes è‡ªåŠ¨åˆ›å»ºï¼Œå¹¶ä¸”ä¼šè‡ªåŠ¨æŒ‚è½½åˆ° Pod çš„ /run/secrets/kubernetes.io/serviceaccount ç›®å½•ä¸­ï¼› Opaque ï¼šbase64 ç¼–ç æ ¼å¼çš„ Secretï¼Œç”¨æ¥å­˜å‚¨å¯†ç ã€å¯†é’¥ç­‰ï¼› kubernetes.io/dockerconfigjson ï¼šç”¨æ¥å­˜å‚¨ç§æœ‰ docker registry çš„è®¤è¯ä¿¡æ¯ã€‚ Opaque Secret linkOpaque ç±»å‹çš„æ•°æ®æ˜¯ä¸€ä¸ª map ç±»å‹ï¼Œè¦æ±‚ value æ˜¯ base64 ç¼–ç æ ¼å¼ï¼š\n$ echo -n \"admin\" | base64 YWRtaW4= $ echo -n \"1f2d1e2e67df\" | base64 MWYyZDFlMmU2N2Rm secrets.yml\napiVersion: v1 kind: Secret metadata: name: mysecret type: Opaque data: password: MWYyZDFlMmU2N2Rm username: YWRtaW4= æ¥ç€ï¼Œå°±å¯ä»¥åˆ›å»º secret äº†ï¼škubectl create -f secrets.ymlã€‚\nåˆ›å»ºå¥½ secret ä¹‹åï¼Œæœ‰ä¸¤ç§æ–¹å¼æ¥ä½¿ç”¨å®ƒï¼š\nä»¥ Volume æ–¹å¼ ä»¥ç¯å¢ƒå˜é‡æ–¹å¼ å°† Secret æŒ‚è½½åˆ° Volume ä¸­ link apiVersion: v1 kind: Pod metadata: labels: name: db name: db spec: volumes: - name: secrets secret: secretName: mysecret containers: - image: gcr.io/my_project_id/pg:v1 name: db volumeMounts: - name: secrets mountPath: \"/etc/secrets\" readOnly: true ports: - name: cp containerPort: 5432 hostPort: 5432 å°† Secret å¯¼å‡ºåˆ°ç¯å¢ƒå˜é‡ä¸­ link apiVersion: extensions/v1beta1 kind: Deployment metadata: name: wordpress-deployment spec: replicas: 2 strategy: type: RollingUpdate template: metadata: labels: app: wordpress visualize: \"true\" spec: containers: - name: \"wordpress\" image: \"wordpress\" ports: - containerPort: 80 env: - name: WORDPRESS_DB_USER valueFrom: secretKeyRef: name: mysecret key: username - name: WORDPRESS_DB_PASSWORD valueFrom: secretKeyRef: name: mysecret key: password kubernetes.io/dockerconfigjson linkå¯ä»¥ç›´æ¥ç”¨ kubectl å‘½ä»¤æ¥åˆ›å»ºç”¨äº docker registry è®¤è¯çš„ secretï¼š\n$ kubectl create secret docker-registry myregistrykey --docker-server=DOCKER_REGISTRY_SERVER --docker-username=DOCKER_USER --docker-password=DOCKER_PASSWORD --docker-email=DOCKER_EMAIL secret \"myregistrykey\" created. ä¹Ÿå¯ä»¥ç›´æ¥è¯»å– ~/.docker/config.json çš„å†…å®¹æ¥åˆ›å»ºï¼š\n$ cat ~/.docker/config.json | base64 $ cat \u003e myregistrykey.yaml \u003c"
            }
        );
    index.add(
            {
                id:  2 ,
                href: "\/docs\/information\/software\/cloud\/service-discovery\/service\/",
                title: "Service",
                description: "Kubernetes Pod æ˜¯æœ‰ç”Ÿå‘½å‘¨æœŸçš„ï¼Œå®ƒä»¬å¯ä»¥è¢«åˆ›å»ºï¼Œä¹Ÿå¯ä»¥è¢«é”€æ¯ï¼Œç„¶è€Œä¸€æ—¦è¢«é”€æ¯ç”Ÿå‘½å°±æ°¸è¿œç»“æŸã€‚é€šè¿‡ ReplicationController èƒ½å¤ŸåŠ¨æ€åœ°åˆ›å»ºå’Œé”€æ¯ Podã€‚ æ¯ä¸ª Pod éƒ½ä¼šè·å–å®ƒè‡ªå·±çš„ IP åœ°å€ï¼Œå³ä½¿è¿™äº› IP åœ°å€ä¸æ€»æ˜¯ç¨³å®šå¯ä¾èµ–çš„ã€‚è¿™ä¼šå¯¼è‡´ä¸€ä¸ªé—®é¢˜ï¼šåœ¨ Kubernetes é›†ç¾¤ä¸­ï¼Œå¦‚æœä¸€ç»„ Podï¼ˆç§°ä¸º backendï¼‰ä¸ºå…¶å®ƒ Pod ï¼ˆç§°ä¸º frontendï¼‰æä¾›æœåŠ¡ï¼Œé‚£ä¹ˆ frontend Pod è¯¥å¦‚ä½•å‘ç°å’Œè¿æ¥å“ªäº› backend Pod å‘¢ï¼Ÿ\n",
                content: "Kubernetes Pod æ˜¯æœ‰ç”Ÿå‘½å‘¨æœŸçš„ï¼Œå®ƒä»¬å¯ä»¥è¢«åˆ›å»ºï¼Œä¹Ÿå¯ä»¥è¢«é”€æ¯ï¼Œç„¶è€Œä¸€æ—¦è¢«é”€æ¯ç”Ÿå‘½å°±æ°¸è¿œç»“æŸã€‚é€šè¿‡ ReplicationController èƒ½å¤ŸåŠ¨æ€åœ°åˆ›å»ºå’Œé”€æ¯ Podã€‚ æ¯ä¸ª Pod éƒ½ä¼šè·å–å®ƒè‡ªå·±çš„ IP åœ°å€ï¼Œå³ä½¿è¿™äº› IP åœ°å€ä¸æ€»æ˜¯ç¨³å®šå¯ä¾èµ–çš„ã€‚è¿™ä¼šå¯¼è‡´ä¸€ä¸ªé—®é¢˜ï¼šåœ¨ Kubernetes é›†ç¾¤ä¸­ï¼Œå¦‚æœä¸€ç»„ Podï¼ˆç§°ä¸º backendï¼‰ä¸ºå…¶å®ƒ Pod ï¼ˆç§°ä¸º frontendï¼‰æä¾›æœåŠ¡ï¼Œé‚£ä¹ˆ frontend Pod è¯¥å¦‚ä½•å‘ç°å’Œè¿æ¥å“ªäº› backend Pod å‘¢ï¼Ÿ\nå…³äº Service linkKubernetes Service å®šä¹‰äº†è¿™æ ·ä¸€ç§æŠ½è±¡ï¼šPod çš„é€»è¾‘åˆ†ç»„ï¼Œä¸€ç§å¯ä»¥è®¿é—®å®ƒä»¬çš„ç­–ç•¥ â€”â€” é€šå¸¸ç§°ä¸ºå¾®æœåŠ¡ã€‚è¿™ä¸€ç»„ Pod èƒ½å¤Ÿè¢« Service è®¿é—®åˆ°ï¼Œé€šå¸¸æ˜¯é€šè¿‡ Label Selectorï¼ˆæŸ¥çœ‹ä¸‹é¢äº†è§£ï¼Œä¸ºä»€ä¹ˆå¯èƒ½éœ€è¦æ²¡æœ‰ selector çš„ Serviceï¼‰å®ç°çš„ã€‚\nä¸¾ä¸ªä¾‹å­ï¼Œå‡è®¾æœ‰ä¸€ä¸ªç”¨äºå›¾ç‰‡å¤„ç†çš„è¿è¡Œäº†ä¸‰ä¸ªå‰¯æœ¬çš„ backendã€‚è¿™äº›å‰¯æœ¬æ˜¯å¯äº’æ¢çš„ â€”â€” frontend ä¸éœ€è¦å…³å¿ƒå®ƒä»¬è°ƒç”¨äº†å“ªä¸ª backend å‰¯æœ¬ã€‚ç„¶è€Œç»„æˆè¿™ä¸€ç»„ backend ç¨‹åºçš„ Pod å®é™…ä¸Šå¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–ï¼Œfrontend å®¢æˆ·ç«¯ä¸åº”è¯¥ä¹Ÿæ²¡å¿…è¦çŸ¥é“ï¼Œè€Œä¸”ä¹Ÿä¸éœ€è¦è·Ÿè¸ªè¿™ç»„ backend çš„çŠ¶æ€ã€‚Service å®šä¹‰çš„æŠ½è±¡èƒ½å¤Ÿè§£è€¦è¿™ç§å…³è”ã€‚\nå¯¹ Kubernetes é›†ç¾¤ä¸­çš„åº”ç”¨ï¼ŒKubernetes æä¾›äº†ç®€å•çš„ Endpoints APIï¼Œåªè¦ Service ä¸­çš„ä¸€ç»„ Pod å‘ç”Ÿå˜æ›´ï¼Œåº”ç”¨ç¨‹åºå°±ä¼šè¢«æ›´æ–°ã€‚å¯¹é Kubernetes é›†ç¾¤ä¸­çš„åº”ç”¨ï¼ŒKubernetes æä¾›äº†åŸºäº VIP çš„ç½‘æ¡¥çš„æ–¹å¼è®¿é—® Serviceï¼Œå†ç”± Service é‡å®šå‘åˆ° backend Podã€‚\nå®šä¹‰ Service linkä¸€ä¸ª Service åœ¨ Kubernetes ä¸­æ˜¯ä¸€ä¸ª REST å¯¹è±¡ï¼Œå’Œ Pod ç±»ä¼¼ã€‚ åƒæ‰€æœ‰çš„ REST å¯¹è±¡ä¸€æ ·ï¼Œ Service å®šä¹‰å¯ä»¥åŸºäº POST æ–¹å¼ï¼Œè¯·æ±‚ apiserver åˆ›å»ºæ–°çš„å®ä¾‹ã€‚\nä¾‹å¦‚ï¼Œå‡å®šæœ‰ä¸€ç»„ Podï¼Œå®ƒä»¬å¯¹å¤–æš´éœ²äº† 9376 ç«¯å£ï¼ŒåŒæ—¶è¿˜è¢«æ‰“ä¸Š \"app=MyApp\" æ ‡ç­¾ã€‚\nkind: Service apiVersion: v1 metadata: name: my-service spec: selector: app: MyApp ports: - protocol: TCP port: 80 targetPort: 9376 ä¸Šè¿°é…ç½®å°†åˆ›å»ºä¸€ä¸ªåç§°ä¸º â€œmy-serviceâ€ çš„ Service å¯¹è±¡ï¼Œå®ƒä¼šå°†è¯·æ±‚ä»£ç†åˆ° 9376 TCP ç«¯å£ï¼Œå…·æœ‰æ ‡ç­¾ \"app=MyApp\" çš„ Pod ä¸Šã€‚è¿™ä¸ª Service å°†è¢«æŒ‡æ´¾ä¸€ä¸ª IP åœ°å€ï¼ˆé€šå¸¸ç§°ä¸º â€œCluster IPâ€ï¼‰ï¼Œå®ƒä¼šè¢«æœåŠ¡çš„ä»£ç†ä½¿ç”¨ï¼ˆè§ä¸‹é¢ï¼‰ã€‚Service selectorçš„æ§åˆ¶å™¨å°†ä¼šæŒç»­æ‰«æç¬¦åˆæ¡ä»¶çš„Podï¼Œæ‰«æç»“æœä¼šæ›´æ–°åˆ°åç§°ä¸ºmy-serviceçš„Endpointså¯¹è±¡ä¸Šã€‚\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ Service èƒ½å¤Ÿå°†ä¸€ä¸ªæ¥æ”¶ç«¯å£æ˜ å°„åˆ°ä»»æ„çš„ targetPortã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒtargetPort å°†è¢«è®¾ç½®ä¸ºä¸ port å­—æ®µç›¸åŒçš„å€¼ã€‚targetPort å¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¼•ç”¨äº† backend Pod çš„ç«¯å£çš„åç§°ã€‚ä½†æ˜¯ï¼Œå®é™…æŒ‡æ´¾ç»™è¯¥ç«¯å£åç§°çš„ç«¯å£å·ï¼Œåœ¨æ¯ä¸ª backend Pod ä¸­å¯èƒ½å¹¶ä¸ç›¸åŒã€‚å¯¹äºéƒ¨ç½²å’Œè®¾è®¡ Service ï¼Œè¿™ç§æ–¹å¼ä¼šæä¾›æ›´å¤§çš„çµæ´»æ€§ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥åœ¨ backend è½¯ä»¶ä¸‹ä¸€ä¸ªç‰ˆæœ¬ä¸­ï¼Œä¿®æ”¹ Pod æš´éœ²çš„ç«¯å£ï¼Œå¹¶ä¸ä¼šä¸­æ–­å®¢æˆ·ç«¯çš„è°ƒç”¨ã€‚\nKubernetes Service æ”¯æŒ TCP å’Œ UDP åè®®ï¼Œé»˜è®¤ä¸º TCP åè®®ã€‚\næ²¡æœ‰ selector çš„ Service linkService æŠ½è±¡äº†è¯¥å¦‚ä½•è®¿é—® Kubernetes Podï¼Œä½†ä¹Ÿèƒ½å¤ŸæŠ½è±¡å…¶å®ƒç±»å‹çš„ backendï¼Œä¾‹å¦‚ï¼š\nå¸Œæœ›åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨å¤–éƒ¨çš„æ•°æ®åº“é›†ç¾¤ï¼Œä½†æµ‹è¯•ç¯å¢ƒä½¿ç”¨è‡ªå·±çš„æ•°æ®åº“ã€‚ å¸Œæœ›æœåŠ¡æŒ‡å‘å¦ä¸€ä¸ª Namespace ä¸­æˆ–å…¶å®ƒé›†ç¾¤ä¸­çš„æœåŠ¡ã€‚ æ­£åœ¨å°†å·¥ä½œè´Ÿè½½è½¬ç§»åˆ° Kubernetes é›†ç¾¤ï¼Œå’Œè¿è¡Œåœ¨ Kubernetes é›†ç¾¤ä¹‹å¤–çš„ backendã€‚ åœ¨ä»»ä½•è¿™äº›åœºæ™¯ä¸­ï¼Œéƒ½èƒ½å¤Ÿå®šä¹‰æ²¡æœ‰ selector çš„ Service ï¼š\nkind: Service apiVersion: v1 metadata: name: my-service spec: ports: - protocol: TCP port: 80 targetPort: 9376 ç”±äºè¿™ä¸ª Service æ²¡æœ‰ selectorï¼Œå°±ä¸ä¼šåˆ›å»ºç›¸å…³çš„ Endpoints å¯¹è±¡ã€‚å¯ä»¥æ‰‹åŠ¨å°† Service æ˜ å°„åˆ°æŒ‡å®šçš„ Endpointsï¼š\nkind: Endpoints apiVersion: v1 metadata: name: my-service subsets: - addresses: - ip: 1.2.3.4 ports: - port: 9376 æ³¨æ„ï¼šEndpoint IP åœ°å€ä¸èƒ½æ˜¯ loopbackï¼ˆ127.0.0.0/8ï¼‰ã€ link-localï¼ˆ169.254.0.0/16ï¼‰ã€æˆ–è€… link-local å¤šæ’­ï¼ˆ224.0.0.0/24ï¼‰ã€‚\nè®¿é—®æ²¡æœ‰ selector çš„ Serviceï¼Œä¸æœ‰ selector çš„ Service çš„åŸç†ç›¸åŒã€‚è¯·æ±‚å°†è¢«è·¯ç”±åˆ°ç”¨æˆ·å®šä¹‰çš„ Endpointï¼ˆè¯¥ç¤ºä¾‹ä¸­ä¸º 1.2.3.4:9376ï¼‰ã€‚\nExternalName Service æ˜¯ Service çš„ç‰¹ä¾‹ï¼Œå®ƒæ²¡æœ‰ selectorï¼Œä¹Ÿæ²¡æœ‰å®šä¹‰ä»»ä½•çš„ç«¯å£å’Œ Endpointã€‚ç›¸ååœ°ï¼Œå¯¹äºè¿è¡Œåœ¨é›†ç¾¤å¤–éƒ¨çš„æœåŠ¡ï¼Œå®ƒé€šè¿‡è¿”å›è¯¥å¤–éƒ¨æœåŠ¡çš„åˆ«åè¿™ç§æ–¹å¼æ¥æä¾›æœåŠ¡ã€‚\nkind: Service apiVersion: v1 metadata: name: my-service namespace: prod spec: type: ExternalName externalName: my.database.example.com å½“æŸ¥è¯¢ä¸»æœº my-service.prod.svc.CLUSTERæ—¶ï¼Œé›†ç¾¤çš„ DNS æœåŠ¡å°†è¿”å›ä¸€ä¸ªå€¼ä¸º my.database.example.com çš„ CNAME è®°å½•ã€‚è®¿é—®è¿™ä¸ªæœåŠ¡çš„å·¥ä½œæ–¹å¼ä¸å…¶å®ƒçš„ç›¸åŒï¼Œå”¯ä¸€ä¸åŒçš„æ˜¯é‡å®šå‘å‘ç”Ÿåœ¨ DNS å±‚ï¼Œè€Œä¸”ä¸ä¼šè¿›è¡Œä»£ç†æˆ–è½¬å‘ã€‚å¦‚æœåç»­å†³å®šè¦å°†æ•°æ®åº“è¿ç§»åˆ° Kubernetes é›†ç¾¤ä¸­ï¼Œå¯ä»¥å¯åŠ¨å¯¹åº”çš„ Podï¼Œå¢åŠ åˆé€‚çš„ Selector æˆ– Endpointï¼Œä¿®æ”¹ Service çš„ typeã€‚\nVIP å’Œ Service ä»£ç† linkåœ¨ Kubernetes é›†ç¾¤ä¸­ï¼Œæ¯ä¸ª Node è¿è¡Œä¸€ä¸ª kube-proxy è¿›ç¨‹ã€‚kube-proxy è´Ÿè´£ä¸º Service å®ç°äº†ä¸€ç§ VIPï¼ˆè™šæ‹Ÿ IPï¼‰çš„å½¢å¼ï¼Œè€Œä¸æ˜¯ ExternalName çš„å½¢å¼ã€‚\nåœ¨ Kubernetes v1.0 ç‰ˆæœ¬ï¼Œä»£ç†å®Œå…¨åœ¨ userspaceï¼ŒService æ˜¯ â€œ4å±‚â€ï¼ˆTCP/UDP over IPï¼‰æ¦‚å¿µã€‚\nåœ¨ Kubernetes v1.1 ç‰ˆæœ¬ï¼Œæ–°å¢äº† iptables ä»£ç†ï¼Œä½†å¹¶ä¸æ˜¯é»˜è®¤çš„è¿è¡Œæ¨¡å¼ã€‚æ–°å¢äº† Ingress APIï¼ˆbeta ç‰ˆï¼‰ï¼Œç”¨æ¥è¡¨ç¤º â€œ7å±‚â€ï¼ˆHTTPï¼‰æœåŠ¡ã€‚\nä» Kubernetes v1.2 èµ·ï¼Œé»˜è®¤å°±æ˜¯ iptables ä»£ç†ã€‚\nåœ¨ Kubernetes v1.8.0-beta.0 ä¸­ï¼Œæ·»åŠ äº†ipvsä»£ç†ã€‚\nuserspace ä»£ç†æ¨¡å¼ linkè¿™ç§æ¨¡å¼ï¼Œkube-proxy ä¼šç›‘è§† Kubernetes master å¯¹ Service å¯¹è±¡å’Œ Endpoints å¯¹è±¡çš„æ·»åŠ å’Œç§»é™¤ã€‚ å¯¹æ¯ä¸ª Serviceï¼Œå®ƒä¼šåœ¨æœ¬åœ° Node ä¸Šæ‰“å¼€ä¸€ä¸ªç«¯å£ï¼ˆéšæœºé€‰æ‹©ï¼‰ã€‚\nä»»ä½•è¿æ¥åˆ°â€œä»£ç†ç«¯å£â€çš„è¯·æ±‚ï¼Œéƒ½ä¼šè¢«ä»£ç†åˆ° Service çš„backend Pods ä¸­çš„æŸä¸ªä¸Šé¢ï¼ˆå¦‚ Endpoints æ‰€æŠ¥å‘Šçš„ä¸€æ ·ï¼‰ã€‚ ä½¿ç”¨å“ªä¸ª backend Podï¼Œæ˜¯åŸºäº Service çš„ SessionAffinity æ¥ç¡®å®šçš„ã€‚\næœ€åï¼Œå®ƒå®‰è£… iptables è§„åˆ™ï¼Œæ•è·åˆ°è¾¾è¯¥ Service çš„ clusterIPï¼ˆæ˜¯è™šæ‹Ÿ IPï¼‰å’Œ Port çš„è¯·æ±‚ï¼Œå¹¶é‡å®šå‘åˆ°ä»£ç†ç«¯å£ï¼Œä»£ç†ç«¯å£å†ä»£ç†è¯·æ±‚åˆ° backend Podã€‚\nç½‘ç»œè¿”å›çš„ç»“æœæ˜¯ï¼Œä»»ä½•åˆ°è¾¾ Service çš„ IP:Port çš„è¯·æ±‚ï¼Œéƒ½ä¼šè¢«ä»£ç†åˆ°ä¸€ä¸ªåˆé€‚çš„ backendï¼Œä¸éœ€è¦å®¢æˆ·ç«¯çŸ¥é“å…³äº Kubernetesã€Serviceã€æˆ– Pod çš„ä»»ä½•ä¿¡æ¯ã€‚\né»˜è®¤çš„ç­–ç•¥æ˜¯ï¼Œé€šè¿‡ round-robin ç®—æ³•æ¥é€‰æ‹© backend Podã€‚ å®ç°åŸºäºå®¢æˆ·ç«¯ IP çš„ä¼šè¯äº²å’Œæ€§ï¼Œå¯ä»¥é€šè¿‡è®¾ç½® service.spec.sessionAffinity çš„å€¼ä¸º \"ClientIP\" ï¼ˆé»˜è®¤å€¼ä¸º \"None\"ï¼‰ã€‚\nflowchart TD classDef client fill:#cff,stroke:#333; classDef control fill:#fcf,stroke:#333; classDef proxy fill:#9f9,stroke:#333; classDef backend fill:#f99,stroke:#333; subgraph Node Client[Client]:::client --\u003e ServiceIP[\"Service IP (IPTables)\"] ServiceIP --\u003e KubeProxy[kube-proxy]:::proxy end APIServer[APIServer]:::control --\u003e KubeProxy KubeProxy --\u003e Backend1[\"backend1(labels: app=myapp)\"]:::backend KubeProxy --\u003e Backend2[\"backend2(labels: app=myapp)\"]:::backend KubeProxy --\u003e Backend3[\"backend3(labels: app=myapp)\"]:::backend linkStyle 0,1 stroke:#09f,stroke-width:2px linkStyle 2 stroke:#f90,stroke-width:2px linkStyle 3,4,5 stroke:#f09,stroke-width:1.5px iptables ä»£ç†æ¨¡å¼ linkè¿™ç§æ¨¡å¼ï¼Œkube-proxy ä¼šç›‘è§† Kubernetes master å¯¹ Service å¯¹è±¡å’Œ Endpoints å¯¹è±¡çš„æ·»åŠ å’Œç§»é™¤ã€‚ å¯¹æ¯ä¸ª Serviceï¼Œå®ƒä¼šå®‰è£… iptables è§„åˆ™ï¼Œä»è€Œæ•è·åˆ°è¾¾è¯¥ Service çš„ clusterIPï¼ˆè™šæ‹Ÿ IPï¼‰å’Œç«¯å£çš„è¯·æ±‚ï¼Œè¿›è€Œå°†è¯·æ±‚é‡å®šå‘åˆ° Service çš„ä¸€ç»„ backend ä¸­çš„æŸä¸ªä¸Šé¢ã€‚å¯¹äºæ¯ä¸ª Endpoints å¯¹è±¡ï¼Œå®ƒä¹Ÿä¼šå®‰è£… iptables è§„åˆ™ï¼Œè¿™ä¸ªè§„åˆ™ä¼šé€‰æ‹©ä¸€ä¸ª backend Podã€‚\né»˜è®¤çš„ç­–ç•¥æ˜¯ï¼Œéšæœºé€‰æ‹©ä¸€ä¸ª backendã€‚å®ç°åŸºäºå®¢æˆ·ç«¯ IP çš„ä¼šè¯äº²å’Œæ€§ï¼Œå¯ä»¥å°† service.spec.sessionAffinity çš„å€¼è®¾ç½®ä¸º \"ClientIP\" ï¼ˆé»˜è®¤å€¼ä¸º \"None\"ï¼‰ã€‚\nå’Œ userspace ä»£ç†ç±»ä¼¼ï¼Œç½‘ç»œè¿”å›çš„ç»“æœæ˜¯ï¼Œä»»ä½•åˆ°è¾¾ Service çš„ IP:Port çš„è¯·æ±‚ï¼Œéƒ½ä¼šè¢«ä»£ç†åˆ°ä¸€ä¸ªåˆé€‚çš„ backendï¼Œä¸éœ€è¦å®¢æˆ·ç«¯çŸ¥é“å…³äº Kubernetesã€Serviceã€æˆ– Pod çš„ä»»ä½•ä¿¡æ¯ã€‚\nè¿™åº”è¯¥æ¯” userspace ä»£ç†æ›´å¿«ã€æ›´å¯é ã€‚ç„¶è€Œï¼Œä¸åƒ userspace ä»£ç†ï¼Œå¦‚æœåˆå§‹é€‰æ‹©çš„ Pod æ²¡æœ‰å“åº”ï¼Œiptables ä»£ç†ä¸èƒ½è‡ªåŠ¨åœ°é‡è¯•å¦ä¸€ä¸ª Podï¼Œæ‰€ä»¥å®ƒéœ€è¦ä¾èµ– readiness probesã€‚\nflowchart TD classDef client fill:#cff,stroke:#333; classDef control fill:#fcf,stroke:#333; classDef proxy fill:#9f9,stroke:#333; classDef backend fill:#f99,stroke:#333; subgraph Node Client[Client]:::client --\u003e ServiceIP[\"Service IP (IPTables)\"] KubeProxy[kube-proxy]:::proxy --\u003e ServiceIP end APIServer[APIServer]:::control --\u003e KubeProxy ServiceIP --\u003e Backend1[\"backend1(labels: app=myapp)\"]:::backend ServiceIP --\u003e Backend2[\"backend2(labels: app=myapp)\"]:::backend ServiceIP --\u003e Backend3[\"backend3(labels: app=myapp)\"]:::backend linkStyle 0,1 stroke:#09f,stroke-width:2px linkStyle 2 stroke:#f90,stroke-width:2px linkStyle 3,4,5 stroke:#f09,stroke-width:1.5px ipvs ä»£ç†æ¨¡å¼ linkè¿™ç§æ¨¡å¼ï¼Œkube-proxyä¼šç›‘è§†Kubernetes Serviceå¯¹è±¡å’ŒEndpointsï¼Œè°ƒç”¨netlinkæ¥å£ä»¥ç›¸åº”åœ°åˆ›å»ºipvsè§„åˆ™å¹¶å®šæœŸä¸Kubernetes Serviceå¯¹è±¡å’ŒEndpointså¯¹è±¡åŒæ­¥ipvsè§„åˆ™ï¼Œä»¥ç¡®ä¿ipvsçŠ¶æ€ä¸æœŸæœ›ä¸€è‡´ã€‚è®¿é—®æœåŠ¡æ—¶ï¼Œæµé‡å°†è¢«é‡å®šå‘åˆ°å…¶ä¸­ä¸€ä¸ªåç«¯Podã€‚\nä¸iptablesç±»ä¼¼ï¼ŒipvsåŸºäºnetfilter çš„ hook åŠŸèƒ½ï¼Œä½†ä½¿ç”¨å“ˆå¸Œè¡¨ä½œä¸ºåº•å±‚æ•°æ®ç»“æ„å¹¶åœ¨å†…æ ¸ç©ºé—´ä¸­å·¥ä½œã€‚è¿™æ„å‘³ç€ipvså¯ä»¥æ›´å¿«åœ°é‡å®šå‘æµé‡ï¼Œå¹¶ä¸”åœ¨åŒæ­¥ä»£ç†è§„åˆ™æ—¶å…·æœ‰æ›´å¥½çš„æ€§èƒ½ã€‚æ­¤å¤–ï¼Œipvsä¸ºè´Ÿè½½å‡è¡¡ç®—æ³•æä¾›äº†æ›´å¤šé€‰é¡¹ï¼Œä¾‹å¦‚ï¼š\nrrï¼šè½®è¯¢è°ƒåº¦ lcï¼šæœ€å°è¿æ¥æ•° dhï¼šç›®æ ‡å“ˆå¸Œ shï¼šæºå“ˆå¸Œ sedï¼šæœ€çŸ­æœŸæœ›å»¶è¿Ÿ nqï¼šÂ ä¸æ’é˜Ÿè°ƒåº¦ æ³¨æ„ï¼š ipvsæ¨¡å¼å‡å®šåœ¨è¿è¡Œkube-proxyä¹‹å‰åœ¨èŠ‚ç‚¹ä¸Šéƒ½å·²ç»å®‰è£…äº†IPVSå†…æ ¸æ¨¡å—ã€‚å½“kube-proxyä»¥ipvsä»£ç†æ¨¡å¼å¯åŠ¨æ—¶ï¼Œkube-proxyå°†éªŒè¯èŠ‚ç‚¹ä¸Šæ˜¯å¦å®‰è£…äº†IPVSæ¨¡å—ï¼Œå¦‚æœæœªå®‰è£…ï¼Œåˆ™kube-proxyå°†å›é€€åˆ°iptablesä»£ç†æ¨¡å¼ã€‚\nflowchart TD classDef client fill:#cff,stroke:#333; classDef control fill:#fcf,stroke:#333; classDef proxy fill:#9f9,stroke:#333; classDef backend fill:#f99,stroke:#333; subgraph Node Client[Client]:::client --\u003e ServiceIP[\"Service IP (IPTables)\"] KubeProxy[kube-proxy]:::proxy --\u003e ServiceIP end APIServer[APIServer]:::control --\u003e KubeProxy ServiceIP --\u003e Backend1[\"backend1(labels: app=myapp)\"]:::backend ServiceIP --\u003e Backend2[\"backend2(labels: app=myapp)\"]:::backend ServiceIP --\u003e Backend3[\"backend3(labels: app=myapp)\"]:::backend linkStyle 0,1 stroke:#09f,stroke-width:2px linkStyle 2 stroke:#f90,stroke-width:2px linkStyle 3,4,5 stroke:#f09,stroke-width:1.5px å¤šç«¯å£ Service linkå¾ˆå¤š Service éœ€è¦æš´éœ²å¤šä¸ªç«¯å£ã€‚å¯¹äºè¿™ç§æƒ…å†µï¼ŒKubernetes æ”¯æŒåœ¨ Service å¯¹è±¡ä¸­å®šä¹‰å¤šä¸ªç«¯å£ã€‚ å½“ä½¿ç”¨å¤šä¸ªç«¯å£æ—¶ï¼Œå¿…é¡»ç»™å‡ºæ‰€æœ‰çš„ç«¯å£çš„åç§°ï¼Œè¿™æ · Endpoint å°±ä¸ä¼šäº§ç”Ÿæ­§ä¹‰ï¼Œä¾‹å¦‚ï¼š\nkind: Service apiVersion: v1 metadata: name: my-service spec: selector: app: MyApp ports: - name: http protocol: TCP port: 80 targetPort: 9376 - name: https protocol: TCP port: 443 targetPort: 9377 é€‰æ‹©è‡ªå·±çš„ IP åœ°å€ linkåœ¨ Service åˆ›å»ºçš„è¯·æ±‚ä¸­ï¼Œå¯ä»¥é€šè¿‡è®¾ç½® spec.clusterIP å­—æ®µæ¥æŒ‡å®šè‡ªå·±çš„é›†ç¾¤ IP åœ°å€ã€‚ æ¯”å¦‚ï¼Œå¸Œæœ›æ›¿æ¢ä¸€ä¸ªå·²ç»å­˜åœ¨çš„ DNS æ¡ç›®ï¼Œæˆ–è€…é—ç•™ç³»ç»Ÿå·²ç»é…ç½®äº†ä¸€ä¸ªå›ºå®šçš„ IP ä¸”å¾ˆéš¾é‡æ–°é…ç½®ã€‚ ç”¨æˆ·é€‰æ‹©çš„ IP åœ°å€å¿…é¡»åˆæ³•ï¼Œå¹¶ä¸”è¿™ä¸ª IP åœ°å€åœ¨ service-cluster-ip-range CIDR èŒƒå›´å†…ï¼Œè¿™å¯¹ API Server æ¥è¯´æ˜¯é€šè¿‡ä¸€ä¸ªæ ‡è¯†æ¥æŒ‡å®šçš„ã€‚ å¦‚æœ IP åœ°å€ä¸åˆæ³•ï¼ŒAPI Server ä¼šè¿”å› HTTP çŠ¶æ€ç  422ï¼Œè¡¨ç¤ºå€¼ä¸åˆæ³•ã€‚\nä¸ºä½•ä¸ä½¿ç”¨ round-robin DNSï¼Ÿ linkä¸€ä¸ªä¸æ—¶å‡ºç°çš„é—®é¢˜æ˜¯ï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬éƒ½ä½¿ç”¨ VIP çš„æ–¹å¼ï¼Œè€Œä¸ä½¿ç”¨æ ‡å‡†çš„ round-robin DNSï¼Œæœ‰å¦‚ä¸‹å‡ ä¸ªåŸå› ï¼š\né•¿ä¹…ä»¥æ¥ï¼ŒDNS åº“éƒ½æ²¡èƒ½è®¤çœŸå¯¹å¾… DNS TTLã€ç¼“å­˜åŸŸåæŸ¥è¯¢ç»“æœ å¾ˆå¤šåº”ç”¨åªæŸ¥è¯¢ä¸€æ¬¡ DNS å¹¶ç¼“å­˜äº†ç»“æœ å°±ç®—åº”ç”¨å’Œåº“èƒ½å¤Ÿæ­£ç¡®æŸ¥è¯¢è§£æï¼Œæ¯ä¸ªå®¢æˆ·ç«¯åå¤é‡è§£æé€ æˆçš„è´Ÿè½½ä¹Ÿæ˜¯éå¸¸éš¾ä»¥ç®¡ç†çš„ æˆ‘ä»¬å°½åŠ›é˜»æ­¢ç”¨æˆ·åšé‚£äº›å¯¹ä»–ä»¬æ²¡æœ‰å¥½å¤„çš„äº‹æƒ…ï¼Œå¦‚æœå¾ˆå¤šäººéƒ½æ¥é—®è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šé€‰æ‹©å®ç°å®ƒã€‚\næœåŠ¡å‘ç° linkKubernetes æ”¯æŒ2ç§åŸºæœ¬çš„æœåŠ¡å‘ç°æ¨¡å¼ â€”â€” ç¯å¢ƒå˜é‡å’Œ DNSã€‚\nç¯å¢ƒå˜é‡ linkå½“ Pod è¿è¡Œåœ¨ Node ä¸Šï¼Œkubelet ä¼šä¸ºæ¯ä¸ªæ´»è·ƒçš„ Service æ·»åŠ ä¸€ç»„ç¯å¢ƒå˜é‡ã€‚å®ƒåŒæ—¶æ”¯æŒ Docker links å…¼å®¹ å˜é‡ï¼ˆæŸ¥çœ‹ makeLinkVariablesï¼‰ã€ç®€å•çš„ {SVCNAME}_SERVICE_HOST å’Œ {SVCNAME}_SERVICE_PORT å˜é‡ï¼Œè¿™é‡Œ Service çš„åç§°éœ€å¤§å†™ï¼Œæ¨ªçº¿è¢«è½¬æ¢æˆä¸‹åˆ’çº¿ã€‚\nä¸¾ä¸ªä¾‹å­ï¼Œä¸€ä¸ªåç§°ä¸º \"redis-master\" çš„ Service æš´éœ²äº† TCP ç«¯å£ 6379ï¼ŒåŒæ—¶ç»™å®ƒåˆ†é…äº† Cluster IP åœ°å€ 10.0.0.11ï¼Œè¿™ä¸ª Service ç”Ÿæˆäº†å¦‚ä¸‹ç¯å¢ƒå˜é‡ï¼š\nREDIS_MASTER_SERVICE_HOST=10.0.0.11 REDIS_MASTER_SERVICE_PORT=6379 REDIS_MASTER_PORT=tcp://10.0.0.11:6379 REDIS_MASTER_PORT_6379_TCP=tcp://10.0.0.11:6379 REDIS_MASTER_PORT_6379_TCP_PROTO=tcp REDIS_MASTER_PORT_6379_TCP_PORT=6379 REDIS_MASTER_PORT_6379_TCP_ADDR=10.0.0.11 è¿™æ„å‘³ç€éœ€è¦æœ‰é¡ºåºçš„è¦æ±‚ â€”â€” Pod æƒ³è¦è®¿é—®çš„ä»»ä½• Service å¿…é¡»åœ¨ Pod è‡ªå·±ä¹‹å‰è¢«åˆ›å»ºï¼Œå¦åˆ™è¿™äº›ç¯å¢ƒå˜é‡å°±ä¸ä¼šè¢«èµ‹å€¼ã€‚DNS å¹¶æ²¡æœ‰è¿™ä¸ªé™åˆ¶ã€‚\nDNS linkä¸€ä¸ªå¯é€‰ï¼ˆå°½ç®¡å¼ºçƒˆæ¨èï¼‰é›†ç¾¤æ’ä»¶ æ˜¯ DNS æœåŠ¡å™¨ã€‚\nDNS æœåŠ¡å™¨ç›‘è§†ç€åˆ›å»ºæ–° Service çš„ Kubernetes APIï¼Œä»è€Œä¸ºæ¯ä¸€ä¸ª Service åˆ›å»ºä¸€ç»„ DNS è®°å½•ã€‚å¦‚æœæ•´ä¸ªé›†ç¾¤çš„ DNS ä¸€ç›´è¢«å¯ç”¨ï¼Œé‚£ä¹ˆæ‰€æœ‰çš„ Pod åº”è¯¥èƒ½å¤Ÿè‡ªåŠ¨å¯¹ Service è¿›è¡Œåç§°è§£æã€‚\nä¾‹å¦‚ï¼Œæœ‰ä¸€ä¸ªåç§°ä¸º \"my-service\" çš„ Serviceï¼Œå®ƒåœ¨ Kubernetes é›†ç¾¤ä¸­åä¸º \"my-ns\" çš„ Namespace ä¸­ï¼Œä¸º \"my-service.my-ns\" åˆ›å»ºäº†ä¸€æ¡ DNS è®°å½•ã€‚\nåœ¨åç§°ä¸º \"my-ns\" çš„ Namespace ä¸­çš„ Pod åº”è¯¥èƒ½å¤Ÿç®€å•åœ°é€šè¿‡åç§°æŸ¥è¯¢æ‰¾åˆ° \"my-service\"ã€‚åœ¨å¦ä¸€ä¸ª Namespace ä¸­çš„ Pod å¿…é¡»é™å®šåç§°ä¸º \"my-service.my-ns\"ã€‚è¿™äº›åç§°æŸ¥è¯¢çš„ç»“æœæ˜¯ Cluster IPã€‚\nKubernetes ä¹Ÿæ”¯æŒå¯¹ç«¯å£åç§°çš„ DNS SRVï¼ˆServiceï¼‰è®°å½•ã€‚å¦‚æœåç§°ä¸º \"my-service.my-ns\" çš„ Service æœ‰ä¸€ä¸ªåä¸º \"http\" çš„ TCP ç«¯å£ï¼Œå¯ä»¥å¯¹ \"_http._tcp.my-service.my-ns\" æ‰§è¡Œ DNS SRV æŸ¥è¯¢ï¼Œå¾—åˆ° \"http\" çš„ç«¯å£å·ã€‚\nKubernetes DNS æœåŠ¡å™¨æ˜¯å”¯ä¸€çš„ä¸€ç§èƒ½å¤Ÿè®¿é—® ExternalName ç±»å‹çš„ Service çš„æ–¹å¼ã€‚\næ›´å¤šä¿¡æ¯å¯ä»¥æŸ¥çœ‹ DNS Pod å’Œ Serviceã€‚\nHeadless Service linkæœ‰æ—¶ä¸éœ€è¦æˆ–ä¸æƒ³è¦è´Ÿè½½å‡è¡¡ï¼Œä»¥åŠå•ç‹¬çš„ Service IPã€‚é‡åˆ°è¿™ç§æƒ…å†µï¼Œå¯ä»¥é€šè¿‡æŒ‡å®š Cluster IPï¼ˆspec.clusterIPï¼‰çš„å€¼ä¸º \"None\" æ¥åˆ›å»º Headless Serviceã€‚\nè¿™ä¸ªé€‰é¡¹å…è®¸å¼€å‘äººå‘˜è‡ªç”±å¯»æ‰¾ä»–ä»¬è‡ªå·±çš„æ–¹å¼ï¼Œä»è€Œé™ä½ä¸ Kubernetes ç³»ç»Ÿçš„è€¦åˆæ€§ã€‚åº”ç”¨ä»ç„¶å¯ä»¥ä½¿ç”¨ä¸€ç§è‡ªæ³¨å†Œçš„æ¨¡å¼å’Œé€‚é…å™¨ï¼Œå¯¹å…¶å®ƒéœ€è¦å‘ç°æœºåˆ¶çš„ç³»ç»Ÿèƒ½å¤Ÿå¾ˆå®¹æ˜“åœ°åŸºäºè¿™ä¸ª API æ¥æ„å»ºã€‚\nå¯¹è¿™ç±» Service å¹¶ä¸ä¼šåˆ†é… Cluster IPï¼Œkube-proxy ä¸ä¼šå¤„ç†å®ƒä»¬ï¼Œè€Œä¸”å¹³å°ä¹Ÿä¸ä¼šä¸ºå®ƒä»¬è¿›è¡Œè´Ÿè½½å‡è¡¡å’Œè·¯ç”±ã€‚DNS å¦‚ä½•å®ç°è‡ªåŠ¨é…ç½®ï¼Œä¾èµ–äº Service æ˜¯å¦å®šä¹‰äº† selectorã€‚\né…ç½® Selector linkå¯¹å®šä¹‰äº† selector çš„ Headless Serviceï¼ŒEndpoint æ§åˆ¶å™¨åœ¨ API ä¸­åˆ›å»ºäº† Endpoints è®°å½•ï¼Œå¹¶ä¸”ä¿®æ”¹ DNS é…ç½®è¿”å› A è®°å½•ï¼ˆåœ°å€ï¼‰ï¼Œé€šè¿‡è¿™ä¸ªåœ°å€ç›´æ¥åˆ°è¾¾ Service çš„åç«¯ Pod ä¸Šã€‚\nä¸é…ç½® Selector linkå¯¹æ²¡æœ‰å®šä¹‰ selector çš„ Headless Serviceï¼ŒEndpoint æ§åˆ¶å™¨ä¸ä¼šåˆ›å»º Endpoints è®°å½•ã€‚ç„¶è€Œ DNS ç³»ç»Ÿä¼šæŸ¥æ‰¾å’Œé…ç½®ï¼Œæ— è®ºæ˜¯ï¼š\nExternalName ç±»å‹ Service çš„ CNAME è®°å½• è®°å½•ï¼šä¸ Service å…±äº«ä¸€ä¸ªåç§°çš„ä»»ä½• Endpointsï¼Œä»¥åŠæ‰€æœ‰å…¶å®ƒç±»å‹ å‘å¸ƒæœåŠ¡ â€”â€” æœåŠ¡ç±»å‹ linkå¯¹ä¸€äº›åº”ç”¨ï¼ˆå¦‚ Frontendï¼‰çš„æŸäº›éƒ¨åˆ†ï¼Œå¯èƒ½å¸Œæœ›é€šè¿‡å¤–éƒ¨ï¼ˆKubernetes é›†ç¾¤å¤–éƒ¨ï¼‰IP åœ°å€æš´éœ² Serviceã€‚\nKubernetes ServiceTypes å…è®¸æŒ‡å®šä¸€ä¸ªéœ€è¦çš„ç±»å‹çš„ Serviceï¼Œé»˜è®¤æ˜¯ ClusterIP ç±»å‹ã€‚\nType çš„å–å€¼ä»¥åŠè¡Œä¸ºå¦‚ä¸‹ï¼š\nClusterIPï¼šé€šè¿‡é›†ç¾¤çš„å†…éƒ¨ IP æš´éœ²æœåŠ¡ï¼Œé€‰æ‹©è¯¥å€¼ï¼ŒæœåŠ¡åªèƒ½å¤Ÿåœ¨é›†ç¾¤å†…éƒ¨å¯ä»¥è®¿é—®ï¼Œè¿™ä¹Ÿæ˜¯é»˜è®¤çš„ ServiceTypeã€‚ NodePortï¼šé€šè¿‡æ¯ä¸ª Node ä¸Šçš„ IP å’Œé™æ€ç«¯å£ï¼ˆNodePortï¼‰æš´éœ²æœåŠ¡ã€‚NodePort æœåŠ¡ä¼šè·¯ç”±åˆ° ClusterIP æœåŠ¡ï¼Œè¿™ä¸ª ClusterIP æœåŠ¡ä¼šè‡ªåŠ¨åˆ›å»ºã€‚é€šè¿‡è¯·æ±‚ :ï¼Œå¯ä»¥ä»é›†ç¾¤çš„å¤–éƒ¨è®¿é—®ä¸€ä¸ª NodePort æœåŠ¡ã€‚ LoadBalancerï¼šä½¿ç”¨äº‘æä¾›å•†çš„è´Ÿè½½å‡è¡¡å™¨ï¼Œå¯ä»¥å‘å¤–éƒ¨æš´éœ²æœåŠ¡ã€‚å¤–éƒ¨çš„è´Ÿè½½å‡è¡¡å™¨å¯ä»¥è·¯ç”±åˆ° NodePort æœåŠ¡å’Œ ClusterIP æœåŠ¡ã€‚ ExternalNameï¼šé€šè¿‡è¿”å› CNAME å’Œå®ƒçš„å€¼ï¼Œå¯ä»¥å°†æœåŠ¡æ˜ å°„åˆ° externalName å­—æ®µçš„å†…å®¹ï¼ˆä¾‹å¦‚ï¼Œ foo.bar.example.comï¼‰ã€‚ æ²¡æœ‰ä»»ä½•ç±»å‹ä»£ç†è¢«åˆ›å»ºï¼Œè¿™åªæœ‰ Kubernetes 1.7 æˆ–æ›´é«˜ç‰ˆæœ¬çš„ kube-dns æ‰æ”¯æŒã€‚ NodePort ç±»å‹ linkå¦‚æœè®¾ç½® type çš„å€¼ä¸º \"NodePort\"ï¼ŒKubernetes master å°†ä»ç»™å®šçš„é…ç½®èŒƒå›´å†…ï¼ˆé»˜è®¤ï¼š30000-32767ï¼‰åˆ†é…ç«¯å£ï¼Œæ¯ä¸ª Node å°†ä»è¯¥ç«¯å£ï¼ˆæ¯ä¸ª Node ä¸Šçš„åŒä¸€ç«¯å£ï¼‰ä»£ç†åˆ° Serviceã€‚è¯¥ç«¯å£å°†é€šè¿‡ Service çš„ spec.ports[*].nodePort å­—æ®µè¢«æŒ‡å®šã€‚\nå¦‚æœéœ€è¦æŒ‡å®šçš„ç«¯å£å·ï¼Œå¯ä»¥é…ç½® nodePort çš„å€¼ï¼Œç³»ç»Ÿå°†åˆ†é…è¿™ä¸ªç«¯å£ï¼Œå¦åˆ™è°ƒç”¨ API å°†ä¼šå¤±è´¥ï¼ˆæ¯”å¦‚ï¼Œéœ€è¦å…³å¿ƒç«¯å£å†²çªçš„å¯èƒ½æ€§ï¼‰ã€‚\nè¿™å¯ä»¥è®©å¼€å‘äººå‘˜è‡ªç”±åœ°å®‰è£…ä»–ä»¬è‡ªå·±çš„è´Ÿè½½å‡è¡¡å™¨ï¼Œå¹¶é…ç½® Kubernetes ä¸èƒ½å®Œå…¨æ”¯æŒçš„ç¯å¢ƒå‚æ•°ï¼Œæˆ–è€…ç›´æ¥æš´éœ²ä¸€ä¸ªæˆ–å¤šä¸ª Node çš„ IP åœ°å€ã€‚\néœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒService å°†èƒ½å¤Ÿé€šè¿‡ :spec.ports[*].nodePort å’Œ spec.clusterIp:spec.ports[*].port è€Œå¯¹å¤–å¯è§ã€‚\nLoadBalancer ç±»å‹ linkä½¿ç”¨æ”¯æŒå¤–éƒ¨è´Ÿè½½å‡è¡¡å™¨çš„äº‘æä¾›å•†çš„æœåŠ¡ï¼Œè®¾ç½® type çš„å€¼ä¸º \"LoadBalancer\"ï¼Œå°†ä¸º Service æä¾›è´Ÿè½½å‡è¡¡å™¨ã€‚è´Ÿè½½å‡è¡¡å™¨æ˜¯å¼‚æ­¥åˆ›å»ºçš„ï¼Œå…³äºè¢«æä¾›çš„è´Ÿè½½å‡è¡¡å™¨çš„ä¿¡æ¯å°†ä¼šé€šè¿‡ Service çš„ status.loadBalancer å­—æ®µè¢«å‘å¸ƒå‡ºå»ã€‚\nkind: Service apiVersion: v1 metadata: name: my-service spec: selector: app: MyApp ports: - protocol: TCP port: 80 targetPort: 9376 nodePort: 30061 clusterIP: 10.0.171.239 loadBalancerIP: 78.11.24.19 type: LoadBalancer status: loadBalancer: ingress: - ip: 146.148.47.155 æ¥è‡ªå¤–éƒ¨è´Ÿè½½å‡è¡¡å™¨çš„æµé‡å°†ç›´æ¥æ‰“åˆ° backend Pod ä¸Šï¼Œä¸è¿‡å®é™…å®ƒä»¬æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œè¿™è¦ä¾èµ–äºäº‘æä¾›å•†ã€‚åœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œå°†æ ¹æ®ç”¨æˆ·è®¾ç½®çš„ loadBalancerIP æ¥åˆ›å»ºè´Ÿè½½å‡è¡¡å™¨ã€‚\næŸäº›äº‘æä¾›å•†å…è®¸è®¾ç½® loadBalancerIPã€‚å¦‚æœæ²¡æœ‰è®¾ç½® loadBalancerIPï¼Œå°†ä¼šç»™è´Ÿè½½å‡è¡¡å™¨æŒ‡æ´¾ä¸€ä¸ªä¸´æ—¶ IPã€‚\nå¦‚æœè®¾ç½®äº† loadBalancerIPï¼Œä½†äº‘æä¾›å•†å¹¶ä¸æ”¯æŒè¿™ç§ç‰¹æ€§ï¼Œé‚£ä¹ˆè®¾ç½®çš„ loadBalancerIP å€¼å°†ä¼šè¢«å¿½ç•¥æ‰ã€‚\nExternalName linkExternalName ç±»å‹çš„æœåŠ¡å°†æœåŠ¡æ˜ å°„åˆ°ä¸€ä¸ª DNS åç§°ï¼Œè€Œä¸æ˜¯å…¸å‹çš„é€‰æ‹©å™¨ï¼Œå¦‚ my-service æˆ– cassandraã€‚ä½¿ç”¨ spec.externalName å‚æ•°æŒ‡å®šè¿™äº›æœåŠ¡ã€‚\nä¾‹å¦‚ï¼Œè¿™ä¸ªæœåŠ¡å®šä¹‰å°† prod å‘½åç©ºé—´ä¸­çš„ my-service æ˜ å°„åˆ° my.database.example.comã€‚\napiVersion: v1 kind: Service metadata: name: my-service namespace: prod spec: type: ExternalName externalName: my.database.example.com æ³¨æ„ï¼šExternalName æ¥å— IPv4 åœ°å€å­—ç¬¦ä¸²ï¼Œä½†å®ƒæ˜¯ç”±æ•°å­—ç»„æˆçš„ DNS åç§°ï¼Œè€Œä¸æ˜¯ IP åœ°å€ã€‚ç±»ä¼¼äº IPv4 åœ°å€çš„ ExternalNames ä¸èƒ½è¢« CoreDNS æˆ– ingress-nginx è§£æï¼Œå› ä¸º ExternalName çš„ç›®çš„æ˜¯æŒ‡å®šä¸€ä¸ªè§„èŒƒçš„ DNS åç§°ã€‚è¦ç¡¬ç¼–ç ä¸€ä¸ª IP åœ°å€ï¼Œè¯·è€ƒè™‘ä½¿ç”¨ Headless Serviceã€‚\nè­¦å‘Š\nå¯¹äºä¸€äº›å¸¸è§çš„åè®®ï¼ŒåŒ…æ‹¬ HTTP å’Œ HTTPSï¼Œä½ ä½¿ç”¨ ExternalName å¯èƒ½ä¼šæœ‰é—®é¢˜ã€‚å¦‚æœä½¿ç”¨ ExternalNameï¼Œé‚£ä¹ˆä½ é›†ç¾¤å†…çš„å®¢æˆ·ç«¯ä½¿ç”¨çš„ä¸»æœºåä¸ ExternalName å¼•ç”¨çš„åç§°ä¸åŒã€‚\nå¯¹äºä½¿ç”¨ä¸»æœºåçš„åè®®ï¼Œè¿™ç§å·®å¼‚å¯èƒ½å¯¼è‡´é”™è¯¯æˆ–æ„å¤–çš„å“åº”ã€‚HTTPè¯·æ±‚å°†æœ‰ä¸€ä¸ªæºæœåŠ¡å™¨ä¸æ‰¿è®¤çš„ Host: headerï¼ŒTLS æœåŠ¡å™¨å°†ä¸èƒ½æä¾›ä¸å®¢æˆ·ç«¯è¿æ¥çš„ä¸»æœºåç›¸åŒ¹é…çš„è¯ä¹¦ã€‚\nå¤–éƒ¨ IP linkå¦‚æœå¤–éƒ¨çš„ IP è·¯ç”±åˆ°é›†ç¾¤ä¸­ä¸€ä¸ªæˆ–å¤šä¸ª Node ä¸Šï¼ŒKubernetes Service ä¼šè¢«æš´éœ²ç»™è¿™äº› externalIPsã€‚é€šè¿‡å¤–éƒ¨ IPï¼ˆä½œä¸ºç›®çš„ IP åœ°å€ï¼‰è¿›å…¥åˆ°é›†ç¾¤ï¼Œæ‰“åˆ° Service çš„ç«¯å£ä¸Šçš„æµé‡ï¼Œå°†ä¼šè¢«è·¯ç”±åˆ° Service çš„ Endpoint ä¸Šã€‚externalIPs ä¸ä¼šè¢« Kubernetes ç®¡ç†ï¼Œå®ƒå±äºé›†ç¾¤ç®¡ç†å‘˜çš„èŒè´£èŒƒç•´ã€‚\næ ¹æ® Service çš„è§„å®šï¼ŒexternalIPs å¯ä»¥åŒä»»æ„çš„ ServiceType æ¥ä¸€èµ·æŒ‡å®šã€‚åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œmy-service å¯ä»¥åœ¨ 80.11.12.10:80ï¼ˆå¤–éƒ¨ IP:ç«¯å£ï¼‰ä¸Šè¢«å®¢æˆ·ç«¯è®¿é—®ã€‚\nkind: Service apiVersion: v1 metadata: name: my-service spec: selector: app: MyApp ports: - name: http protocol: TCP port: 80 targetPort: 9376 externalIPs: - 80.11.12.10 ä¸è¶³ä¹‹å¤„ linkä¸º VIP ä½¿ç”¨ userspace ä»£ç†ï¼Œå°†åªé€‚åˆå°å‹åˆ°ä¸­å‹è§„æ¨¡çš„é›†ç¾¤ï¼Œä¸èƒ½å¤Ÿæ‰©å±•åˆ°ä¸Šåƒ Service çš„å¤§å‹é›†ç¾¤ã€‚æŸ¥çœ‹ æœ€åˆè®¾è®¡æ–¹æ¡ˆ è·å–æ›´å¤šç»†èŠ‚ã€‚\nä½¿ç”¨ userspace ä»£ç†ï¼Œéšè—äº†è®¿é—® Service çš„æ•°æ®åŒ…çš„æº IP åœ°å€ã€‚è¿™ä½¿å¾—ä¸€äº›ç±»å‹çš„é˜²ç«å¢™æ— æ³•èµ·ä½œç”¨ã€‚iptables ä»£ç†ä¸ä¼šéšè— Kubernetes é›†ç¾¤å†…éƒ¨çš„ IP åœ°å€ï¼Œä½†å´è¦æ±‚å®¢æˆ·ç«¯è¯·æ±‚å¿…é¡»é€šè¿‡ä¸€ä¸ªè´Ÿè½½å‡è¡¡å™¨æˆ– Node ç«¯å£ã€‚\nType å­—æ®µæ”¯æŒåµŒå¥—åŠŸèƒ½ â€”â€” æ¯ä¸€å±‚éœ€è¦æ·»åŠ åˆ°ä¸Šä¸€å±‚é‡Œé¢ã€‚ä¸ä¼šä¸¥æ ¼è¦æ±‚æ‰€æœ‰äº‘æä¾›å•†ï¼ˆä¾‹å¦‚ï¼ŒGCE å°±æ²¡å¿…è¦ä¸ºäº†ä½¿ä¸€ä¸ª LoadBalancer èƒ½å·¥ä½œè€Œåˆ†é…ä¸€ä¸ª NodePortï¼Œä½†æ˜¯ AWS éœ€è¦ ï¼‰ï¼Œä½†å½“å‰ API æ˜¯å¼ºåˆ¶è¦æ±‚çš„ã€‚\næœªæ¥å·¥ä½œ linkæœªæ¥æˆ‘ä»¬èƒ½é¢„è§åˆ°ï¼Œä»£ç†ç­–ç•¥å¯èƒ½ä¼šå˜å¾—æ¯”ç®€å•çš„ round-robin å‡è¡¡ç­–ç•¥æœ‰æ›´å¤šç»†å¾®çš„å·®åˆ«ï¼Œæ¯”å¦‚ master é€‰ä¸¾æˆ–åˆ†ç‰‡ã€‚æˆ‘ä»¬ä¹Ÿèƒ½æƒ³åˆ°ï¼ŒæŸäº› Service å°†å…·æœ‰ â€œçœŸæ­£â€ çš„è´Ÿè½½å‡è¡¡å™¨ï¼Œè¿™ç§æƒ…å†µä¸‹ VIP å°†ç®€åŒ–æ•°æ®åŒ…çš„ä¼ è¾“ã€‚\nåœ¨æœªæ¥çš„ç‰ˆæœ¬ä¸­ï¼ŒKubernetes æ‰“ç®—æ”¹è¿›å¯¹ L7ï¼ˆHTTPï¼‰Service çš„æ”¯æŒã€‚ä¸º Service å®ç°æ›´åŠ çµæ´»çš„è¯·æ±‚è¿›å…¥æ¨¡å¼ï¼Œè¿™äº› Service åŒ…å«å½“å‰ ClusterIPã€NodePort å’Œ LoadBalancer æ¨¡å¼ç­‰ã€‚\nå…³äºè™šæ‹Ÿ IP çš„ç»†èŠ‚ linkå¯¹å¾ˆå¤šæƒ³ä½¿ç”¨ Service çš„äººæ¥è¯´ï¼Œå‰é¢çš„ä¿¡æ¯åº”è¯¥è¶³å¤Ÿäº†ã€‚ç„¶è€Œï¼Œæœ‰å¾ˆå¤šå†…éƒ¨åŸç†æ€§çš„å†…å®¹ï¼Œè¿˜æ˜¯å€¼å»ç†è§£çš„ã€‚\né¿å…å†²çª linkKubernetes æœ€ä¸»è¦çš„å“²å­¦ä¹‹ä¸€ï¼Œæ˜¯ç”¨æˆ·ä¸åº”è¯¥æš´éœ²é‚£äº›èƒ½å¤Ÿå¯¼è‡´ä»–ä»¬æ“ä½œå¤±è´¥ã€ä½†åˆä¸æ˜¯ä»–ä»¬çš„è¿‡é”™çš„åœºæ™¯ã€‚è¿™ç§åœºæ™¯ä¸‹ï¼Œè®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ç½‘ç»œç«¯å£ â€”â€” ç”¨æˆ·ä¸åº”è¯¥å¿…é¡»é€‰æ‹©ä¸€ä¸ªç«¯å£å·ï¼Œè€Œä¸”è¯¥ç«¯å£è¿˜æœ‰å¯èƒ½ä¸å…¶ä»–ç”¨æˆ·çš„å†²çªã€‚è¿™å°±æ˜¯è¯´ï¼Œåœ¨å½¼æ­¤éš”ç¦»çŠ¶æ€ä¸‹ä»ç„¶ä¼šå‡ºç°å¤±è´¥ã€‚\nä¸ºäº†ä½¿ç”¨æˆ·èƒ½å¤Ÿä¸ºä»–ä»¬çš„ Service é€‰æ‹©ä¸€ä¸ªç«¯å£å·ï¼Œæˆ‘ä»¬å¿…é¡»ç¡®ä¿ä¸èƒ½æœ‰2ä¸ª Service å‘ç”Ÿå†²çªã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸ºæ¯ä¸ª Service åˆ†é…å®ƒä»¬è‡ªå·±çš„ IP åœ°å€æ¥å®ç°ã€‚\nä¸ºäº†ä¿è¯æ¯ä¸ª Service è¢«åˆ†é…åˆ°ä¸€ä¸ªå”¯ä¸€çš„ IPï¼Œéœ€è¦ä¸€ä¸ªå†…éƒ¨çš„åˆ†é…å™¨èƒ½å¤ŸåŸå­åœ°æ›´æ–° etcd ä¸­çš„ä¸€ä¸ªå…¨å±€åˆ†é…æ˜ å°„è¡¨ï¼Œè¿™ä¸ªæ›´æ–°æ“ä½œè¦å…ˆäºåˆ›å»ºæ¯ä¸€ä¸ª Serviceã€‚\nä¸ºäº†ä½¿ Service èƒ½å¤Ÿè·å–åˆ° IPï¼Œè¿™ä¸ªæ˜ å°„è¡¨å¯¹è±¡å¿…é¡»åœ¨æ³¨å†Œä¸­å¿ƒå­˜åœ¨ï¼Œå¦åˆ™åˆ›å»º Service å°†ä¼šå¤±è´¥ï¼ŒæŒ‡ç¤ºä¸€ä¸ª IP ä¸èƒ½è¢«åˆ†é…ã€‚ ä¸€ä¸ªåå° Controller çš„èŒè´£æ˜¯åˆ›å»ºæ˜ å°„è¡¨ï¼ˆä» Kubernetes çš„æ—§ç‰ˆæœ¬è¿ç§»è¿‡æ¥ï¼Œæ—§ç‰ˆæœ¬ä¸­æ˜¯é€šè¿‡åœ¨å†…å­˜ä¸­åŠ é”çš„æ–¹å¼å®ç°ï¼‰ï¼Œå¹¶æ£€æŸ¥ç”±äºç®¡ç†å‘˜å¹²é¢„å’Œæ¸…é™¤ä»»æ„ IP é€ æˆçš„ä¸åˆç†åˆ†é…ï¼Œè¿™äº› IP è¢«åˆ†é…äº†ä½†å½“å‰æ²¡æœ‰ Service ä½¿ç”¨å®ƒä»¬ã€‚\nIP å’Œ VIP linkä¸åƒ Pod çš„ IP åœ°å€ï¼Œå®ƒå®é™…è·¯ç”±åˆ°ä¸€ä¸ªå›ºå®šçš„ç›®çš„åœ°ï¼ŒService çš„ IP å®é™…ä¸Šä¸èƒ½é€šè¿‡å•ä¸ªä¸»æœºæ¥è¿›è¡Œåº”ç­”ã€‚ç›¸åï¼Œæˆ‘ä»¬ä½¿ç”¨ iptablesï¼ˆLinux ä¸­çš„æ•°æ®åŒ…å¤„ç†é€»è¾‘ï¼‰æ¥å®šä¹‰ä¸€ä¸ªè™šæ‹ŸIPåœ°å€ï¼ˆVIPï¼‰ï¼Œå®ƒå¯ä»¥æ ¹æ®éœ€è¦é€æ˜åœ°è¿›è¡Œé‡å®šå‘ã€‚å½“å®¢æˆ·ç«¯è¿æ¥åˆ° VIP æ—¶ï¼Œå®ƒä»¬çš„æµé‡ä¼šè‡ªåŠ¨åœ°ä¼ è¾“åˆ°ä¸€ä¸ªåˆé€‚çš„ Endpointã€‚ç¯å¢ƒå˜é‡å’Œ DNSï¼Œå®é™…ä¸Šä¼šæ ¹æ® Service çš„ VIP å’Œç«¯å£æ¥è¿›è¡Œå¡«å……ã€‚\nUserspace linkä½œä¸ºä¸€ä¸ªä¾‹å­ï¼Œè€ƒè™‘å‰é¢æåˆ°çš„å›¾ç‰‡å¤„ç†åº”ç”¨ç¨‹åºã€‚\nå½“åˆ›å»º backend Service æ—¶ï¼ŒKubernetes master ä¼šç»™å®ƒæŒ‡æ´¾ä¸€ä¸ªè™šæ‹Ÿ IP åœ°å€ï¼Œæ¯”å¦‚ 10.0.0.1ã€‚å‡è®¾ Service çš„ç«¯å£æ˜¯ 1234ï¼Œè¯¥ Service ä¼šè¢«é›†ç¾¤ä¸­æ‰€æœ‰çš„ kube-proxy å®ä¾‹è§‚å¯Ÿåˆ°ã€‚å½“ä»£ç†çœ‹åˆ°ä¸€ä¸ªæ–°çš„ Serviceï¼Œ å®ƒä¼šæ‰“å¼€ä¸€ä¸ªæ–°çš„ç«¯å£ï¼Œå»ºç«‹ä¸€ä¸ªä»è¯¥ VIP é‡å®šå‘åˆ°æ–°ç«¯å£çš„ iptablesï¼Œå¹¶å¼€å§‹æ¥æ”¶è¯·æ±‚è¿æ¥ã€‚\nå½“ä¸€ä¸ªå®¢æˆ·ç«¯è¿æ¥åˆ°ä¸€ä¸ª VIPï¼Œiptables è§„åˆ™å¼€å§‹èµ·ä½œç”¨ï¼Œå®ƒä¼šé‡å®šå‘è¯¥æ•°æ®åŒ…åˆ° Serviceä»£ç† çš„ç«¯å£ã€‚Serviceä»£ç† é€‰æ‹©ä¸€ä¸ª backendï¼Œå¹¶å°†å®¢æˆ·ç«¯çš„æµé‡ä»£ç†åˆ° backend ä¸Šã€‚\nè¿™æ„å‘³ç€ Service çš„æ‰€æœ‰è€…èƒ½å¤Ÿé€‰æ‹©ä»»ä½•ä»–ä»¬æƒ³ä½¿ç”¨çš„ç«¯å£ï¼Œè€Œä¸å­˜åœ¨å†²çªçš„é£é™©ã€‚å®¢æˆ·ç«¯å¯ä»¥ç®€å•åœ°è¿æ¥åˆ°ä¸€ä¸ª IP å’Œç«¯å£ï¼Œè€Œä¸éœ€è¦çŸ¥é“å®é™…è®¿é—®äº†å“ªäº› Podã€‚\nIptables linkå†æ¬¡è€ƒè™‘å‰é¢æåˆ°çš„å›¾ç‰‡å¤„ç†åº”ç”¨ç¨‹åºã€‚\nå½“åˆ›å»º backend Service æ—¶ï¼ŒKubernetes master ä¼šç»™å®ƒæŒ‡æ´¾ä¸€ä¸ªè™šæ‹Ÿ IP åœ°å€ï¼Œæ¯”å¦‚ 10.0.0.1ã€‚å‡è®¾ Service çš„ç«¯å£æ˜¯ 1234ï¼Œè¯¥ Service ä¼šè¢«é›†ç¾¤ä¸­æ‰€æœ‰çš„ kube-proxy å®ä¾‹è§‚å¯Ÿåˆ°ã€‚å½“ä»£ç†çœ‹åˆ°ä¸€ä¸ªæ–°çš„ Serviceï¼Œ å®ƒä¼šå®‰è£…ä¸€ç³»åˆ—çš„ iptables è§„åˆ™ï¼Œä» VIP é‡å®šå‘åˆ° per-Service è§„åˆ™ã€‚è¯¥ per-Service è§„åˆ™è¿æ¥åˆ° per-Endpoint è§„åˆ™ï¼Œè¯¥ per-Endpoint è§„åˆ™ä¼šé‡å®šå‘ï¼ˆç›®æ ‡ NATï¼‰åˆ° backendã€‚\nå½“ä¸€ä¸ªå®¢æˆ·ç«¯è¿æ¥åˆ°ä¸€ä¸ª VIPï¼Œiptables è§„åˆ™å¼€å§‹èµ·ä½œç”¨ã€‚ä¸€ä¸ª backend ä¼šè¢«é€‰æ‹©ï¼ˆæˆ–è€…æ ¹æ®ä¼šè¯äº²å’Œæ€§ï¼Œæˆ–è€…éšæœºï¼‰ï¼Œæ•°æ®åŒ…è¢«é‡å®šå‘åˆ°è¿™ä¸ª backendã€‚\nä¸åƒ userspace ä»£ç†ï¼Œæ•°æ®åŒ…ä»æ¥ä¸æ‹·è´åˆ°ç”¨æˆ·ç©ºé—´ï¼Œkube-proxy ä¸æ˜¯å¿…é¡»ä¸ºè¯¥ VIP å·¥ä½œè€Œè¿è¡Œï¼Œå¹¶ä¸”å®¢æˆ·ç«¯ IP æ˜¯ä¸å¯æ›´æ”¹çš„ã€‚ å½“æµé‡æ‰“åˆ° Node çš„ç«¯å£ä¸Šï¼Œæˆ–é€šè¿‡è´Ÿè½½å‡è¡¡å™¨ï¼Œä¼šæ‰§è¡Œç›¸åŒçš„åŸºæœ¬æµç¨‹ï¼Œä½†æ˜¯åœ¨é‚£äº›æ¡ˆä¾‹ä¸­å®¢æˆ·ç«¯ IP æ˜¯å¯ä»¥æ›´æ”¹çš„ã€‚\nAPI å¯¹è±¡ linkåœ¨ Kubernetes REST API ä¸­ï¼ŒService æ˜¯ top-level èµ„æºã€‚\næ›´å¤šä¿¡æ¯ link ä½¿ç”¨ Service è¿æ¥ Frontend åˆ° Backend - kubernetes.io "
            }
        );
    index.add(
            {
                id:  3 ,
                href: "\/docs\/information\/software\/cloud\/auth\/serviceaccount\/",
                title: "ServiceAccount",
                description: "ServiceAccount ä¸º Pod ä¸­çš„è¿›ç¨‹æä¾›èº«ä»½ä¿¡æ¯ã€‚\næ³¨æ„ï¼šæœ¬æ–‡æ˜¯å…³äº Service Account çš„ç”¨æˆ·æŒ‡å—ï¼Œç®¡ç†æŒ‡å—å¦è§ Service Account çš„é›†ç¾¤ç®¡ç†æŒ‡å— ã€‚\næœ¬æ–‡æ¡£æè¿°çš„å…³äº Service Account çš„è¡Œä¸ºåªæœ‰å½“æ‚¨æŒ‰ç…§ Kubernetes é¡¹ç›®å»ºè®®çš„æ–¹å¼æ­å»ºèµ·é›†ç¾¤çš„æƒ…å†µä¸‹æ‰æœ‰æ•ˆã€‚æ‚¨çš„é›†ç¾¤ç®¡ç†å‘˜å¯èƒ½åœ¨æ‚¨çš„é›†ç¾¤ä¸­æœ‰è‡ªå®šä¹‰é…ç½®ï¼Œè¿™ç§æƒ…å†µä¸‹è¯¥æ–‡æ¡£å¯èƒ½å¹¶ä¸é€‚ç”¨ã€‚\nå½“æ‚¨ï¼ˆçœŸäººç”¨æˆ·ï¼‰è®¿é—®é›†ç¾¤ï¼ˆä¾‹å¦‚ä½¿ç”¨kubectlå‘½ä»¤ï¼‰æ—¶ï¼Œapiserver ä¼šå°†æ‚¨è®¤è¯ä¸ºä¸€ä¸ªç‰¹å®šçš„ User Accountï¼ˆç›®å‰é€šå¸¸æ˜¯adminï¼Œé™¤éæ‚¨çš„ç³»ç»Ÿç®¡ç†å‘˜è‡ªå®šä¹‰äº†é›†ç¾¤é…ç½®ï¼‰ã€‚Pod å®¹å™¨ä¸­çš„è¿›ç¨‹ä¹Ÿå¯ä»¥ä¸ apiserver è”ç³»ã€‚ å½“å®ƒä»¬åœ¨è”ç³» apiserver çš„æ—¶å€™ï¼Œå®ƒä»¬ä¼šè¢«è®¤è¯ä¸ºä¸€ä¸ªç‰¹å®šçš„ Service Accountï¼ˆä¾‹å¦‚defaultï¼‰ã€‚\nä½¿ç”¨é»˜è®¤çš„ Service Account è®¿é—® API server linkå½“æ‚¨åˆ›å»º pod çš„æ—¶å€™ï¼Œå¦‚æœæ‚¨æ²¡æœ‰æŒ‡å®šä¸€ä¸ª service accountï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å¾—åœ¨ä¸è¯¥pod ç›¸åŒçš„ namespace ä¸‹ä¸ºå…¶æŒ‡æ´¾ä¸€ä¸ªdefault service accountã€‚å¦‚æœæ‚¨è·å–åˆšåˆ›å»ºçš„ pod çš„åŸå§‹ json æˆ– yaml ä¿¡æ¯ï¼ˆä¾‹å¦‚ä½¿ç”¨kubectl get pods/podename -o yamlå‘½ä»¤ï¼‰ï¼Œæ‚¨å°†çœ‹åˆ°spec.serviceAccountNameå­—æ®µå·²ç»è¢«è®¾ç½®ä¸º defaultã€‚\næ‚¨å¯ä»¥åœ¨ pod ä¸­ä½¿ç”¨è‡ªåŠ¨æŒ‚è½½çš„ service account å‡­è¯æ¥è®¿é—® APIï¼Œå¦‚ Accessing the Cluster ä¸­æ‰€æè¿°ã€‚\n",
                content: "ServiceAccount ä¸º Pod ä¸­çš„è¿›ç¨‹æä¾›èº«ä»½ä¿¡æ¯ã€‚\næ³¨æ„ï¼šæœ¬æ–‡æ˜¯å…³äº Service Account çš„ç”¨æˆ·æŒ‡å—ï¼Œç®¡ç†æŒ‡å—å¦è§ Service Account çš„é›†ç¾¤ç®¡ç†æŒ‡å— ã€‚\næœ¬æ–‡æ¡£æè¿°çš„å…³äº Service Account çš„è¡Œä¸ºåªæœ‰å½“æ‚¨æŒ‰ç…§ Kubernetes é¡¹ç›®å»ºè®®çš„æ–¹å¼æ­å»ºèµ·é›†ç¾¤çš„æƒ…å†µä¸‹æ‰æœ‰æ•ˆã€‚æ‚¨çš„é›†ç¾¤ç®¡ç†å‘˜å¯èƒ½åœ¨æ‚¨çš„é›†ç¾¤ä¸­æœ‰è‡ªå®šä¹‰é…ç½®ï¼Œè¿™ç§æƒ…å†µä¸‹è¯¥æ–‡æ¡£å¯èƒ½å¹¶ä¸é€‚ç”¨ã€‚\nå½“æ‚¨ï¼ˆçœŸäººç”¨æˆ·ï¼‰è®¿é—®é›†ç¾¤ï¼ˆä¾‹å¦‚ä½¿ç”¨kubectlå‘½ä»¤ï¼‰æ—¶ï¼Œapiserver ä¼šå°†æ‚¨è®¤è¯ä¸ºä¸€ä¸ªç‰¹å®šçš„ User Accountï¼ˆç›®å‰é€šå¸¸æ˜¯adminï¼Œé™¤éæ‚¨çš„ç³»ç»Ÿç®¡ç†å‘˜è‡ªå®šä¹‰äº†é›†ç¾¤é…ç½®ï¼‰ã€‚Pod å®¹å™¨ä¸­çš„è¿›ç¨‹ä¹Ÿå¯ä»¥ä¸ apiserver è”ç³»ã€‚ å½“å®ƒä»¬åœ¨è”ç³» apiserver çš„æ—¶å€™ï¼Œå®ƒä»¬ä¼šè¢«è®¤è¯ä¸ºä¸€ä¸ªç‰¹å®šçš„ Service Accountï¼ˆä¾‹å¦‚defaultï¼‰ã€‚\nä½¿ç”¨é»˜è®¤çš„ Service Account è®¿é—® API server linkå½“æ‚¨åˆ›å»º pod çš„æ—¶å€™ï¼Œå¦‚æœæ‚¨æ²¡æœ‰æŒ‡å®šä¸€ä¸ª service accountï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å¾—åœ¨ä¸è¯¥pod ç›¸åŒçš„ namespace ä¸‹ä¸ºå…¶æŒ‡æ´¾ä¸€ä¸ªdefault service accountã€‚å¦‚æœæ‚¨è·å–åˆšåˆ›å»ºçš„ pod çš„åŸå§‹ json æˆ– yaml ä¿¡æ¯ï¼ˆä¾‹å¦‚ä½¿ç”¨kubectl get pods/podename -o yamlå‘½ä»¤ï¼‰ï¼Œæ‚¨å°†çœ‹åˆ°spec.serviceAccountNameå­—æ®µå·²ç»è¢«è®¾ç½®ä¸º defaultã€‚\næ‚¨å¯ä»¥åœ¨ pod ä¸­ä½¿ç”¨è‡ªåŠ¨æŒ‚è½½çš„ service account å‡­è¯æ¥è®¿é—® APIï¼Œå¦‚ Accessing the Cluster ä¸­æ‰€æè¿°ã€‚\nService account æ˜¯å¦èƒ½å¤Ÿå–å¾—è®¿é—® API çš„è®¸å¯å–å†³äºæ‚¨ä½¿ç”¨çš„ æˆæƒæ’ä»¶å’Œç­–ç•¥ã€‚\nåœ¨ 1.6 ä»¥ä¸Šç‰ˆæœ¬ä¸­ï¼Œæ‚¨å¯ä»¥é€‰æ‹©å–æ¶ˆä¸º service account è‡ªåŠ¨æŒ‚è½½ API å‡­è¯ï¼Œåªéœ€åœ¨ service account ä¸­è®¾ç½® automountServiceAccountToken: falseï¼š\napiVersion: v1 kind: ServiceAccount metadata: name: build-robot automountServiceAccountToken: false ... åœ¨ 1.6 ä»¥ä¸Šç‰ˆæœ¬ä¸­ï¼Œæ‚¨ä¹Ÿå¯ä»¥é€‰æ‹©åªå–æ¶ˆå•ä¸ª pod çš„ API å‡­è¯è‡ªåŠ¨æŒ‚è½½ï¼š\napiVersion: v1 kind: Pod metadata: name: my-pod spec: serviceAccountName: build-robot automountServiceAccountToken: false ... å¦‚æœåœ¨ pod å’Œ service account ä¸­åŒæ—¶è®¾ç½®äº† automountServiceAccountToken , pod è®¾ç½®ä¸­çš„ä¼˜å…ˆçº§æ›´é«˜ã€‚\nä½¿ç”¨å¤šä¸ªService Account linkæ¯ä¸ª namespace ä¸­éƒ½æœ‰ä¸€ä¸ªé»˜è®¤çš„å«åš default çš„ service account èµ„æºã€‚\næ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åˆ—å‡º namespace ä¸‹çš„æ‰€æœ‰ serviceAccount èµ„æºã€‚\n$ kubectl get serviceAccounts NAME SECRETS AGE default 1 1d æ‚¨å¯ä»¥åƒè¿™æ ·åˆ›å»ºä¸€ä¸ª ServiceAccount å¯¹è±¡ï¼š\n$ cat \u003e /tmp/serviceaccount.yaml \u003c"
            }
        );
    index.add(
            {
                id:  4 ,
                href: "\/docs\/information\/software\/cloud\/",
                title: "äº‘åŸç”Ÿ",
                description: "",
                content: ""
            }
        );
    index.add(
            {
                id:  5 ,
                href: "\/docs\/develop\/ask\/",
                title: "å¦‚ä½•æé—®ï¼šæé—®çš„æ™ºæ…§",
                description: "ä¸€ã€æé—®çš„æœ¬è´¨ä¸å“²å­¦æ„ä¹‰ link1. æé—®æ˜¯äººç±»è®¤çŸ¥çš„åŸºçŸ³ link è®¤çŸ¥é©å‘½çš„æ ¸å¿ƒï¼šè‹æ ¼æ‹‰åº•é€šè¿‡â€œäº§å©†æœ¯â€æé—®æ³•ï¼Œå¼•å¯¼å¯¹è¯è€…è‡ªæˆ‘åæ€ï¼Œæ­ç¤ºäº†æé—®ä½œä¸ºçŸ¥è¯†ç”Ÿäº§çš„æ ¸å¿ƒåŠ¨åŠ›ã€‚çˆ±å› æ–¯å¦æ›´ç›´è¨€ï¼šâ€œæé—®çš„èƒ½åŠ›æ¯”å›ç­”æ›´é‡è¦â€ã€‚ ç§‘å­¦è¿›æ­¥çš„å¼•æ“ï¼šä¼½åˆ©ç•¥è´¨ç–‘äºšé‡Œå£«å¤šå¾·çš„â€œå¼ºå¼±å†³å®šå­å¥³æ€§åˆ«â€ç†è®ºï¼Œé€šè¿‡å®è¯æé—®æ¨åŠ¨ç§‘å­¦é©å‘½ã€‚äºšé‡Œå£«å¤šå¾·äº¦æŒ‡å‡ºâ€œæé—®æ˜¯è¿›æ­¥çš„æºæ³‰â€ã€‚ 2. æé—®çš„å“²å­¦åˆ†ç±» link ä¼˜è´¨æé—®çš„å››ä¸ªç»´åº¦ï¼ˆç²Ÿæ´¥æ­ä¸€éƒç†è®ºï¼‰ï¼š è½»æ¾æé—®ï¼šå»ºç«‹ä¿¡ä»»ï¼ˆå¦‚â€œæœ€è¿‘å·¥ä½œé¡ºåˆ©å—ï¼Ÿâ€ï¼‰ã€‚ åŠ£è´¨æé—®ï¼šå¼•å‘é˜²å¾¡ï¼ˆå¦‚â€œä½ ä¸ºä»€ä¹ˆæ€»çŠ¯é”™ï¼Ÿâ€ï¼‰ã€‚ æ²‰é‡æé—®ï¼šè§¦åŠæ·±å±‚éœ€æ±‚ï¼ˆå¦‚â€œåå¹´åä½ å¸Œæœ›æˆä¸ºä»€ä¹ˆæ ·çš„äººï¼Ÿâ€ï¼‰ã€‚ ä¼˜è´¨æé—®ï¼šæ¿€å‘è¡ŒåŠ¨ä¸å‘ç°ï¼ˆå¦‚â€œå¦‚æœé‡æ–°å¼€å§‹ï¼Œä½ ä¼šé‡‡å–å“ªäº›ä¸åŒç­–ç•¥ï¼Ÿâ€ï¼‰ã€‚ äºŒã€é«˜æ•ˆæé—®çš„æ ¸å¿ƒæ–¹æ³•è®º link1. æé—®å‰çš„å‡†å¤‡ï¼šæ˜ç¡®ç›®æ ‡ä¸è¾¹ç•Œ link ç›®æ ‡å¯¼å‘ï¼šæ˜ç¡®æé—®æ„å›¾ï¼ˆè·å–ä¿¡æ¯/è§£å†³é—®é¢˜/å¯å‘æ€è€ƒï¼‰ï¼Œä¾‹å¦‚èŒåœºä¸­é¿å…æ³›æ³›è€Œé—®â€œå¦‚ä½•æé«˜ç§¯ææ€§â€ï¼Œè½¬è€Œèšç„¦â€œå¦‚ä½•åœ¨é¡¹ç›®å‹åŠ›ä¸‹ä¿æŒå›¢é˜ŸåŠ¨åŠ›â€ã€‚ è®¾å®šè¾¹ç•Œï¼šé™å®šé—®é¢˜èŒƒå›´ã€‚å¯¹æ¯”ä¸¤ç§æé—®ï¼š ä½æ•ˆï¼šâ€œå¦‚ä½•å†™å‡ºå¥½æ–‡ç« ï¼Ÿâ€ é«˜æ•ˆï¼šâ€œå¦‚ä½•åœ¨3å¤©å†…å®Œæˆä¸€ç¯‡é’ˆå¯¹Zä¸–ä»£ç”¨æˆ·çš„çˆ†æ¬¾çŸ­è§†é¢‘è„šæœ¬ï¼Ÿâ€ 2. æé—®çš„æ¶æ„è®¾è®¡ link å¼€æ”¾å¼ vs å°é—­å¼ï¼š å°é—­å¼ï¼ˆâ€œä½ æ˜¯å¦åŒæ„ï¼Ÿâ€ï¼‰é€‚åˆå¿«é€Ÿå†³ç­–ï¼Œä½†é™åˆ¶æ€è€ƒï¼› å¼€æ”¾å¼ï¼ˆâ€œä½ è®¤ä¸ºè¿™ä¸ªæ–¹æ¡ˆçš„æ½œåœ¨é£é™©æ˜¯ä»€ä¹ˆï¼Ÿâ€ï¼‰æ¿€å‘æ·±åº¦è®¨è®ºã€‚ ç»“æ„åŒ–æé—®æ³•ï¼ˆé€‚ç”¨äºå¤æ‚é—®é¢˜ï¼‰ï¼š èƒŒæ™¯å±‚ï¼ˆâ€œå½“å‰ç”¨æˆ·ç•™å­˜ç‡æ˜¯å¤šå°‘ï¼Ÿâ€ï¼‰ï¼› å†²çªå±‚ï¼ˆâ€œå“ªäº›å› ç´ å¯¼è‡´ç•™å­˜ç‡ä¸‹é™ï¼Ÿâ€ï¼‰ï¼› è§£å†³å±‚ï¼ˆâ€œå“ªäº›ç­–ç•¥å¯èƒ½æå‡30%ç•™å­˜ç‡ï¼Ÿâ€ï¼‰ã€‚ 3. æé—®çš„è¯­è¨€è‰ºæœ¯ link é¿å…ä¸»è§‚åè§ï¼šç”¨â€œèƒ½å¦è§£é‡Šè¿™ä¸ªæ•°æ®çš„å˜åŒ–è¶‹åŠ¿ï¼Ÿâ€æ›¿ä»£â€œä½ çš„æ•°æ®æ˜¯ä¸æ˜¯æœ‰è¯¯ï¼Ÿâ€ã€‚ ç§¯æå€¾å¬ä¸è¿½é—®ï¼šé€šè¿‡â€œèƒ½å¦ä¸¾ä¾‹è¯´æ˜ï¼Ÿâ€æˆ–â€œæ‚¨æåˆ°çš„â€˜ç”¨æˆ·ä½“éªŒâ€™å…·ä½“æŒ‡å“ªäº›æ–¹é¢ï¼Ÿâ€æ·±åŒ–å¯¹è¯ã€‚ ä¸‰ã€åœºæ™¯åŒ–æé—®ç­–ç•¥ link1. æ•™è‚²åœºæ™¯ï¼šä»è¢«åŠ¨å¸æ”¶åˆ°ä¸»åŠ¨æ¢ç©¶ link å­¦ç”Ÿæé—®æŠ€å·§ï¼š\né”™é¢˜å¤ç›˜ä¸‰æ­¥éª¤ï¼ˆç½‘é¡µ6æ¡ˆä¾‹ï¼‰ï¼š æ˜ç¡®å¡ç‚¹ï¼ˆâ€œè¿™é“é¢˜çš„è§£é¢˜æ€è·¯ä¸­ï¼Œå“ªä¸€æ­¥æˆ‘ä¸ç†è§£ï¼Ÿâ€ï¼‰ï¼› åˆ†äº«å°è¯•ï¼ˆâ€œæˆ‘è¯•è¿‡ä»£å…¥å…¬å¼Aï¼Œä½†ç»“æœä¸ç¬¦â€ï¼‰ï¼› å¯»æ±‚åé¦ˆï¼ˆâ€œæ‚¨å»ºè®®æˆ‘è°ƒæ•´è®¡ç®—é¡ºåºè¿˜æ˜¯æ£€æŸ¥å‰ææ¡ä»¶ï¼Ÿâ€ï¼‰ã€‚ çŸ¥è¯†ç»“æ„å›¾æ³•ï¼šå°†é”™é¢˜è½¬åŒ–ä¸ºé€»è¾‘å›¾è°±ï¼Œé€šè¿‡æé—®æ¢³ç†å› æœå…³ç³»ã€‚ æ•™å¸ˆæé—®è®¾è®¡ï¼š\næ‰¹åˆ¤æ€§æ€ç»´æ¿€å‘ï¼šå¦‚ã€Šæ¨ä¿®ä¹‹æ­»ã€‹æ•™å­¦ä¸­è¿½é—®â€œæ›¹æ“æ€æ¨ä¿®æ—¶ä¸ºä½•æ— äººæ±‚æƒ…ï¼Ÿâ€ï¼› åˆ†å±‚æé—®æ³•ï¼šä»è®°å¿†æ€§æé—®ï¼ˆâ€œæ–‡ç« ä¸»æ—¨ï¼Ÿâ€ï¼‰åˆ°åˆ›é€ æ€§æé—®ï¼ˆâ€œå¦‚æœä½ æ˜¯ä½œè€…ï¼Œä¼šå¦‚ä½•æ”¹å†™ç»“å±€ï¼Ÿâ€ï¼‰ã€‚ 2. èŒåœºåœºæ™¯ï¼šä»ä¿¡æ¯è·å–åˆ°å½±å“åŠ›æ„å»º link å‘ä¸Šç®¡ç†æé—®æœ¯ï¼š\nç›®çš„å‰ç½®æ³•ï¼šå°†â€œé¢†å¯¼æ˜å¤©æœ‰ç©ºå—ï¼Ÿâ€æ”¹ä¸ºâ€œå…³äºXé¡¹ç›®çš„èµ„æºåè°ƒæ–¹æ¡ˆï¼Œæ‚¨è®¤ä¸ºå“ªäº›éƒ¨åˆ†éœ€è¦ä¼˜å…ˆè®¨è®ºï¼Ÿæ˜å¤©ä¸‹åˆ2ç‚¹å¯å¦é¢„ç•™20åˆ†é’Ÿï¼Ÿâ€ã€‚ å‡è®¾æ€§æé—®ï¼šâ€œå¦‚æœé¢„ç®—å¢åŠ 20%ï¼Œæ‚¨è®¤ä¸ºæˆ‘ä»¬åº”è¯¥ä¼˜å…ˆæŠ•å…¥äº§å“ç ”å‘è¿˜æ˜¯å¸‚åœºæ‰©å¼ ï¼Ÿâ€ã€‚ å›¢é˜Ÿåä½œæé—®æ¡†æ¶ï¼š\nSCQAæ¨¡å‹ï¼ˆæƒ…å¢ƒ-å†²çª-é—®é¢˜-ç­”æ¡ˆï¼‰ï¼š æƒ…å¢ƒï¼ˆSï¼‰ï¼šâ€œå½“å‰ç”¨æˆ·æŠ•è¯‰ç‡ä¸Šå‡è‡³5%â€ï¼› å†²çªï¼ˆCï¼‰ï¼šâ€œä½†å®¢æœå“åº”æ—¶é—´å·²ç¼©çŸ­30%â€ï¼› é—®é¢˜ï¼ˆQï¼‰ï¼šâ€œå“ªäº›æœªè¢«å‘ç°çš„ç¯èŠ‚å¯¼è‡´çŸ›ç›¾ï¼Ÿâ€ï¼› ç­”æ¡ˆï¼ˆAï¼‰ï¼šâ€œå»ºè®®é‡æ–°æ¢³ç†ç”¨æˆ·æ—…ç¨‹å›¾ï¼Œå®šä½æ–­ç‚¹â€ã€‚ 3. ç§‘ç ”ä¸åˆ›æ–°ï¼šä»è§£æ„åˆ°é‡æ„ link é¢ è¦†æ€§æé—®æ³•ï¼š ç¬¬ä¸€æ€§åŸç†æé—®ï¼šç‰¹æ–¯æ‹‰é€šè¿‡â€œç”µæ± çš„ç‰©ç†æˆæœ¬ä¸‹é™æ˜¯å¤šå°‘ï¼Ÿâ€é‡æ„ç”µåŠ¨æ±½è½¦å®šä»·æ¨¡å‹ã€‚ è·¨å­¦ç§‘å«æ¥ï¼šâ€œåŒºå—é“¾æŠ€æœ¯å¦‚ä½•è§£å†³åŒ»ç–—æ•°æ®å­¤å²›é—®é¢˜ï¼Ÿâ€ã€‚ å››ã€æé—®çš„ä¼¦ç†ä¸æ–‡åŒ–ç»´åº¦ link1. å°Šé‡ä¸è¢«å°Šé‡ï¼šæé—®ä¸­çš„æƒåŠ›å¹³è¡¡ link æ–‡åŒ–æ•æ„Ÿæ€§ï¼šåœ¨æƒå¨æ–‡åŒ–ä¸­é‡‡ç”¨â€œå»ºè®®å¼æé—®â€ï¼ˆâ€œæ˜¯å¦å¯ä»¥è€ƒè™‘â€¦â€¦â€ï¼‰è€Œéç›´æ¥è´¨ç–‘ã€‚ å…±æƒ…å¼æé—®ï¼šå¿ƒç†å’¨è¯¢ä¸­çš„â€œä½ è§‰å¾—è¿™ç§æƒ…ç»ªèƒŒåå¯èƒ½æœ‰ä»€ä¹ˆéœ€æ±‚ï¼Ÿâ€ã€‚ 2. æé—®çš„é™·é˜±ä¸è§„é¿ link åŠ£è´¨æé—®çš„ç‰¹å¾ï¼š æ¨¡ç³Šæ€§ï¼ˆâ€œå¦‚ä½•æˆåŠŸï¼Ÿâ€ï¼‰ï¼› è¯±å¯¼æ€§ï¼ˆâ€œä½ ä¸è®¤ä¸ºè¿™ä¸ªæ–¹æ¡ˆå¾ˆå·®å—ï¼Ÿâ€ï¼‰ï¼› æ”»å‡»æ€§ï¼ˆâ€œä½ è¿è¿™éƒ½ä¸æ‡‚ï¼Ÿâ€ï¼‰ã€‚ äº”ã€æ¡ˆä¾‹æ·±åº¦è§£æ linkæ¡ˆä¾‹1ï¼šä¼½åˆ©ç•¥çš„â€œ5ä¸ªå¥³å„¿ä¹‹é—®â€ link èƒŒæ™¯ï¼šæ¯”ç½—æ•™æˆå®£ç§°â€œçˆ¶äº²å¼ºå¼±å†³å®šå­å¥³æ€§åˆ«â€ï¼Œä¼½åˆ©ç•¥åé©³ï¼šâ€œé‚»å±…å¼ºå£®å´ç”Ÿ5å¥³ï¼Œä½•è§£ï¼Ÿâ€ã€‚ æ™ºæ…§è§£æï¼š ä»¥å…·ä½“æ¡ˆä¾‹æŒ‘æˆ˜æŠ½è±¡ç†è®ºï¼› ç”¨äº‹å®åé©³æƒå¨ï¼ŒåšæŒâ€œç§‘å­¦å¿…é¡»ç¬¦åˆç°å®â€ï¼› å±•ç°â€œè´¨ç–‘-éªŒè¯-é‡æ„â€çš„ç§‘å­¦æé—®èŒƒå¼ã€‚ æ¡ˆä¾‹2ï¼šçŸ¥è¯†ç»“æ„å›¾æ³•æå‡å­¦ä¹ æ•ˆç‡ link å®è·µæ•ˆæœï¼šå­¦ç”Ÿå°éƒ‘é€šè¿‡æç‚¼é”™é¢˜å…³é”®ç‚¹ï¼ˆå¦‚æ•°å­¦é¢˜çš„â€œå·²çŸ¥æ¡ä»¶-é—®é¢˜é“¾â€ï¼‰ï¼Œ2ä¸ªæœˆå†…ä»ç­çº§ä¸­æ¸¸è·ƒå±…å‰ä¸‰ã€‚ æ–¹æ³•è®ºå»¶ä¼¸ï¼š â€œæ˜¯ä½•-ä¸ºä½•-å¦‚ä½•â€ä¸‰é—®æ³•ï¼ˆè¯­æ–‡é˜…è¯»åˆ†æï¼‰ï¼› â€œè¾“å…¥-åŠ å·¥-è¾“å‡ºâ€æé—®å¾ªç¯ï¼ˆç½‘é¡µ6çš„â€œæ•™ç»™åˆ«äººâ€è®°å¿†æ³•ï¼‰ã€‚ å…­ã€æé—®èƒ½åŠ›çš„ç»ˆèº«è®­ç»ƒ link1. æ—¥å¸¸è®­ç»ƒå·¥å…· link æé—®æ—¥è®°ï¼šæ¯æ—¥è®°å½•3ä¸ªä¼˜è´¨é—®é¢˜å¹¶è¯„ä¼°æ•ˆæœï¼› è‹æ ¼æ‹‰åº•å¼è‡ªé—®ï¼šå¯¹ä»»ä½•ç»“è®ºè¿½é—®â€œä¸ºä»€ä¹ˆæˆç«‹ï¼Ÿâ€â€œåä¾‹æ˜¯å¦å­˜åœ¨ï¼Ÿâ€ã€‚ 2. è¿›é˜¶ä¿®ç‚¼æ–¹å‘ link å…ƒé—®é¢˜æ„è¯†ï¼šåœ¨æé—®ä¸­åæ€â€œå½“å‰é—®é¢˜æ˜¯å¦è§¦åŠæœ¬è´¨ï¼Ÿâ€ï¼› ç³»ç»Ÿæ€ç»´æé—®ï¼šé€šè¿‡â€œè¦ç´ -è¿æ¥-åŠŸèƒ½â€ä¸‰å±‚æ¬¡åˆ†æå¤æ‚ç³»ç»Ÿã€‚ ç»“è¯­ï¼šæé—®ä¸ä»…æ˜¯è·å–ç­”æ¡ˆçš„å·¥å…·ï¼Œæ›´æ˜¯é‡å¡‘è®¤çŸ¥ã€æ¨åŠ¨å˜é©çš„æ æ†ã€‚ä»ä¼½åˆ©ç•¥çš„é¢ è¦†æ€§è´¨ç–‘åˆ°ç°ä»£èŒåœºçš„é«˜æ•ˆæ²Ÿé€šï¼Œæé—®çš„æ™ºæ…§è´¯ç©¿äººç±»æ–‡æ˜çš„æ¯ä¸€æ¬¡è·ƒè¿ã€‚å”¯æœ‰ä¿æŒâ€œç«¥çœŸå¼è¿½é—®â€ï¼ˆèƒ¡é€‚â€œé—®é¢˜ä¸¹â€ï¼‰ï¼Œæ–¹èƒ½åœ¨ä¸ç¡®å®šçš„æ—¶ä»£é”šå®šæ€æƒ³çš„èˆªå‘ã€‚\n",
                content: "ä¸€ã€æé—®çš„æœ¬è´¨ä¸å“²å­¦æ„ä¹‰ link1. æé—®æ˜¯äººç±»è®¤çŸ¥çš„åŸºçŸ³ link è®¤çŸ¥é©å‘½çš„æ ¸å¿ƒï¼šè‹æ ¼æ‹‰åº•é€šè¿‡â€œäº§å©†æœ¯â€æé—®æ³•ï¼Œå¼•å¯¼å¯¹è¯è€…è‡ªæˆ‘åæ€ï¼Œæ­ç¤ºäº†æé—®ä½œä¸ºçŸ¥è¯†ç”Ÿäº§çš„æ ¸å¿ƒåŠ¨åŠ›ã€‚çˆ±å› æ–¯å¦æ›´ç›´è¨€ï¼šâ€œæé—®çš„èƒ½åŠ›æ¯”å›ç­”æ›´é‡è¦â€ã€‚ ç§‘å­¦è¿›æ­¥çš„å¼•æ“ï¼šä¼½åˆ©ç•¥è´¨ç–‘äºšé‡Œå£«å¤šå¾·çš„â€œå¼ºå¼±å†³å®šå­å¥³æ€§åˆ«â€ç†è®ºï¼Œé€šè¿‡å®è¯æé—®æ¨åŠ¨ç§‘å­¦é©å‘½ã€‚äºšé‡Œå£«å¤šå¾·äº¦æŒ‡å‡ºâ€œæé—®æ˜¯è¿›æ­¥çš„æºæ³‰â€ã€‚ 2. æé—®çš„å“²å­¦åˆ†ç±» link ä¼˜è´¨æé—®çš„å››ä¸ªç»´åº¦ï¼ˆç²Ÿæ´¥æ­ä¸€éƒç†è®ºï¼‰ï¼š è½»æ¾æé—®ï¼šå»ºç«‹ä¿¡ä»»ï¼ˆå¦‚â€œæœ€è¿‘å·¥ä½œé¡ºåˆ©å—ï¼Ÿâ€ï¼‰ã€‚ åŠ£è´¨æé—®ï¼šå¼•å‘é˜²å¾¡ï¼ˆå¦‚â€œä½ ä¸ºä»€ä¹ˆæ€»çŠ¯é”™ï¼Ÿâ€ï¼‰ã€‚ æ²‰é‡æé—®ï¼šè§¦åŠæ·±å±‚éœ€æ±‚ï¼ˆå¦‚â€œåå¹´åä½ å¸Œæœ›æˆä¸ºä»€ä¹ˆæ ·çš„äººï¼Ÿâ€ï¼‰ã€‚ ä¼˜è´¨æé—®ï¼šæ¿€å‘è¡ŒåŠ¨ä¸å‘ç°ï¼ˆå¦‚â€œå¦‚æœé‡æ–°å¼€å§‹ï¼Œä½ ä¼šé‡‡å–å“ªäº›ä¸åŒç­–ç•¥ï¼Ÿâ€ï¼‰ã€‚ äºŒã€é«˜æ•ˆæé—®çš„æ ¸å¿ƒæ–¹æ³•è®º link1. æé—®å‰çš„å‡†å¤‡ï¼šæ˜ç¡®ç›®æ ‡ä¸è¾¹ç•Œ link ç›®æ ‡å¯¼å‘ï¼šæ˜ç¡®æé—®æ„å›¾ï¼ˆè·å–ä¿¡æ¯/è§£å†³é—®é¢˜/å¯å‘æ€è€ƒï¼‰ï¼Œä¾‹å¦‚èŒåœºä¸­é¿å…æ³›æ³›è€Œé—®â€œå¦‚ä½•æé«˜ç§¯ææ€§â€ï¼Œè½¬è€Œèšç„¦â€œå¦‚ä½•åœ¨é¡¹ç›®å‹åŠ›ä¸‹ä¿æŒå›¢é˜ŸåŠ¨åŠ›â€ã€‚ è®¾å®šè¾¹ç•Œï¼šé™å®šé—®é¢˜èŒƒå›´ã€‚å¯¹æ¯”ä¸¤ç§æé—®ï¼š ä½æ•ˆï¼šâ€œå¦‚ä½•å†™å‡ºå¥½æ–‡ç« ï¼Ÿâ€ é«˜æ•ˆï¼šâ€œå¦‚ä½•åœ¨3å¤©å†…å®Œæˆä¸€ç¯‡é’ˆå¯¹Zä¸–ä»£ç”¨æˆ·çš„çˆ†æ¬¾çŸ­è§†é¢‘è„šæœ¬ï¼Ÿâ€ 2. æé—®çš„æ¶æ„è®¾è®¡ link å¼€æ”¾å¼ vs å°é—­å¼ï¼š å°é—­å¼ï¼ˆâ€œä½ æ˜¯å¦åŒæ„ï¼Ÿâ€ï¼‰é€‚åˆå¿«é€Ÿå†³ç­–ï¼Œä½†é™åˆ¶æ€è€ƒï¼› å¼€æ”¾å¼ï¼ˆâ€œä½ è®¤ä¸ºè¿™ä¸ªæ–¹æ¡ˆçš„æ½œåœ¨é£é™©æ˜¯ä»€ä¹ˆï¼Ÿâ€ï¼‰æ¿€å‘æ·±åº¦è®¨è®ºã€‚ ç»“æ„åŒ–æé—®æ³•ï¼ˆé€‚ç”¨äºå¤æ‚é—®é¢˜ï¼‰ï¼š èƒŒæ™¯å±‚ï¼ˆâ€œå½“å‰ç”¨æˆ·ç•™å­˜ç‡æ˜¯å¤šå°‘ï¼Ÿâ€ï¼‰ï¼› å†²çªå±‚ï¼ˆâ€œå“ªäº›å› ç´ å¯¼è‡´ç•™å­˜ç‡ä¸‹é™ï¼Ÿâ€ï¼‰ï¼› è§£å†³å±‚ï¼ˆâ€œå“ªäº›ç­–ç•¥å¯èƒ½æå‡30%ç•™å­˜ç‡ï¼Ÿâ€ï¼‰ã€‚ 3. æé—®çš„è¯­è¨€è‰ºæœ¯ link é¿å…ä¸»è§‚åè§ï¼šç”¨â€œèƒ½å¦è§£é‡Šè¿™ä¸ªæ•°æ®çš„å˜åŒ–è¶‹åŠ¿ï¼Ÿâ€æ›¿ä»£â€œä½ çš„æ•°æ®æ˜¯ä¸æ˜¯æœ‰è¯¯ï¼Ÿâ€ã€‚ ç§¯æå€¾å¬ä¸è¿½é—®ï¼šé€šè¿‡â€œèƒ½å¦ä¸¾ä¾‹è¯´æ˜ï¼Ÿâ€æˆ–â€œæ‚¨æåˆ°çš„â€˜ç”¨æˆ·ä½“éªŒâ€™å…·ä½“æŒ‡å“ªäº›æ–¹é¢ï¼Ÿâ€æ·±åŒ–å¯¹è¯ã€‚ ä¸‰ã€åœºæ™¯åŒ–æé—®ç­–ç•¥ link1. æ•™è‚²åœºæ™¯ï¼šä»è¢«åŠ¨å¸æ”¶åˆ°ä¸»åŠ¨æ¢ç©¶ link å­¦ç”Ÿæé—®æŠ€å·§ï¼š\né”™é¢˜å¤ç›˜ä¸‰æ­¥éª¤ï¼ˆç½‘é¡µ6æ¡ˆä¾‹ï¼‰ï¼š æ˜ç¡®å¡ç‚¹ï¼ˆâ€œè¿™é“é¢˜çš„è§£é¢˜æ€è·¯ä¸­ï¼Œå“ªä¸€æ­¥æˆ‘ä¸ç†è§£ï¼Ÿâ€ï¼‰ï¼› åˆ†äº«å°è¯•ï¼ˆâ€œæˆ‘è¯•è¿‡ä»£å…¥å…¬å¼Aï¼Œä½†ç»“æœä¸ç¬¦â€ï¼‰ï¼› å¯»æ±‚åé¦ˆï¼ˆâ€œæ‚¨å»ºè®®æˆ‘è°ƒæ•´è®¡ç®—é¡ºåºè¿˜æ˜¯æ£€æŸ¥å‰ææ¡ä»¶ï¼Ÿâ€ï¼‰ã€‚ çŸ¥è¯†ç»“æ„å›¾æ³•ï¼šå°†é”™é¢˜è½¬åŒ–ä¸ºé€»è¾‘å›¾è°±ï¼Œé€šè¿‡æé—®æ¢³ç†å› æœå…³ç³»ã€‚ æ•™å¸ˆæé—®è®¾è®¡ï¼š\næ‰¹åˆ¤æ€§æ€ç»´æ¿€å‘ï¼šå¦‚ã€Šæ¨ä¿®ä¹‹æ­»ã€‹æ•™å­¦ä¸­è¿½é—®â€œæ›¹æ“æ€æ¨ä¿®æ—¶ä¸ºä½•æ— äººæ±‚æƒ…ï¼Ÿâ€ï¼› åˆ†å±‚æé—®æ³•ï¼šä»è®°å¿†æ€§æé—®ï¼ˆâ€œæ–‡ç« ä¸»æ—¨ï¼Ÿâ€ï¼‰åˆ°åˆ›é€ æ€§æé—®ï¼ˆâ€œå¦‚æœä½ æ˜¯ä½œè€…ï¼Œä¼šå¦‚ä½•æ”¹å†™ç»“å±€ï¼Ÿâ€ï¼‰ã€‚ 2. èŒåœºåœºæ™¯ï¼šä»ä¿¡æ¯è·å–åˆ°å½±å“åŠ›æ„å»º link å‘ä¸Šç®¡ç†æé—®æœ¯ï¼š\nç›®çš„å‰ç½®æ³•ï¼šå°†â€œé¢†å¯¼æ˜å¤©æœ‰ç©ºå—ï¼Ÿâ€æ”¹ä¸ºâ€œå…³äºXé¡¹ç›®çš„èµ„æºåè°ƒæ–¹æ¡ˆï¼Œæ‚¨è®¤ä¸ºå“ªäº›éƒ¨åˆ†éœ€è¦ä¼˜å…ˆè®¨è®ºï¼Ÿæ˜å¤©ä¸‹åˆ2ç‚¹å¯å¦é¢„ç•™20åˆ†é’Ÿï¼Ÿâ€ã€‚ å‡è®¾æ€§æé—®ï¼šâ€œå¦‚æœé¢„ç®—å¢åŠ 20%ï¼Œæ‚¨è®¤ä¸ºæˆ‘ä»¬åº”è¯¥ä¼˜å…ˆæŠ•å…¥äº§å“ç ”å‘è¿˜æ˜¯å¸‚åœºæ‰©å¼ ï¼Ÿâ€ã€‚ å›¢é˜Ÿåä½œæé—®æ¡†æ¶ï¼š\nSCQAæ¨¡å‹ï¼ˆæƒ…å¢ƒ-å†²çª-é—®é¢˜-ç­”æ¡ˆï¼‰ï¼š æƒ…å¢ƒï¼ˆSï¼‰ï¼šâ€œå½“å‰ç”¨æˆ·æŠ•è¯‰ç‡ä¸Šå‡è‡³5%â€ï¼› å†²çªï¼ˆCï¼‰ï¼šâ€œä½†å®¢æœå“åº”æ—¶é—´å·²ç¼©çŸ­30%â€ï¼› é—®é¢˜ï¼ˆQï¼‰ï¼šâ€œå“ªäº›æœªè¢«å‘ç°çš„ç¯èŠ‚å¯¼è‡´çŸ›ç›¾ï¼Ÿâ€ï¼› ç­”æ¡ˆï¼ˆAï¼‰ï¼šâ€œå»ºè®®é‡æ–°æ¢³ç†ç”¨æˆ·æ—…ç¨‹å›¾ï¼Œå®šä½æ–­ç‚¹â€ã€‚ 3. ç§‘ç ”ä¸åˆ›æ–°ï¼šä»è§£æ„åˆ°é‡æ„ link é¢ è¦†æ€§æé—®æ³•ï¼š ç¬¬ä¸€æ€§åŸç†æé—®ï¼šç‰¹æ–¯æ‹‰é€šè¿‡â€œç”µæ± çš„ç‰©ç†æˆæœ¬ä¸‹é™æ˜¯å¤šå°‘ï¼Ÿâ€é‡æ„ç”µåŠ¨æ±½è½¦å®šä»·æ¨¡å‹ã€‚ è·¨å­¦ç§‘å«æ¥ï¼šâ€œåŒºå—é“¾æŠ€æœ¯å¦‚ä½•è§£å†³åŒ»ç–—æ•°æ®å­¤å²›é—®é¢˜ï¼Ÿâ€ã€‚ å››ã€æé—®çš„ä¼¦ç†ä¸æ–‡åŒ–ç»´åº¦ link1. å°Šé‡ä¸è¢«å°Šé‡ï¼šæé—®ä¸­çš„æƒåŠ›å¹³è¡¡ link æ–‡åŒ–æ•æ„Ÿæ€§ï¼šåœ¨æƒå¨æ–‡åŒ–ä¸­é‡‡ç”¨â€œå»ºè®®å¼æé—®â€ï¼ˆâ€œæ˜¯å¦å¯ä»¥è€ƒè™‘â€¦â€¦â€ï¼‰è€Œéç›´æ¥è´¨ç–‘ã€‚ å…±æƒ…å¼æé—®ï¼šå¿ƒç†å’¨è¯¢ä¸­çš„â€œä½ è§‰å¾—è¿™ç§æƒ…ç»ªèƒŒåå¯èƒ½æœ‰ä»€ä¹ˆéœ€æ±‚ï¼Ÿâ€ã€‚ 2. æé—®çš„é™·é˜±ä¸è§„é¿ link åŠ£è´¨æé—®çš„ç‰¹å¾ï¼š æ¨¡ç³Šæ€§ï¼ˆâ€œå¦‚ä½•æˆåŠŸï¼Ÿâ€ï¼‰ï¼› è¯±å¯¼æ€§ï¼ˆâ€œä½ ä¸è®¤ä¸ºè¿™ä¸ªæ–¹æ¡ˆå¾ˆå·®å—ï¼Ÿâ€ï¼‰ï¼› æ”»å‡»æ€§ï¼ˆâ€œä½ è¿è¿™éƒ½ä¸æ‡‚ï¼Ÿâ€ï¼‰ã€‚ äº”ã€æ¡ˆä¾‹æ·±åº¦è§£æ linkæ¡ˆä¾‹1ï¼šä¼½åˆ©ç•¥çš„â€œ5ä¸ªå¥³å„¿ä¹‹é—®â€ link èƒŒæ™¯ï¼šæ¯”ç½—æ•™æˆå®£ç§°â€œçˆ¶äº²å¼ºå¼±å†³å®šå­å¥³æ€§åˆ«â€ï¼Œä¼½åˆ©ç•¥åé©³ï¼šâ€œé‚»å±…å¼ºå£®å´ç”Ÿ5å¥³ï¼Œä½•è§£ï¼Ÿâ€ã€‚ æ™ºæ…§è§£æï¼š ä»¥å…·ä½“æ¡ˆä¾‹æŒ‘æˆ˜æŠ½è±¡ç†è®ºï¼› ç”¨äº‹å®åé©³æƒå¨ï¼ŒåšæŒâ€œç§‘å­¦å¿…é¡»ç¬¦åˆç°å®â€ï¼› å±•ç°â€œè´¨ç–‘-éªŒè¯-é‡æ„â€çš„ç§‘å­¦æé—®èŒƒå¼ã€‚ æ¡ˆä¾‹2ï¼šçŸ¥è¯†ç»“æ„å›¾æ³•æå‡å­¦ä¹ æ•ˆç‡ link å®è·µæ•ˆæœï¼šå­¦ç”Ÿå°éƒ‘é€šè¿‡æç‚¼é”™é¢˜å…³é”®ç‚¹ï¼ˆå¦‚æ•°å­¦é¢˜çš„â€œå·²çŸ¥æ¡ä»¶-é—®é¢˜é“¾â€ï¼‰ï¼Œ2ä¸ªæœˆå†…ä»ç­çº§ä¸­æ¸¸è·ƒå±…å‰ä¸‰ã€‚ æ–¹æ³•è®ºå»¶ä¼¸ï¼š â€œæ˜¯ä½•-ä¸ºä½•-å¦‚ä½•â€ä¸‰é—®æ³•ï¼ˆè¯­æ–‡é˜…è¯»åˆ†æï¼‰ï¼› â€œè¾“å…¥-åŠ å·¥-è¾“å‡ºâ€æé—®å¾ªç¯ï¼ˆç½‘é¡µ6çš„â€œæ•™ç»™åˆ«äººâ€è®°å¿†æ³•ï¼‰ã€‚ å…­ã€æé—®èƒ½åŠ›çš„ç»ˆèº«è®­ç»ƒ link1. æ—¥å¸¸è®­ç»ƒå·¥å…· link æé—®æ—¥è®°ï¼šæ¯æ—¥è®°å½•3ä¸ªä¼˜è´¨é—®é¢˜å¹¶è¯„ä¼°æ•ˆæœï¼› è‹æ ¼æ‹‰åº•å¼è‡ªé—®ï¼šå¯¹ä»»ä½•ç»“è®ºè¿½é—®â€œä¸ºä»€ä¹ˆæˆç«‹ï¼Ÿâ€â€œåä¾‹æ˜¯å¦å­˜åœ¨ï¼Ÿâ€ã€‚ 2. è¿›é˜¶ä¿®ç‚¼æ–¹å‘ link å…ƒé—®é¢˜æ„è¯†ï¼šåœ¨æé—®ä¸­åæ€â€œå½“å‰é—®é¢˜æ˜¯å¦è§¦åŠæœ¬è´¨ï¼Ÿâ€ï¼› ç³»ç»Ÿæ€ç»´æé—®ï¼šé€šè¿‡â€œè¦ç´ -è¿æ¥-åŠŸèƒ½â€ä¸‰å±‚æ¬¡åˆ†æå¤æ‚ç³»ç»Ÿã€‚ ç»“è¯­ï¼šæé—®ä¸ä»…æ˜¯è·å–ç­”æ¡ˆçš„å·¥å…·ï¼Œæ›´æ˜¯é‡å¡‘è®¤çŸ¥ã€æ¨åŠ¨å˜é©çš„æ æ†ã€‚ä»ä¼½åˆ©ç•¥çš„é¢ è¦†æ€§è´¨ç–‘åˆ°ç°ä»£èŒåœºçš„é«˜æ•ˆæ²Ÿé€šï¼Œæé—®çš„æ™ºæ…§è´¯ç©¿äººç±»æ–‡æ˜çš„æ¯ä¸€æ¬¡è·ƒè¿ã€‚å”¯æœ‰ä¿æŒâ€œç«¥çœŸå¼è¿½é—®â€ï¼ˆèƒ¡é€‚â€œé—®é¢˜ä¸¹â€ï¼‰ï¼Œæ–¹èƒ½åœ¨ä¸ç¡®å®šçš„æ—¶ä»£é”šå®šæ€æƒ³çš„èˆªå‘ã€‚\n"
            }
        );
    index.add(
            {
                id:  6 ,
                href: "\/docs\/information\/secure\/basic_cryptography\/",
                title: "å¯†ç å­¦åŸºç¡€",
                description: "å®šä¹‰ä¸ç›®æ ‡ linkå¯†ç å­¦æ˜¯ç ”ç©¶å¦‚ä½•ä¿æŠ¤ä¿¡æ¯å®‰å…¨çš„ç§‘å­¦ã€‚\næ ¸å¿ƒç›®æ ‡ï¼š\næœºå¯†æ€§ï¼ˆConfidentialityï¼‰ï¼šç¡®ä¿ä¿¡æ¯ä»…èƒ½è¢«æˆæƒæ–¹è¯»å–ï¼ˆå¦‚åŠ å¯†ç”µå­é‚®ä»¶ï¼‰ã€‚ å®Œæ•´æ€§ï¼ˆIntegrityï¼‰ï¼šé˜²æ­¢ä¿¡æ¯è¢«ç¯¡æ”¹ï¼ˆå¦‚æ•°å­—ç­¾åéªŒè¯æ–‡ä»¶æœªè¢«ä¿®æ”¹ï¼‰ã€‚ è®¤è¯æ€§ï¼ˆAuthenticationï¼‰ï¼šéªŒè¯é€šä¿¡åŒæ–¹èº«ä»½çš„çœŸå®æ€§ï¼ˆå¦‚ç™»å½•å¯†ç æˆ–ç”Ÿç‰©è¯†åˆ«ï¼‰ã€‚ ä¸å¯å¦è®¤æ€§ï¼ˆNon-repudiationï¼‰ï¼šé˜²æ­¢å‘é€è€…äº‹åå¦è®¤å…¶è¡Œä¸ºï¼ˆå¦‚åŒºå—é“¾äº¤æ˜“è®°å½•ï¼‰ã€‚ åˆ†ç±» link æŠ€æœ¯åŸç†åˆ†ç±» å¯¹ç§°å¯†ç ï¼ˆSymmetric Cryptographyï¼‰ å®šä¹‰ï¼šåŠ å¯†ä¸è§£å¯†ä½¿ç”¨åŒä¸€å¯†é’¥ï¼Œä¹Ÿç§°ä¸ºç§é’¥å¯†ç ã€‚ åˆ†ç»„å¯†ç ï¼šå°†æ˜æ–‡åˆ†ä¸ºå›ºå®šé•¿åº¦çš„å—è¿›è¡ŒåŠ å¯†ï¼ˆå¦‚AESã€DESã€3DESï¼‰ ç»“æ„ï¼šFeistelç½‘ç»œï¼ˆDESï¼‰ã€SPNç»“æ„ï¼ˆAESï¼‰ æµå¯†ç ï¼šå°†æ˜æ–‡é€ä½åŠ å¯†ï¼ˆå¦‚RC4ã€ChaCha20ï¼‰ ç‰¹ç‚¹ï¼šé€Ÿåº¦å¿«ï¼Œé€‚åˆå¤§æ•°æ®é‡åŠ å¯†ï¼Œä½†å¯†é’¥åˆ†å‘å›°éš¾ã€‚ åº”ç”¨åœºæ™¯ï¼šæ–‡ä»¶åŠ å¯†ï¼ˆAESï¼‰ã€æ— çº¿é€šä¿¡ï¼ˆGSMä¸­çš„A5/1ç®—æ³•ï¼‰ éå¯¹ç§°å¯†ç ï¼ˆAsymmetric Cryptographyï¼‰ å®šä¹‰ï¼šä½¿ç”¨å…¬é’¥åŠ å¯†ã€ç§é’¥è§£å¯†ï¼Œæˆ–ç§é’¥ç­¾åã€å…¬é’¥éªŒè¯ï¼Œä¹Ÿç§°å…¬é’¥å¯†ç ã€‚ åŸºäºæ•°è®ºéš¾é¢˜ï¼šRSAï¼ˆå¤§æ•´æ•°åˆ†è§£ï¼‰ã€Diffie-Hellmanï¼ˆç¦»æ•£å¯¹æ•°ï¼‰ åŸºäºæ¤­åœ†æ›²çº¿ï¼šECCï¼ˆæ¤­åœ†æ›²çº¿ç¦»æ•£å¯¹æ•°ï¼‰ ç‰¹ç‚¹ï¼šè§£å†³å¯†é’¥åˆ†å‘é—®é¢˜ï¼Œä½†è®¡ç®—æ•ˆç‡ä½äºå¯¹ç§°åŠ å¯†ã€‚ åº”ç”¨åœºæ™¯ï¼šæ•°å­—ç­¾åï¼ˆRSAï¼‰ã€å¯†é’¥äº¤æ¢ï¼ˆDiffie-Hellmanï¼‰ã€è¯ä¹¦è®¤è¯ï¼ˆX.509ï¼‰ å“ˆå¸Œå‡½æ•°ï¼ˆHash Functionï¼‰ å®šä¹‰ï¼šå°†ä»»æ„é•¿åº¦è¾“å…¥æ˜ å°„ä¸ºå›ºå®šé•¿åº¦çš„è¾“å‡ºï¼ˆå“ˆå¸Œå€¼ï¼‰ï¼Œå…·å¤‡å•å‘æ€§å’ŒæŠ—ç¢°æ’æ€§ ä¼ ç»Ÿå“ˆå¸Œï¼šSHA-256ï¼ˆæ¯”ç‰¹å¸ï¼‰ã€SHA-3ï¼ˆKeccakç®—æ³•ï¼‰ å·²æ·˜æ±°ç®—æ³•ï¼šMD5ï¼ˆå› ç¢°æ’æ”»å‡»è¢«å¼ƒç”¨ï¼‰ ç‰¹ç‚¹ï¼šä¸å¯é€†ï¼Œå¸¸ç”¨äºæ•°æ®å®Œæ•´æ€§éªŒè¯å’Œå¯†ç å­˜å‚¨ï¼ˆåŠ ç›å“ˆå¸Œï¼‰ åº”ç”¨åœºæ™¯ï¼šåŒºå—é“¾Merkleæ ‘ã€æ–‡ä»¶æ ¡éªŒ åŠŸèƒ½ç›®æ ‡åˆ†ç±» åŠ å¯†ä¸è§£å¯† ç›®æ ‡ï¼šä¿æŠ¤æ•°æ®æœºå¯†æ€§ æŠ€æœ¯ï¼šå¯¹ç§°åŠ å¯†ï¼ˆAESï¼‰ã€éå¯¹ç§°åŠ å¯†ï¼ˆRSAï¼‰ æ•°å­—ç­¾åï¼ˆDigital Signatureï¼‰ ç›®æ ‡ï¼šå®ç°è®¤è¯æ€§å’Œä¸å¯å¦è®¤æ€§ã€‚ æµç¨‹ï¼šå‘é€æ–¹ç”¨ç§é’¥ç­¾åï¼Œæ¥æ”¶æ–¹ç”¨å…¬é’¥éªŒè¯ã€‚ ç®—æ³•ï¼šRSAç­¾åã€ECDSAï¼ˆæ¯”ç‰¹å¸äº¤æ˜“ç­¾åï¼‰ã€‚ æ¶ˆæ¯è®¤è¯ç ï¼ˆMACï¼‰ ç›®æ ‡ï¼šéªŒè¯æ•°æ®æ¥æºå’Œå®Œæ•´æ€§ã€‚ æŠ€æœ¯ï¼šHMACï¼ˆåŸºäºå“ˆå¸Œçš„MACï¼‰ã€CMACï¼ˆåŸºäºåˆ†ç»„å¯†ç çš„MACï¼‰ã€‚ å¯†é’¥äº¤æ¢ï¼ˆKey Exchangeï¼‰ ç›®æ ‡ï¼šå®‰å…¨åå•†å…±äº«å¯†é’¥ ç®—æ³•ï¼šDiffie-Hellmanã€ECDHï¼ˆæ¤­åœ†æ›²çº¿Diffie-Hellmanï¼‰ åº”ç”¨åœºæ™¯åˆ†ç±» ç½‘ç»œé€šä¿¡å®‰å…¨ SSL/TLSï¼šæ··åˆä½¿ç”¨å¯¹ç§°åŠ å¯†ï¼ˆAESï¼‰å’Œéå¯¹ç§°åŠ å¯†ï¼ˆRSA/ECCï¼‰ã€‚ VPNï¼šIPsecåè®®ä¸­çš„ESPåŠ å¯†ä¸AHè®¤è¯ã€‚ åŒºå—é“¾ä¸æ•°å­—è´§å¸ æ¤­åœ†æ›²çº¿ç­¾åï¼šæ¯”ç‰¹å¸çš„ECDSAã€‚ é›¶çŸ¥è¯†è¯æ˜ï¼šZcashçš„zk-SNARKsã€‚ éšç§ä¿æŠ¤æŠ€æœ¯ åŒæ€åŠ å¯†ï¼ˆHomomorphic Encryptionï¼‰ï¼šå…è®¸åœ¨åŠ å¯†æ•°æ®ä¸Šç›´æ¥è¿ç®—ï¼ˆå¦‚åŒ»ç–—æ•°æ®åˆ†æï¼‰ã€‚ å®‰å…¨å¤šæ–¹è®¡ç®—ï¼ˆMPCï¼‰ï¼šå¤šæ–¹åä½œè®¡ç®—æ•°æ®ï¼Œä½†å„è‡ªéšç§æ•°æ®ä¸æ³„éœ²ã€‚ å¤å…¸å¯†ç  linkå¤å…¸å¯†ç å­¦ä¸»è¦å…³æ³¨ä¿¡æ¯çš„ä¿å¯†ä¹¦å†™å’Œä¼ é€’ï¼Œä»¥åŠä¸å…¶ç›¸å¯¹åº”çš„ç ´è¯‘æ–¹æ³•ã€‚\nç†è§£å¯†ç å­¦åŸºç¡€ï¼šæ­ç¤ºåŠ å¯†æ ¸å¿ƒæ€æƒ³ï¼ˆæ··æ·†ä¸æ‰©æ•£ï¼‰ï¼Œä¸ºç°ä»£å¯†ç å­¦ï¼ˆå¦‚AESçš„Sç›’è®¾è®¡ï¼‰å¥ å®šåŸºç¡€ã€‚ æŒæ¡å¯†ç åˆ†æå…¥é—¨ï¼šé¢‘ç‡åˆ†æã€å¡è¥¿æ–¯åŸºè¯•éªŒç­‰æ”»å‡»æ–¹æ³•ï¼Œæ˜¯å¯†ç åˆ†ææ€ç»´çš„èµ·ç‚¹ã€‚ æ›¿æ¢å¯†ç  linkåŸç†ï¼šå°†æ˜æ–‡ä¸­çš„å­—ç¬¦æ›¿æ¢ä¸ºå¦ä¸€å­—ç¬¦ï¼ˆæˆ–ç¬¦å·ï¼‰ã€‚\nå…¸å‹è®¾è®¡ï¼š\n",
                content: "å®šä¹‰ä¸ç›®æ ‡ linkå¯†ç å­¦æ˜¯ç ”ç©¶å¦‚ä½•ä¿æŠ¤ä¿¡æ¯å®‰å…¨çš„ç§‘å­¦ã€‚\næ ¸å¿ƒç›®æ ‡ï¼š\næœºå¯†æ€§ï¼ˆConfidentialityï¼‰ï¼šç¡®ä¿ä¿¡æ¯ä»…èƒ½è¢«æˆæƒæ–¹è¯»å–ï¼ˆå¦‚åŠ å¯†ç”µå­é‚®ä»¶ï¼‰ã€‚ å®Œæ•´æ€§ï¼ˆIntegrityï¼‰ï¼šé˜²æ­¢ä¿¡æ¯è¢«ç¯¡æ”¹ï¼ˆå¦‚æ•°å­—ç­¾åéªŒè¯æ–‡ä»¶æœªè¢«ä¿®æ”¹ï¼‰ã€‚ è®¤è¯æ€§ï¼ˆAuthenticationï¼‰ï¼šéªŒè¯é€šä¿¡åŒæ–¹èº«ä»½çš„çœŸå®æ€§ï¼ˆå¦‚ç™»å½•å¯†ç æˆ–ç”Ÿç‰©è¯†åˆ«ï¼‰ã€‚ ä¸å¯å¦è®¤æ€§ï¼ˆNon-repudiationï¼‰ï¼šé˜²æ­¢å‘é€è€…äº‹åå¦è®¤å…¶è¡Œä¸ºï¼ˆå¦‚åŒºå—é“¾äº¤æ˜“è®°å½•ï¼‰ã€‚ åˆ†ç±» link æŠ€æœ¯åŸç†åˆ†ç±» å¯¹ç§°å¯†ç ï¼ˆSymmetric Cryptographyï¼‰ å®šä¹‰ï¼šåŠ å¯†ä¸è§£å¯†ä½¿ç”¨åŒä¸€å¯†é’¥ï¼Œä¹Ÿç§°ä¸ºç§é’¥å¯†ç ã€‚ åˆ†ç»„å¯†ç ï¼šå°†æ˜æ–‡åˆ†ä¸ºå›ºå®šé•¿åº¦çš„å—è¿›è¡ŒåŠ å¯†ï¼ˆå¦‚AESã€DESã€3DESï¼‰ ç»“æ„ï¼šFeistelç½‘ç»œï¼ˆDESï¼‰ã€SPNç»“æ„ï¼ˆAESï¼‰ æµå¯†ç ï¼šå°†æ˜æ–‡é€ä½åŠ å¯†ï¼ˆå¦‚RC4ã€ChaCha20ï¼‰ ç‰¹ç‚¹ï¼šé€Ÿåº¦å¿«ï¼Œé€‚åˆå¤§æ•°æ®é‡åŠ å¯†ï¼Œä½†å¯†é’¥åˆ†å‘å›°éš¾ã€‚ åº”ç”¨åœºæ™¯ï¼šæ–‡ä»¶åŠ å¯†ï¼ˆAESï¼‰ã€æ— çº¿é€šä¿¡ï¼ˆGSMä¸­çš„A5/1ç®—æ³•ï¼‰ éå¯¹ç§°å¯†ç ï¼ˆAsymmetric Cryptographyï¼‰ å®šä¹‰ï¼šä½¿ç”¨å…¬é’¥åŠ å¯†ã€ç§é’¥è§£å¯†ï¼Œæˆ–ç§é’¥ç­¾åã€å…¬é’¥éªŒè¯ï¼Œä¹Ÿç§°å…¬é’¥å¯†ç ã€‚ åŸºäºæ•°è®ºéš¾é¢˜ï¼šRSAï¼ˆå¤§æ•´æ•°åˆ†è§£ï¼‰ã€Diffie-Hellmanï¼ˆç¦»æ•£å¯¹æ•°ï¼‰ åŸºäºæ¤­åœ†æ›²çº¿ï¼šECCï¼ˆæ¤­åœ†æ›²çº¿ç¦»æ•£å¯¹æ•°ï¼‰ ç‰¹ç‚¹ï¼šè§£å†³å¯†é’¥åˆ†å‘é—®é¢˜ï¼Œä½†è®¡ç®—æ•ˆç‡ä½äºå¯¹ç§°åŠ å¯†ã€‚ åº”ç”¨åœºæ™¯ï¼šæ•°å­—ç­¾åï¼ˆRSAï¼‰ã€å¯†é’¥äº¤æ¢ï¼ˆDiffie-Hellmanï¼‰ã€è¯ä¹¦è®¤è¯ï¼ˆX.509ï¼‰ å“ˆå¸Œå‡½æ•°ï¼ˆHash Functionï¼‰ å®šä¹‰ï¼šå°†ä»»æ„é•¿åº¦è¾“å…¥æ˜ å°„ä¸ºå›ºå®šé•¿åº¦çš„è¾“å‡ºï¼ˆå“ˆå¸Œå€¼ï¼‰ï¼Œå…·å¤‡å•å‘æ€§å’ŒæŠ—ç¢°æ’æ€§ ä¼ ç»Ÿå“ˆå¸Œï¼šSHA-256ï¼ˆæ¯”ç‰¹å¸ï¼‰ã€SHA-3ï¼ˆKeccakç®—æ³•ï¼‰ å·²æ·˜æ±°ç®—æ³•ï¼šMD5ï¼ˆå› ç¢°æ’æ”»å‡»è¢«å¼ƒç”¨ï¼‰ ç‰¹ç‚¹ï¼šä¸å¯é€†ï¼Œå¸¸ç”¨äºæ•°æ®å®Œæ•´æ€§éªŒè¯å’Œå¯†ç å­˜å‚¨ï¼ˆåŠ ç›å“ˆå¸Œï¼‰ åº”ç”¨åœºæ™¯ï¼šåŒºå—é“¾Merkleæ ‘ã€æ–‡ä»¶æ ¡éªŒ åŠŸèƒ½ç›®æ ‡åˆ†ç±» åŠ å¯†ä¸è§£å¯† ç›®æ ‡ï¼šä¿æŠ¤æ•°æ®æœºå¯†æ€§ æŠ€æœ¯ï¼šå¯¹ç§°åŠ å¯†ï¼ˆAESï¼‰ã€éå¯¹ç§°åŠ å¯†ï¼ˆRSAï¼‰ æ•°å­—ç­¾åï¼ˆDigital Signatureï¼‰ ç›®æ ‡ï¼šå®ç°è®¤è¯æ€§å’Œä¸å¯å¦è®¤æ€§ã€‚ æµç¨‹ï¼šå‘é€æ–¹ç”¨ç§é’¥ç­¾åï¼Œæ¥æ”¶æ–¹ç”¨å…¬é’¥éªŒè¯ã€‚ ç®—æ³•ï¼šRSAç­¾åã€ECDSAï¼ˆæ¯”ç‰¹å¸äº¤æ˜“ç­¾åï¼‰ã€‚ æ¶ˆæ¯è®¤è¯ç ï¼ˆMACï¼‰ ç›®æ ‡ï¼šéªŒè¯æ•°æ®æ¥æºå’Œå®Œæ•´æ€§ã€‚ æŠ€æœ¯ï¼šHMACï¼ˆåŸºäºå“ˆå¸Œçš„MACï¼‰ã€CMACï¼ˆåŸºäºåˆ†ç»„å¯†ç çš„MACï¼‰ã€‚ å¯†é’¥äº¤æ¢ï¼ˆKey Exchangeï¼‰ ç›®æ ‡ï¼šå®‰å…¨åå•†å…±äº«å¯†é’¥ ç®—æ³•ï¼šDiffie-Hellmanã€ECDHï¼ˆæ¤­åœ†æ›²çº¿Diffie-Hellmanï¼‰ åº”ç”¨åœºæ™¯åˆ†ç±» ç½‘ç»œé€šä¿¡å®‰å…¨ SSL/TLSï¼šæ··åˆä½¿ç”¨å¯¹ç§°åŠ å¯†ï¼ˆAESï¼‰å’Œéå¯¹ç§°åŠ å¯†ï¼ˆRSA/ECCï¼‰ã€‚ VPNï¼šIPsecåè®®ä¸­çš„ESPåŠ å¯†ä¸AHè®¤è¯ã€‚ åŒºå—é“¾ä¸æ•°å­—è´§å¸ æ¤­åœ†æ›²çº¿ç­¾åï¼šæ¯”ç‰¹å¸çš„ECDSAã€‚ é›¶çŸ¥è¯†è¯æ˜ï¼šZcashçš„zk-SNARKsã€‚ éšç§ä¿æŠ¤æŠ€æœ¯ åŒæ€åŠ å¯†ï¼ˆHomomorphic Encryptionï¼‰ï¼šå…è®¸åœ¨åŠ å¯†æ•°æ®ä¸Šç›´æ¥è¿ç®—ï¼ˆå¦‚åŒ»ç–—æ•°æ®åˆ†æï¼‰ã€‚ å®‰å…¨å¤šæ–¹è®¡ç®—ï¼ˆMPCï¼‰ï¼šå¤šæ–¹åä½œè®¡ç®—æ•°æ®ï¼Œä½†å„è‡ªéšç§æ•°æ®ä¸æ³„éœ²ã€‚ å¤å…¸å¯†ç  linkå¤å…¸å¯†ç å­¦ä¸»è¦å…³æ³¨ä¿¡æ¯çš„ä¿å¯†ä¹¦å†™å’Œä¼ é€’ï¼Œä»¥åŠä¸å…¶ç›¸å¯¹åº”çš„ç ´è¯‘æ–¹æ³•ã€‚\nç†è§£å¯†ç å­¦åŸºç¡€ï¼šæ­ç¤ºåŠ å¯†æ ¸å¿ƒæ€æƒ³ï¼ˆæ··æ·†ä¸æ‰©æ•£ï¼‰ï¼Œä¸ºç°ä»£å¯†ç å­¦ï¼ˆå¦‚AESçš„Sç›’è®¾è®¡ï¼‰å¥ å®šåŸºç¡€ã€‚ æŒæ¡å¯†ç åˆ†æå…¥é—¨ï¼šé¢‘ç‡åˆ†æã€å¡è¥¿æ–¯åŸºè¯•éªŒç­‰æ”»å‡»æ–¹æ³•ï¼Œæ˜¯å¯†ç åˆ†ææ€ç»´çš„èµ·ç‚¹ã€‚ æ›¿æ¢å¯†ç  linkåŸç†ï¼šå°†æ˜æ–‡ä¸­çš„å­—ç¬¦æ›¿æ¢ä¸ºå¦ä¸€å­—ç¬¦ï¼ˆæˆ–ç¬¦å·ï¼‰ã€‚\nå…¸å‹è®¾è®¡ï¼š\nå‡¯æ’’å¯†ç ï¼ˆCaesar Cipherï¼‰ï¼š æ˜æ–‡æ¯ä¸ªå­—æ¯åœ¨å­—æ¯è¡¨ä¸­å›ºå®šåç§»ï¼ˆå¦‚å³ç§»3ä½ï¼ŒAâ†’Dï¼ŒBâ†’Eï¼‰ã€‚ å¼±ç‚¹ï¼šä»…26ç§å¯èƒ½åç§»ï¼Œæ˜“è¢«ç©·ä¸¾æˆ–é¢‘ç‡åˆ†æç ´è§£ã€‚ å®è·µä»»åŠ¡ï¼šç¼–ç¨‹å®ç°åŠ å¯†ä¸é¢‘ç‡æ”»å‡»ï¼ˆç»Ÿè®¡å­—æ¯åˆ†å¸ƒï¼‰ã€‚ ç»´å‰å°¼äºšå¯†ç ï¼ˆVigenÃ¨re Cipherï¼‰ï¼š ä½¿ç”¨å…³é”®è¯ç”Ÿæˆå¤šè¡¨æ›¿æ¢ï¼ˆå¦‚å…³é”®è¯â€œKEYâ€å¾ªç¯å†³å®šæ¯å­—æ¯çš„åç§»é‡ï¼‰ã€‚ ä¼˜ç‚¹ï¼šç›¸æ¯”å‡¯æ’’å¯†ç ï¼Œå¤šè¡¨æ›¿æ¢æŠµæŠ—é¢‘ç‡åˆ†æã€‚ å¼±ç‚¹ï¼šå…³é”®è¯é‡å¤å¯¼è‡´å‘¨æœŸæ€§æ¼æ´ï¼Œå¯ç”¨å¡è¥¿æ–¯åŸºè¯•éªŒï¼ˆKasiski Examinationï¼‰ç ´è§£ã€‚ å•è¡¨æ›¿æ¢æ‰©å±•ï¼šå¦‚ä»¿å°„å¯†ç ï¼ˆAffine Cipherï¼‰ï¼Œé€šè¿‡çº¿æ€§å˜æ¢åŠ å¯†ï¼šE(x)=(ax+b)modâ€‰26E(x)=(ax+b)mod26ã€‚ ç½®æ¢å¯†ç ï¼ˆTransposition Cipherï¼‰ linkåŸç†ï¼šæ”¹å˜æ˜æ–‡å­—ç¬¦çš„é¡ºåºï¼Œä¸æ›¿æ¢å­—ç¬¦æœ¬èº«ã€‚\nå…¸å‹è®¾è®¡ï¼š\næ …æ å¯†ç ï¼ˆRail Fence Cipherï¼‰ï¼š å°†æ˜æ–‡æŒ‰â€œä¹‹â€å­—å½¢æ’åˆ—åæŒ‰è¡Œè¯»å–ï¼ˆå¦‚æ˜æ–‡â€œHELLOWORLDâ€æ’åˆ—ä¸ºä¸¤è¡ŒååŠ å¯†ä¸ºâ€œHLOOL ELWRDâ€ï¼‰ã€‚ å¼±ç‚¹ï¼šæ’åˆ—è§„å¾‹æ˜“è¢«çŒœæµ‹ã€‚ åˆ—ç½®æ¢å¯†ç ï¼ˆColumnar Transpositionï¼‰ï¼š å°†æ˜æ–‡æŒ‰å›ºå®šåˆ—æ•°æ’åˆ—ï¼ŒæŒ‰å¯†é’¥å†³å®šçš„åˆ—é¡ºåºé‡æ–°ç»„åˆï¼ˆå¦‚å¯†é’¥â€œ3124â€è¡¨ç¤ºæŒ‰ç¬¬3ã€1ã€2ã€4åˆ—è¯»å–ï¼‰ã€‚ å®‰å…¨æ€§ï¼šç›¸æ¯”æ …æ å¯†ç æ›´å¤æ‚ï¼Œä½†å¯†é’¥é•¿åº¦æœ‰é™ä»å¯èƒ½è¢«ç ´è§£ã€‚ å¯†ç å™¨æ¢°ï¼ˆæ‰‹å·¥/æœºæ¢°å¯†ç ï¼‰ link æ–¯å·´è¾¾å¯†ç æ£’ï¼ˆScytaleï¼‰ï¼š å¤å¸Œè…Šç”¨æœ¨æ£’ç¼ ç»•ç¾Šçš®çº¸ä¹¦å†™ï¼Œæ‹†ä¸‹åä¹±åºï¼Œéœ€ç›¸åŒç²—ç»†æœ¨æ£’è¿˜åŸã€‚ æ©å°¼æ ¼ç›æœºï¼ˆEnigma Machineï¼‰ï¼š äºŒæˆ˜å¾·å†›ä½¿ç”¨çš„è½¬å­æœºæ¢°å¯†ç æœºï¼Œè™½å±æœºæ¢°æ—¶ä»£ï¼Œä½†å¯è§†ä¸ºå¤å…¸å¯†ç çš„å¤æ‚å»¶ä¼¸ã€‚ åŸç†ï¼šé€šè¿‡å¤šä¸ªè½¬å­ç”µè·¯å®ç°åŠ¨æ€å¤šè¡¨æ›¿æ¢ï¼Œä½†å› è®¾è®¡æ¼æ´ï¼ˆå¦‚å¯†é’¥é‡å¤ï¼‰è¢«å›¾çµç ´è§£ã€‚ "
            }
        );
    index.add(
            {
                id:  7 ,
                href: "\/docs\/economy\/microeconomics_base\/",
                title: "å¾®è§‚ç»æµå­¦åŸºç¡€",
                description: "æ›¼æ˜†çš„ã€Šç»æµå­¦åŸç†ã€‹ä½œä¸ºç»æµå­¦é¢†åŸŸçš„ç»å…¸æ•™æï¼Œä»¥å…¶æ¸…æ™°çš„é€»è¾‘æ¡†æ¶å’Œç”ŸåŠ¨çš„ç°å®æ¡ˆä¾‹ï¼Œä¸ºæ— æ•°ç»æµå­¦å­¦ä¹ è€…æ‰“å¼€äº†å¾®è§‚ç»æµå­¦çš„å¤§é—¨ã€‚æœ¬æ–‡å°†ä»¥æ›¼æ˜†çš„å¾®è§‚ç»æµå­¦åˆ†å†Œä¸ºåŸºç¡€ï¼Œç³»ç»Ÿæ¢³ç†å¾®è§‚ç»æµå­¦çš„æ ¸å¿ƒæ¦‚å¿µä¸åŸç†ï¼Œä»ç»æµå­¦åå¤§åŸç†è¿™ä¸€åŸºç¡€æ¡†æ¶å‡ºå‘ï¼Œé€æ­¥æ·±å…¥åˆ°å¸‚åœºè¿è¡Œæœºåˆ¶ã€æ¶ˆè´¹è€…ä¸ç”Ÿäº§è€…è¡Œä¸ºåˆ†æã€ä¸åŒå¸‚åœºç»“æ„ä¸‹çš„ä¼ä¸šå†³ç­–ï¼Œä»¥åŠå¸‚åœºå¤±çµä¸æ”¿åºœå¹²é¢„ç­‰é‡è¦è®®é¢˜ã€‚æ¯ä¸ªéƒ¨åˆ†éƒ½å°†ç»“åˆç°å®æ¡ˆä¾‹è¿›è¡Œé˜é‡Šï¼Œå¸®åŠ©è¯»è€…ç†è§£è¿™äº›æŠ½è±¡ç†è®ºå¦‚ä½•è§£é‡Šæˆ‘ä»¬æ—¥å¸¸ç”Ÿæ´»ä¸­çš„ç»æµç°è±¡ã€‚é€šè¿‡è¿™ç¯‡æ€»ç»“ï¼Œè¯»è€…ä¸ä»…èƒ½å¤ŸæŒæ¡å¾®è§‚ç»æµå­¦çš„åŸºç¡€çŸ¥è¯†ä½“ç³»ï¼Œè¿˜èƒ½å­¦ä¼šåƒç»æµå­¦å®¶ä¸€æ ·æ€è€ƒç°å®ä¸–ç•Œä¸­çš„èµ„æºé…ç½®é—®é¢˜ã€‚\nç»æµå­¦åå¤§åŸç†ä¸åŸºç¡€æ¦‚å¿µ linkç»æµå­¦ä½œä¸ºä¸€é—¨ç ”ç©¶ç¨€ç¼ºèµ„æºé…ç½®çš„ç¤¾ä¼šç§‘å­¦ï¼Œå…¶æ ¸å¿ƒé—®é¢˜æºäºä¸€ä¸ªåŸºæœ¬äº‹å®ï¼šç¤¾ä¼šèµ„æºæ˜¯æœ‰é™çš„ï¼Œè€Œäººç±»æ¬²æœ›æ˜¯æ— é™çš„ã€‚æ›¼æ˜†åœ¨ã€Šç»æµå­¦åŸç†ã€‹å¼€ç¯‡å³æå‡ºäº†è´¯ç©¿å…¨ä¹¦çš„\"ç»æµå­¦åå¤§åŸç†\"ï¼Œè¿™äº›åŸç†ä¸ºæˆ‘ä»¬ç†è§£ä¸ªä½“å†³ç­–ã€å¸‚åœºè¿è¡Œå’Œæ•´ä½“ç»æµæä¾›äº†åŸºæœ¬æ¡†æ¶ã€‚ç¨€ç¼ºæ€§ï¼ˆscarcityï¼‰æ˜¯ç»æµå­¦ç ”ç©¶çš„å‡ºå‘ç‚¹ï¼Œå®ƒæŒ‡ç¤¾ä¼šæ‹¥æœ‰çš„èµ„æºæœ‰é™ï¼Œæ— æ³•ç”Ÿäº§äººä»¬å¸Œæœ›æ‹¥æœ‰çš„æ‰€æœ‰ç‰©å“ä¸åŠ³åŠ¡ã€‚æ­£æ˜¯è¿™ç§ç¨€ç¼ºæ€§çš„å­˜åœ¨ï¼Œä½¿å¾—äººä»¬å¿…é¡»åšå‡ºé€‰æ‹©ï¼Œä»è€Œäº§ç”Ÿäº†ç»æµå­¦ç ”ç©¶çš„ä¸‰ä¸ªåŸºæœ¬é—®é¢˜ï¼šç”Ÿäº§ä»€ä¹ˆã€å¦‚ä½•ç”Ÿäº§å’Œä¸ºè°ç”Ÿäº§ã€‚\næ›¼æ˜†å°†åå¤§åŸç†åˆ†ä¸ºä¸‰ç»„ï¼Œåˆ†åˆ«å¯¹åº”ä¸ªäººå†³ç­–ã€äººä»¬ä¹‹é—´çš„äº¤æ˜“ä»¥åŠæ•´ä½“ç»æµè¿è¡Œã€‚ç¬¬ä¸€ç»„åŸç†å…³äºä¸ªäººå¦‚ä½•åšå‡ºå†³ç­–ï¼šäººä»¬é¢ä¸´æƒè¡¡å–èˆï¼ˆåŸç†ä¸€ï¼‰ï¼›æŸç§ä¸œè¥¿çš„æˆæœ¬æ˜¯ä¸ºäº†å¾—åˆ°å®ƒæ‰€æ”¾å¼ƒçš„ä¸œè¥¿ï¼Œå³æœºä¼šæˆæœ¬ï¼ˆåŸç†äºŒï¼‰ï¼›ç†æ€§äººè€ƒè™‘è¾¹é™…é‡ï¼ˆåŸç†ä¸‰ï¼‰ï¼›äººä»¬ä¼šå¯¹æ¿€åŠ±åšå‡ºååº”ï¼ˆåŸç†å››ï¼‰ã€‚ä»¥å¤§å­¦ç”Ÿé€‰æ‹©å­¦ä¹ æ—¶é—´ä¸ºä¾‹ï¼Œåœ¨è€ƒè¯•å‰å¤•ï¼Œå­¦ç”Ÿéœ€è¦åœ¨å¤ä¹ å’Œå¨±ä¹ä¹‹é—´åšå‡ºæƒè¡¡ï¼ˆåŸç†ä¸€ï¼‰ï¼›é€‰æ‹©å¤šç©ä¸€å°æ—¶æ¸¸æˆçš„æˆæœ¬æ˜¯å°‘äº†ä¸€å°æ—¶å¤ä¹ å¯èƒ½å¯¼è‡´çš„æˆç»©ä¸‹é™ï¼ˆåŸç†äºŒï¼‰ï¼›ç†æ€§çš„å­¦ç”Ÿä¼šè€ƒè™‘å¤šå¤ä¹ ä¸€å°æ—¶å¸¦æ¥çš„è¾¹é™…æ”¶ç›Šæ˜¯å¦å¤§äºè¾¹é™…æˆæœ¬ï¼ˆåŸç†ä¸‰ï¼‰ï¼›å¦‚æœæ•™æˆå®£å¸ƒè€ƒè¯•éš¾åº¦é™ä½ï¼Œå­¦ç”Ÿå¯èƒ½ä¼šå‡å°‘å¤ä¹ æ—¶é—´ï¼Œè¿™å°±æ˜¯å¯¹æ¿€åŠ±çš„ååº”ï¼ˆåŸç†å››ï¼‰ã€‚\nç¬¬äºŒç»„åŸç†æ¢è®¨äººä»¬ä¹‹é—´çš„ç›¸äº’äº¤æ˜“ï¼šè´¸æ˜“å¯ä»¥ä½¿æ¯ä¸ªäººçš„çŠ¶å†µéƒ½å˜å¾—æ›´å¥½ï¼ˆåŸç†äº”ï¼‰ï¼›å¸‚åœºé€šå¸¸æ˜¯ç»„ç»‡ç»æµæ´»åŠ¨çš„ä¸€ç§å¥½æ–¹æ³•ï¼ˆåŸç†å…­ï¼‰ï¼›æ”¿åºœæœ‰æ—¶å¯ä»¥æ”¹å–„å¸‚åœºç»“æœï¼ˆåŸç†ä¸ƒï¼‰ã€‚å›½é™…è´¸æ˜“çš„ä¾‹å­ç”ŸåŠ¨è¯´æ˜äº†è¿™äº›åŸç†ï¼šä¸­å›½ç”Ÿäº§æœè£…æœ‰æ¯”è¾ƒä¼˜åŠ¿ï¼Œç¾å›½ç”Ÿäº§é£æœºæœ‰æ¯”è¾ƒä¼˜åŠ¿ï¼Œä¸¤å›½é€šè¿‡è´¸æ˜“éƒ½èƒ½ä»¥æ›´ä½çš„æˆæœ¬è·å¾—å¯¹æ–¹çš„äº§å“ï¼ˆåŸç†äº”ï¼‰ï¼›å¸‚åœºä»·æ ¼æœºåˆ¶åƒä¸€åª\"çœ‹ä¸è§çš„æ‰‹\"å¼•å¯¼èµ„æºæµå‘æœ€æœ‰æ•ˆç‡çš„ç”¨é€”ï¼ˆåŸç†å…­ï¼‰ï¼›ä½†å½“å­˜åœ¨æ±¡æŸ“ç­‰å¤–éƒ¨æ€§æ—¶ï¼Œæ”¿åºœé€šè¿‡ç¯ä¿æ³•è§„å¯ä»¥æ”¹å–„å¸‚åœºç»“æœï¼ˆåŸç†ä¸ƒï¼‰ã€‚\nç¬¬ä¸‰ç»„åŸç†æ¶‰åŠæ•´ä½“ç»æµè¿è¡Œï¼šä¸€å›½çš„ç”Ÿæ´»æ°´å¹³å–å†³äºå®ƒç”Ÿäº§ç‰©å“ä¸åŠ³åŠ¡çš„èƒ½åŠ›å³ç”Ÿäº§ç‡ï¼ˆåŸç†å…«ï¼‰ï¼›è´§å¸å‘è¡Œè¿‡å¤šå¯¼è‡´ç‰©ä»·ä¸Šæ¶¨ï¼ˆåŸç†ä¹ï¼‰ï¼›ç¤¾ä¼šé¢ä¸´é€šè´§è†¨èƒ€ä¸å¤±ä¸šä¹‹é—´çš„çŸ­æœŸæƒè¡¡å–èˆï¼ˆåŸç†åï¼‰ã€‚äºŒæˆ˜åæ—¥æœ¬å’Œå¾·å›½çš„ç»æµå¥‡è¿¹å±•ç¤ºäº†ç”Ÿäº§ç‡å¯¹ç”Ÿæ´»æ°´å¹³çš„å…³é”®ä½œç”¨ï¼ˆåŸç†å…«ï¼‰ï¼›æ´¥å·´å¸ƒéŸ¦å’Œå§”å†…ç‘æ‹‰çš„æ¶æ€§é€šè´§è†¨èƒ€å°è¯äº†è´§å¸è¶…å‘çš„åæœï¼ˆåŸç†ä¹ï¼‰ï¼›è€Œå„å›½å¤®è¡Œåœ¨ç»æµå¢é•¿ä¸ç‰©ä»·ç¨³å®šé—´çš„æ”¿ç­–æƒè¡¡åˆ™ä½“ç°äº†è²åˆ©æ™®æ–¯æ›²çº¿çš„çŸ­æœŸäº¤æ›¿å…³ç³»ï¼ˆåŸç†åï¼‰ã€‚\nç†è§£è¿™äº›ç»æµå­¦åŸç†ï¼Œæœ‰åŠ©äºæˆ‘ä»¬åŸ¹å…»ç»æµå­¦æ€ç»´æ–¹å¼ã€‚ç»æµå­¦å®¶ä½¿ç”¨æ¨¡å‹ï¼ˆå¦‚å¾ªç¯æµå‘å›¾ã€ç”Ÿäº§å¯èƒ½æ€§è¾¹ç•Œï¼‰ç®€åŒ–å¤æ‚ç°å®ï¼ŒåŒºåˆ†å®è¯è¡¨è¿°ï¼ˆæè¿°\"æ˜¯ä»€ä¹ˆ\"ï¼‰ä¸è§„èŒƒè¡¨è¿°ï¼ˆä¸»å¼ \"åº”è¯¥æ˜¯ä»€ä¹ˆ\"ï¼‰ï¼Œå¹¶é€šè¿‡ç§‘å­¦æ–¹æ³•åˆ†æç»æµç°è±¡ã€‚ä¾‹å¦‚ï¼Œç”Ÿäº§å¯èƒ½æ€§è¾¹ç•Œå±•ç¤ºäº†åœ¨èµ„æºå’ŒæŠ€æœ¯ç»™å®šæƒ…å†µä¸‹ï¼Œä¸€ä¸ªç»æµä½“èƒ½ç”Ÿäº§çš„ä¸¤ç§äº§å“çš„å„ç§ç»„åˆï¼Œä»¥åŠæœºä¼šæˆæœ¬éšäº§é‡å˜åŒ–çš„å…³ç³»ã€‚å‡è®¾ä¸€ä¸ªå›½å®¶åªèƒ½ç”Ÿäº§æ±½è½¦å’Œé£Ÿå“ï¼Œå¤šç”Ÿäº§ä¸€è¾†æ±½è½¦æ„å‘³ç€å¿…é¡»æ”¾å¼ƒä¸€å®šæ•°é‡çš„é£Ÿå“ç”Ÿäº§ï¼Œè¿™ç§æƒè¡¡å–èˆå…³ç³»æ­£æ˜¯ç»æµå­¦ç ”ç©¶çš„æ ¸å¿ƒã€‚\nmindmap root((ç»æµå­¦åŸç†)) ä¸ªäººå†³ç­– åŸç†1: æƒè¡¡å–èˆ åŸç†2: æœºä¼šæˆæœ¬ åŸç†3: è¾¹é™…å†³ç­– åŸç†4: æ¿€åŠ±ååº” äº¤äº’ä½œç”¨ åŸç†5: è´¸æ˜“å¢ç›Š åŸç†6: å¸‚åœºæ•ˆç‡ åŸç†7: æ”¿åºœèŒèƒ½ æ•´ä½“ç»æµ åŸç†8: ç”Ÿäº§ç‡ åŸç†9: é€šè´§è†¨èƒ€ åŸç†10: å¤±ä¸šé€šèƒ€äº¤æ›¿ å¸‚åœºè¿è¡Œæœºåˆ¶ï¼šä¾›ç»™ä¸éœ€æ±‚ linkä¾›ç»™ä¸éœ€æ±‚æ¨¡å‹æ˜¯å¾®è§‚ç»æµå­¦åˆ†æå¸‚åœºè¿è¡Œçš„æ ¸å¿ƒå·¥å…·ï¼Œè¢«ç§°ä¸º\"ç»æµå­¦å®¶çš„å·¥å…·ç®±\"ã€‚è¿™ä¸€æ¨¡å‹è§£é‡Šäº†èµ„æºå¦‚ä½•é€šè¿‡ä»·æ ¼æœºåˆ¶åœ¨å¸‚åœºç»æµä¸­è¿›è¡Œé…ç½®ã€‚å¸‚åœºéœ€æ±‚æŒ‡çš„æ˜¯åœ¨ä¸€å®šæ—¶æœŸå†…ï¼Œæ¶ˆè´¹è€…åœ¨å„ç§ä»·æ ¼æ°´å¹³ä¸‹æ„¿æ„ä¸”èƒ½å¤Ÿè´­ä¹°çš„å•†å“æˆ–æœåŠ¡æ•°é‡ã€‚æ ¹æ®éœ€æ±‚å®šç†ï¼Œåœ¨å…¶ä»–æ¡ä»¶ä¸å˜çš„æƒ…å†µä¸‹ï¼Œå•†å“ä»·æ ¼ä¸Šå‡ä¼šå¯¼è‡´éœ€æ±‚é‡å‡å°‘ï¼Œåä¹‹äº¦ç„¶ã€‚è¿™ç§åå‘å…³ç³»å¯ä»¥ç”¨éœ€æ±‚æ›²çº¿ç›´è§‚è¡¨ç¤ºï¼šä¸€æ¡ä»å·¦ä¸Šæ–¹å‘å³ä¸‹æ–¹å€¾æ–œçš„æ›²çº¿ã€‚ä¾‹å¦‚ï¼Œå½“æ™ºèƒ½æ‰‹æœºä»·æ ¼ä»5000å…ƒé™è‡³3000å…ƒæ—¶ï¼Œå¸‚åœºä¸Šæ„¿æ„è´­ä¹°çš„æ¶ˆè´¹è€…æ•°é‡é€šå¸¸ä¼šå¢åŠ ã€‚\nå½±å“éœ€æ±‚çš„å› ç´ è¿œä¸æ­¢ä»·æ ¼ï¼Œè¿˜åŒ…æ‹¬æ¶ˆè´¹è€…åå¥½ã€æ”¶å…¥æ°´å¹³ã€ç›¸å…³å•†å“ä»·æ ¼ï¼ˆæ›¿ä»£å“å’Œäº’è¡¥å“ï¼‰ä»¥åŠæ¶ˆè´¹è€…é¢„æœŸç­‰ã€‚æ”¶å…¥å¢åŠ ä¼šæé«˜å¯¹æ­£å¸¸å•†å“ï¼ˆå¦‚ä¼˜è´¨è‚‰ç±»ã€å“ç‰Œæœè£…ï¼‰çš„éœ€æ±‚ï¼Œä½†å‡å°‘å¯¹ä½æ¡£å•†å“ï¼ˆå¦‚æ–¹ä¾¿é¢ã€å…¬å…±äº¤é€šï¼‰çš„éœ€æ±‚ã€‚æ›¿ä»£å“ï¼ˆå¦‚èŒ¶å¶ä¸å’–å•¡ï¼‰å’Œäº’è¡¥å“ï¼ˆå¦‚æ‰‹æœºä¸æµé‡å¥—é¤ï¼‰çš„ä»·æ ¼å˜åŠ¨ä¹Ÿä¼šå½±å“éœ€æ±‚ï¼šå’–å•¡ä»·æ ¼ä¸Šæ¶¨å¯èƒ½å¯¼è‡´èŒ¶å¶éœ€æ±‚å¢åŠ ï¼›è€Œæµé‡è´¹ä¸‹é™å¯èƒ½æå‡æ™ºèƒ½æ‰‹æœºé”€é‡ã€‚2020å¹´ç–«æƒ…æœŸé—´ï¼Œå±…å®¶åŠå…¬å¯¼è‡´ç¬”è®°æœ¬ç”µè„‘éœ€æ±‚æ¿€å¢ï¼Œå°±æ˜¯ä¸€ä¸ªç°å®æ¡ˆä¾‹ã€‚\nå¸‚åœºä¾›ç»™åˆ™æŒ‡ç”Ÿäº§è€…åœ¨å„ç§ä»·æ ¼æ°´å¹³ä¸‹æ„¿æ„ä¸”èƒ½å¤Ÿæä¾›çš„å•†å“æˆ–æœåŠ¡æ•°é‡ã€‚ä¾›ç»™å®šç†è¡¨æ˜ï¼Œä»·æ ¼ä¸ä¾›ç»™é‡ä¹‹é—´å­˜åœ¨æ­£å‘å…³ç³»ï¼Œè¿™ä½“ç°ä¸ºå‘å³ä¸Šæ–¹å€¾æ–œçš„ä¾›ç»™æ›²çº¿ã€‚å½±å“ä¾›ç»™çš„å› ç´ åŒ…æ‹¬ç”Ÿäº§æˆæœ¬ï¼ˆåŸææ–™ä»·æ ¼ã€å·¥èµ„æ°´å¹³ç­‰ï¼‰ã€æŠ€æœ¯æ°´å¹³ã€ç”Ÿäº§è€…æ•°é‡ä»¥åŠç”Ÿäº§è€…å¯¹æœªæ¥ä»·æ ¼çš„é¢„æœŸã€‚ä¾‹å¦‚ï¼ŒèŠ¯ç‰‡åˆ¶é€ æŠ€æœ¯çš„è¿›æ­¥é™ä½äº†æ™ºèƒ½æ‰‹æœºç”Ÿäº§æˆæœ¬ï¼Œä½¿å‚å•†åœ¨ç›¸åŒä»·æ ¼ä¸‹æ„¿æ„ä¾›åº”æ›´å¤šäº§å“ï¼›è€ŒåŸæ²¹ä»·æ ¼ä¸Šæ¶¨é¢„æœŸå¯èƒ½å¯¼è‡´çŸ³æ²¹å…¬å¸å‡å°‘å½“å‰ä¾›åº”ï¼Œç­‰å¾…æ›´é«˜ä»·æ ¼ã€‚\nå½“ä¾›ç»™ä¸éœ€æ±‚åŠ›é‡ç›¸äº’ä½œç”¨æ—¶ï¼Œå¸‚åœºä¼šè¶‹å‘äºå‡è¡¡çŠ¶æ€â€”â€”ä¾›ç»™é‡ä¸éœ€æ±‚é‡ç›¸ç­‰æ—¶çš„ä»·æ ¼å’Œæ•°é‡ã€‚å‡è¡¡ä»·æ ¼æ˜¯å¸‚åœºè‡ªå‘è°ƒèŠ‚çš„ç»“æœï¼Œæ­¤æ—¶æ—¢æ— çŸ­ç¼ºä¹Ÿæ— è¿‡å‰©ã€‚ä»¥æˆ¿åœ°äº§å¸‚åœºä¸ºä¾‹ï¼Œå½“æ”¿åºœé™åˆ¶è´­æˆ¿èµ„æ ¼å¯¼è‡´éœ€æ±‚å‡å°‘æ—¶ï¼Œéœ€æ±‚æ›²çº¿å·¦ç§»ï¼Œå‡è¡¡ä»·æ ¼å’Œäº¤æ˜“é‡éƒ½ä¼šä¸‹é™ï¼›è€Œå»ºç­‘æˆæœ¬ä¸Šå‡ä½¿ä¾›ç»™æ›²çº¿å·¦ç§»ï¼Œå°†å¯¼è‡´ä»·æ ¼ä¸Šå‡ä½†äº¤æ˜“é‡å‡å°‘ã€‚2022å¹´å…¨çƒèŠ¯ç‰‡çŸ­ç¼ºå°±æ˜¯å…¸å‹éå‡è¡¡çŠ¶æ€ï¼šç–«æƒ…åéœ€æ±‚æ¿€å¢è€Œä¾›ç»™å—é™ï¼Œå¯¼è‡´èŠ¯ç‰‡ä»·æ ¼é£™å‡ï¼Œç›´è‡³2023å¹´ä¾›éœ€é€æ¸æ¢å¤å¹³è¡¡ã€‚\nä»·æ ¼å¼¹æ€§è¡¡é‡ä¾›éœ€å¯¹ä»·æ ¼å˜åŠ¨çš„æ•æ„Ÿç¨‹åº¦ï¼Œå¯¹ä¼ä¸šå’Œæ”¿ç­–åˆ¶å®šè€…è‡³å…³é‡è¦ã€‚éœ€æ±‚ä»·æ ¼å¼¹æ€§å–å†³äºå•†å“å¿…è¦æ€§ã€æ›¿ä»£å“å¯è·å¾—æ€§ã€æ¶ˆè´¹å æ”¶å…¥æ¯”ä¾‹ä»¥åŠæ—¶é—´è·¨åº¦ã€‚ç”Ÿæ´»å¿…éœ€å“ï¼ˆå¦‚é£Ÿç›ã€è¯å“ï¼‰é€šå¸¸ç¼ºä¹å¼¹æ€§ï¼Œè€Œå¥¢ä¾ˆå“ï¼ˆå¦‚é«˜ç«¯æ—…æ¸¸ï¼‰å¼¹æ€§è¾ƒå¤§ã€‚ä¼ä¸šåˆ©ç”¨å¼¹æ€§ç†è®ºåˆ¶å®šå®šä»·ç­–ç•¥ï¼šå¼¹æ€§å°çš„å•†å“å¯é€‚å½“æä»·å¢åŠ æ”¶ç›Šï¼Œè€Œå¼¹æ€§å¤§çš„å•†å“åˆ™å¯èƒ½é€šè¿‡é™ä»·æ‰©å¤§å¸‚åœºä»½é¢ã€‚æ”¿åºœå¾ç¨æ—¶ä¹Ÿä¼šè€ƒè™‘å¼¹æ€§â€”â€”å¯¹é¦™çƒŸç­‰ç¼ºä¹å¼¹æ€§çš„å•†å“å¾ç¨ï¼Œæ—¢èƒ½å¢åŠ è´¢æ”¿æ”¶å…¥åˆä¸ä¼šå¤§å¹…å‡å°‘é”€é‡ã€‚\nä¾›ç»™ä¸éœ€æ±‚æ¨¡å‹çš„å®é™…åº”ç”¨å¹¿æ³›å­˜åœ¨äºæ”¿åºœæ”¿ç­–åˆ†æä¸­ã€‚ä»·æ ¼ç®¡åˆ¶ï¼ˆå¦‚æœ€é«˜é™ä»·å’Œæœ€ä½é™ä»·ï¼‰ä¼šå¹²æ‰°å¸‚åœºå‡è¡¡ï¼Œå¯¼è‡´éæ•ˆç‡ã€‚ç§Ÿé‡‘ç®¡åˆ¶å¯èƒ½é€ æˆç§Ÿæˆ¿çŸ­ç¼ºï¼Œè€Œå†œäº§å“æœ€ä½ä¿æŠ¤ä»·åˆ™å¯èƒ½å¯¼è‡´è¿‡å‰©åº“å­˜ã€‚ç¨æ”¶è´Ÿæ‹…çš„å®é™…åˆ†é…ä¹Ÿå–å†³äºä¾›éœ€å¼¹æ€§ï¼šå¼¹æ€§è¾ƒå°çš„ä¸€æ–¹æ‰¿æ‹…æ›´å¤šç¨è´Ÿã€‚ä¾‹å¦‚ï¼ŒçƒŸè‰ç¨ä¸»è¦ç”±æ¶ˆè´¹è€…æ‰¿æ‹…ï¼Œå› ä¸ºå¸çƒŸè€…å¯¹é¦™çƒŸçš„éœ€æ±‚ç›¸å¯¹ç¼ºä¹å¼¹æ€§ï¼›è€Œé’ˆå¯¹æ—…æ¸¸æœåŠ¡çš„ç¨æ”¶åˆ™æ›´å¤šç”±ä¾›ç»™æ–¹æ‰¿æ‹…ï¼Œå› ä¸ºæ¶ˆè´¹è€…å¯ä»¥è½»æ˜“é€‰æ‹©ä¸æ—…æ¸¸æˆ–å»å…¶ä»–åœ°æ–¹ã€‚\nè¡¨ï¼šå½±å“éœ€æ±‚ä¸ä¾›ç»™çš„å› ç´ æ¯”è¾ƒ\nç±»åˆ« éœ€æ±‚å½±å“å› ç´  ä¾›ç»™å½±å“å› ç´  ä»·æ ¼å› ç´  å•†å“è‡ªèº«ä»·æ ¼ï¼ˆéœ€æ±‚å®šç†ï¼‰ å•†å“è‡ªèº«ä»·æ ¼ï¼ˆä¾›ç»™å®šç†ï¼‰ éä»·æ ¼å› ç´  æ¶ˆè´¹è€…æ”¶å…¥ã€ç›¸å…³å•†å“ä»·æ ¼ã€åå¥½ã€é¢„æœŸã€ä¹°å®¶æ•°é‡ ç”Ÿäº§æˆæœ¬ã€æŠ€æœ¯æ°´å¹³ã€å–å®¶æ•°é‡ã€ç”Ÿäº§è€…é¢„æœŸã€è‡ªç„¶æ¡ä»¶ å¼¹æ€§å†³å®šå› ç´  æ›¿ä»£å“å¯è·å¾—æ€§ã€å•†å“æ€§è´¨ï¼ˆå¿…éœ€å“/å¥¢ä¾ˆå“ï¼‰ã€æ¶ˆè´¹å æ¯”ã€æ—¶é—´è·¨åº¦ ç”Ÿäº§èƒ½åŠ›è°ƒæ•´éš¾åº¦ã€æ—¶é—´è·¨åº¦ã€åº“å­˜æ°´å¹³ã€ç”Ÿäº§è¦ç´ æµåŠ¨æ€§ graph TD subgraph å¸‚åœºå‡è¡¡ S[ä¾›ç»™æ›²çº¿] --\u003e|ä»·æ ¼â†‘ ä¾›ç»™é‡â†‘| E(å‡è¡¡ç‚¹) D[éœ€æ±‚æ›²çº¿] --\u003e|ä»·æ ¼â†‘ éœ€æ±‚é‡â†“| E end E --\u003e P[å‡è¡¡ä»·æ ¼ P*] E --\u003e Q[å‡è¡¡æ•°é‡ Q*] P -.-\u003e|ä»·æ ¼è°ƒèŠ‚| åŠ¨æ€[å¸‚åœºè°ƒèŠ‚æœºåˆ¶] subgraph åŠ¨æ€[å¸‚åœºè°ƒèŠ‚æœºåˆ¶] é«˜ä»·[ä»·æ ¼è¿‡é«˜] --\u003e è¿‡å‰©[ä¾›è¿‡äºæ±‚] --\u003e é™ä»·[ä»·æ ¼â†“] --\u003e E ä½ä»·[ä»·æ ¼è¿‡ä½] --\u003e çŸ­ç¼º[ä¾›ä¸åº”æ±‚] --\u003e æ¶¨ä»·[ä»·æ ¼â†‘] --\u003e E end class S,ä¾›ç»™æ›²çº¿ supply class D,éœ€æ±‚æ›²çº¿ demand class E,å‡è¡¡ç‚¹ equilibrium class P,Q keynode classDef supply fill:#f0f4ff,stroke:#4a90e2 classDef demand fill:#fff0f0,stroke:#eb4d4b classDef equilibrium fill:#f8f9fa,stroke:#2ecc71,stroke-width:2px classDef keynode fill:#eaf7ed,stroke:#27ae60 æ¶ˆè´¹è€…è¡Œä¸ºç†è®º linkæ¶ˆè´¹è€…é€‰æ‹©ç†è®ºæ­ç¤ºäº†ä¸ªäººå¦‚ä½•åœ¨æœ‰é™æ”¶å…¥çš„çº¦æŸä¸‹åšå‡ºæœ€ä¼˜è´­ä¹°å†³ç­–ï¼Œä»¥å®ç°æ»¡è¶³æ„Ÿæœ€å¤§åŒ–ã€‚è¿™ä¸€ç†è®ºçš„æ ¸å¿ƒå‡è®¾æ˜¯æ¶ˆè´¹è€…æ˜¯ç†æ€§çš„ï¼Œä»–ä»¬ä¼šç³»ç»Ÿæ€§åœ°é€‰æ‹©èƒ½å¸¦æ¥æœ€å¤§æ•ˆç”¨çš„å•†å“ç»„åˆã€‚æ•ˆç”¨ï¼ˆUtilityï¼‰æ˜¯è¡¡é‡æ¶ˆè´¹è€…ä»å•†å“æˆ–æœåŠ¡ä¸­è·å¾—æ»¡è¶³ç¨‹åº¦çš„æŠ½è±¡æ¦‚å¿µï¼Œå¯åˆ†ä¸ºåŸºæ•°æ•ˆç”¨ï¼ˆå¯è®¡é‡ï¼‰å’Œåºæ•°æ•ˆç”¨ï¼ˆå¯æ’åºï¼‰ä¸¤ç§ç†è®ºã€‚è™½ç„¶æˆ‘ä»¬æ— æ³•ç²¾ç¡®æµ‹é‡æ•ˆç”¨å€¼ï¼Œä½†è¿™ä¸€æ¦‚å¿µå¸®åŠ©æˆ‘ä»¬ç†è§£æ¶ˆè´¹è€…åå¥½å’Œé€‰æ‹©è¡Œä¸ºã€‚\n",
                content: "æ›¼æ˜†çš„ã€Šç»æµå­¦åŸç†ã€‹ä½œä¸ºç»æµå­¦é¢†åŸŸçš„ç»å…¸æ•™æï¼Œä»¥å…¶æ¸…æ™°çš„é€»è¾‘æ¡†æ¶å’Œç”ŸåŠ¨çš„ç°å®æ¡ˆä¾‹ï¼Œä¸ºæ— æ•°ç»æµå­¦å­¦ä¹ è€…æ‰“å¼€äº†å¾®è§‚ç»æµå­¦çš„å¤§é—¨ã€‚æœ¬æ–‡å°†ä»¥æ›¼æ˜†çš„å¾®è§‚ç»æµå­¦åˆ†å†Œä¸ºåŸºç¡€ï¼Œç³»ç»Ÿæ¢³ç†å¾®è§‚ç»æµå­¦çš„æ ¸å¿ƒæ¦‚å¿µä¸åŸç†ï¼Œä»ç»æµå­¦åå¤§åŸç†è¿™ä¸€åŸºç¡€æ¡†æ¶å‡ºå‘ï¼Œé€æ­¥æ·±å…¥åˆ°å¸‚åœºè¿è¡Œæœºåˆ¶ã€æ¶ˆè´¹è€…ä¸ç”Ÿäº§è€…è¡Œä¸ºåˆ†æã€ä¸åŒå¸‚åœºç»“æ„ä¸‹çš„ä¼ä¸šå†³ç­–ï¼Œä»¥åŠå¸‚åœºå¤±çµä¸æ”¿åºœå¹²é¢„ç­‰é‡è¦è®®é¢˜ã€‚æ¯ä¸ªéƒ¨åˆ†éƒ½å°†ç»“åˆç°å®æ¡ˆä¾‹è¿›è¡Œé˜é‡Šï¼Œå¸®åŠ©è¯»è€…ç†è§£è¿™äº›æŠ½è±¡ç†è®ºå¦‚ä½•è§£é‡Šæˆ‘ä»¬æ—¥å¸¸ç”Ÿæ´»ä¸­çš„ç»æµç°è±¡ã€‚é€šè¿‡è¿™ç¯‡æ€»ç»“ï¼Œè¯»è€…ä¸ä»…èƒ½å¤ŸæŒæ¡å¾®è§‚ç»æµå­¦çš„åŸºç¡€çŸ¥è¯†ä½“ç³»ï¼Œè¿˜èƒ½å­¦ä¼šåƒç»æµå­¦å®¶ä¸€æ ·æ€è€ƒç°å®ä¸–ç•Œä¸­çš„èµ„æºé…ç½®é—®é¢˜ã€‚\nç»æµå­¦åå¤§åŸç†ä¸åŸºç¡€æ¦‚å¿µ linkç»æµå­¦ä½œä¸ºä¸€é—¨ç ”ç©¶ç¨€ç¼ºèµ„æºé…ç½®çš„ç¤¾ä¼šç§‘å­¦ï¼Œå…¶æ ¸å¿ƒé—®é¢˜æºäºä¸€ä¸ªåŸºæœ¬äº‹å®ï¼šç¤¾ä¼šèµ„æºæ˜¯æœ‰é™çš„ï¼Œè€Œäººç±»æ¬²æœ›æ˜¯æ— é™çš„ã€‚æ›¼æ˜†åœ¨ã€Šç»æµå­¦åŸç†ã€‹å¼€ç¯‡å³æå‡ºäº†è´¯ç©¿å…¨ä¹¦çš„\"ç»æµå­¦åå¤§åŸç†\"ï¼Œè¿™äº›åŸç†ä¸ºæˆ‘ä»¬ç†è§£ä¸ªä½“å†³ç­–ã€å¸‚åœºè¿è¡Œå’Œæ•´ä½“ç»æµæä¾›äº†åŸºæœ¬æ¡†æ¶ã€‚ç¨€ç¼ºæ€§ï¼ˆscarcityï¼‰æ˜¯ç»æµå­¦ç ”ç©¶çš„å‡ºå‘ç‚¹ï¼Œå®ƒæŒ‡ç¤¾ä¼šæ‹¥æœ‰çš„èµ„æºæœ‰é™ï¼Œæ— æ³•ç”Ÿäº§äººä»¬å¸Œæœ›æ‹¥æœ‰çš„æ‰€æœ‰ç‰©å“ä¸åŠ³åŠ¡ã€‚æ­£æ˜¯è¿™ç§ç¨€ç¼ºæ€§çš„å­˜åœ¨ï¼Œä½¿å¾—äººä»¬å¿…é¡»åšå‡ºé€‰æ‹©ï¼Œä»è€Œäº§ç”Ÿäº†ç»æµå­¦ç ”ç©¶çš„ä¸‰ä¸ªåŸºæœ¬é—®é¢˜ï¼šç”Ÿäº§ä»€ä¹ˆã€å¦‚ä½•ç”Ÿäº§å’Œä¸ºè°ç”Ÿäº§ã€‚\næ›¼æ˜†å°†åå¤§åŸç†åˆ†ä¸ºä¸‰ç»„ï¼Œåˆ†åˆ«å¯¹åº”ä¸ªäººå†³ç­–ã€äººä»¬ä¹‹é—´çš„äº¤æ˜“ä»¥åŠæ•´ä½“ç»æµè¿è¡Œã€‚ç¬¬ä¸€ç»„åŸç†å…³äºä¸ªäººå¦‚ä½•åšå‡ºå†³ç­–ï¼šäººä»¬é¢ä¸´æƒè¡¡å–èˆï¼ˆåŸç†ä¸€ï¼‰ï¼›æŸç§ä¸œè¥¿çš„æˆæœ¬æ˜¯ä¸ºäº†å¾—åˆ°å®ƒæ‰€æ”¾å¼ƒçš„ä¸œè¥¿ï¼Œå³æœºä¼šæˆæœ¬ï¼ˆåŸç†äºŒï¼‰ï¼›ç†æ€§äººè€ƒè™‘è¾¹é™…é‡ï¼ˆåŸç†ä¸‰ï¼‰ï¼›äººä»¬ä¼šå¯¹æ¿€åŠ±åšå‡ºååº”ï¼ˆåŸç†å››ï¼‰ã€‚ä»¥å¤§å­¦ç”Ÿé€‰æ‹©å­¦ä¹ æ—¶é—´ä¸ºä¾‹ï¼Œåœ¨è€ƒè¯•å‰å¤•ï¼Œå­¦ç”Ÿéœ€è¦åœ¨å¤ä¹ å’Œå¨±ä¹ä¹‹é—´åšå‡ºæƒè¡¡ï¼ˆåŸç†ä¸€ï¼‰ï¼›é€‰æ‹©å¤šç©ä¸€å°æ—¶æ¸¸æˆçš„æˆæœ¬æ˜¯å°‘äº†ä¸€å°æ—¶å¤ä¹ å¯èƒ½å¯¼è‡´çš„æˆç»©ä¸‹é™ï¼ˆåŸç†äºŒï¼‰ï¼›ç†æ€§çš„å­¦ç”Ÿä¼šè€ƒè™‘å¤šå¤ä¹ ä¸€å°æ—¶å¸¦æ¥çš„è¾¹é™…æ”¶ç›Šæ˜¯å¦å¤§äºè¾¹é™…æˆæœ¬ï¼ˆåŸç†ä¸‰ï¼‰ï¼›å¦‚æœæ•™æˆå®£å¸ƒè€ƒè¯•éš¾åº¦é™ä½ï¼Œå­¦ç”Ÿå¯èƒ½ä¼šå‡å°‘å¤ä¹ æ—¶é—´ï¼Œè¿™å°±æ˜¯å¯¹æ¿€åŠ±çš„ååº”ï¼ˆåŸç†å››ï¼‰ã€‚\nç¬¬äºŒç»„åŸç†æ¢è®¨äººä»¬ä¹‹é—´çš„ç›¸äº’äº¤æ˜“ï¼šè´¸æ˜“å¯ä»¥ä½¿æ¯ä¸ªäººçš„çŠ¶å†µéƒ½å˜å¾—æ›´å¥½ï¼ˆåŸç†äº”ï¼‰ï¼›å¸‚åœºé€šå¸¸æ˜¯ç»„ç»‡ç»æµæ´»åŠ¨çš„ä¸€ç§å¥½æ–¹æ³•ï¼ˆåŸç†å…­ï¼‰ï¼›æ”¿åºœæœ‰æ—¶å¯ä»¥æ”¹å–„å¸‚åœºç»“æœï¼ˆåŸç†ä¸ƒï¼‰ã€‚å›½é™…è´¸æ˜“çš„ä¾‹å­ç”ŸåŠ¨è¯´æ˜äº†è¿™äº›åŸç†ï¼šä¸­å›½ç”Ÿäº§æœè£…æœ‰æ¯”è¾ƒä¼˜åŠ¿ï¼Œç¾å›½ç”Ÿäº§é£æœºæœ‰æ¯”è¾ƒä¼˜åŠ¿ï¼Œä¸¤å›½é€šè¿‡è´¸æ˜“éƒ½èƒ½ä»¥æ›´ä½çš„æˆæœ¬è·å¾—å¯¹æ–¹çš„äº§å“ï¼ˆåŸç†äº”ï¼‰ï¼›å¸‚åœºä»·æ ¼æœºåˆ¶åƒä¸€åª\"çœ‹ä¸è§çš„æ‰‹\"å¼•å¯¼èµ„æºæµå‘æœ€æœ‰æ•ˆç‡çš„ç”¨é€”ï¼ˆåŸç†å…­ï¼‰ï¼›ä½†å½“å­˜åœ¨æ±¡æŸ“ç­‰å¤–éƒ¨æ€§æ—¶ï¼Œæ”¿åºœé€šè¿‡ç¯ä¿æ³•è§„å¯ä»¥æ”¹å–„å¸‚åœºç»“æœï¼ˆåŸç†ä¸ƒï¼‰ã€‚\nç¬¬ä¸‰ç»„åŸç†æ¶‰åŠæ•´ä½“ç»æµè¿è¡Œï¼šä¸€å›½çš„ç”Ÿæ´»æ°´å¹³å–å†³äºå®ƒç”Ÿäº§ç‰©å“ä¸åŠ³åŠ¡çš„èƒ½åŠ›å³ç”Ÿäº§ç‡ï¼ˆåŸç†å…«ï¼‰ï¼›è´§å¸å‘è¡Œè¿‡å¤šå¯¼è‡´ç‰©ä»·ä¸Šæ¶¨ï¼ˆåŸç†ä¹ï¼‰ï¼›ç¤¾ä¼šé¢ä¸´é€šè´§è†¨èƒ€ä¸å¤±ä¸šä¹‹é—´çš„çŸ­æœŸæƒè¡¡å–èˆï¼ˆåŸç†åï¼‰ã€‚äºŒæˆ˜åæ—¥æœ¬å’Œå¾·å›½çš„ç»æµå¥‡è¿¹å±•ç¤ºäº†ç”Ÿäº§ç‡å¯¹ç”Ÿæ´»æ°´å¹³çš„å…³é”®ä½œç”¨ï¼ˆåŸç†å…«ï¼‰ï¼›æ´¥å·´å¸ƒéŸ¦å’Œå§”å†…ç‘æ‹‰çš„æ¶æ€§é€šè´§è†¨èƒ€å°è¯äº†è´§å¸è¶…å‘çš„åæœï¼ˆåŸç†ä¹ï¼‰ï¼›è€Œå„å›½å¤®è¡Œåœ¨ç»æµå¢é•¿ä¸ç‰©ä»·ç¨³å®šé—´çš„æ”¿ç­–æƒè¡¡åˆ™ä½“ç°äº†è²åˆ©æ™®æ–¯æ›²çº¿çš„çŸ­æœŸäº¤æ›¿å…³ç³»ï¼ˆåŸç†åï¼‰ã€‚\nç†è§£è¿™äº›ç»æµå­¦åŸç†ï¼Œæœ‰åŠ©äºæˆ‘ä»¬åŸ¹å…»ç»æµå­¦æ€ç»´æ–¹å¼ã€‚ç»æµå­¦å®¶ä½¿ç”¨æ¨¡å‹ï¼ˆå¦‚å¾ªç¯æµå‘å›¾ã€ç”Ÿäº§å¯èƒ½æ€§è¾¹ç•Œï¼‰ç®€åŒ–å¤æ‚ç°å®ï¼ŒåŒºåˆ†å®è¯è¡¨è¿°ï¼ˆæè¿°\"æ˜¯ä»€ä¹ˆ\"ï¼‰ä¸è§„èŒƒè¡¨è¿°ï¼ˆä¸»å¼ \"åº”è¯¥æ˜¯ä»€ä¹ˆ\"ï¼‰ï¼Œå¹¶é€šè¿‡ç§‘å­¦æ–¹æ³•åˆ†æç»æµç°è±¡ã€‚ä¾‹å¦‚ï¼Œç”Ÿäº§å¯èƒ½æ€§è¾¹ç•Œå±•ç¤ºäº†åœ¨èµ„æºå’ŒæŠ€æœ¯ç»™å®šæƒ…å†µä¸‹ï¼Œä¸€ä¸ªç»æµä½“èƒ½ç”Ÿäº§çš„ä¸¤ç§äº§å“çš„å„ç§ç»„åˆï¼Œä»¥åŠæœºä¼šæˆæœ¬éšäº§é‡å˜åŒ–çš„å…³ç³»ã€‚å‡è®¾ä¸€ä¸ªå›½å®¶åªèƒ½ç”Ÿäº§æ±½è½¦å’Œé£Ÿå“ï¼Œå¤šç”Ÿäº§ä¸€è¾†æ±½è½¦æ„å‘³ç€å¿…é¡»æ”¾å¼ƒä¸€å®šæ•°é‡çš„é£Ÿå“ç”Ÿäº§ï¼Œè¿™ç§æƒè¡¡å–èˆå…³ç³»æ­£æ˜¯ç»æµå­¦ç ”ç©¶çš„æ ¸å¿ƒã€‚\nmindmap root((ç»æµå­¦åŸç†)) ä¸ªäººå†³ç­– åŸç†1: æƒè¡¡å–èˆ åŸç†2: æœºä¼šæˆæœ¬ åŸç†3: è¾¹é™…å†³ç­– åŸç†4: æ¿€åŠ±ååº” äº¤äº’ä½œç”¨ åŸç†5: è´¸æ˜“å¢ç›Š åŸç†6: å¸‚åœºæ•ˆç‡ åŸç†7: æ”¿åºœèŒèƒ½ æ•´ä½“ç»æµ åŸç†8: ç”Ÿäº§ç‡ åŸç†9: é€šè´§è†¨èƒ€ åŸç†10: å¤±ä¸šé€šèƒ€äº¤æ›¿ å¸‚åœºè¿è¡Œæœºåˆ¶ï¼šä¾›ç»™ä¸éœ€æ±‚ linkä¾›ç»™ä¸éœ€æ±‚æ¨¡å‹æ˜¯å¾®è§‚ç»æµå­¦åˆ†æå¸‚åœºè¿è¡Œçš„æ ¸å¿ƒå·¥å…·ï¼Œè¢«ç§°ä¸º\"ç»æµå­¦å®¶çš„å·¥å…·ç®±\"ã€‚è¿™ä¸€æ¨¡å‹è§£é‡Šäº†èµ„æºå¦‚ä½•é€šè¿‡ä»·æ ¼æœºåˆ¶åœ¨å¸‚åœºç»æµä¸­è¿›è¡Œé…ç½®ã€‚å¸‚åœºéœ€æ±‚æŒ‡çš„æ˜¯åœ¨ä¸€å®šæ—¶æœŸå†…ï¼Œæ¶ˆè´¹è€…åœ¨å„ç§ä»·æ ¼æ°´å¹³ä¸‹æ„¿æ„ä¸”èƒ½å¤Ÿè´­ä¹°çš„å•†å“æˆ–æœåŠ¡æ•°é‡ã€‚æ ¹æ®éœ€æ±‚å®šç†ï¼Œåœ¨å…¶ä»–æ¡ä»¶ä¸å˜çš„æƒ…å†µä¸‹ï¼Œå•†å“ä»·æ ¼ä¸Šå‡ä¼šå¯¼è‡´éœ€æ±‚é‡å‡å°‘ï¼Œåä¹‹äº¦ç„¶ã€‚è¿™ç§åå‘å…³ç³»å¯ä»¥ç”¨éœ€æ±‚æ›²çº¿ç›´è§‚è¡¨ç¤ºï¼šä¸€æ¡ä»å·¦ä¸Šæ–¹å‘å³ä¸‹æ–¹å€¾æ–œçš„æ›²çº¿ã€‚ä¾‹å¦‚ï¼Œå½“æ™ºèƒ½æ‰‹æœºä»·æ ¼ä»5000å…ƒé™è‡³3000å…ƒæ—¶ï¼Œå¸‚åœºä¸Šæ„¿æ„è´­ä¹°çš„æ¶ˆè´¹è€…æ•°é‡é€šå¸¸ä¼šå¢åŠ ã€‚\nå½±å“éœ€æ±‚çš„å› ç´ è¿œä¸æ­¢ä»·æ ¼ï¼Œè¿˜åŒ…æ‹¬æ¶ˆè´¹è€…åå¥½ã€æ”¶å…¥æ°´å¹³ã€ç›¸å…³å•†å“ä»·æ ¼ï¼ˆæ›¿ä»£å“å’Œäº’è¡¥å“ï¼‰ä»¥åŠæ¶ˆè´¹è€…é¢„æœŸç­‰ã€‚æ”¶å…¥å¢åŠ ä¼šæé«˜å¯¹æ­£å¸¸å•†å“ï¼ˆå¦‚ä¼˜è´¨è‚‰ç±»ã€å“ç‰Œæœè£…ï¼‰çš„éœ€æ±‚ï¼Œä½†å‡å°‘å¯¹ä½æ¡£å•†å“ï¼ˆå¦‚æ–¹ä¾¿é¢ã€å…¬å…±äº¤é€šï¼‰çš„éœ€æ±‚ã€‚æ›¿ä»£å“ï¼ˆå¦‚èŒ¶å¶ä¸å’–å•¡ï¼‰å’Œäº’è¡¥å“ï¼ˆå¦‚æ‰‹æœºä¸æµé‡å¥—é¤ï¼‰çš„ä»·æ ¼å˜åŠ¨ä¹Ÿä¼šå½±å“éœ€æ±‚ï¼šå’–å•¡ä»·æ ¼ä¸Šæ¶¨å¯èƒ½å¯¼è‡´èŒ¶å¶éœ€æ±‚å¢åŠ ï¼›è€Œæµé‡è´¹ä¸‹é™å¯èƒ½æå‡æ™ºèƒ½æ‰‹æœºé”€é‡ã€‚2020å¹´ç–«æƒ…æœŸé—´ï¼Œå±…å®¶åŠå…¬å¯¼è‡´ç¬”è®°æœ¬ç”µè„‘éœ€æ±‚æ¿€å¢ï¼Œå°±æ˜¯ä¸€ä¸ªç°å®æ¡ˆä¾‹ã€‚\nå¸‚åœºä¾›ç»™åˆ™æŒ‡ç”Ÿäº§è€…åœ¨å„ç§ä»·æ ¼æ°´å¹³ä¸‹æ„¿æ„ä¸”èƒ½å¤Ÿæä¾›çš„å•†å“æˆ–æœåŠ¡æ•°é‡ã€‚ä¾›ç»™å®šç†è¡¨æ˜ï¼Œä»·æ ¼ä¸ä¾›ç»™é‡ä¹‹é—´å­˜åœ¨æ­£å‘å…³ç³»ï¼Œè¿™ä½“ç°ä¸ºå‘å³ä¸Šæ–¹å€¾æ–œçš„ä¾›ç»™æ›²çº¿ã€‚å½±å“ä¾›ç»™çš„å› ç´ åŒ…æ‹¬ç”Ÿäº§æˆæœ¬ï¼ˆåŸææ–™ä»·æ ¼ã€å·¥èµ„æ°´å¹³ç­‰ï¼‰ã€æŠ€æœ¯æ°´å¹³ã€ç”Ÿäº§è€…æ•°é‡ä»¥åŠç”Ÿäº§è€…å¯¹æœªæ¥ä»·æ ¼çš„é¢„æœŸã€‚ä¾‹å¦‚ï¼ŒèŠ¯ç‰‡åˆ¶é€ æŠ€æœ¯çš„è¿›æ­¥é™ä½äº†æ™ºèƒ½æ‰‹æœºç”Ÿäº§æˆæœ¬ï¼Œä½¿å‚å•†åœ¨ç›¸åŒä»·æ ¼ä¸‹æ„¿æ„ä¾›åº”æ›´å¤šäº§å“ï¼›è€ŒåŸæ²¹ä»·æ ¼ä¸Šæ¶¨é¢„æœŸå¯èƒ½å¯¼è‡´çŸ³æ²¹å…¬å¸å‡å°‘å½“å‰ä¾›åº”ï¼Œç­‰å¾…æ›´é«˜ä»·æ ¼ã€‚\nå½“ä¾›ç»™ä¸éœ€æ±‚åŠ›é‡ç›¸äº’ä½œç”¨æ—¶ï¼Œå¸‚åœºä¼šè¶‹å‘äºå‡è¡¡çŠ¶æ€â€”â€”ä¾›ç»™é‡ä¸éœ€æ±‚é‡ç›¸ç­‰æ—¶çš„ä»·æ ¼å’Œæ•°é‡ã€‚å‡è¡¡ä»·æ ¼æ˜¯å¸‚åœºè‡ªå‘è°ƒèŠ‚çš„ç»“æœï¼Œæ­¤æ—¶æ—¢æ— çŸ­ç¼ºä¹Ÿæ— è¿‡å‰©ã€‚ä»¥æˆ¿åœ°äº§å¸‚åœºä¸ºä¾‹ï¼Œå½“æ”¿åºœé™åˆ¶è´­æˆ¿èµ„æ ¼å¯¼è‡´éœ€æ±‚å‡å°‘æ—¶ï¼Œéœ€æ±‚æ›²çº¿å·¦ç§»ï¼Œå‡è¡¡ä»·æ ¼å’Œäº¤æ˜“é‡éƒ½ä¼šä¸‹é™ï¼›è€Œå»ºç­‘æˆæœ¬ä¸Šå‡ä½¿ä¾›ç»™æ›²çº¿å·¦ç§»ï¼Œå°†å¯¼è‡´ä»·æ ¼ä¸Šå‡ä½†äº¤æ˜“é‡å‡å°‘ã€‚2022å¹´å…¨çƒèŠ¯ç‰‡çŸ­ç¼ºå°±æ˜¯å…¸å‹éå‡è¡¡çŠ¶æ€ï¼šç–«æƒ…åéœ€æ±‚æ¿€å¢è€Œä¾›ç»™å—é™ï¼Œå¯¼è‡´èŠ¯ç‰‡ä»·æ ¼é£™å‡ï¼Œç›´è‡³2023å¹´ä¾›éœ€é€æ¸æ¢å¤å¹³è¡¡ã€‚\nä»·æ ¼å¼¹æ€§è¡¡é‡ä¾›éœ€å¯¹ä»·æ ¼å˜åŠ¨çš„æ•æ„Ÿç¨‹åº¦ï¼Œå¯¹ä¼ä¸šå’Œæ”¿ç­–åˆ¶å®šè€…è‡³å…³é‡è¦ã€‚éœ€æ±‚ä»·æ ¼å¼¹æ€§å–å†³äºå•†å“å¿…è¦æ€§ã€æ›¿ä»£å“å¯è·å¾—æ€§ã€æ¶ˆè´¹å æ”¶å…¥æ¯”ä¾‹ä»¥åŠæ—¶é—´è·¨åº¦ã€‚ç”Ÿæ´»å¿…éœ€å“ï¼ˆå¦‚é£Ÿç›ã€è¯å“ï¼‰é€šå¸¸ç¼ºä¹å¼¹æ€§ï¼Œè€Œå¥¢ä¾ˆå“ï¼ˆå¦‚é«˜ç«¯æ—…æ¸¸ï¼‰å¼¹æ€§è¾ƒå¤§ã€‚ä¼ä¸šåˆ©ç”¨å¼¹æ€§ç†è®ºåˆ¶å®šå®šä»·ç­–ç•¥ï¼šå¼¹æ€§å°çš„å•†å“å¯é€‚å½“æä»·å¢åŠ æ”¶ç›Šï¼Œè€Œå¼¹æ€§å¤§çš„å•†å“åˆ™å¯èƒ½é€šè¿‡é™ä»·æ‰©å¤§å¸‚åœºä»½é¢ã€‚æ”¿åºœå¾ç¨æ—¶ä¹Ÿä¼šè€ƒè™‘å¼¹æ€§â€”â€”å¯¹é¦™çƒŸç­‰ç¼ºä¹å¼¹æ€§çš„å•†å“å¾ç¨ï¼Œæ—¢èƒ½å¢åŠ è´¢æ”¿æ”¶å…¥åˆä¸ä¼šå¤§å¹…å‡å°‘é”€é‡ã€‚\nä¾›ç»™ä¸éœ€æ±‚æ¨¡å‹çš„å®é™…åº”ç”¨å¹¿æ³›å­˜åœ¨äºæ”¿åºœæ”¿ç­–åˆ†æä¸­ã€‚ä»·æ ¼ç®¡åˆ¶ï¼ˆå¦‚æœ€é«˜é™ä»·å’Œæœ€ä½é™ä»·ï¼‰ä¼šå¹²æ‰°å¸‚åœºå‡è¡¡ï¼Œå¯¼è‡´éæ•ˆç‡ã€‚ç§Ÿé‡‘ç®¡åˆ¶å¯èƒ½é€ æˆç§Ÿæˆ¿çŸ­ç¼ºï¼Œè€Œå†œäº§å“æœ€ä½ä¿æŠ¤ä»·åˆ™å¯èƒ½å¯¼è‡´è¿‡å‰©åº“å­˜ã€‚ç¨æ”¶è´Ÿæ‹…çš„å®é™…åˆ†é…ä¹Ÿå–å†³äºä¾›éœ€å¼¹æ€§ï¼šå¼¹æ€§è¾ƒå°çš„ä¸€æ–¹æ‰¿æ‹…æ›´å¤šç¨è´Ÿã€‚ä¾‹å¦‚ï¼ŒçƒŸè‰ç¨ä¸»è¦ç”±æ¶ˆè´¹è€…æ‰¿æ‹…ï¼Œå› ä¸ºå¸çƒŸè€…å¯¹é¦™çƒŸçš„éœ€æ±‚ç›¸å¯¹ç¼ºä¹å¼¹æ€§ï¼›è€Œé’ˆå¯¹æ—…æ¸¸æœåŠ¡çš„ç¨æ”¶åˆ™æ›´å¤šç”±ä¾›ç»™æ–¹æ‰¿æ‹…ï¼Œå› ä¸ºæ¶ˆè´¹è€…å¯ä»¥è½»æ˜“é€‰æ‹©ä¸æ—…æ¸¸æˆ–å»å…¶ä»–åœ°æ–¹ã€‚\nè¡¨ï¼šå½±å“éœ€æ±‚ä¸ä¾›ç»™çš„å› ç´ æ¯”è¾ƒ\nç±»åˆ« éœ€æ±‚å½±å“å› ç´  ä¾›ç»™å½±å“å› ç´  ä»·æ ¼å› ç´  å•†å“è‡ªèº«ä»·æ ¼ï¼ˆéœ€æ±‚å®šç†ï¼‰ å•†å“è‡ªèº«ä»·æ ¼ï¼ˆä¾›ç»™å®šç†ï¼‰ éä»·æ ¼å› ç´  æ¶ˆè´¹è€…æ”¶å…¥ã€ç›¸å…³å•†å“ä»·æ ¼ã€åå¥½ã€é¢„æœŸã€ä¹°å®¶æ•°é‡ ç”Ÿäº§æˆæœ¬ã€æŠ€æœ¯æ°´å¹³ã€å–å®¶æ•°é‡ã€ç”Ÿäº§è€…é¢„æœŸã€è‡ªç„¶æ¡ä»¶ å¼¹æ€§å†³å®šå› ç´  æ›¿ä»£å“å¯è·å¾—æ€§ã€å•†å“æ€§è´¨ï¼ˆå¿…éœ€å“/å¥¢ä¾ˆå“ï¼‰ã€æ¶ˆè´¹å æ¯”ã€æ—¶é—´è·¨åº¦ ç”Ÿäº§èƒ½åŠ›è°ƒæ•´éš¾åº¦ã€æ—¶é—´è·¨åº¦ã€åº“å­˜æ°´å¹³ã€ç”Ÿäº§è¦ç´ æµåŠ¨æ€§ graph TD subgraph å¸‚åœºå‡è¡¡ S[ä¾›ç»™æ›²çº¿] --\u003e|ä»·æ ¼â†‘ ä¾›ç»™é‡â†‘| E(å‡è¡¡ç‚¹) D[éœ€æ±‚æ›²çº¿] --\u003e|ä»·æ ¼â†‘ éœ€æ±‚é‡â†“| E end E --\u003e P[å‡è¡¡ä»·æ ¼ P*] E --\u003e Q[å‡è¡¡æ•°é‡ Q*] P -.-\u003e|ä»·æ ¼è°ƒèŠ‚| åŠ¨æ€[å¸‚åœºè°ƒèŠ‚æœºåˆ¶] subgraph åŠ¨æ€[å¸‚åœºè°ƒèŠ‚æœºåˆ¶] é«˜ä»·[ä»·æ ¼è¿‡é«˜] --\u003e è¿‡å‰©[ä¾›è¿‡äºæ±‚] --\u003e é™ä»·[ä»·æ ¼â†“] --\u003e E ä½ä»·[ä»·æ ¼è¿‡ä½] --\u003e çŸ­ç¼º[ä¾›ä¸åº”æ±‚] --\u003e æ¶¨ä»·[ä»·æ ¼â†‘] --\u003e E end class S,ä¾›ç»™æ›²çº¿ supply class D,éœ€æ±‚æ›²çº¿ demand class E,å‡è¡¡ç‚¹ equilibrium class P,Q keynode classDef supply fill:#f0f4ff,stroke:#4a90e2 classDef demand fill:#fff0f0,stroke:#eb4d4b classDef equilibrium fill:#f8f9fa,stroke:#2ecc71,stroke-width:2px classDef keynode fill:#eaf7ed,stroke:#27ae60 æ¶ˆè´¹è€…è¡Œä¸ºç†è®º linkæ¶ˆè´¹è€…é€‰æ‹©ç†è®ºæ­ç¤ºäº†ä¸ªäººå¦‚ä½•åœ¨æœ‰é™æ”¶å…¥çš„çº¦æŸä¸‹åšå‡ºæœ€ä¼˜è´­ä¹°å†³ç­–ï¼Œä»¥å®ç°æ»¡è¶³æ„Ÿæœ€å¤§åŒ–ã€‚è¿™ä¸€ç†è®ºçš„æ ¸å¿ƒå‡è®¾æ˜¯æ¶ˆè´¹è€…æ˜¯ç†æ€§çš„ï¼Œä»–ä»¬ä¼šç³»ç»Ÿæ€§åœ°é€‰æ‹©èƒ½å¸¦æ¥æœ€å¤§æ•ˆç”¨çš„å•†å“ç»„åˆã€‚æ•ˆç”¨ï¼ˆUtilityï¼‰æ˜¯è¡¡é‡æ¶ˆè´¹è€…ä»å•†å“æˆ–æœåŠ¡ä¸­è·å¾—æ»¡è¶³ç¨‹åº¦çš„æŠ½è±¡æ¦‚å¿µï¼Œå¯åˆ†ä¸ºåŸºæ•°æ•ˆç”¨ï¼ˆå¯è®¡é‡ï¼‰å’Œåºæ•°æ•ˆç”¨ï¼ˆå¯æ’åºï¼‰ä¸¤ç§ç†è®ºã€‚è™½ç„¶æˆ‘ä»¬æ— æ³•ç²¾ç¡®æµ‹é‡æ•ˆç”¨å€¼ï¼Œä½†è¿™ä¸€æ¦‚å¿µå¸®åŠ©æˆ‘ä»¬ç†è§£æ¶ˆè´¹è€…åå¥½å’Œé€‰æ‹©è¡Œä¸ºã€‚\nè¾¹é™…æ•ˆç”¨é€’å‡è§„å¾‹æ˜¯æ¶ˆè´¹è€…è¡Œä¸ºçš„é‡è¦åŸºç¡€ï¼Œå®ƒæŒ‡å‡ºéšç€å¯¹æŸç§å•†å“æ¶ˆè´¹é‡çš„å¢åŠ ï¼Œæ¯æ–°å¢ä¸€å•ä½æ¶ˆè´¹å¸¦æ¥çš„æ•ˆç”¨å¢é‡ï¼ˆè¾¹é™…æ•ˆç”¨ï¼‰ä¼šé€æ¸å‡å°‘ã€‚ä¾‹å¦‚ï¼Œç‚ç‚å¤æ—¥å–ç¬¬ä¸€ç“¶å†°é•‡é¥®æ–™å¸¦æ¥çš„æ»¡è¶³æ„Ÿæå¤§ï¼Œç¬¬äºŒç“¶çš„æ»¡è¶³æ„Ÿç¨å‡ï¼Œåˆ°ç¬¬ä¸‰ç“¶æ—¶å¯èƒ½å·²ç»æ²¡ä»€ä¹ˆé¢å¤–æ•ˆç”¨ï¼Œç”šè‡³å¯èƒ½å› è¿‡é‡è€Œäº§ç”Ÿè´Ÿæ•ˆç”¨ã€‚è¿™ä¸€è§„å¾‹è§£é‡Šäº†ä¸ºä»€ä¹ˆå¤šæ ·åŒ–æ¶ˆè´¹é€šå¸¸æ¯”å•ä¸€æ¶ˆè´¹æ›´ä¼˜ï¼Œä¹Ÿè¯´æ˜äº†éœ€æ±‚æ›²çº¿ä¸ºä½•å‘ä¸‹å€¾æ–œâ€”â€”åªæœ‰ä»·æ ¼ä¸‹é™ï¼Œæ¶ˆè´¹è€…æ‰æ„¿æ„è´­ä¹°æ›´å¤šå•ä½å•†å“ã€‚\nåˆ†ææ¶ˆè´¹è€…é€‰æ‹©çš„æœ‰åŠ›å·¥å…·æ˜¯æ— å·®å¼‚æ›²çº¿ï¼Œå®ƒè¡¨ç¤ºç»™æ¶ˆè´¹è€…å¸¦æ¥ç›¸åŒæ»¡è¶³ç¨‹åº¦çš„ä¸åŒå•†å“ç»„åˆçš„è½¨è¿¹ã€‚æ— å·®å¼‚æ›²çº¿å…·æœ‰å››ä¸ªå…³é”®ç‰¹å¾ï¼šå‘ä¸‹å€¾æ–œï¼ˆè¦ä¿æŒæ•ˆç”¨ä¸å˜ï¼Œå‡å°‘ä¸€ç§å•†å“å¿…é¡»å¢åŠ å¦ä¸€ç§å•†å“ï¼‰ï¼›å‡¸å‘åŸç‚¹ï¼ˆåæ˜ è¾¹é™…æ›¿ä»£ç‡é€’å‡ï¼‰ï¼›äº’ä¸ç›¸äº¤ï¼›ç¦»åŸç‚¹è¶Šè¿œä»£è¡¨æ•ˆç”¨æ°´å¹³è¶Šé«˜ã€‚å‡è®¾ä¸€ä¸ªæ¶ˆè´¹è€…åªè´­ä¹°é£Ÿç‰©å’Œè¡£æœä¸¤ç±»å•†å“ï¼Œè¿æ¥æ‰€æœ‰ä»¤ä»–åŒæ ·æ»¡æ„çš„é£Ÿç‰©ä¸è¡£æœç»„åˆçš„ç‚¹ï¼Œå°±å½¢æˆäº†ä¸€æ¡æ— å·®å¼‚æ›²çº¿ã€‚è¾¹é™…æ›¿ä»£ç‡ï¼ˆMRSï¼‰åˆ™æ˜¯æ¶ˆè´¹è€…æ„¿æ„ç”¨ä¸€ç§å•†å“äº¤æ¢å¦ä¸€ç§å•†å“çš„æ¯”ç‡ï¼Œç­‰äºæ— å·®å¼‚æ›²çº¿æ–œç‡çš„ç»å¯¹å€¼ã€‚\næ¶ˆè´¹è€…çš„é€‰æ‹©ä¸ä»…å–å†³äºåå¥½ï¼Œè¿˜å—åˆ°é¢„ç®—çº¦æŸçš„é™åˆ¶ã€‚é¢„ç®—çº¿è¡¨ç¤ºåœ¨ç»™å®šæ”¶å…¥å’Œä»·æ ¼ä¸‹ï¼Œæ¶ˆè´¹è€…èƒ½å¤Ÿè´­ä¹°çš„æ‰€æœ‰å•†å“ç»„åˆã€‚é¢„ç®—çº¿çš„æ–œç‡ç­‰äºä¸¤ç§å•†å“çš„ä»·æ ¼æ¯”ï¼Œå…¶ä½ç½®å–å†³äºæ”¶å…¥æ°´å¹³â€”â€”æ”¶å…¥å¢åŠ ä½¿é¢„ç®—çº¿å¹³è¡Œå¤–ç§»ã€‚æ¶ˆè´¹è€…å‡è¡¡å‘ç”Ÿåœ¨é¢„ç®—çº¿ä¸æœ€é«˜å¯è¾¾çš„æ— å·®å¼‚æ›²çº¿ç›¸åˆ‡ä¹‹ç‚¹ï¼Œæ­¤æ—¶è¾¹é™…æ›¿ä»£ç‡ç­‰äºå•†å“ä»·æ ¼æ¯”ï¼Œå®ç°äº†æ•ˆç”¨æœ€å¤§åŒ–ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œå¤§å­¦ç”Ÿæ¯æœˆæœ‰2000å…ƒå¯æ”¯é…æ”¶å…¥ï¼Œç”¨äºè´­ä¹°é£Ÿç‰©ï¼ˆæ¯å•ä½10å…ƒï¼‰å’Œå¨±ä¹ï¼ˆæ¯æ¬¡100å…ƒï¼‰ï¼Œæœ€ä¼˜é€‰æ‹©å°±æ˜¯é¢„ç®—çº¿ä¸æ— å·®å¼‚æ›²çº¿çš„åˆ‡ç‚¹ç»„åˆã€‚\nä»æ¶ˆè´¹è€…å‡è¡¡ç†è®ºå¯ä»¥æ¨å¯¼å‡ºä¸ªäººéœ€æ±‚æ›²çº¿ã€‚å½“ä¸€ç§å•†å“ä»·æ ¼å˜åŒ–æ—¶ï¼Œé¢„ç®—çº¿æ—‹è½¬ï¼Œå½¢æˆæ–°çš„å‡è¡¡ç‚¹ï¼Œè¿æ¥è¿™äº›ç‚¹å°±å¾—åˆ°ä»·æ ¼-æ¶ˆè´¹æ›²çº¿ï¼Œè¿›è€Œè½¬åŒ–ä¸ºéœ€æ±‚æ›²çº¿ã€‚éœ€æ±‚æ›²çº¿å‘ä¸‹å€¾æ–œä¸ä»…åæ˜ äº†è¾¹é™…æ•ˆç”¨é€’å‡ï¼Œä¹ŸåŒ…å«äº†æ›¿ä»£æ•ˆåº”å’Œæ”¶å…¥æ•ˆåº”ã€‚å½“å•†å“ä»·æ ¼ä¸‹é™æ—¶ï¼Œä¸€æ–¹é¢å®ƒç›¸å¯¹äºå…¶ä»–å•†å“å˜å¾—æ›´ä¾¿å®œï¼ˆæ›¿ä»£æ•ˆåº”ä¿ƒä½¿å¢åŠ è´­ä¹°ï¼‰ï¼›å¦ä¸€æ–¹é¢æ¶ˆè´¹è€…çš„å®é™…è´­ä¹°åŠ›æé«˜ï¼ˆæ”¶å…¥æ•ˆåº”ä¹Ÿå¯èƒ½å¢åŠ è´­ä¹°ï¼Œæ­£å¸¸å•†å“ï¼‰æˆ–é™ä½ï¼ˆä½æ¡£å•†å“ï¼‰ã€‚\næ¶ˆè´¹è€…è¡Œä¸ºç†è®ºåœ¨å®é™…ç”Ÿæ´»ä¸­æœ‰å¹¿æ³›åº”ç”¨ã€‚ä¼ä¸šåˆ©ç”¨æ¶ˆè´¹è€…åå¥½åˆ†æè¿›è¡Œäº§å“è®¾è®¡å’Œå®šä»·ç­–ç•¥ã€‚ä¾‹å¦‚ï¼Œæ˜Ÿå·´å…‹æä¾›ä¸åŒæ¯å‹é€‰æ‹©ï¼Œå°±æ˜¯è€ƒè™‘æ¶ˆè´¹è€…å¯¹å’–å•¡æ¶ˆè´¹çš„è¾¹é™…æ•ˆç”¨é€’å‡ï¼›è€Œæ‰‹æœºå‚å•†æ¨å‡ºå¤šç§é…ç½®ç‰ˆæœ¬ï¼Œåˆ™æ—¨åœ¨æ»¡è¶³ä¸åŒé¢„ç®—çº¦æŸä¸‹çš„æ¶ˆè´¹è€…æœ€ä¼˜é€‰æ‹©ã€‚æ”¿åºœæ”¿ç­–è¯„ä¼°ä¹Ÿéœ€è¦è€ƒè™‘æ¶ˆè´¹è€…è¡Œä¸ºï¼Œå¦‚ç‡ƒæ²¹ç¨çš„å½±å“ä¸ä»…å–å†³äºä»·æ ¼å¼¹æ€§ï¼Œè¿˜ä¸æ¶ˆè´¹è€…èƒ½å¦æ‰¾åˆ°åˆé€‚æ›¿ä»£å“ï¼ˆå¦‚å…¬å…±äº¤é€šï¼‰å¯†åˆ‡ç›¸å…³ã€‚è¡Œä¸ºç»æµå­¦è¿›ä¸€æ­¥æ‰©å±•äº†ä¼ ç»Ÿç†è®ºï¼Œå‘ç°æ¶ˆè´¹è€…å¹¶éæ€»æ˜¯ç†æ€§ï¼Œä¼šå—å¿ƒç†è´¦æˆ·ã€é”šå®šæ•ˆåº”ç­‰è®¤çŸ¥åå·®å½±å“ã€‚\næ¶ˆè´¹è€…é€‰æ‹©ç†è®ºè¿˜å¸®åŠ©æˆ‘ä»¬ç†è§£ç”Ÿæ´»å†³ç­–ä¸­çš„æœºä¼šæˆæœ¬ã€‚æ—¶é—´ä½œä¸ºä¸€ç§ç¨€ç¼ºèµ„æºï¼Œå…¶åˆ†é…ä¹Ÿéµå¾ªç»æµå­¦åŸç†ã€‚ä¸€ä¸ªåŠ ç­çš„ç™½é¢†é¢ä¸´çš„æ˜¯å·¥èµ„æ”¶å…¥ä¸ä¼‘é—²æ—¶é—´çš„æƒè¡¡ï¼›é€‰æ‹©è¯»ç ”çš„å­¦ç”Ÿå®é™…ä¸Šæ˜¯åœ¨æ¯”è¾ƒæœªæ¥é¢„æœŸæ”¶å…¥å¢åŠ ä¸å½“å‰å­¦è´¹åŠæ”¾å¼ƒçš„å·¥ä½œæ”¶å…¥ã€‚ç”šè‡³å©šå§»å†³ç­–ä¹Ÿå¯ä»¥ä»ç»æµå­¦è§’åº¦åˆ†æâ€”â€”ä¸ªäººä¼šé€‰æ‹©èƒ½å¸¦æ¥æœ€å¤§æ•ˆç”¨çš„ä¼´ä¾£ï¼ŒåŒæ—¶è€ƒè™‘å¯»æ‰¾æˆæœ¬ã€æ›¿ä»£é€‰æ‹©ç­‰å› ç´ ã€‚è¿™äº›åº”ç”¨å±•ç¤ºäº†ç»æµå­¦æ€ç»´çš„å¹¿æ³›é€‚ç”¨æ€§ã€‚\n$$ \\begin{align*} \\text{é¢„ç®—çº¦æŸ} \u0026:\\ p_xx + p_yy = I \\ \\text{æœ€ä¼˜è§£} \u0026:\\ MRS = \\frac{p_x}{p_y} \\ \\text{å…¶ä¸­} \u0026:\\ \\begin{cases} p_x,p_y \u0026 \\text{å•†å“ä»·æ ¼} \\ x,y \u0026 \\text{æ¶ˆè´¹æ•°é‡} \\ I \u0026 \\text{æ”¶å…¥æ°´å¹³} \\ MRS \u0026 \\text{è¾¹é™…æ›¿ä»£ç‡} \\end{cases} \\end{align*} $$\nè¡¨ï¼šæ¶ˆè´¹è€…å‡è¡¡æ¡ä»¶çš„æ•°å­¦è¡¨ç¤º\næ¦‚å¿µ æ•°å­¦è¡¨è¾¾ ç»æµå«ä¹‰ é¢„ç®—çº¦æŸ Pâ‚Xâ‚ + Pâ‚‚Xâ‚‚ = I æ¶ˆè´¹è€…æ”¯å‡ºä¸èƒ½è¶…è¿‡æ”¶å…¥ è¾¹é™…æ›¿ä»£ç‡(MRS) -Î”Xâ‚‚/Î”Xâ‚ = MUâ‚/MUâ‚‚ æ¶ˆè´¹è€…æ„¿æ„äº¤æ¢ä¸¤ç§å•†å“çš„æ¯”ç‡ æ¶ˆè´¹è€…å‡è¡¡æ¡ä»¶ MRS = Pâ‚/Pâ‚‚ æˆ– MUâ‚/Pâ‚ = MUâ‚‚/Pâ‚‚ æœ€åä¸€å…ƒé’±èŠ±åœ¨å„ç§å•†å“ä¸Šçš„è¾¹é™…æ•ˆç”¨ç›¸ç­‰ éœ€æ±‚æ›²çº¿æ¨å¯¼ æ”¹å˜Pâ‚ï¼Œè§‚å¯ŸXâ‚å˜åŒ–ï¼Œä¿æŒå…¶ä»–ä¸å˜ åæ˜ ä»·æ ¼ä¸éœ€æ±‚é‡ä¹‹é—´çš„å…³ç³» %%{init: {'theme': 'base', 'themeVariables': { 'primaryColor': '#ffdfd3', 'edgeLabelBackground':'#fff'}}}%% mindmap root((æ¶ˆè´¹è€…é€‰æ‹©ç†è®º)) æ ¸å¿ƒæ¦‚å¿µ æ•ˆç”¨ç†è®º [\"åŸºæ•°æ•ˆç”¨(å¯æµ‹é‡)\"] [\"åºæ•°æ•ˆç”¨(å¯æ’åº)\"] ç†æ€§äººå‡è®¾ è¾¹é™…æ•ˆç”¨é€’å‡ [\"ç¬¬ä¸€å•ä½\"] [\"ç¬¬Nå•ä½\"] åˆ†æå·¥å…· æ— å·®å¼‚æ›²çº¿ |ç‰¹å¾| å‘ä¸‹å€¾æ–œ å‡¸å‘åŸç‚¹ äº’ä¸ç›¸äº¤ ç¦»åŸç‚¹è¶Šè¿œæ•ˆç”¨è¶Šé«˜ é¢„ç®—çº¦æŸçº¿ æ–œç‡=ä»·æ ¼æ¯”(Pâ‚/Pâ‚‚) æ”¶å…¥å˜åŒ–â†’å¹³è¡Œç§»åŠ¨ å‡è¡¡æ¡ä»¶ åˆ‡ç‚¹æ¡ä»¶ MRS = Pâ‚/Pâ‚‚ MUâ‚/Pâ‚ = MUâ‚‚/Pâ‚‚ å›¾å½¢è¡¨ç° é¢„ç®—çº¿ä¸æ— å·®å¼‚æ›²çº¿ç›¸åˆ‡ å®é™…åº”ç”¨ ä¼ä¸šå†³ç­– äº§å“çº¿è®¾è®¡ å·®åˆ«å®šä»· æ”¿ç­–è¯„ä¼° ç¨æ”¶æ•ˆåº”åˆ†æ è¡¥è´´æ•ˆæœé¢„æµ‹ ç”Ÿæ´»å†³ç­– æ—¶é—´åˆ†é… æ•™è‚²æŠ•èµ„ ç†è®ºæ‰©å±• è¡Œä¸ºç»æµå­¦ å¿ƒç†è´¦æˆ· é”šå®šæ•ˆåº” æ˜¾ç¤ºåå¥½ç†è®º é€šè¿‡é€‰æ‹©åæ¨åå¥½ ç”Ÿäº§è€…è¡Œä¸ºä¸æˆæœ¬åˆ†æ linkç”Ÿäº§è€…ç†è®ºç ”ç©¶ä¼ä¸šå¦‚ä½•å°†æŠ•å…¥è½¬åŒ–ä¸ºäº§å‡ºå¹¶åšå‡ºæœ€ä¼˜ç”Ÿäº§å†³ç­–ï¼Œå…¶æ ¸å¿ƒç›®æ ‡æ˜¯åˆ©æ¶¦æœ€å¤§åŒ–ã€‚ç”Ÿäº§å‡½æ•°æè¿°äº†åœ¨æ—¢å®šæŠ€æœ¯æ¡ä»¶ä¸‹ï¼Œç”Ÿäº§è¦ç´ ï¼ˆå¦‚åŠ³åŠ¨ã€èµ„æœ¬ï¼‰æŠ•å…¥é‡ä¸æœ€å¤§äº§å‡ºé‡ä¹‹é—´çš„å…³ç³»ã€‚å…¸å‹çš„çŸ­æœŸç”Ÿäº§å‡½æ•°ä¼šå‘ˆç°å…ˆé€’å¢åé€’å‡çš„è§„å¾‹ï¼šéšç€å¯å˜è¦ç´ ï¼ˆå¦‚åŠ³åŠ¨åŠ›ï¼‰å¢åŠ ï¼Œæ€»äº§å‡ºå…ˆå¿«é€Ÿä¸Šå‡ï¼Œç„¶åå¢é€Ÿæ”¾ç¼“ï¼Œæœ€ç»ˆå¯èƒ½ä¸‹é™ã€‚ä¾‹å¦‚ï¼Œä¸€å®¶å’–å•¡åº—åœ¨è¥ä¸šé¢ç§¯å›ºå®šçš„æƒ…å†µä¸‹ï¼Œé›‡ä½£æ›´å¤šæœåŠ¡å‘˜èµ·åˆèƒ½æ˜¾è‘—æé«˜æœåŠ¡æ•ˆç‡ï¼Œä½†äººå‘˜è¿‡å¤šæ—¶åè€Œä¼šé€ æˆæ‹¥æŒ¤ï¼Œé™ä½æ•´ä½“ productivityã€‚\nè¾¹é™…äº§é‡é€’å‡è§„å¾‹æ˜¯ç”Ÿäº§ç†è®ºçš„é‡è¦åŸºç¡€ï¼Œå®ƒæŒ‡å‡ºåœ¨å…¶ä»–æŠ•å…¥å›ºå®šä¸å˜çš„æƒ…å†µä¸‹ï¼Œéšç€æŸä¸€å¯å˜æŠ•å…¥çš„è¿ç»­å¢åŠ ï¼Œå…¶è¾¹é™…äº§é‡æœ€ç»ˆä¼šé€’å‡ã€‚è¿™ä¸€è§„å¾‹æºäºå›ºå®šè¦ç´ ä¸å¯å˜è¦ç´ æ¯”ä¾‹çš„å¤±è¡¡ã€‚ä»¥å†œç”°ä¸ºä¾‹ï¼Œåœ¨åœŸåœ°é¢ç§¯å›ºå®šæ—¶ï¼ŒæŒç»­å¢åŠ åŠ³åŠ¨åŠ›æŠ•å…¥ï¼ŒåˆæœŸæ¯æ–°å¢ä¸€åå·¥äººå¸¦æ¥çš„ç²®é£Ÿå¢äº§æ˜¾è‘—ï¼Œä½†å½“å·¥äººå¯†åº¦è¿‡é«˜æ—¶ï¼Œæ–°å¢å·¥äººçš„è´¡çŒ®é€æ¸å‡å°‘ï¼Œç”šè‡³å¯èƒ½å› è¿‡åº¦æ‹¥æŒ¤è€Œå‡äº§ã€‚è¿™ä¸€è§„å¾‹è§£é‡Šäº†ä¸ºä»€ä¹ˆå•çº¯å¢åŠ æŠ•å…¥éš¾ä»¥æŒç»­æå‡äº§å‡ºæ•ˆç‡ã€‚\nç”Ÿäº§æˆæœ¬æ˜¯ä¼ä¸šå†³ç­–çš„å¦ä¸€å…³é”®å› ç´ ã€‚æˆæœ¬åˆ†ç±»åŒ…æ‹¬æ˜¾æ€§æˆæœ¬ï¼ˆå®é™…è´§å¸æ”¯å‡ºï¼Œå¦‚å·¥èµ„ã€åŸææ–™ï¼‰å’Œéšæ€§æˆæœ¬ï¼ˆè‡ªæœ‰èµ„æºçš„æœºä¼šæˆæœ¬ï¼Œå¦‚ä¼ä¸šä¸»æ—¶é—´ï¼‰ï¼›å›ºå®šæˆæœ¬ï¼ˆä¸éšäº§é‡å˜åŒ–ï¼Œå¦‚å‚æˆ¿ç§Ÿé‡‘ï¼‰å’Œå¯å˜æˆæœ¬ï¼ˆéšäº§é‡å˜åŒ–ï¼Œå¦‚åŸææ–™ï¼‰ã€‚ç»æµåˆ©æ¶¦ä¸ä¼šè®¡åˆ©æ¶¦çš„åŒºåˆ«åœ¨äºæ˜¯å¦è€ƒè™‘éšæ€§æˆæœ¬â€”â€”ç»æµåˆ©æ¶¦=æ€»æ”¶å…¥-æ˜¾æ€§æˆæœ¬-éšæ€§æˆæœ¬ï¼Œè€Œä¼šè®¡åˆ©æ¶¦ä»…æ‰£é™¤æ˜¾æ€§æˆæœ¬ã€‚ä¾‹å¦‚ï¼Œä¸€ä½è‡ªå·±ç»è¥ç½‘åº—çš„åˆ›ä¸šè€…å¯èƒ½è´¦é¢ç›ˆåˆ©ï¼Œä½†è‹¥è€ƒè™‘å…¶æ”¾å¼ƒçš„å·¥èµ„æ”¶å…¥ï¼Œç»æµåˆ©æ¶¦å¯èƒ½ä¸ºè´Ÿã€‚\næˆæœ¬æ›²çº¿åæ˜ äº†ç”Ÿäº§æˆæœ¬ä¸äº§é‡ä¹‹é—´çš„å…³ç³»ã€‚çŸ­æœŸæˆæœ¬æ›²çº¿åŒ…æ‹¬ï¼šæ€»æˆæœ¬ï¼ˆTCï¼‰=å›ºå®šæˆæœ¬ï¼ˆFCï¼‰+å¯å˜æˆæœ¬ï¼ˆVCï¼‰ï¼›å¹³å‡å›ºå®šæˆæœ¬ï¼ˆAFCï¼‰éšäº§é‡å¢åŠ æŒç»­ä¸‹é™ï¼›å¹³å‡å¯å˜æˆæœ¬ï¼ˆAVCï¼‰å…ˆé™åå‡ï¼›å¹³å‡æ€»æˆæœ¬ï¼ˆATCï¼‰å‘ˆUå‹ï¼›è¾¹é™…æˆæœ¬ï¼ˆMCï¼‰æ›²çº¿ä¹Ÿå‘ˆUå‹ï¼Œä¸”é€šè¿‡ATCå’ŒAVCçš„æœ€ä½ç‚¹ã€‚è¿™äº›æ›²çº¿çš„å½¢çŠ¶ç”±è¾¹é™…äº§é‡é€’å‡è§„å¾‹å†³å®šã€‚é•¿æœŸä¸­ï¼Œæ‰€æœ‰æˆæœ¬éƒ½æ˜¯å¯å˜çš„ï¼Œä¼ä¸šå¯ä»¥é€‰æ‹©æœ€ä¼˜ç”Ÿäº§è§„æ¨¡ï¼Œé•¿æœŸå¹³å‡æˆæœ¬ï¼ˆLRACï¼‰æ›²çº¿æ˜¯æ‰€æœ‰çŸ­æœŸå¹³å‡æˆæœ¬æ›²çº¿çš„åŒ…ç»œçº¿ï¼Œå¯èƒ½å‘ˆç°è§„æ¨¡ç»æµï¼ˆé€’å‡ï¼‰ã€è§„æ¨¡ä¸ç»æµï¼ˆé€’å¢ï¼‰æˆ–è§„æ¨¡æŠ¥é…¬ä¸å˜ã€‚\nåˆ©æ¶¦æœ€å¤§åŒ–æ˜¯ä¼ä¸šå†³ç­–çš„æ ¸å¿ƒåŸåˆ™ã€‚åœ¨å®Œå…¨ç«äº‰å¸‚åœºä¸­ï¼Œä¼ä¸šæ˜¯ä»·æ ¼æ¥å—è€…ï¼Œå…¶åˆ©æ¶¦æœ€å¤§åŒ–æ¡ä»¶ä¸ºè¾¹é™…æ”¶ç›Šï¼ˆMRï¼‰ç­‰äºè¾¹é™…æˆæœ¬ï¼ˆMCï¼‰ã€‚å› ä¸ºå¯¹ç«äº‰ä¼ä¸šè€Œè¨€ï¼ŒMRç­‰äºå¸‚åœºä»·æ ¼Pï¼Œæ‰€ä»¥æ¡ä»¶ç®€åŒ–ä¸ºP=MCã€‚è¿™ä¸€æ¡ä»¶å†³å®šäº†ä¼ä¸šçš„ä¾›ç»™æ›²çº¿â€”â€”åœ¨çŸ­æœŸå†…ï¼Œåªè¦ä»·æ ¼é«˜äºå¹³å‡å¯å˜æˆæœ¬ï¼Œä¼ä¸šå°±ä¼šç»§ç»­ç”Ÿäº§ï¼›é•¿æœŸä¸­ï¼Œä¼ä¸šåªæœ‰åœ¨ä»·æ ¼ä¸ä½äºé•¿æœŸå¹³å‡æˆæœ¬æ—¶æ‰ä¼šç•™åœ¨å¸‚åœºã€‚ä¾‹å¦‚ï¼Œå½“å°éº¦å¸‚åœºä»·æ ¼ä¸ºæ¯å¨2000å…ƒæ—¶ï¼Œå†œåœºä¸»ä¼šæ ¹æ®MC=2000å…ƒæ¥å†³å®šæœ€ä¼˜äº§é‡ï¼Œè‹¥ä»·æ ¼é•¿æœŸä½äºç”Ÿäº§æˆæœ¬ï¼Œéƒ¨åˆ†å†œåœºå°†é€€å‡ºå¸‚åœºã€‚\næˆæœ¬åˆ†æå¯¹ä¼ä¸šæˆ˜ç•¥å†³ç­–è‡³å…³é‡è¦ã€‚è§„æ¨¡ç»æµä¸èŒƒå›´ç»æµå½±å“ä¼ä¸šè§„æ¨¡å’Œä¸šåŠ¡èŒƒå›´é€‰æ‹©ã€‚è§„æ¨¡ç»æµæŒ‡äº§é‡å¢åŠ å¯¼è‡´é•¿æœŸå¹³å‡æˆæœ¬ä¸‹é™ï¼Œå¯èƒ½æºäºä¸“ä¸šåŒ–åˆ†å·¥ã€å¤§è§„æ¨¡é‡‡è´­æŠ˜æ‰£æˆ–ä¸å¯åˆ†æ€§ï¼ˆå¦‚è¾“æ²¹ç®¡é“ï¼‰ã€‚æ±½è½¦åˆ¶é€ ä¸šå°±æ˜¯å…¸å‹è§„æ¨¡ç»æµè¡Œä¸šã€‚èŒƒå›´ç»æµåˆ™æŒ‡åŒæ—¶ç”Ÿäº§å¤šç§äº§å“æ¯”å•ç‹¬ç”Ÿäº§æ›´èŠ‚çº¦æˆæœ¬ï¼Œå¦‚èˆªç©ºå…¬å¸åŒæ—¶æä¾›å®¢è¿å’Œè´§è¿æœåŠ¡ã€‚ä¼ä¸šè¿˜éœ€è¦è€ƒè™‘å­¦ä¹ æ›²çº¿æ•ˆåº”â€”â€”éšç€ç”Ÿäº§ç»éªŒç§¯ç´¯ï¼Œå•ä½æˆæœ¬ä¸‹é™ï¼Œè¿™åœ¨é£æœºåˆ¶é€ ç­‰é«˜æŠ€æœ¯è¡Œä¸šå°¤ä¸ºæ˜¾è‘—ã€‚\nç”Ÿäº§è€…è¡Œä¸ºç†è®ºä¹Ÿè§£é‡Šäº†å¸‚åœºä¾›ç»™æ›²çº¿çš„å½¢æˆã€‚çŸ­æœŸè¡Œä¸šä¾›ç»™æ›²çº¿æ˜¯ä¸ªåˆ«ä¼ä¸šä¾›ç»™æ›²çº¿çš„æ°´å¹³åŠ æ€»ï¼›é•¿æœŸä¾›ç»™æ›²çº¿åˆ™è€ƒè™‘ä¼ä¸šè¿›å…¥é€€å‡ºï¼Œå®Œå…¨ç«äº‰ä¸‹å¯èƒ½æ˜¯æ°´å¹³ï¼ˆæˆæœ¬ä¸å˜è¡Œä¸šï¼‰ã€å‘ä¸Šå€¾æ–œï¼ˆæˆæœ¬é€’å¢è¡Œä¸šï¼‰æˆ–å‘ä¸‹å€¾æ–œï¼ˆæˆæœ¬é€’å‡è¡Œä¸šï¼‰ã€‚æŠ•å…¥å“ä»·æ ¼å˜åŒ–ä¼šç§»åŠ¨æˆæœ¬æ›²çº¿ï¼Œå¦‚æ²¹ä»·ä¸Šæ¶¨æé«˜è¿è¾“æˆæœ¬ï¼Œä½¿ä¾›ç»™æ›²çº¿å·¦ç§»ã€‚æŠ€æœ¯è¿›æ­¥åˆ™é€šå¸¸é™ä½ç”Ÿäº§æˆæœ¬ï¼Œä½¿ä¾›ç»™æ›²çº¿å³ç§»ï¼Œå¢åŠ å¸‚åœºä¾›ç»™é‡ã€‚ç†è§£è¿™äº›å…³ç³»æœ‰åŠ©äºé¢„æµ‹æ”¿ç­–å˜åŒ–ï¼ˆå¦‚ç¯ä¿æ ‡å‡†æé«˜ï¼‰å¯¹è¡Œä¸šä¾›ç»™å’Œä»·æ ¼çš„å½±å“ã€‚\nè¡¨ï¼šçŸ­æœŸæˆæœ¬æ›²çº¿ä¹‹é—´çš„å…³ç³»\næˆæœ¬æ¦‚å¿µ è®¡ç®—å…¬å¼ æ›²çº¿ç‰¹å¾ ä¸å…¶ä»–æˆæœ¬çš„å…³ç³» æ€»æˆæœ¬(TC) TC = FC + VC ä»FCå¼€å§‹å‘å³ä¸Šæ–¹å€¾æ–œ TCæ›²çº¿ä¸VCæ›²çº¿å¹³è¡Œï¼Œå‚ç›´è·ç¦»ä¸ºFC å¹³å‡å›ºå®šæˆæœ¬(AFC) AFC = FC/Q æŒç»­ä¸‹é™çš„ç›´è§’åŒæ›²çº¿ éšQå¢åŠ é€æ¸è¶‹è¿‘äºé›¶ å¹³å‡å¯å˜æˆæœ¬(AVC) AVC = VC/Q Uå½¢æ›²çº¿ æœ€ä½ç‚¹å¯¹åº”MCä¸AVCçš„äº¤ç‚¹ å¹³å‡æ€»æˆæœ¬(ATC) ATC = TC/Q Uå½¢æ›²çº¿ï¼Œä½äºAVCä¸Šæ–¹ æœ€ä½ç‚¹å¯¹åº”MCä¸ATCçš„äº¤ç‚¹ è¾¹é™…æˆæœ¬(MC) MC = Î”TC/Î”Q Uå½¢æ›²çº¿ é€šè¿‡AVCå’ŒATCçš„æœ€ä½ç‚¹ å¸‚åœºç»“æ„ä¸ç«äº‰ç­–ç•¥ linkå¸‚åœºç»“æ„æ˜¯å¾®è§‚ç»æµå­¦åˆ†æä¼ä¸šè¡Œä¸ºå’Œå¸‚åœºæ•ˆç‡çš„æ ¸å¿ƒæ¡†æ¶ï¼Œæ ¹æ®å‚å•†æ•°é‡ã€äº§å“å·®å¼‚ç¨‹åº¦ã€è¿›å…¥å£å’ç­‰å› ç´ å¯åˆ†ä¸ºå®Œå…¨ç«äº‰ã€å„æ–­ã€å„æ–­ç«äº‰å’Œå¯¡å¤´å››ç§ç±»å‹ã€‚ä¸åŒå¸‚åœºç»“æ„ä¸‹ï¼Œä¼ä¸šçš„å®šä»·ç­–ç•¥ã€äº§é‡å†³ç­–å’Œç»æµåˆ©æ¶¦å­˜åœ¨æ˜¾è‘—å·®å¼‚ã€‚å®Œå…¨ç«äº‰å’Œå„æ–­æ˜¯ä¸¤ç§æç«¯æƒ…å†µï¼Œç°å®ä¸­çš„å¸‚åœºå¤§å¤šä»‹äºä¸¤è€…ä¹‹é—´ã€‚ç†è§£è¿™äº›å¸‚åœºç»“æ„æœ‰åŠ©äºåˆ†æè¡Œä¸šåŠ¨æ€å’Œä¼ä¸šæˆ˜ç•¥ï¼Œä¹Ÿèƒ½ä¸ºæ”¿åºœåˆ¶å®šé€‚å½“çš„ç«äº‰æ”¿ç­–æä¾›ä¾æ®ã€‚\nå®Œå…¨ç«äº‰å¸‚åœºæ˜¯æœ€æœ‰æ•ˆç‡çš„å¸‚åœºç»“æ„ï¼Œå…¶ç‰¹å¾åŒ…æ‹¬ï¼šå¤§é‡å°è§„æ¨¡ä¹°è€…å’Œå–è€…ï¼›åŒè´¨äº§å“ï¼›è‡ªç”±è¿›å…¥é€€å‡ºï¼›å®Œå…¨ä¿¡æ¯ã€‚å†œäº§å“å¸‚åœºæ¥è¿‘å®Œå…¨ç«äº‰ï¼Œå•ä¸ªå†œæˆ·æ— æ³•å½±å“å¸‚åœºä»·æ ¼ã€‚å®Œå…¨ç«äº‰ä¼ä¸šçš„éœ€æ±‚æ›²çº¿æ˜¯æ°´å¹³çº¿ï¼ˆä»·æ ¼æ¥å—è€…ï¼‰ï¼ŒçŸ­æœŸå‡è¡¡æ¡ä»¶ä¸ºP=MCï¼Œå¯èƒ½è·å¾—æ­£ç»æµåˆ©æ¶¦ã€é›¶åˆ©æ¶¦æˆ–äºæŸï¼›é•¿æœŸå‡è¡¡æ—¶æ‰€æœ‰ä¼ä¸šä»…è·å¾—æ­£å¸¸åˆ©æ¶¦ï¼ˆP=MC=ATCæœ€ä½ç‚¹ï¼‰ï¼Œç”Ÿäº§æ•ˆç‡æœ€é«˜ã€‚å®Œå…¨ç«äº‰å¸‚åœºçš„ä¼˜ç‚¹åœ¨äºèµ„æºé…ç½®æ•ˆç‡ï¼ˆç”Ÿäº§æœ‰æ•ˆç‡å’Œåˆ†é…æ•ˆç‡ï¼‰å’ŒåŠ¨æ€é€‚åº”èƒ½åŠ›ï¼Œä½†ç¼ºä¹äº§å“å¤šæ ·æ€§å’Œåˆ›æ–°æ¿€åŠ±å¯èƒ½æ˜¯å…¶å±€é™ã€‚\nå„æ–­å¸‚åœºç”±ä¸€ä¸ªå‚å•†æ„æˆï¼Œå­˜åœ¨é«˜è¿›å…¥å£å’ï¼ˆå¦‚ä¸“åˆ©ã€è§„æ¨¡ç»æµã€èµ„æºæ§åˆ¶æˆ–æ”¿åºœç‰¹è®¸ï¼‰ï¼Œäº§å“æ²¡æœ‰ç›¸è¿‘æ›¿ä»£å“ã€‚å…¬ç”¨äº‹ä¸šï¼ˆå¦‚è‡ªæ¥æ°´ã€ç”µç½‘ï¼‰å’Œå¾®è½¯Windowsæ“ä½œç³»ç»Ÿæ˜¯å…¸å‹ä¾‹å­ã€‚å„æ–­è€…é¢ä¸´å‘ä¸‹å€¾æ–œçš„éœ€æ±‚æ›²çº¿ï¼Œè¾¹é™…æ”¶ç›Šä½äºä»·æ ¼ï¼Œåˆ©æ¶¦æœ€å¤§åŒ–æ¡ä»¶ä¸ºMR=MCï¼Œæ­¤æ—¶ä»·æ ¼é«˜äºè¾¹é™…æˆæœ¬ï¼Œå¯¼è‡´äº§é‡ä½äºç¤¾ä¼šæœ€ä¼˜æ°´å¹³ï¼Œäº§ç”Ÿæ— è°“æŸå¤±ã€‚å„æ–­è¿˜å¯èƒ½é€šè¿‡ä»·æ ¼æ­§è§†ï¼ˆå¦‚å­¦ç”Ÿç¥¨ã€é«˜å³°å®šä»·ï¼‰è·å–æ›´å¤šæ¶ˆè´¹è€…å‰©ä½™ã€‚å„æ–­çš„æˆå› åŒ…æ‹¬ï¼šè‡ªç„¶å„æ–­ï¼ˆè§„æ¨¡ç»æµä½¿å•ä¸€å‚å•†æ›´æœ‰æ•ˆç‡ï¼‰ï¼›æ”¿åºœåˆ›é€ çš„å„æ–­ï¼ˆå¦‚ä¸“åˆ©ï¼‰ï¼›èµ„æºå„æ–­ï¼ˆå¦‚De Beersé’»çŸ³æ§åˆ¶ï¼‰ã€‚\nä»‹äºå®Œå…¨ç«äº‰å’Œå„æ–­ä¹‹é—´çš„æ˜¯å„æ–­ç«äº‰å¸‚åœºï¼Œå…¶ç‰¹å¾ä¸ºï¼šè¾ƒå¤šå‚å•†ï¼›äº§å“å·®å¼‚åŒ–ï¼›è‡ªç”±è¿›å…¥é€€å‡ºã€‚é¤é¥®ä¸šã€æœè£…é›¶å”®ä¸šå±äºæ­¤ç±»ã€‚å„æ–­ç«äº‰ä¼ä¸šçš„éœ€æ±‚æ›²çº¿å‘ä¸‹å€¾æ–œä½†å¼¹æ€§è¾ƒå¤§ï¼ŒçŸ­æœŸå¯èƒ½ç›ˆåˆ©ï¼Œé•¿æœŸå› æ–°è¿›å…¥è€…ç«äº‰è€Œä»…è·æ­£å¸¸åˆ©æ¶¦ï¼ˆP=ATCï¼‰ï¼Œä½†ä¸åŒäºå®Œå…¨ç«äº‰ï¼Œæ­¤æ—¶P\u003eMCä¸”ATCæœªè¾¾åˆ°æœ€ä½ç‚¹ï¼Œå­˜åœ¨è¿‡å‰©äº§èƒ½ã€‚äº§å“å·®å¼‚åŒ–ä¿ƒä½¿ä¼ä¸šé€šè¿‡å¹¿å‘Šã€å“ç‰Œå»ºè®¾ç­‰éä»·æ ¼ç«äº‰æ‰‹æ®µå¸å¼•é¡¾å®¢ã€‚è™½ç„¶å„æ–­ç«äº‰å­˜åœ¨ä¸€å®šæ•ˆç‡æŸå¤±ï¼Œä½†å®ƒæä¾›äº†æ¶ˆè´¹è€…é‡è§†çš„äº§å“å¤šæ ·æ€§é€‰æ‹©ã€‚\nå¯¡å¤´å¸‚åœºç”±å°‘æ•°å‡ å®¶å¤§å‚å•†ä¸»å¯¼ï¼Œäº§å“å¯èƒ½åŒè´¨ï¼ˆçº¯ç²¹å¯¡å¤´ï¼Œå¦‚é’¢é“ï¼‰æˆ–å·®å¼‚ï¼ˆå·®å¼‚å¯¡å¤´ï¼Œå¦‚æ±½è½¦ï¼‰ï¼Œå­˜åœ¨æ˜¾è‘—è¿›å…¥å£å’ã€‚å¯¡å¤´ä¼ä¸šçš„å†³ç­–ç›¸äº’ä¾èµ–ï¼Œå½¢æˆäº†ä¸°å¯Œçš„ç­–ç•¥è¡Œä¸ºï¼Œåšå¼ˆè®ºæ˜¯åˆ†æå¯¡å¤´ç«äº‰çš„æœ‰åŠ›å·¥å…·ã€‚å¯¡å¤´å¯èƒ½é€šè¿‡å…¬å¼€æˆ– tacit collusionï¼ˆå¦‚OPECï¼‰é™åˆ¶äº§é‡æŠ¬é«˜ä»·æ ¼ï¼Œä¹Ÿå¯èƒ½æ¿€çƒˆç«äº‰ã€‚å›šå¾’å›°å¢ƒæ¨¡å‹è§£é‡Šäº†ä¸ºä»€ä¹ˆå³ä½¿åˆä½œå¯¹å„æ–¹æœ‰åˆ©ï¼Œå¯¡å¤´ä»éš¾ä»¥ç»´æŒå„æ–­äº§é‡ã€‚å¯¡å¤´å¸‚åœºçš„æ•ˆç‡è¯„ä»·å¤æ‚ï¼Œä¸€æ–¹é¢å¯èƒ½å› æ¥è¿‘å„æ–­è€Œäº§ç”Ÿç±»ä¼¼é—®é¢˜ï¼Œå¦ä¸€æ–¹é¢å¤§ä¼ä¸šçš„è§„æ¨¡ç»æµå’Œç ”å‘èƒ½åŠ›å¯èƒ½ä¿ƒè¿›æŠ€æœ¯è¿›æ­¥ã€‚\nä¸åŒå¸‚åœºç»“æ„ä¸‹çš„ä¼ä¸šç­–ç•¥å·®å¼‚æ˜¾è‘—ã€‚å®Œå…¨ç«äº‰ä¼ä¸šåªèƒ½è¢«åŠ¨æ¥å—ä»·æ ¼ï¼Œä¸“æ³¨äºæˆæœ¬æœ€å°åŒ–ï¼›å„æ–­ä¼ä¸šåˆ™éœ€è€ƒè™‘æ•´ä¸ªå¸‚åœºéœ€æ±‚ï¼Œå¯èƒ½é‡‡å–å¤šçº§ä»·æ ¼æ­§è§†ï¼ˆå¦‚è½¯ä»¶çš„ä¸åŒç‰ˆæœ¬å®šä»·ï¼‰ã€‚å„æ–­ç«äº‰ä¼ä¸šæŠ•èµ„äºäº§å“å·®å¼‚åŒ–ï¼ˆå¦‚æ˜Ÿå·´å…‹çš„\"ç¬¬ä¸‰ç©ºé—´\"æ¦‚å¿µï¼‰ï¼›å¯¡å¤´ä¼ä¸šåˆ™éœ€é¢„æµ‹å¯¹æ‰‹ååº”ï¼Œå¯èƒ½é‡‡å–å…ˆå ç­–ç•¥ã€æ å¤ºæ€§å®šä»·æˆ–ç ”å‘ç«èµ›ã€‚ä¾‹å¦‚ï¼Œæ™ºèƒ½æ‰‹æœºå¸‚åœºä¸­è‹¹æœï¼ˆå·®å¼‚åŒ–å„æ–­ç«äº‰è€…ï¼‰å’Œå®‰å“å‚å•†ï¼ˆå¯¡å¤´ç«äº‰è€…ï¼‰é‡‡å–æˆªç„¶ä¸åŒçš„ç­–ç•¥ç»„åˆã€‚\næ”¿åºœç«äº‰æ”¿ç­–æ—¨åœ¨çº æ­£å¸‚åœºç»“æ„å¯¼è‡´çš„é—®é¢˜ï¼Œå°¤å…¶æ˜¯é’ˆå¯¹å„æ–­å’Œå¯¡å¤´è¡Œä¸ºã€‚å¸¸è§æªæ–½åŒ…æ‹¬ï¼šåå„æ–­æ³•ç¦æ­¢ä»·æ ¼æ“çºµå’Œæ»¥ç”¨æ”¯é…åœ°ä½ï¼ˆå¦‚æ¬§ç›Ÿå¯¹è°·æ­Œçš„åå„æ–­å¤„ç½šï¼‰ï¼›ç®¡åˆ¶è‡ªç„¶å„æ–­ä¼ä¸šçš„ä»·æ ¼å’ŒæœåŠ¡è´¨é‡ï¼›ä¿ƒè¿›å¸‚åœºå¯ç«äº‰æ€§ï¼ˆé™ä½è¿›å…¥é€€å‡ºå£å’ï¼‰ï¼›åœ¨æŸäº›æƒ…å†µä¸‹å°†å„æ–­ä¼ä¸šå›½æœ‰åŒ–æˆ–åˆ†æ‹†ã€‚æ”¿åºœä¹Ÿé€šè¿‡ä¸“åˆ©åˆ¶åº¦å¹³è¡¡åˆ›æ–°æ¿€åŠ±ä¸å„æ–­æŸå¤±â€”â€”æˆäºˆä¸´æ—¶å„æ–­æƒä»¥é¼“åŠ±ç ”å‘ï¼Œä½†é™åˆ¶ä¸“åˆ©æœŸé™ä¿ƒè¿›é•¿æœŸç«äº‰ã€‚è¿™äº›æ”¿ç­–è¯•å›¾åœ¨é™æ€æ•ˆç‡ä¸åŠ¨æ€æ•ˆç‡ã€è§„æ¨¡ç»æµä¸ç«äº‰æ´»åŠ›ä¹‹é—´å¯»æ±‚å¹³è¡¡ã€‚\nè¡¨ï¼šå››ç§å¸‚åœºç»“æ„ç‰¹å¾æ¯”è¾ƒ\nç‰¹å¾ å®Œå…¨ç«äº‰ å„æ–­ç«äº‰ å¯¡å¤´å„æ–­ å®Œå…¨å„æ–­ å‚å•†æ•°é‡ éå¸¸å¤š è¾ƒå¤š å°‘æ•°å‡ å®¶ å”¯ä¸€ä¸€å®¶ äº§å“æ€§è´¨ åŒè´¨ æœ‰å·®å¼‚ åŒè´¨æˆ–å·®å¼‚ æ— ç›¸è¿‘æ›¿ä»£å“ è¿›å…¥å£å’ æ—  è¾ƒä½ è¾ƒé«˜ éå¸¸é«˜ ä»·æ ¼æ§åˆ¶åŠ› æ— ï¼ˆä»·æ ¼æ¥å—è€…ï¼‰ æœ‰é™ ç›¸å½“ç¨‹åº¦ å¼ºå¤§ éœ€æ±‚æ›²çº¿ æ°´å¹³çº¿ å‘ä¸‹å€¾æ–œè¾ƒå¹³å¦ å‘ä¸‹å€¾æ–œï¼ˆå—å¯¹æ‰‹å½±å“ï¼‰ è¡Œä¸šéœ€æ±‚æ›²çº¿ é•¿æœŸåˆ©æ¶¦ é›¶ç»æµåˆ©æ¶¦ é›¶ç»æµåˆ©æ¶¦ å¯èƒ½æœ‰ç»æµåˆ©æ¶¦ å¯èƒ½æœ‰ç»æµåˆ©æ¶¦ å…¸å‹è¡Œä¸š å†œäº§å“ é¤é¥®ã€æœè£… æ±½è½¦ã€èˆªç©º å…¬ç”¨äº‹ä¸šã€ä¸“åˆ©è¯å“ è¦ç´ å¸‚åœºä¸æ”¶å…¥åˆ†é… linkè¦ç´ å¸‚åœºæ˜¯å¾®è§‚ç»æµå­¦åˆ†ææ”¶å…¥åˆ†é…çš„æ ¸å¿ƒç¯èŠ‚ï¼Œä¸äº§å“å¸‚åœºä¸åŒï¼Œè¦ç´ å¸‚åœºçš„éœ€æ±‚æ˜¯æ´¾ç”Ÿéœ€æ±‚â€”â€”æºäºå¯¹æœ€ç»ˆäº§å“çš„éœ€æ±‚ã€‚åŠ³åŠ¨åŠ›ã€èµ„æœ¬ã€åœŸåœ°å’Œä¼ä¸šå®¶æ‰èƒ½æ˜¯å››ç§åŸºæœ¬ç”Ÿäº§è¦ç´ ï¼Œå…¶ä»·æ ¼åˆ†åˆ«è¡¨ç°ä¸ºå·¥èµ„ã€åˆ©æ¯ã€ç§Ÿé‡‘å’Œåˆ©æ¶¦ã€‚è¦ç´ å¸‚åœºçš„ä¾›æ±‚å…³ç³»å†³å®šäº†è¦ç´ ä»·æ ¼å’Œæ”¶å…¥åˆ†é…æ ¼å±€ï¼Œè€Œè¦ç´ ä»·æ ¼åˆå½±å“ç€ç¤¾ä¼šè´¢å¯Œåˆ†å¸ƒå’Œå…¬å¹³é—®é¢˜ã€‚ç†è§£è¦ç´ å¸‚åœºè¿ä½œæœ‰åŠ©äºåˆ†æå·¥èµ„å·®å¼‚ã€èµ„æœ¬å›æŠ¥ç‡ã€åœŸåœ°ä»·å€¼å˜åŠ¨ç­‰ç°å®ç»æµç°è±¡ã€‚\nåŠ³åŠ¨åŠ›å¸‚åœºæ˜¯æœ€é‡è¦çš„è¦ç´ å¸‚åœºã€‚åŠ³åŠ¨éœ€æ±‚æ˜¯æ´¾ç”Ÿéœ€æ±‚ï¼Œå–å†³äºåŠ³åŠ¨çš„è¾¹é™…äº§é‡ä»·å€¼ï¼ˆVMPL=MPLÃ—Pï¼‰ï¼Œä¼ä¸šé›‡ä½£åŠ³åŠ¨ç›´åˆ°VMPLç­‰äºå·¥èµ„ç‡ã€‚åŠ³åŠ¨ä¾›ç»™æ›²çº¿é€šå¸¸å‘ä¸Šå€¾æ–œï¼ˆå·¥èµ„è¶Šé«˜ä¾›ç»™é‡è¶Šå¤§ï¼‰ï¼Œä½†å¯èƒ½åœ¨é«˜æ”¶å…¥æ°´å¹³å‘åå¼¯æ›²ï¼ˆæ”¶å…¥æ•ˆåº”è¶…è¿‡æ›¿ä»£æ•ˆåº”ï¼‰ã€‚å‡è¡¡å·¥èµ„ç”±åŠ³åŠ¨ä¾›æ±‚å†³å®šï¼Œä½†ç°å®ä¸­å·¥èµ„å·®å¼‚å·¨å¤§ï¼ŒåŸå› åŒ…æ‹¬ï¼šè¡¥å¿æ€§å·®å¼‚ï¼ˆå±é™©å·¥ä½œå·¥èµ„æ›´é«˜ï¼‰ï¼›äººåŠ›èµ„æœ¬å·®å¼‚ï¼ˆæ•™è‚²æŠ•èµ„å›æŠ¥ï¼‰ï¼›èƒ½åŠ›ä¸åŠªåŠ›å·®å¼‚ï¼›æ­§è§†ï¼›å·¥ä¼šåŠ›é‡ç­‰ã€‚ä¾‹å¦‚ï¼Œç¨‹åºå‘˜æ¯”æ™®é€šæ–‡å‘˜å·¥èµ„é«˜ï¼Œéƒ¨åˆ†å› ä¸ºæŠ€èƒ½åŸ¹è®­æˆæœ¬é«˜ä¸”æŠ€æœ¯æ›´æ–°å¿«ï¼Œè¾¹é™…äº§å‡ºä»·å€¼å¤§ã€‚\nèµ„æœ¬å¸‚åœºè°ƒèŠ‚èµ„é‡‘é…ç½®ï¼Œåˆ©ç‡æ˜¯èµ„æœ¬çš„ä»·æ ¼ã€‚èµ„æœ¬éœ€æ±‚æ¥è‡ªä¼ä¸šçš„æŠ•èµ„æ„æ„¿ï¼Œå–å†³äºèµ„æœ¬çš„è¾¹é™…äº§é‡ä»·å€¼ï¼›ä¾›ç»™æ¥è‡ªå®¶åº­å‚¨è“„ã€‚åˆ©ç‡å½±å“æŠ•èµ„å†³ç­–å’Œè·¨æœŸé€‰æ‹©â€”â€”é«˜åˆ©ç‡é¼“åŠ±å‚¨è“„è€ŒæŠ‘åˆ¶æŠ•èµ„ã€‚èµ„æœ¬å¸‚åœºçš„ä¸å®Œå…¨æ€§ï¼ˆå¦‚ä¿¡æ¯ä¸å¯¹ç§°ã€é£é™©å·®å¼‚ï¼‰å¯¼è‡´ä¸åŒå€Ÿæ¬¾è€…é¢ä¸´ä¸åŒåˆ©ç‡ã€‚ä¼ä¸šé€šè¿‡æ¯”è¾ƒæŠ•èµ„é¡¹ç›®çš„é¢„æœŸå›æŠ¥ç‡ä¸èµ„é‡‘æˆæœ¬ï¼ˆåˆ©ç‡ï¼‰æ¥å†³å®šæŠ•èµ„è§„æ¨¡ã€‚2023å¹´ç¾è”å‚¨åŠ æ¯æŠ‘åˆ¶é€šèƒ€ï¼Œå°±æ˜¯é€šè¿‡æé«˜èµ„é‡‘æˆæœ¬æ¥å‡å°‘ä¼ä¸šå’Œå®¶åº­å€Ÿè´·éœ€æ±‚ï¼Œä»è€Œå†·å´ç»æµã€‚\nåœŸåœ°å¸‚åœºæœ‰å…¶ç‰¹æ®Šæ€§ï¼ŒåœŸåœ°ä¾›ç»™é€šå¸¸å›ºå®šï¼ˆç¼ºä¹å¼¹æ€§ï¼‰ï¼Œåœ°ç§Ÿå®Œå…¨ç”±éœ€æ±‚å†³å®šã€‚åŸå¸‚ä¸­å¿ƒå•†ä¸šåŒºåœ°ä»·é«˜æ˜‚ï¼Œåæ˜ äº†è¯¥ä½ç½®å¸¦æ¥çš„é«˜å•†ä¸šä»·å€¼ï¼ˆå¦‚å®¢æµé‡ï¼‰ã€‚ç»æµç§Ÿæ˜¯æŒ‡è¦ç´ æ”¶å…¥è¶…è¿‡å…¶æœºä¼šæˆæœ¬çš„éƒ¨åˆ†ï¼Œæ˜æ˜Ÿè¿åŠ¨å‘˜å’Œé¡¶çº§CEOçš„é«˜æ”¶å…¥ä¸­å¾ˆå¤§éƒ¨åˆ†å±äºç»æµç§Ÿâ€”â€”ä»–ä»¬çš„æ‰èƒ½ç¨€ç¼ºä¸”éš¾ä»¥å¤åˆ¶ã€‚äº¨åˆ©Â·ä¹”æ²»æ›¾ä¸»å¼ å¯¹åœŸåœ°å¾æ”¶å•ä¸€ç¨ï¼Œå› ä¸ºåœ°ç§Ÿæ˜¯\"ä¸åŠ³è€Œè·\"çš„æ”¶å…¥ï¼Œä¸å½±å“åœŸåœ°ä¾›ç»™ã€‚\næ”¶å…¥åˆ†é…æ—¢æ˜¯ç»æµé—®é¢˜ä¹Ÿæ˜¯ç¤¾ä¼šé—®é¢˜ã€‚æ´›ä¼¦å…¹æ›²çº¿å’ŒåŸºå°¼ç³»æ•°æ˜¯è¡¡é‡æ”¶å…¥ä¸å¹³ç­‰çš„ä¸»è¦å·¥å…·ã€‚æ´›ä¼¦å…¹æ›²çº¿ç¦»45åº¦çº¿è¶Šè¿œï¼Œæ”¶å…¥åˆ†é…è¶Šä¸å¹³ç­‰ï¼›åŸºå°¼ç³»æ•°åœ¨0ï¼ˆå®Œå…¨å¹³ç­‰ï¼‰åˆ°1ï¼ˆå®Œå…¨ä¸å¹³ç­‰ï¼‰ä¹‹é—´ï¼Œå‘è¾¾å›½å®¶é€šå¸¸åœ¨0.3-0.4ã€‚æ”¶å…¥ä¸å¹³ç­‰çš„åŸå› åŒ…æ‹¬ï¼šæŠ€èƒ½æº¢ä»·ï¼ˆæŠ€æœ¯å˜é©åå‘é«˜æŠ€èƒ½åŠ³åŠ¨è€…ï¼‰ï¼›å…¨çƒåŒ–ï¼ˆä½æŠ€èƒ½å·¥ä½œå¤–æµï¼‰ï¼›è¶…çº§æ˜æ˜Ÿç°è±¡ï¼ˆå°‘æ•°é¡¶å°–è€…è·å–ç»å¤§éƒ¨åˆ†å¸‚åœºï¼‰ï¼›èµ„æœ¬æ”¶å…¥å æ¯”ä¸Šå‡ç­‰ã€‚ä¾‹å¦‚ï¼Œä¿¡æ¯æŠ€æœ¯é©å‘½å¤§å¤§æé«˜äº†ç¨‹åºå‘˜å’Œå·¥ç¨‹å¸ˆçš„ç›¸å¯¹æ”¶å…¥ï¼Œè€Œè‡ªåŠ¨åŒ–åˆ™æŒ¤å‹äº†åˆ¶é€ ä¸šå·¥äººå·¥èµ„ã€‚\nè´«å›°é—®é¢˜ä¸æ”¶å…¥åˆ†é…å¯†åˆ‡ç›¸å…³ã€‚è´«å›°çº¿é€šå¸¸è®¾å®šä¸ºæ»¡è¶³åŸºæœ¬ç”Ÿæ´»éœ€è¦çš„æ”¶å…¥æ°´å¹³ï¼Œè´«å›°ç‡æ˜¯äººå£ä¸­å¤„äºè´«å›°çº¿ä»¥ä¸‹çš„æ¯”ä¾‹ã€‚åè´«å›°æ”¿ç­–åŒ…æ‹¬ï¼šè´Ÿæ‰€å¾—ç¨ï¼ˆå¦‚ç¾å›½çš„EITCï¼‰ï¼›æœ€ä½å·¥èµ„ï¼ˆäº‰è®®åœ¨äºå¯èƒ½å‡å°‘å°±ä¸šï¼‰ï¼›ç¦åˆ©è®¡åˆ’ï¼ˆé£Ÿå“åˆ¸ã€åŒ»ç–—è¡¥åŠ©ï¼‰ï¼›äººåŠ›èµ„æœ¬æŠ•èµ„ï¼ˆæ•™è‚²æ‰¶è´«ï¼‰ï¼›ä»¥åŠæœºä¼šå¹³ç­‰æªæ–½ã€‚åŒ—æ¬§å›½å®¶çš„\"çµæ´»å®‰å…¨\"æ¨¡å¼ï¼ˆflexicurityï¼‰ç»“åˆäº†å®½æ¾çš„é›‡ä½£è§£é›‡è§„åˆ™ä¸å¼ºå¤§çš„å¤±ä¸šä¿éšœå’Œå†åŸ¹è®­è®¡åˆ’ï¼Œè¯•å›¾å¹³è¡¡æ•ˆç‡ä¸å…¬å¹³ã€‚\nè¦ç´ å¸‚åœºä¸­çš„æ­§è§†ç»æµå­¦åˆ†æåè§å¦‚ä½•å½±å“å·¥èµ„å’Œå°±ä¸šã€‚æ­§è§†å¯èƒ½æ¥è‡ªé›‡ä¸»ã€é¡¾å®¢æˆ–åŒäº‹ï¼Œè¡¨ç°ä¸ºåŒå·¥ä¸åŒé…¬æˆ–èŒä¸šéš”ç¦»ã€‚è´å…‹å°”æ¨¡å‹å°†æ­§è§†è§†ä¸ºä¸€ç§\"åå¥½\"ï¼Œæ­§è§†è€…æ„¿æ„ä¸ºæ­¤æ”¯ä»˜ä»£ä»·ï¼ˆå¦‚æ‹’ç»é›‡ä½£åˆæ ¼å°‘æ•°æ—è£”è€Œæ¥å—ç”Ÿäº§ç‡æŸå¤±ï¼‰ã€‚ç«äº‰å¸‚åœºç†è®ºä¸Šä¼šæƒ©ç½šæ­§è§†æ€§é›‡ä¸»ï¼ˆå› å…¶æ•ˆç‡è¾ƒä½ï¼‰ï¼Œä½†ç°å®ä¸­çš„ä¸å®Œå…¨ç«äº‰å’Œéå¸‚åœºåŠ›é‡ï¼ˆå¦‚åˆ¶åº¦æ€§æ­§è§†ï¼‰å¯èƒ½ä½¿æ­§è§†æŒç»­å­˜åœ¨ã€‚å¹³æƒæ³•æ¡ˆç­‰æ”¿ç­–è¯•å›¾çº æ­£å†å²æ­§è§†ï¼Œä½†ä¹Ÿé¢ä¸´\"é€†å‘æ­§è§†\"äº‰è®®ã€‚\nå…¨çƒåŒ–å¯¹è¦ç´ æ”¶å…¥åˆ†é…äº§ç”Ÿäº†æ·±è¿œå½±å“ã€‚æ–¯æ‰˜å°”ç€-è¨ç¼ªå°”æ£®å®šç†é¢„æµ‹ï¼Œè´¸æ˜“å¼€æ”¾ä¼šæé«˜ä¸€å›½å……è£•è¦ç´ çš„å®é™…æ”¶å…¥ï¼Œé™ä½ç¨€ç¼ºè¦ç´ æ”¶å…¥ã€‚å‘è¾¾å›½å®¶çš„é«˜æŠ€èƒ½å·¥äººå—ç›Šäºå…¨çƒåŒ–ï¼Œè€Œä½æŠ€èƒ½å·¥äººé¢ä¸´æ¥è‡ªå‘å±•ä¸­å›½å®¶çš„ç«äº‰å‹åŠ›ã€‚è¿™è§£é‡Šäº†ä¸ºä»€ä¹ˆå‘è¾¾å›½å®¶å†…éƒ¨å¯¹è´¸æ˜“æ”¿ç­–å­˜åœ¨åˆ†æ­§â€”â€”èµ„æœ¬æ‰€æœ‰è€…å’Œé«˜æŠ€èƒ½åŠ³åŠ¨è€…æ›´æ”¯æŒè‡ªç”±è´¸æ˜“ï¼Œè€Œä½æŠ€èƒ½åŠ³åŠ¨è€…å€¾å‘ä¿æŠ¤ä¸»ä¹‰ã€‚æŠ€æœ¯è¿›æ­¥ä¸å…¨çƒåŒ–çš„äº¤äº’ä½œç”¨è¿›ä¸€æ­¥åŠ å‰§äº†æ”¶å…¥æåŒ–ï¼Œå½¢æˆæ‰€è°“\"ç©ºå¿ƒåŒ–\"çš„åŠ³åŠ¨åŠ›å¸‚åœºç»“æ„ã€‚\nè¡¨ï¼šç”Ÿäº§è¦ç´ åŠå…¶æŠ¥é…¬å½¢å¼\nç”Ÿäº§è¦ç´  å¸‚åœºç‰¹å¾ ä»·æ ¼å½¢å¼ æ”¶å…¥å†³å®šå› ç´  åŠ³åŠ¨åŠ› æ´¾ç”Ÿéœ€æ±‚ï¼Œä¾›ç»™å—äººå£ã€åå¥½å½±å“ å·¥èµ„ è¾¹é™…äº§é‡ä»·å€¼ã€æŠ€èƒ½ã€åˆ¶åº¦å› ç´  èµ„æœ¬ è·¨æœŸé…ç½®ï¼Œä¾›ç»™å–å†³äºå‚¨è“„ åˆ©æ¯ èµ„æœ¬è¾¹é™…æ•ˆç‡ã€é£é™©ã€æ—¶é—´åå¥½ åœŸåœ° ä¾›ç»™å›ºå®šï¼Œä½ç½®å…³é”® åœ°ç§Ÿ ä½ç½®ä»·å€¼ã€ç”¨é€”éœ€æ±‚ ä¼ä¸šå®¶æ‰èƒ½ åˆ›æ–°ä¸é£é™©æ‰¿æ‹… åˆ©æ¶¦ åˆ›æ–°å›æŠ¥ã€é£é™©æº¢ä»·ã€å„æ–­ç§Ÿé‡‘ å¸‚åœºå¤±çµä¸æ”¿åºœå¹²é¢„ linkå¸‚åœºå¤±çµæ˜¯æŒ‡å¸‚åœºæœºåˆ¶æ— æ³•æœ‰æ•ˆé…ç½®èµ„æºçš„æƒ…å†µï¼Œä¸ºæ”¿åºœå¹²é¢„æä¾›äº†ç†è®ºåŸºç¡€ã€‚æ›¼æ˜†æå‡ºçš„ç¬¬ä¸ƒå¤§ç»æµå­¦åŸç†æŒ‡å‡º\"æ”¿åºœæœ‰æ—¶å¯ä»¥æ”¹å–„å¸‚åœºç»“æœ\"ï¼Œè¿™æ­£æ˜¯å› ä¸ºå¸‚åœºå¹¶éæ€»æ˜¯å®Œç¾è¿è¡Œã€‚å¸‚åœºå¤±çµçš„ä¸»è¦ç±»å‹åŒ…æ‹¬ï¼šå¤–éƒ¨æ€§ã€å…¬å…±ç‰©å“ã€ä¸å®Œå…¨ç«äº‰ã€ä¿¡æ¯ä¸å¯¹ç§°ä»¥åŠæ”¶å…¥åˆ†é…ä¸å¹³ç­‰ã€‚ç†è§£è¿™äº›å¤±çµç°è±¡åŠå…¶è§£å†³æ–¹æ¡ˆï¼Œæœ‰åŠ©äºå¹³è¡¡å¸‚åœºæ•ˆç‡ä¸ç¤¾ä¼šç¦åˆ©ï¼Œæ„å»ºæ›´åˆç†çš„æ··åˆç»æµä½“åˆ¶ã€‚\nå¤–éƒ¨æ€§æŒ‡ç»æµæ´»åŠ¨å¯¹éç›´æ¥å‚ä¸çš„ç¬¬ä¸‰æ–¹äº§ç”Ÿçš„å½±å“ï¼Œåˆ†ä¸ºæ­£å¤–éƒ¨æ€§ï¼ˆå¦‚ç–«è‹—æ¥ç§å‡å°‘ç–¾ç—…ä¼ æ’­ï¼‰å’Œè´Ÿå¤–éƒ¨æ€§ï¼ˆå¦‚å·¥å‚æ±¡æŸ“ï¼‰ã€‚å¤–éƒ¨æ€§å¯¼è‡´å¸‚åœºå‡è¡¡åç¦»ç¤¾ä¼šæœ€ä¼˜â€”â€”è´Ÿå¤–éƒ¨æ€§æ´»åŠ¨è¿‡åº¦ä¾›ç»™ï¼ˆå¦‚æ±¡æŸ“ï¼‰ï¼Œæ­£å¤–éƒ¨æ€§æ´»åŠ¨ä¾›ç»™ä¸è¶³ï¼ˆå¦‚æ•™è‚²ï¼‰ã€‚ç§‘æ–¯å®šç†è®¤ä¸ºå¦‚æœäº§æƒæ˜ç¡®ä¸”äº¤æ˜“æˆæœ¬ä½ï¼Œç§äººè°ˆåˆ¤å¯ä»¥è§£å†³å¤–éƒ¨æ€§é—®é¢˜ï¼Œä½†ç°å®ä¸­å¾€å¾€å­˜åœ¨é«˜äº¤æ˜“æˆæœ¬æˆ–å¤šæ–¹å‚ä¸é—®é¢˜ã€‚ä¾‹å¦‚ï¼Œç©ºæ°”æ±¡æŸ“æ¶‰åŠå¤§é‡æ±¡æŸ“è€…å’Œå—æ±¡æŸ“è€…ï¼Œéš¾ä»¥é€šè¿‡åŒè¾¹è°ˆåˆ¤è§£å†³ã€‚\næ”¿åºœçº æ­£å¤–éƒ¨æ€§çš„æ”¿ç­–å·¥å…·åŒ…æ‹¬ï¼šåº‡å¤ç¨ï¼ˆå¯¹è´Ÿå¤–éƒ¨æ€§å¾ç¨ï¼Œå¦‚ç¢³ç¨ï¼‰ï¼›è¡¥è´´ï¼ˆå¯¹æ­£å¤–éƒ¨æ€§æ´»åŠ¨ï¼Œå¦‚ç ”å‘ç¨æ”¶æŠµå…ï¼‰ï¼›ç›´æ¥ç®¡åˆ¶ï¼ˆå¦‚æ’æ”¾æ ‡å‡†ï¼‰ï¼›ä»¥åŠåˆ›å»ºå¯äº¤æ˜“è®¸å¯è¯å¸‚åœºï¼ˆå¦‚ç¢³æ’æ”¾æƒäº¤æ˜“ï¼‰ã€‚ä¸­å›½2021å¹´å¯åŠ¨çš„å…¨å›½ç¢³æ’æ”¾æƒäº¤æ˜“å¸‚åœºå°±æ˜¯é€šè¿‡è®¾å®šæ€»é‡å¹¶å…è®¸ä¼ä¸šäº¤æ˜“é…é¢ï¼Œä»¥å¸‚åœºæœºåˆ¶å®ç°å‡æ’ç›®æ ‡ã€‚æ•™è‚²è¡¥è´´æ˜¯çº æ­£æ­£å¤–éƒ¨æ€§çš„å…¸å‹ä¾‹å­â€”â€”ä¸ªäººå¯èƒ½ä½ä¼°æ•™è‚²çš„ç¤¾ä¼šæ”¶ç›Šï¼Œå¯¼è‡´æ•™è‚²æŠ•èµ„ä¸è¶³ï¼Œæ”¿åºœé€šè¿‡å…¬ç«‹å­¦æ ¡æˆ–å­¦è´¹è¡¥è´´æé«˜æ•™è‚²æ°´å¹³ã€‚\nå…¬å…±ç‰©å“æ˜¯å…·æœ‰éæ’ä»–æ€§å’Œéç«äº‰æ€§çš„ç‰©å“ï¼Œå¯¼è‡´å¸‚åœºä¾›ç»™ä¸è¶³ã€‚å›½é˜²æ˜¯å…¸å‹å…¬å…±ç‰©å“â€”â€”æ— æ³•æ’é™¤ä»»ä½•äººå—ç›Šï¼ˆéæ’ä»–æ€§ï¼‰ï¼Œä¸€ä¸ªäººäº«å—ä¿æŠ¤ä¸å‡å°‘ä»–äººäº«å—ï¼ˆéç«äº‰æ€§ï¼‰ã€‚å…¬å…±ç‰©å“é¢ä¸´æ­ä¾¿è½¦é—®é¢˜â€”â€”ä¸ªäººæœ‰åŠ¨æœºä¸ä»˜è´¹è€Œäº«å—å¥½å¤„ï¼Œå¯¼è‡´ç§äººä¾›ç»™æ— åˆ©å¯å›¾ã€‚æ”¿åºœé€šè¿‡ç¨æ”¶èèµ„æä¾›å…¬å…±ç‰©å“æ˜¯å¸¸è§è§£å†³æ–¹æ¡ˆã€‚å…¬å…±èµ„æºï¼ˆå¦‚å…¬æµ·æ¸”ä¸šï¼‰åˆ™é¢ä¸´è¿‡åº¦ä½¿ç”¨é—®é¢˜ï¼ˆâ€œå…¬åœ°æ‚²å‰§â€ï¼‰ï¼Œè§£å†³æ–¹æ¡ˆåŒ…æ‹¬ç§æœ‰åŒ–ã€ç®¡åˆ¶æˆ–ä½¿ç”¨è€…åè®®ã€‚ä¾‹å¦‚ï¼Œå›½é™…æ¸”ä¸šç»„ç»‡é€šè¿‡é…é¢é™åˆ¶ä¿æŠ¤é±¼ç±»èµ„æºã€‚\nä¿¡æ¯ä¸å¯¹ç§°æ˜¯å¸‚åœºå¤±çµçš„åˆä¸€é‡è¦åŸå› ï¼Œè¡¨ç°ä¸ºé€†å‘é€‰æ‹©ï¼ˆäº¤æ˜“å‰ä¿¡æ¯ä¸å¯¹ç§°ï¼Œå¦‚æ¬¡å“å¸‚åœºï¼‰å’Œé“å¾·é£é™©ï¼ˆäº¤æ˜“åè¡Œä¸ºä¸å¯è§‚æµ‹ï¼Œå¦‚ä¿é™©åçš„å†’é™©è¡Œä¸ºï¼‰ã€‚äºŒæ‰‹è½¦å¸‚åœºä¸­ï¼Œå–å®¶æ¯”ä¹°å®¶æ›´äº†è§£è½¦å†µï¼Œå¯èƒ½å¯¼è‡´åªæœ‰ä½è´¨é‡è½¦æˆäº¤ï¼ˆâ€œæŸ æª¬å¸‚åœºâ€ï¼‰ã€‚è§£å†³æ–¹æ¡ˆåŒ…æ‹¬ï¼šä¿¡å·å‘é€ï¼ˆå¦‚æ•™è‚²æ–‡å‡­æ˜¾ç¤ºèƒ½åŠ›ï¼‰ï¼›ç­›é€‰ï¼ˆä¿é™©å…¬å¸åŒºåˆ†é«˜é£é™©ä½é£é™©å®¢æˆ·ï¼‰ï¼›æ‹…ä¿å’Œå£°èª‰æœºåˆ¶ï¼›ä»¥åŠæ”¿åºœç›‘ç®¡ï¼ˆå¦‚é£Ÿå“è´¨é‡æ ‡å‡†ï¼‰ã€‚2008å¹´é‡‘èå±æœºéƒ¨åˆ†æºäºå¤æ‚çš„é‡‘èè¡ç”Ÿå“ä½¿ä¹°å®¶éš¾ä»¥è¯„ä¼°é£é™©ï¼Œå‡¸æ˜¾ä¿¡æ¯é€æ˜çš„é‡è¦æ€§ã€‚\nä¸å®Œå…¨ç«äº‰å¸‚åœºï¼ˆå„æ–­ã€å¯¡å¤´ï¼‰ä¹Ÿä¼šå¯¼è‡´å¸‚åœºå¤±çµï¼Œè¡¨ç°ä¸ºäº§é‡ä¸è¶³ã€ä»·æ ¼è¿‡é«˜å’Œåˆ›æ–°æŠ‘åˆ¶ã€‚æ”¿åºœé€šè¿‡åå„æ–­æ³•ï¼ˆå¦‚é˜»æ­¢æœ‰å®³å¹¶è´­ï¼‰ã€ç®¡åˆ¶è‡ªç„¶å„æ–­ä¼ä¸šä»·æ ¼ã€ä¿ƒè¿›å¸‚åœºç«äº‰æ¥åº”å¯¹ã€‚ç¾å›½æ‹†åˆ†AT\u0026Tå’Œæ¬§ç›Ÿå¤„ç½šè°·æ­Œæ»¥ç”¨å¸‚åœºåœ°ä½éƒ½æ˜¯å…¸å‹æ¡ˆä¾‹ã€‚ä½†æ”¿åºœå¹²é¢„ä¹Ÿéœ€è°¨æ…â€”â€”è¿‡åº¦ç®¡åˆ¶å¯èƒ½æŠ‘åˆ¶ä¼ä¸šæ´»åŠ›ï¼Œä¸“åˆ©åˆ¶åº¦å°±æ˜¯åœ¨åˆ›æ–°æ¿€åŠ±ä¸å„æ–­æŸå¤±é—´çš„å¹³è¡¡ã€‚\næ”¿åºœå¹²é¢„æœ¬èº«ä¹Ÿå¯èƒ½å¤±è´¥ï¼Œç§°ä¸ºæ”¿åºœå¤±çµï¼ŒåŸå› åŒ…æ‹¬ï¼šä¿¡æ¯ä¸è¶³ï¼ˆæ”¿åºœéš¾ä»¥ç²¾ç¡®äº†è§£ç¤¾ä¼šåå¥½å’Œç”Ÿäº§å¯èƒ½ï¼‰ï¼›å®˜åƒšä¸»ä¹‰ä½æ•ˆï¼›åˆ©ç›Šé›†å›¢ä¿˜è·ï¼›æ”¿ç­–æ—¶æ»ç­‰ã€‚ä¾‹å¦‚ï¼Œå†œäº§å“ä»·æ ¼æ”¯æŒæ”¿ç­–å¯èƒ½æœ€åˆæ—¨åœ¨ä¿æŠ¤å†œæ°‘æ”¶å…¥ï¼Œä½†æœ€ç»ˆæ¼”å˜æˆä»£ä»·é«˜æ˜‚çš„è¡¥è´´ä½“ç³»ï¼ŒåŒæ—¶æ‰­æ›²ç”Ÿäº§å†³ç­–ã€‚å…¬å…±é€‰æ‹©ç†è®ºè¿ç”¨ç»æµå­¦æ–¹æ³•åˆ†ææ”¿åºœå†³ç­–ï¼Œè®¤ä¸ºæ”¿æ²»å®¶å’Œå®˜å‘˜ä¹Ÿè¿½æ±‚è‡ªèº«åˆ©ç›Šï¼ˆå¦‚é€‰ç¥¨ã€é¢„ç®—æœ€å¤§åŒ–ï¼‰ï¼Œä¸ä¸€å®šä»¥ç¤¾ä¼šç¦åˆ©æœ€å¤§åŒ–ä¸ºç›®æ ‡ã€‚\nç¦åˆ©ç»æµå­¦ä¸ºè¯„ä¼°å¸‚åœºç»“æœå’Œæ”¿åºœæ”¿ç­–æä¾›äº†æ¡†æ¶ã€‚å¸•ç´¯æ‰˜æœ€ä¼˜æ˜¯æŒ‡åœ¨ä¸ä½¿ä»»ä½•äººå˜å·®çš„æƒ…å†µä¸‹æ— æ³•ä½¿æŸäººå˜å¥½çš„èµ„æºé…ç½®çŠ¶æ€ã€‚å®Œå…¨ç«äº‰å¸‚åœºåœ¨ç†è®ºä¸Šèƒ½è¾¾åˆ°å¸•ç´¯æ‰˜æ•ˆç‡ï¼Œä½†ç°å®ä¸­çš„å„ç§å¸‚åœºå¤±çµä½¿è¿™ä¸€ç†æƒ³éš¾ä»¥å®ç°ã€‚è¡¥å¿åŸåˆ™ï¼ˆå¡å°”å¤š-å¸Œå…‹æ–¯æ•ˆç‡ï¼‰è®¤ä¸ºå¦‚æœè·ç›Šè€…èƒ½è¡¥å¿å—æŸè€…è€Œä»æœ‰å‰©ä½™ï¼Œå°±æ˜¯æ•ˆç‡æ”¹è¿›ï¼Œå³ä½¿è¡¥å¿å¹¶æœªå®é™…å‘ç”Ÿã€‚æˆæœ¬-æ”¶ç›Šåˆ†ææ˜¯è¯„ä¼°å…¬å…±é¡¹ç›®çš„é‡è¦å·¥å…·ï¼Œä½†é‡åŒ–ç”Ÿå‘½ä»·å€¼ã€ç¯å¢ƒæŸå¤±ç­‰éå¸‚åœºç‰©å“å­˜åœ¨æŒ‘æˆ˜ã€‚\næ··åˆç»æµä¸­å¸‚åœºä¸æ”¿åºœçš„è¾¹ç•Œæ˜¯æŒç»­äº‰è®®çš„è¯é¢˜ã€‚å¸‚åœºç»æµæ”¯æŒè€…å¼ºè°ƒåˆ†æ•£å†³ç­–ã€æ¿€åŠ±ç›¸å®¹å’ŒåŠ¨æ€æ•ˆç‡ï¼›æ”¿åºœå¹²é¢„å€¡å¯¼è€…åˆ™å…³æ³¨å¸‚åœºå¤±çµã€å…¬å¹³ç›®æ ‡å’Œé•¿æœŸæˆ˜ç•¥éœ€æ±‚ã€‚ä¸œäºšå‘å±•å‹å›½å®¶ï¼ˆå¦‚æ—¥æœ¬ã€éŸ©å›½ï¼‰é€šè¿‡äº§ä¸šæ”¿ç­–å¼•å¯¼ç»æµè½¬å‹å–å¾—æˆåŠŸï¼Œä½†æ‹‰ç¾å›½å®¶çš„æ”¿åºœä¸»å¯¼å·¥ä¸šåŒ–å´å¤šå‘Šå¤±è´¥ï¼Œè¡¨æ˜æ”¿ç­–è®¾è®¡å’Œåˆ¶åº¦ç¯å¢ƒçš„å…³é”®ä½œç”¨ã€‚ç†æƒ³çš„ç»æµä½“åˆ¶å¯èƒ½å› å‘å±•é˜¶æ®µã€æ–‡åŒ–ä¼ ç»Ÿå’Œå…¨çƒç¯å¢ƒè€Œå¼‚ï¼Œä½†æ™®éå…±è¯†æ˜¯éœ€è¦å¸‚åœºæ´»åŠ›ä¸æ”¿åºœè§„åˆ¶çš„é€‚å½“ç»“åˆã€‚\nè¡¨ï¼šä¸»è¦å¸‚åœºå¤±çµç±»å‹åŠå¯¹ç­–\nå¸‚åœºå¤±çµç±»å‹ äº§ç”ŸåŸå›  å¯¼è‡´ç»“æœ æ”¿åºœå¯¹ç­– æ¡ˆä¾‹ è´Ÿå¤–éƒ¨æ€§ ç§äººæˆæœ¬\u003cç¤¾ä¼šæˆæœ¬ è¿‡åº¦ç”Ÿäº§ å¾ç¨ã€ç®¡åˆ¶ã€è®¸å¯è¯ ç¢³ç¨ã€æ±¡æŸ“æ’æ”¾æ ‡å‡† æ­£å¤–éƒ¨æ€§ ç§äººæ”¶ç›Š\u003cç¤¾ä¼šæ”¶ç›Š ä¾›ç»™ä¸è¶³ è¡¥è´´ã€æ”¿åºœæä¾› æ•™è‚²è¡¥è´´ã€åŸºç¡€ç§‘ç ”èµ„åŠ© å…¬å…±ç‰©å“ éæ’ä»–æ€§+éç«äº‰æ€§ å¸‚åœºä¸æä¾› æ”¿åºœç›´æ¥æä¾› å›½é˜²ã€å…¬å…±å…¬å›­ ä¿¡æ¯ä¸å¯¹ç§° ä¹°å–æ–¹ä¿¡æ¯ä¸å‡ é€†å‘é€‰æ‹©/é“å¾·é£é™© ä¿¡æ¯æŠ«éœ²è¦æ±‚ã€æ ‡å‡†åˆ¶å®š é£Ÿå“å®‰å…¨ç›‘ç®¡ã€é‡‘èäº§å“é€æ˜åº¦ å¸‚åœºæƒåŠ› è¿›å…¥å£å’ã€è§„æ¨¡ç»æµ äº§é‡ä¸è¶³ã€ä»·æ ¼è¿‡é«˜ åå„æ–­ã€ä»·æ ¼ç®¡åˆ¶ã€ä¿ƒè¿›ç«äº‰ å¾®è½¯åå„æ–­æ¡ˆã€å…¬ç”¨äº‹ä¸šè´¹ç‡ç›‘ç®¡ "
            }
        );
    index.add(
            {
                id:  8 ,
                href: "\/docs\/develop\/",
                title: "æˆé•¿",
                description: "",
                content: ""
            }
        );
    index.add(
            {
                id:  9 ,
                href: "\/docs\/mix\/list\/",
                title: "æ‘©æ—…æ¸…å•",
                description: "æ—¥å¸¸\nè¯ä»¶ å……ç”µå™¨ å……ç”µå® æ´—æ¼±åŒ… æŒ‡ç”²åˆ€ å°åˆ€ è¢œå­ å†…è£¤ çŸ­è£¤ å¤–å¥— å¸½å­ å«ç”Ÿçº¸ æ¹¿å·¾ åƒåœ¾è¢‹ çº¸ç¬” è£…å¤‡\néª‘è¡Œæœ å¤´ç›” æ‰‹å¥— å¤´å¥— é›¨è¡£ åº”æ€¥\nè¡¥èƒ å¥—ç­’ æ£˜è½®æ‰³æ‰‹ å……æ°”æ³µ é”¯å­ é”¤å­ é’³å­ æ‰å¸¦ å°ºå­ æ±½æ²¹ç“¶ ç”µå·¥èƒ¶å¸ƒ ä¿é™©ä¸ æ‰“ç«æœº æ‰“ç«çŸ³ æŠ½æ²¹ç®¡ èºä¸èƒ¶ çº±å¸ƒ ç¢˜ä¼ é…’ç²¾ åˆ›å¯è´´ è§’é²¨çƒ¯ é£æ²¹ç²¾ å¸ƒæ´›èŠ¬ çº¢éœ‰ç´ è½¯è† éœ²è¥\nå¸ç¯· å«å­ ç¡è¢‹ ç¡å« æ•å¤´ çœ¼ç½© æ¡Œå­ æ¤…å­ ç­·å­ å‹ºå­ ç‚‰å¤´ æ°”ç½ æ¯é”… æ°´è¢‹ ç¯ æ‹æ‘„\nä¸‰è„šæ¶ å…«çˆªé±¼ DJI Action DJI Pocket é£è¡Œå™¨ ",
                content: "æ—¥å¸¸\nè¯ä»¶ å……ç”µå™¨ å……ç”µå® æ´—æ¼±åŒ… æŒ‡ç”²åˆ€ å°åˆ€ è¢œå­ å†…è£¤ çŸ­è£¤ å¤–å¥— å¸½å­ å«ç”Ÿçº¸ æ¹¿å·¾ åƒåœ¾è¢‹ çº¸ç¬” è£…å¤‡\néª‘è¡Œæœ å¤´ç›” æ‰‹å¥— å¤´å¥— é›¨è¡£ åº”æ€¥\nè¡¥èƒ å¥—ç­’ æ£˜è½®æ‰³æ‰‹ å……æ°”æ³µ é”¯å­ é”¤å­ é’³å­ æ‰å¸¦ å°ºå­ æ±½æ²¹ç“¶ ç”µå·¥èƒ¶å¸ƒ ä¿é™©ä¸ æ‰“ç«æœº æ‰“ç«çŸ³ æŠ½æ²¹ç®¡ èºä¸èƒ¶ çº±å¸ƒ ç¢˜ä¼ é…’ç²¾ åˆ›å¯è´´ è§’é²¨çƒ¯ é£æ²¹ç²¾ å¸ƒæ´›èŠ¬ çº¢éœ‰ç´ è½¯è† éœ²è¥\nå¸ç¯· å«å­ ç¡è¢‹ ç¡å« æ•å¤´ çœ¼ç½© æ¡Œå­ æ¤…å­ ç­·å­ å‹ºå­ ç‚‰å¤´ æ°”ç½ æ¯é”… æ°´è¢‹ ç¯ æ‹æ‘„\nä¸‰è„šæ¶ å…«çˆªé±¼ DJI Action DJI Pocket é£è¡Œå™¨ "
            }
        );
    index.add(
            {
                id:  10 ,
                href: "\/docs\/information\/software\/cloud\/k8s_rs_manager\/resources\/",
                title: "èµ„æºå¯¹è±¡",
                description: "ä»¥ä¸‹åˆ—ä¸¾çš„å†…å®¹éƒ½æ˜¯ Kubernetes ä¸­çš„å¯¹è±¡ï¼ˆObjectï¼‰ï¼Œè¿™äº›å¯¹è±¡éƒ½å¯ä»¥åœ¨ YAML æ–‡ä»¶ä¸­ä½œä¸ºä¸€ç§ API ç±»å‹æ¥é…ç½®ã€‚\nPod Node Namespace Service Volume PersistentVolume Deployment Secret StatefulSet DaemonSet ServiceAccount ReplicationController ReplicaSet Job CronJob SecurityContext ResourceQuota LimitRange HorizontalPodAutoscaling Ingress ConfigMap Label CustomResourceDefinition Role ClusterRole æˆ‘å°†å®ƒä»¬ç®€å•çš„åˆ†ç±»ä¸ºä»¥ä¸‹å‡ ç§èµ„æºå¯¹è±¡ï¼š\nç±»åˆ« åç§° èµ„æºå¯¹è±¡ Podã€ReplicaSetã€ReplicationControllerã€Deploymentã€StatefulSetã€DaemonSetã€Jobã€CronJobã€HorizontalPodAutoscalingã€Nodeã€Namespaceã€Serviceã€Ingressã€Labelã€CustomResourceDefinition å­˜å‚¨å¯¹è±¡ Volumeã€PersistentVolumeã€Secretã€ConfigMap ç­–ç•¥å¯¹è±¡ SecurityContextã€ResourceQuotaã€LimitRange èº«ä»½å¯¹è±¡ ServiceAccountã€Roleã€ClusterRole ç†è§£ Kubernetes ä¸­çš„å¯¹è±¡ linkåœ¨ Kubernetes ç³»ç»Ÿä¸­ï¼ŒKubernetes å¯¹è±¡ æ˜¯æŒä¹…åŒ–çš„æ¡ç›®ã€‚Kubernetes ä½¿ç”¨è¿™äº›æ¡ç›®å»è¡¨ç¤ºæ•´ä¸ªé›†ç¾¤çš„çŠ¶æ€ã€‚ç‰¹åˆ«åœ°ï¼Œå®ƒä»¬æè¿°äº†å¦‚ä¸‹ä¿¡æ¯ï¼š\nä»€ä¹ˆå®¹å™¨åŒ–åº”ç”¨åœ¨è¿è¡Œï¼ˆä»¥åŠåœ¨å“ªä¸ª Node ä¸Šï¼‰ å¯ä»¥è¢«åº”ç”¨ä½¿ç”¨çš„èµ„æº å…³äºåº”ç”¨å¦‚ä½•è¡¨ç°çš„ç­–ç•¥ï¼Œæ¯”å¦‚é‡å¯ç­–ç•¥ã€å‡çº§ç­–ç•¥ï¼Œä»¥åŠå®¹é”™ç­–ç•¥ Kubernetes å¯¹è±¡æ˜¯ â€œç›®æ ‡æ€§è®°å½•â€ â€”â€” ä¸€æ—¦åˆ›å»ºå¯¹è±¡ï¼ŒKubernetes ç³»ç»Ÿå°†æŒç»­å·¥ä½œä»¥ç¡®ä¿å¯¹è±¡å­˜åœ¨ã€‚é€šè¿‡åˆ›å»ºå¯¹è±¡ï¼Œå¯ä»¥æœ‰æ•ˆåœ°å‘ŠçŸ¥ Kubernetes ç³»ç»Ÿï¼Œæ‰€éœ€è¦çš„é›†ç¾¤å·¥ä½œè´Ÿè½½çœ‹èµ·æ¥æ˜¯ä»€ä¹ˆæ ·å­çš„ï¼Œè¿™å°±æ˜¯ Kubernetes é›†ç¾¤çš„ æœŸæœ›çŠ¶æ€ã€‚\nä¸ Kubernetes å¯¹è±¡å·¥ä½œ â€”â€” æ˜¯å¦åˆ›å»ºã€ä¿®æ”¹ï¼Œæˆ–è€…åˆ é™¤ â€”â€” éœ€è¦ä½¿ç”¨ Kubernetes APIã€‚å½“ä½¿ç”¨ kubectl å‘½ä»¤è¡Œæ¥å£æ—¶ï¼Œæ¯”å¦‚ï¼ŒCLI ä¼šä½¿ç”¨å¿…è¦çš„ Kubernetes API è°ƒç”¨ï¼Œä¹Ÿå¯ä»¥åœ¨ç¨‹åºä¸­ç›´æ¥ä½¿ç”¨ Kubernetes APIã€‚ä¸ºäº†å®ç°è¯¥ç›®æ ‡ï¼ŒKubernetes å½“å‰æä¾›äº†ä¸€ä¸ª golang å®¢æˆ·ç«¯åº“ ï¼Œå…¶å®ƒè¯­è¨€åº“ï¼ˆä¾‹å¦‚Pythonï¼‰ä¹Ÿæ­£åœ¨å¼€å‘ä¸­ã€‚\n",
                content: "ä»¥ä¸‹åˆ—ä¸¾çš„å†…å®¹éƒ½æ˜¯ Kubernetes ä¸­çš„å¯¹è±¡ï¼ˆObjectï¼‰ï¼Œè¿™äº›å¯¹è±¡éƒ½å¯ä»¥åœ¨ YAML æ–‡ä»¶ä¸­ä½œä¸ºä¸€ç§ API ç±»å‹æ¥é…ç½®ã€‚\nPod Node Namespace Service Volume PersistentVolume Deployment Secret StatefulSet DaemonSet ServiceAccount ReplicationController ReplicaSet Job CronJob SecurityContext ResourceQuota LimitRange HorizontalPodAutoscaling Ingress ConfigMap Label CustomResourceDefinition Role ClusterRole æˆ‘å°†å®ƒä»¬ç®€å•çš„åˆ†ç±»ä¸ºä»¥ä¸‹å‡ ç§èµ„æºå¯¹è±¡ï¼š\nç±»åˆ« åç§° èµ„æºå¯¹è±¡ Podã€ReplicaSetã€ReplicationControllerã€Deploymentã€StatefulSetã€DaemonSetã€Jobã€CronJobã€HorizontalPodAutoscalingã€Nodeã€Namespaceã€Serviceã€Ingressã€Labelã€CustomResourceDefinition å­˜å‚¨å¯¹è±¡ Volumeã€PersistentVolumeã€Secretã€ConfigMap ç­–ç•¥å¯¹è±¡ SecurityContextã€ResourceQuotaã€LimitRange èº«ä»½å¯¹è±¡ ServiceAccountã€Roleã€ClusterRole ç†è§£ Kubernetes ä¸­çš„å¯¹è±¡ linkåœ¨ Kubernetes ç³»ç»Ÿä¸­ï¼ŒKubernetes å¯¹è±¡ æ˜¯æŒä¹…åŒ–çš„æ¡ç›®ã€‚Kubernetes ä½¿ç”¨è¿™äº›æ¡ç›®å»è¡¨ç¤ºæ•´ä¸ªé›†ç¾¤çš„çŠ¶æ€ã€‚ç‰¹åˆ«åœ°ï¼Œå®ƒä»¬æè¿°äº†å¦‚ä¸‹ä¿¡æ¯ï¼š\nä»€ä¹ˆå®¹å™¨åŒ–åº”ç”¨åœ¨è¿è¡Œï¼ˆä»¥åŠåœ¨å“ªä¸ª Node ä¸Šï¼‰ å¯ä»¥è¢«åº”ç”¨ä½¿ç”¨çš„èµ„æº å…³äºåº”ç”¨å¦‚ä½•è¡¨ç°çš„ç­–ç•¥ï¼Œæ¯”å¦‚é‡å¯ç­–ç•¥ã€å‡çº§ç­–ç•¥ï¼Œä»¥åŠå®¹é”™ç­–ç•¥ Kubernetes å¯¹è±¡æ˜¯ â€œç›®æ ‡æ€§è®°å½•â€ â€”â€” ä¸€æ—¦åˆ›å»ºå¯¹è±¡ï¼ŒKubernetes ç³»ç»Ÿå°†æŒç»­å·¥ä½œä»¥ç¡®ä¿å¯¹è±¡å­˜åœ¨ã€‚é€šè¿‡åˆ›å»ºå¯¹è±¡ï¼Œå¯ä»¥æœ‰æ•ˆåœ°å‘ŠçŸ¥ Kubernetes ç³»ç»Ÿï¼Œæ‰€éœ€è¦çš„é›†ç¾¤å·¥ä½œè´Ÿè½½çœ‹èµ·æ¥æ˜¯ä»€ä¹ˆæ ·å­çš„ï¼Œè¿™å°±æ˜¯ Kubernetes é›†ç¾¤çš„ æœŸæœ›çŠ¶æ€ã€‚\nä¸ Kubernetes å¯¹è±¡å·¥ä½œ â€”â€” æ˜¯å¦åˆ›å»ºã€ä¿®æ”¹ï¼Œæˆ–è€…åˆ é™¤ â€”â€” éœ€è¦ä½¿ç”¨ Kubernetes APIã€‚å½“ä½¿ç”¨ kubectl å‘½ä»¤è¡Œæ¥å£æ—¶ï¼Œæ¯”å¦‚ï¼ŒCLI ä¼šä½¿ç”¨å¿…è¦çš„ Kubernetes API è°ƒç”¨ï¼Œä¹Ÿå¯ä»¥åœ¨ç¨‹åºä¸­ç›´æ¥ä½¿ç”¨ Kubernetes APIã€‚ä¸ºäº†å®ç°è¯¥ç›®æ ‡ï¼ŒKubernetes å½“å‰æä¾›äº†ä¸€ä¸ª golang å®¢æˆ·ç«¯åº“ ï¼Œå…¶å®ƒè¯­è¨€åº“ï¼ˆä¾‹å¦‚Pythonï¼‰ä¹Ÿæ­£åœ¨å¼€å‘ä¸­ã€‚\nå¯¹è±¡ Spec ä¸çŠ¶æ€ linkæ¯ä¸ª Kubernetes å¯¹è±¡åŒ…å«ä¸¤ä¸ªåµŒå¥—çš„å¯¹è±¡å­—æ®µï¼Œå®ƒä»¬è´Ÿè´£ç®¡ç†å¯¹è±¡çš„é…ç½®ï¼šå¯¹è±¡ spec å’Œ å¯¹è±¡ statusã€‚spec å¿…é¡»æä¾›ï¼Œå®ƒæè¿°äº†å¯¹è±¡çš„ æœŸæœ›çŠ¶æ€â€”â€” å¸Œæœ›å¯¹è±¡æ‰€å…·æœ‰çš„ç‰¹å¾ã€‚status æè¿°äº†å¯¹è±¡çš„ å®é™…çŠ¶æ€ï¼Œå®ƒæ˜¯ç”± Kubernetes ç³»ç»Ÿæä¾›å’Œæ›´æ–°ã€‚åœ¨ä»»ä½•æ—¶åˆ»ï¼ŒKubernetes æ§åˆ¶å¹³é¢ä¸€ç›´å¤„äºæ´»è·ƒçŠ¶æ€ï¼Œç®¡ç†ç€å¯¹è±¡çš„å®é™…çŠ¶æ€ä»¥ä¸æˆ‘ä»¬æ‰€æœŸæœ›çš„çŠ¶æ€ç›¸åŒ¹é…ã€‚\nä¾‹å¦‚ï¼ŒKubernetes Deployment å¯¹è±¡èƒ½å¤Ÿè¡¨ç¤ºè¿è¡Œåœ¨é›†ç¾¤ä¸­çš„åº”ç”¨ã€‚å½“åˆ›å»º Deployment æ—¶ï¼Œå¯èƒ½éœ€è¦è®¾ç½® Deployment çš„ specï¼Œä»¥æŒ‡å®šè¯¥åº”ç”¨éœ€è¦æœ‰ 3 ä¸ªå‰¯æœ¬åœ¨è¿è¡Œã€‚Kubernetes ç³»ç»Ÿè¯»å– Deployment specï¼Œå¯åŠ¨æˆ‘ä»¬æ‰€æœŸæœ›çš„è¯¥åº”ç”¨çš„ 3 ä¸ªå®ä¾‹ â€”â€” æ›´æ–°çŠ¶æ€ä»¥ä¸ spec ç›¸åŒ¹é…ã€‚å¦‚æœé‚£äº›å®ä¾‹ä¸­æœ‰å¤±è´¥çš„ï¼ˆä¸€ç§çŠ¶æ€å˜æ›´ï¼‰ï¼ŒKubernetes ç³»ç»Ÿé€šè¿‡ä¿®æ­£æ¥å“åº” spec å’ŒçŠ¶æ€ä¹‹é—´çš„ä¸ä¸€è‡´ â€”â€” è¿™ç§æƒ…å†µï¼Œå¯åŠ¨ä¸€ä¸ªæ–°çš„å®ä¾‹æ¥æ›¿æ¢ã€‚\nå…³äºå¯¹è±¡ specã€status å’Œ metadata æ›´å¤šä¿¡æ¯ï¼ŒæŸ¥çœ‹ Kubernetes API Conventionsã€‚\næè¿° Kubernetes å¯¹è±¡ linkå½“åˆ›å»º Kubernetes å¯¹è±¡æ—¶ï¼Œå¿…é¡»æä¾›å¯¹è±¡çš„ specï¼Œç”¨æ¥æè¿°è¯¥å¯¹è±¡çš„æœŸæœ›çŠ¶æ€ï¼Œä»¥åŠå…³äºå¯¹è±¡çš„ä¸€äº›åŸºæœ¬ä¿¡æ¯ï¼ˆä¾‹å¦‚ï¼Œåç§°ï¼‰ã€‚å½“ä½¿ç”¨ Kubernetes API åˆ›å»ºå¯¹è±¡æ—¶ï¼ˆæˆ–è€…ç›´æ¥åˆ›å»ºï¼Œæˆ–è€…åŸºäºkubectlï¼‰ï¼ŒAPI è¯·æ±‚å¿…é¡»åœ¨è¯·æ±‚ä½“ä¸­åŒ…å« JSON æ ¼å¼çš„ä¿¡æ¯ã€‚æ›´å¸¸ç”¨çš„æ˜¯ï¼Œéœ€è¦åœ¨ .yaml æ–‡ä»¶ä¸­ä¸º kubectl æä¾›è¿™äº›ä¿¡æ¯ã€‚ kubectl åœ¨æ‰§è¡Œ API è¯·æ±‚æ—¶ï¼Œå°†è¿™äº›ä¿¡æ¯è½¬æ¢æˆ JSON æ ¼å¼ã€‚\nè¿™é‡Œæœ‰ä¸€ä¸ª .yaml ç¤ºä¾‹æ–‡ä»¶ï¼Œå±•ç¤ºäº† Kubernetes Deployment çš„å¿…éœ€å­—æ®µå’Œå¯¹è±¡ specï¼š\napiVersion: apps/v1beta1 kind: Deployment metadata: name: nginx-deployment spec: replicas: 3 template: metadata: labels: app: nginx spec: containers: - name: nginx image: nginx:1.7.9 ports: - containerPort: 80 ä¸€ç§åˆ›å»º Deployment çš„æ–¹å¼ï¼Œç±»ä¼¼ä¸Šé¢ä½¿ç”¨ .yaml æ–‡ä»¶ï¼Œæ˜¯ä½¿ç”¨ kubectl å‘½ä»¤è¡Œæ¥å£ï¼ˆCLIï¼‰ä¸­çš„ kubectl create å‘½ä»¤ï¼Œä¼ é€’ .yaml ä½œä¸ºå‚æ•°ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼š\n$ kubectl create -f docs/user-guide/nginx-deployment.yaml --record è¾“å‡ºç±»ä¼¼å¦‚ä¸‹è¿™æ ·ï¼š\ndeployment \"nginx-deployment\" created å¿…éœ€å­—æ®µ linkåœ¨æƒ³è¦åˆ›å»ºçš„ Kubernetes å¯¹è±¡å¯¹åº”çš„ .yaml æ–‡ä»¶ä¸­ï¼Œéœ€è¦é…ç½®å¦‚ä¸‹çš„å­—æ®µï¼š\napiVersion - åˆ›å»ºè¯¥å¯¹è±¡æ‰€ä½¿ç”¨çš„ Kubernetes API çš„ç‰ˆæœ¬ kind - æƒ³è¦åˆ›å»ºçš„å¯¹è±¡çš„ç±»å‹ metadata - å¸®åŠ©è¯†åˆ«å¯¹è±¡å”¯ä¸€æ€§çš„æ•°æ®ï¼ŒåŒ…æ‹¬ä¸€ä¸ª name å­—ç¬¦ä¸²ã€UID å’Œå¯é€‰çš„ namespace ä¹Ÿéœ€è¦æä¾›å¯¹è±¡çš„ spec å­—æ®µã€‚å¯¹è±¡ spec çš„ç²¾ç¡®æ ¼å¼å¯¹æ¯ä¸ª Kubernetes å¯¹è±¡æ¥è¯´æ˜¯ä¸åŒçš„ï¼ŒåŒ…å«äº†ç‰¹å®šäºè¯¥å¯¹è±¡çš„åµŒå¥—å­—æ®µã€‚Kubernetes API å‚è€ƒèƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬æ‰¾åˆ°ä»»ä½•æˆ‘ä»¬æƒ³åˆ›å»ºçš„å¯¹è±¡çš„ spec æ ¼å¼ã€‚\n"
            }
        );
    index.add(
            {
                id:  11 ,
                href: "\/docs\/information\/software\/",
                title: "è½¯ä»¶",
                description: "",
                content: ""
            }
        );
    index.add(
            {
                id:  12 ,
                href: "\/docs\/develop\/analysis\/",
                title: "é—®é¢˜åˆ†æï¼š5W2H",
                description: "ä¸€ã€æ–¹æ³•æ¦‚è¿° link5W2Håˆ†ææ³•æ˜¯ä¸€ç§ç»å…¸çš„é—®é¢˜åˆ†æä¸è§£å†³å·¥å…·ï¼Œé€šè¿‡7ä¸ªç»´åº¦ï¼ˆWhatã€Whyã€Whoã€Whenã€Whereã€Howã€How Muchï¼‰å¯¹é—®é¢˜è¿›è¡Œç³»ç»Ÿæ€§æ‹†è§£ï¼Œå¸®åŠ©ç”¨æˆ·å…¨é¢ç†è§£é—®é¢˜æœ¬è´¨ï¼Œåˆ¶å®šæœ‰æ•ˆè¡ŒåŠ¨æ–¹æ¡ˆã€‚è¯¥æ–¹æ³•æœ€æ—©ç”±ç¾å›½é™†å†›åœ¨äºŒæˆ˜æœŸé—´æå‡ºï¼Œåç»ç®¡ç†å­¦ç•Œä¼˜åŒ–æ¨å¹¿ï¼Œç°è¢«å¹¿æ³›åº”ç”¨äºå•†ä¸šå†³ç­–ã€é¡¹ç›®ç®¡ç†ã€é—®é¢˜è¯Šæ–­ç­‰å¤šä¸ªé¢†åŸŸã€‚\näºŒã€æ ¸å¿ƒè¦ç´ è§£æ link Whatï¼ˆä½•äº‹ï¼‰\næ˜ç¡®é—®é¢˜æœ¬è´¨ï¼šâ€œç©¶ç«Ÿå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿéœ€è¦è§£å†³çš„æ ¸å¿ƒæ˜¯ä»€ä¹ˆï¼Ÿâ€\nä¾‹ï¼šæŸç”µå•†å¹³å°ç”¨æˆ·æµå¤±ç‡ä¸Šå‡è‡³20%ï¼ˆæ˜ç¡®ç°è±¡ï¼‰\nWhyï¼ˆä½•å› ï¼‰\nè¿½æº¯æ ¹æºï¼šâ€œå¯¼è‡´é—®é¢˜çš„æ ¹æœ¬åŸå› æ˜¯ä»€ä¹ˆï¼Ÿâ€\nä¾‹ï¼šå› ç‰©æµæ—¶æ•ˆå»¶é•¿å¯¼è‡´ç”¨æˆ·æ»¡æ„åº¦ä¸‹é™ï¼ˆå› æœå…³ç³»åˆ†æï¼‰\nWhoï¼ˆä½•äººï¼‰\nç•Œå®šè´£ä»»ä¸»ä½“ï¼šâ€œé—®é¢˜æ¶‰åŠå“ªäº›äººï¼Ÿè°è´Ÿè´£è§£å†³ï¼Ÿâ€\nä¾‹ï¼šç‰©æµéƒ¨é—¨éœ€ç‰µå¤´æ”¹è¿›ï¼Œå®¢æœå›¢é˜Ÿé…åˆå¤„ç†æŠ•è¯‰\nWhenï¼ˆä½•æ—¶ï¼‰\næ—¶é—´ç»´åº¦ç®¡ç†ï¼šâ€œé—®é¢˜ä½•æ—¶å‘ç”Ÿï¼Ÿè§£å†³æœŸé™ä¸ºä½•æ—¶ï¼Ÿâ€\nä¾‹ï¼šç‰©æµå»¶è¿Ÿè‡ª3æœˆèµ·æŒç»­å‘ç”Ÿï¼Œéœ€åœ¨2å‘¨å†…æ”¹å–„\nWhereï¼ˆä½•åœ°ï¼‰\nç©ºé—´å®šä½ï¼šâ€œé—®é¢˜å‘ç”Ÿçš„å…·ä½“åœºæ™¯æˆ–åŒºåŸŸï¼Ÿâ€\nä¾‹ï¼šåä¸œåœ°åŒºä»“å‚¨ä¸­å¿ƒé…é€å»¶è¯¯æœ€ä¸¥é‡\nHowï¼ˆå¦‚ä½•ï¼‰\nè§£å†³æ–¹æ¡ˆè®¾è®¡ï¼šâ€œé€šè¿‡ä»€ä¹ˆæ–¹æ³•è§£å†³é—®é¢˜ï¼Ÿâ€\nä¾‹ï¼šä¼˜åŒ–ä»“å‚¨å¸ƒå±€+å¼•å…¥æ™ºèƒ½è°ƒåº¦ç³»ç»Ÿ\nHow Muchï¼ˆä½•é‡ï¼‰\né‡åŒ–è¯„ä¼°ï¼šâ€œéœ€è¦å¤šå°‘èµ„æºæŠ•å…¥ï¼Ÿé¢„æœŸæ•ˆæœå¦‚ä½•é‡åŒ–ï¼Ÿâ€\nä¾‹ï¼šæŠ•å…¥50ä¸‡å…ƒç³»ç»Ÿå‡çº§ï¼Œç›®æ ‡3å‘¨å†…æ—¶æ•ˆæå‡30%\nä¸‰ã€åº”ç”¨ä»·å€¼ link ç³»ç»ŸåŒ–æ€ç»´ï¼šé¿å…ç¢ç‰‡åŒ–è®¤çŸ¥ï¼Œ7ç»´åº¦è¦†ç›–é—®é¢˜å…¨è²Œ ç²¾å‡†å®šä½ï¼šé€šè¿‡åˆ†å±‚è¿½é—®ç›´è¾¾é—®é¢˜æ ¸å¿ƒï¼ˆå¦‚ä¸°ç”°\"5ä¸ªä¸ºä»€ä¹ˆ\"çš„å»¶ä¼¸ï¼‰ æ‰§è¡Œå¯¼å‘ï¼šè‡ªç„¶å¯¼å‡ºå¯è½åœ°çš„è¡ŒåŠ¨è®¡åˆ’ æ²Ÿé€šå·¥å…·ï¼šç»“æ„åŒ–æ¡†æ¶æå‡å›¢é˜Ÿåä½œæ•ˆç‡ å››ã€å®æ–½æ­¥éª¤ç¤ºèŒƒï¼ˆä»¥äº§å“æ¨å¹¿ä¸ºä¾‹ï¼‰ link Whatï¼šæ–°äº§å“å¸‚åœºæ¸—é€ç‡æœªè¾¾é¢„æœŸ Whyï¼šç›®æ ‡ç”¨æˆ·è®¤çŸ¥åº¦ä¸è¶³ï¼Œç«å“æŠ¢å å…ˆæœº Whoï¼šå¸‚åœºéƒ¨ä¸»å¯¼ï¼Œé”€å”®éƒ¨ååŒæ‰§è¡Œ Whenï¼šQ2å¯åŠ¨æ¨å¹¿ï¼Œ8æœˆåº•å‰å®Œæˆé¦–é˜¶æ®µ Whereï¼šé‡ç‚¹çªç ´ä¸€çº¿åŸå¸‚KAæ¸ é“ Howï¼šKOLè¥é”€+ä½“éªŒåº—å¿«é—ªæ´»åŠ¨ How Muchï¼šé¢„ç®—120ä¸‡ï¼Œç›®æ ‡è§¦è¾¾50ä¸‡æ½œåœ¨ç”¨æˆ· äº”ã€ä½¿ç”¨å»ºè®® link ç»„åˆåº”ç”¨ï¼šå¯ç»“åˆSWOTã€é±¼éª¨å›¾ç­‰å·¥å…·æ·±åŒ–åˆ†æ åŠ¨æ€è°ƒæ•´ï¼šæ ¹æ®å®æ–½åé¦ˆå¾ªç¯ä¼˜åŒ–å„ç»´åº¦ç­–ç•¥ é¿å…è¯¯åŒºï¼šéœ€åŒºåˆ†å®¢è§‚äº‹å®ä¸ä¸»è§‚æ¨æµ‹ï¼Œç¡®ä¿æ•°æ®æ”¯æ’‘ æ•ˆç‡ä¼˜åŒ–ï¼šä½¿ç”¨æ€ç»´å¯¼å›¾å·¥å…·è¿›è¡Œå¯è§†åŒ–å‘ˆç° ç»“è¯­ link5W2Hä½œä¸ºç»“æ„åŒ–æ€ç»´çš„ç»å…¸æ¡†æ¶ï¼Œå…¶ä»·å€¼åœ¨äºå°†æ··æ²Œçš„é—®é¢˜è½¬åŒ–ä¸ºå¯æ“ä½œçš„è¡ŒåŠ¨è“å›¾ã€‚æŒæ¡è¿™ä¸€æ–¹æ³•ï¼Œæ—¢èƒ½æå‡ä¸ªäººé—®é¢˜åˆ†æèƒ½åŠ›ï¼Œä¹Ÿå¯ä½œä¸ºå›¢é˜Ÿå»ºç«‹ç³»ç»Ÿæ€§å·¥ä½œè¯­è¨€çš„é€šç”¨å·¥å…·ã€‚å»ºè®®åœ¨åˆæœŸä½¿ç”¨æ—¶ä¸¥æ ¼éµå¾ª7è¦ç´ æ¨¡æ¿ï¼Œç†Ÿç»ƒåå¯çµæ´»è°ƒæ•´ç»´åº¦ç»„åˆï¼Œå®ç°å·¥å…·ä¸åœºæ™¯çš„æœ€ä½³é€‚é…ã€‚\n",
                content: "ä¸€ã€æ–¹æ³•æ¦‚è¿° link5W2Håˆ†ææ³•æ˜¯ä¸€ç§ç»å…¸çš„é—®é¢˜åˆ†æä¸è§£å†³å·¥å…·ï¼Œé€šè¿‡7ä¸ªç»´åº¦ï¼ˆWhatã€Whyã€Whoã€Whenã€Whereã€Howã€How Muchï¼‰å¯¹é—®é¢˜è¿›è¡Œç³»ç»Ÿæ€§æ‹†è§£ï¼Œå¸®åŠ©ç”¨æˆ·å…¨é¢ç†è§£é—®é¢˜æœ¬è´¨ï¼Œåˆ¶å®šæœ‰æ•ˆè¡ŒåŠ¨æ–¹æ¡ˆã€‚è¯¥æ–¹æ³•æœ€æ—©ç”±ç¾å›½é™†å†›åœ¨äºŒæˆ˜æœŸé—´æå‡ºï¼Œåç»ç®¡ç†å­¦ç•Œä¼˜åŒ–æ¨å¹¿ï¼Œç°è¢«å¹¿æ³›åº”ç”¨äºå•†ä¸šå†³ç­–ã€é¡¹ç›®ç®¡ç†ã€é—®é¢˜è¯Šæ–­ç­‰å¤šä¸ªé¢†åŸŸã€‚\näºŒã€æ ¸å¿ƒè¦ç´ è§£æ link Whatï¼ˆä½•äº‹ï¼‰\næ˜ç¡®é—®é¢˜æœ¬è´¨ï¼šâ€œç©¶ç«Ÿå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿéœ€è¦è§£å†³çš„æ ¸å¿ƒæ˜¯ä»€ä¹ˆï¼Ÿâ€\nä¾‹ï¼šæŸç”µå•†å¹³å°ç”¨æˆ·æµå¤±ç‡ä¸Šå‡è‡³20%ï¼ˆæ˜ç¡®ç°è±¡ï¼‰\nWhyï¼ˆä½•å› ï¼‰\nè¿½æº¯æ ¹æºï¼šâ€œå¯¼è‡´é—®é¢˜çš„æ ¹æœ¬åŸå› æ˜¯ä»€ä¹ˆï¼Ÿâ€\nä¾‹ï¼šå› ç‰©æµæ—¶æ•ˆå»¶é•¿å¯¼è‡´ç”¨æˆ·æ»¡æ„åº¦ä¸‹é™ï¼ˆå› æœå…³ç³»åˆ†æï¼‰\nWhoï¼ˆä½•äººï¼‰\nç•Œå®šè´£ä»»ä¸»ä½“ï¼šâ€œé—®é¢˜æ¶‰åŠå“ªäº›äººï¼Ÿè°è´Ÿè´£è§£å†³ï¼Ÿâ€\nä¾‹ï¼šç‰©æµéƒ¨é—¨éœ€ç‰µå¤´æ”¹è¿›ï¼Œå®¢æœå›¢é˜Ÿé…åˆå¤„ç†æŠ•è¯‰\nWhenï¼ˆä½•æ—¶ï¼‰\næ—¶é—´ç»´åº¦ç®¡ç†ï¼šâ€œé—®é¢˜ä½•æ—¶å‘ç”Ÿï¼Ÿè§£å†³æœŸé™ä¸ºä½•æ—¶ï¼Ÿâ€\nä¾‹ï¼šç‰©æµå»¶è¿Ÿè‡ª3æœˆèµ·æŒç»­å‘ç”Ÿï¼Œéœ€åœ¨2å‘¨å†…æ”¹å–„\nWhereï¼ˆä½•åœ°ï¼‰\nç©ºé—´å®šä½ï¼šâ€œé—®é¢˜å‘ç”Ÿçš„å…·ä½“åœºæ™¯æˆ–åŒºåŸŸï¼Ÿâ€\nä¾‹ï¼šåä¸œåœ°åŒºä»“å‚¨ä¸­å¿ƒé…é€å»¶è¯¯æœ€ä¸¥é‡\nHowï¼ˆå¦‚ä½•ï¼‰\nè§£å†³æ–¹æ¡ˆè®¾è®¡ï¼šâ€œé€šè¿‡ä»€ä¹ˆæ–¹æ³•è§£å†³é—®é¢˜ï¼Ÿâ€\nä¾‹ï¼šä¼˜åŒ–ä»“å‚¨å¸ƒå±€+å¼•å…¥æ™ºèƒ½è°ƒåº¦ç³»ç»Ÿ\nHow Muchï¼ˆä½•é‡ï¼‰\né‡åŒ–è¯„ä¼°ï¼šâ€œéœ€è¦å¤šå°‘èµ„æºæŠ•å…¥ï¼Ÿé¢„æœŸæ•ˆæœå¦‚ä½•é‡åŒ–ï¼Ÿâ€\nä¾‹ï¼šæŠ•å…¥50ä¸‡å…ƒç³»ç»Ÿå‡çº§ï¼Œç›®æ ‡3å‘¨å†…æ—¶æ•ˆæå‡30%\nä¸‰ã€åº”ç”¨ä»·å€¼ link ç³»ç»ŸåŒ–æ€ç»´ï¼šé¿å…ç¢ç‰‡åŒ–è®¤çŸ¥ï¼Œ7ç»´åº¦è¦†ç›–é—®é¢˜å…¨è²Œ ç²¾å‡†å®šä½ï¼šé€šè¿‡åˆ†å±‚è¿½é—®ç›´è¾¾é—®é¢˜æ ¸å¿ƒï¼ˆå¦‚ä¸°ç”°\"5ä¸ªä¸ºä»€ä¹ˆ\"çš„å»¶ä¼¸ï¼‰ æ‰§è¡Œå¯¼å‘ï¼šè‡ªç„¶å¯¼å‡ºå¯è½åœ°çš„è¡ŒåŠ¨è®¡åˆ’ æ²Ÿé€šå·¥å…·ï¼šç»“æ„åŒ–æ¡†æ¶æå‡å›¢é˜Ÿåä½œæ•ˆç‡ å››ã€å®æ–½æ­¥éª¤ç¤ºèŒƒï¼ˆä»¥äº§å“æ¨å¹¿ä¸ºä¾‹ï¼‰ link Whatï¼šæ–°äº§å“å¸‚åœºæ¸—é€ç‡æœªè¾¾é¢„æœŸ Whyï¼šç›®æ ‡ç”¨æˆ·è®¤çŸ¥åº¦ä¸è¶³ï¼Œç«å“æŠ¢å å…ˆæœº Whoï¼šå¸‚åœºéƒ¨ä¸»å¯¼ï¼Œé”€å”®éƒ¨ååŒæ‰§è¡Œ Whenï¼šQ2å¯åŠ¨æ¨å¹¿ï¼Œ8æœˆåº•å‰å®Œæˆé¦–é˜¶æ®µ Whereï¼šé‡ç‚¹çªç ´ä¸€çº¿åŸå¸‚KAæ¸ é“ Howï¼šKOLè¥é”€+ä½“éªŒåº—å¿«é—ªæ´»åŠ¨ How Muchï¼šé¢„ç®—120ä¸‡ï¼Œç›®æ ‡è§¦è¾¾50ä¸‡æ½œåœ¨ç”¨æˆ· äº”ã€ä½¿ç”¨å»ºè®® link ç»„åˆåº”ç”¨ï¼šå¯ç»“åˆSWOTã€é±¼éª¨å›¾ç­‰å·¥å…·æ·±åŒ–åˆ†æ åŠ¨æ€è°ƒæ•´ï¼šæ ¹æ®å®æ–½åé¦ˆå¾ªç¯ä¼˜åŒ–å„ç»´åº¦ç­–ç•¥ é¿å…è¯¯åŒºï¼šéœ€åŒºåˆ†å®¢è§‚äº‹å®ä¸ä¸»è§‚æ¨æµ‹ï¼Œç¡®ä¿æ•°æ®æ”¯æ’‘ æ•ˆç‡ä¼˜åŒ–ï¼šä½¿ç”¨æ€ç»´å¯¼å›¾å·¥å…·è¿›è¡Œå¯è§†åŒ–å‘ˆç° ç»“è¯­ link5W2Hä½œä¸ºç»“æ„åŒ–æ€ç»´çš„ç»å…¸æ¡†æ¶ï¼Œå…¶ä»·å€¼åœ¨äºå°†æ··æ²Œçš„é—®é¢˜è½¬åŒ–ä¸ºå¯æ“ä½œçš„è¡ŒåŠ¨è“å›¾ã€‚æŒæ¡è¿™ä¸€æ–¹æ³•ï¼Œæ—¢èƒ½æå‡ä¸ªäººé—®é¢˜åˆ†æèƒ½åŠ›ï¼Œä¹Ÿå¯ä½œä¸ºå›¢é˜Ÿå»ºç«‹ç³»ç»Ÿæ€§å·¥ä½œè¯­è¨€çš„é€šç”¨å·¥å…·ã€‚å»ºè®®åœ¨åˆæœŸä½¿ç”¨æ—¶ä¸¥æ ¼éµå¾ª7è¦ç´ æ¨¡æ¿ï¼Œç†Ÿç»ƒåå¯çµæ´»è°ƒæ•´ç»´åº¦ç»„åˆï¼Œå®ç°å·¥å…·ä¸åœºæ™¯çš„æœ€ä½³é€‚é…ã€‚\n"
            }
        );
    index.add(
            {
                id:  13 ,
                href: "\/docs\/information\/software\/cloud\/storage\/configmap\/",
                title: "ConfigMap",
                description: "å…¶å® ConfigMap åŠŸèƒ½åœ¨ Kubernetes1.2 ç‰ˆæœ¬çš„æ—¶å€™å°±æœ‰äº†ï¼Œè®¸å¤šåº”ç”¨ç¨‹åºä¼šä»é…ç½®æ–‡ä»¶ã€å‘½ä»¤è¡Œå‚æ•°æˆ–ç¯å¢ƒå˜é‡ä¸­è¯»å–é…ç½®ä¿¡æ¯ã€‚è¿™äº›é…ç½®ä¿¡æ¯éœ€è¦ä¸ docker image è§£è€¦ï¼Œä½ æ€»ä¸èƒ½æ¯ä¿®æ”¹ä¸€ä¸ªé…ç½®å°±é‡åšä¸€ä¸ª image å§ï¼ŸConfigMap API ç»™æˆ‘ä»¬æä¾›äº†å‘å®¹å™¨ä¸­æ³¨å…¥é…ç½®ä¿¡æ¯çš„æœºåˆ¶ï¼ŒConfigMap å¯ä»¥è¢«ç”¨æ¥ä¿å­˜å•ä¸ªå±æ€§ï¼Œä¹Ÿå¯ä»¥ç”¨æ¥ä¿å­˜æ•´ä¸ªé…ç½®æ–‡ä»¶æˆ–è€… JSON äºŒè¿›åˆ¶å¤§å¯¹è±¡ã€‚\nConfigMap æ¦‚è§ˆ linkConfigMap API èµ„æºç”¨æ¥ä¿å­˜ key-value pair é…ç½®æ•°æ®ï¼Œè¿™ä¸ªæ•°æ®å¯ä»¥åœ¨ pods é‡Œä½¿ç”¨ï¼Œæˆ–è€…è¢«ç”¨æ¥ä¸ºåƒ controller ä¸€æ ·çš„ç³»ç»Ÿç»„ä»¶å­˜å‚¨é…ç½®æ•°æ®ã€‚è™½ç„¶ ConfigMap è·Ÿ Secrets ç±»ä¼¼ï¼Œä½†æ˜¯ ConfigMap æ›´æ–¹ä¾¿çš„å¤„ç†ä¸å«æ•æ„Ÿä¿¡æ¯çš„å­—ç¬¦ä¸²ã€‚ æ³¨æ„ï¼šConfigMaps ä¸æ˜¯å±æ€§é…ç½®æ–‡ä»¶çš„æ›¿ä»£å“ã€‚ConfigMaps åªæ˜¯ä½œä¸ºå¤šä¸ª properties æ–‡ä»¶çš„å¼•ç”¨ã€‚ä½ å¯ä»¥æŠŠå®ƒç†è§£ä¸º Linux ç³»ç»Ÿä¸­çš„ /etc ç›®å½•ï¼Œä¸“é—¨ç”¨æ¥å­˜å‚¨é…ç½®æ–‡ä»¶çš„ç›®å½•ã€‚ä¸‹é¢ä¸¾ä¸ªä¾‹å­ï¼Œä½¿ç”¨ ConfigMap é…ç½®æ¥åˆ›å»º Kubernetes Volumesï¼ŒConfigMap ä¸­çš„æ¯ä¸ª data é¡¹éƒ½ä¼šæˆä¸ºä¸€ä¸ªæ–°æ–‡ä»¶ã€‚\n",
                content: "å…¶å® ConfigMap åŠŸèƒ½åœ¨ Kubernetes1.2 ç‰ˆæœ¬çš„æ—¶å€™å°±æœ‰äº†ï¼Œè®¸å¤šåº”ç”¨ç¨‹åºä¼šä»é…ç½®æ–‡ä»¶ã€å‘½ä»¤è¡Œå‚æ•°æˆ–ç¯å¢ƒå˜é‡ä¸­è¯»å–é…ç½®ä¿¡æ¯ã€‚è¿™äº›é…ç½®ä¿¡æ¯éœ€è¦ä¸ docker image è§£è€¦ï¼Œä½ æ€»ä¸èƒ½æ¯ä¿®æ”¹ä¸€ä¸ªé…ç½®å°±é‡åšä¸€ä¸ª image å§ï¼ŸConfigMap API ç»™æˆ‘ä»¬æä¾›äº†å‘å®¹å™¨ä¸­æ³¨å…¥é…ç½®ä¿¡æ¯çš„æœºåˆ¶ï¼ŒConfigMap å¯ä»¥è¢«ç”¨æ¥ä¿å­˜å•ä¸ªå±æ€§ï¼Œä¹Ÿå¯ä»¥ç”¨æ¥ä¿å­˜æ•´ä¸ªé…ç½®æ–‡ä»¶æˆ–è€… JSON äºŒè¿›åˆ¶å¤§å¯¹è±¡ã€‚\nConfigMap æ¦‚è§ˆ linkConfigMap API èµ„æºç”¨æ¥ä¿å­˜ key-value pair é…ç½®æ•°æ®ï¼Œè¿™ä¸ªæ•°æ®å¯ä»¥åœ¨ pods é‡Œä½¿ç”¨ï¼Œæˆ–è€…è¢«ç”¨æ¥ä¸ºåƒ controller ä¸€æ ·çš„ç³»ç»Ÿç»„ä»¶å­˜å‚¨é…ç½®æ•°æ®ã€‚è™½ç„¶ ConfigMap è·Ÿ Secrets ç±»ä¼¼ï¼Œä½†æ˜¯ ConfigMap æ›´æ–¹ä¾¿çš„å¤„ç†ä¸å«æ•æ„Ÿä¿¡æ¯çš„å­—ç¬¦ä¸²ã€‚ æ³¨æ„ï¼šConfigMaps ä¸æ˜¯å±æ€§é…ç½®æ–‡ä»¶çš„æ›¿ä»£å“ã€‚ConfigMaps åªæ˜¯ä½œä¸ºå¤šä¸ª properties æ–‡ä»¶çš„å¼•ç”¨ã€‚ä½ å¯ä»¥æŠŠå®ƒç†è§£ä¸º Linux ç³»ç»Ÿä¸­çš„ /etc ç›®å½•ï¼Œä¸“é—¨ç”¨æ¥å­˜å‚¨é…ç½®æ–‡ä»¶çš„ç›®å½•ã€‚ä¸‹é¢ä¸¾ä¸ªä¾‹å­ï¼Œä½¿ç”¨ ConfigMap é…ç½®æ¥åˆ›å»º Kubernetes Volumesï¼ŒConfigMap ä¸­çš„æ¯ä¸ª data é¡¹éƒ½ä¼šæˆä¸ºä¸€ä¸ªæ–°æ–‡ä»¶ã€‚\nkind: ConfigMap apiVersion: v1 metadata: creationTimestamp: 2016-02-18T19:14:38Z name: example-config namespace: default data: example.property.1: hello example.property.2: world example.property.file: |- property.1=value-1 property.2=value-2 property.3=value-3 data ä¸€æ åŒ…æ‹¬äº†é…ç½®æ•°æ®ï¼ŒConfigMap å¯ä»¥è¢«ç”¨æ¥ä¿å­˜å•ä¸ªå±æ€§ï¼Œä¹Ÿå¯ä»¥ç”¨æ¥ä¿å­˜ä¸€ä¸ªé…ç½®æ–‡ä»¶ã€‚ é…ç½®æ•°æ®å¯ä»¥é€šè¿‡å¾ˆå¤šç§æ–¹å¼åœ¨ Pods é‡Œè¢«ä½¿ç”¨ã€‚ConfigMaps å¯ä»¥è¢«ç”¨æ¥ï¼š\nè®¾ç½®ç¯å¢ƒå˜é‡çš„å€¼ åœ¨å®¹å™¨é‡Œè®¾ç½®å‘½ä»¤è¡Œå‚æ•° åœ¨æ•°æ®å·é‡Œé¢åˆ›å»º config æ–‡ä»¶ ç”¨æˆ·å’Œç³»ç»Ÿç»„ä»¶ä¸¤è€…éƒ½å¯ä»¥åœ¨ ConfigMap é‡Œé¢å­˜å‚¨é…ç½®æ•°æ®ã€‚\nå…¶å®ä¸ç”¨çœ‹ä¸‹é¢çš„æ–‡ç« ï¼Œç›´æ¥ä» kubectl create configmap -h çš„å¸®åŠ©ä¿¡æ¯ä¸­å°±å¯ä»¥å¯¹ ConfigMap ç©¶ç«Ÿå¦‚ä½•åˆ›å»ºç•¥çŸ¥ä¸€äºŒäº†ã€‚\nExamples: # Create a new configmap named my-config based on folder bar kubectl create configmap my-config --from-file=path/to/bar # Create a new configmap named my-config with specified keys instead of file basenames on disk kubectl create configmap my-config --from-file=key1=/path/to/bar/file1.txt --from-file=key2=/path/to/bar/file2.txt # Create a new configmap named my-config with key1=config1 and key2=config2 kubectl create configmap my-config --from-literal=key1=config1 --from-literal=key2=config2 åˆ›å»º ConfigMaps linkå¯ä»¥ä½¿ç”¨è¯¥å‘½ä»¤ï¼Œç”¨ç»™å®šå€¼ã€æ–‡ä»¶æˆ–ç›®å½•æ¥åˆ›å»º ConfigMapã€‚\nkubectl create configmap ä½¿ç”¨ç›®å½•åˆ›å»º linkæ¯”å¦‚æˆ‘ä»¬å·²ç»æœ‰äº†ä¸€äº›é…ç½®æ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«äº†æˆ‘ä»¬æƒ³è¦è®¾ç½®çš„ ConfigMap çš„å€¼ï¼š\n$ ls docs/user-guide/configmap/kubectl/ game.properties ui.properties $ cat docs/user-guide/configmap/kubectl/game.properties enemies=aliens lives=3 enemies.cheat=true enemies.cheat.level=noGoodRotten secret.code.passphrase=UUDDLRLRBABAS secret.code.allowed=true secret.code.lives=30 $ cat docs/user-guide/configmap/kubectl/ui.properties color.good=purple color.bad=yellow allow.textmode=true how.nice.to.look=fairlyNice ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤å¯ä»¥åˆ›å»ºä¸€ä¸ªåŒ…å«ç›®å½•ä¸­æ‰€æœ‰æ–‡ä»¶çš„ ConfigMapã€‚\n$ kubectl create configmap game-config --from-file=docs/user-guide/configmap/kubectl â€”from-file æŒ‡å®šåœ¨ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶éƒ½ä¼šè¢«ç”¨åœ¨ ConfigMap é‡Œé¢åˆ›å»ºä¸€ä¸ªé”®å€¼å¯¹ï¼Œé”®çš„åå­—å°±æ˜¯æ–‡ä»¶åï¼Œå€¼å°±æ˜¯æ–‡ä»¶çš„å†…å®¹ã€‚\nè®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹è¿™ä¸ªå‘½ä»¤åˆ›å»ºçš„ ConfigMapï¼š\n$ kubectl describe configmaps game-config Name: game-config Namespace: default Labels: Annotations: Data ==== game.properties: 158 bytes ui.properties: 83 bytes æˆ‘ä»¬å¯ä»¥çœ‹åˆ°é‚£ä¸¤ä¸ª key æ˜¯ä» kubectl æŒ‡å®šçš„ç›®å½•ä¸­çš„æ–‡ä»¶åã€‚è¿™äº› key çš„å†…å®¹å¯èƒ½ä¼šå¾ˆå¤§ï¼Œæ‰€ä»¥åœ¨ kubectl describe çš„è¾“å‡ºä¸­ï¼Œåªèƒ½å¤Ÿçœ‹åˆ°é”®çš„åå­—å’Œä»–ä»¬çš„å¤§å°ã€‚ å¦‚æœæƒ³è¦çœ‹åˆ°é”®çš„å€¼çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨ kubectl getï¼š\n$ kubectl get configmaps game-config -o yaml æˆ‘ä»¬ä»¥ yaml æ ¼å¼è¾“å‡ºé…ç½®ã€‚\napiVersion: v1 data: game.properties: | enemies=aliens lives=3 enemies.cheat=true enemies.cheat.level=noGoodRotten secret.code.passphrase=UUDDLRLRBABAS secret.code.allowed=true secret.code.lives=30 ui.properties: | color.good=purple color.bad=yellow allow.textmode=true how.nice.to.look=fairlyNice kind: ConfigMap metadata: creationTimestamp: 2016-02-18T18:34:05Z name: game-config namespace: default resourceVersion: \"407\" selfLink: /api/v1/namespaces/default/configmaps/game-config uid: 30944725-d66e-11e5-8cd0-68f728db1985 ä½¿ç”¨æ–‡ä»¶åˆ›å»º linkåˆšæ‰ä½¿ç”¨ç›®å½•åˆ›å»ºçš„æ—¶å€™æˆ‘ä»¬ â€”from-file æŒ‡å®šçš„æ˜¯ä¸€ä¸ªç›®å½•ï¼Œåªè¦æŒ‡å®šä¸ºä¸€ä¸ªæ–‡ä»¶å°±å¯ä»¥ä»å•ä¸ªæ–‡ä»¶ä¸­åˆ›å»º ConfigMapã€‚\n$ kubectl create configmap game-config-2 --from-file=docs/user-guide/configmap/kubectl/game.properties $ kubectl get configmaps game-config-2 -o yaml apiVersion: v1 data: game-special-key: | enemies=aliens lives=3 enemies.cheat=true enemies.cheat.level=noGoodRotten secret.code.passphrase=UUDDLRLRBABAS secret.code.allowed=true secret.code.lives=30 kind: ConfigMap metadata: creationTimestamp: 2016-02-18T18:54:22Z name: game-config-3 namespace: default resourceVersion: \"530\" selfLink: /api/v1/namespaces/default/configmaps/game-config-3 uid: 05f8da22-d671-11e5-8cd0-68f728db1985 â€”from-file è¿™ä¸ªå‚æ•°å¯ä»¥ä½¿ç”¨å¤šæ¬¡ï¼Œä½ å¯ä»¥ä½¿ç”¨ä¸¤æ¬¡åˆ†åˆ«æŒ‡å®šä¸Šä¸ªå®ä¾‹ä¸­çš„é‚£ä¸¤ä¸ªé…ç½®æ–‡ä»¶ï¼Œæ•ˆæœå°±è·ŸæŒ‡å®šæ•´ä¸ªç›®å½•æ˜¯ä¸€æ ·çš„ã€‚\nä½¿ç”¨å­—é¢å€¼åˆ›å»º linkä½¿ç”¨æ–‡å­—å€¼åˆ›å»ºï¼Œåˆ©ç”¨ â€”from-literal å‚æ•°ä¼ é€’é…ç½®ä¿¡æ¯ï¼Œè¯¥å‚æ•°å¯ä»¥ä½¿ç”¨å¤šæ¬¡ï¼Œæ ¼å¼å¦‚ä¸‹ï¼›\n$ kubectl create configmap special-config --from-literal=special.how=very --from-literal=special.type=charm $ kubectl get configmaps special-config -o yaml apiVersion: v1 data: special.how: very special.type: charm kind: ConfigMap metadata: creationTimestamp: 2016-02-18T19:14:38Z name: special-config namespace: default resourceVersion: \"651\" selfLink: /api/v1/namespaces/default/configmaps/special-config uid: dadce046-d673-11e5-8cd0-68f728db1985 Pod ä¸­ä½¿ç”¨ ConfigMap linkä½¿ç”¨ ConfigMap æ¥æ›¿ä»£ç¯å¢ƒå˜é‡\nConfigMap å¯ä»¥è¢«ç”¨æ¥å¡«å…¥ç¯å¢ƒå˜é‡ã€‚çœ‹ä¸‹ä¸‹é¢çš„ ConfigMapã€‚\napiVersion: v1 kind: ConfigMap metadata: name: special-config namespace: default data: special.how: very special.type: charm apiVersion: v1 kind: ConfigMap metadata: name: env-config namespace: default data: log_level: INFO æˆ‘ä»¬å¯ä»¥åœ¨ Pod ä¸­è¿™æ ·ä½¿ç”¨ ConfigMapï¼š\napiVersion: v1 kind: Pod metadata: name: dapi-test-pod spec: containers: - name: test-container image: gcr.io/google_containers/busybox command: [ \"/bin/sh\", \"-c\", \"env\" ] env: - name: SPECIAL_LEVEL_KEY valueFrom: configMapKeyRef: name: special-config key: special.how - name: SPECIAL_TYPE_KEY valueFrom: configMapKeyRef: name: special-config key: special.type envFrom: - configMapRef: name: env-config restartPolicy: Never è¿™ä¸ª Pod è¿è¡Œåä¼šè¾“å‡ºå¦‚ä¸‹å‡ è¡Œï¼š\nSPECIAL_LEVEL_KEY=very SPECIAL_TYPE_KEY=charm log_level=INFO ç”¨ ConfigMap è®¾ç½®å‘½ä»¤è¡Œå‚æ•°\nConfigMap ä¹Ÿå¯ä»¥è¢«ä½¿ç”¨æ¥è®¾ç½®å®¹å™¨ä¸­çš„å‘½ä»¤æˆ–è€…å‚æ•°å€¼ã€‚å®ƒä½¿ç”¨çš„æ˜¯ Kubernetes çš„ $(VAR_NAME) æ›¿æ¢è¯­æ³•ã€‚æˆ‘ä»¬çœ‹ä¸‹ä¸‹é¢è¿™ä¸ª ConfigMapã€‚\napiVersion: v1 kind: ConfigMap metadata: name: special-config namespace: default data: special.how: very special.type: charm ä¸ºäº†å°† ConfigMap ä¸­çš„å€¼æ³¨å…¥åˆ°å‘½ä»¤è¡Œçš„å‚æ•°é‡Œé¢ï¼Œæˆ‘ä»¬è¿˜è¦åƒå‰é¢é‚£ä¸ªä¾‹å­ä¸€æ ·ä½¿ç”¨ç¯å¢ƒå˜é‡æ›¿æ¢è¯­æ³• ${VAR_NAME)ã€‚ï¼ˆå…¶å®è¿™ä¸ªä¸œè¥¿å°±æ˜¯ç»™ Docker å®¹å™¨è®¾ç½®ç¯å¢ƒå˜é‡ï¼Œä»¥å‰æˆ‘åˆ›å»ºé•œåƒçš„æ—¶å€™ç»å¸¸è¿™ä¹ˆç©ï¼Œé€šè¿‡ docker run çš„æ—¶å€™æŒ‡å®š - e å‚æ•°ä¿®æ”¹é•œåƒé‡Œçš„ç¯å¢ƒå˜é‡ï¼Œç„¶å docker çš„ CMD å‘½ä»¤å†åˆ©ç”¨è¯¥ $(VAR_NAME) é€šè¿‡ sed æ¥ä¿®æ”¹é…ç½®æ–‡ä»¶æˆ–è€…ä½œä¸ºå‘½ä»¤è¡Œå¯åŠ¨å‚æ•°ã€‚ï¼‰\napiVersion: v1 kind: Pod metadata: name: dapi-test-pod spec: containers: - name: test-container image: gcr.io/google_containers/busybox command: [ \"/bin/sh\", \"-c\", \"echo $(SPECIAL_LEVEL_KEY) $(SPECIAL_TYPE_KEY)\" ] env: - name: SPECIAL_LEVEL_KEY valueFrom: configMapKeyRef: name: special-config key: special.how - name: SPECIAL_TYPE_KEY valueFrom: configMapKeyRef: name: special-config key: special.type restartPolicy: Never è¿è¡Œè¿™ä¸ª Pod åä¼šè¾“å‡ºï¼š\nvery charm é€šè¿‡æ•°æ®å·æ’ä»¶ä½¿ç”¨ ConfigMap\nConfigMap ä¹Ÿå¯ä»¥åœ¨æ•°æ®å·é‡Œé¢è¢«ä½¿ç”¨ã€‚è¿˜æ˜¯è¿™ä¸ª ConfigMapã€‚\napiVersion: v1 kind: ConfigMap metadata: name: special-config namespace: default data: special.how: very special.type: charm åœ¨æ•°æ®å·é‡Œé¢ä½¿ç”¨è¿™ä¸ª ConfigMapï¼Œæœ‰ä¸åŒçš„é€‰é¡¹ã€‚æœ€åŸºæœ¬çš„å°±æ˜¯å°†æ–‡ä»¶å¡«å…¥æ•°æ®å·ï¼Œåœ¨è¿™ä¸ªæ–‡ä»¶ä¸­ï¼Œé”®å°±æ˜¯æ–‡ä»¶åï¼Œé”®å€¼å°±æ˜¯æ–‡ä»¶å†…å®¹ï¼š\napiVersion: v1 kind: Pod metadata: name: dapi-test-pod spec: containers: - name: test-container image: gcr.io/google_containers/busybox command: [ \"/bin/sh\", \"-c\", \"cat /etc/config/special.how\" ] volumeMounts: - name: config-volume mountPath: /etc/config volumes: - name: config-volume configMap: name: special-config restartPolicy: Never è¿è¡Œè¿™ä¸ª Pod çš„è¾“å‡ºæ˜¯ veryã€‚\næˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨ ConfigMap å€¼è¢«æ˜ å°„çš„æ•°æ®å·é‡Œæ§åˆ¶è·¯å¾„ã€‚\napiVersion: v1 kind: Pod metadata: name: dapi-test-pod spec: containers: - name: test-container image: gcr.io/google_containers/busybox command: [ \"/bin/sh\",\"-c\",\"cat /etc/config/path/to/special-key\" ] volumeMounts: - name: config-volume mountPath: /etc/config volumes: - name: config-volume configMap: name: special-config items: - key: special.how path: path/to/special-key restartPolicy: Never è¿è¡Œè¿™ä¸ª Pod åçš„ç»“æœæ˜¯ veryã€‚\nçƒ­æ›´æ–° linkConfigMapæ˜¯ç”¨æ¥å­˜å‚¨é…ç½®æ–‡ä»¶çš„kubernetesèµ„æºå¯¹è±¡ï¼Œæ‰€æœ‰çš„é…ç½®å†…å®¹éƒ½å­˜å‚¨åœ¨etcdä¸­ï¼Œä¸‹æ–‡ä¸»è¦æ˜¯æ¢ç©¶ ConfigMap çš„åˆ›å»ºå’Œæ›´æ–°æµç¨‹ï¼Œä»¥åŠå¯¹ ConfigMap æ›´æ–°åå®¹å™¨å†…æŒ‚è½½çš„å†…å®¹æ˜¯å¦åŒæ­¥æ›´æ–°çš„æµ‹è¯•ã€‚\næµ‹è¯•ç¤ºä¾‹ linkå‡è®¾æˆ‘ä»¬åœ¨ default namespace ä¸‹æœ‰ä¸€ä¸ªåä¸º nginx-config çš„ ConfigMapï¼Œå¯ä»¥ä½¿ç”¨ kubectlå‘½ä»¤æ¥è·å–ï¼š\n$ kubectl get configmap nginx-config NAME DATA AGE nginx-config 1 99d è·å–è¯¥ConfigMapçš„å†…å®¹ã€‚\nkubectl get configmap nginx-config -o yaml apiVersion: v1 data: nginx.conf: |- worker_processes 1; events { worker_connections 1024; } http { sendfile on; server { listen 80; # a test endpoint that returns http 200s location / { proxy_pass http://httpstat.us/200; proxy_set_header X-Real-IP $remote_addr; } } server { listen 80; server_name api.hello.world; location / { proxy_pass http://l5d.default.svc.cluster.local; proxy_set_header Host $host; proxy_set_header Connection \"\"; proxy_http_version 1.1; more_clear_input_headers 'l5d-ctx-*' 'l5d-dtab' 'l5d-sample'; } } server { listen 80; server_name www.hello.world; location / { # allow 'employees' to perform dtab overrides if ($cookie_special_employee_cookie != \"letmein\") { more_clear_input_headers 'l5d-ctx-*' 'l5d-dtab' 'l5d-sample'; } # add a dtab override to get people to our beta, world-v2 set $xheader \"\"; if ($cookie_special_employee_cookie ~* \"dogfood\") { set $xheader \"/host/world =\u003e /srv/world-v2;\"; } proxy_set_header 'l5d-dtab' $xheader; proxy_pass http://l5d.default.svc.cluster.local; proxy_set_header Host $host; proxy_set_header Connection \"\"; proxy_http_version 1.1; } } } kind: ConfigMap metadata: creationTimestamp: 2017-08-01T06:53:17Z name: nginx-config namespace: default resourceVersion: \"14925806\" selfLink: /api/v1/namespaces/default/configmaps/nginx-config uid: 18d70527-7686-11e7-bfbd-8af1e3a7c5bd ConfigMapä¸­çš„å†…å®¹æ˜¯å­˜å‚¨åˆ°etcdä¸­çš„ï¼Œç„¶åæŸ¥è¯¢etcdï¼š\nETCDCTL_API=3 etcdctl get /registry/configmaps/default/nginx-config -w json|python -m json.tool æ³¨æ„ä½¿ç”¨ v3 ç‰ˆæœ¬çš„ etcdctl APIï¼Œä¸‹é¢æ˜¯è¾“å‡ºç»“æœï¼š\n{ \"count\": 1, \"header\": { \"cluster_id\": 12091028579527406772, \"member_id\": 16557816780141026208, \"raft_term\": 36, \"revision\": 29258723 }, \"kvs\": [ { \"create_revision\": 14925806, \"key\": \"L3JlZ2lzdHJ5L2NvbmZpZ21hcHMvZGVmYXVsdC9uZ2lueC1jb25maWc=\", \"mod_revision\": 14925806, \"value\": \"azhzAAoPCgJ2MRIJQ29uZmlnTWFwEqQMClQKDG5naW54LWNvbmZpZxIAGgdkZWZhdWx0IgAqJDE4ZDcwNTI3LTc2ODYtMTFlNy1iZmJkLThhZjFlM2E3YzViZDIAOABCCwjdyoDMBRC5ss54egASywsKCm5naW54LmNvbmYSvAt3b3JrZXJfcHJvY2Vzc2VzIDE7CgpldmVudHMgeyB3b3JrZXJfY29ubmVjdGlvbnMgMTAyNDsgfQoKaHR0cCB7CiAgICBzZW5kZmlsZSBvbjsKCiAgICBzZXJ2ZXIgewogICAgICAgIGxpc3RlbiA4MDsKCiAgICAgICAgIyBhIHRlc3QgZW5kcG9pbnQgdGhhdCByZXR1cm5zIGh0dHAgMjAwcwogICAgICAgIGxvY2F0aW9uIC8gewogICAgICAgICAgICBwcm94eV9wYXNzIGh0dHA6Ly9odHRwc3RhdC51cy8yMDA7CiAgICAgICAgICAgIHByb3h5X3NldF9oZWFkZXIgIFgtUmVhbC1JUCAgJHJlbW90ZV9hZGRyOwogICAgICAgIH0KICAgIH0KCiAgICBzZXJ2ZXIgewoKICAgICAgICBsaXN0ZW4gODA7CiAgICAgICAgc2VydmVyX25hbWUgYXBpLmhlbGxvLndvcmxkOwoKICAgICAgICBsb2NhdGlvbiAvIHsKICAgICAgICAgICAgcHJveHlfcGFzcyBodHRwOi8vbDVkLmRlZmF1bHQuc3ZjLmNsdXN0ZXIubG9jYWw7CiAgICAgICAgICAgIHByb3h5X3NldF9oZWFkZXIgSG9zdCAkaG9zdDsKICAgICAgICAgICAgcHJveHlfc2V0X2hlYWRlciBDb25uZWN0aW9uICIiOwogICAgICAgICAgICBwcm94eV9odHRwX3ZlcnNpb24gMS4xOwoKICAgICAgICAgICAgbW9yZV9jbGVhcl9pbnB1dF9oZWFkZXJzICdsNWQtY3R4LSonICdsNWQtZHRhYicgJ2w1ZC1zYW1wbGUnOwogICAgICAgIH0KICAgIH0KCiAgICBzZXJ2ZXIgewoKICAgICAgICBsaXN0ZW4gODA7CiAgICAgICAgc2VydmVyX25hbWUgd3d3LmhlbGxvLndvcmxkOwoKICAgICAgICBsb2NhdGlvbiAvIHsKCgogICAgICAgICAgICAjIGFsbG93ICdlbXBsb3llZXMnIHRvIHBlcmZvcm0gZHRhYiBvdmVycmlkZXMKICAgICAgICAgICAgaWYgKCRjb29raWVfc3BlY2lhbF9lbXBsb3llZV9jb29raWUgIT0gImxldG1laW4iKSB7CiAgICAgICAgICAgICAgbW9yZV9jbGVhcl9pbnB1dF9oZWFkZXJzICdsNWQtY3R4LSonICdsNWQtZHRhYicgJ2w1ZC1zYW1wbGUnOwogICAgICAgICAgICB9CgogICAgICAgICAgICAjIGFkZCBhIGR0YWIgb3ZlcnJpZGUgdG8gZ2V0IHBlb3BsZSB0byBvdXIgYmV0YSwgd29ybGQtdjIKICAgICAgICAgICAgc2V0ICR4aGVhZGVyICIiOwoKICAgICAgICAgICAgaWYgKCRjb29raWVfc3BlY2lhbF9lbXBsb3llZV9jb29raWUgfiogImRvZ2Zvb2QiKSB7CiAgICAgICAgICAgICAgc2V0ICR4aGVhZGVyICIvaG9zdC93b3JsZCA9PiAvc3J2L3dvcmxkLXYyOyI7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHByb3h5X3NldF9oZWFkZXIgJ2w1ZC1kdGFiJyAkeGhlYWRlcjsKCgogICAgICAgICAgICBwcm94eV9wYXNzIGh0dHA6Ly9sNWQuZGVmYXVsdC5zdmMuY2x1c3Rlci5sb2NhbDsKICAgICAgICAgICAgcHJveHlfc2V0X2hlYWRlciBIb3N0ICRob3N0OwogICAgICAgICAgICBwcm94eV9zZXRfaGVhZGVyIENvbm5lY3Rpb24gIiI7CiAgICAgICAgICAgIHByb3h5X2h0dHBfdmVyc2lvbiAxLjE7CiAgICAgICAgfQogICAgfQp9GgAiAA==\", \"version\": 1 } ] } å…¶ä¸­çš„valueå°±æ˜¯ nginx.conf é…ç½®æ–‡ä»¶çš„å†…å®¹ã€‚\nå¯ä»¥ä½¿ç”¨base64è§£ç æŸ¥çœ‹å…·ä½“å€¼ï¼Œå…³äºetcdctlçš„ä½¿ç”¨è¯·å‚è€ƒä½¿ç”¨etcdctlè®¿é—®kuberentesæ•°æ®ã€‚\nä»£ç  linkConfigMap ç»“æ„ä½“çš„å®šä¹‰ï¼š\n// ConfigMap holds configuration data for pods to consume. type ConfigMap struct { metav1.TypeMeta `json:\",inline\"` // Standard object's metadata. // More info: http://releases.k8s.io/HEAD/docs/devel/api-conventions.md#metadata // +optional metav1.ObjectMeta `json:\"metadata,omitempty\" protobuf:\"bytes,1,opt,name=metadata\"` // Data contains the configuration data. // Each key must be a valid DNS_SUBDOMAIN with an optional leading dot. // +optional Data map[string]string `json:\"data,omitempty\" protobuf:\"bytes,2,rep,name=data\"` } åœ¨ staging/src/k8s.io/client-go/kubernetes/typed/core/v1/configmap.go ä¸­ConfigMap çš„æ¥å£å®šä¹‰ï¼š\n// ConfigMapInterface has methods to work with ConfigMap resources. type ConfigMapInterface interface { Create(*v1.ConfigMap) (*v1.ConfigMap, error) Update(*v1.ConfigMap) (*v1.ConfigMap, error) Delete(name string, options *meta_v1.DeleteOptions) error DeleteCollection(options *meta_v1.DeleteOptions, listOptions meta_v1.ListOptions) error Get(name string, options meta_v1.GetOptions) (*v1.ConfigMap, error) List(opts meta_v1.ListOptions) (*v1.ConfigMapList, error) Watch(opts meta_v1.ListOptions) (watch.Interface, error) Patch(name string, pt types.PatchType, data []byte, subresources ...string) (result *v1.ConfigMap, err error) ConfigMapExpansion } åœ¨ staging/src/k8s.io/client-go/kubernetes/typed/core/v1/configmap.go ä¸­åˆ›å»º ConfigMap çš„æ–¹æ³•å¦‚ä¸‹:\n// Create takes the representation of a configMap and creates it. Returns the server's representation of the configMap, and an error, if there is any. func (c *configMaps) Create(configMap *v1.ConfigMap) (result *v1.ConfigMap, err error) { result = \u0026v1.ConfigMap{} err = c.client.Post(). Namespace(c.ns). Resource(\"configmaps\"). Body(configMap). Do(). Into(result) return } é€šè¿‡ RESTful è¯·æ±‚åœ¨ etcd ä¸­å­˜å‚¨ ConfigMap çš„é…ç½®ï¼Œè¯¥æ–¹æ³•ä¸­è®¾ç½®äº†èµ„æºå¯¹è±¡çš„ namespace å’Œ HTTP è¯·æ±‚ä¸­çš„ bodyï¼Œæ‰§è¡Œåå°†è¯·æ±‚ç»“æœä¿å­˜åˆ° result ä¸­è¿”å›ç»™è°ƒç”¨è€…ã€‚\næ³¨æ„ Body çš„ç»“æ„\n// Body makes the request use obj as the body. Optional. // If obj is a string, try to read a file of that name. // If obj is a []byte, send it directly. // If obj is an io.Reader, use it directly. // If obj is a runtime.Object, marshal it correctly, and set Content-Type header. // If obj is a runtime.Object and nil, do nothing. // Otherwise, set an error. åˆ›å»º ConfigMap RESTful è¯·æ±‚ä¸­çš„çš„ Body ä¸­åŒ…å« ObjectMeta å’Œ namespaceã€‚\nHTTP è¯·æ±‚ä¸­çš„ç»“æ„ä½“ï¼š\n// Request allows for building up a request to a server in a chained fashion. // Any errors are stored until the end of your call, so you only have to // check once. type Request struct { // required client HTTPClient verb string baseURL *url.URL content ContentConfig serializers Serializers // generic components accessible via method setters pathPrefix string subpath string params url.Values headers http.Header // structural elements of the request that are part of the Kubernetes API conventions namespace string namespaceSet bool resource string resourceName string subresource string timeout time.Duration // output err error body io.Reader // This is only used for per-request timeouts, deadlines, and cancellations. ctx context.Context backoffMgr BackoffManager throttle flowcontrol.RateLimiter } æµ‹è¯• linkåˆ†åˆ«æµ‹è¯•ä½¿ç”¨ ConfigMap æŒ‚è½½ Env å’Œ Volume çš„æƒ…å†µã€‚\næ›´æ–°ä½¿ç”¨ConfigMapæŒ‚è½½çš„Env linkä½¿ç”¨ä¸‹é¢çš„é…ç½®åˆ›å»º nginx å®¹å™¨æµ‹è¯•æ›´æ–° ConfigMap åå®¹å™¨å†…çš„ç¯å¢ƒå˜é‡æ˜¯å¦ä¹Ÿè·Ÿç€æ›´æ–°ã€‚\napiVersion: extensions/v1beta1 kind: Deployment metadata: name: my-nginx spec: replicas: 1 template: metadata: labels: run: my-nginx spec: containers: - name: my-nginx image: harbor-001.jimmysong.io/library/nginx:1.9 ports: - containerPort: 80 envFrom: - configMapRef: name: env-config --- apiVersion: v1 kind: ConfigMap metadata: name: env-config namespace: default data: log_level: INFO è·å–ç¯å¢ƒå˜é‡çš„å€¼\n$ kubectl exec `kubectl get pods -l run=my-nginx -o=name|cut -d \"/\" -f2` env|grep log_level log_level=INFO ä¿®æ”¹ ConfigMap\n$ kubectl edit configmap env-config ä¿®æ”¹ log_level çš„å€¼ä¸º DEBUGã€‚\nå†æ¬¡æŸ¥çœ‹ç¯å¢ƒå˜é‡çš„å€¼ã€‚\n$ kubectl exec `kubectl get pods -l run=my-nginx -o=name|cut -d \"/\" -f2` env|grep log_level log_level=INFO å®è·µè¯æ˜ä¿®æ”¹ ConfigMap æ— æ³•æ›´æ–°å®¹å™¨ä¸­å·²æ³¨å…¥çš„ç¯å¢ƒå˜é‡ä¿¡æ¯ã€‚\næ›´æ–°ä½¿ç”¨ConfigMapæŒ‚è½½çš„Volume linkä½¿ç”¨ä¸‹é¢çš„é…ç½®åˆ›å»º nginx å®¹å™¨æµ‹è¯•æ›´æ–° ConfigMap åå®¹å™¨å†…æŒ‚è½½çš„æ–‡ä»¶æ˜¯å¦ä¹Ÿè·Ÿç€æ›´æ–°ã€‚\napiVersion: extensions/v1beta1 kind: Deployment metadata: name: my-nginx spec: replicas: 1 template: metadata: labels: run: my-nginx spec: containers: - name: my-nginx image: harbor-001.jimmysong.io/library/nginx:1.9 ports: - containerPort: 80 volumeMounts: - name: config-volume mountPath: /etc/config volumes: - name: config-volume configMap: name: special-config --- apiVersion: v1 kind: ConfigMap metadata: name: special-config namespace: default data: log_level: INFO $ kubectl exec `kubectl get pods -l run=my-nginx -o=name|cut -d \"/\" -f2` cat /etc/config/log_level INFO ä¿®æ”¹ ConfigMap\n$ kubectl edit configmap special-config ä¿®æ”¹ log_level çš„å€¼ä¸º DEBUGã€‚\nç­‰å¾…å¤§æ¦‚10ç§’é’Ÿæ—¶é—´ï¼Œå†æ¬¡æŸ¥çœ‹ç¯å¢ƒå˜é‡çš„å€¼ã€‚\n$ kubectl exec `kubectl get pods -l run=my-nginx -o=name|cut -d \"/\" -f2` cat /etc/config/log_level DEBUG æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä½¿ç”¨ ConfigMap æ–¹å¼æŒ‚è½½çš„ Volume çš„æ–‡ä»¶ä¸­çš„å†…å®¹å·²ç»å˜æˆäº† DEBUGã€‚\nKnown Issueï¼š å¦‚æœä½¿ç”¨ConfigMapçš„subPathæŒ‚è½½ä¸ºContainerçš„Volumeï¼ŒKubernetesä¸ä¼šåšè‡ªåŠ¨çƒ­æ›´æ–°: https://kubernetes.io/docs/tasks/configure-pod-container/configure-pod-configmap/#mounted-configmaps-are-updated-automatically\nConfigMap æ›´æ–°åæ»šåŠ¨æ›´æ–° Pod linkæ›´æ–° ConfigMap ç›®å‰å¹¶ä¸ä¼šè§¦å‘ç›¸å…³ Pod çš„æ»šåŠ¨æ›´æ–°ï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹ pod annotations çš„æ–¹å¼å¼ºåˆ¶è§¦å‘æ»šåŠ¨æ›´æ–°ã€‚\n$ kubectl patch deployment my-nginx --patch '{\"spec\": {\"template\": {\"metadata\": {\"annotations\": {\"version/config\": \"20180411\" }}}}}' è¿™ä¸ªä¾‹å­é‡Œæˆ‘ä»¬åœ¨ .spec.template.metadata.annotations ä¸­æ·»åŠ  version/configï¼Œæ¯æ¬¡é€šè¿‡ä¿®æ”¹ version/config æ¥è§¦å‘æ»šåŠ¨æ›´æ–°ã€‚\næ€»ç»“ linkæ›´æ–° ConfigMap åï¼š\nä½¿ç”¨è¯¥ ConfigMap æŒ‚è½½çš„ Env ä¸ä¼šåŒæ­¥æ›´æ–° ä½¿ç”¨è¯¥ ConfigMap æŒ‚è½½çš„ Volume ä¸­çš„æ•°æ®éœ€è¦ä¸€æ®µæ—¶é—´ï¼ˆå®æµ‹å¤§æ¦‚10ç§’ï¼‰æ‰èƒ½åŒæ­¥æ›´æ–° ENV æ˜¯åœ¨å®¹å™¨å¯åŠ¨çš„æ—¶å€™æ³¨å…¥çš„ï¼Œå¯åŠ¨ä¹‹å kubernetes å°±ä¸ä¼šå†æ”¹å˜ç¯å¢ƒå˜é‡çš„å€¼ï¼Œä¸”åŒä¸€ä¸ª namespace ä¸­çš„ pod çš„ç¯å¢ƒå˜é‡æ˜¯ä¸æ–­ç´¯åŠ çš„ï¼Œå‚è€ƒ Kubernetesä¸­çš„æœåŠ¡å‘ç°ä¸dockerå®¹å™¨é—´çš„ç¯å¢ƒå˜é‡ä¼ é€’æºç æ¢ç©¶ã€‚ä¸ºäº†æ›´æ–°å®¹å™¨ä¸­ä½¿ç”¨ ConfigMap æŒ‚è½½çš„é…ç½®ï¼Œéœ€è¦é€šè¿‡æ»šåŠ¨æ›´æ–° pod çš„æ–¹å¼æ¥å¼ºåˆ¶é‡æ–°æŒ‚è½½ ConfigMapã€‚\nå‚è€ƒ link Kubernetes 1.7 security in practice ConfigMap | kubernetes handbook - jimmysong.io åˆ›å»ºé«˜å¯ç”¨ectdé›†ç¾¤ | Kubernetes handbook - jimmysong.io Kubernetesä¸­çš„æœåŠ¡å‘ç°ä¸dockerå®¹å™¨é—´çš„ç¯å¢ƒå˜é‡ä¼ é€’æºç æ¢ç©¶ "
            }
        );
    index.add(
            {
                id:  14 ,
                href: "\/docs\/information\/software\/cloud\/k8s_rs_manager\/",
                title: "K8sé›†ç¾¤æ§åˆ¶",
                description: "",
                content: ""
            }
        );
    index.add(
            {
                id:  15 ,
                href: "\/docs\/information\/software\/cloud\/k8s_rs_manager\/pod\/",
                title: "Pod",
                description: "æ¦‚å¿µ linkPod æ˜¯ Kubernetes ä¸­æœ€å°çš„å¯éƒ¨ç½²å•å…ƒï¼Œä»£è¡¨é›†ç¾¤ä¸­è¿è¡Œçš„ä¸€ä¸ªåº”ç”¨å®ä¾‹ï¼Œç”±ä¸€ä¸ªæˆ–å¤šä¸ªç´§å¯†å…³è”çš„å®¹å™¨ç»„æˆã€‚è¿™äº›å®¹å™¨å…±äº«ç½‘ç»œå‘½åç©ºé—´ï¼ˆåŒä¸€ IP å’Œç«¯å£ï¼‰ã€å­˜å‚¨å·åŠå…¶ä»–èµ„æºï¼Œæ”¯æŒååŒå·¥ä½œæ¨¡å¼ï¼ˆå¦‚ä¸»å®¹å™¨ä¸ sidecar è¾…åŠ©å®¹å™¨é…åˆï¼‰ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œæ¯ä¸ª Pod å°è£…å•ä¸ªå®¹å™¨ï¼Œä½†åœ¨éœ€è¦è€¦åˆåä½œçš„åœºæ™¯ï¼ˆå¦‚æ—¥å¿—æ”¶é›†ã€é…ç½®åŒæ­¥ï¼‰ä¸­å¯åŒ…å«å¤šä¸ªå®¹å™¨ã€‚Pod ä¸ç›´æ¥ç®¡ç†ï¼Œè€Œæ˜¯é€šè¿‡æ§åˆ¶å™¨ï¼ˆå¦‚ Deploymentï¼‰è¿›è¡Œå¤åˆ¶æ‰©å±•ï¼ˆè¿è¡Œå¤šä¸ªç›¸åŒ Pod å®ç°æ°´å¹³æ‰©å®¹ï¼‰ï¼Œä¸”æ”¯æŒ Docker åœ¨å†…çš„å¤šç§å®¹å™¨è¿è¡Œæ—¶ã€‚\nPod æ”¯æŒåœ¨åŒä¸€èŠ‚ç‚¹ä¸Šè¿è¡Œå¤šä¸ªå®¹å™¨ï¼Œè¿™äº›å®¹å™¨å…±äº«ç½‘ç»œå‘½åç©ºé—´ï¼ˆåŒä¸€IPå’Œç«¯å£ï¼‰åŠå­˜å‚¨å·ï¼Œå½¢æˆç´§å¯†åä½œçš„è¿›ç¨‹ç»„ã€‚å…¸å‹ç”¨ä¾‹æ˜¯ä¸»å®¹å™¨ï¼ˆå¦‚WebæœåŠ¡ï¼‰ä¸Sidecarå®¹å™¨ï¼ˆå¦‚æ—¥å¿—æ”¶é›†ã€é…ç½®æ›´æ–°ï¼‰ååŒå·¥ä½œï¼š\nç½‘ç»œå…±äº«ï¼šå®¹å™¨é€šè¿‡ localhost ç›´æ¥é€šä¿¡ï¼Œå¯¹å¤–æš´éœ²ç»Ÿä¸€IPã€‚ å­˜å‚¨å…±äº«ï¼šå¤šä¸ªå®¹å™¨å¯è¯»å†™åŒä¸€æŒä¹…åŒ–Volumeï¼Œé¿å…æ•°æ®ä¸¢å¤±ã€‚ è°ƒåº¦ç‰¹æ€§ï¼šå®¹å™¨å§‹ç»ˆè¢«å…±åŒè°ƒåº¦åˆ°åŒä¸€èŠ‚ç‚¹ï¼Œç¡®ä¿ä½å»¶è¿Ÿåä½œã€‚ âš ï¸ é€‚ç”¨åœºæ™¯ï¼šä»…å½“å®¹å™¨éœ€å¼ºè€¦åˆï¼ˆå¦‚å®æ—¶æ–‡ä»¶åŒæ­¥ã€ä¾èµ–æœ¬åœ°é€šä¿¡ï¼‰æ—¶ä½¿ç”¨å¤šå®¹å™¨Podï¼Œå¦åˆ™ä¼˜å…ˆé‡‡ç”¨å•å®¹å™¨Pod+ç‹¬ç«‹æœåŠ¡è®¾è®¡ï¼Œä»¥é™ä½å¤æ‚åº¦ã€‚\nåœ¨ Kubernetes ä¸­ï¼ŒPod ä½œä¸ºçŸ­æš‚ä¸”æ˜“å¤±çš„å®ä½“ï¼Œé€šå¸¸ä¸ç›´æ¥å•ç‹¬åˆ›å»ºï¼Œå› å…¶ç¼ºä¹è‡ªæ„ˆèƒ½åŠ›ä¸”ç”Ÿå‘½å‘¨æœŸå—èŠ‚ç‚¹æ•…éšœã€èµ„æºä¸è¶³æˆ–è¿›ç¨‹ç»ˆæ­¢ç­‰å½±å“è€Œæ— æ³•æŒä¹…ã€‚ä¸ºç¡®ä¿é«˜å¯ç”¨æ€§å’Œå¼¹æ€§ï¼Œç”¨æˆ·é€šè¿‡æ›´é«˜çº§çš„ Controllerï¼ˆå¦‚ Deploymentã€StatefulSetã€DaemonSetï¼‰ç®¡ç† Podã€‚Controller åŸºäº Pod æ¨¡æ¿åŠ¨æ€åˆ›å»ºå¹¶ç»´æŠ¤ Pod é›†ç¾¤ï¼Œæä¾›å‰¯æœ¬æ§åˆ¶ã€æ»šåŠ¨å‡çº§åŠè‡ªæ„ˆèƒ½åŠ›ï¼Œä¾‹å¦‚åœ¨èŠ‚ç‚¹æ•…éšœæ—¶è‡ªåŠ¨å°† Pod é‡æ–°è°ƒåº¦è‡³å¥åº·èŠ‚ç‚¹ï¼Œä»è€ŒæŠ½è±¡åŒ–åº•å±‚è¿ç»´å¤æ‚åº¦ï¼Œä¿éšœåº”ç”¨æŒç»­ç¨³å®šè¿è¡Œã€‚\nåŠ¨æœº link ç®¡ç†ï¼š Pod æ˜¯ä¸€ä¸ªæœåŠ¡çš„å¤šä¸ªè¿›ç¨‹çš„èšåˆå•ä½ï¼Œpod æä¾›è¿™ç§æ¨¡å‹èƒ½å¤Ÿç®€åŒ–åº”ç”¨éƒ¨ç½²ç®¡ç†ï¼Œé€šè¿‡æä¾›ä¸€ä¸ªæ›´é«˜çº§åˆ«çš„æŠ½è±¡çš„æ–¹å¼ã€‚Pod ä½œä¸ºä¸€ä¸ªç‹¬ç«‹çš„éƒ¨ç½²å•ä½ï¼Œæ”¯æŒæ¨ªå‘æ‰©å±•å’Œå¤åˆ¶ã€‚å…±ç”Ÿï¼ˆååŒè°ƒåº¦ï¼‰ï¼Œå‘½è¿å…±åŒä½“ï¼ˆä¾‹å¦‚è¢«ç»ˆç»“ï¼‰ï¼ŒååŒå¤åˆ¶ï¼Œèµ„æºå…±äº«ï¼Œä¾èµ–ç®¡ç†ï¼Œpod éƒ½ä¼šè‡ªåŠ¨çš„ä¸ºå®¹å™¨å¤„ç†è¿™äº›é—®é¢˜ã€‚ èµ„æºå…±äº«å’Œé€šä¿¡ï¼š Pod ä¸­çš„åº”ç”¨å¯ä»¥å…±äº«ç½‘ç»œç©ºé—´ï¼ˆIP åœ°å€å’Œç«¯å£ï¼‰ï¼Œå› æ­¤å¯ä»¥é€šè¿‡ localhost äº’ç›¸å‘ç°ã€‚Pod ä¸­çš„åº”ç”¨å®¹å™¨å¯ä»¥å…±äº«å·ã€‚æŒä¹…åŒ–å·èƒ½å¤Ÿä¿è¯ pod é‡å¯æ—¶ä½¿ç”¨çš„æ•°æ®ä¸ä¸¢å¤±ã€‚ æŒä¹…æ€§ linkPod åœ¨è®¾è®¡æ”¯æŒå°±ä¸æ˜¯ä½œä¸ºæŒä¹…åŒ–å®ä½“çš„ã€‚åœ¨è°ƒåº¦å¤±è´¥ã€èŠ‚ç‚¹æ•…éšœã€ç¼ºå°‘èµ„æºæˆ–è€…èŠ‚ç‚¹ç»´æŠ¤çš„çŠ¶æ€ä¸‹éƒ½ä¼šæ­»æ‰ä¼šè¢«é©±é€ã€‚\né€šå¸¸ï¼Œç”¨æˆ·ä¸éœ€è¦æ‰‹åŠ¨ç›´æ¥åˆ›å»º Podï¼Œè€Œæ˜¯åº”è¯¥ä½¿ç”¨ controllerï¼ˆä¾‹å¦‚ Deploymentsï¼‰ï¼Œå³ä½¿æ˜¯åœ¨åˆ›å»ºå•ä¸ª Pod çš„æƒ…å†µä¸‹ã€‚Controller å¯ä»¥æä¾›é›†ç¾¤çº§åˆ«çš„è‡ªæ„ˆåŠŸèƒ½ã€å¤åˆ¶å’Œå‡çº§ç®¡ç†ã€‚\n",
                content: "æ¦‚å¿µ linkPod æ˜¯ Kubernetes ä¸­æœ€å°çš„å¯éƒ¨ç½²å•å…ƒï¼Œä»£è¡¨é›†ç¾¤ä¸­è¿è¡Œçš„ä¸€ä¸ªåº”ç”¨å®ä¾‹ï¼Œç”±ä¸€ä¸ªæˆ–å¤šä¸ªç´§å¯†å…³è”çš„å®¹å™¨ç»„æˆã€‚è¿™äº›å®¹å™¨å…±äº«ç½‘ç»œå‘½åç©ºé—´ï¼ˆåŒä¸€ IP å’Œç«¯å£ï¼‰ã€å­˜å‚¨å·åŠå…¶ä»–èµ„æºï¼Œæ”¯æŒååŒå·¥ä½œæ¨¡å¼ï¼ˆå¦‚ä¸»å®¹å™¨ä¸ sidecar è¾…åŠ©å®¹å™¨é…åˆï¼‰ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œæ¯ä¸ª Pod å°è£…å•ä¸ªå®¹å™¨ï¼Œä½†åœ¨éœ€è¦è€¦åˆåä½œçš„åœºæ™¯ï¼ˆå¦‚æ—¥å¿—æ”¶é›†ã€é…ç½®åŒæ­¥ï¼‰ä¸­å¯åŒ…å«å¤šä¸ªå®¹å™¨ã€‚Pod ä¸ç›´æ¥ç®¡ç†ï¼Œè€Œæ˜¯é€šè¿‡æ§åˆ¶å™¨ï¼ˆå¦‚ Deploymentï¼‰è¿›è¡Œå¤åˆ¶æ‰©å±•ï¼ˆè¿è¡Œå¤šä¸ªç›¸åŒ Pod å®ç°æ°´å¹³æ‰©å®¹ï¼‰ï¼Œä¸”æ”¯æŒ Docker åœ¨å†…çš„å¤šç§å®¹å™¨è¿è¡Œæ—¶ã€‚\nPod æ”¯æŒåœ¨åŒä¸€èŠ‚ç‚¹ä¸Šè¿è¡Œå¤šä¸ªå®¹å™¨ï¼Œè¿™äº›å®¹å™¨å…±äº«ç½‘ç»œå‘½åç©ºé—´ï¼ˆåŒä¸€IPå’Œç«¯å£ï¼‰åŠå­˜å‚¨å·ï¼Œå½¢æˆç´§å¯†åä½œçš„è¿›ç¨‹ç»„ã€‚å…¸å‹ç”¨ä¾‹æ˜¯ä¸»å®¹å™¨ï¼ˆå¦‚WebæœåŠ¡ï¼‰ä¸Sidecarå®¹å™¨ï¼ˆå¦‚æ—¥å¿—æ”¶é›†ã€é…ç½®æ›´æ–°ï¼‰ååŒå·¥ä½œï¼š\nç½‘ç»œå…±äº«ï¼šå®¹å™¨é€šè¿‡ localhost ç›´æ¥é€šä¿¡ï¼Œå¯¹å¤–æš´éœ²ç»Ÿä¸€IPã€‚ å­˜å‚¨å…±äº«ï¼šå¤šä¸ªå®¹å™¨å¯è¯»å†™åŒä¸€æŒä¹…åŒ–Volumeï¼Œé¿å…æ•°æ®ä¸¢å¤±ã€‚ è°ƒåº¦ç‰¹æ€§ï¼šå®¹å™¨å§‹ç»ˆè¢«å…±åŒè°ƒåº¦åˆ°åŒä¸€èŠ‚ç‚¹ï¼Œç¡®ä¿ä½å»¶è¿Ÿåä½œã€‚ âš ï¸ é€‚ç”¨åœºæ™¯ï¼šä»…å½“å®¹å™¨éœ€å¼ºè€¦åˆï¼ˆå¦‚å®æ—¶æ–‡ä»¶åŒæ­¥ã€ä¾èµ–æœ¬åœ°é€šä¿¡ï¼‰æ—¶ä½¿ç”¨å¤šå®¹å™¨Podï¼Œå¦åˆ™ä¼˜å…ˆé‡‡ç”¨å•å®¹å™¨Pod+ç‹¬ç«‹æœåŠ¡è®¾è®¡ï¼Œä»¥é™ä½å¤æ‚åº¦ã€‚\nåœ¨ Kubernetes ä¸­ï¼ŒPod ä½œä¸ºçŸ­æš‚ä¸”æ˜“å¤±çš„å®ä½“ï¼Œé€šå¸¸ä¸ç›´æ¥å•ç‹¬åˆ›å»ºï¼Œå› å…¶ç¼ºä¹è‡ªæ„ˆèƒ½åŠ›ä¸”ç”Ÿå‘½å‘¨æœŸå—èŠ‚ç‚¹æ•…éšœã€èµ„æºä¸è¶³æˆ–è¿›ç¨‹ç»ˆæ­¢ç­‰å½±å“è€Œæ— æ³•æŒä¹…ã€‚ä¸ºç¡®ä¿é«˜å¯ç”¨æ€§å’Œå¼¹æ€§ï¼Œç”¨æˆ·é€šè¿‡æ›´é«˜çº§çš„ Controllerï¼ˆå¦‚ Deploymentã€StatefulSetã€DaemonSetï¼‰ç®¡ç† Podã€‚Controller åŸºäº Pod æ¨¡æ¿åŠ¨æ€åˆ›å»ºå¹¶ç»´æŠ¤ Pod é›†ç¾¤ï¼Œæä¾›å‰¯æœ¬æ§åˆ¶ã€æ»šåŠ¨å‡çº§åŠè‡ªæ„ˆèƒ½åŠ›ï¼Œä¾‹å¦‚åœ¨èŠ‚ç‚¹æ•…éšœæ—¶è‡ªåŠ¨å°† Pod é‡æ–°è°ƒåº¦è‡³å¥åº·èŠ‚ç‚¹ï¼Œä»è€ŒæŠ½è±¡åŒ–åº•å±‚è¿ç»´å¤æ‚åº¦ï¼Œä¿éšœåº”ç”¨æŒç»­ç¨³å®šè¿è¡Œã€‚\nåŠ¨æœº link ç®¡ç†ï¼š Pod æ˜¯ä¸€ä¸ªæœåŠ¡çš„å¤šä¸ªè¿›ç¨‹çš„èšåˆå•ä½ï¼Œpod æä¾›è¿™ç§æ¨¡å‹èƒ½å¤Ÿç®€åŒ–åº”ç”¨éƒ¨ç½²ç®¡ç†ï¼Œé€šè¿‡æä¾›ä¸€ä¸ªæ›´é«˜çº§åˆ«çš„æŠ½è±¡çš„æ–¹å¼ã€‚Pod ä½œä¸ºä¸€ä¸ªç‹¬ç«‹çš„éƒ¨ç½²å•ä½ï¼Œæ”¯æŒæ¨ªå‘æ‰©å±•å’Œå¤åˆ¶ã€‚å…±ç”Ÿï¼ˆååŒè°ƒåº¦ï¼‰ï¼Œå‘½è¿å…±åŒä½“ï¼ˆä¾‹å¦‚è¢«ç»ˆç»“ï¼‰ï¼ŒååŒå¤åˆ¶ï¼Œèµ„æºå…±äº«ï¼Œä¾èµ–ç®¡ç†ï¼Œpod éƒ½ä¼šè‡ªåŠ¨çš„ä¸ºå®¹å™¨å¤„ç†è¿™äº›é—®é¢˜ã€‚ èµ„æºå…±äº«å’Œé€šä¿¡ï¼š Pod ä¸­çš„åº”ç”¨å¯ä»¥å…±äº«ç½‘ç»œç©ºé—´ï¼ˆIP åœ°å€å’Œç«¯å£ï¼‰ï¼Œå› æ­¤å¯ä»¥é€šè¿‡ localhost äº’ç›¸å‘ç°ã€‚Pod ä¸­çš„åº”ç”¨å®¹å™¨å¯ä»¥å…±äº«å·ã€‚æŒä¹…åŒ–å·èƒ½å¤Ÿä¿è¯ pod é‡å¯æ—¶ä½¿ç”¨çš„æ•°æ®ä¸ä¸¢å¤±ã€‚ æŒä¹…æ€§ linkPod åœ¨è®¾è®¡æ”¯æŒå°±ä¸æ˜¯ä½œä¸ºæŒä¹…åŒ–å®ä½“çš„ã€‚åœ¨è°ƒåº¦å¤±è´¥ã€èŠ‚ç‚¹æ•…éšœã€ç¼ºå°‘èµ„æºæˆ–è€…èŠ‚ç‚¹ç»´æŠ¤çš„çŠ¶æ€ä¸‹éƒ½ä¼šæ­»æ‰ä¼šè¢«é©±é€ã€‚\né€šå¸¸ï¼Œç”¨æˆ·ä¸éœ€è¦æ‰‹åŠ¨ç›´æ¥åˆ›å»º Podï¼Œè€Œæ˜¯åº”è¯¥ä½¿ç”¨ controllerï¼ˆä¾‹å¦‚ Deploymentsï¼‰ï¼Œå³ä½¿æ˜¯åœ¨åˆ›å»ºå•ä¸ª Pod çš„æƒ…å†µä¸‹ã€‚Controller å¯ä»¥æä¾›é›†ç¾¤çº§åˆ«çš„è‡ªæ„ˆåŠŸèƒ½ã€å¤åˆ¶å’Œå‡çº§ç®¡ç†ã€‚\nç»ˆæ­¢ linkç”¨æˆ·éœ€è¦èƒ½å¤Ÿå‘èµ·ä¸€ä¸ªåˆ é™¤ Pod çš„è¯·æ±‚ï¼Œå¹¶ä¸”çŸ¥é“å®ƒä»¬ä½•æ—¶ä¼šè¢«ç»ˆæ­¢ï¼Œæ˜¯å¦è¢«æ­£ç¡®çš„åˆ é™¤ã€‚ç”¨æˆ·æƒ³ç»ˆæ­¢ç¨‹åºæ—¶å‘é€åˆ é™¤ pod çš„è¯·æ±‚ï¼Œåœ¨ pod å¯ä»¥è¢«å¼ºåˆ¶åˆ é™¤å‰ä¼šæœ‰ä¸€ä¸ªå®½é™æœŸï¼Œä¼šå‘é€ä¸€ä¸ª TERM è¯·æ±‚åˆ°æ¯ä¸ªå®¹å™¨çš„ä¸»è¿›ç¨‹ã€‚ä¸€æ—¦è¶…æ—¶ï¼Œå°†å‘ä¸»è¿›ç¨‹å‘é€ KILL ä¿¡å·å¹¶ä» API server ä¸­åˆ é™¤ã€‚å¦‚æœ kubelet æˆ–è€… container manager åœ¨ç­‰å¾…è¿›ç¨‹ç»ˆæ­¢çš„è¿‡ç¨‹ä¸­é‡å¯ï¼Œåœ¨é‡å¯åä»ç„¶ä¼šé‡è¯•å®Œæ•´çš„å®½é™æœŸã€‚\nåˆ é™¤å®½é™æœŸé»˜è®¤æ˜¯ 30 ç§’ã€‚ kubectl delete å‘½ä»¤æ”¯æŒ â€”grace-period= é€‰é¡¹ï¼Œå…è®¸ç”¨æˆ·è®¾ç½®è‡ªå·±çš„å®½é™æœŸã€‚å¦‚æœè®¾ç½®ä¸º 0 å°†å¼ºåˆ¶åˆ é™¤ podã€‚åœ¨ kubectl\u003e=1.5 ç‰ˆæœ¬çš„å‘½ä»¤ä¸­ï¼Œä½ å¿…é¡»åŒæ—¶ä½¿ç”¨ â€“force å’Œ â€“grace-period=0 æ¥å¼ºåˆ¶åˆ é™¤ podã€‚åœ¨ yaml æ–‡ä»¶ä¸­å¯ä»¥é€šè¿‡ {{ .spec.spec.terminationGracePeriodSeconds }} æ¥ä¿®æ”¹æ­¤å€¼ã€‚\nå¼ºåˆ¶åˆ é™¤\nPod çš„å¼ºåˆ¶åˆ é™¤æ˜¯é€šè¿‡åœ¨é›†ç¾¤å’Œ etcd ä¸­å°†å…¶å®šä¹‰ä¸ºåˆ é™¤çŠ¶æ€ã€‚å½“æ‰§è¡Œå¼ºåˆ¶åˆ é™¤å‘½ä»¤æ—¶ï¼ŒAPI server ä¸ä¼šç­‰å¾…è¯¥ pod æ‰€è¿è¡Œåœ¨èŠ‚ç‚¹ä¸Šçš„ kubelet ç¡®è®¤ï¼Œå°±ä¼šç«‹å³å°†è¯¥ pod ä» API server ä¸­ç§»é™¤ï¼Œè¿™æ—¶å°±å¯ä»¥åˆ›å»ºè·ŸåŸ pod åŒåçš„ pod äº†ã€‚è¿™æ—¶ï¼Œåœ¨èŠ‚ç‚¹ä¸Šçš„ pod ä¼šè¢«ç«‹å³è®¾ç½®ä¸º terminating çŠ¶æ€ï¼Œä¸è¿‡åœ¨è¢«å¼ºåˆ¶åˆ é™¤ä¹‹å‰ä¾ç„¶æœ‰ä¸€å°æ®µä¼˜é›…åˆ é™¤å‘¨æœŸã€‚å¼ºåˆ¶åˆ é™¤å¯¹äºæŸäº› pod å…·æœ‰æ½œåœ¨å±é™©æ€§ï¼Œè¯·è°¨æ…ä½¿ç”¨ã€‚\nç‰¹æƒæ¨¡å¼ linkä» Kubernetes1.1 ç‰ˆæœ¬å¼€å§‹ï¼Œpod ä¸­çš„å®¹å™¨å°±å¯ä»¥å¼€å¯ privileged æ¨¡å¼ï¼Œåœ¨å®¹å™¨å®šä¹‰æ–‡ä»¶çš„ SecurityContext ä¸‹ä½¿ç”¨ privileged flagã€‚è¿™åœ¨ä½¿ç”¨ Linux çš„ç½‘ç»œæ“ä½œå’Œè®¿é—®è®¾å¤‡çš„èƒ½åŠ›æ—¶æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚å®¹å™¨å†…è¿›ç¨‹å¯è·å¾—è¿‘ä¹ç­‰åŒäºå®¹å™¨å¤–è¿›ç¨‹çš„æƒé™ã€‚åœ¨ä¸éœ€è¦ä¿®æ”¹å’Œé‡æ–°ç¼–è¯‘ kubelet çš„æƒ…å†µä¸‹å°±å¯ä»¥ä½¿ç”¨ pod æ¥å¼€å‘èŠ‚ç‚¹çš„ç½‘ç»œå’Œå­˜å‚¨æ’ä»¶ã€‚\nQA linkä¸ºä»€ä¹ˆä¸ç›´æ¥åœ¨ä¸€ä¸ªå®¹å™¨ä¸­è¿è¡Œå¤šä¸ªåº”ç”¨ç¨‹åºå‘¢ï¼Ÿ\né€æ˜ã€‚è®© pod ä¸­çš„å®¹å™¨å¯¹åŸºç¡€è®¾æ–½å¯è§ï¼Œä»¥ä¾¿åŸºç¡€è®¾æ–½èƒ½å¤Ÿä¸ºè¿™äº›å®¹å™¨æä¾›æœåŠ¡ï¼Œä¾‹å¦‚è¿›ç¨‹ç®¡ç†å’Œèµ„æºç›‘æ§ã€‚è¿™å¯ä»¥ä¸ºç”¨æˆ·å¸¦æ¥æå¤§çš„ä¾¿åˆ©ã€‚ è§£è€¦è½¯ä»¶ä¾èµ–ã€‚æ¯ä¸ªå®¹å™¨éƒ½å¯ä»¥è¿›è¡Œç‰ˆæœ¬ç®¡ç†ï¼Œç‹¬ç«‹çš„ç¼–è¯‘å’Œå‘å¸ƒã€‚æœªæ¥ kubernetes ç”šè‡³å¯èƒ½æ”¯æŒå•ä¸ªå®¹å™¨çš„åœ¨çº¿å‡çº§ã€‚ ä½¿ç”¨æ–¹ä¾¿ã€‚ç”¨æˆ·ä¸å¿…è¿è¡Œè‡ªå·±çš„è¿›ç¨‹ç®¡ç†å™¨ï¼Œè¿˜è¦æ‹…å¿ƒé”™è¯¯ä¿¡å·ä¼ æ’­ç­‰ã€‚ æ•ˆç‡ã€‚å› ä¸ºç”±åŸºç¡€æ¶æ„æä¾›æ›´å¤šçš„èŒè´£ï¼Œæ‰€ä»¥å®¹å™¨å¯ä»¥å˜å¾—æ›´åŠ è½»é‡çº§ã€‚ ä¸ºä»€ä¹ˆä¸æ”¯æŒå®¹å™¨çš„äº²å’Œæ€§çš„ååŒè°ƒåº¦ï¼Ÿ\nè¿™ç§æ–¹æ³•å¯ä»¥æä¾›å®¹å™¨çš„ååŒå®šä½ï¼Œèƒ½å¤Ÿæ ¹æ®å®¹å™¨çš„äº²å’Œæ€§è¿›è¡Œè°ƒåº¦ï¼Œä½†æ˜¯æ— æ³•å®ç°ä½¿ç”¨ pod å¸¦æ¥çš„å¤§éƒ¨åˆ†å¥½å¤„ï¼Œä¾‹å¦‚èµ„æºå…±äº«ï¼ŒIPCï¼Œä¿æŒçŠ¶æ€ä¸€è‡´æ€§å’Œç®€åŒ–ç®¡ç†ç­‰ã€‚\nInitå®¹å™¨ linkä½œä¸ºä¸“ç”¨é¢„å¤„ç†å®¹å™¨ï¼ŒInit å®¹å™¨åœ¨åº”ç”¨å®¹å™¨å¯åŠ¨å‰é¡ºåºæ‰§è¡Œï¼Œå¸¸ç”¨äºéƒ¨ç½²ç¯å¢ƒå‡†å¤‡ã€ä¾èµ–å®‰è£…ç­‰åœºæ™¯ï¼Œå…¶è®¾è®¡ç‰¹ç‚¹åŒ…æ‹¬ï¼šå¿…é¡»é€çº§æˆåŠŸè¿è¡Œï¼ˆå‰ä¸€ä¸ªå®Œæˆåæ‰ä¼šå¯åŠ¨ä¸‹ä¸€ä¸ªï¼‰ã€å¤±è´¥æ—¶ä¾æ® Pod çš„ restartPolicy è‡ªåŠ¨é‡è¯•ï¼ˆNever ç­–ç•¥é™¤å¤–ï¼‰ï¼Œä¸”ä¸æ”¯æŒå°±ç»ªæ¢é’ˆã€‚å°½ç®¡ç»§æ‰¿æ™®é€šå®¹å™¨çš„èµ„æºé™åˆ¶ã€å­˜å‚¨å·ç­‰ç‰¹æ€§ï¼ŒInit å®¹å™¨å¯¹èµ„æºé…é¢çš„å¤„ç†é€»è¾‘å­˜åœ¨å·®å¼‚ï¼Œå¹¶åœ¨ Pod çŠ¶æ€ä¸­é€šè¿‡ç‹¬ç«‹çš„ status.initContainerStatuses å­—æ®µè¿½è¸ªæ‰§è¡Œè¿›åº¦ã€‚å½“æ‰€æœ‰ Init å®¹å™¨å®Œæˆåˆå§‹åŒ–åï¼ŒKubernetes æ‰ä¼šå¯åŠ¨åº”ç”¨å®¹å™¨è¿›å…¥æœåŠ¡å°±ç»ªçŠ¶æ€ã€‚\nInit å®¹å™¨æ˜¯ Kubernetes ä¸­ç”¨äºæ‰§è¡Œé¢„åˆå§‹åŒ–ä»»åŠ¡çš„ä¸“ç”¨å®¹å™¨ï¼Œå…¶æ ¸å¿ƒä½œç”¨åœ¨äºä¸ºåº”ç”¨å®¹å™¨æä¾›ç‹¬ç«‹ã€å®‰å…¨çš„åˆå§‹åŒ–ç¯å¢ƒã€‚ç”±äº Init å®¹å™¨ä¸åº”ç”¨å®¹å™¨ä½¿ç”¨åˆ†ç¦»çš„é•œåƒï¼Œå®ƒä»¬èƒ½å¤Ÿåœ¨ä¸æ±¡æŸ“åº”ç”¨é•œåƒçš„å‰æä¸‹ï¼Œè¿è¡Œå®‰è£…è„šæœ¬ã€å®‰å…¨å·¥å…·ï¼ˆå¦‚ sedã€digï¼‰æˆ–å®šåˆ¶åŒ–ä»£ç ï¼Œå®ç°ç¯å¢ƒé¢„é…ç½®ã€ä¾èµ–æ£€æŸ¥ï¼ˆå¦‚ç­‰å¾…æœåŠ¡å°±ç»ªã€å»¶è¿Ÿå¯åŠ¨ï¼‰åŠèµ„æºåˆå§‹åŒ–ï¼ˆå¦‚å…‹éš†ä»£ç ä»“åº“ã€åŠ¨æ€ç”Ÿæˆé…ç½®æ–‡ä»¶ï¼‰ã€‚é€šè¿‡ Linux Namespace çš„æ–‡ä»¶ç³»ç»Ÿéš”ç¦»ï¼ŒInit å®¹å™¨è¿˜å¯å®‰å…¨è®¿é—®æ•æ„Ÿä¿¡æ¯ï¼ˆå¦‚ Secretï¼‰ï¼Œè€Œåº”ç”¨å®¹å™¨æ— æ³•ç›´æ¥è·å–ã€‚æ­¤å¤–ï¼ŒInit å®¹å™¨ä¸¥æ ¼æŒ‰é¡ºåºæ‰§è¡Œä¸”å¿…é¡»å…¨éƒ¨æˆåŠŸï¼Œå¤©ç„¶å…·å¤‡é˜»å¡æœºåˆ¶ï¼Œç¡®ä¿åº”ç”¨å®¹å™¨ä»…åœ¨æ‰€éœ€æ¡ä»¶ï¼ˆå¦‚ç½‘ç»œä¾èµ–ã€èµ„æºé…ç½®ï¼‰å°±ç»ªåå¯åŠ¨ï¼Œä»è€Œæå‡åº”ç”¨éƒ¨ç½²çš„å¯é æ€§å’Œå®‰å…¨æ€§ï¼ŒåŒæ—¶å®ç°æ„å»ºä¸éƒ¨ç½²çš„è§’è‰²è§£è€¦ã€‚\napiVersion: v1 kind: Pod metadata: name: myapp-pod namespace: default labels: app: myapp spec: containers: - name: myapp-container image: busybox command: ['sh', '-c', 'echo The app is running! \u0026\u0026 sleep 3600'] initContainers: - name: init-myservice image: busybox command: ['sh', '-c', 'until nslookup myservice; do echo waiting for myservice; sleep 2; done;'] - name: init-mydb image: busybox command: ['sh', '-c', 'until nslookup mydb; do echo waiting for mydb; sleep 2; done;'] å®‰å…¨ç­–ç•¥(PodSecurityPolicy v1.21+å¼ƒç”¨) linkPod å®‰å…¨ç­–ç•¥ æ˜¯é›†ç¾¤çº§åˆ«çš„èµ„æºï¼Œå®ƒèƒ½å¤Ÿæ§åˆ¶ Pod è¿è¡Œçš„è¡Œä¸ºï¼Œä»¥åŠå®ƒå…·æœ‰è®¿é—®ä»€ä¹ˆçš„èƒ½åŠ›ã€‚ PodSecurityPolicyå¯¹è±¡å®šä¹‰äº†ä¸€ç»„æ¡ä»¶ï¼ŒæŒ‡ç¤º Pod å¿…é¡»æŒ‰ç³»ç»Ÿæ‰€èƒ½æ¥å—çš„é¡ºåºè¿è¡Œã€‚å®ƒä»¬å…è®¸ç®¡ç†å‘˜æ§åˆ¶å¦‚ä¸‹æ–¹é¢ï¼š\næ§åˆ¶é¢ å­—æ®µåç§° å·²æˆæƒå®¹å™¨çš„è¿è¡Œ privileged ä¸ºå®¹å™¨æ·»åŠ é»˜è®¤çš„ä¸€ç»„èƒ½åŠ› defaultAddCapabilities ä¸ºå®¹å™¨å»æ‰æŸäº›èƒ½åŠ› requiredDropCapabilities å®¹å™¨èƒ½å¤Ÿè¯·æ±‚æ·»åŠ æŸäº›èƒ½åŠ› allowedCapabilities æ§åˆ¶å·ç±»å‹çš„ä½¿ç”¨ volumes ä¸»æœºç½‘ç»œçš„ä½¿ç”¨ hostNetwork ä¸»æœºç«¯å£çš„ä½¿ç”¨ hostPorts ä¸»æœº PID namespace çš„ä½¿ç”¨ hostPID ä¸»æœº IPC namespace çš„ä½¿ç”¨ hostIPC ä¸»æœºè·¯å¾„çš„ä½¿ç”¨ allowedHostPaths å®¹å™¨çš„ SELinux ä¸Šä¸‹æ–‡ seLinux ç”¨æˆ· ID runAsUser é…ç½®å…è®¸çš„è¡¥å……ç»„ supplementalGroups åˆ†é…æ‹¥æœ‰ Pod æ•°æ®å·çš„ FSGroup fsGroup å¿…é¡»ä½¿ç”¨ä¸€ä¸ªåªè¯»çš„ root æ–‡ä»¶ç³»ç»Ÿ readOnlyRootFilesystem Pod å®‰å…¨ç­–ç•¥ ç”±è®¾ç½®å’Œç­–ç•¥ç»„æˆï¼Œå®ƒä»¬èƒ½å¤Ÿæ§åˆ¶ Pod è®¿é—®çš„å®‰å…¨ç‰¹å¾ã€‚è¿™äº›è®¾ç½®åˆ†ä¸ºå¦‚ä¸‹ä¸‰ç±»ï¼š\nåŸºäºå¸ƒå°”å€¼æ§åˆ¶ï¼šè¿™ç§ç±»å‹çš„å­—æ®µé»˜è®¤ä¸ºæœ€ä¸¥æ ¼é™åˆ¶çš„å€¼ã€‚ åŸºäºè¢«å…è®¸çš„å€¼é›†åˆæ§åˆ¶ï¼šè¿™ç§ç±»å‹çš„å­—æ®µä¼šä¸è¿™ç»„å€¼è¿›è¡Œå¯¹æ¯”ï¼Œä»¥ç¡®è®¤å€¼è¢«å…è®¸ã€‚ åŸºäºç­–ç•¥æ§åˆ¶ï¼šè®¾ç½®é¡¹é€šè¿‡ä¸€ç§ç­–ç•¥æä¾›çš„æœºåˆ¶æ¥ç”Ÿæˆè¯¥å€¼ï¼Œè¿™ç§æœºåˆ¶èƒ½å¤Ÿç¡®ä¿æŒ‡å®šçš„å€¼è½åœ¨è¢«å…è®¸çš„è¿™ç»„å€¼ä¸­ã€‚ RunAsUser link MustRunAs - å¿…é¡»é…ç½®ä¸€ä¸ª rangeã€‚ä½¿ç”¨è¯¥èŒƒå›´å†…çš„ç¬¬ä¸€ä¸ªå€¼ä½œä¸ºé»˜è®¤å€¼ã€‚éªŒè¯æ˜¯å¦ä¸åœ¨é…ç½®çš„è¯¥èŒƒå›´å†…ã€‚ MustRunAsNonRoot - è¦æ±‚æäº¤çš„ Pod å…·æœ‰éé›¶ runAsUser å€¼ï¼Œæˆ–åœ¨é•œåƒä¸­å®šä¹‰äº† USER ç¯å¢ƒå˜é‡ã€‚ä¸æä¾›é»˜è®¤å€¼ã€‚ RunAsAny - æ²¡æœ‰æä¾›é»˜è®¤å€¼ã€‚å…è®¸æŒ‡å®šä»»ä½• runAsUser ã€‚ SELinux link MustRunAs - å¦‚æœæ²¡æœ‰ä½¿ç”¨é¢„åˆ†é…çš„å€¼ï¼Œå¿…é¡»é…ç½® seLinuxOptionsã€‚é»˜è®¤ä½¿ç”¨ seLinuxOptionsã€‚éªŒè¯ seLinuxOptionsã€‚ RunAsAny - æ²¡æœ‰æä¾›é»˜è®¤å€¼ã€‚å…è®¸ä»»æ„æŒ‡å®šçš„ seLinuxOptions IDã€‚ SupplementalGroups link MustRunAs - è‡³å°‘éœ€è¦æŒ‡å®šä¸€ä¸ªèŒƒå›´ã€‚é»˜è®¤ä½¿ç”¨ç¬¬ä¸€ä¸ªèŒƒå›´çš„æœ€å°å€¼ã€‚éªŒè¯æ‰€æœ‰èŒƒå›´çš„å€¼ã€‚ RunAsAny - æ²¡æœ‰æä¾›é»˜è®¤å€¼ã€‚å…è®¸ä»»æ„æŒ‡å®šçš„ supplementalGroups IDã€‚ FSGroup link MustRunAs - è‡³å°‘éœ€è¦æŒ‡å®šä¸€ä¸ªèŒƒå›´ã€‚é»˜è®¤ä½¿ç”¨ç¬¬ä¸€ä¸ªèŒƒå›´çš„æœ€å°å€¼ã€‚éªŒè¯åœ¨ç¬¬ä¸€ä¸ªèŒƒå›´å†…çš„ç¬¬ä¸€ä¸ª IDã€‚ RunAsAny - æ²¡æœ‰æä¾›é»˜è®¤å€¼ã€‚å…è®¸ä»»æ„æŒ‡å®šçš„ fsGroup IDã€‚ æ§åˆ¶å· linké€šè¿‡è®¾ç½® PSP å·å­—æ®µï¼Œèƒ½å¤Ÿæ§åˆ¶å…·ä½“å·ç±»å‹çš„ä½¿ç”¨ã€‚å½“åˆ›å»ºä¸€ä¸ªå·çš„æ—¶å€™ï¼Œä¸è¯¥å­—æ®µç›¸å…³çš„å·²å®šä¹‰å·å¯ä»¥å…è®¸è®¾ç½®å¦‚ä¸‹å€¼ï¼š\nazureFile azureDisk flocker flexVolume hostPath emptyDir gcePersistentDisk awsElasticBlockStore gitRepo secret nfs iscsi glusterfs persistentVolumeClaim rbd cinder cephFS downwardAPI fc configMap vsphereVolume quobyte photonPersistentDisk projected portworxVolume scaleIO storageos *(allow all volumes) å¯¹æ–°çš„ PSPï¼Œæ¨èå…è®¸çš„å·çš„æœ€å°é›†åˆåŒ…æ‹¬ï¼šconfigMapã€downwardAPIã€emptyDirã€persistentVolumeClaimã€secret å’Œ projectedã€‚\nä¸»æœºç½‘ç»œ link HostPortsï¼Œé»˜è®¤ä¸º emptyã€‚HostPortRange åˆ—è¡¨é€šè¿‡ min(åŒ…å«) and max(åŒ…å«) æ¥å®šä¹‰ï¼ŒæŒ‡å®šäº†è¢«å…è®¸çš„ä¸»æœºç«¯å£ã€‚ å…è®¸çš„ä¸»æœºè·¯å¾„ link AllowedHostPaths æ˜¯ä¸€ä¸ªè¢«å…è®¸çš„ä¸»æœºè·¯å¾„å‰ç¼€çš„ç™½åå•ã€‚ç©ºå€¼è¡¨ç¤ºæ‰€æœ‰çš„ä¸»æœºè·¯å¾„éƒ½å¯ä»¥ä½¿ç”¨ã€‚ è®¸å¯ linkåŒ…å« PodSecurityPolicy çš„ è®¸å¯æ§åˆ¶ï¼Œå…è®¸æ§åˆ¶é›†ç¾¤èµ„æºçš„åˆ›å»ºå’Œä¿®æ”¹ï¼ŒåŸºäºè¿™äº›èµ„æºåœ¨é›†ç¾¤èŒƒå›´å†…è¢«è®¸å¯çš„èƒ½åŠ›ã€‚\nè®¸å¯ä½¿ç”¨å¦‚ä¸‹çš„æ–¹å¼ä¸º Pod åˆ›å»ºæœ€ç»ˆçš„å®‰å…¨ä¸Šä¸‹æ–‡ï¼š\næ£€ç´¢æ‰€æœ‰å¯ç”¨çš„ PSPã€‚ ç”Ÿæˆåœ¨è¯·æ±‚ä¸­æ²¡æœ‰æŒ‡å®šçš„å®‰å…¨ä¸Šä¸‹æ–‡è®¾ç½®çš„å­—æ®µå€¼ã€‚ åŸºäºå¯ç”¨çš„ç­–ç•¥ï¼ŒéªŒè¯æœ€ç»ˆçš„è®¾ç½®ã€‚ å¦‚æœæŸä¸ªç­–ç•¥èƒ½å¤ŸåŒ¹é…ä¸Šï¼Œè¯¥ Pod å°±è¢«æ¥å—ã€‚å¦‚æœè¯·æ±‚ä¸ PSP ä¸åŒ¹é…ï¼Œåˆ™ Pod è¢«æ‹’ç»ã€‚\nPod å¿…é¡»åŸºäº PSP éªŒè¯æ¯ä¸ªå­—æ®µã€‚\nåˆ›å»º Pod å®‰å…¨ç­–ç•¥ linkä¸‹é¢æ˜¯ä¸€ä¸ª Pod å®‰å…¨ç­–ç•¥çš„ä¾‹å­ï¼Œæ‰€æœ‰å­—æ®µçš„è®¾ç½®éƒ½è¢«å…è®¸ï¼š\napiVersion: extensions/v1beta1 kind: PodSecurityPolicy metadata: name: permissive spec: seLinux: rule: RunAsAny supplementalGroups: rule: RunAsAny runAsUser: rule: RunAsAny fsGroup: rule: RunAsAny hostPorts: - min: 8000 max: 8080 volumes: - '*' ä¸‹è½½ç¤ºä¾‹æ–‡ä»¶å¯ä»¥åˆ›å»ºè¯¥ç­–ç•¥ï¼Œç„¶åæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š\n$ kubectl create -f ./psp.yaml podsecuritypolicy \"permissive\" created è·å– Pod å®‰å…¨ç­–ç•¥åˆ—è¡¨ linkè·å–å·²å­˜åœ¨ç­–ç•¥åˆ—è¡¨ï¼Œä½¿ç”¨ kubectl getï¼š\n$ kubectl get psp NAME PRIV CAPS SELINUX RUNASUSER FSGROUP SUPGROUP READONLYROOTFS VOLUMES permissive false [] RunAsAny RunAsAny RunAsAny RunAsAny false [*] privileged true [] RunAsAny RunAsAny RunAsAny RunAsAny false [*] restricted false [] RunAsAny MustRunAsNonRoot RunAsAny RunAsAny false [emptyDir secret downwardAPI configMap persistentVolumeClaim projected] ä¿®æ”¹ Pod å®‰å…¨ç­–ç•¥ linké€šè¿‡äº¤äº’æ–¹å¼ä¿®æ”¹ç­–ç•¥ï¼Œä½¿ç”¨ kubectl editï¼š\n$ kubectl edit psp permissive åˆ é™¤ Pod å®‰å…¨ç­–ç•¥ linkä¸€æ—¦ä¸å†éœ€è¦ä¸€ä¸ªç­–ç•¥ï¼Œå¾ˆå®¹æ˜“é€šè¿‡ kubectl åˆ é™¤å®ƒï¼š\n$ kubectl delete psp permissive podsecuritypolicy \"permissive\" deleted å¯ç”¨ Pod å®‰å…¨ç­–ç•¥ linkä¸ºäº†èƒ½å¤Ÿåœ¨é›†ç¾¤ä¸­ä½¿ç”¨ Pod å®‰å…¨ç­–ç•¥ï¼Œå¿…é¡»ç¡®ä¿å¦‚ä¸‹ï¼š\nå¯ç”¨ API ç±»å‹ extensions/v1beta1/podsecuritypolicyï¼ˆä»…å¯¹ 1.6 ä¹‹å‰çš„ç‰ˆæœ¬ï¼‰ å¯ç”¨è®¸å¯æ§åˆ¶å™¨ PodSecurityPolicy å®šä¹‰è‡ªå·±çš„ç­–ç•¥ RBAC linkåœ¨ Kubernetes 1.5 æˆ–æ›´æ–°ç‰ˆæœ¬ï¼Œå¯ä»¥ä½¿ç”¨ PodSecurityPolicy æ¥æ§åˆ¶ï¼Œå¯¹åŸºäºç”¨æˆ·è§’è‰²å’Œç»„çš„å·²æˆæƒå®¹å™¨çš„è®¿é—®ã€‚è®¿é—®ä¸åŒçš„ PodSecurityPolicy å¯¹è±¡ï¼Œå¯ä»¥åŸºäºè®¤è¯æ¥æ§åˆ¶ã€‚åŸºäº Deploymentã€ReplicaSet ç­‰åˆ›å»ºçš„ Podï¼Œé™åˆ¶è®¿é—® PodSecurityPolicy å¯¹è±¡ï¼ŒController Manager å¿…é¡»åŸºäºå®‰å…¨ API ç«¯å£è¿è¡Œï¼Œå¹¶ä¸”ä¸èƒ½å¤Ÿå…·æœ‰è¶…çº§ç”¨æˆ·æƒé™ã€‚\nPodSecurityPolicy è®¤è¯ä½¿ç”¨æ‰€æœ‰å¯ç”¨çš„ç­–ç•¥ï¼ŒåŒ…æ‹¬åˆ›å»º Pod çš„ç”¨æˆ·ï¼ŒPod ä¸ŠæŒ‡å®šçš„æœåŠ¡è´¦æˆ·ï¼ˆservice acountï¼‰ã€‚å½“ Pod åŸºäº Deploymentã€ReplicaSet åˆ›å»ºæ—¶ï¼Œå®ƒæ˜¯åˆ›å»º Pod çš„ Controller Managerï¼Œæ‰€ä»¥å¦‚æœåŸºäºéå®‰å…¨ API ç«¯å£è¿è¡Œï¼Œå…è®¸æ‰€æœ‰çš„ PodSecurityPolicy å¯¹è±¡ï¼Œå¹¶ä¸”ä¸èƒ½å¤Ÿæœ‰æ•ˆåœ°å®ç°ç»†åˆ†æƒé™ã€‚ç”¨æˆ·è®¿é—®ç»™å®šçš„ PSP ç­–ç•¥æœ‰æ•ˆï¼Œä»…å½“æ˜¯ç›´æ¥éƒ¨ç½² Pod çš„æƒ…å†µã€‚å½“ç›´æ¥éƒ¨ç½² Pod æ—¶ï¼Œåº”ç”¨ PodSecurityPolicy æ§åˆ¶åŸºäºè§’è‰²å’Œç»„çš„å·²æˆæƒå®¹å™¨çš„è®¿é—®ã€‚\nç”Ÿå‘½å‘¨æœŸ linkçŠ¶æ€ linkPod çš„ status å­—æ®µæ˜¯ä¸€ä¸ª PodStatus å¯¹è±¡ï¼ŒPodStatus ä¸­æœ‰ä¸€ä¸ª phase å­—æ®µã€‚\nPod çš„ç›¸ä½ï¼ˆphaseï¼‰æ˜¯ Pod åœ¨å…¶ç”Ÿå‘½å‘¨æœŸä¸­çš„ç®€å•å®è§‚æ¦‚è¿°ã€‚Pod ç›¸ä½çš„æ•°é‡å’Œå«ä¹‰æ˜¯ä¸¥æ ¼æŒ‡å®šçš„ã€‚\nä¸‹é¢æ˜¯ phase å¯èƒ½çš„å€¼ï¼š\næŒ‚èµ·ï¼ˆPendingï¼‰ï¼šPod å·²è¢« Kubernetes ç³»ç»Ÿæ¥å—ï¼Œä½†æœ‰ä¸€ä¸ªæˆ–è€…å¤šä¸ªå®¹å™¨é•œåƒå°šæœªåˆ›å»ºã€‚ç­‰å¾…æ—¶é—´åŒ…æ‹¬è°ƒåº¦ Pod çš„æ—¶é—´å’Œé€šè¿‡ç½‘ç»œä¸‹è½½é•œåƒçš„æ—¶é—´ï¼Œè¿™å¯èƒ½éœ€è¦èŠ±ç‚¹æ—¶é—´ã€‚ è¿è¡Œä¸­ï¼ˆRunningï¼‰ï¼šè¯¥ Pod å·²ç»ç»‘å®šåˆ°äº†ä¸€ä¸ªèŠ‚ç‚¹ä¸Šï¼ŒPod ä¸­æ‰€æœ‰çš„å®¹å™¨éƒ½å·²è¢«åˆ›å»ºã€‚è‡³å°‘æœ‰ä¸€ä¸ªå®¹å™¨æ­£åœ¨è¿è¡Œï¼Œæˆ–è€…æ­£å¤„äºå¯åŠ¨æˆ–é‡å¯çŠ¶æ€ã€‚ æˆåŠŸï¼ˆSucceededï¼‰ï¼šPod ä¸­çš„æ‰€æœ‰å®¹å™¨éƒ½è¢«æˆåŠŸç»ˆæ­¢ï¼Œå¹¶ä¸”ä¸ä¼šå†é‡å¯ã€‚ å¤±è´¥ï¼ˆFailedï¼‰ï¼šPod ä¸­çš„æ‰€æœ‰å®¹å™¨éƒ½å·²ç»ˆæ­¢äº†ï¼Œå¹¶ä¸”è‡³å°‘æœ‰ä¸€ä¸ªå®¹å™¨æ˜¯å› ä¸ºå¤±è´¥ç»ˆæ­¢ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå®¹å™¨ä»¥é 0 çŠ¶æ€é€€å‡ºæˆ–è€…è¢«ç³»ç»Ÿç»ˆæ­¢ã€‚ æœªçŸ¥ï¼ˆUnknownï¼‰ï¼šå› ä¸ºæŸäº›åŸå› æ— æ³•å–å¾— Pod çš„çŠ¶æ€ï¼Œé€šå¸¸æ˜¯å› ä¸ºä¸ Pod æ‰€åœ¨ä¸»æœºé€šä¿¡å¤±è´¥ã€‚ Pod æœ‰ä¸€ä¸ª PodStatus å¯¹è±¡ï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ª PodCondition æ•°ç»„ã€‚PodCondition æ•°ç»„çš„æ¯ä¸ªå…ƒç´ éƒ½æœ‰ä¸€ä¸ª type å­—æ®µå’Œä¸€ä¸ª status å­—æ®µã€‚type å­—æ®µæ˜¯å­—ç¬¦ä¸²ï¼Œå¯èƒ½çš„å€¼æœ‰ PodScheduledã€Readyã€Initializedã€Unschedulable å’Œ ContainersReadyã€‚status å­—æ®µæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¯èƒ½çš„å€¼æœ‰ Trueã€False å’Œ Unknownã€‚\ngraph LR classDef pending fill:#FFEB3B,stroke:#FBC02D; classDef running fill:#C8E6C9,stroke:#4CAF50; classDef terminal fill:#BBDEFB,stroke:#2196F3; classDef error fill:#FFCDD2,stroke:#F44336; Pending --\u003e|Init Containerså®Œæˆ| Running Pending --\u003e|é•œåƒæ‹‰å–å¤±è´¥| Failed Running --\u003e|æ‰€æœ‰å®¹å™¨æ­£å¸¸é€€å‡º| Succeeded Running --\u003e|å®¹å™¨å¼‚å¸¸é€€å‡º| Failed Running --\u003e|APIè¯·æ±‚åˆ é™¤| Terminating Pending --\u003e|APIè¯·æ±‚åˆ é™¤| Terminating Terminating --\u003e|æ¸…ç†å®Œæˆ| End(( )) class Pending pending; class Running running; class Succeeded,Failed,End terminal; class Failed error; å®¹å™¨æ¢é’ˆ linkæ¢é’ˆæ˜¯ç”± kubelet å¯¹å®¹å™¨æ‰§è¡Œçš„å®šæœŸè¯Šæ–­ã€‚è¦æ‰§è¡Œè¯Šæ–­ï¼Œkubelet è°ƒç”¨ç”±å®¹å™¨å®ç°çš„ Handlerã€‚æœ‰ä¸‰ç§ç±»å‹çš„å¤„ç†ç¨‹åºï¼š\nExecActionï¼šåœ¨å®¹å™¨å†…æ‰§è¡ŒæŒ‡å®šå‘½ä»¤ã€‚å¦‚æœå‘½ä»¤é€€å‡ºæ—¶è¿”å›ç ä¸º 0 åˆ™è®¤ä¸ºè¯Šæ–­æˆåŠŸã€‚ TCPSocketActionï¼šå¯¹æŒ‡å®šç«¯å£ä¸Šçš„å®¹å™¨çš„ IP åœ°å€è¿›è¡Œ TCP æ£€æŸ¥ã€‚å¦‚æœç«¯å£æ‰“å¼€ï¼Œåˆ™è¯Šæ–­è¢«è®¤ä¸ºæ˜¯æˆåŠŸçš„ã€‚ HTTPGetActionï¼šå¯¹æŒ‡å®šçš„ç«¯å£å’Œè·¯å¾„ä¸Šçš„å®¹å™¨çš„ IP åœ°å€æ‰§è¡Œ HTTP Get è¯·æ±‚ã€‚å¦‚æœå“åº”çš„çŠ¶æ€ç å¤§äºç­‰äº 200 ä¸”å°äº 400ï¼Œåˆ™è¯Šæ–­è¢«è®¤ä¸ºæ˜¯æˆåŠŸçš„ã€‚ æ¯æ¬¡æ¢æµ‹éƒ½å°†è·å¾—ä»¥ä¸‹ä¸‰ç§ç»“æœä¹‹ä¸€ï¼š\næˆåŠŸï¼šå®¹å™¨é€šè¿‡äº†è¯Šæ–­ã€‚ å¤±è´¥ï¼šå®¹å™¨æœªé€šè¿‡è¯Šæ–­ã€‚ æœªçŸ¥ï¼šè¯Šæ–­å¤±è´¥ï¼Œå› æ­¤ä¸ä¼šé‡‡å–ä»»ä½•è¡ŒåŠ¨ã€‚ Kubelet å¯ä»¥é€‰æ‹©æ˜¯å¦æ‰§è¡Œåœ¨å®¹å™¨ä¸Šè¿è¡Œçš„ä¸¤ç§æ¢é’ˆæ‰§è¡Œå’Œåšå‡ºååº”ï¼š\nlivenessProbeï¼šæŒ‡ç¤ºå®¹å™¨æ˜¯å¦æ­£åœ¨è¿è¡Œã€‚å¦‚æœå­˜æ´»æ¢æµ‹å¤±è´¥ï¼Œåˆ™ kubelet ä¼šæ€æ­»å®¹å™¨ï¼Œå¹¶ä¸”å®¹å™¨å°†å—åˆ°å…¶ é‡å¯ç­–ç•¥ çš„å½±å“ã€‚å¦‚æœå®¹å™¨ä¸æä¾›å­˜æ´»æ¢é’ˆï¼Œåˆ™é»˜è®¤çŠ¶æ€ä¸º Successã€‚ readinessProbeï¼šæŒ‡ç¤ºå®¹å™¨æ˜¯å¦å‡†å¤‡å¥½æœåŠ¡è¯·æ±‚ã€‚å¦‚æœå°±ç»ªæ¢æµ‹å¤±è´¥ï¼Œç«¯ç‚¹æ§åˆ¶å™¨å°†ä»ä¸ Pod åŒ¹é…çš„æ‰€æœ‰ Service çš„ç«¯ç‚¹ä¸­åˆ é™¤è¯¥ Pod çš„ IP åœ°å€ã€‚åˆå§‹å»¶è¿Ÿä¹‹å‰çš„å°±ç»ªçŠ¶æ€é»˜è®¤ä¸ºFailureã€‚å¦‚æœå®¹å™¨ä¸æä¾›å°±ç»ªæ¢é’ˆï¼Œåˆ™é»˜è®¤çŠ¶æ€ä¸º Successã€‚ è¯¥ä»€ä¹ˆæ—¶å€™ä½¿ç”¨å­˜æ´»ï¼ˆlivenessï¼‰å’Œå°±ç»ªï¼ˆreadinessï¼‰æ¢é’ˆï¼Ÿ\nå¦‚æœå®¹å™¨ä¸­çš„è¿›ç¨‹èƒ½å¤Ÿåœ¨é‡åˆ°é—®é¢˜æˆ–ä¸å¥åº·çš„æƒ…å†µä¸‹è‡ªè¡Œå´©æºƒï¼Œåˆ™ä¸ä¸€å®šéœ€è¦å­˜æ´»æ¢é’ˆ; kubelet å°†æ ¹æ® Pod çš„restartPolicy è‡ªåŠ¨æ‰§è¡Œæ­£ç¡®çš„æ“ä½œã€‚\nå¦‚æœä½ å¸Œæœ›å®¹å™¨åœ¨æ¢æµ‹å¤±è´¥æ—¶è¢«æ€æ­»å¹¶é‡æ–°å¯åŠ¨ï¼Œé‚£ä¹ˆè¯·æŒ‡å®šä¸€ä¸ªå­˜æ´»æ¢é’ˆï¼Œå¹¶æŒ‡å®šrestartPolicy ä¸º Always æˆ– OnFailureã€‚\nå¦‚æœè¦ä»…åœ¨æ¢æµ‹æˆåŠŸæ—¶æ‰å¼€å§‹å‘ Pod å‘é€æµé‡ï¼Œè¯·æŒ‡å®šå°±ç»ªæ¢é’ˆã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå°±ç»ªæ¢é’ˆå¯èƒ½ä¸å­˜æ´»æ¢é’ˆç›¸åŒï¼Œä½†æ˜¯ spec ä¸­çš„å°±ç»ªæ¢é’ˆçš„å­˜åœ¨æ„å‘³ç€ Pod å°†åœ¨æ²¡æœ‰æ¥æ”¶åˆ°ä»»ä½•æµé‡çš„æƒ…å†µä¸‹å¯åŠ¨ï¼Œå¹¶ä¸”åªæœ‰åœ¨æ¢é’ˆæ¢æµ‹æˆåŠŸåæ‰å¼€å§‹æ¥æ”¶æµé‡ã€‚\nå¦‚æœä½ å¸Œæœ›å®¹å™¨èƒ½å¤Ÿè‡ªè¡Œç»´æŠ¤ï¼Œä½ å¯ä»¥æŒ‡å®šä¸€ä¸ªå°±ç»ªæ¢é’ˆï¼Œè¯¥æ¢é’ˆæ£€æŸ¥ä¸å­˜æ´»æ¢é’ˆä¸åŒçš„ç«¯ç‚¹ã€‚\nè¯·æ³¨æ„ï¼Œå¦‚æœä½ åªæƒ³åœ¨ Pod è¢«åˆ é™¤æ—¶èƒ½å¤Ÿæ’é™¤è¯·æ±‚ï¼Œåˆ™ä¸ä¸€å®šéœ€è¦ä½¿ç”¨å°±ç»ªæ¢é’ˆï¼›åœ¨åˆ é™¤ Pod æ—¶ï¼ŒPod ä¼šè‡ªåŠ¨å°†è‡ªèº«ç½®äºæœªå®ŒæˆçŠ¶æ€ï¼Œæ— è®ºå°±ç»ªæ¢é’ˆæ˜¯å¦å­˜åœ¨ã€‚å½“ç­‰å¾… Pod ä¸­çš„å®¹å™¨åœæ­¢æ—¶ï¼ŒPod ä»å¤„äºæœªå®ŒæˆçŠ¶æ€ã€‚\né‡å¯ç­–ç•¥ linkPodSpec ä¸­æœ‰ä¸€ä¸ª restartPolicy å­—æ®µï¼Œå¯èƒ½çš„å€¼ä¸º Alwaysã€OnFailure å’Œ Neverã€‚é»˜è®¤ä¸º Alwaysã€‚ restartPolicy é€‚ç”¨äº Pod ä¸­çš„æ‰€æœ‰å®¹å™¨ã€‚restartPolicy ä»…æŒ‡é€šè¿‡åŒä¸€èŠ‚ç‚¹ä¸Šçš„ kubelet é‡æ–°å¯åŠ¨å®¹å™¨ã€‚å¤±è´¥çš„å®¹å™¨ç”± kubelet ä»¥äº”åˆ†é’Ÿä¸ºä¸Šé™çš„æŒ‡æ•°é€€é¿å»¶è¿Ÿï¼ˆ10 ç§’ï¼Œ20 ç§’ï¼Œ40 ç§’â€¦ï¼‰é‡æ–°å¯åŠ¨ï¼Œå¹¶åœ¨æˆåŠŸæ‰§è¡Œååˆ†é’Ÿåé‡ç½®ã€‚å¦‚ Pod æ–‡æ¡£ ä¸­æ‰€è¿°ï¼Œä¸€æ—¦ç»‘å®šåˆ°ä¸€ä¸ªèŠ‚ç‚¹ï¼ŒPod å°†æ°¸è¿œä¸ä¼šé‡æ–°ç»‘å®šåˆ°å¦ä¸€ä¸ªèŠ‚ç‚¹ã€‚\nçš„ç”Ÿå‘½ linkä¸€èˆ¬æ¥è¯´ï¼ŒPod ä¸ä¼šæ¶ˆå¤±ï¼Œç›´åˆ°äººä¸ºé”€æ¯ä»–ä»¬ã€‚è¿™å¯èƒ½æ˜¯ä¸€ä¸ªäººæˆ–æ§åˆ¶å™¨ã€‚è¿™ä¸ªè§„åˆ™çš„å”¯ä¸€ä¾‹å¤–æ˜¯æˆåŠŸæˆ–å¤±è´¥çš„ phase è¶…è¿‡ä¸€æ®µæ—¶é—´ï¼ˆç”± master ç¡®å®šï¼‰çš„ Pod å°†è¿‡æœŸå¹¶è¢«è‡ªåŠ¨é”€æ¯ã€‚\næœ‰ä¸‰ç§å¯ç”¨çš„æ§åˆ¶å™¨ï¼š\nä½¿ç”¨ Job è¿è¡Œé¢„æœŸä¼šç»ˆæ­¢çš„ Podï¼Œä¾‹å¦‚æ‰¹é‡è®¡ç®—ã€‚Job ä»…é€‚ç”¨äºé‡å¯ç­–ç•¥ä¸º OnFailure æˆ– Never çš„ Podã€‚\nå¯¹é¢„æœŸä¸ä¼šç»ˆæ­¢çš„ Pod ä½¿ç”¨ ReplicationControllerã€ReplicaSet å’Œ Deployment ï¼Œä¾‹å¦‚ Web æœåŠ¡å™¨ã€‚ReplicationController ä»…é€‚ç”¨äºå…·æœ‰ restartPolicy ä¸º Always çš„ Podã€‚\næä¾›ç‰¹å®šäºæœºå™¨çš„ç³»ç»ŸæœåŠ¡ï¼Œä½¿ç”¨ DaemonSet ä¸ºæ¯å°æœºå™¨è¿è¡Œä¸€ä¸ª Podã€‚\næ‰€æœ‰è¿™ä¸‰ç§ç±»å‹çš„æ§åˆ¶å™¨éƒ½åŒ…å«ä¸€ä¸ª PodTemplateã€‚å»ºè®®åˆ›å»ºé€‚å½“çš„æ§åˆ¶å™¨ï¼Œè®©å®ƒä»¬æ¥åˆ›å»º Podï¼Œè€Œä¸æ˜¯ç›´æ¥è‡ªå·±åˆ›å»º Podã€‚è¿™æ˜¯å› ä¸ºå•ç‹¬çš„ Pod åœ¨æœºå™¨æ•…éšœçš„æƒ…å†µä¸‹æ²¡æœ‰åŠæ³•è‡ªåŠ¨å¤åŸï¼Œè€Œæ§åˆ¶å™¨å´å¯ä»¥ã€‚\nå¦‚æœèŠ‚ç‚¹æ­»äº¡æˆ–ä¸é›†ç¾¤çš„å…¶ä½™éƒ¨åˆ†æ–­å¼€è¿æ¥ï¼Œåˆ™ Kubernetes å°†åº”ç”¨ä¸€ä¸ªç­–ç•¥å°†ä¸¢å¤±èŠ‚ç‚¹ä¸Šçš„æ‰€æœ‰ Pod çš„ phase è®¾ç½®ä¸º Failedã€‚\nç¤ºä¾‹ linké«˜çº§ liveness æ¢é’ˆ linkå­˜æ´»æ¢é’ˆç”± kubelet æ¥æ‰§è¡Œï¼Œå› æ­¤æ‰€æœ‰çš„è¯·æ±‚éƒ½åœ¨ kubelet çš„ç½‘ç»œå‘½åç©ºé—´ä¸­è¿›è¡Œã€‚\napiVersion: v1 kind: Pod metadata: labels: test: liveness name: liveness-http spec: containers: - args: - /server image: k8s.gcr.io/liveness livenessProbe: httpGet: # when \"host\" is not defined, \"PodIP\" will be used # host: my-host # when \"scheme\" is not defined, \"HTTP\" scheme will be used. Only \"HTTP\" and \"HTTPS\" are allowed # scheme: HTTPS path: /healthz port: 8080 httpHeaders: - name: X-Custom-Header value: Awesome initialDelaySeconds: 15 timeoutSeconds: 1 name: liveness çŠ¶æ€ç¤ºä¾‹ link Pod ä¸­åªæœ‰ä¸€ä¸ªå®¹å™¨å¹¶ä¸”æ­£åœ¨è¿è¡Œã€‚å®¹å™¨æˆåŠŸé€€å‡ºã€‚ è®°å½•å®Œæˆäº‹ä»¶ã€‚ å¦‚æœ restartPolicy ä¸ºï¼š Alwaysï¼šé‡å¯å®¹å™¨ï¼›Pod phase ä»ä¸º Runningã€‚ OnFailureï¼šPod phase å˜æˆ Succeededã€‚ Neverï¼šPod phase å˜æˆ Succeededã€‚ Podä¸­åªæœ‰ä¸€ä¸ªå®¹å™¨å¹¶ä¸”æ­£åœ¨è¿è¡Œã€‚å®¹å™¨é€€å‡ºå¤±è´¥ã€‚ è®°å½•å¤±è´¥äº‹ä»¶ã€‚ å¦‚æœ restartPolicy ä¸ºï¼š Alwaysï¼šé‡å¯å®¹å™¨ï¼›Pod phase ä»ä¸º Runningã€‚ OnFailureï¼šé‡å¯å®¹å™¨ï¼›Pod phase ä»ä¸º Runningã€‚ Neverï¼šPod phase å˜æˆ Failedã€‚ Pod ä¸­æœ‰ä¸¤ä¸ªå®¹å™¨å¹¶ä¸”æ­£åœ¨è¿è¡Œã€‚å®¹å™¨ 1 é€€å‡ºå¤±è´¥ã€‚ è®°å½•å¤±è´¥äº‹ä»¶ã€‚ å¦‚æœ restartPolicy ä¸ºï¼š Alwaysï¼šé‡å¯å®¹å™¨ï¼›Pod phase ä»ä¸º Runningã€‚ OnFailureï¼šé‡å¯å®¹å™¨ï¼›Pod phase ä»ä¸º Runningã€‚ Neverï¼šä¸é‡å¯å®¹å™¨ï¼›Pod phase ä»ä¸º Runningã€‚ å¦‚æœæœ‰å®¹å™¨ 1 æ²¡æœ‰å¤„äºè¿è¡ŒçŠ¶æ€ï¼Œå¹¶ä¸”å®¹å™¨ 2 é€€å‡ºï¼š è®°å½•å¤±è´¥äº‹ä»¶ã€‚ å¦‚æœ restartPolicy ä¸ºï¼š Alwaysï¼šé‡å¯å®¹å™¨ï¼›Pod phase ä»ä¸º Runningã€‚ OnFailureï¼šé‡å¯å®¹å™¨ï¼›Pod phase ä»ä¸º Runningã€‚ Neverï¼šPod phase å˜æˆ Failedã€‚ Pod ä¸­åªæœ‰ä¸€ä¸ªå®¹å™¨å¹¶å¤„äºè¿è¡ŒçŠ¶æ€ã€‚å®¹å™¨è¿è¡Œæ—¶å†…å­˜è¶…å‡ºé™åˆ¶ï¼š å®¹å™¨ä»¥å¤±è´¥çŠ¶æ€ç»ˆæ­¢ã€‚ è®°å½• OOM äº‹ä»¶ã€‚ å¦‚æœ restartPolicy ä¸ºï¼š Alwaysï¼šé‡å¯å®¹å™¨ï¼›Pod phase ä»ä¸º Runningã€‚ OnFailureï¼šé‡å¯å®¹å™¨ï¼›Pod phase ä»ä¸º Runningã€‚ Never: è®°å½•å¤±è´¥äº‹ä»¶ï¼›Pod phase ä»ä¸º Failedã€‚ Pod æ­£åœ¨è¿è¡Œï¼Œç£ç›˜æ•…éšœï¼š æ€æ‰æ‰€æœ‰å®¹å™¨ã€‚ è®°å½•é€‚å½“äº‹ä»¶ã€‚ Pod phase å˜æˆ Failedã€‚ å¦‚æœä½¿ç”¨æ§åˆ¶å™¨æ¥è¿è¡Œï¼ŒPod å°†åœ¨åˆ«å¤„é‡å»ºã€‚ Pod æ­£åœ¨è¿è¡Œï¼Œå…¶èŠ‚ç‚¹è¢«åˆ†æ®µã€‚ èŠ‚ç‚¹æ§åˆ¶å™¨ç­‰å¾…ç›´åˆ°è¶…æ—¶ã€‚ èŠ‚ç‚¹æ§åˆ¶å™¨å°† Pod phase è®¾ç½®ä¸º Failedã€‚ å¦‚æœæ˜¯ç”¨æ§åˆ¶å™¨æ¥è¿è¡Œï¼ŒPod å°†åœ¨åˆ«å¤„é‡å»ºã€‚ Hook linkPod Hookï¼ˆé’©å­ï¼‰æ˜¯ç”± Kubernetes ç®¡ç†çš„ kubelet å‘èµ·çš„ï¼Œå½“å®¹å™¨ä¸­çš„è¿›ç¨‹å¯åŠ¨å‰æˆ–è€…å®¹å™¨ä¸­çš„è¿›ç¨‹ç»ˆæ­¢ä¹‹å‰è¿è¡Œï¼Œè¿™æ˜¯åŒ…å«åœ¨å®¹å™¨çš„ç”Ÿå‘½å‘¨æœŸä¹‹ä¸­ã€‚å¯ä»¥åŒæ—¶ä¸º Pod ä¸­çš„æ‰€æœ‰å®¹å™¨éƒ½é…ç½® hookã€‚\nHook çš„ç±»å‹åŒ…æ‹¬ä¸¤ç§ï¼š\nexecï¼šæ‰§è¡Œä¸€æ®µå‘½ä»¤ HTTPï¼šå‘é€ HTTP è¯·æ±‚ã€‚ apiVersion: v1 kind: Pod metadata: name: lifecycle-demo spec: containers: - name: lifecycle-demo-container image: nginx lifecycle: postStart: exec: command: [\"/bin/sh\", \"-c\", \"echo Hello from the postStart handler\u003e /usr/share/message\"] preStop: exec: command: [\"/usr/sbin/nginx\",\"-s\",\"quit\"] Kubernetes åœ¨å®¹å™¨åˆ›å»ºåç«‹å³å‘é€ postStart äº‹ä»¶ã€‚ä½†æ˜¯ï¼Œä¸èƒ½ä¿è¯åœ¨è°ƒç”¨å®¹å™¨çš„å…¥å£ç‚¹ä¹‹å‰è°ƒç”¨ postStart å¤„ç†ç¨‹åºã€‚postStart å¤„ç†ç¨‹åºç›¸å¯¹äºå®¹å™¨çš„ä»£ç å¼‚æ­¥è¿è¡Œï¼Œä½† Kubernetes å¯¹å®¹å™¨çš„ç®¡ç†å°†è¢«é˜»æ­¢ï¼Œç›´åˆ° postStart å¤„ç†ç¨‹åºå®Œæˆã€‚åœ¨ postStart å¤„ç†ç¨‹åºå®Œæˆä¹‹å‰ï¼Œå®¹å™¨çš„çŠ¶æ€ä¸ä¼šè®¾ç½®ä¸º RUNNINGã€‚\nPreStop åœ¨å®¹å™¨ç»ˆæ­¢ä¹‹å‰è¢«åŒæ­¥é˜»å¡è°ƒç”¨ï¼Œå¸¸ç”¨äºåœ¨å®¹å™¨ç»“æŸå‰ä¼˜é›…çš„é‡Šæ”¾èµ„æºã€‚\nå¦‚æœ postStart æˆ–è€… preStop hook å¤±è´¥ï¼Œå°†ä¼šç»ˆæ­¢å®¹å™¨ã€‚\nä¸­æ–­é¢„ç®— linkè‡ªæ„¿ä¸­æ–­å’Œéè‡ªæ„¿ä¸­æ–­ linkPod ä¸ä¼šæ¶ˆå¤±ï¼Œç›´åˆ°æœ‰äººï¼ˆäººç±»æˆ–æ§åˆ¶å™¨ï¼‰å°†å…¶é”€æ¯ï¼Œæˆ–è€…å½“å‡ºç°ä¸å¯é¿å…çš„ç¡¬ä»¶æˆ–ç³»ç»Ÿè½¯ä»¶é”™è¯¯ã€‚\næˆ‘ä»¬æŠŠè¿™äº›ä¸å¯é¿å…çš„æƒ…å†µç§°ä¸ºåº”ç”¨çš„éè‡ªæ„¿æ€§ä¸­æ–­ã€‚ä¾‹å¦‚ï¼š\nåç«¯èŠ‚ç‚¹ç‰©ç†æœºçš„ç¡¬ä»¶æ•…éšœ é›†ç¾¤ç®¡ç†å‘˜é”™è¯¯åœ°åˆ é™¤è™šæ‹Ÿæœºï¼ˆå®ä¾‹ï¼‰ äº‘æä¾›å•†æˆ–ç®¡ç†ç¨‹åºæ•…éšœä½¿è™šæ‹Ÿæœºæ¶ˆå¤± å†…æ ¸ææ…Œï¼ˆkernel panicï¼‰ èŠ‚ç‚¹ç”±äºé›†ç¾¤ç½‘ç»œåˆ†åŒºè€Œä»é›†ç¾¤ä¸­æ¶ˆå¤± ç”±äºèŠ‚ç‚¹èµ„æºä¸è¶³è€Œå°†å®¹å™¨é€å‡º é™¤èµ„æºä¸è¶³çš„æƒ…å†µå¤–ï¼Œå¤§å¤šæ•°ç”¨æˆ·åº”è¯¥éƒ½ç†Ÿæ‚‰ä»¥ä¸‹è¿™äº›æƒ…å†µï¼›å®ƒä»¬ä¸æ˜¯ç‰¹å®šäº Kubernetes çš„ã€‚\næˆ‘ä»¬ç§°è¿™äº›æƒ…å†µä¸ºâ€è‡ªæ„¿ä¸­æ–­â€œã€‚åŒ…æ‹¬ç”±åº”ç”¨ç¨‹åºæ‰€æœ‰è€…å‘èµ·çš„æ“ä½œå’Œç”±é›†ç¾¤ç®¡ç†å‘˜å‘èµ·çš„æ“ä½œã€‚å…¸å‹çš„åº”ç”¨ç¨‹åºæ‰€æœ‰è€…æ“ä½œåŒ…æ‹¬ï¼š\nåˆ é™¤ç®¡ç†è¯¥ pod çš„ Deployment æˆ–å…¶ä»–æ§åˆ¶å™¨ æ›´æ–°äº† Deployment çš„ pod æ¨¡æ¿å¯¼è‡´ pod é‡å¯ ç›´æ¥åˆ é™¤ podï¼ˆæ„å¤–åˆ é™¤ï¼‰ é›†ç¾¤ç®¡ç†å‘˜æ“ä½œåŒ…æ‹¬ï¼š\næ’ç©ºï¼ˆdrainï¼‰èŠ‚ç‚¹è¿›è¡Œä¿®å¤æˆ–å‡çº§ã€‚ ä»é›†ç¾¤ä¸­æ’ç©ºèŠ‚ç‚¹ä»¥ç¼©å°é›†ç¾¤ã€‚ ä»èŠ‚ç‚¹ä¸­ç§»é™¤ä¸€ä¸ª podï¼Œä»¥å…è®¸å…¶ä»– pod ä½¿ç”¨è¯¥èŠ‚ç‚¹ã€‚ è¿™äº›æ“ä½œå¯èƒ½ç”±é›†ç¾¤ç®¡ç†å‘˜ç›´æ¥æ‰§è¡Œï¼Œä¹Ÿå¯èƒ½ç”±é›†ç¾¤ç®¡ç†å‘˜æˆ–é›†ç¾¤æ‰˜ç®¡æä¾›å•†è‡ªåŠ¨æ‰§è¡Œã€‚\nè¯¢é—®ä½ çš„é›†ç¾¤ç®¡ç†å‘˜æˆ–å’¨è¯¢ä½ çš„äº‘æä¾›å•†æˆ–å‘è¡Œæ–‡æ¡£ï¼Œä»¥ç¡®å®šæ˜¯å¦ä¸ºä½ çš„é›†ç¾¤å¯ç”¨äº†ä»»ä½•è‡ªåŠ¨ä¸­æ–­æºã€‚å¦‚æœæ²¡æœ‰å¯ç”¨ï¼Œä½ å¯ä»¥è·³è¿‡åˆ›å»º Pod Disruption Budgetï¼ˆPod ä¸­æ–­é¢„ç®—ï¼‰ã€‚\nå¤„ç†ä¸­æ–­ linkä»¥ä¸‹æ˜¯ä¸€äº›å‡è½»éè‡ªæ„¿æ€§ä¸­æ–­çš„æ–¹æ³•ï¼š\nç¡®ä¿ä½ çš„ pod è¯·æ±‚æ‰€éœ€çš„èµ„æºã€‚ å¦‚æœä½ éœ€è¦æ›´é«˜çš„å¯ç”¨æ€§ï¼Œè¯·å¤åˆ¶ä½ çš„åº”ç”¨ç¨‹åºã€‚ ï¼ˆäº†è§£æœ‰å…³è¿è¡Œå¤åˆ¶çš„æ— çŠ¶æ€å’Œæœ‰çŠ¶æ€åº”ç”¨ç¨‹åºçš„ä¿¡æ¯ã€‚ï¼‰ ä¸ºäº†åœ¨è¿è¡Œå¤åˆ¶åº”ç”¨ç¨‹åºæ—¶è·å¾—æ›´é«˜çš„å¯ç”¨æ€§ï¼Œè¯·è·¨æœºæ¶ï¼ˆä½¿ç”¨åäº²å’Œæ€§ï¼‰æˆ–è·¨åŒºåŸŸï¼ˆå¦‚æœä½¿ç”¨å¤šåŒºåŸŸé›†ç¾¤ï¼‰åˆ†å¸ƒåº”ç”¨ç¨‹åºã€‚ è‡ªæ„¿ä¸­æ–­çš„é¢‘ç‡å„ä¸ç›¸åŒã€‚åœ¨ Kubernetes é›†ç¾¤ä¸Šï¼Œæ ¹æœ¬æ²¡æœ‰è‡ªæ„¿çš„ä¸­æ–­ã€‚ä½†æ˜¯ï¼Œä½ çš„é›†ç¾¤ç®¡ç†å‘˜æˆ–æ‰˜ç®¡æä¾›å•†å¯èƒ½ä¼šè¿è¡Œä¸€äº›å¯¼è‡´è‡ªæ„¿ä¸­æ–­çš„é™„åŠ æœåŠ¡ã€‚ä¾‹å¦‚ï¼ŒèŠ‚ç‚¹è½¯ä»¶æ›´æ–°å¯èƒ½å¯¼è‡´è‡ªæ„¿æ›´æ–°ã€‚å¦å¤–ï¼Œé›†ç¾¤ï¼ˆèŠ‚ç‚¹ï¼‰è‡ªåŠ¨ç¼©æ”¾çš„æŸäº›å®ç°å¯èƒ½ä¼šå¯¼è‡´ç¢ç‰‡æ•´ç†å’Œç´§ç¼©èŠ‚ç‚¹çš„è‡ªæ„¿ä¸­æ–­ã€‚ä½ çš„é›†ç¾¤ç®¡ç†å‘˜æˆ–ä¸»æœºæä¾›å•†åº”è¯¥å·²ç»è®°å½•äº†æœŸæœ›çš„è‡ªæ„¿ä¸­æ–­çº§åˆ«ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰ã€‚\nKubernetes æä¾›çš„åŠŸèƒ½å¯ä»¥æ»¡è¶³åœ¨é¢‘ç¹åœ°è‡ªåŠ¨ä¸­æ–­çš„åŒæ—¶è¿è¡Œé«˜å¯ç”¨çš„åº”ç”¨ç¨‹åºã€‚æˆ‘ä»¬ç§°ä¹‹ä¸ºâ€œä¸­æ–­é¢„ç®—â€ã€‚\nä¸­æ–­é¢„ç®—çš„å·¥ä½œåŸç† linkåº”ç”¨ç¨‹åºæ‰€æœ‰è€…å¯ä»¥ä¸ºæ¯ä¸ªåº”ç”¨ç¨‹åºåˆ›å»ºä¸€ä¸ª PodDisruptionBudget å¯¹è±¡ï¼ˆPDBï¼‰ã€‚PDB å°†é™åˆ¶åœ¨åŒä¸€æ—¶é—´è‡ªæ„¿ä¸­æ–­çš„å¤åˆ¶åº”ç”¨ç¨‹åºä¸­å®•æœºçš„ Pod çš„æ•°é‡ã€‚ä¾‹å¦‚ï¼ŒåŸºäºå®šé¢çš„åº”ç”¨ç¨‹åºå¸Œæœ›ç¡®ä¿è¿è¡Œçš„å‰¯æœ¬æ•°é‡æ°¸è¿œä¸ä¼šä½äºä»²è£æ‰€éœ€çš„æ•°é‡ã€‚Web å‰ç«¯å¯èƒ½å¸Œæœ›ç¡®ä¿æä¾›è´Ÿè½½çš„å‰¯æœ¬çš„æ•°é‡æ°¸è¿œä¸ä¼šä½äºæ€»æ•°çš„æŸä¸ªç™¾åˆ†æ¯”ã€‚\né›†ç¾¤ç®¡ç†å™¨å’Œæ‰˜ç®¡æä¾›å•†åº”ä½¿ç”¨éµå¾ª Pod Disruption Budgets çš„å·¥å…·ï¼Œæ–¹æ³•æ˜¯è°ƒç”¨Eviction APIè€Œä¸æ˜¯ç›´æ¥åˆ é™¤ Podã€‚ä¾‹å¦‚ kubectl drain å‘½ä»¤å’Œ Kubernetes-on-GCE é›†ç¾¤å‡çº§è„šæœ¬ï¼ˆcluster/gce/upgrade.shï¼‰ã€‚\nå½“é›†ç¾¤ç®¡ç†å‘˜æƒ³è¦æ’ç©ºèŠ‚ç‚¹æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ kubectl drain å‘½ä»¤ã€‚è¯¥å‘½ä»¤ä¼šè¯•å›¾é©±é€æœºå™¨ä¸Šçš„æ‰€æœ‰ podã€‚é©±é€è¯·æ±‚å¯èƒ½ä¼šæš‚æ—¶è¢«æ‹’ç»ï¼Œå¹¶ä¸”è¯¥å·¥å…·ä¼šå®šæœŸé‡è¯•æ‰€æœ‰å¤±è´¥çš„è¯·æ±‚ï¼Œç›´åˆ°æ‰€æœ‰çš„ pod éƒ½è¢«ç»ˆæ­¢ï¼Œæˆ–è€…ç›´åˆ°è¾¾åˆ°é…ç½®çš„è¶…æ—¶æ—¶é—´ã€‚\nPDB æŒ‡å®šåº”ç”¨ç¨‹åºå¯ä»¥å®¹å¿çš„å‰¯æœ¬çš„æ•°é‡ï¼Œç›¸å¯¹äºåº”è¯¥æœ‰å¤šå°‘å‰¯æœ¬ã€‚ä¾‹å¦‚ï¼Œå…·æœ‰ spec.replicasï¼š5 çš„ Deployment åœ¨ä»»ä½•ç»™å®šçš„æ—¶é—´éƒ½åº”è¯¥æœ‰ 5 ä¸ª Podã€‚å¦‚æœå…¶ PDB å…è®¸åœ¨æŸä¸€æ—¶åˆ»æœ‰ 4 ä¸ªå‰¯æœ¬ï¼Œé‚£ä¹ˆé©±é€ API å°†åªå…è®¸ä»…æœ‰ä¸€ä¸ªè€Œä¸æ˜¯ä¸¤ä¸ª Pod è‡ªæ„¿ä¸­æ–­ã€‚\nä½¿ç”¨æ ‡ç­¾é€‰æ‹©å™¨æ¥æŒ‡å®šåº”ç”¨ç¨‹åºçš„ä¸€ç»„ podï¼Œè¿™ä¸åº”ç”¨ç¨‹åºçš„æ§åˆ¶å™¨ï¼ˆDeploymentã€StatefulSet ç­‰ï¼‰ä½¿ç”¨çš„ç›¸åŒã€‚\nPod æ§åˆ¶å™¨çš„ .spec.replicas è®¡ç®—â€œé¢„æœŸçš„â€pod æ•°é‡ã€‚ä½¿ç”¨å¯¹è±¡çš„ .metadata.ownerReferences å€¼ä»æ§åˆ¶å™¨è·å–ã€‚\nPDB ä¸èƒ½é˜»æ­¢éè‡ªæ„¿ä¸­æ–­çš„å‘ç”Ÿï¼Œä½†æ˜¯å®ƒä»¬ç¡®å®ä¼šå½±å“é¢„ç®—ã€‚\nç”±äºåº”ç”¨ç¨‹åºçš„æ»šåŠ¨å‡çº§è€Œè¢«åˆ é™¤æˆ–ä¸å¯ç”¨çš„ Pod ç¡®å®ä¼šè®¡å…¥ä¸­æ–­é¢„ç®—ï¼Œä½†æ§åˆ¶å™¨ï¼ˆå¦‚ Deployment å’Œ StatefulSetï¼‰åœ¨è¿›è¡Œæ»šåŠ¨å‡çº§æ—¶ä¸å— PDB çš„é™åˆ¶â€”â€”åœ¨åº”ç”¨ç¨‹åºæ›´æ–°æœŸé—´çš„æ•…éšœå¤„ç†æ˜¯åœ¨æ§åˆ¶å™¨çš„è§„æ ¼ï¼ˆspecï¼‰ä¸­é…ç½®ï¼ˆäº†è§£æ›´æ–° Deploymentï¼‰ã€‚\nä½¿ç”¨é©±é€ API é©±é€ pod æ—¶ï¼Œpod ä¼šè¢«ä¼˜é›…åœ°ç»ˆæ­¢ï¼ˆè¯·å‚é˜… PodSpec ä¸­çš„ terminationGracePeriodSecondsï¼‰ã€‚\nPDB ç¤ºä¾‹ linkå‡è®¾é›†ç¾¤æœ‰3ä¸ªèŠ‚ç‚¹ï¼Œnode-1 åˆ° node-3ã€‚é›†ç¾¤ä¸­è¿è¡Œäº†ä¸€äº›åº”ç”¨ï¼Œå…¶ä¸­ä¸€ä¸ªåº”ç”¨æœ‰3ä¸ªå‰¯æœ¬ï¼Œåˆ†åˆ«æ˜¯ pod-aã€pod-b å’Œ pod-cã€‚å¦å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªä¸å®ƒç›¸å…³çš„ä¸å…·æœ‰ PDB çš„ podï¼Œæˆ‘ä»¬ç§°ä¸ºä¹‹ä¸º pod-xã€‚æœ€åˆï¼Œæ‰€æœ‰ Pod çš„åˆ†å¸ƒå¦‚ä¸‹ï¼š\nnode-1 node-2 node-3 pod-a available pod-b available pod-c available pod-x available æ‰€æœ‰çš„3ä¸ª pod éƒ½æ˜¯ Deployment ä¸­çš„ä¸€éƒ¨åˆ†ï¼Œå¹¶ä¸”å®ƒä»¬å…±åŒæ‹¥æœ‰ä¸€ä¸ª PDBï¼Œè¦æ±‚è‡³å°‘æœ‰3ä¸ª pod ä¸­çš„2ä¸ªå§‹ç»ˆå¤„äºå¯ç”¨çŠ¶æ€ã€‚\nä¾‹å¦‚ï¼Œå‡è®¾é›†ç¾¤ç®¡ç†å‘˜æƒ³è¦é‡å¯ç³»ç»Ÿï¼Œå‡çº§å†…æ ¸ç‰ˆæœ¬æ¥ä¿®å¤å†…æ ¸ä¸­çš„é”™è¯¯ã€‚é›†ç¾¤ç®¡ç†å‘˜é¦–å…ˆä½¿ç”¨ kubectl drain å‘½ä»¤å°è¯•æ’é™¤ node-1ã€‚è¯¥å·¥å…·è¯•å›¾é©±é€ pod-a å’Œ pod-xã€‚è¿™ç«‹å³æˆåŠŸã€‚ä¸¤ä¸ª Pod åŒæ—¶è¿›å…¥ç»ˆæ­¢çŠ¶æ€ã€‚è¿™æ—¶çš„é›†ç¾¤å¤„äºè¿™ç§çŠ¶æ€ï¼š\nnode-1 draining node-2 node-3 pod-a terminating pod-b available pod-c available pod-x terminating Deployment æ³¨æ„åˆ°å…¶ä¸­æœ‰ä¸€ä¸ª pod å¤„äºæ­£åœ¨ç»ˆæ­¢ï¼Œå› æ­¤ä¼šåˆ›å»ºäº†ä¸€ä¸ª pod-d æ¥æ›¿æ¢ã€‚ç”±äº node-1 è¢«å°é”ï¼ˆcordonï¼‰ï¼Œå®ƒè½åœ¨å¦ä¸€ä¸ªèŠ‚ç‚¹ä¸Šã€‚åŒæ—¶å…¶å®ƒæ§åˆ¶å™¨ä¹Ÿåˆ›å»ºäº† pod-y ä½œä¸º pod-x çš„æ›¿ä»£å“ã€‚\nï¼ˆæ³¨æ„ï¼šå¯¹äº StatefulSetï¼Œpod-a å°†è¢«ç§°ä¸º pod-1ï¼Œéœ€è¦åœ¨æ›¿æ¢ä¹‹å‰å®Œå…¨ç»ˆæ­¢ï¼Œæ›¿ä»£å®ƒçš„ä¹Ÿç§°ä¸º pod-1ï¼Œä½†æ˜¯å…·æœ‰ä¸åŒçš„ UIDï¼Œå¯ä»¥åˆ›å»ºã€‚å¦åˆ™ï¼Œç¤ºä¾‹ä¹Ÿé€‚ç”¨äº StatefulSetã€‚ï¼‰\nå½“å‰é›†ç¾¤çš„çŠ¶æ€å¦‚ä¸‹ï¼š\nnode-1 draining node-2 node-3 pod-a terminating pod-b available pod-c available pod-x terminating pod-d starting pod-y åœ¨æŸä¸€æ—¶åˆ»ï¼Œpod è¢«ç»ˆæ­¢ï¼Œé›†ç¾¤çœ‹èµ·æ¥åƒä¸‹é¢è¿™æ ·å­ï¼š\nnode-1 drained node-2 node-3 pod-b available pod-c available pod-d starting pod-y æ­¤æ—¶ï¼Œå¦‚æœä¸€ä¸ªæ€¥èºçš„é›†ç¾¤ç®¡ç†å‘˜è¯•å›¾æ’ç©ºï¼ˆdrainï¼‰node-2 æˆ– node-3ï¼Œdrain å‘½ä»¤å°†è¢«é˜»å¡ï¼Œå› ä¸ºå¯¹äº Deployment åªæœ‰2ä¸ªå¯ç”¨çš„ podï¼Œå¹¶ä¸”å…¶ PDB è‡³å°‘éœ€è¦2ä¸ªã€‚ç»è¿‡ä¸€æ®µæ—¶é—´ï¼Œpod-d å˜å¾—å¯ç”¨ã€‚\nnode-1 drained node-2 node-3 pod-b available pod-c available pod-d available pod-y ç°åœ¨ï¼Œé›†ç¾¤ç®¡ç†å‘˜å°è¯•æ’ç©º node-2ã€‚drain å‘½ä»¤å°†å°è¯•æŒ‰ç…§æŸç§é¡ºåºé©±é€ä¸¤ä¸ª podï¼Œå‡è®¾å…ˆæ˜¯ pod-bï¼Œç„¶åå† pod-dã€‚å®ƒå°†æˆåŠŸé©±é€ pod-bã€‚ä½†æ˜¯ï¼Œå½“å®ƒè¯•å›¾é©±é€ pod-d æ—¶ï¼Œå°†è¢«æ‹’ç»ï¼Œå› ä¸ºè¿™æ ·å¯¹ Deployment æ¥è¯´å°†åªå‰©ä¸‹ä¸€ä¸ªå¯ç”¨çš„ podã€‚\nDeployment å°†åˆ›å»ºä¸€ä¸ªåä¸º pod-e çš„ pod-b çš„æ›¿ä»£å“ã€‚ä½†æ˜¯ï¼Œé›†ç¾¤ä¸­æ²¡æœ‰è¶³å¤Ÿçš„èµ„æºæ¥å®‰æ’ pod-eã€‚é‚£ä¹ˆï¼Œdrain å‘½ä»¤å°±ä¼šè¢«é˜»å¡ã€‚é›†ç¾¤æœ€ç»ˆå¯èƒ½æ˜¯è¿™ç§çŠ¶æ€ï¼š\nnode-1 drained node-2 drained node-3 no node pod-c available pod-e pending pod-d available pod-y æ­¤æ—¶ï¼Œé›†ç¾¤ç®¡ç†å‘˜éœ€è¦å‘é›†ç¾¤ä¸­æ·»åŠ å›ä¸€ä¸ªèŠ‚ç‚¹ä»¥ç»§ç»­å‡çº§æ“ä½œã€‚\næ‚¨å¯ä»¥çœ‹åˆ° Kubernetes å¦‚ä½•æ”¹å˜ä¸­æ–­å‘ç”Ÿçš„é€Ÿç‡ï¼Œæ ¹æ®ï¼š\nåº”ç”¨ç¨‹åºéœ€è¦å¤šå°‘å‰¯æœ¬ æ­£å¸¸å…³é—­å®ä¾‹éœ€è¦å¤šé•¿æ—¶é—´ å¯åŠ¨æ–°å®ä¾‹éœ€è¦å¤šé•¿æ—¶é—´ æ§åˆ¶å™¨çš„ç±»å‹ é›†ç¾¤çš„èµ„æºèƒ½åŠ› åˆ†ç¦»é›†ç¾¤æ‰€æœ‰è€…å’Œåº”ç”¨ç¨‹åºæ‰€æœ‰è€…è§’è‰² linkå°†é›†ç¾¤ç®¡ç†è€…å’Œåº”ç”¨ç¨‹åºæ‰€æœ‰è€…è§†ä¸ºå½¼æ­¤çŸ¥è¯†æœ‰é™çš„ç‹¬ç«‹è§’è‰²é€šå¸¸æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚è¿™ç§è´£ä»»åˆ†ç¦»åœ¨è¿™äº›æƒ…å†µä¸‹å¯èƒ½æ˜¯æœ‰æ„ä¹‰çš„ï¼š\nå½“æœ‰è®¸å¤šåº”ç”¨ç¨‹åºå›¢é˜Ÿå…±äº«ä¸€ä¸ª Kubernetes é›†ç¾¤ï¼Œå¹¶ä¸”æœ‰è‡ªç„¶çš„ä¸“ä¸šè§’è‰² ä½¿ç”¨ç¬¬ä¸‰æ–¹å·¥å…·æˆ–æœåŠ¡æ¥è‡ªåŠ¨åŒ–é›†ç¾¤ç®¡ç† Pod Disruption Budgetï¼ˆPod ä¸­æ–­é¢„ç®—ï¼‰ é€šè¿‡åœ¨è§’è‰²ä¹‹é—´æä¾›æ¥å£æ¥æ”¯æŒè¿™ç§è§’è‰²åˆ†ç¦»ã€‚\nå¦‚æœæ‚¨çš„ç»„ç»‡ä¸­æ²¡æœ‰è¿™æ ·çš„èŒè´£åˆ†ç¦»ï¼Œåˆ™å¯èƒ½ä¸éœ€è¦ä½¿ç”¨ Pod ä¸­æ–­é¢„ç®—ã€‚\nå¦‚ä½•åœ¨é›†ç¾¤ä¸Šæ‰§è¡Œä¸­æ–­æ“ä½œ linkå¦‚æœæ‚¨æ˜¯é›†ç¾¤ç®¡ç†å‘˜ï¼Œè¦å¯¹é›†ç¾¤çš„æ‰€æœ‰èŠ‚ç‚¹æ‰§è¡Œä¸­æ–­æ“ä½œï¼Œä¾‹å¦‚èŠ‚ç‚¹æˆ–ç³»ç»Ÿè½¯ä»¶å‡çº§ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ä»¥ä¸‹é€‰æ‹©ï¼š\nåœ¨å‡çº§æœŸé—´æ¥å—åœæœºæ—¶é—´ã€‚ æ•…éšœè½¬ç§»åˆ°å¦ä¸€ä¸ªå®Œæ•´çš„å‰¯æœ¬é›†ç¾¤ã€‚ æ²¡æœ‰åœæœºæ—¶é—´ï¼Œä½†æ˜¯å¯¹äºé‡å¤çš„èŠ‚ç‚¹å’Œäººå·¥åè°ƒæˆæœ¬å¯èƒ½æ˜¯æ˜‚è´µçš„ã€‚ ç¼–å†™å¯å®¹å¿ä¸­æ–­çš„åº”ç”¨ç¨‹åºå’Œä½¿ç”¨ PDBã€‚ æ²¡æœ‰åœæœºæ—¶é—´ã€‚ æœ€å°çš„èµ„æºé‡å¤ã€‚ å…è®¸æ›´å¤šçš„é›†ç¾¤ç®¡ç†è‡ªåŠ¨åŒ–ã€‚ ç¼–å†™å¯å®¹å¿ä¸­æ–­çš„åº”ç”¨ç¨‹åºæ˜¯å¾ˆæ£˜æ‰‹çš„ï¼Œä½†å¯¹äºå¯å®¹å¿è‡ªæ„¿ä¸­æ–­ï¼Œå’Œæ”¯æŒè‡ªåŠ¨è°ƒæ•´ä»¥å®¹å¿éè‡ªæ„¿ä¸­æ–­ï¼Œä¸¤è€…åœ¨å·¥ä½œä¸Šæœ‰å¤§é‡çš„é‡å ã€‚ "
            }
        );
    index.add(
            {
                id:  16 ,
                href: "\/docs\/information\/software\/cloud\/auth\/rbac\/",
                title: "RBAC",
                description: "æ³¨æ„ï¼šæœ¬æ–‡åŸºäº Kubernetes 1.6 æ’°å†™ï¼Œå½“æ—¶ RBAC æ¨¡å¼å¤„äº beta ç‰ˆæœ¬ã€‚\nåŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼ˆRole-Based Access Controlï¼Œå³â€RBACâ€ï¼‰ä½¿ç”¨ rbac.authorization.k8s.io API Group å®ç°æˆæƒå†³ç­–ï¼Œå…è®¸ç®¡ç†å‘˜é€šè¿‡ Kubernetes API åŠ¨æ€é…ç½®ç­–ç•¥ã€‚\nè¦å¯ç”¨ RBACï¼Œè¯·ä½¿ç”¨ --authorization-mode=RBAC å¯åŠ¨ API Serverã€‚\nAPI æ¦‚è¿° linkæœ¬èŠ‚å°†ä»‹ç» RBAC API æ‰€å®šä¹‰çš„å››ç§é¡¶çº§ç±»å‹ã€‚ç”¨æˆ·å¯ä»¥åƒä½¿ç”¨å…¶ä»– Kubernetes API èµ„æºä¸€æ · ï¼ˆä¾‹å¦‚é€šè¿‡ kubectlã€API è°ƒç”¨ç­‰ï¼‰ä¸è¿™äº›èµ„æºè¿›è¡Œäº¤äº’ã€‚ä¾‹å¦‚ï¼Œå‘½ä»¤ kubectl create -f (resource).yml å¯ä»¥è¢«ç”¨äºä»¥ä¸‹æ‰€æœ‰çš„ä¾‹å­ï¼Œå½“ç„¶ï¼Œè¯»è€…åœ¨å°è¯•å‰å¯èƒ½éœ€è¦å…ˆé˜…è¯»ä»¥ä¸‹ç›¸å…³ç« èŠ‚çš„å†…å®¹ã€‚\nRole ä¸ ClusterRole linkåœ¨ RBAC API ä¸­ï¼Œä¸€ä¸ªè§’è‰²åŒ…å«äº†ä¸€å¥—è¡¨ç¤ºä¸€ç»„æƒé™çš„è§„åˆ™ã€‚ æƒé™ä»¥çº¯ç²¹çš„ç´¯åŠ å½¢å¼ç´¯ç§¯ï¼ˆæ²¡æœ‰â€ å¦å®šâ€ çš„è§„åˆ™ï¼‰ã€‚ è§’è‰²å¯ä»¥ç”±å‘½åç©ºé—´ï¼ˆnamespaceï¼‰å†…çš„ Role å¯¹è±¡å®šä¹‰ï¼Œè€Œæ•´ä¸ª Kubernetes é›†ç¾¤èŒƒå›´å†…æœ‰æ•ˆçš„è§’è‰²åˆ™é€šè¿‡ ClusterRole å¯¹è±¡å®ç°ã€‚\nä¸€ä¸ª Role å¯¹è±¡åªèƒ½ç”¨äºæˆäºˆå¯¹æŸä¸€å•ä¸€å‘½åç©ºé—´ä¸­èµ„æºçš„è®¿é—®æƒé™ã€‚ ä»¥ä¸‹ç¤ºä¾‹æè¿°äº†â€defaultâ€ å‘½åç©ºé—´ä¸­çš„ä¸€ä¸ª Role å¯¹è±¡çš„å®šä¹‰ï¼Œç”¨äºæˆäºˆå¯¹ pod çš„è¯»è®¿é—®æƒé™ï¼š\nkind: Role apiVersion: rbac.authorization.k8s.io/v1beta1 metadata: namespace: default name: pod-reader rules: - apiGroups: [\"\"] # ç©ºå­—ç¬¦ä¸²\"\" è¡¨æ˜ä½¿ç”¨ core API group resources: [\"pods\"] verbs: [\"get\", \"watch\", \"list\"] ClusterRole å¯¹è±¡å¯ä»¥æˆäºˆä¸ Role å¯¹è±¡ç›¸åŒçš„æƒé™ï¼Œä½†ç”±äºå®ƒä»¬å±äºé›†ç¾¤èŒƒå›´å¯¹è±¡ï¼Œ ä¹Ÿå¯ä»¥ä½¿ç”¨å®ƒä»¬æˆäºˆå¯¹ä»¥ä¸‹å‡ ç§èµ„æºçš„è®¿é—®æƒé™ï¼š\n",
                content: "æ³¨æ„ï¼šæœ¬æ–‡åŸºäº Kubernetes 1.6 æ’°å†™ï¼Œå½“æ—¶ RBAC æ¨¡å¼å¤„äº beta ç‰ˆæœ¬ã€‚\nåŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼ˆRole-Based Access Controlï¼Œå³â€RBACâ€ï¼‰ä½¿ç”¨ rbac.authorization.k8s.io API Group å®ç°æˆæƒå†³ç­–ï¼Œå…è®¸ç®¡ç†å‘˜é€šè¿‡ Kubernetes API åŠ¨æ€é…ç½®ç­–ç•¥ã€‚\nè¦å¯ç”¨ RBACï¼Œè¯·ä½¿ç”¨ --authorization-mode=RBAC å¯åŠ¨ API Serverã€‚\nAPI æ¦‚è¿° linkæœ¬èŠ‚å°†ä»‹ç» RBAC API æ‰€å®šä¹‰çš„å››ç§é¡¶çº§ç±»å‹ã€‚ç”¨æˆ·å¯ä»¥åƒä½¿ç”¨å…¶ä»– Kubernetes API èµ„æºä¸€æ · ï¼ˆä¾‹å¦‚é€šè¿‡ kubectlã€API è°ƒç”¨ç­‰ï¼‰ä¸è¿™äº›èµ„æºè¿›è¡Œäº¤äº’ã€‚ä¾‹å¦‚ï¼Œå‘½ä»¤ kubectl create -f (resource).yml å¯ä»¥è¢«ç”¨äºä»¥ä¸‹æ‰€æœ‰çš„ä¾‹å­ï¼Œå½“ç„¶ï¼Œè¯»è€…åœ¨å°è¯•å‰å¯èƒ½éœ€è¦å…ˆé˜…è¯»ä»¥ä¸‹ç›¸å…³ç« èŠ‚çš„å†…å®¹ã€‚\nRole ä¸ ClusterRole linkåœ¨ RBAC API ä¸­ï¼Œä¸€ä¸ªè§’è‰²åŒ…å«äº†ä¸€å¥—è¡¨ç¤ºä¸€ç»„æƒé™çš„è§„åˆ™ã€‚ æƒé™ä»¥çº¯ç²¹çš„ç´¯åŠ å½¢å¼ç´¯ç§¯ï¼ˆæ²¡æœ‰â€ å¦å®šâ€ çš„è§„åˆ™ï¼‰ã€‚ è§’è‰²å¯ä»¥ç”±å‘½åç©ºé—´ï¼ˆnamespaceï¼‰å†…çš„ Role å¯¹è±¡å®šä¹‰ï¼Œè€Œæ•´ä¸ª Kubernetes é›†ç¾¤èŒƒå›´å†…æœ‰æ•ˆçš„è§’è‰²åˆ™é€šè¿‡ ClusterRole å¯¹è±¡å®ç°ã€‚\nä¸€ä¸ª Role å¯¹è±¡åªèƒ½ç”¨äºæˆäºˆå¯¹æŸä¸€å•ä¸€å‘½åç©ºé—´ä¸­èµ„æºçš„è®¿é—®æƒé™ã€‚ ä»¥ä¸‹ç¤ºä¾‹æè¿°äº†â€defaultâ€ å‘½åç©ºé—´ä¸­çš„ä¸€ä¸ª Role å¯¹è±¡çš„å®šä¹‰ï¼Œç”¨äºæˆäºˆå¯¹ pod çš„è¯»è®¿é—®æƒé™ï¼š\nkind: Role apiVersion: rbac.authorization.k8s.io/v1beta1 metadata: namespace: default name: pod-reader rules: - apiGroups: [\"\"] # ç©ºå­—ç¬¦ä¸²\"\" è¡¨æ˜ä½¿ç”¨ core API group resources: [\"pods\"] verbs: [\"get\", \"watch\", \"list\"] ClusterRole å¯¹è±¡å¯ä»¥æˆäºˆä¸ Role å¯¹è±¡ç›¸åŒçš„æƒé™ï¼Œä½†ç”±äºå®ƒä»¬å±äºé›†ç¾¤èŒƒå›´å¯¹è±¡ï¼Œ ä¹Ÿå¯ä»¥ä½¿ç”¨å®ƒä»¬æˆäºˆå¯¹ä»¥ä¸‹å‡ ç§èµ„æºçš„è®¿é—®æƒé™ï¼š\né›†ç¾¤èŒƒå›´èµ„æºï¼ˆä¾‹å¦‚èŠ‚ç‚¹ï¼Œå³ nodeï¼‰ éèµ„æºç±»å‹ endpointï¼ˆä¾‹å¦‚â€/healthzâ€ï¼‰ è·¨æ‰€æœ‰å‘½åç©ºé—´çš„å‘½åç©ºé—´èŒƒå›´èµ„æºï¼ˆä¾‹å¦‚ podï¼Œéœ€è¦è¿è¡Œå‘½ä»¤ kubectl get pods --all-namespaces æ¥æŸ¥è¯¢é›†ç¾¤ä¸­æ‰€æœ‰çš„ podï¼‰ ä¸‹é¢ç¤ºä¾‹ä¸­çš„ ClusterRole å®šä¹‰å¯ç”¨äºæˆäºˆç”¨æˆ·å¯¹æŸä¸€ç‰¹å®šå‘½åç©ºé—´ï¼Œæˆ–è€…æ‰€æœ‰å‘½åç©ºé—´ä¸­çš„ secretï¼ˆå–å†³äºå…¶ ç»‘å®š æ–¹å¼ï¼‰çš„è¯»è®¿é—®æƒé™ï¼š\nkind: ClusterRole apiVersion: rbac.authorization.k8s.io/v1beta1 metadata: # é‰´äº ClusterRole æ˜¯é›†ç¾¤èŒƒå›´å¯¹è±¡ï¼Œæ‰€ä»¥è¿™é‡Œä¸éœ€è¦å®šä¹‰ \"namespace\" å­—æ®µ name: secret-reader rules: - apiGroups: [\"\"] resources: [\"secrets\"] verbs: [\"get\", \"watch\", \"list\"] RoleBinding ä¸ ClusterRoleBinding linkè§’è‰²ç»‘å®šå°†ä¸€ä¸ªè§’è‰²ä¸­å®šä¹‰çš„å„ç§æƒé™æˆäºˆä¸€ä¸ªæˆ–è€…ä¸€ç»„ç”¨æˆ·ã€‚ è§’è‰²ç»‘å®šåŒ…å«äº†ä¸€ç»„ç›¸å…³ä¸»ä½“ï¼ˆå³ subject, åŒ…æ‹¬ç”¨æˆ· â€”â€”Userã€ç”¨æˆ·ç»„ â€”â€”Groupã€æˆ–è€…æœåŠ¡è´¦æˆ· â€”â€”Service Accountï¼‰ä»¥åŠå¯¹è¢«æˆäºˆè§’è‰²çš„å¼•ç”¨ã€‚ åœ¨å‘½åç©ºé—´ä¸­å¯ä»¥é€šè¿‡ RoleBinding å¯¹è±¡æˆäºˆæƒé™ï¼Œè€Œé›†ç¾¤èŒƒå›´çš„æƒé™æˆäºˆåˆ™é€šè¿‡ ClusterRoleBinding å¯¹è±¡å®Œæˆã€‚\nRoleBinding å¯ä»¥å¼•ç”¨åœ¨åŒä¸€å‘½åç©ºé—´å†…å®šä¹‰çš„ Role å¯¹è±¡ã€‚ ä¸‹é¢ç¤ºä¾‹ä¸­å®šä¹‰çš„ RoleBinding å¯¹è±¡åœ¨â€defaultâ€ å‘½åç©ºé—´ä¸­å°†â€pod-readerâ€ è§’è‰²æˆäºˆç”¨æˆ·â€janeâ€ã€‚ è¿™ä¸€æˆæƒå°†å…è®¸ç”¨æˆ·â€janeâ€ ä»â€defaultâ€ å‘½åç©ºé—´ä¸­è¯»å– podã€‚\nä»¥ä¸‹è§’è‰²ç»‘å®šå®šä¹‰å°†å…è®¸ç”¨æˆ· â€œjaneâ€ ä» â€œdefaultâ€ å‘½åç©ºé—´ä¸­è¯»å– podã€‚\nkind: RoleBinding apiVersion: rbac.authorization.k8s.io/v1beta1 metadata: name: read-pods namespace: default subjects: - kind: User name: jane apiGroup: rbac.authorization.k8s.io roleRef: kind: Role name: pod-reader apiGroup: rbac.authorization.k8s.io RoleBinding å¯¹è±¡ä¹Ÿå¯ä»¥å¼•ç”¨ä¸€ä¸ª ClusterRole å¯¹è±¡ç”¨äºåœ¨ RoleBinding æ‰€åœ¨çš„å‘½åç©ºé—´å†…æˆäºˆç”¨æˆ·å¯¹æ‰€å¼•ç”¨çš„ ClusterRole ä¸­ å®šä¹‰çš„å‘½åç©ºé—´èµ„æºçš„è®¿é—®æƒé™ã€‚è¿™ä¸€ç‚¹å…è®¸ç®¡ç†å‘˜åœ¨æ•´ä¸ªé›†ç¾¤èŒƒå›´å†…é¦–å…ˆå®šä¹‰ä¸€ç»„é€šç”¨çš„è§’è‰²ï¼Œç„¶åå†åœ¨ä¸åŒçš„å‘½åç©ºé—´ä¸­å¤ç”¨è¿™äº›è§’è‰²ã€‚\nä¾‹å¦‚ï¼Œå°½ç®¡ä¸‹é¢ç¤ºä¾‹ä¸­çš„ RoleBinding å¼•ç”¨çš„æ˜¯ä¸€ä¸ª ClusterRole å¯¹è±¡ï¼Œä½†æ˜¯ç”¨æˆ·â€daveâ€ï¼ˆå³è§’è‰²ç»‘å®šä¸»ä½“ï¼‰è¿˜æ˜¯åªèƒ½è¯»å–â€developmentâ€ å‘½åç©ºé—´ä¸­çš„ secretï¼ˆå³ RoleBinding æ‰€åœ¨çš„å‘½åç©ºé—´ï¼‰ã€‚\n# ä»¥ä¸‹è§’è‰²ç»‘å®šå…è®¸ç”¨æˆ· \"dave\" è¯»å– \"development\" å‘½åç©ºé—´ä¸­çš„ secretã€‚ kind: RoleBinding apiVersion: rbac.authorization.k8s.io/v1beta1 metadata: name: read-secrets namespace: development # è¿™é‡Œè¡¨æ˜ä»…æˆæƒè¯»å– \"development\" å‘½åç©ºé—´ä¸­çš„èµ„æºã€‚ subjects: - kind: User name: dave apiGroup: rbac.authorization.k8s.io roleRef: kind: ClusterRole name: secret-reader apiGroup: rbac.authorization.k8s.io æœ€åï¼Œå¯ä»¥ä½¿ç”¨ClusterRoleBindingåœ¨é›†ç¾¤çº§åˆ«å’Œæ‰€æœ‰å‘½åç©ºé—´ä¸­æˆäºˆæƒé™ã€‚ä¸‹é¢ç¤ºä¾‹ä¸­æ‰€å®šä¹‰çš„ClusterRoleBindingå…è®¸åœ¨ç”¨æˆ·ç»„â€managerâ€ ä¸­çš„ä»»ä½•ç”¨æˆ·éƒ½å¯ä»¥è¯»å–é›†ç¾¤ä¸­ä»»ä½•å‘½åç©ºé—´ä¸­çš„ secretã€‚\nä»¥ä¸‹ ClusterRoleBinding å¯¹è±¡å…è®¸åœ¨ç”¨æˆ·ç»„ â€œmanagerâ€ ä¸­çš„ä»»ä½•ç”¨æˆ·éƒ½å¯ä»¥è¯»å–é›†ç¾¤ä¸­ä»»ä½•å‘½åç©ºé—´ä¸­çš„ secretã€‚\nkind: ClusterRoleBinding apiVersion: rbac.authorization.k8s.io/v1beta1 metadata: name: read-secrets-global subjects: - kind: Group name: manager apiGroup: rbac.authorization.k8s.io roleRef: kind: ClusterRole name: secret-reader apiGroup: rbac.authorization.k8s.io å¯¹èµ„æºçš„å¼•ç”¨ linkå¤§å¤šæ•°èµ„æºç”±ä»£è¡¨å…¶åå­—çš„å­—ç¬¦ä¸²è¡¨ç¤ºï¼Œä¾‹å¦‚â€podsâ€ï¼Œå°±åƒå®ƒä»¬å‡ºç°åœ¨ç›¸å…³ API endpoint çš„ URL ä¸­ä¸€æ ·ã€‚ç„¶è€Œï¼Œæœ‰ä¸€äº› Kubernetes API è¿˜ åŒ…å«äº†â€ å­èµ„æºâ€ï¼Œæ¯”å¦‚ pod çš„ logsã€‚åœ¨ Kubernetes ä¸­ï¼Œpod logs endpoint çš„ URL æ ¼å¼ä¸ºï¼š\nGET /api/v1/namespaces/{namespace}/pods/{name}/log\nåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œâ€podsâ€ æ˜¯å‘½åç©ºé—´èµ„æºï¼Œè€Œâ€logâ€ æ˜¯ pods çš„å­èµ„æºã€‚ä¸ºäº†åœ¨ RBAC è§’è‰²ä¸­è¡¨ç¤ºå‡ºè¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨æ–œçº¿æ¥åˆ’åˆ†èµ„æº ä¸å­èµ„æºã€‚å¦‚æœéœ€è¦è§’è‰²ç»‘å®šä¸»ä½“è¯»å– pods ä»¥åŠ pod logï¼Œæ‚¨éœ€è¦å®šä¹‰ä»¥ä¸‹è§’è‰²ï¼š\nkind: Role apiVersion: rbac.authorization.k8s.io/v1beta1 metadata: namespace: default name: pod-and-pod-logs-reader rules: - apiGroups: [\"\"] resources: [\"pods\", \"pods/log\"] verbs: [\"get\", \"list\"] é€šè¿‡resourceNamesåˆ—è¡¨ï¼Œè§’è‰²å¯ä»¥é’ˆå¯¹ä¸åŒç§ç±»çš„è¯·æ±‚æ ¹æ®èµ„æºåå¼•ç”¨èµ„æºå®ä¾‹ã€‚å½“æŒ‡å®šäº†resourceNamesåˆ—è¡¨æ—¶ï¼Œä¸åŒåŠ¨ä½œ ç§ç±»çš„è¯·æ±‚çš„æƒé™ï¼Œå¦‚ä½¿ç”¨â€getâ€ã€â€deleteâ€ã€â€updateâ€ ä»¥åŠâ€patchâ€ ç­‰åŠ¨è¯çš„è¯·æ±‚ï¼Œå°†è¢«é™å®šåˆ°èµ„æºåˆ—è¡¨ä¸­æ‰€åŒ…å«çš„èµ„æºå®ä¾‹ä¸Šã€‚ ä¾‹å¦‚ï¼Œå¦‚æœéœ€è¦é™å®šä¸€ä¸ªè§’è‰²ç»‘å®šä¸»ä½“åªèƒ½â€getâ€ æˆ–è€…â€updateâ€ ä¸€ä¸ª configmap æ—¶ï¼Œæ‚¨å¯ä»¥å®šä¹‰ä»¥ä¸‹è§’è‰²ï¼š\nkind: Role apiVersion: rbac.authorization.k8s.io/v1beta1 metadata: namespace: default name: configmap-updater rules: - apiGroups: [\"\"] resources: [\"configmap\"] resourceNames: [\"my-configmap\"] verbs: [\"update\", \"get\"] å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœè®¾ç½®äº†resourceNamesï¼Œåˆ™è¯·æ±‚æ‰€ä½¿ç”¨çš„åŠ¨è¯ä¸èƒ½æ˜¯ listã€watchã€create æˆ–è€… deletecollectionã€‚ ç”±äºèµ„æºåä¸ä¼šå‡ºç°åœ¨ createã€listã€watch å’Œ deletecollection ç­‰ API è¯·æ±‚çš„ URL ä¸­ï¼Œæ‰€ä»¥è¿™äº›è¯·æ±‚åŠ¨è¯ä¸ä¼šè¢«è®¾ç½®äº†resourceNamesçš„è§„åˆ™æ‰€å…è®¸ï¼Œå› ä¸ºè§„åˆ™ä¸­çš„resourceNames éƒ¨åˆ†ä¸ä¼šåŒ¹é…è¿™äº›è¯·æ±‚ã€‚\nä¸€äº›è§’è‰²å®šä¹‰çš„ä¾‹å­ linkåœ¨ä»¥ä¸‹ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬ä»…æˆªå–å±•ç¤ºäº† rules éƒ¨åˆ†çš„å®šä¹‰ã€‚\nå…è®¸è¯»å– core API Group ä¸­å®šä¹‰çš„èµ„æºâ€podsâ€ï¼š\nrules: - apiGroups: [\"\"] resources: [\"pods\"] verbs: [\"get\", \"list\", \"watch\"] å…è®¸è¯»å†™åœ¨â€extensionsâ€ å’Œâ€appsâ€ API Group ä¸­å®šä¹‰çš„â€deploymentsâ€ï¼š\nrules: - apiGroups: [\"extensions\", \"apps\"] resources: [\"deployments\"] verbs: [\"get\", \"list\", \"watch\", \"create\", \"update\", \"patch\", \"delete\"] å…è®¸è¯»å–â€podsâ€ ä»¥åŠè¯»å†™â€jobsâ€ï¼š\nrules: - apiGroups: [\"\"] resources: [\"pods\"] verbs: [\"get\", \"list\", \"watch\"] - apiGroups: [\"batch\", \"extensions\"] resources: [\"jobs\"] verbs: [\"get\", \"list\", \"watch\", \"create\", \"update\", \"patch\", \"delete\"] å…è®¸è¯»å–ä¸€ä¸ªåä¸ºâ€my-configâ€ çš„ConfigMapå®ä¾‹ï¼ˆéœ€è¦å°†å…¶é€šè¿‡RoleBindingç»‘å®šä»è€Œé™åˆ¶é’ˆå¯¹æŸä¸€ä¸ªå‘½åç©ºé—´ä¸­å®šä¹‰çš„ä¸€ä¸ªConfigMapå®ä¾‹çš„è®¿é—®ï¼‰ï¼š\nrules: - apiGroups: [\"\"] resources: [\"configmaps\"] resourceNames: [\"my-config\"] verbs: [\"get\"] å…è®¸è¯»å– core API Group ä¸­çš„â€nodesâ€ èµ„æºï¼ˆç”±äºNodeæ˜¯é›†ç¾¤çº§åˆ«èµ„æºï¼Œæ‰€ä»¥æ­¤ClusterRoleå®šä¹‰éœ€è¦ä¸ä¸€ä¸ªClusterRoleBindingç»‘å®šæ‰èƒ½æœ‰æ•ˆï¼‰ï¼š\nrules: - apiGroups: [\"\"] resources: [\"nodes\"] verbs: [\"get\", \"list\", \"watch\"] å…è®¸å¯¹éèµ„æº endpoint â€œ/healthzâ€ åŠå…¶æ‰€æœ‰å­è·¯å¾„çš„â€GETâ€ å’Œâ€POSTâ€ è¯·æ±‚ï¼ˆæ­¤ClusterRoleå®šä¹‰éœ€è¦ä¸ä¸€ä¸ªClusterRoleBindingç»‘å®šæ‰èƒ½æœ‰æ•ˆï¼‰ï¼š\nrules: - nonResourceURLs: [\"/healthz\", \"/healthz/*\"] # åœ¨éèµ„æº URL ä¸­ï¼Œ'*' ä»£è¡¨åç¼€é€šé…ç¬¦ verbs: [\"get\", \"post\"] å¯¹è§’è‰²ç»‘å®šä¸»ä½“ï¼ˆSubjectï¼‰çš„å¼•ç”¨RoleBindingæˆ–è€…ClusterRoleBinding å°†è§’è‰²ç»‘å®šåˆ° è§’è‰²ç»‘å®šä¸»ä½“ï¼ˆSubjectï¼‰ã€‚ è§’è‰²ç»‘å®šä¸»ä½“å¯ä»¥æ˜¯ç”¨æˆ·ç»„ï¼ˆGroupï¼‰ã€ç”¨æˆ·ï¼ˆUserï¼‰æˆ–è€…æœåŠ¡è´¦æˆ·ï¼ˆService Accountsï¼‰ã€‚\nç”¨æˆ·ç”±å­—ç¬¦ä¸²è¡¨ç¤ºã€‚å¯ä»¥æ˜¯çº¯ç²¹çš„ç”¨æˆ·åï¼Œä¾‹å¦‚â€aliceâ€ã€ç”µå­é‚®ä»¶é£æ ¼çš„åå­—ï¼Œå¦‚ â€œbob@example.comâ€ æˆ–è€…æ˜¯ç”¨å­—ç¬¦ä¸²è¡¨ç¤ºçš„æ•°å­— idã€‚ç”± Kubernetes ç®¡ç†å‘˜é…ç½® è®¤è¯æ¨¡å— ä»¥äº§ç”Ÿæ‰€éœ€æ ¼å¼çš„ç”¨æˆ·åã€‚å¯¹äºç”¨æˆ·åï¼ŒRBAC æˆæƒç³»ç»Ÿä¸è¦æ±‚ä»»ä½•ç‰¹å®šçš„æ ¼å¼ã€‚ç„¶è€Œï¼Œå‰ç¼€ system: æ˜¯ ä¸º Kubernetes ç³»ç»Ÿä½¿ç”¨è€Œä¿ç•™çš„ï¼Œæ‰€ä»¥ç®¡ç†å‘˜åº”è¯¥ç¡®ä¿ç”¨æˆ·åä¸ä¼šæ„å¤–åœ°åŒ…å«è¿™ä¸ªå‰ç¼€ã€‚\nKubernetes ä¸­çš„ç”¨æˆ·ç»„ä¿¡æ¯ç”±æˆæƒæ¨¡å—æä¾›ã€‚ç”¨æˆ·ç»„ä¸ç”¨æˆ·ä¸€æ ·ç”±å­—ç¬¦ä¸²è¡¨ç¤ºã€‚Kubernetes å¯¹ç”¨æˆ·ç»„ å­—ç¬¦ä¸²æ²¡æœ‰æ ¼å¼è¦æ±‚ï¼Œä½†å‰ç¼€ system: åŒæ ·æ˜¯è¢«ç³»ç»Ÿä¿ç•™çš„ã€‚\næœåŠ¡è´¦æˆ· æ‹¥æœ‰åŒ…å« system:serviceaccount: å‰ç¼€çš„ç”¨æˆ·åï¼Œå¹¶å±äºæ‹¥æœ‰ system:serviceaccounts: å‰ç¼€çš„ç”¨æˆ·ç»„ã€‚\nè§’è‰²ç»‘å®šçš„ä¸€äº›ä¾‹å­ linkä»¥ä¸‹ç¤ºä¾‹ä¸­ï¼Œä»…æˆªå–å±•ç¤ºäº† RoleBinding çš„ subjects å­—æ®µã€‚\nä¸€ä¸ªåä¸ºâ€alice@example.comâ€ çš„ç”¨æˆ·ï¼š\nsubjects: - kind: User name: \"alice@example.com\" apiGroup: rbac.authorization.k8s.io ä¸€ä¸ªåä¸ºâ€frontend-adminsâ€ çš„ç”¨æˆ·ç»„ï¼š\nsubjects: - kind: Group name: \"frontend-admins\" apiGroup: rbac.authorization.k8s.io kube-system å‘½åç©ºé—´ä¸­çš„é»˜è®¤æœåŠ¡è´¦æˆ·ï¼š\nsubjects: - kind: ServiceAccount name: default namespace: kube-system åä¸ºâ€qaâ€ å‘½åç©ºé—´ä¸­çš„æ‰€æœ‰æœåŠ¡è´¦æˆ·ï¼š\nsubjects: - kind: Group name: system:serviceaccounts:qa apiGroup: rbac.authorization.k8s.io â€‹```åœ¨é›†ç¾¤ä¸­çš„æ‰€æœ‰æœåŠ¡è´¦æˆ·ï¼š â€‹```yaml subjects: - kind: Group name: system:serviceaccounts apiGroup: rbac.authorization.k8s.io æ‰€æœ‰è®¤è¯è¿‡çš„ç”¨æˆ·ï¼ˆversion 1.5+ï¼‰ï¼š\nsubjects: - kind: Group name: system:authenticated apiGroup: rbac.authorization.k8s.io â€‹```æ‰€æœ‰æœªè®¤è¯çš„ç”¨æˆ·ï¼ˆversion 1.5+ï¼‰ï¼š â€‹```yaml subjects: - kind: Group name: system:unauthenticated apiGroup: rbac.authorization.k8s.io æ‰€æœ‰ç”¨æˆ·ï¼ˆversion 1.5+ï¼‰ï¼š\nsubjects: - kind: Group name: system:authenticated apiGroup: rbac.authorization.k8s.io - kind: Group name: system:unauthenticated apiGroup: rbac.authorization.k8s.io é»˜è®¤è§’è‰²ä¸é»˜è®¤è§’è‰²ç»‘å®š linkAPI Server ä¼šåˆ›å»ºä¸€ç»„é»˜è®¤çš„ ClusterRole å’Œ ClusterRoleBinding å¯¹è±¡ã€‚ è¿™äº›é»˜è®¤å¯¹è±¡ä¸­æœ‰è®¸å¤šåŒ…å« system: å‰ç¼€ï¼Œè¡¨æ˜è¿™äº›èµ„æºç”± Kubernetes åŸºç¡€ç»„ä»¶â€ æ‹¥æœ‰â€ã€‚ å¯¹è¿™äº›èµ„æºçš„ä¿®æ”¹å¯èƒ½å¯¼è‡´éåŠŸèƒ½æ€§é›†ç¾¤ï¼ˆnon-functional clusterï¼‰ã€‚ä¸€ä¸ªä¾‹å­æ˜¯ system:node ClusterRole å¯¹è±¡ã€‚ è¿™ä¸ªè§’è‰²å®šä¹‰äº† kubelets çš„æƒé™ã€‚å¦‚æœè¿™ä¸ªè§’è‰²è¢«ä¿®æ”¹ï¼Œå¯èƒ½ä¼šå¯¼è‡´ kubelets æ— æ³•æ­£å¸¸å·¥ä½œã€‚\næ‰€æœ‰é»˜è®¤çš„ ClusterRole å’Œ ClusterRoleBinding å¯¹è±¡éƒ½ä¼šè¢«æ ‡è®°ä¸º kubernetes.io/bootstrapping=rbac-defaultsã€‚\nè‡ªåŠ¨æ›´æ–° linkæ¯æ¬¡å¯åŠ¨æ—¶ï¼ŒAPI Server éƒ½ä¼šæ›´æ–°é»˜è®¤ ClusterRole æ‰€ç¼ºä¹çš„å„ç§æƒé™ï¼Œå¹¶æ›´æ–°é»˜è®¤ ClusterRoleBinding æ‰€ç¼ºä¹çš„å„ä¸ªè§’è‰²ç»‘å®šä¸»ä½“ã€‚ è¿™ç§è‡ªåŠ¨æ›´æ–°æœºåˆ¶å…è®¸é›†ç¾¤ä¿®å¤ä¸€äº›æ„å¤–çš„ä¿®æ”¹ã€‚ç”±äºæƒé™å’Œè§’è‰²ç»‘å®šä¸»ä½“åœ¨æ–°çš„ Kubernetes é‡Šå‡ºç‰ˆæœ¬ä¸­å¯èƒ½å˜åŒ–ï¼Œè¿™ä¹Ÿèƒ½å¤Ÿä¿è¯è§’è‰²å’Œè§’è‰² ç»‘å®šå§‹ç»ˆä¿æŒæ˜¯æœ€æ–°çš„ã€‚\nå¦‚æœéœ€è¦ç¦ç”¨è‡ªåŠ¨æ›´æ–°ï¼Œè¯·å°†é»˜è®¤ ClusterRole ä»¥åŠ ClusterRoleBinding çš„ rbac.authorization.kubernetes.io/autoupdate è®¾ç½®æˆä¸º falseã€‚ è¯·æ³¨æ„ï¼Œç¼ºä¹é»˜è®¤æƒé™å’Œè§’è‰²ç»‘å®šä¸»ä½“å¯èƒ½ä¼šå¯¼è‡´éåŠŸèƒ½æ€§é›†ç¾¤é—®é¢˜ã€‚\nè‡ª Kubernetes 1.6 + èµ·ï¼Œå½“é›†ç¾¤ RBAC æˆæƒå™¨ï¼ˆRBAC Authorizerï¼‰å¤„äºå¼€å¯çŠ¶æ€æ—¶ï¼Œå¯ä»¥å¯ç”¨è‡ªåŠ¨æ›´æ–°åŠŸèƒ½.\nå‘ç°ç±»è§’è‰² link é»˜è®¤ ClusterRole é»˜è®¤ ClusterRoleBinding æè¿° system:basic-user system:authenticated and system:unauthenticatedgroups å…è®¸ç”¨æˆ·åªè¯»è®¿é—®æœ‰å…³è‡ªå·±çš„åŸºæœ¬ä¿¡æ¯ã€‚ system:discovery system:authenticated and system:unauthenticatedgroups å…è®¸åªè¯»è®¿é—® API discovery endpoints, ç”¨äºåœ¨ API çº§åˆ«è¿›è¡Œå‘ç°å’Œåå•†ã€‚ é¢å‘ç”¨æˆ·çš„è§’è‰² linkä¸€äº›é»˜è®¤è§’è‰²å¹¶ä¸åŒ…å« system: å‰ç¼€ï¼Œå®ƒä»¬æ˜¯é¢å‘ç”¨æˆ·çš„è§’è‰²ã€‚ è¿™äº›è§’è‰²åŒ…å«è¶…çº§ç”¨æˆ·è§’è‰²ï¼ˆcluster-adminï¼‰ï¼Œå³æ—¨åœ¨åˆ©ç”¨ ClusterRoleBindingï¼ˆcluster-statusï¼‰åœ¨é›†ç¾¤èŒƒå›´å†…æˆæƒçš„è§’è‰²ï¼Œ ä»¥åŠé‚£äº›ä½¿ç”¨ RoleBindingï¼ˆadminã€edit å’Œ viewï¼‰åœ¨ç‰¹å®šå‘½åç©ºé—´ä¸­æˆæƒçš„è§’è‰²ã€‚\né»˜è®¤ ClusterRole é»˜è®¤ ClusterRoleBinding æè¿° cluster-admin system:masters group è¶…çº§ç”¨æˆ·æƒé™ï¼Œå…è®¸å¯¹ä»»ä½•èµ„æºæ‰§è¡Œä»»ä½•æ“ä½œã€‚ åœ¨ ClusterRoleBinding ä¸­ä½¿ç”¨æ—¶ï¼Œå¯ä»¥å®Œå…¨æ§åˆ¶é›†ç¾¤å’Œæ‰€æœ‰å‘½åç©ºé—´ä¸­çš„æ‰€æœ‰èµ„æºã€‚ åœ¨ RoleBinding ä¸­ä½¿ç”¨æ—¶ï¼Œå¯ä»¥å®Œå…¨æ§åˆ¶ RoleBinding æ‰€åœ¨å‘½åç©ºé—´ä¸­çš„æ‰€æœ‰èµ„æºï¼ŒåŒ…æ‹¬å‘½åç©ºé—´è‡ªå·±ã€‚ admin None ç®¡ç†å‘˜æƒé™ï¼Œåˆ©ç”¨ RoleBinding åœ¨æŸä¸€å‘½åç©ºé—´å†…éƒ¨æˆäºˆã€‚ åœ¨ RoleBinding ä¸­ä½¿ç”¨æ—¶ï¼Œå…è®¸é’ˆå¯¹å‘½åç©ºé—´å†…å¤§éƒ¨åˆ†èµ„æºçš„è¯»å†™è®¿é—®ï¼Œ åŒ…æ‹¬åœ¨å‘½åç©ºé—´å†…åˆ›å»ºè§’è‰²ä¸è§’è‰²ç»‘å®šçš„èƒ½åŠ›ã€‚ ä½†ä¸å…è®¸å¯¹èµ„æºé…é¢ï¼ˆresource quotaï¼‰æˆ–è€…å‘½åç©ºé—´æœ¬èº«çš„å†™è®¿é—®ã€‚ edit None å…è®¸å¯¹æŸä¸€ä¸ªå‘½åç©ºé—´å†…å¤§éƒ¨åˆ†å¯¹è±¡çš„è¯»å†™è®¿é—®ï¼Œä½†ä¸å…è®¸æŸ¥çœ‹æˆ–è€…ä¿®æ”¹è§’è‰²æˆ–è€…è§’è‰²ç»‘å®šã€‚ view None å…è®¸å¯¹æŸä¸€ä¸ªå‘½åç©ºé—´å†…å¤§éƒ¨åˆ†å¯¹è±¡çš„åªè¯»è®¿é—®ã€‚ ä¸å…è®¸æŸ¥çœ‹è§’è‰²æˆ–è€…è§’è‰²ç»‘å®šã€‚ ç”±äºå¯æ‰©æ•£æ€§ç­‰åŸå› ï¼Œä¸å…è®¸æŸ¥çœ‹ secret èµ„æºã€‚ Core Component Roles linkæ ¸å¿ƒç»„ä»¶è§’è‰² link é»˜è®¤ ClusterRole é»˜è®¤ ClusterRoleBinding æè¿° system:kube-scheduler system:kube-scheduler user å…è®¸è®¿é—® kube-scheduler ç»„ä»¶æ‰€éœ€è¦çš„èµ„æºã€‚ system:kube-controller-manager system:kube-controller-manager user å…è®¸è®¿é—® kube-controller-manager ç»„ä»¶æ‰€éœ€è¦çš„èµ„æºã€‚ å•ä¸ªæ§åˆ¶å¾ªç¯æ‰€éœ€è¦çš„æƒé™è¯·å‚é˜… æ§åˆ¶å™¨ï¼ˆcontrollerï¼‰è§’è‰². system:node system:nodes group (deprecated in 1.7) å…è®¸å¯¹ kubelet ç»„ä»¶æ‰€éœ€è¦çš„èµ„æºçš„è®¿é—®ï¼ŒåŒ…æ‹¬è¯»å–æ‰€æœ‰ secret å’Œå¯¹æ‰€æœ‰ pod çš„å†™è®¿é—®ã€‚ è‡ª Kubernetes 1.7 å¼€å§‹ï¼Œç›¸æ¯”è¾ƒäºè¿™ä¸ªè§’è‰²ï¼Œæ›´æ¨èä½¿ç”¨ Node authorizer ä»¥åŠ NodeRestriction admission pluginï¼Œ å¹¶å…è®¸æ ¹æ®è°ƒåº¦è¿è¡Œåœ¨èŠ‚ç‚¹ä¸Šçš„ pod æˆäºˆ kubelets API è®¿é—®çš„æƒé™ã€‚ è‡ª Kubernetes 1.7 å¼€å§‹ï¼Œå½“å¯ç”¨ Node æˆæƒæ¨¡å¼æ—¶ï¼Œå¯¹ system:nodes ç”¨æˆ·ç»„çš„ç»‘å®šå°†ä¸ä¼šè¢«è‡ªåŠ¨åˆ›å»ºã€‚ system:node-proxier system:kube-proxy user å…è®¸å¯¹ kube-proxy ç»„ä»¶æ‰€éœ€è¦èµ„æºçš„è®¿é—®ã€‚ å…¶å®ƒç»„ä»¶è§’è‰² link é»˜è®¤ ClusterRole é»˜è®¤ ClusterRoleBinding æè¿° system:auth-delegator None å…è®¸å§”æ‰˜è®¤è¯å’Œæˆæƒæ£€æŸ¥ã€‚ é€šå¸¸ç”±é™„åŠ  API Server ç”¨äºç»Ÿä¸€è®¤è¯å’Œæˆæƒã€‚ system:heapster None Heapster ç»„ä»¶çš„è§’è‰²ã€‚ system:kube-aggregator None kube-aggregator ç»„ä»¶çš„è§’è‰²ã€‚ system:kube-dns kube-dns service account in the kube-systemnamespace kube-dns ç»„ä»¶çš„è§’è‰²ã€‚ system:node-bootstrapper None å…è®¸å¯¹æ‰§è¡Œ Kubelet TLS å¼•å¯¼ï¼ˆKubelet TLS bootstrappingï¼‰ æ‰€éœ€è¦èµ„æºçš„è®¿é—®. system:node-problem-detector None node-problem-detector ç»„ä»¶çš„è§’è‰²ã€‚ system:persistent-volume-provisioner None å…è®¸å¯¹å¤§éƒ¨åˆ†åŠ¨æ€å­˜å‚¨å·åˆ›å»ºç»„ä»¶ï¼ˆdynamic volume provisionerï¼‰æ‰€éœ€è¦èµ„æºçš„è®¿é—®ã€‚ æ§åˆ¶å™¨ï¼ˆControllerï¼‰è§’è‰² linkKubernetes controller manager è´Ÿè´£è¿è¡Œæ ¸å¿ƒæ§åˆ¶å¾ªç¯ã€‚ å½“ä½¿ç”¨ --use-service-account-credentials é€‰é¡¹è¿è¡Œ controller manager æ—¶ï¼Œæ¯ä¸ªæ§åˆ¶å¾ªç¯éƒ½å°†ä½¿ç”¨å•ç‹¬çš„æœåŠ¡è´¦æˆ·å¯åŠ¨ã€‚ è€Œæ¯ä¸ªæ§åˆ¶å¾ªç¯éƒ½å­˜åœ¨å¯¹åº”çš„è§’è‰²ï¼Œå‰ç¼€åä¸º system:controller:ã€‚ å¦‚æœä¸ä½¿ç”¨ --use-service-account-credentials é€‰é¡¹æ—¶ï¼Œcontroller manager å°†ä¼šä½¿ç”¨è‡ªå·±çš„å‡­è¯è¿è¡Œæ‰€æœ‰æ§åˆ¶å¾ªç¯ï¼Œè€Œè¿™äº›å‡­è¯å¿…é¡»è¢«æˆäºˆç›¸å…³çš„è§’è‰²ã€‚ è¿™äº›è§’è‰²åŒ…æ‹¬ï¼š\nsystem:controller:attachdetach-controller system:controller:certificate-controller system:controller:cronjob-controller system:controller:daemon-set-controller system:controller:deployment-controller system:controller:disruption-controller system:controller:endpoint-controller system:controller:generic-garbage-collector system:controller:horizontal-pod-autoscaler system:controller:job-controller system:controller:namespace-controller system:controller:node-controller system:controller:persistent-volume-binder system:controller:pod-garbage-collector system:controller:replicaset-controller system:controller:replication-controller system:controller:resourcequota-controller system:controller:route-controller system:controller:service-account-controller system:controller:service-controller system:controller:statefulset-controller system:controller:ttl-controller åˆå§‹åŒ–ä¸é¢„é˜²æƒé™å‡çº§ linkRBAC API ä¼šé˜»æ­¢ç”¨æˆ·é€šè¿‡ç¼–è¾‘è§’è‰²æˆ–è€…è§’è‰²ç»‘å®šæ¥å‡çº§æƒé™ã€‚ ç”±äºè¿™ä¸€ç‚¹æ˜¯åœ¨ API çº§åˆ«å®ç°çš„ï¼Œæ‰€ä»¥åœ¨ RBAC æˆæƒå™¨ï¼ˆRBAC authorizerï¼‰æœªå¯ç”¨çš„çŠ¶æ€ä¸‹ä¾ç„¶å¯ä»¥æ­£å¸¸å·¥ä½œã€‚\nç”¨æˆ·åªæœ‰åœ¨æ‹¥æœ‰äº†è§’è‰²æ‰€åŒ…å«çš„æ‰€æœ‰æƒé™çš„æ¡ä»¶ä¸‹æ‰èƒ½åˆ›å»ºï¼æ›´æ–°ä¸€ä¸ªè§’è‰²ï¼Œè¿™äº›æ“ä½œè¿˜å¿…é¡»åœ¨è§’è‰²æ‰€å¤„çš„ç›¸åŒèŒƒå›´å†…è¿›è¡Œï¼ˆå¯¹äº ClusterRole æ¥è¯´æ˜¯é›†ç¾¤èŒƒå›´ï¼Œå¯¹äº Role æ¥è¯´æ˜¯åœ¨ä¸è§’è‰²ç›¸åŒçš„å‘½åç©ºé—´æˆ–è€…é›†ç¾¤èŒƒå›´ï¼‰ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœç”¨æˆ·â€user-1â€ æ²¡æœ‰æƒé™è¯»å–é›†ç¾¤èŒƒå›´å†…çš„ secret åˆ—è¡¨ï¼Œé‚£ä¹ˆä»–ä¹Ÿä¸èƒ½åˆ›å»ºåŒ…å«è¿™ç§æƒé™çš„ ClusterRoleã€‚ä¸ºäº†èƒ½å¤Ÿè®©ç”¨æˆ·åˆ›å»ºï¼æ›´æ–°è§’è‰²ï¼Œéœ€è¦ï¼š\næˆäºˆç”¨æˆ·ä¸€ä¸ªè§’è‰²ä»¥å…è®¸ä»–ä»¬æ ¹æ®éœ€è¦åˆ›å»ºï¼æ›´æ–° Role æˆ–è€… ClusterRole å¯¹è±¡ã€‚ æˆäºˆç”¨æˆ·ä¸€ä¸ªè§’è‰²åŒ…å«ä»–ä»¬åœ¨ Role æˆ–è€… ClusterRole ä¸­æ‰€èƒ½å¤Ÿè®¾ç½®çš„æ‰€æœ‰æƒé™ã€‚å¦‚æœç”¨æˆ·å°è¯•åˆ›å»ºæˆ–è€…ä¿®æ”¹ Role æˆ–è€… ClusterRole ä»¥è®¾ç½®é‚£äº›ä»–ä»¬æœªè¢«æˆæƒçš„æƒé™æ—¶ï¼Œè¿™äº› API è¯·æ±‚å°†è¢«ç¦æ­¢ã€‚ ç”¨æˆ·åªæœ‰åœ¨æ‹¥æœ‰æ‰€å¼•ç”¨çš„è§’è‰²ä¸­åŒ…å«çš„æ‰€æœ‰æƒé™æ—¶æ‰å¯ä»¥åˆ›å»ºï¼æ›´æ–°è§’è‰²ç»‘å®šï¼ˆè¿™äº›æ“ä½œä¹Ÿå¿…é¡»åœ¨è§’è‰²ç»‘å®šæ‰€å¤„çš„ç›¸åŒèŒƒå›´å†…è¿›è¡Œï¼‰* æˆ–è€… * ç”¨æˆ·è¢«æ˜ç¡®æˆæƒå¯ä»¥åœ¨æ‰€å¼•ç”¨çš„è§’è‰²ä¸Šæ‰§è¡Œç»‘å®šæ“ä½œã€‚ ä¾‹å¦‚ï¼Œå¦‚æœç”¨æˆ·â€user-1â€ æ²¡æœ‰æƒé™è¯»å–é›†ç¾¤èŒƒå›´å†…çš„ secret åˆ—è¡¨ï¼Œé‚£ä¹ˆä»–å°†ä¸èƒ½åˆ›å»º ClusterRole æ¥å¼•ç”¨é‚£äº›æˆäºˆäº†æ­¤é¡¹æƒé™çš„è§’è‰²ã€‚ä¸ºäº†èƒ½å¤Ÿè®©ç”¨æˆ·åˆ›å»ºï¼æ›´æ–°è§’è‰²ç»‘å®šï¼Œéœ€è¦ï¼š\næˆäºˆç”¨æˆ·ä¸€ä¸ªè§’è‰²ä»¥å…è®¸ä»–ä»¬æ ¹æ®éœ€è¦åˆ›å»ºï¼æ›´æ–° RoleBinding æˆ–è€… ClusterRoleBinding å¯¹è±¡ã€‚ æˆäºˆç”¨æˆ·ç»‘å®šæŸä¸€ç‰¹å®šè§’è‰²æ‰€éœ€è¦çš„æƒé™ï¼š éšå¼åœ°ï¼Œé€šè¿‡æˆäºˆç”¨æˆ·æ‰€æœ‰æ‰€å¼•ç”¨çš„è§’è‰²ä¸­æ‰€åŒ…å«çš„æƒé™ æ˜¾å¼åœ°ï¼Œé€šè¿‡æˆäºˆç”¨æˆ·åœ¨ç‰¹å®š Roleï¼ˆæˆ–è€… ClusterRoleï¼‰å¯¹è±¡ä¸Šæ‰§è¡Œ bind æ“ä½œçš„æƒé™ ä¾‹å¦‚ï¼Œä¸‹é¢ä¾‹å­ä¸­çš„ ClusterRole å’Œ RoleBinding å°†å…è®¸ç”¨æˆ·â€user-1â€ æˆäºˆå…¶å®ƒç”¨æˆ·â€user-1-namespaceâ€ å‘½åç©ºé—´å†…çš„ adminã€edit å’Œ view ç­‰è§’è‰²å’Œè§’è‰²ç»‘å®šã€‚\napiVersion: rbac.authorization.k8s.io/v1beta1 kind: ClusterRole metadata: name: role-grantor rules: - apiGroups: [\"rbac.authorization.k8s.io\"] resources: [\"rolebindings\"] verbs: [\"create\"] - apiGroups: [\"rbac.authorization.k8s.io\"] resources: [\"clusterroles\"] verbs: [\"bind\"] resourceNames: [\"admin\",\"edit\",\"view\"] --- apiVersion: rbac.authorization.k8s.io/v1beta1 kind: RoleBinding metadata: name: role-grantor-binding namespace: user-1-namespace roleRef: apiGroup: rbac.authorization.k8s.io kind: ClusterRole name: role-grantor subjects: - apiGroup: rbac.authorization.k8s.io kind: User name: user-1 å½“åˆå§‹åŒ–ç¬¬ä¸€ä¸ªè§’è‰²å’Œè§’è‰²ç»‘å®šæ—¶ï¼Œåˆå§‹ç”¨æˆ·éœ€è¦èƒ½å¤Ÿæˆäºˆä»–ä»¬å°šæœªæ‹¥æœ‰çš„æƒé™ã€‚ åˆå§‹åŒ–åˆå§‹è§’è‰²å’Œè§’è‰²ç»‘å®šæ—¶éœ€è¦ï¼š\nä½¿ç”¨åŒ…å« systemï¼šmasters ç”¨æˆ·ç»„çš„å‡­è¯ï¼Œè¯¥ç”¨æˆ·ç»„é€šè¿‡é»˜è®¤ç»‘å®šç»‘å®šåˆ° cluster-admin è¶…çº§ç”¨æˆ·è§’è‰²ã€‚ å¦‚æœæ‚¨çš„ API Server åœ¨è¿è¡Œæ—¶å¯ç”¨äº†éå®‰å…¨ç«¯å£ï¼ˆ--insecure-portï¼‰ï¼Œæ‚¨ä¹Ÿå¯ä»¥é€šè¿‡è¿™ä¸ªæ²¡æœ‰æ–½è¡Œè®¤è¯æˆ–è€…æˆæƒçš„ç«¯å£å‘é€è§’è‰²æˆ–è€…è§’è‰²ç»‘å®šè¯·æ±‚ã€‚ ä¸€äº›å‘½ä»¤è¡Œå·¥å…· linkæœ‰ä¸¤ä¸ª kubectl å‘½ä»¤å¯ä»¥ç”¨äºåœ¨å‘½åç©ºé—´å†…æˆ–è€…æ•´ä¸ªé›†ç¾¤å†…æˆäºˆè§’è‰²ã€‚\nkubectl create rolebinding linkåœ¨æŸä¸€ç‰¹å®šå‘½åç©ºé—´å†…æˆäºˆ Role æˆ–è€… ClusterRoleã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š\nåœ¨åä¸ºâ€acmeâ€ çš„å‘½åç©ºé—´ä¸­å°† admin ClusterRole æˆäºˆç”¨æˆ·â€bobâ€ï¼š\nkubectl create rolebinding bob-admin-binding --clusterrole=admin --user=bob --namespace=acme\nåœ¨åä¸ºâ€acmeâ€ çš„å‘½åç©ºé—´ä¸­å°† view ClusterRole æˆäºˆæœåŠ¡è´¦æˆ·â€myappâ€ï¼š\nkubectl create rolebinding myapp-view-binding --clusterrole=view --serviceaccount=acme:myapp --namespace=acme\nkubectl create clusterrolebinding linkåœ¨æ•´ä¸ªé›†ç¾¤ä¸­æˆäºˆ ClusterRoleï¼ŒåŒ…æ‹¬æ‰€æœ‰å‘½åç©ºé—´ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š\nåœ¨æ•´ä¸ªé›†ç¾¤èŒƒå›´å†…å°† cluster-admin ClusterRole æˆäºˆç”¨æˆ·â€rootâ€ï¼š\nkubectl create clusterrolebinding root-cluster-admin-binding --clusterrole=cluster-admin --user=root\nåœ¨æ•´ä¸ªé›†ç¾¤èŒƒå›´å†…å°† system:node ClusterRole æˆäºˆç”¨æˆ·â€kubeletâ€ï¼š\nkubectl create clusterrolebinding kubelet-node-binding --clusterrole=system:node --user=kubelet\nåœ¨æ•´ä¸ªé›†ç¾¤èŒƒå›´å†…å°† view ClusterRole æˆäºˆå‘½åç©ºé—´â€acmeâ€ å†…çš„æœåŠ¡è´¦æˆ·â€myappâ€ï¼š\nkubectl create clusterrolebinding myapp-view-binding --clusterrole=view --serviceaccount=acme:myapp\nè¯·å‚é˜… CLI å¸®åŠ©æ–‡æ¡£ä»¥è·å¾—ä¸Šè¿°å‘½ä»¤çš„è¯¦ç»†ç”¨æ³•\næœåŠ¡è´¦æˆ·ï¼ˆService Accountï¼‰æƒé™ linké»˜è®¤çš„ RBAC ç­–ç•¥å°†æˆäºˆæ§åˆ¶å¹³é¢ç»„ä»¶ï¼ˆcontrol-plane componentï¼‰ã€èŠ‚ç‚¹ï¼ˆnodeï¼‰å’Œæ§åˆ¶å™¨ï¼ˆcontrollerï¼‰ä¸€ç»„èŒƒå›´å—é™çš„æƒé™ï¼Œ ä½†å¯¹äºâ€kube-systemâ€ å‘½åç©ºé—´ä»¥å¤–çš„æœåŠ¡è´¦æˆ·ï¼Œåˆ™ * ä¸æˆäºˆä»»ä½•æƒé™ *ï¼ˆè¶…å‡ºæˆäºˆæ‰€æœ‰è®¤è¯ç”¨æˆ·çš„å‘ç°æƒé™ï¼‰ã€‚\nè¿™ä¸€ç‚¹å…è®¸æ‚¨æ ¹æ®éœ€è¦å‘ç‰¹å®šæœåŠ¡è´¦å·æˆäºˆç‰¹å®šæƒé™ã€‚ ç»†ç²’åº¦çš„è§’è‰²ç»‘å®šå°†æä¾›æ›´å¥½çš„å®‰å…¨æ€§ï¼Œä½†éœ€è¦æ›´å¤šç²¾åŠ›ç®¡ç†ã€‚ æ›´ç²—ç²’åº¦çš„æˆæƒå¯èƒ½æˆäºˆæœåŠ¡è´¦å·ä¸éœ€è¦çš„ API è®¿é—®æƒé™ï¼ˆç”šè‡³å¯¼è‡´æ½œåœ¨æˆæƒæ‰©æ•£ï¼‰ï¼Œä½†æ›´æ˜“äºç®¡ç†ã€‚\nä»æœ€å®‰å…¨åˆ°æœ€ä¸å®‰å…¨å¯ä»¥æ’åºä»¥ä¸‹æ–¹æ³•ï¼š\nå¯¹æŸä¸€ç‰¹å®šåº”ç”¨ç¨‹åºçš„æœåŠ¡è´¦æˆ·æˆäºˆè§’è‰²ï¼ˆæœ€ä½³å®è·µï¼‰\nè¦æ±‚åº”ç”¨ç¨‹åºåœ¨å…¶ pod è§„èŒƒï¼ˆpod specï¼‰ä¸­æŒ‡å®š serviceAccountName å­—æ®µï¼Œå¹¶ä¸”è¦åˆ›å»ºç›¸åº”æœåŠ¡è´¦æˆ·ï¼ˆä¾‹å¦‚é€šè¿‡ APIã€åº”ç”¨ç¨‹åºæ¸…å•æˆ–è€…å‘½ä»¤ kubectl create serviceaccount ç­‰ï¼‰ã€‚\nä¾‹å¦‚ï¼Œåœ¨â€my-namespaceâ€ å‘½åç©ºé—´ä¸­æˆäºˆæœåŠ¡è´¦æˆ·â€my-saâ€ åªè¯»æƒé™ï¼š\nkubectl create rolebinding my-sa-view \\ --clusterrole=view \\ --serviceaccount=my-namespace:my-sa \\ --namespace=my-namespace åœ¨æŸä¸€å‘½åç©ºé—´ä¸­æˆäºˆâ€defaultâ€ æœåŠ¡è´¦å·ä¸€ä¸ªè§’è‰²\nå¦‚æœä¸€ä¸ªåº”ç”¨ç¨‹åºæ²¡æœ‰åœ¨å…¶ pod è§„èŒƒä¸­æŒ‡å®š serviceAccountNameï¼Œå®ƒå°†é»˜è®¤ä½¿ç”¨â€defaultâ€ æœåŠ¡è´¦å·ã€‚\næ³¨æ„ï¼šæˆäºˆâ€defaultâ€ æœåŠ¡è´¦å·çš„æƒé™å°†å¯ç”¨äºå‘½åç©ºé—´å†…ä»»ä½•æ²¡æœ‰æŒ‡å®š serviceAccountName çš„ podã€‚\nä¸‹é¢çš„ä¾‹å­å°†åœ¨â€my-namespaceâ€ å‘½åç©ºé—´å†…æˆäºˆâ€defaultâ€ æœåŠ¡è´¦å·åªè¯»æƒé™ï¼š\nkubectl create rolebinding default-view \\ --clusterrole=view \\ --serviceaccount=my-namespace:default \\ --namespace=my-namespace ç›®å‰ï¼Œè®¸å¤š åŠ è½½é¡¹ï¼ˆaddonï¼‰ ä½œä¸ºâ€kube-systemâ€ å‘½åç©ºé—´ä¸­çš„â€defaultâ€ æœåŠ¡å¸æˆ·è¿è¡Œã€‚ è¦å…è®¸è¿™äº›åŠ è½½é¡¹ä½¿ç”¨è¶…çº§ç”¨æˆ·è®¿é—®æƒé™ï¼Œè¯·å°† cluster-admin æƒé™æˆäºˆâ€kube-systemâ€ å‘½åç©ºé—´ä¸­çš„â€defaultâ€ æœåŠ¡å¸æˆ·ã€‚ æ³¨æ„ï¼šå¯ç”¨ä¸Šè¿°æ“ä½œæ„å‘³ç€â€kube-systemâ€ å‘½åç©ºé—´å°†åŒ…å«å…è®¸è¶…çº§ç”¨æˆ·è®¿é—® API çš„ç§˜é’¥ã€‚\nkubectl create clusterrolebinding add-on-cluster-admin \\ --clusterrole=cluster-admin \\ --serviceaccount=kube-system:default ä¸ºå‘½åç©ºé—´ä¸­æ‰€æœ‰çš„æœåŠ¡è´¦å·æˆäºˆè§’è‰²\nå¦‚æœæ‚¨å¸Œæœ›å‘½åç©ºé—´å†…çš„æ‰€æœ‰åº”ç”¨ç¨‹åºéƒ½æ‹¥æœ‰åŒä¸€ä¸ªè§’è‰²ï¼Œæ— è®ºå®ƒä»¬ä½¿ç”¨ä»€ä¹ˆæœåŠ¡è´¦æˆ·ï¼Œæ‚¨å¯ä»¥ä¸ºè¯¥å‘½åç©ºé—´çš„æœåŠ¡è´¦æˆ·ç”¨æˆ·ç»„æˆäºˆè§’è‰²ã€‚\nä¸‹é¢çš„ä¾‹å­å°†æˆäºˆâ€my-namespaceâ€ å‘½åç©ºé—´ä¸­çš„æ‰€æœ‰æœåŠ¡è´¦æˆ·åªè¯»æƒé™ï¼š\nkubectl create rolebinding serviceaccounts-view \\ --clusterrole=view \\ --group=system:serviceaccounts:my-namespace \\ --namespace=my-namespace å¯¹é›†ç¾¤èŒƒå›´å†…çš„æ‰€æœ‰æœåŠ¡è´¦æˆ·æˆäºˆä¸€ä¸ªå—é™è§’è‰²ï¼ˆä¸é¼“åŠ±ï¼‰\nå¦‚æœæ‚¨ä¸æƒ³ç®¡ç†æ¯ä¸ªå‘½åç©ºé—´çš„æƒé™ï¼Œåˆ™å¯ä»¥å°†é›†ç¾¤èŒƒå›´è§’è‰²æˆäºˆæ‰€æœ‰æœåŠ¡å¸æˆ·ã€‚\nä¸‹é¢çš„ä¾‹å­å°†æ‰€æœ‰å‘½åç©ºé—´ä¸­çš„åªè¯»æƒé™æˆäºˆé›†ç¾¤ä¸­çš„æ‰€æœ‰æœåŠ¡è´¦æˆ·ï¼š\nkubectl create clusterrolebinding serviceaccounts-view \\ --clusterrole=view \\ --group=system:serviceaccounts æˆäºˆè¶…çº§ç”¨æˆ·è®¿é—®æƒé™ç»™é›†ç¾¤èŒƒå›´å†…çš„æ‰€æœ‰æœåŠ¡å¸æˆ·ï¼ˆå¼ºçƒˆä¸é¼“åŠ±ï¼‰\nå¦‚æœæ‚¨æ ¹æœ¬ä¸å…³å¿ƒæƒé™åˆ†å—ï¼Œæ‚¨å¯ä»¥å¯¹æ‰€æœ‰æœåŠ¡è´¦æˆ·æˆäºˆè¶…çº§ç”¨æˆ·è®¿é—®æƒé™ã€‚\nè­¦å‘Šï¼šè¿™ç§åšæ³•å°†å…è®¸ä»»ä½•å…·æœ‰è¯»å–æƒé™çš„ç”¨æˆ·è®¿é—® secret æˆ–è€…é€šè¿‡åˆ›å»ºä¸€ä¸ªå®¹å™¨çš„æ–¹å¼æ¥è®¿é—®è¶…çº§ç”¨æˆ·çš„å‡­æ®ã€‚\nkubectl create clusterrolebinding serviceaccounts-cluster-admin \\ --clusterrole=cluster-admin \\ --group=system:serviceaccounts ä»ç‰ˆæœ¬ 1.5 å‡çº§ linkåœ¨ Kubernetes 1.6 ä¹‹å‰ï¼Œè®¸å¤šéƒ¨ç½²ä½¿ç”¨éå¸¸å®½æ³›çš„ ABAC ç­–ç•¥ï¼ŒåŒ…æ‹¬æˆäºˆå¯¹æ‰€æœ‰æœåŠ¡å¸æˆ·çš„å®Œæ•´ API è®¿é—®æƒé™ã€‚\né»˜è®¤çš„ RBAC ç­–ç•¥å°†æˆäºˆæ§åˆ¶å¹³é¢ç»„ä»¶ï¼ˆcontrol-plane componentsï¼‰ã€èŠ‚ç‚¹ï¼ˆnodesï¼‰å’Œæ§åˆ¶å™¨ï¼ˆcontrollerï¼‰ä¸€ç»„èŒƒå›´å—é™çš„æƒé™ï¼Œ ä½†å¯¹äºâ€kube-systemâ€ å‘½åç©ºé—´ä»¥å¤–çš„æœåŠ¡è´¦æˆ·ï¼Œåˆ™ ä¸æˆäºˆä»»ä½•æƒé™ï¼ˆè¶…å‡ºæˆäºˆæ‰€æœ‰è®¤è¯ç”¨æˆ·çš„å‘ç°æƒé™ï¼‰ã€‚\nè™½ç„¶å®‰å…¨æ€§æ›´é«˜ï¼Œä½†è¿™å¯èƒ½ä¼šå½±å“åˆ°æœŸæœ›è‡ªåŠ¨æ¥æ”¶ API æƒé™çš„ç°æœ‰å·¥ä½œè´Ÿè½½ã€‚ ä»¥ä¸‹æ˜¯ç®¡ç†æ­¤è½¬æ¢çš„ä¸¤ç§æ–¹æ³•ï¼š\nå¹¶è¡Œæˆæƒå™¨ï¼ˆauthorizerï¼‰ linkåŒæ—¶è¿è¡Œ RBAC å’Œ ABAC æˆæƒå™¨ï¼Œå¹¶åŒ…æ‹¬æ—§ç‰ˆ ABAC ç­–ç•¥ï¼š\n--authorization-mode=RBAC,ABAC --authorization-policy-file=mypolicy.jsonl\nRBAC æˆæƒå™¨å°†å°è¯•é¦–å…ˆæˆæƒè¯·æ±‚ã€‚å¦‚æœ RBAC æˆæƒå™¨æ‹’ç» API è¯·æ±‚ï¼Œåˆ™ ABAC æˆæƒå™¨å°†è¢«è¿è¡Œã€‚è¿™æ„å‘³ç€ RBAC ç­–ç•¥ æˆ–è€… ABAC ç­–ç•¥æ‰€å…è®¸çš„ä»»ä½•è¯·æ±‚éƒ½æ˜¯å¯é€šè¿‡çš„ã€‚\nå½“ä»¥æ—¥å¿—çº§åˆ«ä¸º 2 æˆ–æ›´é«˜ï¼ˆ--v = 2ï¼‰è¿è¡Œæ—¶ï¼Œæ‚¨å¯ä»¥åœ¨ API Server æ—¥å¿—ä¸­çœ‹åˆ° RBAC æ‹’ç»è¯·æ±‚ä¿¡æ¯ï¼ˆä»¥ RBAC DENY: ä¸ºå‰ç¼€ï¼‰ã€‚ æ‚¨å¯ä»¥ä½¿ç”¨è¯¥ä¿¡æ¯æ¥ç¡®å®šå“ªäº›è§’è‰²éœ€è¦æˆäºˆå“ªäº›ç”¨æˆ·ï¼Œç”¨æˆ·ç»„æˆ–æœåŠ¡å¸æˆ·ã€‚ ä¸€æ—¦ æˆäºˆæœåŠ¡å¸æˆ·è§’è‰²ï¼Œå¹¶ä¸”æœåŠ¡å™¨æ—¥å¿—ä¸­æ²¡æœ‰ RBAC æ‹’ç»æ¶ˆæ¯çš„å·¥ä½œè´Ÿè½½æ­£åœ¨è¿è¡Œï¼Œæ‚¨å¯ä»¥åˆ é™¤ ABAC æˆæƒå™¨ã€‚\nå®½æ³›çš„ RBAC æƒé™ linkæ‚¨å¯ä»¥ä½¿ç”¨ RBAC è§’è‰²ç»‘å®šæ¥å¤åˆ¶ä¸€ä¸ªå®½æ³›çš„ç­–ç•¥ã€‚\nè­¦å‘Šï¼šä»¥ä¸‹æ”¿ç­–ç•¥å…è®¸æ‰€æœ‰æœåŠ¡å¸æˆ·ä½œä¸ºé›†ç¾¤ç®¡ç†å‘˜ã€‚ è¿è¡Œåœ¨å®¹å™¨ä¸­çš„ä»»ä½•åº”ç”¨ç¨‹åºéƒ½ä¼šè‡ªåŠ¨æ¥æ”¶æœåŠ¡å¸æˆ·å‡­æ®ï¼Œå¹¶ä¸”å¯ä»¥å¯¹ API æ‰§è¡Œä»»ä½•æ“ä½œï¼ŒåŒ…æ‹¬æŸ¥çœ‹ secret å’Œä¿®æ”¹æƒé™ã€‚ å› æ­¤ï¼Œå¹¶ä¸æ¨èä½¿ç”¨è¿™ç§ç­–ç•¥ã€‚\nkubectl create clusterrolebinding permissive-binding \\ --clusterrole=cluster-admin \\ --user=admin \\ --user=kubelet \\ --group=system:serviceaccounts å‚è€ƒ link ä½¿ç”¨ RBAC é‰´æƒ - kubernetes.io "
            }
        );
    index.add(
            {
                id:  17 ,
                href: "\/docs\/information\/",
                title: "ä¿¡æ¯æŠ€æœ¯",
                description: "",
                content: ""
            }
        );
    index.add(
            {
                id:  18 ,
                href: "\/docs\/economy\/macroeconomics_base\/",
                title: "å®è§‚ç»æµå­¦åŸºç¡€",
                description: "å®è§‚ç»æµå­¦ä½œä¸ºç†è§£æ•´ä½“ç»æµè¿è¡Œè§„å¾‹çš„é‡è¦å­¦ç§‘ï¼Œå¥¥åˆ©ç»´å°”Â·å¸ƒå…°æŸ¥å¾·çš„ç»å…¸æ•™æã€Šå®è§‚ç»æµå­¦ã€‹ç³»ç»Ÿæ€§åœ°æ„å»ºäº†ä»çŸ­æœŸåˆ°é•¿æœŸçš„åˆ†ææ¡†æ¶ã€‚æœ¬æ–‡å°†ä»¥å¸ƒå…°æŸ¥å¾·çš„å®è§‚ç»æµå­¦ä½“ç³»ä¸ºåŸºç¡€ï¼Œè¯¦ç»†æ¢³ç†å®è§‚ç»æµå­¦çš„æ ¸å¿ƒæ¦‚å¿µã€åŸºç¡€æ¨¡å‹å’Œæ”¿ç­–åº”ç”¨ï¼Œé€šè¿‡ç†è®ºé˜é‡Šä¸å®ä¾‹åˆ†æç›¸ç»“åˆçš„æ–¹å¼ï¼Œå¸®åŠ©è¯»è€…å»ºç«‹èµ·å®Œæ•´çš„å®è§‚ç»æµå­¦çŸ¥è¯†æ¶æ„ã€‚æ–‡ç« å°†ä»å®è§‚ç»æµçš„åŸºæœ¬åº¦é‡å¼€å§‹ï¼Œé€æ­¥æ·±å…¥åˆ°å•†å“å¸‚åœºã€é‡‘èå¸‚åœºåˆ†æï¼Œè¿›è€Œæ¢è®¨åŠ³åŠ¨åŠ›å¸‚åœºä¸æ€»ä¾›ç»™æ€»éœ€æ±‚æ¨¡å‹ï¼Œæœ€åå»¶ä¼¸è‡³ç»æµå¢é•¿ç†è®ºå’Œå¼€æ”¾ç»æµä¸‹çš„å®è§‚ç»æµå­¦ï¼Œæ¯ä¸ªéƒ¨åˆ†éƒ½å°†é…ä»¥ç°å®ç»æµæ¡ˆä¾‹å’Œæ•°æ®åˆ†æï¼Œä½¿æŠ½è±¡ç†è®ºå…·è±¡åŒ–ï¼Œå¤æ‚æ¨¡å‹æ¸…æ™°åŒ–ã€‚\nå®è§‚ç»æµçš„åŸºæœ¬æ¦‚å¿µä¸åº¦é‡ linkå›½å†…ç”Ÿäº§æ€»å€¼(GDP)ä½œä¸ºå®è§‚ç»æµå­¦æœ€æ ¸å¿ƒçš„åº¦é‡æŒ‡æ ‡ï¼Œæ˜¯æŒ‡åœ¨ä¸€å®šæ—¶æœŸå†…(é€šå¸¸ä¸ºä¸€ä¸ªå­£åº¦æˆ–ä¸€å¹´)ï¼Œä¸€ä¸ªå›½å®¶æˆ–åœ°åŒºç»æµä¸­æ‰€ç”Ÿäº§å‡ºçš„å…¨éƒ¨æœ€ç»ˆäº§å“å’ŒæœåŠ¡çš„å¸‚åœºä»·å€¼æ€»å’Œã€‚ç†è§£GDPéœ€è¦æŠŠæ¡å‡ ä¸ªå…³é”®ç‰¹å¾ï¼šå®ƒä»…åŒ…æ‹¬æœ€ç»ˆäº§å“ä»·å€¼è€Œæ’é™¤ä¸­é—´äº§å“ä»¥é¿å…é‡å¤è®¡ç®—ï¼›å®ƒæ˜¯ä¸€ä¸ªå¸‚åœºä»·å€¼æ¦‚å¿µï¼Œé€šè¿‡è´§å¸è¡¡é‡ï¼›ä»…åŒ…å«å¸‚åœºæ´»åŠ¨å¯¼è‡´çš„ä»·å€¼ï¼Œéå¸‚åœºæ´»åŠ¨å¦‚å®¶åŠ¡åŠ³åŠ¨ä¸è®¡å…¥ï¼›å®ƒæ˜¯ä¸€ä¸ªæµé‡è€Œéå­˜é‡æ¦‚å¿µã€‚GDPçš„æ ¸ç®—ä¸»è¦æœ‰ä¸‰ç§æ–¹æ³•ï¼šç”Ÿäº§æ³•(æ€»äº§å‡ºå‡ä¸­é—´æŠ•å…¥)ã€æ”¶å…¥æ³•(åŠ³åŠ¨è€…æŠ¥é…¬+ç”Ÿäº§ç¨å‡€é¢+å›ºå®šèµ„äº§æŠ˜æ—§+è¥ä¸šç›ˆä½™)å’Œæ”¯å‡ºæ³•(æ¶ˆè´¹+æŠ•èµ„+æ”¿åºœè´­ä¹°+å‡€å‡ºå£)ã€‚\né€šè´§è†¨èƒ€ä¸å¤±ä¸šæ˜¯å®è§‚ç»æµè¿è¡Œçš„ä¸¤å¤§æ ¸å¿ƒé—®é¢˜ã€‚é€šè´§è†¨èƒ€æŒ‡ä¸€èˆ¬ç‰©ä»·æ°´å¹³æŒç»­ä¸Šæ¶¨çš„ç°è±¡ï¼Œè€Œé€šè´§ç´§ç¼©åˆ™ç›¸åã€‚å¸ƒå…°æŸ¥å¾·ç‰¹åˆ«å¼ºè°ƒäº†æ»èƒ€è¿™ä¸€ç‰¹æ®Šç°è±¡â€”â€”å³é«˜é€šèƒ€ä¸é«˜å¤±ä¸šåŒæ—¶å­˜åœ¨çš„å›°å¢ƒï¼Œå¦‚1970å¹´ä»£çŸ³æ²¹å±æœºæœŸé—´è¥¿æ–¹å›½å®¶ç»å†çš„çŠ¶å†µã€‚å¤±ä¸šç‡è¡¡é‡çš„æ˜¯åŠ³åŠ¨åŠ›ä¸­æ²¡æœ‰å·¥ä½œä½†æ­£åœ¨ç§¯æå¯»æ‰¾å·¥ä½œçš„äººå£æ¯”ä¾‹ï¼Œè€Œå‚ä¸ç‡åˆ™æ˜¯åŠ³åŠ¨å¹´é¾„äººå£ä¸­å®é™…å‚ä¸åŠ³åŠ¨å¸‚åœºçš„æ¯”ä¾‹ã€‚è¿™äº›æŒ‡æ ‡å…±åŒåæ˜ äº†ç»æµä½“çš„å¥åº·çŠ¶å†µï¼Œä¾‹å¦‚2008å¹´é‡‘èå±æœºåï¼Œç¾å›½å¤±ä¸šç‡ä¸€åº¦é£™å‡è‡³10%ï¼Œåæ˜ äº†ç»æµçš„ä¸¥é‡è¡°é€€ã€‚\nä»·æ ¼æŒ‡æ•°æ˜¯è¡¡é‡é€šèƒ€æ°´å¹³çš„é‡è¦å·¥å…·ã€‚GDPå¹³å‡æŒ‡æ•°åæ˜ äº†å›½å†…ç”Ÿäº§çš„æ‰€æœ‰æœ€ç»ˆäº§å“ä»·æ ¼å˜åŒ–ï¼Œè€Œæ¶ˆè´¹è€…ä»·æ ¼æŒ‡æ•°(CPI)åˆ™è¡¡é‡å…¸å‹æ¶ˆè´¹è€…è´­ä¹°çš„ä¸€ç¯®å­å•†å“å’ŒæœåŠ¡çš„æˆæœ¬å˜åŒ–ã€‚ä¾‹å¦‚ï¼Œè‹¥æŸå¹´GDPå¹³å‡æŒ‡æ•°ä»100ä¸Šå‡è‡³105ï¼Œåˆ™è¡¨ç¤ºæ€»ä½“ä»·æ ¼æ°´å¹³ä¸Šæ¶¨äº†5%ã€‚å¸ƒå…°æŸ¥å¾·è¿˜ä»‹ç»äº†è´­ä¹°åŠ›å¹³ä»·(PPP)ç†è®ºï¼Œè¯¥ç†è®ºè®¤ä¸ºé•¿æœŸæ¥çœ‹æ±‡ç‡ä¼šè°ƒæ•´è‡³ä½¿ä¸åŒå›½å®¶ä¸€ç¯®å­å•†å“ä»·æ ¼ç›¸ç­‰çš„æ°´å¹³ï¼Œè¿™è§£é‡Šäº†ä¸ºä»€ä¹ˆäººå‡GDPæŒ‰å¸‚åœºæ±‡ç‡å’ŒæŒ‰PPPè®¡ç®—ä¼šæœ‰æ˜¾è‘—å·®å¼‚ï¼Œå¦‚ä¸­å›½çš„äººå‡GDPæŒ‰PPPè®¡ç®—çº¦ä¸ºç¾å›½çš„å…­åˆ†ä¹‹ä¸€ã€‚\nå®è§‚ç»æµå­¦çš„åˆ†æé€šå¸¸åˆ†ä¸ºä¸‰ä¸ªæ—¶é—´ç»´åº¦ï¼šçŸ­æœŸå…³æ³¨ç»æµæ³¢åŠ¨å’Œç¨³å®šæ€§æ”¿ç­–ï¼Œä¸»è¦å·¥å…·æ˜¯IS-LMæ¨¡å‹ï¼›ä¸­æœŸåˆ†æç»æµå¦‚ä½•å›å½’è‡ªç„¶äº§å‡ºæ°´å¹³ï¼Œæ ¸å¿ƒæ˜¯AS-ADæ¨¡å‹ï¼›é•¿æœŸåˆ™èšç„¦ç»æµå¢é•¿çš„å†³å®šå› ç´ ï¼Œç´¢æ´›æ¨¡å‹æ˜¯åŸºæœ¬åˆ†ææ¡†æ¶ã€‚è¿™ç§æ—¶é—´ç»´åº¦çš„åˆ’åˆ†ä¸ºç†è§£å¤æ‚ç»æµç°è±¡æä¾›äº†æ¸…æ™°æ€è·¯ï¼Œä¾‹å¦‚é¢å¯¹2020å¹´æ–°å† ç–«æƒ…å†²å‡»æ—¶ï¼Œå„å›½æ”¿åºœé¦–å…ˆé‡‡å–çŸ­æœŸç¨³å®šæªæ–½(å¦‚ç¾å›½çš„2ä¸‡äº¿ç¾å…ƒåˆºæ¿€è®¡åˆ’)ï¼Œéšåé€æ­¥è½¬å‘ä¸­æœŸç»“æ„è°ƒæ•´ï¼Œè€Œé•¿æœŸåˆ™éœ€è€ƒè™‘ç–«æƒ…å¯¹æ½œåœ¨å¢é•¿çš„å½±å“ã€‚\nè¡¨ï¼šGDPæ ¸ç®—çš„ä¸‰ç§æ–¹æ³•æ¯”è¾ƒ\næ ¸ç®—æ–¹æ³• åŸºæœ¬å…¬å¼ ä¸»è¦æ„æˆ é€‚ç”¨åœºæ™¯ ç”Ÿäº§æ³• GDP=æ€»äº§å‡º-ä¸­é—´æŠ•å…¥ å„äº§ä¸šéƒ¨é—¨å¢åŠ å€¼ä¹‹å’Œ åˆ†æäº§ä¸šç»“æ„å˜åŒ– æ”¶å…¥æ³• GDP=åŠ³åŠ¨è€…æŠ¥é…¬+ç”Ÿäº§ç¨å‡€é¢+å›ºå®šèµ„äº§æŠ˜æ—§+è¥ä¸šç›ˆä½™ ç”Ÿäº§è¦ç´ è·å¾—çš„æ”¶å…¥ ç ”ç©¶æ”¶å…¥åˆ†é…æ ¼å±€ æ”¯å‡ºæ³• GDP=C+I+G+(X-M) æ¶ˆè´¹ã€æŠ•èµ„ã€æ”¿åºœè´­ä¹°ã€å‡€å‡ºå£ è§‚å¯Ÿéœ€æ±‚ç»“æ„å˜åŒ– å®è§‚ç»æµæ”¿ç­–çš„ç›®æ ‡é€šå¸¸åŒ…æ‹¬ï¼šç¨³å®šç‰©ä»·(ä½é€šèƒ€)ã€å……åˆ†å°±ä¸šã€ç»æµå¢é•¿å’Œå›½é™…æ”¶æ”¯å¹³è¡¡ã€‚è¿™äº›ç›®æ ‡ä¹‹é—´å¯èƒ½å­˜åœ¨å†²çªï¼Œä¾‹å¦‚çŸ­æœŸå†…åˆºæ¿€å°±ä¸šå¯èƒ½å¯¼è‡´é€šèƒ€å‹åŠ›ä¸Šå‡ï¼Œè¿™æ­£ä½“ç°äº†è²åˆ©æ™®æ–¯æ›²çº¿æ‰€æè¿°çš„å¤±ä¸šä¸é€šèƒ€ä¹‹é—´çš„æ›¿ä»£å…³ç³»ã€‚æ”¿ç­–åˆ¶å®šè€…éœ€è¦åœ¨å¤šé‡ç›®æ ‡é—´å¯»æ±‚å¹³è¡¡ï¼Œä¾‹å¦‚ç¾è”å‚¨åœ¨åˆ¶å®šè´§å¸æ”¿ç­–æ—¶æ—¢è€ƒè™‘å°±ä¸šå¸‚åœºçŠ¶å†µä¹Ÿå…³æ³¨é€šèƒ€é¢„æœŸï¼Œé‡‡ç”¨\"å¯¹ç§°æ€§é€šèƒ€ç›®æ ‡\"æ¡†æ¶å…è®¸é€šèƒ€ç‡æš‚æ—¶é«˜äº2%çš„ç›®æ ‡ä»¥æ”¯æŒå°±ä¸šã€‚\nå•†å“å¸‚åœºä¸ISæ›²çº¿åˆ†æ linkå‡¯æ©æ–¯äº¤å‰æ¨¡å‹æ„æˆäº†ç†è§£å•†å“å¸‚åœºå‡è¡¡çš„åŸºç¡€æ¡†æ¶ã€‚è¯¥æ¨¡å‹çš„æ ¸å¿ƒåœ¨äºè®¡åˆ’æ”¯å‡ºç­‰äºå®é™…äº§å‡ºçš„å‡è¡¡æ¡ä»¶ï¼Œå…¶ä¸­è®¡åˆ’æ”¯å‡º(E)ç”±æ¶ˆè´¹(C)ã€æŠ•èµ„(I)å’Œæ”¿åºœæ”¯å‡º(G)ç»„æˆï¼šE = C(Y-T) + I + Gã€‚æ¶ˆè´¹å‡½æ•°C = c0 + c1(Y-T)è¡¨æ˜æ¶ˆè´¹å–å†³äºè‡ªä¸»æ¶ˆè´¹c0å’Œè¾¹é™…æ¶ˆè´¹å€¾å‘c1(é€šå¸¸0",
                content: "å®è§‚ç»æµå­¦ä½œä¸ºç†è§£æ•´ä½“ç»æµè¿è¡Œè§„å¾‹çš„é‡è¦å­¦ç§‘ï¼Œå¥¥åˆ©ç»´å°”Â·å¸ƒå…°æŸ¥å¾·çš„ç»å…¸æ•™æã€Šå®è§‚ç»æµå­¦ã€‹ç³»ç»Ÿæ€§åœ°æ„å»ºäº†ä»çŸ­æœŸåˆ°é•¿æœŸçš„åˆ†ææ¡†æ¶ã€‚æœ¬æ–‡å°†ä»¥å¸ƒå…°æŸ¥å¾·çš„å®è§‚ç»æµå­¦ä½“ç³»ä¸ºåŸºç¡€ï¼Œè¯¦ç»†æ¢³ç†å®è§‚ç»æµå­¦çš„æ ¸å¿ƒæ¦‚å¿µã€åŸºç¡€æ¨¡å‹å’Œæ”¿ç­–åº”ç”¨ï¼Œé€šè¿‡ç†è®ºé˜é‡Šä¸å®ä¾‹åˆ†æç›¸ç»“åˆçš„æ–¹å¼ï¼Œå¸®åŠ©è¯»è€…å»ºç«‹èµ·å®Œæ•´çš„å®è§‚ç»æµå­¦çŸ¥è¯†æ¶æ„ã€‚æ–‡ç« å°†ä»å®è§‚ç»æµçš„åŸºæœ¬åº¦é‡å¼€å§‹ï¼Œé€æ­¥æ·±å…¥åˆ°å•†å“å¸‚åœºã€é‡‘èå¸‚åœºåˆ†æï¼Œè¿›è€Œæ¢è®¨åŠ³åŠ¨åŠ›å¸‚åœºä¸æ€»ä¾›ç»™æ€»éœ€æ±‚æ¨¡å‹ï¼Œæœ€åå»¶ä¼¸è‡³ç»æµå¢é•¿ç†è®ºå’Œå¼€æ”¾ç»æµä¸‹çš„å®è§‚ç»æµå­¦ï¼Œæ¯ä¸ªéƒ¨åˆ†éƒ½å°†é…ä»¥ç°å®ç»æµæ¡ˆä¾‹å’Œæ•°æ®åˆ†æï¼Œä½¿æŠ½è±¡ç†è®ºå…·è±¡åŒ–ï¼Œå¤æ‚æ¨¡å‹æ¸…æ™°åŒ–ã€‚\nå®è§‚ç»æµçš„åŸºæœ¬æ¦‚å¿µä¸åº¦é‡ linkå›½å†…ç”Ÿäº§æ€»å€¼(GDP)ä½œä¸ºå®è§‚ç»æµå­¦æœ€æ ¸å¿ƒçš„åº¦é‡æŒ‡æ ‡ï¼Œæ˜¯æŒ‡åœ¨ä¸€å®šæ—¶æœŸå†…(é€šå¸¸ä¸ºä¸€ä¸ªå­£åº¦æˆ–ä¸€å¹´)ï¼Œä¸€ä¸ªå›½å®¶æˆ–åœ°åŒºç»æµä¸­æ‰€ç”Ÿäº§å‡ºçš„å…¨éƒ¨æœ€ç»ˆäº§å“å’ŒæœåŠ¡çš„å¸‚åœºä»·å€¼æ€»å’Œã€‚ç†è§£GDPéœ€è¦æŠŠæ¡å‡ ä¸ªå…³é”®ç‰¹å¾ï¼šå®ƒä»…åŒ…æ‹¬æœ€ç»ˆäº§å“ä»·å€¼è€Œæ’é™¤ä¸­é—´äº§å“ä»¥é¿å…é‡å¤è®¡ç®—ï¼›å®ƒæ˜¯ä¸€ä¸ªå¸‚åœºä»·å€¼æ¦‚å¿µï¼Œé€šè¿‡è´§å¸è¡¡é‡ï¼›ä»…åŒ…å«å¸‚åœºæ´»åŠ¨å¯¼è‡´çš„ä»·å€¼ï¼Œéå¸‚åœºæ´»åŠ¨å¦‚å®¶åŠ¡åŠ³åŠ¨ä¸è®¡å…¥ï¼›å®ƒæ˜¯ä¸€ä¸ªæµé‡è€Œéå­˜é‡æ¦‚å¿µã€‚GDPçš„æ ¸ç®—ä¸»è¦æœ‰ä¸‰ç§æ–¹æ³•ï¼šç”Ÿäº§æ³•(æ€»äº§å‡ºå‡ä¸­é—´æŠ•å…¥)ã€æ”¶å…¥æ³•(åŠ³åŠ¨è€…æŠ¥é…¬+ç”Ÿäº§ç¨å‡€é¢+å›ºå®šèµ„äº§æŠ˜æ—§+è¥ä¸šç›ˆä½™)å’Œæ”¯å‡ºæ³•(æ¶ˆè´¹+æŠ•èµ„+æ”¿åºœè´­ä¹°+å‡€å‡ºå£)ã€‚\né€šè´§è†¨èƒ€ä¸å¤±ä¸šæ˜¯å®è§‚ç»æµè¿è¡Œçš„ä¸¤å¤§æ ¸å¿ƒé—®é¢˜ã€‚é€šè´§è†¨èƒ€æŒ‡ä¸€èˆ¬ç‰©ä»·æ°´å¹³æŒç»­ä¸Šæ¶¨çš„ç°è±¡ï¼Œè€Œé€šè´§ç´§ç¼©åˆ™ç›¸åã€‚å¸ƒå…°æŸ¥å¾·ç‰¹åˆ«å¼ºè°ƒäº†æ»èƒ€è¿™ä¸€ç‰¹æ®Šç°è±¡â€”â€”å³é«˜é€šèƒ€ä¸é«˜å¤±ä¸šåŒæ—¶å­˜åœ¨çš„å›°å¢ƒï¼Œå¦‚1970å¹´ä»£çŸ³æ²¹å±æœºæœŸé—´è¥¿æ–¹å›½å®¶ç»å†çš„çŠ¶å†µã€‚å¤±ä¸šç‡è¡¡é‡çš„æ˜¯åŠ³åŠ¨åŠ›ä¸­æ²¡æœ‰å·¥ä½œä½†æ­£åœ¨ç§¯æå¯»æ‰¾å·¥ä½œçš„äººå£æ¯”ä¾‹ï¼Œè€Œå‚ä¸ç‡åˆ™æ˜¯åŠ³åŠ¨å¹´é¾„äººå£ä¸­å®é™…å‚ä¸åŠ³åŠ¨å¸‚åœºçš„æ¯”ä¾‹ã€‚è¿™äº›æŒ‡æ ‡å…±åŒåæ˜ äº†ç»æµä½“çš„å¥åº·çŠ¶å†µï¼Œä¾‹å¦‚2008å¹´é‡‘èå±æœºåï¼Œç¾å›½å¤±ä¸šç‡ä¸€åº¦é£™å‡è‡³10%ï¼Œåæ˜ äº†ç»æµçš„ä¸¥é‡è¡°é€€ã€‚\nä»·æ ¼æŒ‡æ•°æ˜¯è¡¡é‡é€šèƒ€æ°´å¹³çš„é‡è¦å·¥å…·ã€‚GDPå¹³å‡æŒ‡æ•°åæ˜ äº†å›½å†…ç”Ÿäº§çš„æ‰€æœ‰æœ€ç»ˆäº§å“ä»·æ ¼å˜åŒ–ï¼Œè€Œæ¶ˆè´¹è€…ä»·æ ¼æŒ‡æ•°(CPI)åˆ™è¡¡é‡å…¸å‹æ¶ˆè´¹è€…è´­ä¹°çš„ä¸€ç¯®å­å•†å“å’ŒæœåŠ¡çš„æˆæœ¬å˜åŒ–ã€‚ä¾‹å¦‚ï¼Œè‹¥æŸå¹´GDPå¹³å‡æŒ‡æ•°ä»100ä¸Šå‡è‡³105ï¼Œåˆ™è¡¨ç¤ºæ€»ä½“ä»·æ ¼æ°´å¹³ä¸Šæ¶¨äº†5%ã€‚å¸ƒå…°æŸ¥å¾·è¿˜ä»‹ç»äº†è´­ä¹°åŠ›å¹³ä»·(PPP)ç†è®ºï¼Œè¯¥ç†è®ºè®¤ä¸ºé•¿æœŸæ¥çœ‹æ±‡ç‡ä¼šè°ƒæ•´è‡³ä½¿ä¸åŒå›½å®¶ä¸€ç¯®å­å•†å“ä»·æ ¼ç›¸ç­‰çš„æ°´å¹³ï¼Œè¿™è§£é‡Šäº†ä¸ºä»€ä¹ˆäººå‡GDPæŒ‰å¸‚åœºæ±‡ç‡å’ŒæŒ‰PPPè®¡ç®—ä¼šæœ‰æ˜¾è‘—å·®å¼‚ï¼Œå¦‚ä¸­å›½çš„äººå‡GDPæŒ‰PPPè®¡ç®—çº¦ä¸ºç¾å›½çš„å…­åˆ†ä¹‹ä¸€ã€‚\nå®è§‚ç»æµå­¦çš„åˆ†æé€šå¸¸åˆ†ä¸ºä¸‰ä¸ªæ—¶é—´ç»´åº¦ï¼šçŸ­æœŸå…³æ³¨ç»æµæ³¢åŠ¨å’Œç¨³å®šæ€§æ”¿ç­–ï¼Œä¸»è¦å·¥å…·æ˜¯IS-LMæ¨¡å‹ï¼›ä¸­æœŸåˆ†æç»æµå¦‚ä½•å›å½’è‡ªç„¶äº§å‡ºæ°´å¹³ï¼Œæ ¸å¿ƒæ˜¯AS-ADæ¨¡å‹ï¼›é•¿æœŸåˆ™èšç„¦ç»æµå¢é•¿çš„å†³å®šå› ç´ ï¼Œç´¢æ´›æ¨¡å‹æ˜¯åŸºæœ¬åˆ†ææ¡†æ¶ã€‚è¿™ç§æ—¶é—´ç»´åº¦çš„åˆ’åˆ†ä¸ºç†è§£å¤æ‚ç»æµç°è±¡æä¾›äº†æ¸…æ™°æ€è·¯ï¼Œä¾‹å¦‚é¢å¯¹2020å¹´æ–°å† ç–«æƒ…å†²å‡»æ—¶ï¼Œå„å›½æ”¿åºœé¦–å…ˆé‡‡å–çŸ­æœŸç¨³å®šæªæ–½(å¦‚ç¾å›½çš„2ä¸‡äº¿ç¾å…ƒåˆºæ¿€è®¡åˆ’)ï¼Œéšåé€æ­¥è½¬å‘ä¸­æœŸç»“æ„è°ƒæ•´ï¼Œè€Œé•¿æœŸåˆ™éœ€è€ƒè™‘ç–«æƒ…å¯¹æ½œåœ¨å¢é•¿çš„å½±å“ã€‚\nè¡¨ï¼šGDPæ ¸ç®—çš„ä¸‰ç§æ–¹æ³•æ¯”è¾ƒ\næ ¸ç®—æ–¹æ³• åŸºæœ¬å…¬å¼ ä¸»è¦æ„æˆ é€‚ç”¨åœºæ™¯ ç”Ÿäº§æ³• GDP=æ€»äº§å‡º-ä¸­é—´æŠ•å…¥ å„äº§ä¸šéƒ¨é—¨å¢åŠ å€¼ä¹‹å’Œ åˆ†æäº§ä¸šç»“æ„å˜åŒ– æ”¶å…¥æ³• GDP=åŠ³åŠ¨è€…æŠ¥é…¬+ç”Ÿäº§ç¨å‡€é¢+å›ºå®šèµ„äº§æŠ˜æ—§+è¥ä¸šç›ˆä½™ ç”Ÿäº§è¦ç´ è·å¾—çš„æ”¶å…¥ ç ”ç©¶æ”¶å…¥åˆ†é…æ ¼å±€ æ”¯å‡ºæ³• GDP=C+I+G+(X-M) æ¶ˆè´¹ã€æŠ•èµ„ã€æ”¿åºœè´­ä¹°ã€å‡€å‡ºå£ è§‚å¯Ÿéœ€æ±‚ç»“æ„å˜åŒ– å®è§‚ç»æµæ”¿ç­–çš„ç›®æ ‡é€šå¸¸åŒ…æ‹¬ï¼šç¨³å®šç‰©ä»·(ä½é€šèƒ€)ã€å……åˆ†å°±ä¸šã€ç»æµå¢é•¿å’Œå›½é™…æ”¶æ”¯å¹³è¡¡ã€‚è¿™äº›ç›®æ ‡ä¹‹é—´å¯èƒ½å­˜åœ¨å†²çªï¼Œä¾‹å¦‚çŸ­æœŸå†…åˆºæ¿€å°±ä¸šå¯èƒ½å¯¼è‡´é€šèƒ€å‹åŠ›ä¸Šå‡ï¼Œè¿™æ­£ä½“ç°äº†è²åˆ©æ™®æ–¯æ›²çº¿æ‰€æè¿°çš„å¤±ä¸šä¸é€šèƒ€ä¹‹é—´çš„æ›¿ä»£å…³ç³»ã€‚æ”¿ç­–åˆ¶å®šè€…éœ€è¦åœ¨å¤šé‡ç›®æ ‡é—´å¯»æ±‚å¹³è¡¡ï¼Œä¾‹å¦‚ç¾è”å‚¨åœ¨åˆ¶å®šè´§å¸æ”¿ç­–æ—¶æ—¢è€ƒè™‘å°±ä¸šå¸‚åœºçŠ¶å†µä¹Ÿå…³æ³¨é€šèƒ€é¢„æœŸï¼Œé‡‡ç”¨\"å¯¹ç§°æ€§é€šèƒ€ç›®æ ‡\"æ¡†æ¶å…è®¸é€šèƒ€ç‡æš‚æ—¶é«˜äº2%çš„ç›®æ ‡ä»¥æ”¯æŒå°±ä¸šã€‚\nå•†å“å¸‚åœºä¸ISæ›²çº¿åˆ†æ linkå‡¯æ©æ–¯äº¤å‰æ¨¡å‹æ„æˆäº†ç†è§£å•†å“å¸‚åœºå‡è¡¡çš„åŸºç¡€æ¡†æ¶ã€‚è¯¥æ¨¡å‹çš„æ ¸å¿ƒåœ¨äºè®¡åˆ’æ”¯å‡ºç­‰äºå®é™…äº§å‡ºçš„å‡è¡¡æ¡ä»¶ï¼Œå…¶ä¸­è®¡åˆ’æ”¯å‡º(E)ç”±æ¶ˆè´¹(C)ã€æŠ•èµ„(I)å’Œæ”¿åºœæ”¯å‡º(G)ç»„æˆï¼šE = C(Y-T) + I + Gã€‚æ¶ˆè´¹å‡½æ•°C = c0 + c1(Y-T)è¡¨æ˜æ¶ˆè´¹å–å†³äºè‡ªä¸»æ¶ˆè´¹c0å’Œè¾¹é™…æ¶ˆè´¹å€¾å‘c1(é€šå¸¸0"
            }
        );
    index.add(
            {
                id:  19 ,
                href: "\/docs\/information\/software\/cloud\/service-discovery\/topology-aware-routing\/",
                title: "æ‹“æ‰‘æ„ŸçŸ¥è·¯ç”±",
                description: "",
                content: ""
            }
        );
    index.add(
            {
                id:  20 ,
                href: "\/docs\/information\/secure\/modern_cryptography\/",
                title: "ç°ä»£å¯†ç å­¦",
                description: "å®šä¹‰ linkç°ä»£å¯†ç å­¦æ˜¯ç ”ç©¶å¦‚ä½•åœ¨æ•°å­¦ç†è®ºåŸºç¡€ä¸Šå®ç°ä¿¡æ¯å®‰å…¨çš„å­¦ç§‘ï¼Œå…¶æ ¸å¿ƒç›®æ ‡åŒ…æ‹¬ï¼š\næœºå¯†æ€§ï¼ˆé˜²æ­¢ä¿¡æ¯æ³„éœ²ï¼‰ å®Œæ•´æ€§ï¼ˆé˜²æ­¢æ•°æ®ç¯¡æ”¹ï¼‰ è®¤è¯æ€§ï¼ˆéªŒè¯èº«ä»½çœŸå®æ€§ï¼‰ ä¸å¯å¦è®¤æ€§ï¼ˆé˜²æ­¢äº‹åæŠµèµ–ï¼‰ åˆ†ç±»ä¸æŠ€æœ¯å®ç° linkä¸€ã€å¯¹ç§°å¯†ç å­¦ link1. åˆ†ç»„å¯†ç  link DESï¼ˆData Encryption Standardï¼‰\nè®¾è®¡ï¼šåŸºäºFeistelç»“æ„ï¼ˆ64ä½åˆ†ç»„ï¼Œ56ä½å¯†é’¥ï¼‰ï¼Œä½¿ç”¨Sç›’å®ç°éçº¿æ€§å˜æ¢ ç¼ºç‚¹ï¼šå¯†é’¥é•¿åº¦ä¸è¶³ï¼Œæ˜“å—æš´åŠ›ç ´è§£ï¼ˆå·²è¢«AESå–ä»£ï¼‰ AESï¼ˆAdvanced Encryption Standardï¼‰\nè®¾è®¡ï¼šSPNç»“æ„ï¼ˆ128ä½åˆ†ç»„ï¼Œæ”¯æŒ128/192/256ä½å¯†é’¥ï¼‰ï¼Œé€šè¿‡å­—èŠ‚ä»£æ¢ã€è¡Œç§»ä½ã€åˆ—æ··æ·†å’Œè½®å¯†é’¥åŠ å®ç°åŠ å¯† ä¼˜ç‚¹ï¼šæŠ—å·®åˆ†/çº¿æ€§å¯†ç åˆ†æï¼Œç¡¬ä»¶å®ç°é«˜æ•ˆ ç¼ºç‚¹ï¼šå¯èƒ½é­å—æ—è·¯æ”»å‡»ï¼ˆå¦‚æ—¶åºåˆ†æï¼‰ 2. æµå¯†ç  link RC4\nåŸç†ï¼šé€šè¿‡ä¼ªéšæœºæ•°ç”Ÿæˆå™¨ï¼ˆPRGAï¼‰äº§ç”Ÿå¯†é’¥æµ ç¼ºé™·ï¼šå¯†é’¥è°ƒåº¦ç®—æ³•å­˜åœ¨åå·®ï¼Œå·²å‘ç°å¤šç»„å¼±å¯†é’¥ ChaCha20\nä¼˜åŠ¿ï¼šåŸºäºARXç»“æ„ï¼ˆAdd-Rotate-XORï¼‰ï¼ŒæŠ—æ—¶åºæ”»å‡»ï¼Œç§»åŠ¨ç«¯æ€§èƒ½ä¼˜å¼‚ äºŒã€éå¯¹ç§°å¯†ç å­¦ link1. å…¬é’¥å¯†ç  link RSA\næ•°å­¦åŸºç¡€ï¼šå¤§æ•´æ•°åˆ†è§£é—®é¢˜ï¼ˆn = pÃ—qï¼‰ å¯†é’¥ç”Ÿæˆï¼šé€‰æ‹©å¤§ç´ æ•°p/qï¼Œè®¡ç®—nå’ŒÏ†(n)ï¼Œé€‰å–eæ»¡è¶³gcd(e,Ï†(n))=1 ç¼ºç‚¹ï¼šè®¡ç®—é‡å¤§ï¼Œå¯†é’¥é•¿åº¦éœ€â‰¥2048ä½ ECCï¼ˆæ¤­åœ†æ›²çº¿å¯†ç ï¼‰\næ ¸å¿ƒï¼šæ¤­åœ†æ›²çº¿ç¦»æ•£å¯¹æ•°é—®é¢˜ï¼ˆECDLPï¼‰ ä¼˜åŠ¿ï¼šç›¸åŒå®‰å…¨å¼ºåº¦ä¸‹å¯†é’¥æ›´çŸ­ï¼ˆ256ä½ECC â‰ˆ 3072ä½RSAï¼‰ 2. æ•°å­—ç­¾å link DSA\næµç¨‹ï¼šåŸºäºSchnorrç­¾åæ”¹è¿›ï¼Œä½¿ç”¨æ¨¡påŸŸè¿ç®— å±€é™ï¼šç­¾åé•¿åº¦å›ºå®š320ä½ï¼Œä½†è®¡ç®—æ•ˆç‡ä½äºECDSA ECDSA\nä¼˜åŒ–ï¼šåœ¨æ¤­åœ†æ›²çº¿ä¸Šå®ç°æ•°å­—ç­¾åï¼Œèµ„æºæ¶ˆè€—å‡å°‘50% ä¸‰ã€å“ˆå¸Œå‡½æ•°ä¸å®Œæ•´æ€§ link1. å¯†ç å­¦å“ˆå¸Œ link SHA-256\nç»“æ„ï¼šMerkle-DamgÃ¥rdç»“æ„ï¼Œ32ä½å­—è¿ç®— æŠ—æ€§ï¼šå¼ºæŠ—ç¢°æ’æ€§ï¼ˆ2^128æ¬¡æ“ä½œï¼‰ SHA-3\n",
                content: "å®šä¹‰ linkç°ä»£å¯†ç å­¦æ˜¯ç ”ç©¶å¦‚ä½•åœ¨æ•°å­¦ç†è®ºåŸºç¡€ä¸Šå®ç°ä¿¡æ¯å®‰å…¨çš„å­¦ç§‘ï¼Œå…¶æ ¸å¿ƒç›®æ ‡åŒ…æ‹¬ï¼š\næœºå¯†æ€§ï¼ˆé˜²æ­¢ä¿¡æ¯æ³„éœ²ï¼‰ å®Œæ•´æ€§ï¼ˆé˜²æ­¢æ•°æ®ç¯¡æ”¹ï¼‰ è®¤è¯æ€§ï¼ˆéªŒè¯èº«ä»½çœŸå®æ€§ï¼‰ ä¸å¯å¦è®¤æ€§ï¼ˆé˜²æ­¢äº‹åæŠµèµ–ï¼‰ åˆ†ç±»ä¸æŠ€æœ¯å®ç° linkä¸€ã€å¯¹ç§°å¯†ç å­¦ link1. åˆ†ç»„å¯†ç  link DESï¼ˆData Encryption Standardï¼‰\nè®¾è®¡ï¼šåŸºäºFeistelç»“æ„ï¼ˆ64ä½åˆ†ç»„ï¼Œ56ä½å¯†é’¥ï¼‰ï¼Œä½¿ç”¨Sç›’å®ç°éçº¿æ€§å˜æ¢ ç¼ºç‚¹ï¼šå¯†é’¥é•¿åº¦ä¸è¶³ï¼Œæ˜“å—æš´åŠ›ç ´è§£ï¼ˆå·²è¢«AESå–ä»£ï¼‰ AESï¼ˆAdvanced Encryption Standardï¼‰\nè®¾è®¡ï¼šSPNç»“æ„ï¼ˆ128ä½åˆ†ç»„ï¼Œæ”¯æŒ128/192/256ä½å¯†é’¥ï¼‰ï¼Œé€šè¿‡å­—èŠ‚ä»£æ¢ã€è¡Œç§»ä½ã€åˆ—æ··æ·†å’Œè½®å¯†é’¥åŠ å®ç°åŠ å¯† ä¼˜ç‚¹ï¼šæŠ—å·®åˆ†/çº¿æ€§å¯†ç åˆ†æï¼Œç¡¬ä»¶å®ç°é«˜æ•ˆ ç¼ºç‚¹ï¼šå¯èƒ½é­å—æ—è·¯æ”»å‡»ï¼ˆå¦‚æ—¶åºåˆ†æï¼‰ 2. æµå¯†ç  link RC4\nåŸç†ï¼šé€šè¿‡ä¼ªéšæœºæ•°ç”Ÿæˆå™¨ï¼ˆPRGAï¼‰äº§ç”Ÿå¯†é’¥æµ ç¼ºé™·ï¼šå¯†é’¥è°ƒåº¦ç®—æ³•å­˜åœ¨åå·®ï¼Œå·²å‘ç°å¤šç»„å¼±å¯†é’¥ ChaCha20\nä¼˜åŠ¿ï¼šåŸºäºARXç»“æ„ï¼ˆAdd-Rotate-XORï¼‰ï¼ŒæŠ—æ—¶åºæ”»å‡»ï¼Œç§»åŠ¨ç«¯æ€§èƒ½ä¼˜å¼‚ äºŒã€éå¯¹ç§°å¯†ç å­¦ link1. å…¬é’¥å¯†ç  link RSA\næ•°å­¦åŸºç¡€ï¼šå¤§æ•´æ•°åˆ†è§£é—®é¢˜ï¼ˆn = pÃ—qï¼‰ å¯†é’¥ç”Ÿæˆï¼šé€‰æ‹©å¤§ç´ æ•°p/qï¼Œè®¡ç®—nå’ŒÏ†(n)ï¼Œé€‰å–eæ»¡è¶³gcd(e,Ï†(n))=1 ç¼ºç‚¹ï¼šè®¡ç®—é‡å¤§ï¼Œå¯†é’¥é•¿åº¦éœ€â‰¥2048ä½ ECCï¼ˆæ¤­åœ†æ›²çº¿å¯†ç ï¼‰\næ ¸å¿ƒï¼šæ¤­åœ†æ›²çº¿ç¦»æ•£å¯¹æ•°é—®é¢˜ï¼ˆECDLPï¼‰ ä¼˜åŠ¿ï¼šç›¸åŒå®‰å…¨å¼ºåº¦ä¸‹å¯†é’¥æ›´çŸ­ï¼ˆ256ä½ECC â‰ˆ 3072ä½RSAï¼‰ 2. æ•°å­—ç­¾å link DSA\næµç¨‹ï¼šåŸºäºSchnorrç­¾åæ”¹è¿›ï¼Œä½¿ç”¨æ¨¡påŸŸè¿ç®— å±€é™ï¼šç­¾åé•¿åº¦å›ºå®š320ä½ï¼Œä½†è®¡ç®—æ•ˆç‡ä½äºECDSA ECDSA\nä¼˜åŒ–ï¼šåœ¨æ¤­åœ†æ›²çº¿ä¸Šå®ç°æ•°å­—ç­¾åï¼Œèµ„æºæ¶ˆè€—å‡å°‘50% ä¸‰ã€å“ˆå¸Œå‡½æ•°ä¸å®Œæ•´æ€§ link1. å¯†ç å­¦å“ˆå¸Œ link SHA-256\nç»“æ„ï¼šMerkle-DamgÃ¥rdç»“æ„ï¼Œ32ä½å­—è¿ç®— æŠ—æ€§ï¼šå¼ºæŠ—ç¢°æ’æ€§ï¼ˆ2^128æ¬¡æ“ä½œï¼‰ SHA-3\nåˆ›æ–°ï¼šæµ·ç»µç»“æ„ï¼ˆSponge Constructionï¼‰ï¼ŒæŠ—é•¿åº¦æ‰©å±•æ”»å‡» 2. æ¶ˆæ¯è®¤è¯ç ï¼ˆMACï¼‰ link HMAC å…¬å¼ï¼šHMAC(K,m) = H((KâŠ•opad) || H((KâŠ•ipad)||m)) ä¼˜åŠ¿ï¼šå¯ç»“åˆä»»æ„å“ˆå¸Œå‡½æ•°ï¼Œä¿è¯æ¶ˆæ¯æ¥æºå¯ä¿¡ æ•°å­¦åŸºç¡€ link é¢†åŸŸ æ ¸å¿ƒåº”ç”¨åœºæ™¯ æ•°è®º RSAå¯†é’¥ç”Ÿæˆã€ç¦»æ•£å¯¹æ•°é—®é¢˜ æœ‰é™åŸŸç†è®º AESåˆ—æ··æ·†ã€ECCç‚¹è¿ç®— æ¦‚ç‡è®º ç”Ÿæ—¥æ”»å‡»åˆ†æï¼ˆå“ˆå¸Œç¢°æ’æ¦‚ç‡ï¼‰ ç»„åˆæ•°å­¦ Sç›’è®¾è®¡ä¼˜åŒ–ï¼ˆéçº¿æ€§åº¦æœ€å¤§åŒ–ï¼‰ ç®—æ³•å¯¹æ¯”ä¸é€‰å‹ link ç±»å‹ å…¸å‹ç®—æ³• ä¼˜ç‚¹ ç¼ºç‚¹ é€‚ç”¨åœºæ™¯ å¯¹ç§°åŠ å¯† AES-GCM é«˜é€Ÿã€æ”¯æŒè®¤è¯åŠ å¯† å¯†é’¥åˆ†å‘éœ€å®‰å…¨é€šé“ å¤§æ•°æ®é‡åŠ å¯† éå¯¹ç§°åŠ å¯† ECC å¯†é’¥çŸ­ã€è®¡ç®—æ•ˆç‡é«˜ å®ç°å¤æ‚åº¦è¾ƒé«˜ å¯†é’¥åå•†ã€è¯ä¹¦ å“ˆå¸Œå‡½æ•° SHA3-512 æŠ—é‡å­æ”»å‡»æ½œåŠ› è®¡ç®—èµ„æºæ¶ˆè€—è¾ƒå¤§ åŒºå—é“¾ã€æ•°å­—å–è¯ æ•°å­—ç­¾å EdDSA ç¡®å®šå¼éšæœºæ•°ã€æŠ—ä¾§ä¿¡é“ å…¼å®¹æ€§å¾…æå‡ ç‰©è”ç½‘è®¾å¤‡è®¤è¯ æ€»ç»“ä¸å±•æœ› linkç°ä»£å¯†ç å­¦æ„å»ºäº†ä¸‰å¤§æ”¯æŸ±æŠ€æœ¯ï¼š\nå¯¹ç§°åŠ å¯†è§£å†³é«˜æ•ˆåŠ å¯†é—®é¢˜ éå¯¹ç§°åŠ å¯†çªç ´å¯†é’¥åˆ†å‘ç“¶é¢ˆ å“ˆå¸Œå‡½æ•°ä¿éšœæ•°æ®å®Œæ•´æ€§ æœªæ¥å‘å±•æ–¹å‘ï¼š\nåé‡å­å¯†ç ï¼ˆNTRUã€Lattice-basedï¼‰ åŒæ€åŠ å¯†ï¼ˆå…¨åŒæ€ç®—æ³•ä¼˜åŒ–ï¼‰ å¤šæ–¹å®‰å…¨è®¡ç®—ï¼ˆéšç§ä¿æŠ¤å‡çº§ï¼‰ æ•°å­¦ç†è®ºçš„çªç ´å°†ç»§ç»­æ¨åŠ¨å¯†ç å­¦å‘å±•ï¼Œè€Œè½¯ç¡¬ä»¶ååŒä¼˜åŒ–å°†æˆä¸ºå·¥ç¨‹å®ç°çš„å…³é”®æŒ‘æˆ˜ã€‚\n"
            }
        );
    index.add(
            {
                id:  21 ,
                href: "\/docs\/information\/communication\/",
                title: "é€šä¿¡",
                description: "",
                content: ""
            }
        );
    index.add(
            {
                id:  22 ,
                href: "\/docs\/information\/software\/cloud\/service-discovery\/ingress\/",
                title: "Ingress",
                description: "Ingress æ˜¯ä» Kubernetes é›†ç¾¤å¤–éƒ¨è®¿é—®é›†ç¾¤å†…éƒ¨æœåŠ¡çš„å…¥å£ï¼Œè¿™ç¯‡æ–‡ç« éƒ¨åˆ†è¯‘è‡ª Kubernetes å®˜æ–¹æ–‡æ¡£ Ingress Resourceï¼Œåé¢çš„ç« èŠ‚ä¼šè®²åˆ°ä½¿ç”¨ Traefik æ¥åš Ingress controllerï¼Œæ–‡ç« æœ«å°¾ç»™å‡ºäº†å‡ ä¸ªç›¸å…³é“¾æ¥ã€‚\n",
                content: "Ingress æ˜¯ä» Kubernetes é›†ç¾¤å¤–éƒ¨è®¿é—®é›†ç¾¤å†…éƒ¨æœåŠ¡çš„å…¥å£ï¼Œè¿™ç¯‡æ–‡ç« éƒ¨åˆ†è¯‘è‡ª Kubernetes å®˜æ–¹æ–‡æ¡£ Ingress Resourceï¼Œåé¢çš„ç« èŠ‚ä¼šè®²åˆ°ä½¿ç”¨ Traefik æ¥åš Ingress controllerï¼Œæ–‡ç« æœ«å°¾ç»™å‡ºäº†å‡ ä¸ªç›¸å…³é“¾æ¥ã€‚\n**æœ¯è¯­ **\nåœ¨æœ¬ç¯‡æ–‡ç« ä¸­ä½ å°†ä¼šçœ‹åˆ°ä¸€äº›åœ¨å…¶ä»–åœ°æ–¹è¢«äº¤å‰ä½¿ç”¨çš„æœ¯è¯­ï¼Œä¸ºäº†é˜²æ­¢äº§ç”Ÿæ­§ä¹‰ï¼Œæˆ‘ä»¬é¦–å…ˆæ¥æ¾„æ¸…ä¸‹ã€‚\nèŠ‚ç‚¹ï¼šKubernetes é›†ç¾¤ä¸­çš„ä¸€å°ç‰©ç†æœºæˆ–è€…è™šæ‹Ÿæœºã€‚ é›†ç¾¤ï¼šä½äº Internet é˜²ç«å¢™åçš„èŠ‚ç‚¹ï¼Œè¿™æ˜¯ kubernetes ç®¡ç†çš„ä¸»è¦è®¡ç®—èµ„æºã€‚ è¾¹ç•Œè·¯ç”±å™¨ï¼šä¸ºé›†ç¾¤å¼ºåˆ¶æ‰§è¡Œé˜²ç«å¢™ç­–ç•¥çš„è·¯ç”±å™¨ã€‚ è¿™å¯èƒ½æ˜¯ç”±äº‘æä¾›å•†æˆ–ç‰©ç†ç¡¬ä»¶ç®¡ç†çš„ç½‘å…³ã€‚ é›†ç¾¤ç½‘ç»œï¼šä¸€ç»„é€»è¾‘æˆ–ç‰©ç†é“¾æ¥ï¼Œå¯æ ¹æ® Kubernetes ç½‘ç»œæ¨¡å‹ å®ç°ç¾¤é›†å†…çš„é€šä¿¡ã€‚ é›†ç¾¤ç½‘ç»œçš„å®ç°åŒ…æ‹¬ Overlay æ¨¡å‹çš„ flannel å’ŒåŸºäº SDN çš„ OVSã€‚ æœåŠ¡ï¼šä½¿ç”¨æ ‡ç­¾é€‰æ‹©å™¨æ ‡è¯†ä¸€ç»„ pod æˆä¸ºçš„ Kubernetes æœåŠ¡ã€‚ é™¤éå¦æœ‰è¯´æ˜ï¼Œå¦åˆ™æœåŠ¡å‡å®šåœ¨é›†ç¾¤ç½‘ç»œå†…ä»…å¯é€šè¿‡è™šæ‹Ÿ IP è®¿é—®ã€‚ ä»€ä¹ˆæ˜¯ Ingressï¼Ÿ linké€šå¸¸æƒ…å†µä¸‹ï¼Œservice å’Œ pod ä»…å¯åœ¨é›†ç¾¤å†…éƒ¨ç½‘ç»œä¸­é€šè¿‡ IP åœ°å€è®¿é—®ã€‚æ‰€æœ‰åˆ°è¾¾è¾¹ç•Œè·¯ç”±å™¨çš„æµé‡æˆ–è¢«ä¸¢å¼ƒæˆ–è¢«è½¬å‘åˆ°å…¶ä»–åœ°æ–¹ã€‚ä»æ¦‚å¿µä¸Šè®²ï¼Œå¯èƒ½åƒä¸‹é¢è¿™æ ·ï¼š\ninternet | ------------ [Services] Ingress æ˜¯æˆæƒå…¥ç«™è¿æ¥åˆ°è¾¾é›†ç¾¤æœåŠ¡çš„è§„åˆ™é›†åˆã€‚\ninternet | [Ingress] --|-----|-- [Services] ä½ å¯ä»¥ç»™ Ingress é…ç½®æä¾›å¤–éƒ¨å¯è®¿é—®çš„ URLã€è´Ÿè½½å‡è¡¡ã€SSLã€åŸºäºåç§°çš„è™šæ‹Ÿä¸»æœºç­‰ã€‚ç”¨æˆ·é€šè¿‡ POST Ingress èµ„æºåˆ° API server çš„æ–¹å¼æ¥è¯·æ±‚ ingressã€‚ Ingress controller è´Ÿè´£å®ç° Ingressï¼Œé€šå¸¸ä½¿ç”¨è´Ÿè½½å‡è¡¡å™¨ï¼Œå®ƒè¿˜å¯ä»¥é…ç½®è¾¹ç•Œè·¯ç”±å’Œå…¶ä»–å‰ç«¯ï¼Œè¿™æœ‰åŠ©äºä»¥é«˜å¯ç”¨çš„æ–¹å¼å¤„ç†æµé‡ã€‚\nå…ˆå†³æ¡ä»¶ linkåœ¨ä½¿ç”¨ Ingress èµ„æºä¹‹å‰ï¼Œæœ‰å¿…è¦å…ˆäº†è§£ä¸‹é¢å‡ ä»¶äº‹æƒ…ã€‚\nIngress èµ„æºå¯¹è±¡åœ¨ Kubernetes 1.1 ä¹‹å‰è¿˜æ²¡æœ‰ã€‚ ä½ éœ€è¦ä¸€ä¸ª Ingress Controller æ¥å®ç° Ingressï¼Œå•çº¯çš„åˆ›å»ºä¸€ä¸ª Ingress æ²¡æœ‰ä»»ä½•æ„ä¹‰ã€‚ GCE/GKE ä¼šåœ¨ master èŠ‚ç‚¹ä¸Šéƒ¨ç½²ä¸€ä¸ª ingress controllerã€‚ä½ å¯ä»¥åœ¨ä¸€ä¸ª pod ä¸­éƒ¨ç½²ä»»æ„ä¸ªè‡ªå®šä¹‰çš„ ingress controllerã€‚ä½ å¿…é¡»æ­£ç¡®åœ°æ³¨è§£æ¯ä¸ª ingressï¼Œæ¯”å¦‚è¿è¡Œå¤šä¸ª ingress controller å’Œå…³é—­ glbcã€‚ åœ¨é GCE/GKE çš„ç¯å¢ƒä¸­ï¼Œä½ éœ€è¦åœ¨ pod ä¸­ éƒ¨ç½²ä¸€ä¸ª controllerï¼Œä¾‹å¦‚ Nginx Ingress Controllerã€‚ Ingress èµ„æº linkæœ€ç®€åŒ–çš„ Ingress é…ç½®å¦‚ä¸‹ã€‚\n1: apiVersion: extensions/v1beta1 2: kind: Ingress 3: metadata: 4: name: test-ingress 5: spec: 6: rules: 7: - http: 8: paths: 9: - path: /testpath 10: backend: 11: serviceName: test 12: servicePort: 80 å¦‚æœä½ æ²¡æœ‰é…ç½® Ingress controller å°±å°†å…¶ POST åˆ° API server ä¸ä¼šæœ‰ä»»ä½•ç”¨å¤„ã€‚\né…ç½®è¯´æ˜\n**1-4 è¡Œ **ï¼šè·Ÿ Kubernetes çš„å…¶ä»–é…ç½®ä¸€æ ·ï¼Œingress çš„é…ç½®ä¹Ÿéœ€è¦ apiVersionï¼Œkind å’Œ metadata å­—æ®µã€‚é…ç½®æ–‡ä»¶çš„è¯¦ç»†è¯´æ˜è¯·æŸ¥çœ‹ éƒ¨ç½²åº”ç”¨ï¼Œé…ç½®å®¹å™¨ å’Œä½¿ç”¨èµ„æºã€‚\n**5-7 è¡Œ **: Ingress spec ä¸­åŒ…å«é…ç½®ä¸€ä¸ª loadbalancer æˆ– proxy server çš„æ‰€æœ‰ä¿¡æ¯ã€‚æœ€é‡è¦çš„æ˜¯ï¼Œå®ƒåŒ…å«äº†ä¸€ä¸ªåŒ¹é…æ‰€æœ‰å…¥ç«™è¯·æ±‚çš„è§„åˆ™åˆ—è¡¨ã€‚ç›®å‰ ingress åªæ”¯æŒ http è§„åˆ™ã€‚\n**8-9 è¡Œ **ï¼šæ¯æ¡ http è§„åˆ™åŒ…å«ä»¥ä¸‹ä¿¡æ¯ï¼šä¸€ä¸ª host é…ç½®é¡¹ï¼ˆæ¯”å¦‚ for.bar.comï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸­é»˜è®¤æ˜¯ *ï¼‰ï¼Œpath åˆ—è¡¨ï¼ˆæ¯”å¦‚ï¼š/testpathï¼‰ï¼Œæ¯ä¸ª path éƒ½å…³è”ä¸€ä¸ª backend(æ¯”å¦‚ test:80)ã€‚åœ¨ loadbalancer å°†æµé‡è½¬å‘åˆ° backend ä¹‹å‰ï¼Œæ‰€æœ‰çš„å…¥ç«™è¯·æ±‚éƒ½è¦å…ˆåŒ¹é… host å’Œ pathã€‚\n**10-12 è¡Œ **ï¼šæ­£å¦‚ services doc ä¸­æè¿°çš„é‚£æ ·ï¼Œbackend æ˜¯ä¸€ä¸ª service:port çš„ç»„åˆã€‚Ingress çš„æµé‡è¢«è½¬å‘åˆ°å®ƒæ‰€åŒ¹é…çš„ backendã€‚\nå…¨å±€å‚æ•°ï¼šä¸ºäº†ç®€å•èµ·è§ï¼ŒIngress ç¤ºä¾‹ä¸­æ²¡æœ‰å…¨å±€å‚æ•°ï¼Œè¯·å‚é˜…èµ„æºå®Œæ•´å®šä¹‰çš„ API å‚è€ƒã€‚ åœ¨æ‰€æœ‰è¯·æ±‚éƒ½ä¸èƒ½è·Ÿ spec ä¸­çš„ path åŒ¹é…çš„æƒ…å†µä¸‹ï¼Œè¯·æ±‚è¢«å‘é€åˆ° Ingress controller çš„é»˜è®¤åç«¯ï¼Œå¯ä»¥æŒ‡å®šå…¨å±€ç¼ºçœ backendã€‚\nIngress controller linkä¸ºäº†ä½¿ Ingress æ­£å¸¸å·¥ä½œï¼Œé›†ç¾¤ä¸­å¿…é¡»è¿è¡Œ Ingress controllerã€‚ è¿™ä¸å…¶ä»–ç±»å‹çš„æ§åˆ¶å™¨ä¸åŒï¼Œå…¶ä»–ç±»å‹çš„æ§åˆ¶å™¨é€šå¸¸ä½œä¸º kube-controller-manager äºŒè¿›åˆ¶æ–‡ä»¶çš„ä¸€éƒ¨åˆ†è¿è¡Œï¼Œåœ¨é›†ç¾¤å¯åŠ¨æ—¶è‡ªåŠ¨å¯åŠ¨ã€‚ ä½ éœ€è¦é€‰æ‹©æœ€é€‚åˆè‡ªå·±é›†ç¾¤çš„ Ingress controller æˆ–è€…è‡ªå·±å®ç°ä¸€ä¸ªã€‚\nKubernetes å½“å‰æ”¯æŒå¹¶ç»´æŠ¤ GCE å’Œ nginx ä¸¤ç§ controller F5ï¼ˆå…¬å¸ï¼‰æ”¯æŒå¹¶ç»´æŠ¤ F5 BIG-IP Controller for Kubernetes Kong åŒæ—¶æ”¯æŒå¹¶ç»´æŠ¤ ç¤¾åŒºç‰ˆ ä¸ ä¼ä¸šç‰ˆ çš„ Kong Ingress Controller for Kubernetes Traefik æ˜¯åŠŸèƒ½é½å…¨çš„ ingress controllerï¼ˆLetâ€™s Encrypt, secrets, http2, websocketâ€¦ï¼‰, Containous ä¹Ÿå¯¹å…¶æä¾›å•†ä¸šæ”¯æŒã€‚ Istio ä½¿ç”¨ CRD Gateway æ¥ æ§åˆ¶ Ingress æµé‡ã€‚ åœ¨ä½ å¼€å§‹å‰ linkä»¥ä¸‹æ–‡æ¡£æè¿°äº† Ingress èµ„æºä¸­å…¬å¼€çš„ä¸€ç»„è·¨å¹³å°åŠŸèƒ½ã€‚ ç†æƒ³æƒ…å†µä¸‹ï¼Œæ‰€æœ‰çš„ Ingress controller éƒ½åº”è¯¥ç¬¦åˆè¿™ä¸ªè§„èŒƒï¼Œä½†æ˜¯æˆ‘ä»¬è¿˜æ²¡æœ‰å®ç°ã€‚ GCE å’Œ Nginx æ§åˆ¶å™¨çš„æ–‡æ¡£åˆ†åˆ«åœ¨ è¿™é‡Œ å’Œ è¿™é‡Œã€‚å¦‚æœæ‚¨ä½¿ç”¨ F5 BIG-IP controllerï¼Œè¯·å‚çœ‹ è¿™é‡Œã€‚\nç¡®ä¿æ‚¨æŸ¥çœ‹æ§åˆ¶å™¨ç‰¹å®šçš„æ–‡æ¡£ï¼Œä»¥ä¾¿æ‚¨äº†è§£æ¯ä¸ªæ–‡æ¡£çš„æ³¨æ„äº‹é¡¹ã€‚\nIngress ç±»å‹ linkå• Service Ingress linkKubernetes ä¸­å·²ç»å­˜åœ¨ä¸€äº›æ¦‚å¿µå¯ä»¥æš´éœ²å•ä¸ª serviceï¼ˆæŸ¥çœ‹ æ›¿ä»£æ–¹æ¡ˆï¼‰ï¼Œä½†æ˜¯ä½ ä»ç„¶å¯ä»¥é€šè¿‡ Ingress æ¥å®ç°ï¼Œé€šè¿‡æŒ‡å®šä¸€ä¸ªæ²¡æœ‰ rule çš„é»˜è®¤ backend çš„æ–¹å¼ã€‚\ningress.yaml å®šä¹‰æ–‡ä»¶ï¼š\napiVersion: extensions/v1beta1 kind: Ingress metadata: name: test-ingress spec: backend: serviceName: testsvc servicePort: 80 ä½¿ç”¨kubectl create -få‘½ä»¤åˆ›å»ºï¼Œç„¶åæŸ¥çœ‹ ingressï¼š\n$ kubectl get ing NAME RULE BACKEND ADDRESS test-ingress - testsvc:80 107.178.254.228 107.178.254.228 å°±æ˜¯ Ingress controller ä¸ºäº†å®ç° Ingress è€Œåˆ†é…çš„ IP åœ°å€ã€‚RULE åˆ—è¡¨ç¤ºæ‰€æœ‰å‘é€ç»™è¯¥ IP çš„æµé‡éƒ½è¢«è½¬å‘åˆ°äº† BACKEND æ‰€åˆ—çš„ Kubernetes service ä¸Šã€‚\nç®€å•å±•å¼€ linkå¦‚å‰é¢æè¿°çš„é‚£æ ·ï¼Œkubernetes pod ä¸­çš„ IP åªåœ¨é›†ç¾¤ç½‘ç»œå†…éƒ¨å¯è§ï¼Œæˆ‘ä»¬éœ€è¦åœ¨è¾¹ç•Œè®¾ç½®ä¸€ä¸ªä¸œè¥¿ï¼Œè®©å®ƒèƒ½å¤Ÿæ¥æ”¶ ingress çš„æµé‡å¹¶å°†å®ƒä»¬è½¬å‘åˆ°æ­£ç¡®çš„ç«¯ç‚¹ä¸Šã€‚è¿™ä¸ªä¸œè¥¿ä¸€èˆ¬æ˜¯é«˜å¯ç”¨çš„ loadbalancerã€‚ä½¿ç”¨ Ingress èƒ½å¤Ÿå…è®¸ä½ å°† loadbalancer çš„ä¸ªæ•°é™ä½åˆ°æœ€å°‘ï¼Œä¾‹å¦‚ï¼Œå‡å¦‚ä½ æƒ³è¦åˆ›å»ºè¿™æ ·çš„ä¸€ä¸ªè®¾ç½®ï¼š\nfoo.bar.com -\u003e 178.91.123.132 -\u003e /foo s1:80 /bar s2:80 ä½ éœ€è¦ä¸€ä¸ªè¿™æ ·çš„ ingressï¼š\napiVersion: extensions/v1beta1 kind: Ingress metadata: name: test spec: rules: - host: foo.bar.com http: paths: - path: /foo backend: serviceName: s1 servicePort: 80 - path: /bar backend: serviceName: s2 servicePort: 80 ä½¿ç”¨ kubectl create -f åˆ›å»ºå®Œ ingress åï¼š\n$ kubectl get ing NAME RULE BACKEND ADDRESS test - foo.bar.com /foo s1:80 /bar s2:80 åªè¦æœåŠ¡ï¼ˆs1ï¼Œs2ï¼‰å­˜åœ¨ï¼ŒIngress controller å°±ä¼šå°†æä¾›ä¸€ä¸ªæ»¡è¶³è¯¥ Ingress çš„ç‰¹å®š loadbalancer å®ç°ã€‚ è¿™ä¸€æ­¥å®Œæˆåï¼Œæ‚¨å°†åœ¨ Ingress çš„æœ€åä¸€åˆ—çœ‹åˆ° loadbalancer çš„åœ°å€ã€‚\nåŸºäºåç§°çš„è™šæ‹Ÿä¸»æœº linkName-based çš„è™šæ‹Ÿä¸»æœºåœ¨åŒä¸€ä¸ª IP åœ°å€ä¸‹æ‹¥æœ‰å¤šä¸ªä¸»æœºåã€‚\nfoo.bar.com --| |-\u003e foo.bar.com s1:80 | 178.91.123.132 | bar.foo.com --| |-\u003e bar.foo.com s2:80 ä¸‹é¢è¿™ä¸ª ingress è¯´æ˜åŸºäº Host header çš„åç«¯ loadbalancer çš„è·¯ç”±è¯·æ±‚ï¼š\napiVersion: extensions/v1beta1 kind: Ingress metadata: name: test spec: rules: - host: foo.bar.com http: paths: - backend: serviceName: s1 servicePort: 80 - host: bar.foo.com http: paths: - backend: serviceName: s2 servicePort: 80 é»˜è®¤ backendï¼šä¸€ä¸ªæ²¡æœ‰ rule çš„ ingressï¼Œå¦‚å‰é¢ç« èŠ‚ä¸­æ‰€ç¤ºï¼Œæ‰€æœ‰æµé‡éƒ½å°†å‘é€åˆ°ä¸€ä¸ªé»˜è®¤ backendã€‚ä½ å¯ä»¥ç”¨è¯¥æŠ€å·§é€šçŸ¥ loadbalancer å¦‚ä½•æ‰¾åˆ°ä½ ç½‘ç«™çš„ 404 é¡µé¢ï¼Œé€šè¿‡åˆ¶å®šä¸€äº›åˆ— rule å’Œä¸€ä¸ªé»˜è®¤ backend çš„æ–¹å¼ã€‚å¦‚æœè¯·æ±‚ header ä¸­çš„ host ä¸èƒ½è·Ÿ ingress ä¸­çš„ host åŒ¹é…ï¼Œå¹¶ä¸” / æˆ–è¯·æ±‚çš„ URL ä¸èƒ½ä¸ä»»ä½•ä¸€ä¸ª path åŒ¹é…ï¼Œåˆ™æµé‡å°†è·¯ç”±åˆ°ä½ çš„é»˜è®¤ backendã€‚\nTLS linkä½ å¯ä»¥é€šè¿‡æŒ‡å®šåŒ…å« TLS ç§é’¥å’Œè¯ä¹¦çš„ secret æ¥åŠ å¯† Ingressã€‚ ç›®å‰ï¼ŒIngress ä»…æ”¯æŒå•ä¸ª TLS ç«¯å£ 443ï¼Œå¹¶å‡å®š TLS terminationã€‚ å¦‚æœ Ingress ä¸­çš„ TLS é…ç½®éƒ¨åˆ†æŒ‡å®šäº†ä¸åŒçš„ä¸»æœºï¼Œåˆ™å®ƒä»¬å°†æ ¹æ®é€šè¿‡ SNI TLS æ‰©å±•æŒ‡å®šçš„ä¸»æœºåï¼ˆå‡å¦‚ Ingress controller æ”¯æŒ SNIï¼‰åœ¨å¤šä¸ªç›¸åŒç«¯å£ä¸Šè¿›è¡Œå¤ç”¨ã€‚ TLS secret ä¸­å¿…é¡»åŒ…å«åä¸º tls.crt å’Œ tls.key çš„å¯†é’¥ï¼Œè¿™é‡Œé¢åŒ…å«äº†ç”¨äº TLS çš„è¯ä¹¦å’Œç§é’¥ï¼Œä¾‹å¦‚ï¼š\napiVersion: v1 data: tls.crt: base64 encoded cert tls.key: base64 encoded key kind: Secret metadata: name: testsecret namespace: default type: Opaque åœ¨ Ingress ä¸­å¼•ç”¨è¿™ä¸ª secret å°†é€šçŸ¥ Ingress controller ä½¿ç”¨ TLS åŠ å¯†ä»å°†å®¢æˆ·ç«¯åˆ° loadbalancer çš„ channelï¼š\napiVersion: extensions/v1beta1 kind: Ingress metadata: name: no-rules-map spec: tls: - secretName: testsecret backend: serviceName: s1 servicePort: 80 è¯·æ³¨æ„ï¼Œå„ç§ Ingress controller æ”¯æŒçš„ TLS åŠŸèƒ½ä¹‹é—´å­˜åœ¨å·®è·ã€‚ è¯·å‚é˜…æœ‰å…³ nginxï¼ŒGCE æˆ–ä»»ä½•å…¶ä»–å¹³å°ç‰¹å®š Ingress controller çš„æ–‡æ¡£ï¼Œä»¥äº†è§£ TLS åœ¨ä½ çš„ç¯å¢ƒä¸­çš„å·¥ä½œåŸç†ã€‚\nIngress controller å¯åŠ¨æ—¶é™„å¸¦ä¸€äº›é€‚ç”¨äºæ‰€æœ‰ Ingress çš„è´Ÿè½½å¹³è¡¡ç­–ç•¥è®¾ç½®ï¼Œä¾‹å¦‚è´Ÿè½½å‡è¡¡ç®—æ³•ï¼Œåç«¯æƒé‡æ–¹æ¡ˆç­‰ã€‚æ›´é«˜çº§çš„è´Ÿè½½å¹³è¡¡æ¦‚å¿µï¼ˆä¾‹å¦‚æŒä¹…ä¼šè¯ï¼ŒåŠ¨æ€æƒé‡ï¼‰å°šæœªåœ¨ Ingress ä¸­å…¬å¼€ã€‚ ä½ ä»ç„¶å¯ä»¥é€šè¿‡ service loadbalancer è·å–è¿™äº›åŠŸèƒ½ã€‚ éšç€æ—¶é—´çš„æ¨ç§»ï¼Œæˆ‘ä»¬è®¡åˆ’å°†é€‚ç”¨äºè·¨å¹³å°çš„è´Ÿè½½å¹³è¡¡æ¨¡å¼åŠ å…¥åˆ° Ingress èµ„æºä¸­ã€‚\nè¿˜å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå°½ç®¡å¥åº·æ£€æŸ¥ä¸ç›´æ¥é€šè¿‡ Ingress å…¬å¼€ï¼Œä½† Kubernetes ä¸­å­˜åœ¨å¹¶è¡Œæ¦‚å¿µï¼Œä¾‹å¦‚ å‡†å¤‡æ¢æŸ¥ï¼Œå¯ä»¥ä½¿ä½ è¾¾æˆç›¸åŒçš„æœ€ç»ˆç»“æœã€‚ è¯·æŸ¥çœ‹ç‰¹å®šæ§åˆ¶å™¨çš„æ–‡æ¡£ï¼Œä»¥äº†è§£ä»–ä»¬å¦‚ä½•å¤„ç†å¥åº·æ£€æŸ¥ï¼ˆnginxï¼ŒGCEï¼‰ã€‚\næ›´æ–° Ingress linkå‡å¦‚ä½ æƒ³è¦å‘å·²æœ‰çš„ ingress ä¸­å¢åŠ ä¸€ä¸ªæ–°çš„ Hostï¼Œä½ å¯ä»¥ç¼–è¾‘å’Œæ›´æ–°è¯¥ ingressï¼š\n$ kubectl get ing NAME RULE BACKEND ADDRESS test - 178.91.123.132 foo.bar.com /foo s1:80 $ kubectl edit ing test è¿™ä¼šå¼¹å‡ºä¸€ä¸ªåŒ…å«å·²æœ‰çš„ yaml æ–‡ä»¶çš„ç¼–è¾‘å™¨ï¼Œä¿®æ”¹å®ƒï¼Œå¢åŠ æ–°çš„ Host é…ç½®ã€‚\nspec: rules: - host: foo.bar.com http: paths: - backend: serviceName: s1 servicePort: 80 path: /foo - host: bar.baz.com http: paths: - backend: serviceName: s2 servicePort: 80 path: /foo .. ä¿å­˜å®ƒä¼šæ›´æ–° API server ä¸­çš„èµ„æºï¼Œè¿™ä¼šè§¦å‘ ingress controller é‡æ–°é…ç½® loadbalancerã€‚\n$ kubectl get ing NAME RULE BACKEND ADDRESS test - 178.91.123.132 foo.bar.com /foo s1:80 bar.baz.com /foo s2:80 åœ¨ä¸€ä¸ªä¿®æ”¹è¿‡çš„ ingress yaml æ–‡ä»¶ä¸Šè°ƒç”¨kubectl replace -f å‘½ä»¤ä¸€æ ·å¯ä»¥è¾¾åˆ°åŒæ ·çš„æ•ˆæœã€‚\nè·¨å¯ç”¨åŸŸæ•…éšœ linkåœ¨ä¸åŒäº‘ä¾›åº”å•†ä¹‹é—´ï¼Œè·¨æ•…éšœåŸŸçš„æµé‡ä¼ æ’­æŠ€æœ¯æœ‰æ‰€ä¸åŒã€‚ æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹ç›¸å…³ Ingress controller çš„æ–‡æ¡£ã€‚ æœ‰å…³åœ¨ federation é›†ç¾¤ä¸­éƒ¨ç½² Ingress çš„è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜… federation æ–‡æ¡£ã€‚\næœªæ¥è®¡åˆ’ link å¤šæ ·åŒ–çš„ HTTPS/TLS æ¨¡å‹æ”¯æŒï¼ˆå¦‚ SNIï¼Œre-encryptionï¼‰ é€šè¿‡å£°æ˜æ¥è¯·æ±‚ IP æˆ–è€…ä¸»æœºå ç»“åˆ L4 å’Œ L7 Ingress æ›´å¤šçš„ Ingress controller è¯·è·Ÿè¸ª L7 å’Œ Ingress çš„ proposalï¼Œäº†è§£æœ‰å…³èµ„æºæ¼”è¿›çš„æ›´å¤šç»†èŠ‚ï¼Œä»¥åŠ Ingress repositoryï¼Œäº†è§£æœ‰å…³å„ç§ Ingress controller æ¼”è¿›çš„æ›´å¤šè¯¦ç»†ä¿¡æ¯ã€‚\næ›¿ä»£æ–¹æ¡ˆ linkä½ å¯ä»¥é€šè¿‡å¾ˆå¤šç§æ–¹å¼æš´éœ² service è€Œä¸å¿…ç›´æ¥ä½¿ç”¨ ingressï¼š\nä½¿ç”¨ Service.Type=LoadBalancer ä½¿ç”¨ Service.Type=NodePort ä½¿ç”¨ Port Proxy éƒ¨ç½²ä¸€ä¸ª Service loadbalancer è¿™å…è®¸ä½ åœ¨å¤šä¸ª service ä¹‹é—´å…±äº«å•ä¸ª IPï¼Œå¹¶é€šè¿‡ Service Annotations å®ç°æ›´é«˜çº§çš„è´Ÿè½½å¹³è¡¡ã€‚ å‚è€ƒ link Kubernetes Ingress Resource - kubernetes.io ä½¿ç”¨ NGINX Plus è´Ÿè½½å‡è¡¡ Kubernetes æœåŠ¡ - dockone.io ä½¿ç”¨ NGINX å’Œ NGINX Plus çš„ Ingress Controller è¿›è¡Œ Kubernetes çš„è´Ÿè½½å‡è¡¡ - cnblogs.com "
            }
        );
    index.add(
            {
                id:  23 ,
                href: "\/docs\/information\/software\/cloud\/auth\/networkpolicy\/",
                title: "NetworkPolicy",
                description: "ç½‘ç»œç­–ç•¥è¯´æ˜ä¸€ç»„ Pod ä¹‹é—´æ˜¯å¦‚ä½•è¢«å…è®¸äº’ç›¸é€šä¿¡ï¼Œä»¥åŠå¦‚ä½•ä¸å…¶å®ƒç½‘ç»œ Endpoint è¿›è¡Œé€šä¿¡ã€‚ NetworkPolicy èµ„æºä½¿ç”¨æ ‡ç­¾æ¥é€‰æ‹© Podï¼Œå¹¶å®šä¹‰äº†ä¸€äº›è§„åˆ™ï¼Œè¿™äº›è§„åˆ™æŒ‡æ˜å…è®¸ä»€ä¹ˆæµé‡è¿›å…¥åˆ°é€‰ä¸­çš„ Pod ä¸Šã€‚å…³äº Network Policy çš„è¯¦ç»†ç”¨æ³•è¯·å‚è€ƒ Kubernetes å®˜ç½‘ã€‚\nNetwork Policy çš„ä½œç”¨å¯¹è±¡æ˜¯ Podï¼Œä¹Ÿå¯ä»¥åº”ç”¨åˆ° Namespace å’Œé›†ç¾¤çš„ Ingressã€Egress æµé‡ã€‚Network Policy æ˜¯ä½œç”¨åœ¨ L3/4 å±‚çš„ï¼Œå³é™åˆ¶çš„æ˜¯å¯¹ IP åœ°å€å’Œç«¯å£çš„è®¿é—®ï¼Œå¦‚æœéœ€è¦å¯¹åº”ç”¨å±‚åšè®¿é—®é™åˆ¶éœ€è¦ä½¿ç”¨å¦‚ Istio è¿™ç±» Service Meshã€‚\n",
                content: "ç½‘ç»œç­–ç•¥è¯´æ˜ä¸€ç»„ Pod ä¹‹é—´æ˜¯å¦‚ä½•è¢«å…è®¸äº’ç›¸é€šä¿¡ï¼Œä»¥åŠå¦‚ä½•ä¸å…¶å®ƒç½‘ç»œ Endpoint è¿›è¡Œé€šä¿¡ã€‚ NetworkPolicy èµ„æºä½¿ç”¨æ ‡ç­¾æ¥é€‰æ‹© Podï¼Œå¹¶å®šä¹‰äº†ä¸€äº›è§„åˆ™ï¼Œè¿™äº›è§„åˆ™æŒ‡æ˜å…è®¸ä»€ä¹ˆæµé‡è¿›å…¥åˆ°é€‰ä¸­çš„ Pod ä¸Šã€‚å…³äº Network Policy çš„è¯¦ç»†ç”¨æ³•è¯·å‚è€ƒ Kubernetes å®˜ç½‘ã€‚\nNetwork Policy çš„ä½œç”¨å¯¹è±¡æ˜¯ Podï¼Œä¹Ÿå¯ä»¥åº”ç”¨åˆ° Namespace å’Œé›†ç¾¤çš„ Ingressã€Egress æµé‡ã€‚Network Policy æ˜¯ä½œç”¨åœ¨ L3/4 å±‚çš„ï¼Œå³é™åˆ¶çš„æ˜¯å¯¹ IP åœ°å€å’Œç«¯å£çš„è®¿é—®ï¼Œå¦‚æœéœ€è¦å¯¹åº”ç”¨å±‚åšè®¿é—®é™åˆ¶éœ€è¦ä½¿ç”¨å¦‚ Istio è¿™ç±» Service Meshã€‚\nå‰ææ¡ä»¶ linkç½‘ç»œç­–ç•¥é€šè¿‡ç½‘ç»œæ’ä»¶æ¥å®ç°ï¼Œæ‰€ä»¥å¿…é¡»ä½¿ç”¨ä¸€ç§æ”¯æŒ NetworkPolicy çš„ç½‘ç»œæ–¹æ¡ˆï¼ˆå¦‚ calicoï¼‰â€”â€” é Controller åˆ›å»ºçš„èµ„æºï¼Œæ˜¯ä¸èµ·ä½œç”¨çš„ã€‚\néš”ç¦»çš„ä¸æœªéš”ç¦»çš„ Pod linké»˜è®¤ Pod æ˜¯æœªéš”ç¦»çš„ï¼Œå®ƒä»¬å¯ä»¥ä»ä»»ä½•çš„æºæ¥æ”¶è¯·æ±‚ã€‚ å…·æœ‰ä¸€ä¸ªå¯ä»¥é€‰æ‹© Pod çš„ç½‘ç»œç­–ç•¥åï¼ŒPod å°±ä¼šå˜æˆéš”ç¦»çš„ã€‚ ä¸€æ—¦ Namespace ä¸­é…ç½®çš„ç½‘ç»œç­–ç•¥èƒ½å¤Ÿé€‰æ‹©ä¸€ä¸ªç‰¹å®šçš„ Podï¼Œè¿™ä¸ª Pod å°†æ‹’ç»ä»»ä½•è¯¥ç½‘ç»œç­–ç•¥ä¸å…è®¸çš„è¿æ¥ã€‚ï¼ˆNamespace ä¸­å…¶å®ƒæœªè¢«ç½‘ç»œç­–ç•¥é€‰ä¸­çš„ Pod å°†ç»§ç»­æ¥æ”¶æ‰€æœ‰æµé‡ï¼‰\nNetworkPolicy èµ„æº linkä¸‹é¢æ˜¯ä¸€ä¸ª NetworkPolicy çš„ä¾‹å­ï¼š\napiVersion: networking.k8s.io/v1 kind: NetworkPolicy metadata: name: test-network-policy namespace: default spec: podSelector: matchLabels: role: db policyTypes: - Ingress - Egress ingress: - from: - ipBlock: cidr: 172.17.0.0/16 except: - 172.17.1.0/24 - namespaceSelector: matchLabels: project: myproject - podSelector: matchLabels: role: frontend ports: - protocol: TCP port: 6379 egress: - to: - ipBlock: cidr: 10.0.0.0/24 ports: - protocol: TCP port: 5978 å°†ä¸Šé¢é…ç½® POST åˆ° API Server å°†ä¸èµ·ä»»ä½•ä½œç”¨ï¼Œé™¤éé€‰æ‹©çš„ç½‘ç»œæ–¹æ¡ˆæ”¯æŒç½‘ç»œç­–ç•¥ã€‚\nå¿…é€‰å­—æ®µï¼šåƒæ‰€æœ‰å…¶å®ƒ Kubernetes é…ç½®ä¸€æ ·ï¼Œ NetworkPolicy éœ€è¦ apiVersionã€kind å’Œ metadata è¿™ä¸‰ä¸ªå­—æ®µï¼Œå…³äºå¦‚ä½•ä½¿ç”¨é…ç½®æ–‡ä»¶çš„åŸºæœ¬ä¿¡æ¯ï¼Œå¯ä»¥æŸ¥çœ‹ è¿™é‡Œã€‚\nspecï¼šNetworkPolicy spec å…·æœ‰åœ¨ç»™å®š Namespace ä¸­å®šä¹‰ç‰¹å®šç½‘ç»œçš„å…¨éƒ¨ä¿¡æ¯ã€‚\npodSelectorï¼šæ¯ä¸ª NetworkPolicy åŒ…å«ä¸€ä¸ª podSelectorï¼Œå®ƒå¯ä»¥é€‰æ‹©ä¸€ç»„åº”ç”¨äº†ç½‘ç»œç­–ç•¥çš„ Podã€‚ç”±äº NetworkPolicy å½“å‰åªæ”¯æŒå®šä¹‰ ingress è§„åˆ™ï¼Œè¿™ä¸ª podSelector å®é™…ä¸Šä¸ºè¯¥ç­–ç•¥å®šä¹‰äº†ä¸€ç»„ â€œç›®æ ‡Podâ€ã€‚ç¤ºä¾‹ä¸­çš„ç­–ç•¥é€‰æ‹©äº†æ ‡ç­¾ä¸º â€œrole=dbâ€ çš„ Podã€‚ä¸€ä¸ªç©ºçš„ podSelector é€‰æ‹©äº†è¯¥ Namespace ä¸­çš„æ‰€æœ‰ Podã€‚\ningressï¼šæ¯ä¸ªNetworkPolicy åŒ…å«äº†ä¸€ä¸ªç™½åå• ingress è§„åˆ™åˆ—è¡¨ã€‚æ¯ä¸ªè§„åˆ™åªå…è®¸èƒ½å¤ŸåŒ¹é…ä¸Š from å’Œ portsé…ç½®æ®µçš„æµé‡ã€‚ç¤ºä¾‹ç­–ç•¥åŒ…å«äº†å•ä¸ªè§„åˆ™ï¼Œå®ƒä»è¿™ä¸¤ä¸ªæºä¸­åŒ¹é…åœ¨å•ä¸ªç«¯å£ä¸Šçš„æµé‡ï¼Œç¬¬ä¸€ä¸ªæ˜¯é€šè¿‡namespaceSelector æŒ‡å®šçš„ï¼Œç¬¬äºŒä¸ªæ˜¯é€šè¿‡ podSelector æŒ‡å®šçš„ã€‚\negressï¼šæ¯ä¸ªNetworkPolicy åŒ…å«äº†ä¸€ä¸ªç™½åå• ingress è§„åˆ™åˆ—è¡¨ã€‚æ¯ä¸ªè§„åˆ™åªå…è®¸èƒ½å¤ŸåŒ¹é…ä¸Š to å’Œ portsé…ç½®æ®µçš„æµé‡ã€‚ç¤ºä¾‹ç­–ç•¥åŒ…å«äº†å•ä¸ªè§„åˆ™ï¼Œå®ƒåŒ¹é…ç›®çš„åœ° 10.0.0.0/24 å•ä¸ªç«¯å£çš„æµé‡ã€‚\nå› æ­¤ï¼Œä¸Šé¢ç¤ºä¾‹çš„ NetworkPolicyï¼š\nåœ¨ â€œdefaultâ€ Namespaceä¸­ éš”ç¦»äº†æ ‡ç­¾ â€œrole=dbâ€ çš„ Podï¼ˆå¦‚æœä»–ä»¬è¿˜æ²¡æœ‰è¢«éš”ç¦»ï¼‰ åœ¨ â€œdefaultâ€ Namespaceä¸­ï¼Œå…è®¸ä»»ä½•å…·æœ‰ â€œrole=frontendâ€ çš„ Podï¼ŒIP èŒƒå›´åœ¨ 172.17.0.0â€“172.17.0.255 å’Œ 172.17.2.0â€“172.17.255.255ï¼ˆæ•´ä¸ª 172.17.0.0/16 æ®µï¼Œ 172.17.1.0/24 é™¤å¤–ï¼‰è¿æ¥åˆ°æ ‡ç­¾ä¸º â€œrole=dbâ€ çš„ Pod çš„ TCP ç«¯å£ 6379 å…è®¸åœ¨ Namespace ä¸­ä»»ä½•å…·æœ‰æ ‡ç­¾ â€œproject=myprojectâ€ ï¼ŒIPèŒƒå›´åœ¨10.0.0.0/24æ®µçš„ Podï¼Œè¿æ¥åˆ° â€œdefaultâ€ Namespace ä¸­æ ‡ç­¾ä¸º â€œrole=dbâ€ çš„ Pod çš„ TCP ç«¯å£ 5978 æŸ¥çœ‹ NetworkPolicy å…¥é—¨æŒ‡å—ç»™å‡ºçš„æ›´è¿›ä¸€æ­¥çš„ä¾‹å­ã€‚\né»˜è®¤ç­–ç•¥ linké€šè¿‡åˆ›å»ºä¸€ä¸ªå¯ä»¥é€‰æ‹©æ‰€æœ‰ Pod ä½†ä¸å…è®¸ä»»ä½•æµé‡çš„ NetworkPolicyï¼Œä½ å¯ä»¥ä¸ºä¸€ä¸ª Namespace åˆ›å»ºä¸€ä¸ª â€œé»˜è®¤çš„â€ éš”ç¦»ç­–ç•¥ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š\napiVersion: networking.k8s.io/v1 kind: NetworkPolicy metadata: name: default-deny spec: podSelector: è¿™ç¡®ä¿äº†å³ä½¿æ˜¯æ²¡æœ‰è¢«ä»»ä½• NetworkPolicy é€‰ä¸­çš„ Podï¼Œå°†ä»ç„¶æ˜¯è¢«éš”ç¦»çš„ã€‚\nå¯é€‰åœ°ï¼Œåœ¨ Namespace ä¸­ï¼Œå¦‚æœä½ æƒ³å…è®¸æ‰€æœ‰çš„æµé‡è¿›å…¥åˆ°æ‰€æœ‰çš„ Podï¼ˆå³ä½¿å·²ç»æ·»åŠ äº†æŸäº›ç­–ç•¥ï¼Œä½¿ä¸€äº› Pod è¢«å¤„ç†ä¸º â€œéš”ç¦»çš„â€ï¼‰ï¼Œä½ å¯ä»¥é€šè¿‡åˆ›å»ºä¸€ä¸ªç­–ç•¥æ¥æ˜¾å¼åœ°æŒ‡å®šå…è®¸æ‰€æœ‰æµé‡ï¼š\napiVersion: networking.k8s.io/v1 kind: NetworkPolicy metadata: name: allow-all spec: podSelector: ingress: - {} å‚è€ƒ link Network Policies - kubernetes.io "
            }
        );
    index.add(
            {
                id:  24 ,
                href: "\/docs\/information\/software\/cloud\/k8s_rs_manager\/node\/",
                title: "Node",
                description: "Node æ˜¯ Kubernetes é›†ç¾¤çš„å·¥ä½œèŠ‚ç‚¹ï¼Œå¯ä»¥æ˜¯ç‰©ç†æœºä¹Ÿå¯ä»¥æ˜¯è™šæ‹Ÿæœºã€‚\nNode çš„çŠ¶æ€ linkNode åŒ…æ‹¬å¦‚ä¸‹çŠ¶æ€ä¿¡æ¯ï¼š\nAddress HostNameï¼šå¯ä»¥è¢« kubelet ä¸­çš„ --hostname-override å‚æ•°æ›¿ä»£ã€‚ ExternalIPï¼šå¯ä»¥è¢«é›†ç¾¤å¤–éƒ¨è·¯ç”±åˆ°çš„ IP åœ°å€ã€‚ InternalIPï¼šé›†ç¾¤å†…éƒ¨ä½¿ç”¨çš„ IPï¼Œé›†ç¾¤å¤–éƒ¨æ— æ³•è®¿é—®ã€‚ Condition OutOfDiskï¼šç£ç›˜ç©ºé—´ä¸è¶³æ—¶ä¸º True Readyï¼šNode controller 40 ç§’å†…æ²¡æœ‰æ”¶åˆ° node çš„çŠ¶æ€æŠ¥å‘Šä¸º Unknownï¼Œå¥åº·ä¸º Trueï¼Œå¦åˆ™ä¸º Falseã€‚ MemoryPressureï¼šå½“ node æœ‰å†…å­˜å‹åŠ›æ—¶ä¸º Trueï¼Œå¦åˆ™ä¸º Falseã€‚ DiskPressureï¼šå½“ node æœ‰ç£ç›˜å‹åŠ›æ—¶ä¸º Trueï¼Œå¦åˆ™ä¸º Falseã€‚ Capacity CPU å†…å­˜ å¯è¿è¡Œçš„æœ€å¤§ Pod ä¸ªæ•° Infoï¼šèŠ‚ç‚¹çš„ä¸€äº›ç‰ˆæœ¬ä¿¡æ¯ï¼Œå¦‚ OSã€kubernetesã€docker ç­‰ Node ç®¡ç† linkç¦æ­¢ Pod è°ƒåº¦åˆ°è¯¥èŠ‚ç‚¹ä¸Šã€‚\nkubectl cordon é©±é€è¯¥èŠ‚ç‚¹ä¸Šçš„æ‰€æœ‰ Podã€‚\nkubectl drain è¯¥å‘½ä»¤ä¼šåˆ é™¤è¯¥èŠ‚ç‚¹ä¸Šçš„æ‰€æœ‰ Podï¼ˆDaemonSet é™¤å¤–ï¼‰ï¼Œåœ¨å…¶ä»– node ä¸Šé‡æ–°å¯åŠ¨å®ƒä»¬ï¼Œé€šå¸¸è¯¥èŠ‚ç‚¹éœ€è¦ç»´æŠ¤æ—¶ä½¿ç”¨è¯¥å‘½ä»¤ã€‚ç›´æ¥ä½¿ç”¨è¯¥å‘½ä»¤ä¼šè‡ªåŠ¨è°ƒç”¨kubectl cordon å‘½ä»¤ã€‚å½“è¯¥èŠ‚ç‚¹ç»´æŠ¤å®Œæˆï¼Œå¯åŠ¨äº† kubelet åï¼Œå†ä½¿ç”¨kubectl uncordon å³å¯å°†è¯¥èŠ‚ç‚¹æ·»åŠ åˆ° kubernetes é›†ç¾¤ä¸­ã€‚\n",
                content: "Node æ˜¯ Kubernetes é›†ç¾¤çš„å·¥ä½œèŠ‚ç‚¹ï¼Œå¯ä»¥æ˜¯ç‰©ç†æœºä¹Ÿå¯ä»¥æ˜¯è™šæ‹Ÿæœºã€‚\nNode çš„çŠ¶æ€ linkNode åŒ…æ‹¬å¦‚ä¸‹çŠ¶æ€ä¿¡æ¯ï¼š\nAddress HostNameï¼šå¯ä»¥è¢« kubelet ä¸­çš„ --hostname-override å‚æ•°æ›¿ä»£ã€‚ ExternalIPï¼šå¯ä»¥è¢«é›†ç¾¤å¤–éƒ¨è·¯ç”±åˆ°çš„ IP åœ°å€ã€‚ InternalIPï¼šé›†ç¾¤å†…éƒ¨ä½¿ç”¨çš„ IPï¼Œé›†ç¾¤å¤–éƒ¨æ— æ³•è®¿é—®ã€‚ Condition OutOfDiskï¼šç£ç›˜ç©ºé—´ä¸è¶³æ—¶ä¸º True Readyï¼šNode controller 40 ç§’å†…æ²¡æœ‰æ”¶åˆ° node çš„çŠ¶æ€æŠ¥å‘Šä¸º Unknownï¼Œå¥åº·ä¸º Trueï¼Œå¦åˆ™ä¸º Falseã€‚ MemoryPressureï¼šå½“ node æœ‰å†…å­˜å‹åŠ›æ—¶ä¸º Trueï¼Œå¦åˆ™ä¸º Falseã€‚ DiskPressureï¼šå½“ node æœ‰ç£ç›˜å‹åŠ›æ—¶ä¸º Trueï¼Œå¦åˆ™ä¸º Falseã€‚ Capacity CPU å†…å­˜ å¯è¿è¡Œçš„æœ€å¤§ Pod ä¸ªæ•° Infoï¼šèŠ‚ç‚¹çš„ä¸€äº›ç‰ˆæœ¬ä¿¡æ¯ï¼Œå¦‚ OSã€kubernetesã€docker ç­‰ Node ç®¡ç† linkç¦æ­¢ Pod è°ƒåº¦åˆ°è¯¥èŠ‚ç‚¹ä¸Šã€‚\nkubectl cordon é©±é€è¯¥èŠ‚ç‚¹ä¸Šçš„æ‰€æœ‰ Podã€‚\nkubectl drain è¯¥å‘½ä»¤ä¼šåˆ é™¤è¯¥èŠ‚ç‚¹ä¸Šçš„æ‰€æœ‰ Podï¼ˆDaemonSet é™¤å¤–ï¼‰ï¼Œåœ¨å…¶ä»– node ä¸Šé‡æ–°å¯åŠ¨å®ƒä»¬ï¼Œé€šå¸¸è¯¥èŠ‚ç‚¹éœ€è¦ç»´æŠ¤æ—¶ä½¿ç”¨è¯¥å‘½ä»¤ã€‚ç›´æ¥ä½¿ç”¨è¯¥å‘½ä»¤ä¼šè‡ªåŠ¨è°ƒç”¨kubectl cordon å‘½ä»¤ã€‚å½“è¯¥èŠ‚ç‚¹ç»´æŠ¤å®Œæˆï¼Œå¯åŠ¨äº† kubelet åï¼Œå†ä½¿ç”¨kubectl uncordon å³å¯å°†è¯¥èŠ‚ç‚¹æ·»åŠ åˆ° kubernetes é›†ç¾¤ä¸­ã€‚\n"
            }
        );
    index.add(
            {
                id:  25 ,
                href: "\/docs\/information\/software\/cloud\/storage\/volume\/",
                title: "Volume",
                description: "å®¹å™¨ç£ç›˜ä¸Šçš„æ–‡ä»¶çš„ç”Ÿå‘½å‘¨æœŸæ˜¯çŸ­æš‚çš„ï¼Œè¿™å°±ä½¿å¾—åœ¨å®¹å™¨ä¸­è¿è¡Œé‡è¦åº”ç”¨æ—¶ä¼šå‡ºç°ä¸€äº›é—®é¢˜ã€‚é¦–å…ˆï¼Œå½“å®¹å™¨å´©æºƒæ—¶ï¼Œkubelet ä¼šé‡å¯å®ƒï¼Œä½†æ˜¯å®¹å™¨ä¸­çš„æ–‡ä»¶å°†ä¸¢å¤±â€”â€”å®¹å™¨ä»¥å¹²å‡€çš„çŠ¶æ€ï¼ˆé•œåƒæœ€åˆçš„çŠ¶æ€ï¼‰é‡æ–°å¯åŠ¨ã€‚å…¶æ¬¡ï¼Œåœ¨ Pod ä¸­åŒæ—¶è¿è¡Œå¤šä¸ªå®¹å™¨æ—¶ï¼Œè¿™äº›å®¹å™¨ä¹‹é—´é€šå¸¸éœ€è¦å…±äº«æ–‡ä»¶ã€‚Kubernetes ä¸­çš„ Volume æŠ½è±¡å°±å¾ˆå¥½çš„è§£å†³äº†è¿™äº›é—®é¢˜ã€‚\nå»ºè®®å…ˆç†Ÿæ‚‰ podã€‚\nèƒŒæ™¯ linkDocker ä¸­ä¹Ÿæœ‰ä¸€ä¸ª volume çš„æ¦‚å¿µï¼Œå°½ç®¡å®ƒç¨å¾®å®½æ¾ä¸€äº›ï¼Œç®¡ç†ä¹Ÿå¾ˆå°‘ã€‚åœ¨ Docker ä¸­ï¼Œå·å°±åƒæ˜¯ç£ç›˜æˆ–æ˜¯å¦ä¸€ä¸ªå®¹å™¨ä¸­çš„ä¸€ä¸ªç›®å½•ã€‚å®ƒçš„ç”Ÿå‘½å‘¨æœŸä¸å—ç®¡ç†ï¼Œç›´åˆ°æœ€è¿‘æ‰æœ‰äº† local-disk-backed å·ã€‚Docker ç°åœ¨æä¾›äº†å·é©±åŠ¨ç¨‹åºï¼Œä½†æ˜¯åŠŸèƒ½è¿˜éå¸¸æœ‰é™ï¼ˆä¾‹å¦‚Docker1.7åªå…è®¸æ¯ä¸ªå®¹å™¨ä½¿ç”¨ä¸€ä¸ªå·é©±åŠ¨ï¼Œå¹¶ä¸”æ— æ³•ç»™å·ä¼ é€’å‚æ•°ï¼‰ã€‚\n",
                content: "å®¹å™¨ç£ç›˜ä¸Šçš„æ–‡ä»¶çš„ç”Ÿå‘½å‘¨æœŸæ˜¯çŸ­æš‚çš„ï¼Œè¿™å°±ä½¿å¾—åœ¨å®¹å™¨ä¸­è¿è¡Œé‡è¦åº”ç”¨æ—¶ä¼šå‡ºç°ä¸€äº›é—®é¢˜ã€‚é¦–å…ˆï¼Œå½“å®¹å™¨å´©æºƒæ—¶ï¼Œkubelet ä¼šé‡å¯å®ƒï¼Œä½†æ˜¯å®¹å™¨ä¸­çš„æ–‡ä»¶å°†ä¸¢å¤±â€”â€”å®¹å™¨ä»¥å¹²å‡€çš„çŠ¶æ€ï¼ˆé•œåƒæœ€åˆçš„çŠ¶æ€ï¼‰é‡æ–°å¯åŠ¨ã€‚å…¶æ¬¡ï¼Œåœ¨ Pod ä¸­åŒæ—¶è¿è¡Œå¤šä¸ªå®¹å™¨æ—¶ï¼Œè¿™äº›å®¹å™¨ä¹‹é—´é€šå¸¸éœ€è¦å…±äº«æ–‡ä»¶ã€‚Kubernetes ä¸­çš„ Volume æŠ½è±¡å°±å¾ˆå¥½çš„è§£å†³äº†è¿™äº›é—®é¢˜ã€‚\nå»ºè®®å…ˆç†Ÿæ‚‰ podã€‚\nèƒŒæ™¯ linkDocker ä¸­ä¹Ÿæœ‰ä¸€ä¸ª volume çš„æ¦‚å¿µï¼Œå°½ç®¡å®ƒç¨å¾®å®½æ¾ä¸€äº›ï¼Œç®¡ç†ä¹Ÿå¾ˆå°‘ã€‚åœ¨ Docker ä¸­ï¼Œå·å°±åƒæ˜¯ç£ç›˜æˆ–æ˜¯å¦ä¸€ä¸ªå®¹å™¨ä¸­çš„ä¸€ä¸ªç›®å½•ã€‚å®ƒçš„ç”Ÿå‘½å‘¨æœŸä¸å—ç®¡ç†ï¼Œç›´åˆ°æœ€è¿‘æ‰æœ‰äº† local-disk-backed å·ã€‚Docker ç°åœ¨æä¾›äº†å·é©±åŠ¨ç¨‹åºï¼Œä½†æ˜¯åŠŸèƒ½è¿˜éå¸¸æœ‰é™ï¼ˆä¾‹å¦‚Docker1.7åªå…è®¸æ¯ä¸ªå®¹å™¨ä½¿ç”¨ä¸€ä¸ªå·é©±åŠ¨ï¼Œå¹¶ä¸”æ— æ³•ç»™å·ä¼ é€’å‚æ•°ï¼‰ã€‚\nå¦ä¸€æ–¹é¢ï¼ŒKubernetes ä¸­çš„å·æœ‰æ˜ç¡®çš„å¯¿å‘½â€”â€”ä¸å°è£…å®ƒçš„ Pod ç›¸åŒã€‚æ‰€ä»¥ï¼Œå·çš„ç”Ÿå‘½æ¯” Pod ä¸­çš„æ‰€æœ‰å®¹å™¨éƒ½é•¿ï¼Œå½“è¿™ä¸ªå®¹å™¨é‡å¯æ—¶æ•°æ®ä»ç„¶å¾—ä»¥ä¿å­˜ã€‚å½“ç„¶ï¼Œå½“ Pod ä¸å†å­˜åœ¨æ—¶ï¼Œå·ä¹Ÿå°†ä¸å¤å­˜åœ¨ã€‚ä¹Ÿè®¸æ›´é‡è¦çš„æ˜¯ï¼ŒKubernetes æ”¯æŒå¤šç§ç±»å‹çš„å·ï¼ŒPod å¯ä»¥åŒæ—¶ä½¿ç”¨ä»»æ„æ•°é‡çš„å·ã€‚\nå·çš„æ ¸å¿ƒæ˜¯ç›®å½•ï¼Œå¯èƒ½è¿˜åŒ…å«äº†ä¸€äº›æ•°æ®ï¼Œå¯ä»¥é€šè¿‡ pod ä¸­çš„å®¹å™¨æ¥è®¿é—®ã€‚è¯¥ç›®å½•æ˜¯å¦‚ä½•å½¢æˆçš„ã€æ”¯æŒè¯¥ç›®å½•çš„ä»‹è´¨ä»¥åŠå…¶å†…å®¹å–å†³äºæ‰€ä½¿ç”¨çš„ç‰¹å®šå·ç±»å‹ã€‚\nè¦ä½¿ç”¨å·ï¼Œéœ€è¦ä¸º pod æŒ‡å®šä¸ºå·ï¼ˆspec.volumes å­—æ®µï¼‰ä»¥åŠå°†å®ƒæŒ‚è½½åˆ°å®¹å™¨çš„ä½ç½®ï¼ˆspec.containers.volumeMounts å­—æ®µï¼‰ã€‚\nå®¹å™¨ä¸­çš„è¿›ç¨‹çœ‹åˆ°çš„æ˜¯ç”±å…¶ Docker é•œåƒå’Œå·ç»„æˆçš„æ–‡ä»¶ç³»ç»Ÿè§†å›¾ã€‚Docker é•œåƒä½äºæ–‡ä»¶ç³»ç»Ÿå±‚æ¬¡ç»“æ„çš„æ ¹ç›®å½•ï¼Œä»»ä½•å·éƒ½è¢«æŒ‚è½½åœ¨é•œåƒçš„æŒ‡å®šè·¯å¾„ä¸­ã€‚å·æ— æ³•æŒ‚è½½åˆ°å…¶ä»–å·ä¸Šæˆ–ä¸å…¶ä»–å·æœ‰ç¡¬è¿æ¥ã€‚Pod ä¸­çš„æ¯ä¸ªå®¹å™¨éƒ½å¿…é¡»ç‹¬ç«‹æŒ‡å®šæ¯ä¸ªå·çš„æŒ‚è½½ä½ç½®ã€‚\nå·çš„ç±»å‹ linkKubernetes æ”¯æŒä»¥ä¸‹ç±»å‹çš„å·ï¼š\nawsElasticBlockStore azureDisk azureFile cephfs csi downwardAPI emptyDir fc (fibre channel) flocker gcePersistentDisk gitRepo glusterfs hostPath iscsi local nfs persistentVolumeClaim projected portworxVolume quobyte rbd scaleIO secret storageos vsphereVolume æˆ‘ä»¬æ¬¢è¿é¢å¤–è´¡çŒ®ã€‚\nawsElasticBlockStore linkawsElasticBlockStore å·å°†Amazon Web Servicesï¼ˆAWSï¼‰EBS Volume æŒ‚è½½åˆ°æ‚¨çš„å®¹å™¨ä¸­ã€‚ä¸ emptyDir ç±»å‹ä¼šåœ¨åˆ é™¤ Pod æ—¶è¢«æ¸…é™¤ä¸åŒï¼ŒEBS å·çš„çš„å†…å®¹ä¼šä¿ç•™ä¸‹æ¥ï¼Œä»…ä»…æ˜¯è¢«å¸è½½ã€‚è¿™æ„å‘³ç€ EBS å·å¯ä»¥é¢„å…ˆå¡«å……æ•°æ®ï¼Œå¹¶ä¸”å¯ä»¥åœ¨æ•°æ®åŒ…ä¹‹é—´â€œåˆ‡æ¢â€æ•°æ®ã€‚\né‡è¦æç¤ºï¼šæ‚¨å¿…é¡»ä½¿ç”¨ aws ec2 create-volume æˆ– AWS API åˆ›å»º EBS å·ï¼Œæ‰èƒ½ä½¿ç”¨å®ƒã€‚\nä½¿ç”¨ awsElasticBlockStore å·æ—¶æœ‰ä¸€äº›é™åˆ¶ï¼š\nè¿è¡Œ Pod çš„èŠ‚ç‚¹å¿…é¡»æ˜¯ AWS EC2 å®ä¾‹ è¿™äº›å®ä¾‹éœ€è¦ä¸ EBS å·ä½äºç›¸åŒçš„åŒºåŸŸå’Œå¯ç”¨åŒºåŸŸ EBS ä»…æ”¯æŒå·å’Œ EC2 å®ä¾‹çš„ä¸€å¯¹ä¸€çš„æŒ‚è½½ åˆ›å»º EBS å· linkåœ¨ pod ä¸­ä½¿ç”¨çš„ EBS å·ä¹‹å‰ï¼Œæ‚¨éœ€è¦å…ˆåˆ›å»ºå®ƒã€‚\naws ec2 create-volume --availability-zone=eu-west-1a --size=10 --volume-type=gp2 ç¡®ä¿åŒºåŸŸä¸æ‚¨å¯åŠ¨é›†ç¾¤çš„åŒºåŸŸç›¸åŒ¹é…ï¼ˆå¹¶ä¸”æ£€æŸ¥å¤§å°å’Œ EBS å·ç±»å‹æ˜¯å¦é€‚åˆæ‚¨çš„ä½¿ç”¨ï¼ï¼‰\nAWS EBS ç¤ºä¾‹é…ç½® link apiVersion: v1 kind: Pod metadata: name: test-ebs spec: containers: - image: k8s.gcr.io/test-webserver name: test-container volumeMounts: - mountPath: /test-ebs name: test-volume volumes: - name: test-volume # This AWS EBS volume must already exist. awsElasticBlockStore: volumeID: fsType: ext4 azureDisk linkAzureDisk ç”¨äºå°† Microsoft Azure Data Disk æŒ‚è½½åˆ° Pod ä¸­ã€‚\nazureFile linkazureFile ç”¨äºå°† Microsoft Azure File Volumeï¼ˆSMB 2.1 å’Œ 3.0ï¼‰æŒ‚è½½åˆ° Pod ä¸­ã€‚\ncephfs linkcephfs å·å…è®¸å°†ç°æœ‰çš„ CephFS å·æŒ‚è½½åˆ°æ‚¨çš„å®¹å™¨ä¸­ã€‚ä¸åƒ emptyDirï¼Œå½“åˆ é™¤ Pod æ—¶è¢«åˆ é™¤ï¼Œcephfs å·çš„å†…å®¹å°†è¢«ä¿ç•™ï¼Œå·ä»…ä»…æ˜¯è¢«å¸è½½ã€‚è¿™æ„å‘³ç€ CephFS å·å¯ä»¥é¢„å…ˆå¡«å……æ•°æ®ï¼Œå¹¶ä¸”å¯ä»¥åœ¨æ•°æ®åŒ…ä¹‹é—´â€œåˆ‡æ¢â€æ•°æ®ã€‚ CephFS å¯ä»¥è¢«å¤šä¸ªå†™è®¾å¤‡åŒæ—¶æŒ‚è½½ã€‚\né‡è¦æç¤ºï¼šæ‚¨å¿…é¡»å…ˆæ‹¥æœ‰è‡ªå·±çš„ Ceph æœåŠ¡å™¨ï¼Œç„¶åæ‰èƒ½ä½¿ç”¨å®ƒã€‚\ncsi linkCSI ä»£è¡¨å®¹å™¨å­˜å‚¨æ¥å£ï¼ŒCSI è¯•å›¾å»ºç«‹ä¸€ä¸ªè¡Œä¸šæ ‡å‡†æ¥å£çš„è§„èŒƒï¼Œå€ŸåŠ© CSI å®¹å™¨ç¼–æ’ç³»ç»Ÿï¼ˆCOï¼‰å¯ä»¥å°†ä»»æ„å­˜å‚¨ç³»ç»Ÿæš´éœ²ç»™è‡ªå·±çš„å®¹å™¨å·¥ä½œè´Ÿè½½ã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹è®¾è®¡æ–¹æ¡ˆã€‚\ncsi å·ç±»å‹æ˜¯ä¸€ç§ in-tree çš„ CSI å·æ’ä»¶ï¼Œç”¨äº Pod ä¸åœ¨åŒä¸€èŠ‚ç‚¹ä¸Šè¿è¡Œçš„å¤–éƒ¨ CSI å·é©±åŠ¨ç¨‹åºäº¤äº’ã€‚éƒ¨ç½² CSI å…¼å®¹å·é©±åŠ¨åï¼Œç”¨æˆ·å¯ä»¥ä½¿ç”¨ csi ä½œä¸ºå·ç±»å‹æ¥æŒ‚è½½é©±åŠ¨æä¾›çš„å­˜å‚¨ã€‚\nCSI æŒä¹…åŒ–å·æ”¯æŒæ˜¯åœ¨ Kubernetes v1.9 ä¸­å¼•å…¥çš„ï¼Œä½œä¸ºä¸€ä¸ª alpha ç‰¹æ€§ï¼Œå¿…é¡»ç”±é›†ç¾¤ç®¡ç†å‘˜æ˜ç¡®å¯ç”¨ã€‚æ¢å¥è¯è¯´ï¼Œé›†ç¾¤ç®¡ç†å‘˜éœ€è¦åœ¨ apiserverã€controller-manager å’Œ kubelet ç»„ä»¶çš„ â€œ--feature-gates =â€ æ ‡å¿—ä¸­åŠ ä¸Š â€œCSIPersistentVolume = trueâ€ã€‚\nCSI æŒä¹…åŒ–å·å…·æœ‰ä»¥ä¸‹å­—æ®µå¯ä¾›ç”¨æˆ·æŒ‡å®šï¼š\ndriverï¼šä¸€ä¸ªå­—ç¬¦ä¸²å€¼ï¼ŒæŒ‡å®šè¦ä½¿ç”¨çš„å·é©±åŠ¨ç¨‹åºçš„åç§°ã€‚å¿…é¡»å°‘äº 63 ä¸ªå­—ç¬¦ï¼Œå¹¶ä»¥ä¸€ä¸ªå­—ç¬¦å¼€å¤´ã€‚é©±åŠ¨ç¨‹åºåç§°å¯ä»¥åŒ…å« â€œ.â€ã€â€œ- â€ã€â€œ_â€ æˆ–æ•°å­—ã€‚ volumeHandleï¼šä¸€ä¸ªå­—ç¬¦ä¸²å€¼ï¼Œå”¯ä¸€æ ‡è¯†ä» CSI å·æ’ä»¶çš„ CreateVolume è°ƒç”¨è¿”å›çš„å·åã€‚éšååœ¨å·é©±åŠ¨ç¨‹åºçš„æ‰€æœ‰åç»­è°ƒç”¨ä¸­ä½¿ç”¨å·å¥æŸ„æ¥å¼•ç”¨è¯¥å·ã€‚ readOnlyï¼šä¸€ä¸ªå¯é€‰çš„å¸ƒå°”å€¼ï¼ŒæŒ‡ç¤ºå·æ˜¯å¦è¢«å‘å¸ƒä¸ºåªè¯»ã€‚é»˜è®¤æ˜¯ falseã€‚ downwardAPI linkdownwardAPI å·ç”¨äºä½¿å‘ä¸‹ API æ•°æ®ï¼ˆdownward API dataï¼‰å¯¹åº”ç”¨ç¨‹åºå¯ç”¨ã€‚å®ƒæŒ‚è½½ä¸€ä¸ªç›®å½•ï¼Œå¹¶å°†è¯·æ±‚çš„æ•°æ®å†™å…¥çº¯æ–‡æœ¬æ–‡ä»¶ã€‚\nå‚è€ƒ downwardAPI å·ç¤ºä¾‹æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯ã€‚\nemptyDir linkå½“ Pod è¢«åˆ†é…ç»™èŠ‚ç‚¹æ—¶ï¼Œé¦–å…ˆåˆ›å»º emptyDir å·ï¼Œå¹¶ä¸”åªè¦è¯¥ Pod åœ¨è¯¥èŠ‚ç‚¹ä¸Šè¿è¡Œï¼Œè¯¥å·å°±ä¼šå­˜åœ¨ã€‚æ­£å¦‚å·çš„åå­—æ‰€è¿°ï¼Œå®ƒæœ€åˆæ˜¯ç©ºçš„ã€‚Pod ä¸­çš„å®¹å™¨å¯ä»¥è¯»å–å’Œå†™å…¥ emptyDir å·ä¸­çš„ç›¸åŒæ–‡ä»¶ï¼Œå°½ç®¡è¯¥å·å¯ä»¥æŒ‚è½½åˆ°æ¯ä¸ªå®¹å™¨ä¸­çš„ç›¸åŒæˆ–ä¸åŒè·¯å¾„ä¸Šã€‚å½“å‡ºäºä»»ä½•åŸå› ä»èŠ‚ç‚¹ä¸­åˆ é™¤ Pod æ—¶ï¼ŒemptyDir ä¸­çš„æ•°æ®å°†è¢«æ°¸ä¹…åˆ é™¤ã€‚\næ³¨æ„ï¼šå®¹å™¨å´©æºƒä¸ä¼šä»èŠ‚ç‚¹ä¸­ç§»é™¤ podï¼Œå› æ­¤ emptyDir å·ä¸­çš„æ•°æ®åœ¨å®¹å™¨å´©æºƒæ—¶æ˜¯å®‰å…¨çš„ã€‚\nemptyDir çš„ç”¨æ³•æœ‰ï¼š\næš‚å­˜ç©ºé—´ï¼Œä¾‹å¦‚ç”¨äºåŸºäºç£ç›˜çš„åˆå¹¶æ’åº ç”¨ä½œé•¿æ—¶é—´è®¡ç®—å´©æºƒæ¢å¤æ—¶çš„æ£€æŸ¥ç‚¹ WebæœåŠ¡å™¨å®¹å™¨æä¾›æ•°æ®æ—¶ï¼Œä¿å­˜å†…å®¹ç®¡ç†å™¨å®¹å™¨æå–çš„æ–‡ä»¶ Pod ç¤ºä¾‹ link apiVersion: v1 kind: Pod metadata: name: test-pd spec: containers: - image: k8s.gcr.io/test-webserver name: test-container volumeMounts: - mountPath: /cache name: cache-volume volumes: - name: cache-volume emptyDir: {} fc (fibre channel) linkfc å·å…è®¸å°†ç°æœ‰çš„ fc å·æŒ‚è½½åˆ° pod ä¸­ã€‚æ‚¨å¯ä»¥ä½¿ç”¨å·é…ç½®ä¸­çš„ targetWWN å‚æ•°æŒ‡å®šå•ä¸ªæˆ–å¤šä¸ªç›®æ ‡å…¨çƒé€šç”¨åç§°ï¼ˆWorld Wide Nameï¼‰ã€‚å¦‚æœæŒ‡å®šäº†å¤šä¸ª WWNï¼Œåˆ™ targetWWN æœŸæœ›è¿™äº› WWN æ¥è‡ªå¤šè·¯å¾„è¿æ¥ã€‚\né‡è¦æç¤ºï¼šæ‚¨å¿…é¡»é…ç½® FC SAN åŒºåŸŸåˆ’åˆ†ï¼Œå¹¶é¢„å…ˆå°†è¿™äº› LUNï¼ˆå·ï¼‰åˆ†é…å¹¶å±è”½åˆ°ç›®æ ‡ WWNï¼Œä»¥ä¾¿ Kubernetes ä¸»æœºå¯ä»¥è®¿é—®å®ƒä»¬ã€‚\nå‚è€ƒ FC ç¤ºä¾‹è·å–è¯¦ç»†ä¿¡æ¯ã€‚\nflocker linkFlocker æ˜¯ä¸€æ¬¾å¼€æºçš„é›†ç¾¤å®¹å™¨æ•°æ®å·ç®¡ç†å™¨ã€‚å®ƒæä¾›äº†ç”±å„ç§å­˜å‚¨åç«¯æ”¯æŒçš„æ•°æ®å·çš„ç®¡ç†å’Œç¼–æ’ã€‚\nflocker å…è®¸å°† Flocker æ•°æ®é›†æŒ‚è½½åˆ° pod ä¸­ã€‚å¦‚æœæ•°æ®é›†åœ¨ Flocker ä¸­ä¸å­˜åœ¨ï¼Œåˆ™éœ€è¦å…ˆä½¿ç”¨ Flocker CLI æˆ–ä½¿ç”¨ Flocker API åˆ›å»ºæ•°æ®é›†ã€‚å¦‚æœæ•°æ®é›†å·²ç»å­˜åœ¨ï¼Œå®ƒå°†è¢« Flocker é‡æ–°è¿æ¥åˆ° pod è¢«è°ƒåº¦çš„èŠ‚ç‚¹ä¸Šã€‚è¿™æ„å‘³ç€æ•°æ®å¯ä»¥æ ¹æ®éœ€è¦åœ¨æ•°æ®åŒ…ä¹‹é—´â€œåˆ‡æ¢â€ã€‚\né‡è¦æç¤ºï¼šæ‚¨å¿…é¡»å…ˆè¿è¡Œè‡ªå·±çš„ Flocker å®‰è£…ç¨‹åºæ‰èƒ½ä½¿ç”¨å®ƒã€‚\nå‚è€ƒ Flocker ç¤ºä¾‹è·å–æ›´å¤šè¯¦ç»†ä¿¡æ¯ã€‚\ngcePersistentDisk linkgcePersistentDisk å·å°† Google Compute Engineï¼ˆGCEï¼‰Persistent Disk æŒ‚è½½åˆ°æ‚¨çš„å®¹å™¨ä¸­ã€‚ä¸åˆ é™¤ Pod æ—¶åˆ é™¤çš„ emptyDir ä¸åŒï¼ŒPD çš„å†…å®¹è¢«ä¿ç•™ï¼Œåªæ˜¯å¸è½½äº†å·ã€‚è¿™æ„å‘³ç€ PD å¯ä»¥é¢„å…ˆå¡«å……æ•°æ®ï¼Œå¹¶ä¸”æ•°æ®å¯ä»¥åœ¨ Pod ä¹‹é—´â€œåˆ‡æ¢â€ã€‚\né‡è¦æç¤ºï¼šæ‚¨å¿…é¡»å…ˆä½¿ç”¨ gcloud æˆ– GCE API æˆ– UI åˆ›å»ºä¸€ä¸ª PDï¼Œç„¶åæ‰èƒ½ä½¿ç”¨å®ƒã€‚\nä½¿ç”¨ gcePersistentDisk æ—¶æœ‰ä¸€äº›é™åˆ¶ï¼š\nè¿è¡Œ Pod çš„èŠ‚ç‚¹å¿…é¡»æ˜¯ GCE è™šæ‹Ÿæœº é‚£äº›è™šæ‹Ÿæœºéœ€è¦åœ¨ä¸ PD ä¸€æ ·åœ¨ GCE é¡¹ç›®å’ŒåŒºåŸŸä¸­ PD çš„ä¸€ä¸ªç‰¹ç‚¹æ˜¯å®ƒä»¬å¯ä»¥åŒæ—¶è¢«å¤šä¸ªç”¨æˆ·ä»¥åªè¯»æ–¹å¼æŒ‚è½½ã€‚è¿™æ„å‘³ç€æ‚¨å¯ä»¥é¢„å…ˆä½¿ç”¨æ‚¨çš„æ•°æ®é›†å¡«å…… PDï¼Œç„¶åæ ¹æ®éœ€è¦ç»™å¤šä¸ª Pod ä¸­å¹¶è¡Œæä¾›ã€‚ä¸å¹¸çš„æ˜¯ï¼Œåªèƒ½ç”±å•ä¸ªæ¶ˆè´¹è€…ä»¥è¯»å†™æ¨¡å¼æŒ‚è½½ PDï¼Œè€Œä¸å…è®¸åŒæ—¶å†™å…¥ã€‚ åœ¨ç”± ReplicationController æ§åˆ¶çš„ pod ä¸Šä½¿ç”¨ PD å°†ä¼šå¤±è´¥ï¼Œé™¤é PD æ˜¯åªè¯»çš„æˆ–è€…å‰¯æœ¬æ•°æ˜¯ 0 æˆ– 1ã€‚\nåˆ›å»º PD linkåœ¨æ‚¨åœ¨ pod ä¸­ä½¿ç”¨ GCE PD ä¹‹å‰ï¼Œéœ€è¦å…ˆåˆ›å»ºå®ƒã€‚\ngcloud compute disks create --size=500GB --zone=us-central1-a my-data-disk Pod ç¤ºä¾‹ link apiVersion: v1 kind: Pod metadata: name: test-pd spec: containers: - image: k8s.gcr.io/test-webserver name: test-container volumeMounts: - mountPath: /test-pd name: test-volume volumes: - name: test-volume # This GCE PD must already exist. gcePersistentDisk: pdName: my-data-disk fsType: ext4 gitRepo linkgitRepo å·æ˜¯ä¸€ä¸ªå¯ä»¥æ¼”ç¤ºå·æ’ä»¶åŠŸèƒ½çš„ç¤ºä¾‹ã€‚å®ƒä¼šæŒ‚è½½ä¸€ä¸ªç©ºç›®å½•å¹¶å°† git å­˜å‚¨åº“å…‹éš†åˆ°æ‚¨çš„å®¹å™¨ä¸­ã€‚å°†æ¥ï¼Œè¿™æ ·çš„å·å¯èƒ½ä¼šè½¬ç§»åˆ°ä¸€ä¸ªæ›´åŠ åˆ†ç¦»çš„æ¨¡å‹ï¼Œè€Œä¸æ˜¯ä¸ºæ¯ä¸ªè¿™æ ·çš„ç”¨ä¾‹æ‰©å±• Kubernetes APIã€‚\nä¸‹é¢æ˜¯ gitRepo å·ç¤ºä¾‹ï¼š\napiVersion: v1 kind: Pod metadata: name: server spec: containers: - image: nginx name: nginx volumeMounts: - mountPath: /mypath name: git-volume volumes: - name: git-volume gitRepo: repository: \"git@somewhere:me/my-git-repository.git\" revision: \"22f1d8406d464b0c0874075539c1f2e96c253775\" glusterfs linkglusterfs å·å…è®¸å°† Glusterfsï¼ˆä¸€ä¸ªå¼€æ”¾æºä»£ç çš„ç½‘ç»œæ–‡ä»¶ç³»ç»Ÿï¼‰å·æŒ‚è½½åˆ°æ‚¨çš„é›†ç¾¤ä¸­ã€‚ä¸åˆ é™¤ Pod æ—¶åˆ é™¤çš„ emptyDir ä¸åŒï¼Œglusterfs å·çš„å†…å®¹å°†è¢«ä¿ç•™ï¼Œè€Œå·ä»…ä»…è¢«å¸è½½ã€‚è¿™æ„å‘³ç€ glusterfs å·å¯ä»¥é¢„å…ˆå¡«å……æ•°æ®ï¼Œå¹¶ä¸”å¯ä»¥åœ¨æ•°æ®åŒ…ä¹‹é—´â€œåˆ‡æ¢â€æ•°æ®ã€‚ GlusterFS å¯ä»¥åŒæ—¶ç”±å¤šä¸ªå†™å…¥æŒ‚è½½ã€‚\né‡è¦æç¤ºï¼šæ‚¨å¿…é¡»å…ˆè‡ªè¡Œå®‰è£… GlusterFSï¼Œæ‰èƒ½ä½¿ç”¨å®ƒã€‚\nhostPath linkhostPath å·å°†ä¸»æœºèŠ‚ç‚¹çš„æ–‡ä»¶ç³»ç»Ÿä¸­çš„æ–‡ä»¶æˆ–ç›®å½•æŒ‚è½½åˆ°é›†ç¾¤ä¸­ã€‚è¯¥åŠŸèƒ½å¤§å¤šæ•° Pod éƒ½ç”¨ä¸åˆ°ï¼Œä½†å®ƒä¸ºæŸäº›åº”ç”¨ç¨‹åºæä¾›äº†ä¸€ä¸ªå¼ºå¤§çš„è§£å†³æ–¹æ³•ã€‚\nä¾‹å¦‚ï¼ŒhostPath çš„ç”¨é€”å¦‚ä¸‹ï¼š\nè¿è¡Œéœ€è¦è®¿é—® Docker å†…éƒ¨çš„å®¹å™¨ï¼›ä½¿ç”¨ /var/lib/docker çš„ hostPath åœ¨å®¹å™¨ä¸­è¿è¡Œ cAdvisorï¼›ä½¿ç”¨ /dev/cgroups çš„ hostPath å…è®¸ pod æŒ‡å®šç»™å®šçš„ hostPath æ˜¯å¦åº”è¯¥åœ¨ pod è¿è¡Œä¹‹å‰å­˜åœ¨ï¼Œæ˜¯å¦åº”è¯¥åˆ›å»ºï¼Œä»¥åŠå®ƒåº”è¯¥ä»¥ä»€ä¹ˆå½¢å¼å­˜åœ¨ é™¤äº†æ‰€éœ€çš„ path å±æ€§ä¹‹å¤–ï¼Œç”¨æˆ·è¿˜å¯ä»¥ä¸º hostPath å·æŒ‡å®š typeã€‚\ntype å­—æ®µæ”¯æŒä»¥ä¸‹å€¼ï¼š\nå€¼ è¡Œä¸º ç©ºå­—ç¬¦ä¸²ï¼ˆé»˜è®¤ï¼‰ç”¨äºå‘åå…¼å®¹ï¼Œè¿™æ„å‘³ç€åœ¨æŒ‚è½½ hostPath å·ä¹‹å‰ä¸ä¼šæ‰§è¡Œä»»ä½•æ£€æŸ¥ã€‚ DirectoryOrCreate å¦‚æœåœ¨ç»™å®šçš„è·¯å¾„ä¸Šæ²¡æœ‰ä»»ä½•ä¸œè¥¿å­˜åœ¨ï¼Œé‚£ä¹ˆå°†æ ¹æ®éœ€è¦åœ¨é‚£é‡Œåˆ›å»ºä¸€ä¸ªç©ºç›®å½•ï¼Œæƒé™è®¾ç½®ä¸º 0755ï¼Œä¸ Kubelet å…·æœ‰ç›¸åŒçš„ç»„å’Œæ‰€æœ‰æƒã€‚ Directory ç»™å®šçš„è·¯å¾„ä¸‹å¿…é¡»å­˜åœ¨ç›®å½• FileOrCreate å¦‚æœåœ¨ç»™å®šçš„è·¯å¾„ä¸Šæ²¡æœ‰ä»»ä½•ä¸œè¥¿å­˜åœ¨ï¼Œé‚£ä¹ˆä¼šæ ¹æ®éœ€è¦åˆ›å»ºä¸€ä¸ªç©ºæ–‡ä»¶ï¼Œæƒé™è®¾ç½®ä¸º 0644ï¼Œä¸ Kubelet å…·æœ‰ç›¸åŒçš„ç»„å’Œæ‰€æœ‰æƒã€‚ File ç»™å®šçš„è·¯å¾„ä¸‹å¿…é¡»å­˜åœ¨æ–‡ä»¶ Socket ç»™å®šçš„è·¯å¾„ä¸‹å¿…é¡»å­˜åœ¨ UNIX å¥—æ¥å­— CharDevice ç»™å®šçš„è·¯å¾„ä¸‹å¿…é¡»å­˜åœ¨å­—ç¬¦è®¾å¤‡ BlockDevice ç»™å®šçš„è·¯å¾„ä¸‹å¿…é¡»å­˜åœ¨å—è®¾å¤‡ ä½¿ç”¨è¿™ç§å·ç±»å‹æ˜¯è¯·æ³¨æ„ï¼Œå› ä¸ºï¼š\nç”±äºæ¯ä¸ªèŠ‚ç‚¹ä¸Šçš„æ–‡ä»¶éƒ½ä¸åŒï¼Œå…·æœ‰ç›¸åŒé…ç½®ï¼ˆä¾‹å¦‚ä» podTemplate åˆ›å»ºçš„ï¼‰çš„ pod åœ¨ä¸åŒèŠ‚ç‚¹ä¸Šçš„è¡Œä¸ºå¯èƒ½ä¼šæœ‰æ‰€ä¸åŒ å½“ Kubernetes æŒ‰ç…§è®¡åˆ’æ·»åŠ èµ„æºæ„ŸçŸ¥è°ƒåº¦æ—¶ï¼Œå°†æ— æ³•è€ƒè™‘ hostPath ä½¿ç”¨çš„èµ„æº åœ¨åº•å±‚ä¸»æœºä¸Šåˆ›å»ºçš„æ–‡ä»¶æˆ–ç›®å½•åªèƒ½ç”± root å†™å…¥ã€‚æ‚¨éœ€è¦åœ¨ç‰¹æƒå®¹å™¨ä¸­ä»¥ root èº«ä»½è¿è¡Œè¿›ç¨‹ï¼Œæˆ–ä¿®æ”¹ä¸»æœºä¸Šçš„æ–‡ä»¶æƒé™ä»¥ä¾¿å†™å…¥ hostPath å· Pod ç¤ºä¾‹ link apiVersion: v1 kind: Pod metadata: name: test-pd spec: containers: - image: k8s.gcr.io/test-webserver name: test-container volumeMounts: - mountPath: /test-pd name: test-volume volumes: - name: test-volume hostPath: # directory location on host path: /data # this field is optional type: Directory iscsi linkiscsi å·å…è®¸å°†ç°æœ‰çš„ iSCSIï¼ˆSCSI over IPï¼‰å·æŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ä¸åƒ emptyDirï¼Œåˆ é™¤ Pod æ—¶ iscsi å·çš„å†…å®¹å°†è¢«ä¿ç•™ï¼Œå·ä»…ä»…æ˜¯è¢«å¸è½½ã€‚è¿™æ„å‘³ç€ iscsi å·å¯ä»¥é¢„å…ˆå¡«å……æ•°æ®ï¼Œå¹¶ä¸”è¿™äº›æ•°æ®å¯ä»¥åœ¨ pod ä¹‹é—´â€œåˆ‡æ¢â€ã€‚\né‡è¦æç¤ºï¼šå¿…é¡»å…ˆåˆ›å»ºè‡ªå·±çš„ iSCSI æœåŠ¡å™¨ï¼Œç„¶åæ‰èƒ½ä½¿ç”¨å®ƒã€‚\niSCSI çš„ä¸€ä¸ªç‰¹ç‚¹æ˜¯å®ƒå¯ä»¥åŒæ—¶è¢«å¤šä¸ªç”¨æˆ·ä»¥åªè¯»æ–¹å¼å®‰è£…ã€‚è¿™æ„å‘³ç€æ‚¨å¯ä»¥é¢„å…ˆä½¿ç”¨æ‚¨çš„æ•°æ®é›†å¡«å……å·ï¼Œç„¶åæ ¹æ®éœ€è¦å‘å¤šä¸ªé¢ pod åŒæ—¶æä¾›ã€‚ä¸å¹¸çš„æ˜¯ï¼ŒiSCSI å·åªèƒ½ç”±å•ä¸ªä½¿ç”¨è€…ä»¥è¯»å†™æ¨¡å¼æŒ‚è½½â€”â€”ä¸å…è®¸åŒæ—¶å†™å…¥ã€‚\nlocal linkè¿™ä¸ª alpha åŠŸèƒ½è¦æ±‚å¯ç”¨ PersistentLocalVolumes feature gateã€‚\næ³¨æ„ï¼šä» 1.9 å¼€å§‹ï¼ŒVolumeScheduling feature gate ä¹Ÿå¿…é¡»å¯ç”¨ã€‚\nlocal å·è¡¨ç¤ºæŒ‚è½½çš„æœ¬åœ°å­˜å‚¨è®¾å¤‡ï¼Œå¦‚ç£ç›˜ã€åˆ†åŒºæˆ–ç›®å½•ã€‚\næœ¬åœ°å·åªèƒ½ç”¨ä½œé™æ€åˆ›å»ºçš„ PersistentVolumeã€‚\nä¸ HostPath å·ç›¸æ¯”ï¼Œlocal å·å¯ä»¥ä»¥æŒä¹…çš„æ–¹å¼ä½¿ç”¨ï¼Œè€Œæ— éœ€æ‰‹åŠ¨å°† pod è°ƒåº¦åˆ°èŠ‚ç‚¹ä¸Šï¼Œå› ä¸ºç³»ç»Ÿä¼šé€šè¿‡æŸ¥çœ‹ PersistentVolume ä¸Šçš„èŠ‚ç‚¹å…³è”æ€§æ¥äº†è§£å·çš„èŠ‚ç‚¹çº¦æŸã€‚\nä½†æ˜¯ï¼Œlocal å·ä»ç„¶å—åº•å±‚èŠ‚ç‚¹çš„å¯ç”¨æ€§å½±å“ï¼Œå¹¶ä¸é€‚ç”¨äºæ‰€æœ‰åº”ç”¨ç¨‹åºã€‚\nä»¥ä¸‹æ˜¯ä½¿ç”¨ local å·çš„ç¤ºä¾‹ PersistentVolume è§„èŒƒï¼š\napiVersion: v1 kind: PersistentVolume metadata: name: example-pv annotations: \"volume.alpha.kubernetes.io/node-affinity\": '{ \"requiredDuringSchedulingIgnoredDuringExecution\": { \"nodeSelectorTerms\": [ { \"matchExpressions\": [ { \"key\": \"kubernetes.io/hostname\", \"operator\": \"In\", \"values\": [\"example-node\"] } ]} ]} }' spec: capacity: storage: 100Gi accessModes: - ReadWriteOnce persistentVolumeReclaimPolicy: Delete storageClassName: local-storage local: path: /mnt/disks/ssd1 æ³¨æ„ï¼šæœ¬åœ° PersistentVolume æ¸…ç†å’Œåˆ é™¤éœ€è¦æ‰‹åŠ¨å¹²é¢„ï¼Œæ— å¤–éƒ¨æä¾›ç¨‹åºã€‚\nä» 1.9 å¼€å§‹ï¼Œæœ¬åœ°å·ç»‘å®šå¯ä»¥è¢«å»¶è¿Ÿï¼Œç›´åˆ°é€šè¿‡å…·æœ‰ StorageClass ä¸­çš„ WaitForFirstConsumer è®¾ç½®ä¸ºvolumeBindingMode çš„ pod å¼€å§‹è°ƒåº¦ã€‚è¯·å‚é˜…ç¤ºä¾‹ã€‚å»¶è¿Ÿå·ç»‘å®šå¯ç¡®ä¿å·ç»‘å®šå†³ç­–ä¹Ÿå¯ä»¥ä½¿ç”¨ä»»ä½•å…¶ä»–èŠ‚ç‚¹çº¦æŸï¼ˆä¾‹å¦‚èŠ‚ç‚¹èµ„æºéœ€æ±‚ï¼ŒèŠ‚ç‚¹é€‰æ‹©å™¨ï¼Œpod äº²å’Œæ€§å’Œ pod åäº²å’Œæ€§ï¼‰è¿›è¡Œè¯„ä¼°ã€‚\næœ‰å…³ local å·ç±»å‹çš„è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è§æœ¬åœ°æŒä¹…åŒ–å­˜å‚¨ç”¨æˆ·æŒ‡å—ã€‚\nnfs linknfs å·å…è®¸å°†ç°æœ‰çš„ NFSï¼ˆç½‘ç»œæ–‡ä»¶ç³»ç»Ÿï¼‰å…±äº«æŒ‚è½½åˆ°æ‚¨çš„å®¹å™¨ä¸­ã€‚ä¸åƒ emptyDirï¼Œå½“åˆ é™¤ Pod æ—¶ï¼Œnfs å·çš„å†…å®¹è¢«ä¿ç•™ï¼Œå·ä»…ä»…æ˜¯è¢«å¸è½½ã€‚è¿™æ„å‘³ç€ NFS å·å¯ä»¥é¢„å¡«å……æ•°æ®ï¼Œå¹¶ä¸”å¯ä»¥åœ¨ pod ä¹‹é—´â€œåˆ‡æ¢â€æ•°æ®ã€‚ NFS å¯ä»¥è¢«å¤šä¸ªå†™å…¥è€…åŒæ—¶æŒ‚è½½ã€‚\né‡è¦æç¤ºï¼šæ‚¨å¿…é¡»å…ˆæ‹¥æœ‰è‡ªå·±çš„ NFS æœåŠ¡å™¨æ‰èƒ½ä½¿ç”¨å®ƒï¼Œç„¶åæ‰èƒ½ä½¿ç”¨å®ƒã€‚\næœ‰å…³æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è§ NFS ç¤ºä¾‹ã€‚\npersistentVolumeClaim linkpersistentVolumeClaim å·ç”¨äºå°† PersistentVolume æŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚PersistentVolumes æ˜¯åœ¨ç”¨æˆ·ä¸çŸ¥é“ç‰¹å®šäº‘ç¯å¢ƒçš„ç»†èŠ‚çš„æƒ…å†µä¸‹â€œå£°æ˜â€æŒä¹…åŒ–å­˜å‚¨ï¼ˆä¾‹å¦‚ GCE PersistentDisk æˆ– iSCSI å·ï¼‰çš„ä¸€ç§æ–¹å¼ã€‚\næœ‰å…³æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜… PersistentVolumes ç¤ºä¾‹ã€‚\nprojected linkprojected å·å°†å‡ ä¸ªç°æœ‰çš„å·æºæ˜ å°„åˆ°åŒä¸€ä¸ªç›®å½•ä¸­ã€‚\nç›®å‰ï¼Œå¯ä»¥æ˜ å°„ä»¥ä¸‹ç±»å‹çš„å·æ¥æºï¼š\nsecret downwardAPI configMap æ‰€æœ‰æ¥æºéƒ½å¿…é¡»åœ¨ä¸ pod ç›¸åŒçš„å‘½åç©ºé—´ä¸­ã€‚\nå¸¦æœ‰ secretã€downward API å’Œ configmap çš„ pod link apiVersion: v1 kind: Pod metadata: name: volume-test spec: containers: - name: container-test image: busybox volumeMounts: - name: all-in-one mountPath: \"/projected-volume\" readOnly: true volumes: - name: all-in-one projected: sources: - secret: name: mysecret items: - key: username path: my-group/my-username - downwardAPI: items: - path: \"labels\" fieldRef: fieldPath: metadata.labels - path: \"cpu_limit\" resourceFieldRef: containerName: container-test resource: limits.cpu - configMap: name: myconfigmap items: - key: config path: my-group/my-config ä½¿ç”¨éé»˜è®¤æƒé™æ¨¡å¼è®¾ç½®å¤šä¸ª secret çš„ç¤ºä¾‹ pod link apiVersion: v1 kind: Pod metadata: name: volume-test spec: containers: - name: container-test image: busybox volumeMounts: - name: all-in-one mountPath: \"/projected-volume\" readOnly: true volumes: - name: all-in-one projected: sources: - secret: name: mysecret items: - key: username path: my-group/my-username - secret: name: mysecret2 items: - key: password path: my-group/my-password mode: 511 æ¯ä¸ªæ˜ å°„çš„å·æ¥æºåœ¨ sources ä¸‹çš„è§„æ ¼ä¸­åˆ—å‡ºã€‚é™¤äº†ä»¥ä¸‹ä¸¤ä¸ªä¾‹å¤–ï¼Œå‚æ•°å‡ ä¹ç›¸åŒï¼š\nå¯¹äº secretï¼ŒsecretName å­—æ®µå·²ç»è¢«æ›´æ”¹ä¸º name ä»¥ä¸ ConfigMap å‘½åä¸€è‡´ã€‚ defaultMode åªèƒ½åœ¨æ˜ å°„çº§åˆ«æŒ‡å®šï¼Œè€Œä¸èƒ½é’ˆå¯¹æ¯ä¸ªå·æºæŒ‡å®šã€‚ä½†æ˜¯ï¼Œå¦‚ä¸Šæ‰€è¿°ï¼Œæ‚¨å¯ä»¥æ˜ç¡®è®¾ç½®æ¯ä¸ªæ˜ å°„çš„ modeã€‚ portworxVolume linkportworxVolume æ˜¯ä¸€ä¸ªä¸ Kubernetes ä¸€èµ·ï¼Œä»¥è¶…èåˆæ¨¡å¼è¿è¡Œçš„å¼¹æ€§å—å­˜å‚¨å±‚ã€‚Portwork æŒ‡çº¹å­˜å‚¨åœ¨æœåŠ¡å™¨ä¸­ï¼ŒåŸºäºåŠŸèƒ½çš„åˆ†å±‚ï¼Œä»¥åŠè·¨å¤šä¸ªæœåŠ¡å™¨èšåˆå®¹é‡ã€‚ Portworx åœ¨è™šæ‹Ÿæœºæˆ–è£¸æœº Linux èŠ‚ç‚¹ä¸Šè¿è¡Œã€‚\nportworxVolume å¯ä»¥é€šè¿‡ Kubernetes åŠ¨æ€åˆ›å»ºï¼Œä¹Ÿå¯ä»¥åœ¨ Kubernetes pod ä¸­é¢„å…ˆè®¾ç½®å’Œå¼•ç”¨ã€‚\nä»¥ä¸‹æ˜¯ä¸€ä¸ªå¼•ç”¨é¢„å…ˆé…ç½®çš„ PortworxVolume çš„ç¤ºä¾‹ podï¼š\napiVersion: v1 kind: Pod metadata: name: test-portworx-volume-pod spec: containers: - image: k8s.gcr.io/test-webserver name: test-container volumeMounts: - mountPath: /mnt name: pxvol volumes: - name: pxvol # This Portworx volume must already exist. portworxVolume: volumeID: \"pxvol\" fsType: \"\" é‡è¦æç¤ºï¼šåœ¨ pod ä¸­ä½¿ç”¨ä¹‹å‰ï¼Œè¯·ç¡®ä¿æ‚¨æœ‰ä¸€ä¸ªåä¸º pxvol çš„ç°æœ‰ PortworxVolumeã€‚\nquobyte linkquobyte å·å…è®¸å°†ç°æœ‰çš„ Quobyte å·æŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚\né‡è¦æç¤ºï¼šæ‚¨å¿…é¡»å…ˆåˆ›å»ºè‡ªå·±çš„ Quobyte å®‰è£…ç¨‹åºï¼Œç„¶åæ‰èƒ½ä½¿ç”¨å®ƒã€‚\nrbd linkrbd å·å…è®¸å°† Rados Block Device å·æŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ä¸åƒ emptyDirï¼Œåˆ é™¤ Pod æ—¶ rbd å·çš„å†…å®¹è¢«ä¿ç•™ï¼Œå·ä»…ä»…è¢«å¸è½½ã€‚è¿™æ„å‘³ç€ RBD å·å¯ä»¥é¢„å…ˆå¡«å……æ•°æ®ï¼Œå¹¶ä¸”å¯ä»¥åœ¨ pod ä¹‹é—´â€œåˆ‡æ¢â€æ•°æ®ã€‚\né‡è¦æç¤ºï¼šæ‚¨å¿…é¡»å…ˆè‡ªè¡Œå®‰è£… Cephï¼Œç„¶åæ‰èƒ½ä½¿ç”¨ RBDã€‚\nRBD çš„ä¸€ä¸ªç‰¹ç‚¹æ˜¯å®ƒå¯ä»¥åŒæ—¶ä¸ºå¤šä¸ªç”¨æˆ·ä»¥åªè¯»æ–¹å¼æŒ‚è½½ã€‚è¿™æ„å‘³ç€å¯ä»¥é¢„å…ˆä½¿ç”¨æ‚¨çš„æ•°æ®é›†å¡«å……å·ï¼Œç„¶åæ ¹æ®éœ€è¦åŒæ—¶ä¸ºå¤šä¸ª pod å¹¶è¡Œæä¾›ã€‚ä¸å¹¸çš„æ˜¯ï¼ŒRBD å·åªèƒ½ç”±å•ä¸ªç”¨æˆ·ä»¥è¯»å†™æ¨¡å¼å®‰è£…â€”â€”ä¸å…è®¸åŒæ—¶å†™å…¥ã€‚\nscaleIO linkScaleIO æ˜¯ä¸€ä¸ªåŸºäºè½¯ä»¶çš„å­˜å‚¨å¹³å°ï¼Œå¯ä»¥ä½¿ç”¨ç°æœ‰çš„ç¡¬ä»¶æ¥åˆ›å»ºå¯æ‰©å±•çš„å…±äº«å—ç½‘ç»œå­˜å‚¨é›†ç¾¤ã€‚scaleIO å·æ’ä»¶å…è®¸å·²éƒ¨ç½²çš„ pod è®¿é—®ç°æœ‰çš„ ScaleIO å·ï¼ˆæˆ–è€…å®ƒå¯ä»¥ä¸ºæŒä¹…æ€§å·å£°æ˜åŠ¨æ€è°ƒé…æ–°å·ï¼Œè¯·å‚é˜… ScaleIO æŒä¹…å·ï¼‰ã€‚\né‡è¦æç¤ºï¼šæ‚¨å¿…é¡»æœ‰ä¸€ä¸ªå·²ç»é…ç½®å¥½çš„ ScaleIO é›†ç¾¤ï¼Œå¹¶å’Œåˆ›å»ºçš„å·ä¸€åŒè¿è¡Œï¼Œç„¶åæ‰èƒ½ä½¿ç”¨å®ƒä»¬ã€‚\nä»¥ä¸‹æ˜¯ä½¿ç”¨ ScaleIO çš„ç¤ºä¾‹ pod é…ç½®ï¼š\napiVersion: v1 kind: Pod metadata: name: pod-0 spec: containers: - image: k8s.gcr.io/test-webserver name: pod-0 volumeMounts: - mountPath: /test-pd name: vol-0 volumes: - name: vol-0 scaleIO: gateway: https://localhost:443/api system: scaleio protectionDomain: sd0 storagePool: sp1 volumeName: vol-0 secretRef: name: sio-secret fsType: xfs æœ‰å…³æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜… ScaleIO ç¤ºä¾‹ã€‚\nsecret linksecret å·ç”¨äºå°†æ•æ„Ÿä¿¡æ¯ï¼ˆå¦‚å¯†ç ï¼‰ä¼ é€’åˆ° podã€‚æ‚¨å¯ä»¥å°† secret å­˜å‚¨åœ¨ Kubernetes API ä¸­ï¼Œå¹¶å°†å®ƒä»¬æŒ‚è½½ä¸ºæ–‡ä»¶ï¼Œä»¥ä¾› Pod ä½¿ç”¨ï¼Œè€Œæ— éœ€ç›´æ¥è¿æ¥åˆ° Kubernetesã€‚ secret å·ç”± tmpfsï¼ˆä¸€ä¸ª RAM æ”¯æŒçš„æ–‡ä»¶ç³»ç»Ÿï¼‰æ”¯æŒï¼Œæ‰€ä»¥å®ƒä»¬æ°¸è¿œä¸ä¼šå†™å…¥éæ˜“å¤±æ€§å­˜å‚¨å™¨ã€‚\né‡è¦æç¤ºï¼šæ‚¨å¿…é¡»å…ˆåœ¨ Kubernetes API ä¸­åˆ›å»ºä¸€ä¸ª secretï¼Œç„¶åæ‰èƒ½ä½¿ç”¨å®ƒã€‚\nstorageOS linkstorageos å·å…è®¸å°†ç°æœ‰çš„ StorageOS å·æŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚\nStorageOS åœ¨ Kubernetes ç¯å¢ƒä¸­ä»¥å®¹å™¨æ–¹å¼è¿è¡Œï¼Œä½¿æœ¬åœ°æˆ–é™„åŠ å­˜å‚¨å¯ä»¥ä» Kubernetes é›†ç¾¤ä¸­çš„ä»»ä½•èŠ‚ç‚¹è®¿é—®ã€‚å¯ä»¥å¤åˆ¶æ•°æ®ä»¥é˜²æ­¢èŠ‚ç‚¹æ•…éšœã€‚ç²¾ç®€é…ç½®å’Œå‹ç¼©å¯ä»¥æé«˜åˆ©ç”¨ç‡å¹¶é™ä½æˆæœ¬ã€‚\nStorageOS çš„æ ¸å¿ƒæ˜¯ä¸ºå®¹å™¨æä¾›å—å­˜å‚¨ï¼Œå¯ä»¥é€šè¿‡æ–‡ä»¶ç³»ç»Ÿè®¿é—®ã€‚\nStorageOS å®¹å™¨éœ€è¦ 64 ä½ Linuxï¼Œæ²¡æœ‰é¢å¤–çš„ä¾èµ–å…³ç³»ã€‚å¯ä»¥ä½¿ç”¨å…è´¹çš„å¼€å‘è€…è®¸å¯è¯ã€‚\né‡è¦æç¤ºï¼šæ‚¨å¿…é¡»åœ¨æ¯ä¸ªè¦è®¿é—® StorageOS å·çš„èŠ‚ç‚¹ä¸Šè¿è¡Œ StorageOS å®¹å™¨ï¼Œæˆ–è€…ä¸ºè¯¥æ± æä¾›å­˜å‚¨å®¹é‡ã€‚ç›¸å…³çš„å®‰è£…è¯´æ˜ï¼Œè¯·å‚é˜… StorageOSæ–‡æ¡£ã€‚\napiVersion: v1 kind: Pod metadata: labels: name: redis role: master name: test-storageos-redis spec: containers: - name: master image: kubernetes/redis:v1 env: - name: MASTER value: \"true\" ports: - containerPort: 6379 volumeMounts: - mountPath: /redis-master-data name: redis-data volumes: - name: redis-data storageos: # The `redis-vol01` volume must already exist within StorageOS in the `default` namespace. volumeName: redis-vol01 fsType: ext4 vsphereVolume linkå…ˆå†³æ¡ä»¶ï¼šé…ç½®äº† vSphere Cloud Provider çš„ Kubernetesã€‚\nvsphereVolume ç”¨äºå°† vSphere VMDK å·æŒ‚è½½åˆ° Pod ä¸­ã€‚å·çš„å†…å®¹åœ¨å¸è½½æ—¶ä¼šè¢«ä¿ç•™ã€‚æ”¯æŒ VMFS å’Œ VSAN æ•°æ®å­˜å‚¨ã€‚\né‡è¦æç¤ºï¼šåœ¨ Pod ä¸­ä½¿ç”¨å®ƒä¹‹å‰ï¼Œæ‚¨å¿…é¡»ä½¿ç”¨ä»¥ä¸‹ä¸€ç§æ–¹æ³•åˆ›å»º VMDKã€‚\nåˆ›å»º VMDK å· linké€‰æ‹©ä»¥ä¸‹æ–¹æ³•ä¹‹ä¸€æ¥åˆ›å»º VMDKã€‚\né¦–å…ˆè¿›å…¥ ESXï¼Œç„¶åä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åˆ›å»ºä¸€ä¸ª VMDKï¼š\nvmkfstools -c 2G /vmfs/volumes/DatastoreName/volumes/myDisk.vmdk ä½¿ç”¨ä¸‹åˆ—å‘½ä»¤åˆ›å»ºä¸€ä¸ª VMDKï¼š\nvmware-vdiskmanager -c -t 0 -s 40GB -a lsilogic myDisk.vmdk vSphere VMDK ç¤ºä¾‹é…ç½® link apiVersion: v1 kind: Pod metadata: name: test-vmdk spec: containers: - image: k8s.gcr.io/test-webserver name: test-container volumeMounts: - mountPath: /test-vmdk name: test-volume volumes: - name: test-volume # This VMDK volume must already exist. vsphereVolume: volumePath: \"[DatastoreName] volumes/myDisk\" fsType: ext4 æ›´å¤šçš„ä¾‹å­å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°ã€‚\nä½¿ç”¨ subPath linkæœ‰æ—¶ï¼Œåœ¨å•ä¸ªå®¹å™¨ä¸­å…±äº«ä¸€ä¸ªå·ç”¨äºå¤šä¸ªç”¨é€”æ˜¯æœ‰ç”¨çš„ã€‚volumeMounts.subPath å±æ€§å¯ç”¨äºåœ¨å¼•ç”¨çš„å·å†…è€Œä¸æ˜¯å…¶æ ¹ç›®å½•ä¸­æŒ‡å®šå­è·¯å¾„ã€‚\nä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨å•ä¸ªå…±äº«å·çš„ LAMP å †æ ˆï¼ˆLinux Apache Mysql PHPï¼‰çš„ç¤ºä¾‹ã€‚ HTML å†…å®¹è¢«æ˜ å°„åˆ°å®ƒçš„ html ç›®å½•ï¼Œæ•°æ®åº“å°†è¢«å­˜å‚¨åœ¨å®ƒçš„ mysql ç›®å½•ä¸­ï¼š\napiVersion: v1 kind: Pod metadata: name: my-lamp-site spec: containers: - name: mysql image: mysql env: - name: MYSQL_ROOT_PASSWORD value: \"rootpasswd\" volumeMounts: - mountPath: /var/lib/mysql name: site-data subPath: mysql - name: php image: php:7.0-apache volumeMounts: - mountPath: /var/www/html name: site-data subPath: html volumes: - name: site-data persistentVolumeClaim: claimName: my-lamp-site-data èµ„æº linkemptyDir å·çš„å­˜å‚¨ä»‹è´¨ï¼ˆç£ç›˜ã€SSD ç­‰ï¼‰ç”±ä¿å­˜åœ¨ kubelet æ ¹ç›®å½•çš„æ–‡ä»¶ç³»ç»Ÿçš„ä»‹è´¨ï¼ˆé€šå¸¸æ˜¯ /var/lib/kubeletï¼‰å†³å®šã€‚ emptyDir æˆ– hostPath å·å¯å ç”¨å¤šå°‘ç©ºé—´å¹¶æ²¡æœ‰é™åˆ¶ï¼Œå®¹å™¨ä¹‹é—´æˆ– Pod ä¹‹é—´ä¹Ÿæ²¡æœ‰éš”ç¦»ã€‚\nåœ¨å°†æ¥ï¼Œæˆ‘ä»¬é¢„è®¡ emptyDir å’Œ hostPath å·å°†èƒ½å¤Ÿä½¿ç”¨ resource è§„èŒƒè¯·æ±‚ä¸€å®šçš„ç©ºé—´ï¼Œå¹¶é€‰æ‹©è¦ä½¿ç”¨çš„ä»‹è´¨ï¼Œé€‚ç”¨äºå…·æœ‰å¤šç§åª’ä½“ç±»å‹çš„é›†ç¾¤ã€‚\nOut-of-Tree å·æ’ä»¶ linké™¤äº†ä¹‹å‰åˆ—å‡ºçš„å·ç±»å‹ä¹‹å¤–ï¼Œå­˜å‚¨ä¾›åº”å•†å¯ä»¥åˆ›å»ºè‡ªå®šä¹‰æ’ä»¶è€Œä¸å°†å…¶æ·»åŠ åˆ° Kubernetes å­˜å‚¨åº“ä¸­ã€‚å¯ä»¥é€šè¿‡ä½¿ç”¨ FlexVolume æ’ä»¶æ¥å®ç°ã€‚\nFlexVolumeä½¿ç”¨æˆ·èƒ½å¤Ÿå°†ä¾›åº”å•†å·æŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ä¾›åº”å•†æ’ä»¶æ˜¯ä½¿ç”¨é©±åŠ¨ç¨‹åºå®ç°çš„ï¼Œè¯¥é©±åŠ¨ç¨‹åºæ”¯æŒç”± FlexVolume APIå®šä¹‰çš„ä¸€ç³»åˆ—å·å‘½ä»¤ã€‚é©±åŠ¨ç¨‹åºå¿…é¡»å®‰è£…åœ¨æ¯ä¸ªèŠ‚ç‚¹çš„é¢„å®šä¹‰å·æ’ä»¶è·¯å¾„ä¸­ã€‚\næŒ‚è½½ä¼ æ’­ linkæ³¨æ„ï¼šæŒ‚è½½ä¼ æ’­æ˜¯ Kubernetes 1.8 ä¸­çš„ä¸€ä¸ª alpha ç‰¹æ€§ï¼Œåœ¨å°†æ¥çš„ç‰ˆæœ¬ä¸­å¯èƒ½ä¼šé‡æ–°è®¾è®¡ç”šè‡³åˆ é™¤ã€‚\næŒ‚è½½ä¼ æ’­å…è®¸å°†ç”±å®¹å™¨æŒ‚è½½çš„å·å…±äº«åˆ°åŒä¸€ä¸ª Pod ä¸­çš„å…¶ä»–å®¹å™¨ä¸Šï¼Œç”šè‡³æ˜¯åŒä¸€èŠ‚ç‚¹ä¸Šçš„å…¶ä»– Podã€‚\nå¦‚æœç¦ç”¨ MountPropagation åŠŸèƒ½ï¼Œåˆ™ä¸ä¼šä¼ æ’­ pod ä¸­çš„å·æŒ‚è½½ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå®¹å™¨æŒ‰ç…§ Linuxå†…æ ¸æ–‡æ¡£ä¸­æ‰€è¿°çš„ private æŒ‚è½½ä¼ æ’­è¿è¡Œã€‚\nè¦å¯ç”¨æ­¤åŠŸèƒ½ï¼Œè¯·åœ¨ --feature-gates å‘½ä»¤è¡Œé€‰é¡¹ä¸­æŒ‡å®š MountPropagation = trueã€‚å¯ç”¨æ—¶ï¼Œå®¹å™¨çš„ volumeMounts å­—æ®µæœ‰ä¸€ä¸ªæ–°çš„ mountPropagation å­å­—æ®µã€‚å®ƒçš„å€¼ä¸ºï¼š\nHostToContainerï¼šæ­¤å·æŒ‚è½½å°†æ¥æ”¶æ‰€æœ‰åç»­æŒ‚è½½åˆ°æ­¤å·æˆ–å…¶ä»»ä½•å­ç›®å½•çš„æŒ‚è½½ã€‚è¿™æ˜¯ MountPropagation åŠŸèƒ½å¯ç”¨æ—¶çš„é»˜è®¤æ¨¡å¼ã€‚\nåŒæ ·çš„ï¼Œå¦‚æœä»»ä½•å¸¦æœ‰ Bidirectional æŒ‚è½½ä¼ æ’­çš„ pod æŒ‚è½½åˆ°åŒä¸€ä¸ªå·ä¸Šï¼Œå¸¦æœ‰ HostToContainer æŒ‚è½½ä¼ æ’­çš„å®¹å™¨å°†ä¼šçœ‹åˆ°å®ƒã€‚\nè¯¥æ¨¡å¼ç­‰åŒäºLinuxå†…æ ¸æ–‡æ¡£ä¸­æè¿°çš„ rslave æŒ‚è½½ä¼ æ’­ã€‚\nBidirectional å·æŒ‚è½½ä¸ HostToContainer æŒ‚è½½ç›¸åŒã€‚å¦å¤–ï¼Œç”±å®¹å™¨åˆ›å»ºçš„æ‰€æœ‰å·æŒ‚è½½å°†è¢«ä¼ æ’­å›ä¸»æœºå’Œæ‰€æœ‰ä½¿ç”¨ç›¸åŒå·çš„å®¹å™¨çš„æ‰€æœ‰å®¹å™¨ã€‚\næ­¤æ¨¡å¼çš„ä¸€ä¸ªå…¸å‹ç”¨ä¾‹æ˜¯å¸¦æœ‰ Flex å·é©±åŠ¨å™¨æˆ–éœ€è¦ä½¿ç”¨ HostPath å·åœ¨ä¸»æœºä¸ŠæŒ‚è½½æŸäº›å†…å®¹çš„ podã€‚\nè¯¥æ¨¡å¼ç­‰åŒäº Linuxå†…æ ¸æ–‡æ¡£ä¸­æ‰€è¿°çš„ rshared æŒ‚è½½ä¼ æ’­ã€‚\nå°å¿ƒï¼šåŒå‘æŒ‚è½½ä¼ æ’­å¯èƒ½æ˜¯å±é™©çš„ã€‚å®ƒå¯èƒ½ä¼šæŸåä¸»æœºæ“ä½œç³»ç»Ÿï¼Œå› æ­¤åªèƒ½åœ¨ç‰¹æƒå®¹å™¨ä¸­ä½¿ç”¨ã€‚å¼ºçƒˆå»ºè®®ç†Ÿæ‚‰ Linux å†…æ ¸è¡Œä¸ºã€‚å¦å¤–ï¼Œå®¹å™¨åœ¨ Pod ä¸­åˆ›å»ºçš„ä»»ä½•å·æŒ‚è½½å¿…é¡»åœ¨å®¹å™¨ç»ˆæ­¢æ—¶é”€æ¯ï¼ˆå¸è½½ï¼‰ã€‚\nå‚è€ƒ link Volumes - kubernetes.io\nä½¿ç”¨æŒä¹…åŒ–å·æ¥éƒ¨ç½² WordPress å’Œ MySQL - kubernetes.io\n"
            }
        );
    index.add(
            {
                id:  26 ,
                href: "\/docs\/develop\/demand\/",
                title: "ä¸ªäººéœ€æ±‚ï¼šé©¬æ–¯æ´›ç†è®º",
                description: "é©¬æ–¯æ´›éœ€æ±‚å±‚æ¬¡ç†è®ºï¼ˆMaslowâ€™s Hierarchy of Needsï¼‰ç”±ç¾å›½å¿ƒç†å­¦å®¶äºšä¼¯æ‹‰ç½•Â·é©¬æ–¯æ´›ï¼ˆAbraham Maslowï¼‰äº1943å¹´æå‡ºï¼Œæ˜¯å¿ƒç†å­¦ã€ç®¡ç†å­¦å’Œæ•™è‚²å­¦é¢†åŸŸçš„ç»å…¸ç†è®ºã€‚è¯¥ç†è®ºå°†äººç±»éœ€æ±‚åˆ’åˆ†ä¸ºäº”ä¸ªå±‚æ¬¡ï¼Œæ­ç¤ºäº†ä»åŸºæœ¬ç”Ÿå­˜éœ€æ±‚åˆ°è‡ªæˆ‘å®ç°çš„å¿ƒç†å‘å±•è·¯å¾„ã€‚å…¶æ ¸å¿ƒè§‚ç‚¹æ˜¯ï¼šäººç±»è¡Œä¸ºç”±å†…åœ¨éœ€æ±‚é©±åŠ¨ï¼Œéœ€æ±‚çš„æ»¡è¶³éµå¾ªä»ä½çº§åˆ°é«˜çº§çš„é€’è¿›è§„å¾‹ã€‚\nä¸€ã€éœ€æ±‚å±‚æ¬¡çš„ç»“æ„ linké©¬æ–¯æ´›å°†éœ€æ±‚åˆ†ä¸ºäº”ä¸ªå±‚æ¬¡ï¼Œå½¢ä¼¼é‡‘å­—å¡”ï¼ˆåæ‰©å±•ä¸ºä¸ƒå±‚ï¼Œä½†äº”å±‚æ¨¡å‹æœ€å¹¿ä¸ºäººçŸ¥ï¼‰ï¼š\nç”Ÿç†éœ€æ±‚ï¼ˆPhysiological Needsï¼‰\næœ€åº•å±‚æ˜¯ç»´æŒç”Ÿå­˜çš„åŸºæœ¬éœ€æ±‚ï¼ŒåŒ…æ‹¬é£Ÿç‰©ã€æ°´ã€ç©ºæ°”ã€ç¡çœ å’Œæ€§ç­‰ã€‚è¿™äº›éœ€æ±‚æœªæ»¡è¶³æ—¶ï¼Œäººçš„è¡Œä¸ºä¼šä¼˜å…ˆå›´ç»•å…¶å±•å¼€ï¼Œä¾‹å¦‚é¥¥é¥¿æ—¶è§…é£Ÿæ˜¯å”¯ä¸€ç›®æ ‡ã€‚\nå®‰å…¨éœ€æ±‚ï¼ˆSafety Needsï¼‰\nç”Ÿç†éœ€æ±‚æ»¡è¶³åï¼Œäººå¼€å§‹è¿½æ±‚å®‰å…¨ä¸ç¨³å®šï¼Œä¾‹å¦‚äººèº«å®‰å…¨ã€å¥åº·ä¿éšœã€è´¢äº§å®‰å…¨ã€å·¥ä½œç¨³å®šç­‰ã€‚å„¿ç«¥å¯¹ç§©åºçš„éœ€æ±‚ã€æˆå¹´äººå¯¹å‚¨è“„çš„åå¥½å‡ä¸æ­¤ç›¸å…³ã€‚\nå½’å±ä¸çˆ±çš„éœ€æ±‚ï¼ˆLove and Belonging Needsï¼‰\nç¤¾ä¼šæ€§éœ€æ±‚å¼€å§‹æ˜¾ç°ï¼Œè¡¨ç°ä¸ºå¯¹å‹è°Šã€å®¶åº­ã€äº²å¯†å…³ç³»å’Œç¤¾ç¾¤å½’å±çš„æ¸´æœ›ã€‚å­¤ç‹¬æ„Ÿæˆ–ç¤¾äº¤æ’æ–¥ä¼šå¼•å‘å¿ƒç†é—®é¢˜ã€‚\nå°Šé‡éœ€æ±‚ï¼ˆEsteem Needsï¼‰\nåŒ…æ‹¬å†…åœ¨å°Šé‡ï¼ˆè‡ªä¿¡ã€æˆå°±æ„Ÿï¼‰å’Œå¤–åœ¨å°Šé‡ï¼ˆä»–äººçš„è®¤å¯ã€åœ°ä½ï¼‰ã€‚æ­¤é˜¶æ®µäººå¸Œæœ›å±•ç°èƒ½åŠ›ã€è·å¾—ä»·å€¼è®¤åŒï¼Œéœ€æ±‚æœªè¢«æ»¡è¶³å¯èƒ½å¯¼è‡´è‡ªå‘æˆ–æ— åŠ©æ„Ÿã€‚\nè‡ªæˆ‘å®ç°éœ€æ±‚ï¼ˆSelf-Actualizationï¼‰\næœ€é«˜å±‚æ¬¡çš„éœ€æ±‚ï¼ŒæŒ‡ä¸ªä½“è¿½æ±‚æ½œèƒ½çš„æœ€å¤§åŒ–å‘æŒ¥ï¼Œå®ç°ç†æƒ³ã€åˆ›é€ ä»·å€¼ã€‚ä¾‹å¦‚è‰ºæœ¯å®¶è¿½æ±‚åˆ›ä½œã€ç§‘å­¦å®¶æ¢ç´¢çœŸç†ã€‚é©¬æ–¯æ´›è®¤ä¸ºï¼Œåªæœ‰å°‘æ•°äººèƒ½å¤Ÿå®Œå…¨è¾¾åˆ°è¿™ä¸€é˜¶æ®µã€‚\näºŒã€ç†è®ºçš„æ ¸å¿ƒè§‚ç‚¹ link éœ€æ±‚å±‚çº§é€’è¿›æ€§ï¼šä½çº§éœ€æ±‚æ»¡è¶³åï¼Œé«˜çº§éœ€æ±‚æ‰ä¼šæˆä¸ºä¸»å¯¼åŠ¨æœºï¼Œä½†å¹¶éä¸¥æ ¼â€œå…¨æœ‰æˆ–å…¨æ— â€ã€‚ åŠ¨æ€æ€§ä¸çµæ´»æ€§ï¼šéœ€æ±‚å±‚æ¬¡å¯èƒ½å› çªå‘äº‹ä»¶ï¼ˆå¦‚ç¾éš¾ã€å¤±ä¸šï¼‰è€Œå€’é€€ï¼Œä¸åŒæ–‡åŒ–ä¸­éœ€æ±‚ä¼˜å…ˆçº§å¯èƒ½å˜åŒ–ã€‚ è¶…è¶Šæ€§éœ€æ±‚ï¼šåæœŸé©¬æ–¯æ´›æå‡ºâ€œè‡ªæˆ‘è¶…è¶Šâ€ä½œä¸ºæ›´é«˜å±‚æ¬¡ï¼Œå³è¶…è¶Šä¸ªäººåˆ©ç›Šï¼Œè¿½æ±‚å®‡å®™æ„ä¹‰æˆ–å¸®åŠ©ä»–äººæˆé•¿ã€‚ ä¸‰ã€ç†è®ºçš„åº”ç”¨ä¸æ‰¹è¯„ linkåº”ç”¨é¢†åŸŸï¼š\nä¼ä¸šç®¡ç†ï¼šé€šè¿‡æ»¡è¶³å‘˜å·¥å®‰å…¨ã€å½’å±å’Œå°Šé‡éœ€æ±‚æå‡ç§¯ææ€§ã€‚ æ•™è‚²ï¼šä¸ºå­¦ç”Ÿæä¾›å®‰å…¨ç¯å¢ƒä»¥æ¿€å‘å­¦ä¹ åŠ¨åŠ›ã€‚ ä¸ªäººå‘å±•ï¼šå¸®åŠ©ä¸ªä½“æ˜ç¡®å½“å‰éœ€æ±‚é˜¶æ®µï¼Œåˆ¶å®šæˆé•¿ç›®æ ‡ã€‚ äº‰è®®ä¸æ‰¹è¯„ï¼š\næ–‡åŒ–å±€é™æ€§ï¼šé›†ä½“ä¸»ä¹‰æ–‡åŒ–ä¸­ï¼Œå½’å±éœ€æ±‚å¯èƒ½ä¼˜å…ˆäºä¸ªäººæˆå°±ã€‚ å®è¯æ”¯æŒä¸è¶³ï¼šéœ€æ±‚å±‚æ¬¡ç¼ºä¹ä¸¥æ ¼çš„ç§‘å­¦éªŒè¯ï¼Œç°å®ä¸­äººå¯èƒ½åŒæ—¶è¿½æ±‚å¤šå±‚çº§éœ€æ±‚ã€‚ è¿‡åº¦ç†æƒ³åŒ–ï¼šè´«å›°ã€æˆ˜äº‰ç­‰æç«¯ç¯å¢ƒä¸‹ï¼Œè‡ªæˆ‘å®ç°éœ€æ±‚éš¾ä»¥æˆä¸ºæ™®éç›®æ ‡ã€‚ å››ã€ç°ä»£æ„ä¹‰ linkå°½ç®¡å­˜åœ¨äº‰è®®ï¼Œé©¬æ–¯æ´›ç†è®ºä¸ºç†è§£äººç±»åŠ¨æœºæä¾›äº†ç®€æ´æ¡†æ¶ã€‚åœ¨å½“ä»£ç¤¾ä¼šï¼Œå…¶å¯ç¤ºåœ¨äºï¼š\nä¸ªäººæˆé•¿éœ€å…¼é¡¾ç‰©è´¨ä¸ç²¾ç¥éœ€æ±‚ï¼› ç»„ç»‡è®¾è®¡åº”å…³æ³¨æˆå‘˜çš„å¤šå±‚æ¬¡éœ€æ±‚ï¼› å¹¸ç¦æ„Ÿæºäºéœ€æ±‚çš„åŠ¨æ€å¹³è¡¡ï¼Œè€Œéå•ä¸€ç›®æ ‡çš„å®ç°ã€‚ ç»“è¯­\né©¬æ–¯æ´›éœ€æ±‚å±‚æ¬¡ç†è®ºå¹¶éå®Œç¾ï¼Œä½†å®ƒåƒä¸€ç›æ˜ç¯ï¼ŒæŒ‡å¼•æˆ‘ä»¬æ¢ç´¢äººç±»å¤æ‚è¡Œä¸ºèƒŒåçš„æ·±å±‚åŠ¨åŠ›ã€‚æ— è®ºæ˜¯ä¸ªäººè¿½æ±‚å¹¸ç¦ï¼Œè¿˜æ˜¯ç¤¾ä¼šæ„å»ºå’Œè°ï¼Œè¿™ä¸€æ¨¡å‹éƒ½æé†’æˆ‘ä»¬ï¼šçœŸæ­£çš„æ»¡è¶³ï¼Œå§‹äºå¯¹â€œäººâ€çš„å…¨é¢ç†è§£ã€‚\n",
                content: "é©¬æ–¯æ´›éœ€æ±‚å±‚æ¬¡ç†è®ºï¼ˆMaslowâ€™s Hierarchy of Needsï¼‰ç”±ç¾å›½å¿ƒç†å­¦å®¶äºšä¼¯æ‹‰ç½•Â·é©¬æ–¯æ´›ï¼ˆAbraham Maslowï¼‰äº1943å¹´æå‡ºï¼Œæ˜¯å¿ƒç†å­¦ã€ç®¡ç†å­¦å’Œæ•™è‚²å­¦é¢†åŸŸçš„ç»å…¸ç†è®ºã€‚è¯¥ç†è®ºå°†äººç±»éœ€æ±‚åˆ’åˆ†ä¸ºäº”ä¸ªå±‚æ¬¡ï¼Œæ­ç¤ºäº†ä»åŸºæœ¬ç”Ÿå­˜éœ€æ±‚åˆ°è‡ªæˆ‘å®ç°çš„å¿ƒç†å‘å±•è·¯å¾„ã€‚å…¶æ ¸å¿ƒè§‚ç‚¹æ˜¯ï¼šäººç±»è¡Œä¸ºç”±å†…åœ¨éœ€æ±‚é©±åŠ¨ï¼Œéœ€æ±‚çš„æ»¡è¶³éµå¾ªä»ä½çº§åˆ°é«˜çº§çš„é€’è¿›è§„å¾‹ã€‚\nä¸€ã€éœ€æ±‚å±‚æ¬¡çš„ç»“æ„ linké©¬æ–¯æ´›å°†éœ€æ±‚åˆ†ä¸ºäº”ä¸ªå±‚æ¬¡ï¼Œå½¢ä¼¼é‡‘å­—å¡”ï¼ˆåæ‰©å±•ä¸ºä¸ƒå±‚ï¼Œä½†äº”å±‚æ¨¡å‹æœ€å¹¿ä¸ºäººçŸ¥ï¼‰ï¼š\nç”Ÿç†éœ€æ±‚ï¼ˆPhysiological Needsï¼‰\næœ€åº•å±‚æ˜¯ç»´æŒç”Ÿå­˜çš„åŸºæœ¬éœ€æ±‚ï¼ŒåŒ…æ‹¬é£Ÿç‰©ã€æ°´ã€ç©ºæ°”ã€ç¡çœ å’Œæ€§ç­‰ã€‚è¿™äº›éœ€æ±‚æœªæ»¡è¶³æ—¶ï¼Œäººçš„è¡Œä¸ºä¼šä¼˜å…ˆå›´ç»•å…¶å±•å¼€ï¼Œä¾‹å¦‚é¥¥é¥¿æ—¶è§…é£Ÿæ˜¯å”¯ä¸€ç›®æ ‡ã€‚\nå®‰å…¨éœ€æ±‚ï¼ˆSafety Needsï¼‰\nç”Ÿç†éœ€æ±‚æ»¡è¶³åï¼Œäººå¼€å§‹è¿½æ±‚å®‰å…¨ä¸ç¨³å®šï¼Œä¾‹å¦‚äººèº«å®‰å…¨ã€å¥åº·ä¿éšœã€è´¢äº§å®‰å…¨ã€å·¥ä½œç¨³å®šç­‰ã€‚å„¿ç«¥å¯¹ç§©åºçš„éœ€æ±‚ã€æˆå¹´äººå¯¹å‚¨è“„çš„åå¥½å‡ä¸æ­¤ç›¸å…³ã€‚\nå½’å±ä¸çˆ±çš„éœ€æ±‚ï¼ˆLove and Belonging Needsï¼‰\nç¤¾ä¼šæ€§éœ€æ±‚å¼€å§‹æ˜¾ç°ï¼Œè¡¨ç°ä¸ºå¯¹å‹è°Šã€å®¶åº­ã€äº²å¯†å…³ç³»å’Œç¤¾ç¾¤å½’å±çš„æ¸´æœ›ã€‚å­¤ç‹¬æ„Ÿæˆ–ç¤¾äº¤æ’æ–¥ä¼šå¼•å‘å¿ƒç†é—®é¢˜ã€‚\nå°Šé‡éœ€æ±‚ï¼ˆEsteem Needsï¼‰\nåŒ…æ‹¬å†…åœ¨å°Šé‡ï¼ˆè‡ªä¿¡ã€æˆå°±æ„Ÿï¼‰å’Œå¤–åœ¨å°Šé‡ï¼ˆä»–äººçš„è®¤å¯ã€åœ°ä½ï¼‰ã€‚æ­¤é˜¶æ®µäººå¸Œæœ›å±•ç°èƒ½åŠ›ã€è·å¾—ä»·å€¼è®¤åŒï¼Œéœ€æ±‚æœªè¢«æ»¡è¶³å¯èƒ½å¯¼è‡´è‡ªå‘æˆ–æ— åŠ©æ„Ÿã€‚\nè‡ªæˆ‘å®ç°éœ€æ±‚ï¼ˆSelf-Actualizationï¼‰\næœ€é«˜å±‚æ¬¡çš„éœ€æ±‚ï¼ŒæŒ‡ä¸ªä½“è¿½æ±‚æ½œèƒ½çš„æœ€å¤§åŒ–å‘æŒ¥ï¼Œå®ç°ç†æƒ³ã€åˆ›é€ ä»·å€¼ã€‚ä¾‹å¦‚è‰ºæœ¯å®¶è¿½æ±‚åˆ›ä½œã€ç§‘å­¦å®¶æ¢ç´¢çœŸç†ã€‚é©¬æ–¯æ´›è®¤ä¸ºï¼Œåªæœ‰å°‘æ•°äººèƒ½å¤Ÿå®Œå…¨è¾¾åˆ°è¿™ä¸€é˜¶æ®µã€‚\näºŒã€ç†è®ºçš„æ ¸å¿ƒè§‚ç‚¹ link éœ€æ±‚å±‚çº§é€’è¿›æ€§ï¼šä½çº§éœ€æ±‚æ»¡è¶³åï¼Œé«˜çº§éœ€æ±‚æ‰ä¼šæˆä¸ºä¸»å¯¼åŠ¨æœºï¼Œä½†å¹¶éä¸¥æ ¼â€œå…¨æœ‰æˆ–å…¨æ— â€ã€‚ åŠ¨æ€æ€§ä¸çµæ´»æ€§ï¼šéœ€æ±‚å±‚æ¬¡å¯èƒ½å› çªå‘äº‹ä»¶ï¼ˆå¦‚ç¾éš¾ã€å¤±ä¸šï¼‰è€Œå€’é€€ï¼Œä¸åŒæ–‡åŒ–ä¸­éœ€æ±‚ä¼˜å…ˆçº§å¯èƒ½å˜åŒ–ã€‚ è¶…è¶Šæ€§éœ€æ±‚ï¼šåæœŸé©¬æ–¯æ´›æå‡ºâ€œè‡ªæˆ‘è¶…è¶Šâ€ä½œä¸ºæ›´é«˜å±‚æ¬¡ï¼Œå³è¶…è¶Šä¸ªäººåˆ©ç›Šï¼Œè¿½æ±‚å®‡å®™æ„ä¹‰æˆ–å¸®åŠ©ä»–äººæˆé•¿ã€‚ ä¸‰ã€ç†è®ºçš„åº”ç”¨ä¸æ‰¹è¯„ linkåº”ç”¨é¢†åŸŸï¼š\nä¼ä¸šç®¡ç†ï¼šé€šè¿‡æ»¡è¶³å‘˜å·¥å®‰å…¨ã€å½’å±å’Œå°Šé‡éœ€æ±‚æå‡ç§¯ææ€§ã€‚ æ•™è‚²ï¼šä¸ºå­¦ç”Ÿæä¾›å®‰å…¨ç¯å¢ƒä»¥æ¿€å‘å­¦ä¹ åŠ¨åŠ›ã€‚ ä¸ªäººå‘å±•ï¼šå¸®åŠ©ä¸ªä½“æ˜ç¡®å½“å‰éœ€æ±‚é˜¶æ®µï¼Œåˆ¶å®šæˆé•¿ç›®æ ‡ã€‚ äº‰è®®ä¸æ‰¹è¯„ï¼š\næ–‡åŒ–å±€é™æ€§ï¼šé›†ä½“ä¸»ä¹‰æ–‡åŒ–ä¸­ï¼Œå½’å±éœ€æ±‚å¯èƒ½ä¼˜å…ˆäºä¸ªäººæˆå°±ã€‚ å®è¯æ”¯æŒä¸è¶³ï¼šéœ€æ±‚å±‚æ¬¡ç¼ºä¹ä¸¥æ ¼çš„ç§‘å­¦éªŒè¯ï¼Œç°å®ä¸­äººå¯èƒ½åŒæ—¶è¿½æ±‚å¤šå±‚çº§éœ€æ±‚ã€‚ è¿‡åº¦ç†æƒ³åŒ–ï¼šè´«å›°ã€æˆ˜äº‰ç­‰æç«¯ç¯å¢ƒä¸‹ï¼Œè‡ªæˆ‘å®ç°éœ€æ±‚éš¾ä»¥æˆä¸ºæ™®éç›®æ ‡ã€‚ å››ã€ç°ä»£æ„ä¹‰ linkå°½ç®¡å­˜åœ¨äº‰è®®ï¼Œé©¬æ–¯æ´›ç†è®ºä¸ºç†è§£äººç±»åŠ¨æœºæä¾›äº†ç®€æ´æ¡†æ¶ã€‚åœ¨å½“ä»£ç¤¾ä¼šï¼Œå…¶å¯ç¤ºåœ¨äºï¼š\nä¸ªäººæˆé•¿éœ€å…¼é¡¾ç‰©è´¨ä¸ç²¾ç¥éœ€æ±‚ï¼› ç»„ç»‡è®¾è®¡åº”å…³æ³¨æˆå‘˜çš„å¤šå±‚æ¬¡éœ€æ±‚ï¼› å¹¸ç¦æ„Ÿæºäºéœ€æ±‚çš„åŠ¨æ€å¹³è¡¡ï¼Œè€Œéå•ä¸€ç›®æ ‡çš„å®ç°ã€‚ ç»“è¯­\né©¬æ–¯æ´›éœ€æ±‚å±‚æ¬¡ç†è®ºå¹¶éå®Œç¾ï¼Œä½†å®ƒåƒä¸€ç›æ˜ç¯ï¼ŒæŒ‡å¼•æˆ‘ä»¬æ¢ç´¢äººç±»å¤æ‚è¡Œä¸ºèƒŒåçš„æ·±å±‚åŠ¨åŠ›ã€‚æ— è®ºæ˜¯ä¸ªäººè¿½æ±‚å¹¸ç¦ï¼Œè¿˜æ˜¯ç¤¾ä¼šæ„å»ºå’Œè°ï¼Œè¿™ä¸€æ¨¡å‹éƒ½æé†’æˆ‘ä»¬ï¼šçœŸæ­£çš„æ»¡è¶³ï¼Œå§‹äºå¯¹â€œäººâ€çš„å…¨é¢ç†è§£ã€‚\n"
            }
        );
    index.add(
            {
                id:  27 ,
                href: "\/docs\/information\/secure\/cryptographic_protocol\/",
                title: "å¯†ç åè®®",
                description: "ä¸€ã€å¯†ç åè®®ï¼šä¿¡ä»»ä¼ é€’çš„è§„åˆ™ä½“ç³» link1.1 è®¤è¯åè®® linkæŒ‘æˆ˜-å“åº”åè®®\n# å…¸å‹æŒ‘æˆ˜-å“åº”æµç¨‹ 1. å®¢æˆ·ç«¯å‘é€è®¤è¯è¯·æ±‚ 2. æœåŠ¡å™¨ç”Ÿæˆéšæœºæ•°Nï¼ˆæŒ‘æˆ˜ï¼‰ 3. å®¢æˆ·ç«¯ç”¨é¢„å…±äº«å¯†é’¥åŠ å¯†Nç”Ÿæˆå“åº”R=H(K||N) 4. æœåŠ¡å™¨éªŒè¯Rçš„æ­£ç¡®æ€§ é€šè¿‡åŠ¨æ€æŒ‘æˆ˜å€¼é˜²æ­¢é‡æ”¾æ”»å‡»ï¼Œå¹¿æ³›åº”ç”¨äºæ™ºèƒ½å¡è®¤è¯ã€åŒå› ç´ è®¤è¯ç­‰åœºæ™¯ã€‚\né›¶çŸ¥è¯†è¯æ˜\nåŸºæœ¬åŸç†ï¼šè¯æ˜è€…åœ¨ä¸é€éœ²ç§˜å¯†ä¿¡æ¯çš„å‰æä¸‹éªŒè¯å£°æ˜çœŸå®æ€§ å®ç”¨æ¡ˆä¾‹ï¼šZK-SNARKsåœ¨åŒºå—é“¾éšç§äº¤æ˜“ä¸­çš„åº”ç”¨ å®ç°è¦ç´ ï¼š å®Œå¤‡æ€§ï¼ˆValid proofs verifyï¼‰ å¯é æ€§ï¼ˆFalse statements failï¼‰ é›¶çŸ¥è¯†æ€§ï¼ˆNo extraä¿¡æ¯æ³„éœ²ï¼‰ 1.2 å®‰å…¨é€šä¿¡åè®® linkTLS 1.3æ¡æ‰‹æµç¨‹é©æ–°\nsequenceDiagram Client-\u003e\u003eServer: ClientHello (æ”¯æŒç®—æ³•åˆ—è¡¨) Server-\u003e\u003eClient: ServerHello (é€‰å®šçš„ç®—æ³•) Server-\u003e\u003eClient: æ•°å­—è¯ä¹¦ + å…¬é’¥ Client-\u003e\u003eServer: é¢„ä¸»å¯†é’¥åŠ å¯†ä¼ è¾“ åŒæ–¹-\u003e\u003eå®‰å…¨é€šé“: ç”Ÿæˆä¼šè¯å¯†é’¥ ç›¸æ¯”TLS 1.2çš„å…³é”®æ”¹è¿›ï¼š\næ¶ˆé™¤ä¸å®‰å…¨ç®—æ³•ï¼ˆå¦‚RSAå¯†é’¥äº¤æ¢ï¼‰ 1-RTTå¿«é€Ÿæ¡æ‰‹ å¼ºåˆ¶å‰å‘å®‰å…¨æ€§ IPsecåè®®æ ˆ\nåè®®å±‚ AHåè®® ESPåè®® åŠŸèƒ½ å®Œæ•´æ€§éªŒè¯ åŠ å¯†+å®Œæ•´æ€§ å¤´éƒ¨ä½ç½® IPå±‚ IPå±‚ ä¿æŠ¤èŒƒå›´ å®Œæ•´æ•°æ®åŒ… ä»…è½½è· äºŒã€å¯†é’¥ç®¡ç†ï¼šå®‰å…¨ä½“ç³»çš„å‘½è„‰ link2.1 PKIä½“ç³»æ¶æ„ linkX.509è¯ä¹¦æ ¸å¿ƒå­—æ®µ\n",
                content: "ä¸€ã€å¯†ç åè®®ï¼šä¿¡ä»»ä¼ é€’çš„è§„åˆ™ä½“ç³» link1.1 è®¤è¯åè®® linkæŒ‘æˆ˜-å“åº”åè®®\n# å…¸å‹æŒ‘æˆ˜-å“åº”æµç¨‹ 1. å®¢æˆ·ç«¯å‘é€è®¤è¯è¯·æ±‚ 2. æœåŠ¡å™¨ç”Ÿæˆéšæœºæ•°Nï¼ˆæŒ‘æˆ˜ï¼‰ 3. å®¢æˆ·ç«¯ç”¨é¢„å…±äº«å¯†é’¥åŠ å¯†Nç”Ÿæˆå“åº”R=H(K||N) 4. æœåŠ¡å™¨éªŒè¯Rçš„æ­£ç¡®æ€§ é€šè¿‡åŠ¨æ€æŒ‘æˆ˜å€¼é˜²æ­¢é‡æ”¾æ”»å‡»ï¼Œå¹¿æ³›åº”ç”¨äºæ™ºèƒ½å¡è®¤è¯ã€åŒå› ç´ è®¤è¯ç­‰åœºæ™¯ã€‚\né›¶çŸ¥è¯†è¯æ˜\nåŸºæœ¬åŸç†ï¼šè¯æ˜è€…åœ¨ä¸é€éœ²ç§˜å¯†ä¿¡æ¯çš„å‰æä¸‹éªŒè¯å£°æ˜çœŸå®æ€§ å®ç”¨æ¡ˆä¾‹ï¼šZK-SNARKsåœ¨åŒºå—é“¾éšç§äº¤æ˜“ä¸­çš„åº”ç”¨ å®ç°è¦ç´ ï¼š å®Œå¤‡æ€§ï¼ˆValid proofs verifyï¼‰ å¯é æ€§ï¼ˆFalse statements failï¼‰ é›¶çŸ¥è¯†æ€§ï¼ˆNo extraä¿¡æ¯æ³„éœ²ï¼‰ 1.2 å®‰å…¨é€šä¿¡åè®® linkTLS 1.3æ¡æ‰‹æµç¨‹é©æ–°\nsequenceDiagram Client-\u003e\u003eServer: ClientHello (æ”¯æŒç®—æ³•åˆ—è¡¨) Server-\u003e\u003eClient: ServerHello (é€‰å®šçš„ç®—æ³•) Server-\u003e\u003eClient: æ•°å­—è¯ä¹¦ + å…¬é’¥ Client-\u003e\u003eServer: é¢„ä¸»å¯†é’¥åŠ å¯†ä¼ è¾“ åŒæ–¹-\u003e\u003eå®‰å…¨é€šé“: ç”Ÿæˆä¼šè¯å¯†é’¥ ç›¸æ¯”TLS 1.2çš„å…³é”®æ”¹è¿›ï¼š\næ¶ˆé™¤ä¸å®‰å…¨ç®—æ³•ï¼ˆå¦‚RSAå¯†é’¥äº¤æ¢ï¼‰ 1-RTTå¿«é€Ÿæ¡æ‰‹ å¼ºåˆ¶å‰å‘å®‰å…¨æ€§ IPsecåè®®æ ˆ\nåè®®å±‚ AHåè®® ESPåè®® åŠŸèƒ½ å®Œæ•´æ€§éªŒè¯ åŠ å¯†+å®Œæ•´æ€§ å¤´éƒ¨ä½ç½® IPå±‚ IPå±‚ ä¿æŠ¤èŒƒå›´ å®Œæ•´æ•°æ®åŒ… ä»…è½½è· äºŒã€å¯†é’¥ç®¡ç†ï¼šå®‰å…¨ä½“ç³»çš„å‘½è„‰ link2.1 PKIä½“ç³»æ¶æ„ linkX.509è¯ä¹¦æ ¸å¿ƒå­—æ®µ\nCertificate: Version: v3 Serial Number: 0x0a:01:...:ff Signature Algorithm: ecdsa-with-SHA256 Issuer: C=CN, O=Example CA Validity: Not Before: 20240101 Not After: 20261231 Subject: CN=server.example.com Public Key: 04:9a:...:c2 Extensions: Key Usage: digitalSignature Subject Alternative Name: DNS:*.example.com 2.2 å¯†é’¥ç”Ÿå‘½å‘¨æœŸç®¡ç† linkå…¨å‘¨æœŸä¿æŠ¤æœºåˆ¶ï¼š\nç”Ÿæˆï¼šä½¿ç”¨FIPS 140-2è®¤è¯çš„HSMè®¾å¤‡ åˆ†å‘ï¼šåŸºäºé‡å­å®‰å…¨çš„KYBERç®—æ³• å­˜å‚¨ï¼šTEEå¯ä¿¡æ‰§è¡Œç¯å¢ƒä¿æŠ¤ è½®æ¢ï¼šå®šæœŸæ›´æ¢ç­–ç•¥ï¼ˆå¦‚TLSä¼šè¯å¯†é’¥æ¯å°æ—¶æ›´æ–°ï¼‰ æ’¤é”€ï¼šOCSPå®æ—¶éªŒè¯æœºåˆ¶ ä¸‰ã€å®‰å…¨æ€§åˆ†æï¼šæ”»é˜²å®æˆ˜è§†è§’ link3.1 å¯†ç ç®—æ³•è¯„ä¼°çŸ©é˜µ link æ”»å‡»ç±»å‹ AES-256 RSA-4096 ECC-384 ç©·ä¸¾æ”»å‡» 2^256æ¬¡ å› å­åˆ†è§£ ECDLPé—®é¢˜ ä¾§ä¿¡é“é˜²æŠ¤ ç¼“å­˜å±è”½ æ—¶é—´æ’å®š éšæœºåŒ–æ ‡é‡ é‡å­å¨èƒ Groverç®—æ³• Shorç®—æ³• åŒå—Shorå¨èƒ 3.2 ç»å…¸æ¼æ´æ¡ˆä¾‹åˆ†æ linkå¿ƒè„å‡ºè¡€æ¼æ´(Heartbleed)\næˆå› ï¼šOpenSSL 1.0.1-1.0.1fçš„å¿ƒè·³æ‰©å±•æœªéªŒè¯é•¿åº¦å­—æ®µ æ¼æ´åˆ©ç”¨ï¼š // æ¶æ„æ„é€ å¿ƒè·³è¯·æ±‚ struct heartbeat_packet { uint16_t payload_length; // å£°æ˜ä¸º65535 char payload[1]; // å®é™…ä»…1å­—èŠ‚ } åæœï¼šæœåŠ¡å™¨è¿”å›64KBå†…å­˜æ•°æ®ï¼ˆå¯èƒ½åŒ…å«ç§é’¥ç­‰æ•æ„Ÿä¿¡æ¯ï¼‰ ä¿®å¤æ–¹æ¡ˆï¼š å¢åŠ å†…å­˜è¾¹ç•Œæ£€æŸ¥ ä½¿ç”¨å¸¦å†…å­˜ä¿æŠ¤çš„å®ç°ï¼ˆå¦‚Rusté‡å†™å…³é”®æ¨¡å—ï¼‰ å¼ºåˆ¶è¯ä¹¦åŠé”€ä¸é‡æ–°ç­¾å‘ å››ã€å‰æ²¿å‘å±• link åé‡å­å¯†ç è¿ç§»ï¼š\nNISTæ ‡å‡†åŒ–è¿›å±•ï¼ˆCRYSTALS-Kyberç­‰ç®—æ³•ï¼‰ æ··åˆå¯†é’¥äº¤æ¢æ–¹æ¡ˆï¼ˆPQC + ECCï¼‰ éšç§å¢å¼ºæŠ€æœ¯ï¼š\nåŒæ€åŠ å¯†åœ¨äº‘è®¡ç®—ä¸­çš„åº”ç”¨ å®‰å…¨å¤šæ–¹è®¡ç®—åè®®ä¼˜åŒ– ç¡¬ä»¶å®‰å…¨æ¼”è¿›ï¼š\nTPM 2.0å¯ä¿¡å¹³å°æ¨¡å— Intel SGX/TDXæœºå¯†è®¡ç®— ç»“è¯­ linkæ„å»ºå®‰å…¨çš„å¯†ç ç³»ç»Ÿéœ€è¦åè®®è®¾è®¡ã€ç®—æ³•å®ç°ã€å¯†é’¥ç®¡ç†ã€å®‰å…¨å®¡è®¡çš„å¤šç»´åº¦ååŒã€‚éšç€é‡å­è®¡ç®—ã€AIæ”»é˜²ç­‰æ–°æŒ‘æˆ˜çš„å‡ºç°ï¼Œå¯†ç åè®®ä¸ç³»ç»Ÿå®‰å…¨å°†æŒç»­æ¼”è¿›ï¼Œåœ¨ä¿éšœæ•°å­—ä¸–ç•Œå¯ä¿¡äº¤äº’çš„é“è·¯ä¸Šå‘æŒ¥å…³é”®ä½œç”¨ã€‚\n"
            }
        );
    index.add(
            {
                id:  28 ,
                href: "\/docs\/math\/",
                title: "æ•°å­¦",
                description: "",
                content: ""
            }
        );
    index.add(
            {
                id:  29 ,
                href: "\/docs\/information\/data\/",
                title: "æ•°æ®",
                description: "",
                content: ""
            }
        );
    index.add(
            {
                id:  30 ,
                href: "\/docs\/information\/data\/data_classification\/",
                title: "æ•°æ®å­˜å‚¨ç±»å‹åŠç‰¹ç‚¹",
                description: "æ•°æ®å­˜å‚¨æŠ€æœ¯æ ¹æ®ä¸åŒçš„ç»´åº¦å¯åˆ’åˆ†ä¸ºå¤šç§ç±»å‹ï¼Œæ¯ç§ç±»å‹é’ˆå¯¹ç‰¹å®šåœºæ™¯å’Œéœ€æ±‚è®¾è®¡ã€‚ä»¥ä¸‹æ˜¯æ•°æ®å­˜å‚¨çš„ä¸»è¦åˆ†ç±»åŠå…¶æ ¸å¿ƒç‰¹ç‚¹ï¼š\nä¸€ã€æŒ‰å­˜å‚¨ä»‹è´¨åˆ†ç±» link1. ç£æ€§å­˜å‚¨ link æœºæ¢°ç¡¬ç›˜ï¼ˆHDDï¼‰\nç‰¹ç‚¹ï¼šæˆæœ¬ä½ã€å®¹é‡å¤§ï¼Œé€‚åˆå†·æ•°æ®å­˜å‚¨ã€‚ ç£å¸¦\nç‰¹ç‚¹ï¼šè¶…ä½æˆæœ¬ã€é•¿æœŸå½’æ¡£ï¼Œä½†è¯»å†™é€Ÿåº¦æ…¢ã€‚ 2. å›ºæ€å­˜å‚¨ link SSD\nç‰¹ç‚¹ï¼šé«˜æ€§èƒ½ã€ä½å»¶è¿Ÿï¼Œé€‚åˆçƒ­æ•°æ®æˆ–å®æ—¶å¤„ç†åœºæ™¯ã€‚ 3. å…‰å­˜å‚¨ link å…‰ç›˜/è“å…‰\nç‰¹ç‚¹ï¼šé•¿æœŸä¿å­˜ã€é˜²ç¯¡æ”¹ï¼Œé€‚åˆå½’æ¡£ï¼ˆå¦‚åŒ»ç–—å½±åƒã€æ³•å¾‹æ–‡ä»¶ï¼‰ã€‚ 4. å†…å­˜å­˜å‚¨ link RAM/ç¼“å­˜ï¼ˆå¦‚Redisï¼‰\nç‰¹ç‚¹ï¼šè¶…é«˜é€Ÿè¯»å†™ï¼Œç”¨äºä¸´æ—¶æ•°æ®æˆ–ç¼“å­˜å±‚ã€‚ äºŒã€æŒ‰æ•°æ®æ ¼å¼å’Œæ¨¡å‹åˆ†ç±» link1. ç»“æ„åŒ–æ•°æ®å­˜å‚¨ link å…³ç³»å‹æ•°æ®åº“ï¼ˆRDBMSï¼‰\nä»£è¡¨ï¼šMySQLã€PostgreSQL\nåœºæ™¯ï¼šæ”¯æŒ ACID äº‹åŠ¡ï¼Œé€‚åˆè®¢å•ã€ç”¨æˆ·ä¿¡æ¯ç­‰ç»“æ„åŒ–æ•°æ®ã€‚ 2. éç»“æ„åŒ–æ•°æ®å­˜å‚¨ link NoSQL æ•°æ®åº“ é”®å€¼å­˜å‚¨ï¼šRedisã€DynamoDBï¼ˆé€‚åˆç¼“å­˜æˆ–ä¼šè¯æ•°æ®ï¼‰ æ–‡æ¡£å­˜å‚¨ï¼šMongoDBã€Couchbaseï¼ˆå­˜å‚¨ JSON/XML æ–‡æ¡£ï¼‰ åˆ—æ—å­˜å‚¨ï¼šCassandraã€HBaseï¼ˆé€‚åˆæµ·é‡æ—¶åºæ•°æ®æˆ–æ—¥å¿—ï¼‰ å›¾æ•°æ®åº“ï¼šNeo4jã€Amazon Neptuneï¼ˆé«˜æ•ˆå¤„ç†å…³è”å…³ç³»ï¼‰ å¯¹è±¡å­˜å‚¨\nä»£è¡¨ï¼šAWS S3ã€MinIO\nåœºæ™¯ï¼šå­˜å‚¨æ–‡ä»¶ã€å›¾ç‰‡ã€è§†é¢‘ç­‰éç»“æ„åŒ–æ•°æ®ã€‚ 3. åŠç»“æ„åŒ–æ•°æ®å­˜å‚¨ link æœç´¢å¼•æ“æ•°æ®åº“\nä»£è¡¨ï¼šElasticsearch\nç‰¹ç‚¹ï¼šæ”¯æŒå…¨æ–‡æ£€ç´¢å’Œå¤æ‚åˆ†æã€‚ ä¸‰ã€æŒ‰ä½¿ç”¨åœºæ™¯åˆ†ç±» link1. åœ¨çº¿äº‹åŠ¡å¤„ç†ï¼ˆOLTPï¼‰ link åœºæ™¯ï¼šé«˜å¹¶å‘ã€ä½å»¶è¿Ÿçš„å®æ—¶äº‹åŠ¡å¤„ç†ï¼ˆå¦‚é“¶è¡Œäº¤æ˜“ã€ç”µå•†è®¢å•ï¼‰ã€‚ 2. åœ¨çº¿åˆ†æå¤„ç†ï¼ˆOLAPï¼‰ link ä»£è¡¨ï¼šSnowflakeã€Redshift åœºæ™¯ï¼šå¤§æ•°æ®åˆ†æï¼Œå¦‚æ•°æ®ä»“åº“ã€å®æ—¶æ•°ä»“ï¼ˆClickHouseã€Druidï¼‰ã€‚ 3. æ—¶åºæ•°æ®å­˜å‚¨ link ä»£è¡¨ï¼šInfluxDBã€TimescaleDB åœºæ™¯ï¼šç‰©è”ç½‘ã€ç›‘æ§æ•°æ®ç­‰æ—¶é—´åºåˆ—åœºæ™¯ã€‚ 4. æ—¥å¿—å­˜å‚¨ link ä»£è¡¨ï¼šElasticsearchã€Loki ç‰¹ç‚¹ï¼šæ”¯æŒå¿«é€Ÿæ£€ç´¢ä¸åˆ†æã€‚ 5. åœ°ç†ç©ºé—´æ•°æ®å­˜å‚¨ link ä»£è¡¨ï¼šPostGISï¼ˆåŸºäº PostgreSQLï¼‰ åœºæ™¯ï¼šå¤„ç†åœ°å›¾ã€ä½ç½®æ•°æ®ã€‚ å››ã€æŒ‰æ¶æ„ç±»å‹åˆ†ç±» link1. é›†ä¸­å¼å­˜å‚¨ link NASï¼ˆç½‘ç»œé™„åŠ å­˜å‚¨ï¼‰\nç‰¹ç‚¹ï¼šæ–‡ä»¶çº§å…±äº«å­˜å‚¨ï¼ˆå¦‚ä¼ä¸šæ–‡ä»¶æœåŠ¡å™¨ï¼‰ã€‚ SANï¼ˆå­˜å‚¨åŒºåŸŸç½‘ç»œï¼‰\nç‰¹ç‚¹ï¼šå—çº§å­˜å‚¨ï¼Œé«˜æ€§èƒ½ï¼ˆå¦‚æ•°æ®åº“å­˜å‚¨ï¼‰ã€‚ 2. åˆ†å¸ƒå¼å­˜å‚¨ link åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ\nä»£è¡¨ï¼šHDFSã€Ceph\nåœºæ™¯ï¼šå¤§æ•°æ®åœºæ™¯çš„æ¨ªå‘æ‰©å±•ã€‚ åˆ†å¸ƒå¼æ•°æ®åº“\nä»£è¡¨ï¼šCockroachDBã€TiDB\nç‰¹ç‚¹ï¼šé«˜å¯ç”¨ã€å…¨çƒéƒ¨ç½²èƒ½åŠ›ã€‚ 3. äº‘å­˜å‚¨ link å¯¹è±¡å­˜å‚¨ï¼šAWS S3ã€Azure Blob Storageï¼ˆé€‚åˆæµ·é‡éç»“æ„åŒ–æ•°æ®ï¼‰ å—å­˜å‚¨ï¼šAWS EBSï¼ˆä¸ºäº‘æœåŠ¡å™¨æä¾›æŒä¹…åŒ–ç£ç›˜ï¼‰ 4. è¾¹ç¼˜å­˜å‚¨ link åœºæ™¯ï¼šIoT è®¾å¤‡ã€CDN è¾¹ç¼˜èŠ‚ç‚¹æœ¬åœ°åŒ–å­˜å‚¨ã€‚ äº”ã€æŒ‰æ•°æ®è®¿é—®é¢‘ç‡åˆ†ç±» link1. çƒ­å­˜å‚¨ï¼ˆHot Storageï¼‰ link ç‰¹ç‚¹ï¼šé¢‘ç¹è®¿é—®ï¼Œä½¿ç”¨ SSD æˆ–å†…å­˜å­˜å‚¨ï¼ˆå¦‚ Redisï¼‰ã€‚ 2. æ¸©å­˜å‚¨ï¼ˆWarm Storageï¼‰ link ç‰¹ç‚¹ï¼šä¸­ç­‰è®¿é—®é¢‘ç‡ï¼Œæˆæœ¬ä¸æ€§èƒ½å¹³è¡¡ï¼ˆå¦‚æ ‡å‡†äº‘å­˜å‚¨ï¼‰ã€‚ 3. å†·å­˜å‚¨ï¼ˆCold Storageï¼‰ link ä»£è¡¨ï¼šAWS Glacierã€ç£å¸¦åº“ ç‰¹ç‚¹ï¼šæå°‘è®¿é—®ï¼Œä½æˆæœ¬é•¿æœŸä¿å­˜ã€‚ å…­ã€å…¶ä»–ç‰¹æ®Šç±»å‹ link1. åŒºå—é“¾å­˜å‚¨ link ä»£è¡¨ï¼šIPFSã€Arweave ç‰¹ç‚¹ï¼šå»ä¸­å¿ƒåŒ–ã€ä¸å¯ç¯¡æ”¹ã€‚ 2. å†…å­˜æ•°æ®åº“ link ä»£è¡¨ï¼šSAP HANAã€VoltDB ç‰¹ç‚¹ï¼šå…¨é‡æ•°æ®é©»ç•™å†…å­˜ï¼Œè¿½æ±‚æè‡´æ€§èƒ½ã€‚ 3. å¤šæ¨¡å‹æ•°æ®åº“ link ä»£è¡¨ï¼šArangoDB ç‰¹ç‚¹ï¼šåŒæ—¶æ”¯æŒé”®å€¼ã€æ–‡æ¡£ã€å›¾ç­‰å¤šç§æ•°æ®æ¨¡å‹ã€‚ æ€»ç»“ä¸é€‰å‹å»ºè®® linké€‰æ‹©æ•°æ®å­˜å‚¨æŠ€æœ¯æ—¶éœ€ç»¼åˆè€ƒè™‘ä»¥ä¸‹å› ç´ ï¼š\n",
                content: "æ•°æ®å­˜å‚¨æŠ€æœ¯æ ¹æ®ä¸åŒçš„ç»´åº¦å¯åˆ’åˆ†ä¸ºå¤šç§ç±»å‹ï¼Œæ¯ç§ç±»å‹é’ˆå¯¹ç‰¹å®šåœºæ™¯å’Œéœ€æ±‚è®¾è®¡ã€‚ä»¥ä¸‹æ˜¯æ•°æ®å­˜å‚¨çš„ä¸»è¦åˆ†ç±»åŠå…¶æ ¸å¿ƒç‰¹ç‚¹ï¼š\nä¸€ã€æŒ‰å­˜å‚¨ä»‹è´¨åˆ†ç±» link1. ç£æ€§å­˜å‚¨ link æœºæ¢°ç¡¬ç›˜ï¼ˆHDDï¼‰\nç‰¹ç‚¹ï¼šæˆæœ¬ä½ã€å®¹é‡å¤§ï¼Œé€‚åˆå†·æ•°æ®å­˜å‚¨ã€‚ ç£å¸¦\nç‰¹ç‚¹ï¼šè¶…ä½æˆæœ¬ã€é•¿æœŸå½’æ¡£ï¼Œä½†è¯»å†™é€Ÿåº¦æ…¢ã€‚ 2. å›ºæ€å­˜å‚¨ link SSD\nç‰¹ç‚¹ï¼šé«˜æ€§èƒ½ã€ä½å»¶è¿Ÿï¼Œé€‚åˆçƒ­æ•°æ®æˆ–å®æ—¶å¤„ç†åœºæ™¯ã€‚ 3. å…‰å­˜å‚¨ link å…‰ç›˜/è“å…‰\nç‰¹ç‚¹ï¼šé•¿æœŸä¿å­˜ã€é˜²ç¯¡æ”¹ï¼Œé€‚åˆå½’æ¡£ï¼ˆå¦‚åŒ»ç–—å½±åƒã€æ³•å¾‹æ–‡ä»¶ï¼‰ã€‚ 4. å†…å­˜å­˜å‚¨ link RAM/ç¼“å­˜ï¼ˆå¦‚Redisï¼‰\nç‰¹ç‚¹ï¼šè¶…é«˜é€Ÿè¯»å†™ï¼Œç”¨äºä¸´æ—¶æ•°æ®æˆ–ç¼“å­˜å±‚ã€‚ äºŒã€æŒ‰æ•°æ®æ ¼å¼å’Œæ¨¡å‹åˆ†ç±» link1. ç»“æ„åŒ–æ•°æ®å­˜å‚¨ link å…³ç³»å‹æ•°æ®åº“ï¼ˆRDBMSï¼‰\nä»£è¡¨ï¼šMySQLã€PostgreSQL\nåœºæ™¯ï¼šæ”¯æŒ ACID äº‹åŠ¡ï¼Œé€‚åˆè®¢å•ã€ç”¨æˆ·ä¿¡æ¯ç­‰ç»“æ„åŒ–æ•°æ®ã€‚ 2. éç»“æ„åŒ–æ•°æ®å­˜å‚¨ link NoSQL æ•°æ®åº“ é”®å€¼å­˜å‚¨ï¼šRedisã€DynamoDBï¼ˆé€‚åˆç¼“å­˜æˆ–ä¼šè¯æ•°æ®ï¼‰ æ–‡æ¡£å­˜å‚¨ï¼šMongoDBã€Couchbaseï¼ˆå­˜å‚¨ JSON/XML æ–‡æ¡£ï¼‰ åˆ—æ—å­˜å‚¨ï¼šCassandraã€HBaseï¼ˆé€‚åˆæµ·é‡æ—¶åºæ•°æ®æˆ–æ—¥å¿—ï¼‰ å›¾æ•°æ®åº“ï¼šNeo4jã€Amazon Neptuneï¼ˆé«˜æ•ˆå¤„ç†å…³è”å…³ç³»ï¼‰ å¯¹è±¡å­˜å‚¨\nä»£è¡¨ï¼šAWS S3ã€MinIO\nåœºæ™¯ï¼šå­˜å‚¨æ–‡ä»¶ã€å›¾ç‰‡ã€è§†é¢‘ç­‰éç»“æ„åŒ–æ•°æ®ã€‚ 3. åŠç»“æ„åŒ–æ•°æ®å­˜å‚¨ link æœç´¢å¼•æ“æ•°æ®åº“\nä»£è¡¨ï¼šElasticsearch\nç‰¹ç‚¹ï¼šæ”¯æŒå…¨æ–‡æ£€ç´¢å’Œå¤æ‚åˆ†æã€‚ ä¸‰ã€æŒ‰ä½¿ç”¨åœºæ™¯åˆ†ç±» link1. åœ¨çº¿äº‹åŠ¡å¤„ç†ï¼ˆOLTPï¼‰ link åœºæ™¯ï¼šé«˜å¹¶å‘ã€ä½å»¶è¿Ÿçš„å®æ—¶äº‹åŠ¡å¤„ç†ï¼ˆå¦‚é“¶è¡Œäº¤æ˜“ã€ç”µå•†è®¢å•ï¼‰ã€‚ 2. åœ¨çº¿åˆ†æå¤„ç†ï¼ˆOLAPï¼‰ link ä»£è¡¨ï¼šSnowflakeã€Redshift åœºæ™¯ï¼šå¤§æ•°æ®åˆ†æï¼Œå¦‚æ•°æ®ä»“åº“ã€å®æ—¶æ•°ä»“ï¼ˆClickHouseã€Druidï¼‰ã€‚ 3. æ—¶åºæ•°æ®å­˜å‚¨ link ä»£è¡¨ï¼šInfluxDBã€TimescaleDB åœºæ™¯ï¼šç‰©è”ç½‘ã€ç›‘æ§æ•°æ®ç­‰æ—¶é—´åºåˆ—åœºæ™¯ã€‚ 4. æ—¥å¿—å­˜å‚¨ link ä»£è¡¨ï¼šElasticsearchã€Loki ç‰¹ç‚¹ï¼šæ”¯æŒå¿«é€Ÿæ£€ç´¢ä¸åˆ†æã€‚ 5. åœ°ç†ç©ºé—´æ•°æ®å­˜å‚¨ link ä»£è¡¨ï¼šPostGISï¼ˆåŸºäº PostgreSQLï¼‰ åœºæ™¯ï¼šå¤„ç†åœ°å›¾ã€ä½ç½®æ•°æ®ã€‚ å››ã€æŒ‰æ¶æ„ç±»å‹åˆ†ç±» link1. é›†ä¸­å¼å­˜å‚¨ link NASï¼ˆç½‘ç»œé™„åŠ å­˜å‚¨ï¼‰\nç‰¹ç‚¹ï¼šæ–‡ä»¶çº§å…±äº«å­˜å‚¨ï¼ˆå¦‚ä¼ä¸šæ–‡ä»¶æœåŠ¡å™¨ï¼‰ã€‚ SANï¼ˆå­˜å‚¨åŒºåŸŸç½‘ç»œï¼‰\nç‰¹ç‚¹ï¼šå—çº§å­˜å‚¨ï¼Œé«˜æ€§èƒ½ï¼ˆå¦‚æ•°æ®åº“å­˜å‚¨ï¼‰ã€‚ 2. åˆ†å¸ƒå¼å­˜å‚¨ link åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ\nä»£è¡¨ï¼šHDFSã€Ceph\nåœºæ™¯ï¼šå¤§æ•°æ®åœºæ™¯çš„æ¨ªå‘æ‰©å±•ã€‚ åˆ†å¸ƒå¼æ•°æ®åº“\nä»£è¡¨ï¼šCockroachDBã€TiDB\nç‰¹ç‚¹ï¼šé«˜å¯ç”¨ã€å…¨çƒéƒ¨ç½²èƒ½åŠ›ã€‚ 3. äº‘å­˜å‚¨ link å¯¹è±¡å­˜å‚¨ï¼šAWS S3ã€Azure Blob Storageï¼ˆé€‚åˆæµ·é‡éç»“æ„åŒ–æ•°æ®ï¼‰ å—å­˜å‚¨ï¼šAWS EBSï¼ˆä¸ºäº‘æœåŠ¡å™¨æä¾›æŒä¹…åŒ–ç£ç›˜ï¼‰ 4. è¾¹ç¼˜å­˜å‚¨ link åœºæ™¯ï¼šIoT è®¾å¤‡ã€CDN è¾¹ç¼˜èŠ‚ç‚¹æœ¬åœ°åŒ–å­˜å‚¨ã€‚ äº”ã€æŒ‰æ•°æ®è®¿é—®é¢‘ç‡åˆ†ç±» link1. çƒ­å­˜å‚¨ï¼ˆHot Storageï¼‰ link ç‰¹ç‚¹ï¼šé¢‘ç¹è®¿é—®ï¼Œä½¿ç”¨ SSD æˆ–å†…å­˜å­˜å‚¨ï¼ˆå¦‚ Redisï¼‰ã€‚ 2. æ¸©å­˜å‚¨ï¼ˆWarm Storageï¼‰ link ç‰¹ç‚¹ï¼šä¸­ç­‰è®¿é—®é¢‘ç‡ï¼Œæˆæœ¬ä¸æ€§èƒ½å¹³è¡¡ï¼ˆå¦‚æ ‡å‡†äº‘å­˜å‚¨ï¼‰ã€‚ 3. å†·å­˜å‚¨ï¼ˆCold Storageï¼‰ link ä»£è¡¨ï¼šAWS Glacierã€ç£å¸¦åº“ ç‰¹ç‚¹ï¼šæå°‘è®¿é—®ï¼Œä½æˆæœ¬é•¿æœŸä¿å­˜ã€‚ å…­ã€å…¶ä»–ç‰¹æ®Šç±»å‹ link1. åŒºå—é“¾å­˜å‚¨ link ä»£è¡¨ï¼šIPFSã€Arweave ç‰¹ç‚¹ï¼šå»ä¸­å¿ƒåŒ–ã€ä¸å¯ç¯¡æ”¹ã€‚ 2. å†…å­˜æ•°æ®åº“ link ä»£è¡¨ï¼šSAP HANAã€VoltDB ç‰¹ç‚¹ï¼šå…¨é‡æ•°æ®é©»ç•™å†…å­˜ï¼Œè¿½æ±‚æè‡´æ€§èƒ½ã€‚ 3. å¤šæ¨¡å‹æ•°æ®åº“ link ä»£è¡¨ï¼šArangoDB ç‰¹ç‚¹ï¼šåŒæ—¶æ”¯æŒé”®å€¼ã€æ–‡æ¡£ã€å›¾ç­‰å¤šç§æ•°æ®æ¨¡å‹ã€‚ æ€»ç»“ä¸é€‰å‹å»ºè®® linké€‰æ‹©æ•°æ®å­˜å‚¨æŠ€æœ¯æ—¶éœ€ç»¼åˆè€ƒè™‘ä»¥ä¸‹å› ç´ ï¼š\næ•°æ®æ¨¡å‹ï¼šç»“æ„åŒ–ï¼ˆRDBMSï¼‰ vs éç»“æ„åŒ–ï¼ˆNoSQL/å¯¹è±¡å­˜å‚¨ï¼‰ æ€§èƒ½éœ€æ±‚ï¼šå»¶è¿Ÿæ•æ„Ÿï¼ˆSSD/å†…å­˜ï¼‰ vs ååé‡ä¼˜å…ˆï¼ˆåˆ†å¸ƒå¼å­˜å‚¨ï¼‰ æ‰©å±•æ€§ï¼šæ°´å¹³æ‰©å±•ï¼ˆCassandra/HDFSï¼‰ vs å‚ç›´æ‰©å±•ï¼ˆä¼ ç»Ÿæ•°æ®åº“ï¼‰ æˆæœ¬ï¼šçƒ­å­˜å‚¨æˆæœ¬ \u003e å†·å­˜å‚¨æˆæœ¬ åœºæ™¯ç‰¹æ€§ï¼šäº‹åŠ¡ï¼ˆOLTPï¼‰ vs åˆ†æï¼ˆOLAPï¼‰ å…¸å‹æ··åˆæ¶æ„ç¤ºä¾‹ï¼š\nçƒ­æ•°æ®ï¼šRedis ç¼“å­˜ æ ¸å¿ƒä¸šåŠ¡æ•°æ®ï¼šMySQL/PostgreSQL æ—¥å¿—æ•°æ®ï¼šElasticsearch éç»“æ„åŒ–æ–‡ä»¶ï¼šå¯¹è±¡å­˜å‚¨ï¼ˆå¦‚ S3ï¼‰ å†å²å½’æ¡£ï¼šå†·å­˜å‚¨ï¼ˆå¦‚ Glacierï¼‰ "
            }
        );
    index.add(
            {
                id:  31 ,
                href: "\/docs\/information\/software\/cloud\/service-discovery\/",
                title: "æœåŠ¡å‘ç°",
                description: "",
                content: ""
            }
        );
    index.add(
            {
                id:  32 ,
                href: "\/docs\/economy\/financial_market_base\/",
                title: "é‡‘èå¸‚åœºåŸºç¡€",
                description: "ä¸€ã€é‡‘èå¸‚åœºçš„æ ¸å¿ƒèµ„äº§ç±»åˆ« link1. è‚¡ç¥¨ï¼ˆEquitiesï¼‰ linkå®šä¹‰ä¸æœ¬è´¨ï¼š è‚¡ç¥¨ä»£è¡¨å…¬å¸æ‰€æœ‰æƒçš„ä»½é¢ï¼ŒæŒæœ‰è€…ï¼ˆè‚¡ä¸œï¼‰å¯¹å…¬å¸èµ„äº§å’Œæ”¶ç›Šæ‹¥æœ‰å‰©ä½™ç´¢å–æƒã€‚è‚¡ç¥¨å¸‚åœºæ˜¯ä¼ä¸šç›´æ¥èèµ„çš„é‡è¦æ¸ é“ï¼Œä¹Ÿæ˜¯æŠ•èµ„è€…å‚ä¸ä¼ä¸šæˆé•¿çš„ä¸»è¦æ–¹å¼ã€‚\nå…³é”®ç‰¹å¾ï¼š\næ°¸ä¹…æ€§èµ„æœ¬ï¼šæ— åˆ°æœŸæ—¥ï¼Œé™¤éå…¬å¸å›è´­æˆ–ç§æœ‰åŒ– æ”¶ç›Šæ„æˆï¼šèµ„æœ¬å¢å€¼ï¼ˆè‚¡ä»·ä¸Šæ¶¨ï¼‰+è‚¡æ¯æ”¶å…¥ æŠ•ç¥¨æƒï¼šæ™®é€šè‚¡é€šå¸¸äº«æœ‰å…¬å¸æ²»ç†æƒï¼ˆç‰¹æ®Šç±»åˆ«è‚¡é™¤å¤–ï¼‰ æœ‰é™è´£ä»»ï¼šè‚¡ä¸œæŸå¤±ä¸è¶…è¿‡æŠ•èµ„é‡‘é¢ ä¸»è¦ç±»å‹ï¼š\næ™®é€šè‚¡ï¼šåŸºæœ¬æ‰€æœ‰æƒå½¢å¼ï¼Œå…·æœ‰æŠ•ç¥¨æƒå’Œåˆ†çº¢æƒ ä¼˜å…ˆè‚¡ï¼šå›ºå®šè‚¡æ¯ä¼˜å…ˆæƒï¼Œé€šå¸¸æ— æŠ•ç¥¨æƒï¼Œæ¸…ç®—æ—¶ä¼˜å…ˆå—å¿ å­˜æ‰˜å‡­è¯ï¼ˆå¦‚ADR/GDRï¼‰ï¼šè·¨å¢ƒä¸Šå¸‚çš„å˜é€šå½¢å¼ ä¼°å€¼è¦ç´ ï¼š\nåŸºæœ¬é¢åˆ†æï¼šPEæ¯”ç‡ã€PBæ¯”ç‡ã€è‚¡æ¯ç‡ã€è‡ªç”±ç°é‡‘æµ å¸‚åœºæƒ…ç»ªï¼šæŠ•èµ„è€…é¢„æœŸã€è¡Œä¸šè½®åŠ¨ã€å®è§‚ç»æµç¯å¢ƒ é£é™©ç»´åº¦ï¼š\nç³»ç»Ÿæ€§é£é™©ï¼ˆå¸‚åœºæ•´ä½“æ³¢åŠ¨ï¼‰ éç³»ç»Ÿæ€§é£é™©ï¼ˆå…¬å¸ç‰¹å®šé£é™©ï¼Œå¯é€šè¿‡åˆ†æ•£åŒ–é™ä½ï¼‰ 2. å€ºåˆ¸ï¼ˆFixed Income Securitiesï¼‰ linkå®šä¹‰ä¸æœ¬è´¨ï¼š å€ºåˆ¸æ˜¯å‘è¡Œäººï¼ˆæ”¿åºœ/ä¼ä¸šï¼‰ä¸æŠ•èµ„è€…ä¹‹é—´çš„å€ºæƒå€ºåŠ¡å¥‘çº¦ï¼Œæ‰¿è¯ºæŒ‰æœŸæ”¯ä»˜åˆ©æ¯å¹¶åˆ°æœŸå¿è¿˜æœ¬é‡‘ã€‚å€ºåˆ¸å¸‚åœºæ˜¯å€ºåŠ¡èèµ„çš„æ ¸å¿ƒåœºæ‰€ã€‚\næ ¸å¿ƒè¦ç´ ï¼š\nç¥¨é¢åˆ©ç‡ï¼šå›ºå®šæˆ–æµ®åŠ¨åˆ©æ¯æ”¯ä»˜ç‡ åˆ°æœŸæœŸé™ï¼šçŸ­æœŸï¼ˆ1å¹´å†…ï¼‰ã€ä¸­æœŸï¼ˆ1-10å¹´ï¼‰ã€é•¿æœŸï¼ˆ10å¹´ä»¥ä¸Šï¼‰ ä¿¡ç”¨è´¨é‡ï¼šç”±è¯„çº§æœºæ„ï¼ˆç©†è¿ªã€æ ‡æ™®ç­‰ï¼‰è¯„ä¼°çš„è¿çº¦é£é™© ä¸»è¦å“ç§ï¼š\nå›½å€ºï¼šå›½å®¶ä¿¡ç”¨èƒŒä¹¦ï¼Œè§†ä¸ºæ— é£é™©åˆ©ç‡åŸºå‡† å¸‚æ”¿å€ºåˆ¸ï¼šåœ°æ–¹æ”¿åºœå‘è¡Œï¼Œå¸¸å…·ç¨æ”¶ä¼˜æƒ  å…¬å¸å€ºï¼šä¼ä¸šå‘è¡Œï¼Œæ”¶ç›Šç‡åæ˜ ä¿¡ç”¨é£é™© èµ„äº§è¯åˆ¸åŒ–äº§å“ï¼šMBSã€ABSç­‰åŸºäºåº•å±‚èµ„äº§çš„ç»“æ„åŒ–å€ºåˆ¸ å®šä»·æœºåˆ¶ï¼š\nä¸å¸‚åœºåˆ©ç‡åå‘å˜åŠ¨ï¼šPrice = âˆ‘(C/(1+r)^t) + FV/(1+r)^n æ”¶ç›Šç‡æ›²çº¿ï¼šåæ˜ ä¸åŒæœŸé™åˆ©ç‡ç»“æ„çš„å…³é”®æŒ‡æ ‡ é£é™©ç±»å‹ï¼š\nåˆ©ç‡é£é™©ï¼ˆä¹…æœŸè¡¡é‡ï¼‰ ä¿¡ç”¨é£é™©ï¼ˆè¿çº¦å¯èƒ½æ€§ï¼‰ æµåŠ¨æ€§é£é™©ï¼ˆå¸‚åœºæ·±åº¦ä¸è¶³ï¼‰ å†æŠ•èµ„é£é™©ï¼ˆç°é‡‘æµå†æŠ•èµ„æ”¶ç›Šç‡ä¸‹é™ï¼‰ 3. æœŸè´§ï¼ˆFuturesï¼‰ linkå®šä¹‰ä¸æœ¬è´¨ï¼š æ ‡å‡†åŒ–åˆçº¦ï¼Œçº¦å®šæœªæ¥ç‰¹å®šæ—¶é—´ä»¥ç¡®å®šä»·æ ¼ä¹°å–æ ‡çš„èµ„äº§ã€‚æœŸè´§å¸‚åœºæœ€åˆä¸ºå¯¹å†²å•†å“ä»·æ ¼é£é™©è€Œç”Ÿï¼Œç°å·²æ‰©å±•åˆ°é‡‘èèµ„äº§ã€‚\næ ¸å¿ƒæœºåˆ¶ï¼š\næ ‡å‡†åŒ–åˆçº¦ï¼šäº¤æ˜“æ‰€ç»Ÿä¸€è§„å®šåˆçº¦è§„æ¨¡ã€äº¤å‰²å“è´¨ç­‰ ä¿è¯é‡‘äº¤æ˜“ï¼šæ æ†æ•ˆåº”ï¼ˆé€šå¸¸5-15%ä¿è¯é‡‘æ¯”ä¾‹ï¼‰ æ¯æ—¥æ— è´Ÿå€ºç»“ç®—ï¼šMark-to-Marketåˆ¶åº¦ äº¤å‰²æ–¹å¼ï¼šå®ç‰©äº¤å‰²æˆ–ç°é‡‘ç»“ç®— ä¸»è¦ç±»åˆ«ï¼š\nå•†å“æœŸè´§ï¼šåŸæ²¹ã€é»„é‡‘ã€å†œäº§å“ç­‰ é‡‘èæœŸè´§ï¼šè‚¡æŒ‡æœŸè´§ã€å›½å€ºæœŸè´§ã€å¤–æ±‡æœŸè´§ å¸‚åœºåŠŸèƒ½ï¼š\nä»·æ ¼å‘ç°ï¼šåæ˜ å¸‚åœºå¯¹æœªæ¥ä»·æ ¼çš„é›†ä½“é¢„æœŸ é£é™©ç®¡ç†ï¼šå¥—æœŸä¿å€¼å¯¹å†²ç°è´§é£é™© æŠ•æœºäº¤æ˜“ï¼šåˆ©ç”¨æ æ†è·å–ä»·å·®æ”¶ç›Š å®šä»·åŸºç¡€ï¼š\næŒæœ‰æˆæœ¬æ¨¡å‹ï¼šF = S Ã— e^(r-q)T åŸºå·®é£é™©ï¼šç°è´§ä¸æœŸè´§ä»·æ ¼ä¹‹å·® 4. æœŸæƒï¼ˆOptionsï¼‰ linkå®šä¹‰ä¸æœ¬è´¨ï¼š èµ‹äºˆæŒæœ‰è€…åœ¨ç‰¹å®šæ—¥æœŸæˆ–ä¹‹å‰ä»¥çº¦å®šä»·æ ¼ä¹°å–æ ‡çš„èµ„äº§æƒåˆ©çš„åˆçº¦ã€‚æœŸæƒä¹°æ–¹æ”¯ä»˜æƒåˆ©é‡‘è·å–é€‰æ‹©æƒï¼Œå–æ–¹æ”¶å–æƒåˆ©é‡‘æ‰¿æ‹…ä¹‰åŠ¡ã€‚\n",
                content: "ä¸€ã€é‡‘èå¸‚åœºçš„æ ¸å¿ƒèµ„äº§ç±»åˆ« link1. è‚¡ç¥¨ï¼ˆEquitiesï¼‰ linkå®šä¹‰ä¸æœ¬è´¨ï¼š è‚¡ç¥¨ä»£è¡¨å…¬å¸æ‰€æœ‰æƒçš„ä»½é¢ï¼ŒæŒæœ‰è€…ï¼ˆè‚¡ä¸œï¼‰å¯¹å…¬å¸èµ„äº§å’Œæ”¶ç›Šæ‹¥æœ‰å‰©ä½™ç´¢å–æƒã€‚è‚¡ç¥¨å¸‚åœºæ˜¯ä¼ä¸šç›´æ¥èèµ„çš„é‡è¦æ¸ é“ï¼Œä¹Ÿæ˜¯æŠ•èµ„è€…å‚ä¸ä¼ä¸šæˆé•¿çš„ä¸»è¦æ–¹å¼ã€‚\nå…³é”®ç‰¹å¾ï¼š\næ°¸ä¹…æ€§èµ„æœ¬ï¼šæ— åˆ°æœŸæ—¥ï¼Œé™¤éå…¬å¸å›è´­æˆ–ç§æœ‰åŒ– æ”¶ç›Šæ„æˆï¼šèµ„æœ¬å¢å€¼ï¼ˆè‚¡ä»·ä¸Šæ¶¨ï¼‰+è‚¡æ¯æ”¶å…¥ æŠ•ç¥¨æƒï¼šæ™®é€šè‚¡é€šå¸¸äº«æœ‰å…¬å¸æ²»ç†æƒï¼ˆç‰¹æ®Šç±»åˆ«è‚¡é™¤å¤–ï¼‰ æœ‰é™è´£ä»»ï¼šè‚¡ä¸œæŸå¤±ä¸è¶…è¿‡æŠ•èµ„é‡‘é¢ ä¸»è¦ç±»å‹ï¼š\næ™®é€šè‚¡ï¼šåŸºæœ¬æ‰€æœ‰æƒå½¢å¼ï¼Œå…·æœ‰æŠ•ç¥¨æƒå’Œåˆ†çº¢æƒ ä¼˜å…ˆè‚¡ï¼šå›ºå®šè‚¡æ¯ä¼˜å…ˆæƒï¼Œé€šå¸¸æ— æŠ•ç¥¨æƒï¼Œæ¸…ç®—æ—¶ä¼˜å…ˆå—å¿ å­˜æ‰˜å‡­è¯ï¼ˆå¦‚ADR/GDRï¼‰ï¼šè·¨å¢ƒä¸Šå¸‚çš„å˜é€šå½¢å¼ ä¼°å€¼è¦ç´ ï¼š\nåŸºæœ¬é¢åˆ†æï¼šPEæ¯”ç‡ã€PBæ¯”ç‡ã€è‚¡æ¯ç‡ã€è‡ªç”±ç°é‡‘æµ å¸‚åœºæƒ…ç»ªï¼šæŠ•èµ„è€…é¢„æœŸã€è¡Œä¸šè½®åŠ¨ã€å®è§‚ç»æµç¯å¢ƒ é£é™©ç»´åº¦ï¼š\nç³»ç»Ÿæ€§é£é™©ï¼ˆå¸‚åœºæ•´ä½“æ³¢åŠ¨ï¼‰ éç³»ç»Ÿæ€§é£é™©ï¼ˆå…¬å¸ç‰¹å®šé£é™©ï¼Œå¯é€šè¿‡åˆ†æ•£åŒ–é™ä½ï¼‰ 2. å€ºåˆ¸ï¼ˆFixed Income Securitiesï¼‰ linkå®šä¹‰ä¸æœ¬è´¨ï¼š å€ºåˆ¸æ˜¯å‘è¡Œäººï¼ˆæ”¿åºœ/ä¼ä¸šï¼‰ä¸æŠ•èµ„è€…ä¹‹é—´çš„å€ºæƒå€ºåŠ¡å¥‘çº¦ï¼Œæ‰¿è¯ºæŒ‰æœŸæ”¯ä»˜åˆ©æ¯å¹¶åˆ°æœŸå¿è¿˜æœ¬é‡‘ã€‚å€ºåˆ¸å¸‚åœºæ˜¯å€ºåŠ¡èèµ„çš„æ ¸å¿ƒåœºæ‰€ã€‚\næ ¸å¿ƒè¦ç´ ï¼š\nç¥¨é¢åˆ©ç‡ï¼šå›ºå®šæˆ–æµ®åŠ¨åˆ©æ¯æ”¯ä»˜ç‡ åˆ°æœŸæœŸé™ï¼šçŸ­æœŸï¼ˆ1å¹´å†…ï¼‰ã€ä¸­æœŸï¼ˆ1-10å¹´ï¼‰ã€é•¿æœŸï¼ˆ10å¹´ä»¥ä¸Šï¼‰ ä¿¡ç”¨è´¨é‡ï¼šç”±è¯„çº§æœºæ„ï¼ˆç©†è¿ªã€æ ‡æ™®ç­‰ï¼‰è¯„ä¼°çš„è¿çº¦é£é™© ä¸»è¦å“ç§ï¼š\nå›½å€ºï¼šå›½å®¶ä¿¡ç”¨èƒŒä¹¦ï¼Œè§†ä¸ºæ— é£é™©åˆ©ç‡åŸºå‡† å¸‚æ”¿å€ºåˆ¸ï¼šåœ°æ–¹æ”¿åºœå‘è¡Œï¼Œå¸¸å…·ç¨æ”¶ä¼˜æƒ  å…¬å¸å€ºï¼šä¼ä¸šå‘è¡Œï¼Œæ”¶ç›Šç‡åæ˜ ä¿¡ç”¨é£é™© èµ„äº§è¯åˆ¸åŒ–äº§å“ï¼šMBSã€ABSç­‰åŸºäºåº•å±‚èµ„äº§çš„ç»“æ„åŒ–å€ºåˆ¸ å®šä»·æœºåˆ¶ï¼š\nä¸å¸‚åœºåˆ©ç‡åå‘å˜åŠ¨ï¼šPrice = âˆ‘(C/(1+r)^t) + FV/(1+r)^n æ”¶ç›Šç‡æ›²çº¿ï¼šåæ˜ ä¸åŒæœŸé™åˆ©ç‡ç»“æ„çš„å…³é”®æŒ‡æ ‡ é£é™©ç±»å‹ï¼š\nåˆ©ç‡é£é™©ï¼ˆä¹…æœŸè¡¡é‡ï¼‰ ä¿¡ç”¨é£é™©ï¼ˆè¿çº¦å¯èƒ½æ€§ï¼‰ æµåŠ¨æ€§é£é™©ï¼ˆå¸‚åœºæ·±åº¦ä¸è¶³ï¼‰ å†æŠ•èµ„é£é™©ï¼ˆç°é‡‘æµå†æŠ•èµ„æ”¶ç›Šç‡ä¸‹é™ï¼‰ 3. æœŸè´§ï¼ˆFuturesï¼‰ linkå®šä¹‰ä¸æœ¬è´¨ï¼š æ ‡å‡†åŒ–åˆçº¦ï¼Œçº¦å®šæœªæ¥ç‰¹å®šæ—¶é—´ä»¥ç¡®å®šä»·æ ¼ä¹°å–æ ‡çš„èµ„äº§ã€‚æœŸè´§å¸‚åœºæœ€åˆä¸ºå¯¹å†²å•†å“ä»·æ ¼é£é™©è€Œç”Ÿï¼Œç°å·²æ‰©å±•åˆ°é‡‘èèµ„äº§ã€‚\næ ¸å¿ƒæœºåˆ¶ï¼š\næ ‡å‡†åŒ–åˆçº¦ï¼šäº¤æ˜“æ‰€ç»Ÿä¸€è§„å®šåˆçº¦è§„æ¨¡ã€äº¤å‰²å“è´¨ç­‰ ä¿è¯é‡‘äº¤æ˜“ï¼šæ æ†æ•ˆåº”ï¼ˆé€šå¸¸5-15%ä¿è¯é‡‘æ¯”ä¾‹ï¼‰ æ¯æ—¥æ— è´Ÿå€ºç»“ç®—ï¼šMark-to-Marketåˆ¶åº¦ äº¤å‰²æ–¹å¼ï¼šå®ç‰©äº¤å‰²æˆ–ç°é‡‘ç»“ç®— ä¸»è¦ç±»åˆ«ï¼š\nå•†å“æœŸè´§ï¼šåŸæ²¹ã€é»„é‡‘ã€å†œäº§å“ç­‰ é‡‘èæœŸè´§ï¼šè‚¡æŒ‡æœŸè´§ã€å›½å€ºæœŸè´§ã€å¤–æ±‡æœŸè´§ å¸‚åœºåŠŸèƒ½ï¼š\nä»·æ ¼å‘ç°ï¼šåæ˜ å¸‚åœºå¯¹æœªæ¥ä»·æ ¼çš„é›†ä½“é¢„æœŸ é£é™©ç®¡ç†ï¼šå¥—æœŸä¿å€¼å¯¹å†²ç°è´§é£é™© æŠ•æœºäº¤æ˜“ï¼šåˆ©ç”¨æ æ†è·å–ä»·å·®æ”¶ç›Š å®šä»·åŸºç¡€ï¼š\næŒæœ‰æˆæœ¬æ¨¡å‹ï¼šF = S Ã— e^(r-q)T åŸºå·®é£é™©ï¼šç°è´§ä¸æœŸè´§ä»·æ ¼ä¹‹å·® 4. æœŸæƒï¼ˆOptionsï¼‰ linkå®šä¹‰ä¸æœ¬è´¨ï¼š èµ‹äºˆæŒæœ‰è€…åœ¨ç‰¹å®šæ—¥æœŸæˆ–ä¹‹å‰ä»¥çº¦å®šä»·æ ¼ä¹°å–æ ‡çš„èµ„äº§æƒåˆ©çš„åˆçº¦ã€‚æœŸæƒä¹°æ–¹æ”¯ä»˜æƒåˆ©é‡‘è·å–é€‰æ‹©æƒï¼Œå–æ–¹æ”¶å–æƒåˆ©é‡‘æ‰¿æ‹…ä¹‰åŠ¡ã€‚\nåŸºæœ¬ç±»å‹ï¼š\nçœ‹æ¶¨æœŸæƒï¼ˆCallï¼‰ï¼šä¹°å…¥æ ‡çš„èµ„äº§çš„æƒåˆ© çœ‹è·ŒæœŸæƒï¼ˆPutï¼‰ï¼šå–å‡ºæ ‡çš„èµ„äº§çš„æƒåˆ© ç¾å¼æœŸæƒï¼šå¯åœ¨åˆ°æœŸå‰ä»»ä½•æ—¶é—´è¡Œæƒ æ¬§å¼æœŸæƒï¼šä»…èƒ½åœ¨åˆ°æœŸæ—¥è¡Œæƒ ä»·å€¼æ„æˆï¼š\nå†…åœ¨ä»·å€¼ï¼šç«‹å³è¡Œæƒå¯è·æ”¶ç›Šï¼ˆæ ‡çš„ç°ä»·ä¸è¡Œæƒä»·ä¹‹å·®ï¼‰ æ—¶é—´ä»·å€¼ï¼šåˆçº¦å‰©ä½™æ—¶é—´å¸¦æ¥çš„æ½œåœ¨ä»·å€¼ å®šä»·æ¨¡å‹ï¼š\nBlack-Scholesæ¨¡å‹ï¼šè€ƒè™‘æ ‡çš„ä»·ã€è¡Œæƒä»·ã€å‰©ä½™æ—¶é—´ã€æ³¢åŠ¨ç‡ã€æ— é£é™©åˆ©ç‡ äºŒå‰æ ‘æ¨¡å‹ï¼šç¦»æ•£æ—¶é—´æ¡†æ¶ä¸‹çš„å®šä»·æ–¹æ³• äº¤æ˜“ç­–ç•¥ï¼š\nä¿æŠ¤æ€§ç­–ç•¥ï¼ˆå¦‚ä¹°å…¥çœ‹è·ŒæœŸæƒå¯¹å†²æŒè‚¡é£é™©ï¼‰ æ”¶ç›Šå¢å¼ºç­–ç•¥ï¼ˆå¦‚å¤‡å…‘çœ‹æ¶¨æœŸæƒï¼‰ ä»·å·®ç­–ç•¥ï¼ˆå‚ç›´/æ°´å¹³/å¯¹è§’ä»·å·®ï¼‰ ç»„åˆç­–ç•¥ï¼ˆè·¨å¼/å®½è·¨å¼ç»„åˆï¼‰ é£é™©æŒ‡æ ‡ï¼ˆå¸Œè…Šå­—æ¯ï¼‰ï¼š\nDeltaï¼šæœŸæƒä»·æ ¼å¯¹æ ‡çš„èµ„äº§ä»·æ ¼å˜åŒ–çš„æ•æ„Ÿåº¦ Gammaï¼šDeltaçš„å˜åŒ–ç‡ Vegaï¼šå¯¹æ³¢åŠ¨ç‡å˜åŒ–çš„æ•æ„Ÿåº¦ Thetaï¼šæ—¶é—´è¡°å‡çš„å½±å“ Rhoï¼šå¯¹åˆ©ç‡å˜åŒ–çš„æ•æ„Ÿåº¦ äºŒã€é‡‘èå¸‚åœºè¿è¡Œæœºåˆ¶ link1. äº¤æ˜“è§„åˆ™ä½“ç³» linkå¸‚åœºç±»å‹ï¼š\näº¤æ˜“æ‰€å¸‚åœºï¼ˆå¦‚NYSEã€NASDAQï¼‰ï¼šé›†ä¸­ç«ä»·ï¼Œé€æ˜åº¦é«˜ åœºå¤–å¸‚åœºï¼ˆOTCï¼‰ï¼šåŒè¾¹åå•†ï¼Œçµæ´»æ€§å¤§ äº¤æ˜“æ—¶æ®µï¼š\nå¸¸è§„äº¤æ˜“æ—¶æ®µï¼ˆå¦‚ç¾è‚¡9:30-16:00ï¼‰ ç›˜å‰/ç›˜åäº¤æ˜“ï¼ˆæµåŠ¨æ€§è¾ƒä½ï¼‰ é›†åˆç«ä»·ï¼ˆå¼€ç›˜/æ”¶ç›˜ä»·æ ¼å½¢æˆæœºåˆ¶ï¼‰ ä»·æ ¼å½¢æˆæœºåˆ¶ï¼š\nè¿ç»­ç«ä»·ï¼šè®¢å•å®æ—¶åŒ¹é… åšå¸‚å•†åˆ¶åº¦ï¼šæä¾›ä¹°å–åŒå‘æŠ¥ä»· æ‹å–æœºåˆ¶ï¼šç‰¹å®šæ—¶ç‚¹çš„é›†ä¸­æ’®åˆ äº¤æ˜“é™åˆ¶ï¼š\næ¶¨è·Œåœæ¿ï¼ˆéƒ¨åˆ†å¸‚åœºè®¾ç½®æ¯æ—¥ä»·æ ¼æ³¢åŠ¨ä¸Šé™ï¼‰ ç†”æ–­æœºåˆ¶ï¼ˆå¸‚åœºå‰§çƒˆæ³¢åŠ¨æ—¶çš„æš‚åœäº¤æ˜“ï¼‰ å–ç©ºé™åˆ¶ï¼ˆå¦‚uptick ruleï¼‰ 2. è®¢å•ç±»å‹è¯¦è§£ linkåŸºæœ¬è®¢å•ç±»å‹ï¼š\nå¸‚ä»·è®¢å•ï¼ˆMarket Orderï¼‰ï¼šç«‹å³ä»¥æœ€ä¼˜å¯ç”¨ä»·æ ¼æ‰§è¡Œ\nä¼˜ç‚¹ï¼šæ‰§è¡Œç¡®å®šæ€§é«˜ é£é™©ï¼šæ»‘ç‚¹ï¼ˆå®é™…æˆäº¤ä»·ä¸é¢„æœŸåå·®ï¼‰ é™ä»·è®¢å•ï¼ˆLimit Orderï¼‰ï¼šæŒ‡å®šå¯æ¥å—çš„æœ€å·®ä»·æ ¼\nä¹°å…¥é™ä»·â‰¤å½“å‰å–ä»·æ–¹å¯ç«‹å³æˆäº¤ æä¾›æµåŠ¨æ€§ï¼ˆæŒ‚å•ç­‰å¾…å¯¹æ‰‹æ–¹ï¼‰ æ­¢æŸè®¢å•ï¼ˆStop Orderï¼‰ï¼šè§¦å‘æ¡ä»¶åè½¬ä¸ºå¸‚ä»·å•\nä¹°å…¥æ­¢æŸ\u003eå½“å‰å¸‚ä»·ï¼Œå–å‡ºæ­¢æŸ\u003cå½“å‰å¸‚ä»· å¸¸ç”¨äºé£é™©æ§åˆ¶ é«˜çº§è®¢å•ç±»å‹ï¼š\næ­¢æŸé™ä»·å•ï¼ˆStop-Limitï¼‰ï¼šè§¦å‘åè½¬ä¸ºé™ä»·å• å†°å±±è®¢å•ï¼ˆIcebergï¼‰ï¼šä»…æ˜¾ç¤ºéƒ¨åˆ†è®¢å•è§„æ¨¡ å…¨æˆ–æ— ï¼ˆAONï¼‰ï¼šè¦æ±‚å…¨éƒ¨æ•°é‡åŒæ—¶æˆäº¤ ç«‹å³æˆäº¤å¦åˆ™å–æ¶ˆï¼ˆIOCï¼‰ï¼šéƒ¨åˆ†æˆäº¤åå‰©ä½™è‡ªåŠ¨æ’¤é”€ æœ‰æ•ˆè‡³å–æ¶ˆï¼ˆGTCï¼‰ï¼šæŒç»­æœ‰æ•ˆç›´è‡³æ‰‹åŠ¨æ’¤é”€ ç®—æ³•è®¢å•ç­–ç•¥ï¼š\nTWAPï¼ˆæ—¶é—´åŠ æƒå¹³å‡ä»·æ ¼ï¼‰ VWAPï¼ˆæˆäº¤é‡åŠ æƒå¹³å‡ä»·æ ¼ï¼‰ ç‹™å‡»ç®—æ³•ï¼ˆæ•æ‰æµåŠ¨æ€§æœºä¼šï¼‰ æš—æ± å¯»å•ï¼ˆå¯»æ‰¾éšè—æµåŠ¨æ€§ï¼‰ 3. å¸‚åœºå¾®è§‚ç»“æ„ linkæµåŠ¨æ€§ç»´åº¦ï¼š\nå®½åº¦ï¼ˆä¹°å–ä»·å·®ï¼‰ï¼šBid-Ask Spreadåæ˜ å³æ—¶äº¤æ˜“æˆæœ¬ æ·±åº¦ï¼ˆè®¢å•ç°¿åšåº¦ï¼‰ï¼šå„ä»·æ ¼æ¡£ä½çš„æŒ‚å•æ•°é‡ å¼¹æ€§ï¼šä»·æ ¼åç¦»åæ¢å¤çš„é€Ÿåº¦ å¸‚åœºå‚ä¸è€…ï¼š\næµåŠ¨æ€§æä¾›è€…ï¼š\nåšå¸‚å•†ï¼šæ‰¿æ‹…å­˜è´§é£é™©ï¼Œèµšå–ä¹°å–ä»·å·® é«˜é¢‘äº¤æ˜“ï¼šé€šè¿‡å¿«é€ŸæŠ¥ä»·è·å–å¾®å°ä»·å·® æµåŠ¨æ€§æ¶ˆè€—è€…ï¼š\næœºæ„æŠ•èµ„è€…ï¼šå¤§é¢è®¢å•éœ€åˆ†æ‹†æ‰§è¡Œ é›¶å”®æŠ•èµ„è€…ï¼šé€šå¸¸ä¸ºä»·æ ¼æ¥å—è€… è®¢å•ç°¿åŠ¨æ€ï¼š\nä»·æ ¼ä¼˜å…ˆ/æ—¶é—´ä¼˜å…ˆçš„æ’®åˆè§„åˆ™ éšè—è®¢å•ä¸æ˜¾ç¤ºè®¢å•çš„ç›¸äº’ä½œç”¨ å¤§é¢è®¢å•å¯¹å¸‚åœºæƒ…ç»ªçš„å†²å‡»æ•ˆåº” äº¤æ˜“æˆæœ¬æ„æˆï¼š\næ˜¾æ€§æˆæœ¬ï¼šä½£é‡‘ã€ç¨è´¹ éšæ€§æˆæœ¬ï¼šæ»‘ç‚¹ã€å¸‚åœºå†²å‡»æˆæœ¬ æœºä¼šæˆæœ¬ï¼šæœªå®Œæˆäº¤æ˜“å¸¦æ¥çš„æ½œåœ¨æŸå¤± å¸‚åœºè´¨é‡è¯„ä¼°æŒ‡æ ‡ï¼š\nä¹°å–ä»·å·®æ¯”ç‡ï¼ˆSpread/ Mid Priceï¼‰ ä»·æ ¼æ³¢åŠ¨ç‡ï¼ˆçŸ­æœŸä»·æ ¼å˜åŒ–å¹…åº¦ï¼‰ è®¢å•æ‰§è¡Œç‡ï¼ˆè®¢å•å®Œæˆæ¯”ä¾‹ï¼‰ ä¿¡æ¯æ•ˆç‡ï¼ˆä»·æ ¼åæ˜ ä¿¡æ¯çš„é€Ÿåº¦ï¼‰ ä¸‰ã€å¸‚åœºé—´çš„ç›¸äº’ä½œç”¨ linkè·¨å¸‚åœºè”åŠ¨ï¼š\nè‚¡å€ºè··è··æ¿æ•ˆåº”ï¼ˆé£é™©åå¥½å˜åŒ–ï¼‰ å¤§å®—å•†å“ä¸é€šèƒ€é¢„æœŸçš„å…³è” æ±‡ç‡å˜åŠ¨å¯¹è·¨å›½èµ„äº§çš„å½±å“ å¥—åˆ©æœºåˆ¶ï¼š\nç°è´§-æœŸè´§å¥—åˆ©ï¼ˆCash-and-Carryï¼‰ è·¨å¸‚åœºå¥—åˆ©ï¼ˆåŒä¸€èµ„äº§åœ¨ä¸åŒå¸‚åœºçš„ä»·å·®ï¼‰ ETFå¥—åˆ©ï¼ˆå‡€å€¼ä¸å¸‚ä»·ä¹‹é—´çš„æŠ˜æº¢ä»·ï¼‰ æµåŠ¨æ€§ä¼ å¯¼ï¼š\nä¸»è¦å¸‚åœºçš„ä»·æ ¼æ³¢åŠ¨å¦‚ä½•å½±å“ç›¸å…³å¸‚åœº å±æœºæ—¶æœŸçš„æµåŠ¨æ€§æ¯ç«­ä¸èµ„äº§æŠ›å”®èºæ—‹ ä¸­å¤®é“¶è¡Œçš„æµåŠ¨æ€§æ³¨å…¥æ¸ é“ ç†è§£è¿™äº›é‡‘èå¸‚åœºåŸºç¡€è¦ç´ ï¼Œæ˜¯æ„å»ºæœ‰æ•ˆæŠ•èµ„ç­–ç•¥ã€å®æ–½é£é™©ç®¡ç†ä»¥åŠæŠŠæ¡å¸‚åœºæœºä¼šçš„å¿…è¦å‰æã€‚ä¸åŒèµ„äº§ç±»åˆ«å„æœ‰ç‰¹æ€§ï¼Œå¸‚åœºæœºåˆ¶åˆ™æ„æˆäº†ä»·æ ¼å‘ç°å’Œäº¤æ˜“æ‰§è¡Œçš„åˆ¶åº¦æ¡†æ¶ï¼ŒäºŒè€…å…±åŒå¡‘é€ äº†é‡‘èå¸‚åœºçš„è¿è¡Œè§„å¾‹ã€‚\n"
            }
        );
    index.add(
            {
                id:  33 ,
                href: "\/docs\/information\/software\/cloud\/service-discovery\/gateway\/",
                title: "GatewayAPI",
                description: "é™¤äº†ç›´æ¥ä½¿ç”¨ Service å’Œ Ingress ä¹‹å¤–ï¼ŒKubernetes ç¤¾åŒºè¿˜å‘èµ·äº† Gateway API é¡¹ç›®ï¼Œè¿™æ˜¯ä¸€ä¸ª CRDï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬å°† Kubernetes ä¸­çš„æœåŠ¡æš´éœ²åˆ°é›†ç¾¤å¤–ã€‚\nGateway API æ˜¯ä¸€ä¸ªç”± SIG-NETWORK ç®¡ç†çš„å¼€æºé¡¹ç›®ã€‚è¯¥é¡¹ç›®çš„ç›®æ ‡æ˜¯åœ¨ Kubernetes ç”Ÿæ€ç³»ç»Ÿä¸­å‘å±•æœåŠ¡ç½‘ç»œ APIã€‚Gateway API æä¾›äº†æš´éœ² Kubernetes åº”ç”¨çš„æ¥å£ â€”â€”Serviceã€Ingress ç­‰ã€‚\n",
                content: "é™¤äº†ç›´æ¥ä½¿ç”¨ Service å’Œ Ingress ä¹‹å¤–ï¼ŒKubernetes ç¤¾åŒºè¿˜å‘èµ·äº† Gateway API é¡¹ç›®ï¼Œè¿™æ˜¯ä¸€ä¸ª CRDï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬å°† Kubernetes ä¸­çš„æœåŠ¡æš´éœ²åˆ°é›†ç¾¤å¤–ã€‚\nGateway API æ˜¯ä¸€ä¸ªç”± SIG-NETWORK ç®¡ç†çš„å¼€æºé¡¹ç›®ã€‚è¯¥é¡¹ç›®çš„ç›®æ ‡æ˜¯åœ¨ Kubernetes ç”Ÿæ€ç³»ç»Ÿä¸­å‘å±•æœåŠ¡ç½‘ç»œ APIã€‚Gateway API æä¾›äº†æš´éœ² Kubernetes åº”ç”¨çš„æ¥å£ â€”â€”Serviceã€Ingress ç­‰ã€‚\nè¯¥ API åœ¨ Istio ä¸­ä¹Ÿè¢«åº”ç”¨ï¼Œç”¨äºå°† Kubernetes ä¸­çš„æœåŠ¡æš´éœ²åˆ°æœåŠ¡ç½‘æ ¼ä¹‹å¤–ã€‚\nç›®æ ‡ linkGateway API æ—¨åœ¨é€šè¿‡æä¾›è¡¨ç°æ€§çš„ã€å¯æ‰©å±•çš„ã€é¢å‘è§’è‰²çš„æ¥å£æ¥æ”¹å–„æœåŠ¡ç½‘ç»œï¼Œè¿™äº›æ¥å£ç”±è®¸å¤šå‚å•†å®ç°ï¼Œå¹¶å¾—åˆ°äº†ä¸šç•Œçš„å¹¿æ³›æ”¯æŒã€‚\nGateway API æ˜¯ä¸€ä¸ª API èµ„æºçš„é›†åˆ â€”â€” Serviceã€GatewayClassã€Gatewayã€HTTPRouteã€TCPRoute ç­‰ã€‚ä½¿ç”¨è¿™äº›èµ„æºå…±åŒä¸ºå„ç§ç½‘ç»œç”¨ä¾‹å»ºæ¨¡ã€‚\nä¸‹å›¾ä¸­å±•ç¤ºçš„æ˜¯ Kubernetes é›†ç¾¤ä¸­å››å±‚å’Œä¸ƒå±‚çš„ç½‘ç»œé…ç½®ã€‚ä»å›¾ä¸­å¯ä»¥çœ‹åˆ°é€šè¿‡å°†è¿™äº›èµ„æºå¯¹è±¡åˆ†ç¦»ï¼Œå¯ä»¥å®ç°é…ç½®ä¸Šçš„è§£è€¦ï¼Œç”±ä¸åŒè§’è‰²çš„äººå‘˜æ¥ç®¡ç†ã€‚\nflowchart TD subgraph å¹³å°æä¾› GatewayClass end subgraph å¹³å°è¿ç»´æä¾› Gateway end subgraph æœåŠ¡è¿ç»´æä¾› HTTPRouter1 HTTPRouter2 end GatewayClass --\u003e Gateway Gateway --\u003e HTTPRouter1 Gateway --\u003e HTTPRouter2 HTTPRouter1 --\u003e Service1 HTTPRouter1 --\u003e Service2 HTTPRouter2 --\u003e Service3 HTTPRouter2 --\u003e Service4 Gateway ç›¸è¾ƒäº Ingress åšäº†å“ªäº›æ”¹è¿›ï¼Ÿ linkæ›´å…·è¡¨ç°åŠ›\nGateway è¡¨è¾¾äº†æ›´å¤šçš„æ ¸å¿ƒåŠŸèƒ½ï¼Œæ¯”å¦‚åŸºäºå¤´çš„åŒ¹é…ã€æµé‡åŠ æƒå’Œå…¶ä»–åŠŸèƒ½ï¼Œè€Œè¿™äº›åŠŸèƒ½åœ¨ Ingress ä¸­åªèƒ½é€šè¿‡è‡ªå®šä¹‰æ–¹å¼å®ç°ã€‚\næ›´å…·æ‰©å±•æ€§\nGateway API å…è®¸åœ¨ API çš„å„ä¸ªå±‚æ¬¡ä¸Šé“¾æ¥è‡ªå®šä¹‰èµ„æºã€‚è¿™å°±å…è®¸åœ¨ API ç»“æ„çš„é€‚å½“ä½ç½®è¿›è¡Œæ›´ç²¾ç»†çš„å®šåˆ¶ã€‚\né¢å‘è§’è‰²\nå®ƒä»¬è¢«åˆ†ç¦»æˆä¸åŒçš„ API èµ„æºï¼Œè¿™äº›èµ„æºæ˜ å°„åˆ° Kubernetes ä¸Šè¿è¡Œåº”ç”¨ç¨‹åºçš„å¸¸è§è§’è‰²ã€‚\né€šç”¨æ€§\nè¿™ä¸æ˜¯ä¸€ç§æ”¹è¿›ï¼Œè€Œæ˜¯åº”è¯¥ä¿æŒä¸å˜ã€‚æ­£å¦‚ Ingress æ˜¯ä¸€ä¸ªå…·æœ‰ä¼—å¤šå®ç°çš„é€šç”¨è§„èŒƒä¸€æ ·ï¼ŒGateway API è¢«è®¾è®¡æˆä¸€ä¸ªç”±è®¸å¤šå®ç°æ”¯æŒçš„å¯ç§»æ¤è§„èŒƒã€‚\nå…±äº«ç½‘å…³\nå®ƒä»¬å…è®¸ç‹¬ç«‹çš„è·¯ç”±èµ„æºç»‘å®šåˆ°åŒä¸€ä¸ªç½‘å…³ï¼Œä»è€Œå®ç°è´Ÿè½½å‡è¡¡å™¨å’Œ VIP çš„å…±äº«ã€‚è¿™å…è®¸å›¢é˜Ÿå®‰å…¨åœ°å…±äº«åŸºç¡€è®¾æ–½ï¼Œè€Œä¸éœ€è¦ç›´æ¥åè°ƒã€‚\nç±»å‹åŒ–åç«¯å¼•ç”¨\né€šè¿‡ç±»å‹åŒ–åç«¯å¼•ç”¨ï¼ŒRoutes å¯ä»¥å¼•ç”¨ Kubernetes æœåŠ¡ï¼Œä¹Ÿå¯ä»¥å¼•ç”¨ä»»ä½•ä¸€ç§è¢«è®¾è®¡ä¸º Gateway åç«¯çš„ Kubernetes èµ„æºã€‚\nè·¨å‘½åç©ºé—´å¼•ç”¨\nè·¨è¶Šä¸åŒ Namespaces çš„è·¯ç”±å¯ä»¥ç»‘å®šåˆ°ç½‘å…³ã€‚è¿™æ ·ï¼Œå°½ç®¡å¯¹å·¥ä½œè´Ÿè½½è¿›è¡Œäº†å‘½åç©ºé—´åˆ’åˆ†ï¼Œä½†ä»å¯å…±äº«ç½‘ç»œåŸºç¡€è®¾æ–½ã€‚\nç±»\nGatewayClasses å°†è´Ÿè½½å‡è¡¡å®ç°çš„ç±»å‹å½¢å¼åŒ–ã€‚è¿™äº›ç±»ä½¿ç”¨æˆ·å¯ä»¥å¾ˆå®¹æ˜“å’Œæ˜ç¡®åœ°äº†è§£èµ„æºæ¨¡å‹æœ¬èº«æœ‰ä»€ä¹ˆæ ·çš„èƒ½åŠ›ã€‚\nåœ¨äº†è§£äº† Gateway API çš„ç›®çš„åï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å†çœ‹ä¸‹å®ƒçš„èµ„æºæ¨¡å‹ã€è¯·æ±‚æµç¨‹ã€TLS é…ç½®åŠæ‰©å±•ç‚¹ç­‰ã€‚\nè§’è‰² linkGateway API å¼€å‘è€…ä¸ºå…¶ä½¿ç”¨åœºæ™¯å®šä¹‰å››ç±»è§’è‰²ï¼š\nåŸºç¡€è®¾æ–½æä¾›æ–¹ï¼šå¦‚ AWSã€GKE ç­‰ é›†ç¾¤è¿ç»´ï¼šç®¡ç†æ•´ä¸ªé›†ç¾¤çš„è®¡ç®—ã€å­˜å‚¨ã€ç½‘ç»œã€å®‰å…¨ç­‰ åº”ç”¨ç¨‹åºå¼€å‘è€…ï¼šä¸ºè‡ªå·±å¼€å‘çš„åº”ç”¨è´Ÿè´£ï¼Œç®¡ç†åº”ç”¨çš„å¥å£®æ€§ åº”ç”¨ç®¡ç†å‘˜ï¼šä¸æ˜¯æ‰€æœ‰çš„å…¬å¸éƒ½æœ‰ï¼Œé€šå¸¸åœ¨ä¸€äº›å¤æ‚ç³»ç»Ÿä¸­ä¼šæœ‰ä¸“é—¨çš„åº”ç”¨ç®¡ç†å‘˜ èµ„æºæ¨¡å‹ linkæ³¨æ„ï¼šèµ„æºæœ€åˆå°†ä½œä¸º CRD å­˜åœ¨äº networking.x-k8s.io API ç»„ä¸­ã€‚æœªé™å®šçš„èµ„æºåç§°å°†éšå«åœ¨è¯¥ API ç»„ä¸­ã€‚\nGateway API çš„èµ„æºæ¨¡å‹ä¸­ï¼Œä¸»è¦æœ‰ä¸‰ç§ç±»å‹çš„å¯¹è±¡ï¼š\nGatewayClassï¼šå®šä¹‰äº†ä¸€ç»„å…·æœ‰å…±åŒé…ç½®å’Œè¡Œä¸ºçš„ç½‘å…³ã€‚ Gatewayï¼šè¯·æ±‚ä¸€ä¸ªç‚¹ï¼Œåœ¨è¿™ä¸ªç‚¹ä¸Šï¼Œæµé‡å¯ä»¥è¢«ç¿»è¯‘åˆ°é›†ç¾¤å†…çš„æœåŠ¡ã€‚ Routeï¼šæè¿°äº†é€šè¿‡ Gateway è€Œæ¥çš„æµé‡å¦‚ä½•æ˜ å°„åˆ°æœåŠ¡ã€‚ GatewayClass linkGatewayClass å®šä¹‰äº†ä¸€ç»„å…±äº«å…±åŒé…ç½®å’Œè¡Œä¸ºçš„ Gatewayï¼Œæ¯ä¸ª GatewayClass ç”±ä¸€ä¸ªæ§åˆ¶å™¨å¤„ç†ï¼Œä½†æ§åˆ¶å™¨å¯ä»¥å¤„ç†å¤šä¸ª GatewayClassã€‚\nGatewayClass æ˜¯ä¸€ä¸ªé›†ç¾¤èŒƒå›´çš„èµ„æºã€‚å¿…é¡»è‡³å°‘å®šä¹‰ä¸€ä¸ª GatewayClassï¼ŒGateway æ‰èƒ½å¤Ÿç”Ÿæ•ˆã€‚å®ç° Gateway API çš„æ§åˆ¶å™¨é€šè¿‡å…³è”çš„ GatewayClass èµ„æºæ¥å®ç°ï¼Œç”¨æˆ·å¯ä»¥åœ¨è‡ªå·±çš„ Gateway ä¸­å¼•ç”¨è¯¥èµ„æºã€‚\nè¿™ç±»ä¼¼äº Ingress çš„ IngressClass å’Œ PersistentVolumes çš„ StorageClassã€‚åœ¨ Ingress v1beta1 ä¸­ï¼Œæœ€æ¥è¿‘ GatewayClass çš„æ˜¯ ingress-class æ³¨è§£ï¼Œè€Œåœ¨ IngressV1 ä¸­ï¼Œæœ€æ¥è¿‘çš„ç±»ä¼¼ç‰©æ˜¯ IngressClass å¯¹è±¡ã€‚\nGateway linkGateway æè¿°äº†å¦‚ä½•å°†æµé‡ç¿»è¯‘åˆ°é›†ç¾¤å†…çš„æœåŠ¡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒå®šä¹‰äº†ä¸€ä¸ªæ–¹æ³•ï¼Œå°†æµé‡ä»ä¸äº†è§£ Kubernetes çš„åœ°æ–¹ç¿»è¯‘åˆ°äº†è§£ Kubernetes çš„åœ°æ–¹ã€‚ä¾‹å¦‚ï¼Œç”±äº‘è´Ÿè½½å‡è¡¡å™¨ã€é›†ç¾¤å†…ä»£ç†æˆ–å¤–éƒ¨ç¡¬ä»¶è´Ÿè½½å‡è¡¡å™¨å‘é€åˆ° Kubernetes æœåŠ¡çš„æµé‡ã€‚è™½ç„¶è®¸å¤šç”¨ä¾‹çš„å®¢æˆ·ç«¯æµé‡æºè‡ªé›†ç¾¤çš„ â€œå¤–éƒ¨â€ï¼Œä½†è¿™å¹¶ä¸å¼ºæ±‚ã€‚\nGateway å®šä¹‰äº†å¯¹å®ç° GatewayClass é…ç½®å’Œè¡Œä¸ºåˆåŒçš„ç‰¹å®šè´Ÿè½½å‡è¡¡å™¨é…ç½®çš„è¯·æ±‚ã€‚è¯¥èµ„æºå¯ä»¥ç”±è¿ç»´äººå‘˜ç›´æ¥åˆ›å»ºï¼Œä¹Ÿå¯ä»¥ç”±å¤„ç† GatewayClass çš„æ§åˆ¶å™¨åˆ›å»ºã€‚\nç”±äº Gateway è§„èŒƒæ•è·äº†ç”¨æˆ·æ„å›¾ï¼Œå®ƒå¯èƒ½ä¸åŒ…å«è§„èŒƒä¸­æ‰€æœ‰å±æ€§çš„å®Œæ•´è§„èŒƒã€‚ä¾‹å¦‚ï¼Œç”¨æˆ·å¯ä»¥çœç•¥åœ°å€ã€ç«¯å£ã€TLS è®¾ç½®ç­‰å­—æ®µã€‚è¿™ä½¿å¾—ç®¡ç† GatewayClass çš„æ§åˆ¶å™¨å¯ä»¥ä¸ºç”¨æˆ·æä¾›è¿™äº›è®¾ç½®ï¼Œä»è€Œä½¿è§„èŒƒæ›´åŠ å¯ç§»æ¤ã€‚è¿™ç§è¡Œä¸ºå°†é€šè¿‡ GatewayClass çŠ¶æ€å¯¹è±¡æ¥æ˜ç¡®ã€‚\nä¸€ä¸ª Gateway å¯ä»¥åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ª Route å¼•ç”¨ï¼Œè¿™äº› Route å¼•ç”¨çš„ä½œç”¨æ˜¯å°†ä¸€ä¸ªå­é›†çš„æµé‡å¼•å¯¼åˆ°ä¸€ä¸ªç‰¹å®šçš„æœåŠ¡ä¸Šã€‚\n{HTTP,TCP,Foo} Route linkRoute å¯¹è±¡å®šä¹‰äº†ç‰¹å®šåè®®çš„è§„åˆ™ï¼Œç”¨äºå°†è¯·æ±‚ä» Gateway æ˜ å°„åˆ° Kubernetes æœåŠ¡ã€‚\nHTTPRoute å’Œ TCPRoute æ˜¯ç›®å‰å”¯ä¸€å·²å®šä¹‰çš„ Route å¯¹è±¡ã€‚æœªæ¥å¯èƒ½ä¼šæ·»åŠ å…¶ä»–ç‰¹å®šåè®®çš„ Route å¯¹è±¡ã€‚\nBackendPolicy linkBackendPolicy æä¾›äº†ä¸€ç§é…ç½® Gateway å’Œåç«¯ä¹‹é—´è¿æ¥çš„æ–¹æ³•ã€‚åœ¨è¿™ä¸ª API ä¸­ï¼Œåç«¯æ˜¯æŒ‡è·¯ç”±å¯ä»¥è½¬å‘æµé‡çš„ä»»ä½•èµ„æºã€‚åç«¯çš„ä¸€ä¸ªå¸¸è§ä¾‹å­æ˜¯ Serviceã€‚è¿™ä¸ªçº§åˆ«çš„é…ç½®ç›®å‰ä»…é™äº TLSï¼Œä½†å°†æ¥ä¼šæ‰©å±•åˆ°æ”¯æŒæ›´é«˜çº§çš„ç­–ç•¥ï¼Œå¦‚å¥åº·æ£€æŸ¥ã€‚\nä¸€äº›åç«¯é…ç½®å¯èƒ½ä¼šæ ¹æ®é’ˆå¯¹åç«¯çš„ Route è€Œæœ‰æ‰€ä¸åŒã€‚åœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œé…ç½®å­—æ®µå°†æ”¾åœ¨ Route ä¸Šï¼Œè€Œä¸æ˜¯ BackendPolicy ä¸Šã€‚æœ‰å…³è¯¥èµ„æºæœªæ¥å¯èƒ½é…ç½®çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è€ƒç›¸å…³çš„ GitHub issueã€‚\nè·¯ç”±ç»‘å®š linkå½“ Route ç»‘å®šåˆ° Gateway æ—¶ï¼Œä»£è¡¨åº”ç”¨åœ¨ Gateway ä¸Šçš„é…ç½®ï¼Œé…ç½®äº†åº•å±‚çš„è´Ÿè½½å‡è¡¡å™¨æˆ–ä»£ç†ã€‚å“ªäº› Route å¦‚ä½•ç»‘å®šåˆ° Gateway æ˜¯ç”±èµ„æºæœ¬èº«æ§åˆ¶çš„ã€‚Route å’Œ Gateway èµ„æºå…·æœ‰å†…ç½®çš„æ§åˆ¶ï¼Œä»¥å…è®¸æˆ–é™åˆ¶å®ƒä»¬ä¹‹é—´å¦‚ä½•ç›¸äº’é€‰æ‹©ã€‚è¿™å¯¹äºå¼ºåˆ¶æ‰§è¡Œç»„ç»‡æ”¿ç­–ä»¥ç¡®å®š Route å¦‚ä½•æš´éœ²ä»¥åŠåœ¨å“ªäº› Gateway ä¸Šæš´éœ²éå¸¸æœ‰ç”¨ã€‚çœ‹ä¸‹ä¸‹é¢çš„ä¾‹å­ã€‚\nä¸€ä¸ª Kubernetes é›†ç¾¤ç®¡ç†å‘˜åœ¨ Infra å‘½åç©ºé—´ä¸­éƒ¨ç½²äº†ä¸€ä¸ªåä¸º shared-gw çš„ Gatewayï¼Œä¾›ä¸åŒçš„åº”ç”¨å›¢é˜Ÿä½¿ç”¨ï¼Œä»¥ä¾¿å°†å…¶åº”ç”¨æš´éœ²åœ¨é›†ç¾¤ä¹‹å¤–ã€‚å›¢é˜Ÿ A å’Œå›¢é˜Ÿ Bï¼ˆåˆ†åˆ«åœ¨å‘½åç©ºé—´ â€œAâ€ å’Œ â€œBâ€ ä¸­ï¼‰å°†ä»–ä»¬çš„ Route ç»‘å®šåˆ°è¿™ä¸ª Gatewayã€‚å®ƒä»¬äº’ä¸ç›¸è¯†ï¼Œåªè¦å®ƒä»¬çš„ Route è§„åˆ™äº’ä¸å†²çªï¼Œå°±å¯ä»¥ç»§ç»­éš”ç¦»è¿è¡Œã€‚å›¢é˜Ÿ C æœ‰ç‰¹æ®Šçš„ç½‘ç»œéœ€æ±‚ï¼ˆå¯èƒ½æ˜¯æ€§èƒ½ã€å®‰å…¨æˆ–å…³é”®æ€§ï¼‰ï¼Œä»–ä»¬éœ€è¦ä¸€ä¸ªä¸“é—¨çš„ Gateway æ¥ä»£ç†ä»–ä»¬çš„åº”ç”¨åˆ°é›†ç¾¤å¤–ã€‚å›¢é˜Ÿ C åœ¨ â€œCâ€ å‘½åç©ºé—´ä¸­éƒ¨ç½²äº†è‡ªå·±çš„ Gateway specialive-gwï¼Œè¯¥ Gateway åªèƒ½ç”± â€œCâ€ å‘½åç©ºé—´ä¸­çš„åº”ç”¨ä½¿ç”¨ã€‚\nä¸åŒå‘½åç©ºé—´åŠ Gateway ä¸ Route çš„ç»‘å®šå…³ç³»å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚\nflowchart TD subgraph infraNamespace SharedGW end subgraph namespace1 HTTPRouter1 end subgraph namespace2 HTTPRouter2 end subgraph namespace3 HTTPRouter3 end SharedGW --\u003e HTTPRouter1 SharedGW --\u003e HTTPRouter2 dedicatedGW --\u003e HTTPRouter3 åœ¨å¦‚ä½•å°†è·¯ç”±ä¸ç½‘å…³ç»‘å®šä»¥å®ç°ä¸åŒçš„ç»„ç»‡æ”¿ç­–å’Œè´£ä»»èŒƒå›´æ–¹é¢ï¼Œæœ‰å¾ˆå¤§çš„çµæ´»æ€§ã€‚ä¸‹é¢æ˜¯ç½‘å…³å’Œè·¯ç”±ä¹‹é—´å¯èƒ½çš„å¯¹åº”å…³ç³»ï¼š\nä¸€å¯¹ä¸€ï¼šç½‘å…³å’Œè·¯ç”±å¯ä»¥ç”±ä¸€ä¸ªæ‰€æœ‰è€…éƒ¨ç½²å’Œä½¿ç”¨ï¼Œå¹¶å…·æœ‰ä¸€å¯¹ä¸€çš„å…³ç³»ã€‚å›¢é˜Ÿ C å°±æ˜¯ä¸€ä¸ªä¾‹å­ã€‚ ä¸€å¯¹å¤šï¼šä¸€ä¸ªç½‘å…³å¯ä»¥æœ‰è®¸å¤šè·¯ç”±ä¸ä¹‹ç»‘å®šï¼Œè¿™äº›è·¯ç”±ç”±æ¥è‡ªä¸åŒå‘½åç©ºé—´çš„ä¸åŒå›¢é˜Ÿæ‰€æ‹¥æœ‰ã€‚å›¢é˜Ÿ A å’Œ B å°±æ˜¯è¿™æ ·çš„ä¸€ä¸ªä¾‹å­ã€‚ å¤šå¯¹ä¸€ï¼šè·¯ç”±ä¹Ÿå¯ä»¥ç»‘å®šåˆ°å¤šä¸ªç½‘å…³ï¼Œå…è®¸ä¸€ä¸ªè·¯ç”±åŒæ—¶æ§åˆ¶ä¸åŒ IPã€è´Ÿè½½å‡è¡¡å™¨æˆ–ç½‘ç»œä¸Šçš„åº”ç”¨æš´éœ²ã€‚ æ€»ä¹‹ï¼Œç½‘å…³é€‰æ‹©è·¯ç”±ï¼Œè·¯ç”±æ§åˆ¶å®ƒä»¬çš„æš´éœ²ã€‚å½“ç½‘å…³é€‰æ‹©ä¸€ä¸ªå…è®¸è‡ªå·±æš´éœ²çš„è·¯ç”±æ—¶ï¼Œé‚£ä¹ˆè¯¥è·¯ç”±å°†ä¸ç½‘å…³ç»‘å®šã€‚å½“è·¯ç”±ä¸ç½‘å…³ç»‘å®šæ—¶ï¼Œæ„å‘³ç€å®ƒä»¬çš„é›†ä½“è·¯ç”±è§„åˆ™è¢«é…ç½®åœ¨äº†ç”±è¯¥ç½‘å…³ç®¡ç†çš„åº•å±‚è´Ÿè½½å‡è¡¡å™¨æˆ–ä»£ç†æœåŠ¡å™¨ä¸Šã€‚å› æ­¤ï¼Œç½‘å…³æ˜¯ä¸€ä¸ªç½‘ç»œæ•°æ®å¹³é¢çš„é€»è¾‘è¡¨ç¤ºï¼Œå¯ä»¥é€šè¿‡è·¯ç”±è¿›è¡Œé…ç½®ã€‚\nè·¯ç”±é€‰æ‹© linkGateway æ ¹æ® Route å…ƒæ•°æ®ï¼Œç‰¹åˆ«æ˜¯ Route èµ„æºçš„ç§ç±»ã€å‘½åç©ºé—´å’Œæ ‡ç­¾æ¥é€‰æ‹© Routeã€‚Route å®é™…ä¸Šè¢«ç»‘å®šåˆ° Gateway ä¸­çš„ç‰¹å®šç›‘å¬å™¨ä¸Šï¼Œå› æ­¤æ¯ä¸ªç›‘å¬å™¨éƒ½æœ‰ä¸€ä¸ª listener.routes å­—æ®µï¼Œå®ƒé€šè¿‡ä»¥ä¸‹ä¸€ä¸ªæˆ–å¤šä¸ªæ ‡å‡†æ¥é€‰æ‹© Routeã€‚\nLabelï¼šGateway å¯ä»¥é€šè¿‡èµ„æºä¸Šå­˜åœ¨çš„æ ‡ç­¾æ¥é€‰æ‹© Routeï¼ˆç±»ä¼¼äº Service é€šè¿‡ Pod æ ‡ç­¾é€‰æ‹© Pod çš„æ–¹å¼ï¼‰ã€‚ Kindï¼šç½‘å…³ç›‘å¬å™¨åªèƒ½é€‰æ‹©å•ä¸€ç±»å‹çš„è·¯ç”±èµ„æºã€‚å¯ä»¥æ˜¯ HTTPRouteã€TCPRoute æˆ–è‡ªå®šä¹‰ Route ç±»å‹ã€‚ Namespaceï¼šGateway è¿˜å¯ä»¥é€šè¿‡ namespaces.from å­—æ®µæ§åˆ¶å¯ä»¥ä»å“ªäº› Namespaceã€ Route ä¸­é€‰æ‹©ã€‚å®ƒæ”¯æŒä¸‰ç§å¯èƒ½çš„å€¼ã€‚ SameNamespace æ˜¯é»˜è®¤é€‰é¡¹ã€‚åªæœ‰ä¸è¯¥ç½‘å…³ç›¸åŒçš„å‘½åç©ºé—´ä¸­çš„è·¯ç”±æ‰ä¼šè¢«é€‰æ‹©ã€‚ All å°†é€‰æ‹©æ¥è‡ªæ‰€æœ‰å‘½åç©ºé—´çš„ Routeã€‚ Selector æ„å‘³ç€è¯¥ç½‘å…³å°†é€‰æ‹©ç”± Namespace æ ‡ç­¾é€‰æ‹©å™¨é€‰æ‹©çš„ Namespace å­é›†çš„ Routeã€‚å½“ä½¿ç”¨ Selector æ—¶ï¼Œé‚£ä¹ˆ listeners.route.namespaces.selector å­—æ®µå¯ç”¨äºæŒ‡å®šæ ‡ç­¾é€‰æ‹©å™¨ã€‚All æˆ– SameNamespace ä¸æ”¯æŒè¯¥å­—æ®µã€‚ ä¸‹é¢çš„ Gateway å°†åœ¨é›†ç¾¤ä¸­çš„æ‰€æœ‰ Namespace ä¸­é€‰æ‹© expose: prod-web-gw çš„æ‰€æœ‰ HTTPRoute èµ„æºã€‚\nkind: Gateway ... spec: listeners: - routes: kind: HTTPRoute selector: matchLabels: expose: prod-web-gw namespaces: from: All è·¯ç”±æš´éœ² linkè·¯ç”±å¯ä»¥å†³å®šå®ƒä»¬å¦‚ä½•é€šè¿‡ç½‘å…³æš´éœ²ã€‚gateways.allow å­—æ®µæ”¯æŒä¸‰ä¸ªå€¼ã€‚\nAllï¼šå¦‚æœæ²¡æœ‰æŒ‡å®šï¼Œåˆ™æ˜¯é»˜è®¤å€¼ã€‚è¿™ä½¿å¾—æ‰€æœ‰çš„ Route æ ‡ç­¾å’Œ Namespace é€‰æ‹©å™¨éƒ½ç»‘å®šåœ¨ç½‘å…³ä¸Šã€‚ SameNamespace åªå…è®¸è¯¥è·¯ç”±ä¸æ¥è‡ªåŒä¸€ Namespace çš„ç½‘å…³ç»‘å®šã€‚ FromList å…è®¸æŒ‡å®šä¸€ä¸ªæ˜ç¡®çš„ç½‘å…³åˆ—è¡¨ï¼Œä»¥ä¾¿è·¯ç”±ä¸ä¹‹ç»‘å®šã€‚ ä¸‹é¢çš„ my-route Route åªé€‰æ‹© foo-namespace ä¸­çš„ foo-gatewayï¼Œè€Œä¸èƒ½ä¸å…¶ä»– Gateway ç»‘å®šã€‚æ³¨æ„ï¼Œfoo-gateway ä¸ my-route åœ¨ä¸åŒçš„ Namespace ä¸­ã€‚å¦‚æœ foo-gateway å…è®¸è·¨ Namespace ç»‘å®šï¼Œå¹¶ä¸”ä¹Ÿé€‰æ‹©äº†è¿™ä¸ª Routeï¼Œé‚£ä¹ˆ my-route å°±ä¼šä¸ä¹‹ç»‘å®šã€‚\nkind: HTTPRoute metadata: name: my-route namespace: bar-namespace spec: gateways: allow: FromList gatewayRefs: - name: foo-gateway namespace: foo-namespace è¯·æ³¨æ„ï¼Œç½‘å…³å’Œè·¯ç”±çš„ç»‘å®šæ˜¯åŒå‘çš„ã€‚è¿™æ„å‘³ç€ä¸¤ä¸ªèµ„æºå¿…é¡»ç›¸äº’é€‰æ‹©æ‰èƒ½ç»‘å®šã€‚å¦‚æœä¸€ä¸ªGatewayçš„Routeæ ‡ç­¾é€‰æ‹©å™¨ä¸åŒ¹é…ä»»ä½•ç°æœ‰çš„Routeï¼Œé‚£ä¹ˆå³ä½¿Routeçš„spec.gateways.allow = Allï¼Œä¹Ÿä¸ä¼šæœ‰ä»»ä½•ä¸œè¥¿ä¸ä¹‹ç»‘å®šã€‚åŒæ ·ï¼Œå¦‚æœä¸€ä¸ªRouteå¼•ç”¨äº†ä¸€ä¸ªç‰¹å®šçš„Gatewayï¼Œä½†è¯¥Gatewayæ²¡æœ‰é€‰æ‹©Routeçš„Namespaceï¼Œé‚£ä¹ˆå®ƒä»¬ä¹Ÿä¸ä¼šç»‘å®šã€‚åªæœ‰å½“ä¸¤ä¸ªèµ„æºç›¸äº’é€‰æ‹©æ—¶ï¼Œæ‰ä¼šå‘ç”Ÿç»‘å®šã€‚\nä»èµ„æºè§„èŒƒä¸­å¯èƒ½å¹¶ä¸æ€»æ˜¯èƒ½æ˜æ˜¾çœ‹å‡ºå“ªäº›ç½‘å…³å’Œè·¯ç”±æ˜¯ç»‘å®šçš„ï¼Œä½†å¯ä»¥é€šè¿‡èµ„æºçŠ¶æ€æ¥ç¡®å®šç»‘å®šã€‚è·¯ç”±çŠ¶æ€å°†åˆ—å‡ºè·¯ç”±æ‰€ç»‘å®šçš„æ‰€æœ‰ç½‘å…³ä»¥åŠç»‘å®šçš„ä»»ä½•ç›¸å…³æ¡ä»¶ã€‚\nç»„åˆç±»å‹ linkGatewayClassã€Gatewayã€xRoute å’Œ Service çš„ç»„åˆå°†å®šä¹‰ä¸€ä¸ªå¯å®ç°çš„è´Ÿè½½å‡è¡¡å™¨ã€‚ä¸‹å›¾è¯´æ˜äº†ä¸åŒèµ„æºä¹‹é—´çš„å…³ç³»ã€‚\nflowchart TD Gateway --\u003e GatewayClass Gateway --m~n--- *Route *Route --\u003e Service è¯·æ±‚æµç¨‹ linkä½¿ç”¨åå‘ä»£ç†å®ç°çš„ç½‘å…³çš„ä¸€ä¸ªå…¸å‹çš„å®¢æˆ·ç«¯ / ç½‘å…³ API è¯·æ±‚æµç¨‹æ˜¯ï¼š\nå®¢æˆ·ç«¯å‘ http://foo.example.com å‘å‡ºè¯·æ±‚ã€‚ DNS å°†è¯¥åç§°è§£æä¸ºç½‘å…³åœ°å€ã€‚ åå‘ä»£ç†åœ¨ Listener ä¸Šæ¥æ”¶è¯·æ±‚ï¼Œå¹¶ä½¿ç”¨ Host å¤´ æ¥åŒ¹é… HTTPRouteã€‚ å¯é€‰åœ°ï¼Œåå‘ä»£ç†å¯ä»¥æ ¹æ® HTTPRoute çš„åŒ¹é…è§„åˆ™æ‰§è¡Œè¯·æ±‚å¤´å’Œ / æˆ–è·¯å¾„åŒ¹é…ã€‚ å¯é€‰åœ°ï¼Œåå‘ä»£ç†å¯ä»¥æ ¹æ® HTTPRoute çš„è¿‡æ»¤è§„åˆ™ä¿®æ”¹è¯·æ±‚ï¼Œå³æ·»åŠ  / åˆ é™¤å¤´ã€‚ æœ€åï¼Œåå‘ä»£ç†å¯ä»¥æ ¹æ® HTTPRoute çš„ forwardTo è§„åˆ™ï¼Œå°†è¯·æ±‚è½¬å‘åˆ°é›†ç¾¤ä¸­çš„ä¸€ä¸ªæˆ–å¤šä¸ªå¯¹è±¡ï¼Œå³ Serviceã€‚ TLS é…ç½® linkTLS é…ç½®åœ¨ Gateway ç›‘å¬å™¨ä¸Šã€‚æ­¤å¤–ï¼Œå¯¹äºæŸäº›è‡ªåŠ©æœåŠ¡ç”¨ä¾‹ï¼ŒTLS è¯ä¹¦å¯ä»¥é…ç½®åœ¨è·¯ç”±å¯¹è±¡ä¸Šã€‚\næ‰©å±•ç‚¹ linkAPI ä¸­æä¾›äº†ä¸€äº›æ‰©å±•ç‚¹ï¼Œä»¥çµæ´»å¤„ç†å¤§é‡é€šç”¨ API æ— æ³•å¤„ç†çš„ç”¨ä¾‹ã€‚\nä»¥ä¸‹æ˜¯ API ä¸­æ‰©å±•ç‚¹çš„æ‘˜è¦ã€‚\nXRouteMatch.ExtensionRefï¼šè¿™ä¸ªæ‰©å±•ç‚¹åº”è¯¥ç”¨æ¥æ‰©å±•ç‰¹å®šæ ¸å¿ƒ Route çš„åŒ¹é…è¯­ä¹‰ã€‚è¿™æ˜¯ä¸€ä¸ªå®éªŒæ€§çš„æ‰©å±•ç‚¹ï¼Œæœªæ¥ä¼šæ ¹æ®åé¦ˆè¿›è¡Œè¿­ä»£ã€‚ XForwardTo.BackendRefï¼šè¿™ä¸ªæ‰©å±•ç‚¹åº”è¯¥ç”¨äºå°†æµé‡è½¬å‘åˆ°æ ¸å¿ƒ Kubernetes æœåŠ¡èµ„æºä»¥å¤–çš„ç½‘ç»œç«¯ç‚¹ã€‚ä¾‹å¦‚ S3 bucketã€Lambda å‡½æ•°ã€æ–‡ä»¶æœåŠ¡å™¨ç­‰ã€‚ HTTPRouteFilterï¼šHTTPRoute ä¸ºè¿™ä¸€ API ç±»å‹æä¾›äº†ä¸€ç§æ–¹æ³•ï¼Œå¯ä»¥é’©å…¥ HTTP è¯·æ±‚çš„è¯·æ±‚ / å“åº”ç”Ÿå‘½å‘¨æœŸã€‚ è‡ªå®šä¹‰è·¯ç”±ï¼šå¦‚æœä¸Šè¿°æ‰©å±•ç‚¹éƒ½ä¸èƒ½æ»¡è¶³ç”¨ä¾‹çš„éœ€æ±‚ï¼Œå®ç°è€…å¯ä»¥é€‰æ‹©ä¸ºç›®å‰ API ä¸­ä¸æ”¯æŒçš„åè®®åˆ›å»ºè‡ªå®šä¹‰è·¯ç”±èµ„æºã€‚ å‚è€ƒ link kuberentes-sigs/gateway-api - github.com "
            }
        );
    index.add(
            {
                id:  34 ,
                href: "\/docs\/information\/software\/cloud\/k8s_rs_manager\/namespace\/",
                title: "Namespace",
                description: "åœ¨ä¸€ä¸ª Kubernetes é›†ç¾¤ä¸­å¯ä»¥ä½¿ç”¨ namespace åˆ›å»ºå¤šä¸ª â€œè™šæ‹Ÿé›†ç¾¤â€ï¼Œè¿™äº› namespace ä¹‹é—´å¯ä»¥å®Œå…¨éš”ç¦»ï¼Œä¹Ÿå¯ä»¥é€šè¿‡æŸç§æ–¹å¼ï¼Œè®©ä¸€ä¸ª namespace ä¸­çš„ service å¯ä»¥è®¿é—®åˆ°å…¶ä»–çš„ namespace ä¸­çš„æœåŠ¡ï¼Œæ¯”å¦‚ Traefik ingress å’Œ kube-systemnamespace ä¸‹çš„ service å°±å¯ä»¥ä¸ºæ•´ä¸ªé›†ç¾¤æä¾›æœåŠ¡ï¼Œè¿™äº›éƒ½éœ€è¦é€šè¿‡ RBAC å®šä¹‰é›†ç¾¤çº§åˆ«çš„è§’è‰²æ¥å®ç°ã€‚\nå“ªäº›æƒ…å†µä¸‹é€‚åˆä½¿ç”¨å¤šä¸ª namespace linkå› ä¸º namespace å¯ä»¥æä¾›ç‹¬ç«‹çš„å‘½åç©ºé—´ï¼Œå› æ­¤å¯ä»¥å®ç°éƒ¨åˆ†çš„ç¯å¢ƒéš”ç¦»ã€‚å½“ä½ çš„é¡¹ç›®å’Œäººå‘˜ä¼—å¤šçš„æ—¶å€™å¯ä»¥è€ƒè™‘æ ¹æ®é¡¹ç›®å±æ€§ï¼Œä¾‹å¦‚ç”Ÿäº§ã€æµ‹è¯•ã€å¼€å‘åˆ’åˆ†ä¸åŒçš„ namespaceã€‚\nNamespace ä½¿ç”¨ link**è·å–é›†ç¾¤ä¸­æœ‰å“ªäº› namespace **\nkubectl get ns\né›†ç¾¤ä¸­é»˜è®¤ä¼šæœ‰ default å’Œ kube-system è¿™ä¸¤ä¸ª namespaceã€‚\nåœ¨æ‰§è¡Œ kubectl å‘½ä»¤æ—¶å¯ä»¥ä½¿ç”¨ -n æŒ‡å®šæ“ä½œçš„ namespaceã€‚\nç”¨æˆ·çš„æ™®é€šåº”ç”¨é»˜è®¤æ˜¯åœ¨ default ä¸‹ï¼Œä¸é›†ç¾¤ç®¡ç†ç›¸å…³çš„ä¸ºæ•´ä¸ªé›†ç¾¤æä¾›æœåŠ¡çš„åº”ç”¨ä¸€èˆ¬éƒ¨ç½²åœ¨ kube-system çš„ namespace ä¸‹ï¼Œä¾‹å¦‚æˆ‘ä»¬åœ¨å®‰è£… kubernetes é›†ç¾¤æ—¶éƒ¨ç½²çš„ kubednsã€heapseterã€EFK ç­‰éƒ½æ˜¯åœ¨è¿™ä¸ª namespace ä¸‹é¢ã€‚\nå¦å¤–ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„èµ„æºå¯¹è±¡éƒ½ä¼šå¯¹åº” namespaceï¼Œnode å’Œ persistentVolume å°±ä¸å±äºä»»ä½• namespaceã€‚\n",
                content: "åœ¨ä¸€ä¸ª Kubernetes é›†ç¾¤ä¸­å¯ä»¥ä½¿ç”¨ namespace åˆ›å»ºå¤šä¸ª â€œè™šæ‹Ÿé›†ç¾¤â€ï¼Œè¿™äº› namespace ä¹‹é—´å¯ä»¥å®Œå…¨éš”ç¦»ï¼Œä¹Ÿå¯ä»¥é€šè¿‡æŸç§æ–¹å¼ï¼Œè®©ä¸€ä¸ª namespace ä¸­çš„ service å¯ä»¥è®¿é—®åˆ°å…¶ä»–çš„ namespace ä¸­çš„æœåŠ¡ï¼Œæ¯”å¦‚ Traefik ingress å’Œ kube-systemnamespace ä¸‹çš„ service å°±å¯ä»¥ä¸ºæ•´ä¸ªé›†ç¾¤æä¾›æœåŠ¡ï¼Œè¿™äº›éƒ½éœ€è¦é€šè¿‡ RBAC å®šä¹‰é›†ç¾¤çº§åˆ«çš„è§’è‰²æ¥å®ç°ã€‚\nå“ªäº›æƒ…å†µä¸‹é€‚åˆä½¿ç”¨å¤šä¸ª namespace linkå› ä¸º namespace å¯ä»¥æä¾›ç‹¬ç«‹çš„å‘½åç©ºé—´ï¼Œå› æ­¤å¯ä»¥å®ç°éƒ¨åˆ†çš„ç¯å¢ƒéš”ç¦»ã€‚å½“ä½ çš„é¡¹ç›®å’Œäººå‘˜ä¼—å¤šçš„æ—¶å€™å¯ä»¥è€ƒè™‘æ ¹æ®é¡¹ç›®å±æ€§ï¼Œä¾‹å¦‚ç”Ÿäº§ã€æµ‹è¯•ã€å¼€å‘åˆ’åˆ†ä¸åŒçš„ namespaceã€‚\nNamespace ä½¿ç”¨ link**è·å–é›†ç¾¤ä¸­æœ‰å“ªäº› namespace **\nkubectl get ns\né›†ç¾¤ä¸­é»˜è®¤ä¼šæœ‰ default å’Œ kube-system è¿™ä¸¤ä¸ª namespaceã€‚\nåœ¨æ‰§è¡Œ kubectl å‘½ä»¤æ—¶å¯ä»¥ä½¿ç”¨ -n æŒ‡å®šæ“ä½œçš„ namespaceã€‚\nç”¨æˆ·çš„æ™®é€šåº”ç”¨é»˜è®¤æ˜¯åœ¨ default ä¸‹ï¼Œä¸é›†ç¾¤ç®¡ç†ç›¸å…³çš„ä¸ºæ•´ä¸ªé›†ç¾¤æä¾›æœåŠ¡çš„åº”ç”¨ä¸€èˆ¬éƒ¨ç½²åœ¨ kube-system çš„ namespace ä¸‹ï¼Œä¾‹å¦‚æˆ‘ä»¬åœ¨å®‰è£… kubernetes é›†ç¾¤æ—¶éƒ¨ç½²çš„ kubednsã€heapseterã€EFK ç­‰éƒ½æ˜¯åœ¨è¿™ä¸ª namespace ä¸‹é¢ã€‚\nå¦å¤–ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„èµ„æºå¯¹è±¡éƒ½ä¼šå¯¹åº” namespaceï¼Œnode å’Œ persistentVolume å°±ä¸å±äºä»»ä½• namespaceã€‚\n"
            }
        );
    index.add(
            {
                id:  35 ,
                href: "\/docs\/information\/software\/cloud\/auth\/spiffe\/",
                title: "SPIFFE",
                description: "SPIFFEï¼Œå³æ¯ä¸ªäººçš„å®‰å…¨ç”Ÿäº§èº«ä»½æ¡†æ¶ï¼ˆSecure Production Identity Framework for Everyoneï¼‰ï¼Œæ˜¯ä¸€å¥—å¼€æºæ ‡å‡†ï¼Œç”¨äºåœ¨åŠ¨æ€å’Œå¼‚æ„ç¯å¢ƒä¸­å®‰å…¨åœ°è¿›è¡Œèº«ä»½è¯†åˆ«ã€‚é‡‡ç”¨ SPIFFE çš„ç³»ç»Ÿæ— è®ºåœ¨å“ªé‡Œè¿è¡Œï¼Œéƒ½å¯ä»¥è½»æ¾å¯é åœ°ç›¸äº’è®¤è¯ã€‚\nSPIFFE å¼€æºè§„èŒƒçš„æ ¸å¿ƒæ˜¯â€”â€”é€šè¿‡ç®€å• API å®šä¹‰äº†ä¸€ä¸ªçŸ­æœŸçš„åŠ å¯†èº«ä»½æ–‡ä»¶ SVIDã€‚ç„¶åï¼Œå·¥ä½œè´Ÿè½½è¿›è¡Œè®¤è¯æ—¶å¯ä»¥ä½¿ç”¨è¯¥èº«ä»½æ–‡ä»¶ï¼Œä¾‹å¦‚å»ºç«‹ TLS è¿æ¥æˆ–ç­¾ç½²å’ŒéªŒè¯ JWT ä»¤ç‰Œç­‰ã€‚\nSPIFFE å·²ç»åœ¨äº‘åŸç”Ÿåº”ç”¨ä¸­å¾—åˆ°äº†å¤§é‡çš„åº”ç”¨ï¼Œå°¤å…¶æ˜¯åœ¨ Istio å’Œ Envoy ä¸­ã€‚ä¸‹é¢å°†å‘ä½ ä»‹ç» SPIFFE çš„ä¸€äº›åŸºæœ¬æ¦‚å¿µã€‚\nå·¥ä½œè´Ÿè½½ linkå·¥ä½œè´Ÿè½½æ˜¯ä¸ªå•ä¸€çš„è½¯ä»¶ï¼Œä»¥ç‰¹å®šçš„é…ç½®éƒ¨ç½²ï¼Œç”¨äºå•ä¸€ç›®çš„ï¼›å®ƒå¯èƒ½åŒ…æ‹¬è½¯ä»¶çš„å¤šä¸ªè¿è¡Œå®ä¾‹ï¼Œæ‰€æœ‰è¿™äº›å®ä¾‹æ‰§è¡Œç›¸åŒçš„ä»»åŠ¡ã€‚å·¥ä½œè´Ÿè½½è¿™ä¸ªæœ¯è¯­å¯ä»¥åŒ…å«ä¸€ç³»åˆ—ä¸åŒçš„è½¯ä»¶ç³»ç»Ÿå®šä¹‰ï¼ŒåŒ…æ‹¬ï¼š\nä¸€ä¸ªè¿è¡Œ Python ç½‘ç»œåº”ç”¨ç¨‹åºçš„ç½‘ç»œæœåŠ¡å™¨ï¼Œåœ¨ä¸€ä¸ªè™šæ‹Ÿæœºé›†ç¾¤ä¸Šè¿è¡Œï¼Œå‰é¢æœ‰ä¸€ä¸ªè´Ÿè½½å‡è¡¡å™¨ã€‚\nä¸€ä¸ª MySQL æ•°æ®åº“çš„å®ä¾‹ã€‚\nä¸€ä¸ªå¤„ç†é˜Ÿåˆ—ä¸­é¡¹ç›®çš„ worker ç¨‹åºã€‚\nç‹¬ç«‹éƒ¨ç½²çš„ç³»ç»Ÿçš„é›†åˆï¼Œå®ƒä»¬ä¸€èµ·å·¥ä½œï¼Œä¾‹å¦‚ä¸€ä¸ªä½¿ç”¨æ•°æ®åº“æœåŠ¡çš„ç½‘ç»œåº”ç”¨ç¨‹åºã€‚ç½‘ç»œåº”ç”¨ç¨‹åºå’Œæ•°æ®åº“ä¹Ÿå¯ä»¥å•ç‹¬è¢«è§†ä¸ºå·¥ä½œè´Ÿè½½ã€‚\nå°± SPIFFE è€Œè¨€ï¼Œå·¥ä½œè´Ÿè½½å¾€å¾€æ¯”ç‰©ç†æˆ–è™šæ‹ŸèŠ‚ç‚¹æ›´åŠ ç»†åŒ–â€”â€”é€šå¸¸ç»†åŒ–åˆ°èŠ‚ç‚¹ä¸Šçš„å•ä¸ªè¿›ç¨‹ã€‚è¿™å¯¹å·¥ä½œè´Ÿè½½æ¥è¯´è‡³å…³é‡è¦ï¼Œä¾‹å¦‚ï¼Œåœ¨å®¹å™¨ç¼–æ’å™¨ä¸­æ‰˜ç®¡çš„å·¥ä½œè´Ÿè½½ï¼Œå‡ ä¸ªå·¥ä½œè´Ÿè½½å¯èƒ½åœ¨åŒä¸€ä¸ªèŠ‚ç‚¹ä¸Šï¼ˆä½†å½¼æ­¤éš”ç¦»ï¼‰ã€‚\nå°± SPIFFE è€Œè¨€ï¼Œä¸€ä¸ªå·¥ä½œè´Ÿè½½ä¹Ÿå¯èƒ½è·¨è¶Šè®¸å¤šèŠ‚ç‚¹ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªå¯å¼¹æ€§æ‰©å±•çš„ç½‘ç»œæœåŠ¡å™¨å¯èƒ½åŒæ—¶è¿è¡Œåœ¨è®¸å¤šæœºå™¨ä¸Šã€‚\nè™½ç„¶å·¥ä½œè´Ÿè½½çš„ç²’åº¦ä¼šå› ç¯å¢ƒè€Œå¼‚ï¼Œä½†å°± SPIFFE è€Œè¨€ï¼Œæˆ‘ä»¬å‡è®¾å·¥ä½œè´Ÿè½½ä¹‹é—´æœ‰è¶³å¤Ÿå¥½çš„éš”ç¦»ï¼Œè¿™æ ·æ¶æ„çš„å·¥ä½œè´Ÿè½½å°±ä¸èƒ½çªƒå–ä»–äººçš„å‡­è¯ã€‚è¿™ç§éš”ç¦»çš„ç¨³å¥æ€§å’Œå®ç°çš„æœºåˆ¶è¶…å‡ºäº† SPIFFE çš„èŒƒå›´ã€‚\nSPIFFE ID linkSPIFFE ID æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¯ä»¥å”¯ä¸€åœ°ã€å…·ä½“åœ°æ ‡è¯†ä¸€ä¸ªå·¥ä½œè´Ÿè½½ã€‚SPIFFE ID ä¹Ÿå¯ä»¥åˆ†é…ç»™å·¥ä½œè´Ÿè½½æ‰€è¿è¡Œçš„ä¸­é—´ç³»ç»Ÿï¼ˆå¦‚ä¸€ç»„è™šæ‹Ÿæœºï¼‰ã€‚ä¾‹å¦‚ï¼Œspiffe://acme.com/billing/payments æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„SPIFFE IDã€‚\nSPIFFE ID æ˜¯ä¸€ä¸ªç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦ï¼ˆURIï¼‰ï¼Œå…¶æ ¼å¼å¦‚ä¸‹ï¼šspiffe://ä¿¡ä»»åŸŸ/å·¥ä½œè´Ÿè½½æ ‡è¯†ç¬¦ã€‚\n",
                content: "SPIFFEï¼Œå³æ¯ä¸ªäººçš„å®‰å…¨ç”Ÿäº§èº«ä»½æ¡†æ¶ï¼ˆSecure Production Identity Framework for Everyoneï¼‰ï¼Œæ˜¯ä¸€å¥—å¼€æºæ ‡å‡†ï¼Œç”¨äºåœ¨åŠ¨æ€å’Œå¼‚æ„ç¯å¢ƒä¸­å®‰å…¨åœ°è¿›è¡Œèº«ä»½è¯†åˆ«ã€‚é‡‡ç”¨ SPIFFE çš„ç³»ç»Ÿæ— è®ºåœ¨å“ªé‡Œè¿è¡Œï¼Œéƒ½å¯ä»¥è½»æ¾å¯é åœ°ç›¸äº’è®¤è¯ã€‚\nSPIFFE å¼€æºè§„èŒƒçš„æ ¸å¿ƒæ˜¯â€”â€”é€šè¿‡ç®€å• API å®šä¹‰äº†ä¸€ä¸ªçŸ­æœŸçš„åŠ å¯†èº«ä»½æ–‡ä»¶ SVIDã€‚ç„¶åï¼Œå·¥ä½œè´Ÿè½½è¿›è¡Œè®¤è¯æ—¶å¯ä»¥ä½¿ç”¨è¯¥èº«ä»½æ–‡ä»¶ï¼Œä¾‹å¦‚å»ºç«‹ TLS è¿æ¥æˆ–ç­¾ç½²å’ŒéªŒè¯ JWT ä»¤ç‰Œç­‰ã€‚\nSPIFFE å·²ç»åœ¨äº‘åŸç”Ÿåº”ç”¨ä¸­å¾—åˆ°äº†å¤§é‡çš„åº”ç”¨ï¼Œå°¤å…¶æ˜¯åœ¨ Istio å’Œ Envoy ä¸­ã€‚ä¸‹é¢å°†å‘ä½ ä»‹ç» SPIFFE çš„ä¸€äº›åŸºæœ¬æ¦‚å¿µã€‚\nå·¥ä½œè´Ÿè½½ linkå·¥ä½œè´Ÿè½½æ˜¯ä¸ªå•ä¸€çš„è½¯ä»¶ï¼Œä»¥ç‰¹å®šçš„é…ç½®éƒ¨ç½²ï¼Œç”¨äºå•ä¸€ç›®çš„ï¼›å®ƒå¯èƒ½åŒ…æ‹¬è½¯ä»¶çš„å¤šä¸ªè¿è¡Œå®ä¾‹ï¼Œæ‰€æœ‰è¿™äº›å®ä¾‹æ‰§è¡Œç›¸åŒçš„ä»»åŠ¡ã€‚å·¥ä½œè´Ÿè½½è¿™ä¸ªæœ¯è¯­å¯ä»¥åŒ…å«ä¸€ç³»åˆ—ä¸åŒçš„è½¯ä»¶ç³»ç»Ÿå®šä¹‰ï¼ŒåŒ…æ‹¬ï¼š\nä¸€ä¸ªè¿è¡Œ Python ç½‘ç»œåº”ç”¨ç¨‹åºçš„ç½‘ç»œæœåŠ¡å™¨ï¼Œåœ¨ä¸€ä¸ªè™šæ‹Ÿæœºé›†ç¾¤ä¸Šè¿è¡Œï¼Œå‰é¢æœ‰ä¸€ä¸ªè´Ÿè½½å‡è¡¡å™¨ã€‚\nä¸€ä¸ª MySQL æ•°æ®åº“çš„å®ä¾‹ã€‚\nä¸€ä¸ªå¤„ç†é˜Ÿåˆ—ä¸­é¡¹ç›®çš„ worker ç¨‹åºã€‚\nç‹¬ç«‹éƒ¨ç½²çš„ç³»ç»Ÿçš„é›†åˆï¼Œå®ƒä»¬ä¸€èµ·å·¥ä½œï¼Œä¾‹å¦‚ä¸€ä¸ªä½¿ç”¨æ•°æ®åº“æœåŠ¡çš„ç½‘ç»œåº”ç”¨ç¨‹åºã€‚ç½‘ç»œåº”ç”¨ç¨‹åºå’Œæ•°æ®åº“ä¹Ÿå¯ä»¥å•ç‹¬è¢«è§†ä¸ºå·¥ä½œè´Ÿè½½ã€‚\nå°± SPIFFE è€Œè¨€ï¼Œå·¥ä½œè´Ÿè½½å¾€å¾€æ¯”ç‰©ç†æˆ–è™šæ‹ŸèŠ‚ç‚¹æ›´åŠ ç»†åŒ–â€”â€”é€šå¸¸ç»†åŒ–åˆ°èŠ‚ç‚¹ä¸Šçš„å•ä¸ªè¿›ç¨‹ã€‚è¿™å¯¹å·¥ä½œè´Ÿè½½æ¥è¯´è‡³å…³é‡è¦ï¼Œä¾‹å¦‚ï¼Œåœ¨å®¹å™¨ç¼–æ’å™¨ä¸­æ‰˜ç®¡çš„å·¥ä½œè´Ÿè½½ï¼Œå‡ ä¸ªå·¥ä½œè´Ÿè½½å¯èƒ½åœ¨åŒä¸€ä¸ªèŠ‚ç‚¹ä¸Šï¼ˆä½†å½¼æ­¤éš”ç¦»ï¼‰ã€‚\nå°± SPIFFE è€Œè¨€ï¼Œä¸€ä¸ªå·¥ä½œè´Ÿè½½ä¹Ÿå¯èƒ½è·¨è¶Šè®¸å¤šèŠ‚ç‚¹ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªå¯å¼¹æ€§æ‰©å±•çš„ç½‘ç»œæœåŠ¡å™¨å¯èƒ½åŒæ—¶è¿è¡Œåœ¨è®¸å¤šæœºå™¨ä¸Šã€‚\nè™½ç„¶å·¥ä½œè´Ÿè½½çš„ç²’åº¦ä¼šå› ç¯å¢ƒè€Œå¼‚ï¼Œä½†å°± SPIFFE è€Œè¨€ï¼Œæˆ‘ä»¬å‡è®¾å·¥ä½œè´Ÿè½½ä¹‹é—´æœ‰è¶³å¤Ÿå¥½çš„éš”ç¦»ï¼Œè¿™æ ·æ¶æ„çš„å·¥ä½œè´Ÿè½½å°±ä¸èƒ½çªƒå–ä»–äººçš„å‡­è¯ã€‚è¿™ç§éš”ç¦»çš„ç¨³å¥æ€§å’Œå®ç°çš„æœºåˆ¶è¶…å‡ºäº† SPIFFE çš„èŒƒå›´ã€‚\nSPIFFE ID linkSPIFFE ID æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¯ä»¥å”¯ä¸€åœ°ã€å…·ä½“åœ°æ ‡è¯†ä¸€ä¸ªå·¥ä½œè´Ÿè½½ã€‚SPIFFE ID ä¹Ÿå¯ä»¥åˆ†é…ç»™å·¥ä½œè´Ÿè½½æ‰€è¿è¡Œçš„ä¸­é—´ç³»ç»Ÿï¼ˆå¦‚ä¸€ç»„è™šæ‹Ÿæœºï¼‰ã€‚ä¾‹å¦‚ï¼Œspiffe://acme.com/billing/payments æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„SPIFFE IDã€‚\nSPIFFE ID æ˜¯ä¸€ä¸ªç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦ï¼ˆURIï¼‰ï¼Œå…¶æ ¼å¼å¦‚ä¸‹ï¼šspiffe://ä¿¡ä»»åŸŸ/å·¥ä½œè´Ÿè½½æ ‡è¯†ç¬¦ã€‚\nå·¥ä½œè´Ÿè½½æ ‡è¯†ç¬¦æ˜¯ä¸€ä¸ªä¿¡ä»»åŸŸå†…çš„ç‰¹å®šå·¥ä½œè´Ÿè½½çš„å”¯ä¸€æ ‡è¯†ã€‚\nSPIFFE è§„èŒƒè¯¦ç»†æè¿°äº† SPIFFE ID çš„æ ¼å¼å’Œä½¿ç”¨ã€‚\nä¿¡ä»»åŸŸ linkä¿¡ä»»åŸŸå¯¹åº”äºç³»ç»Ÿçš„ä¿¡ä»»æ ¹ã€‚ä¿¡ä»»åŸŸå¯ä»¥ä»£è¡¨ä¸ªäººã€ç»„ç»‡ã€ç¯å¢ƒæˆ–éƒ¨é—¨ï¼Œè¿è¡Œä»–ä»¬è‡ªå·±ç‹¬ç«‹çš„ SPIFFE åŸºç¡€è®¾æ–½ã€‚åœ¨åŒä¸€ä¿¡ä»»åŸŸä¸­ç¡®å®šçš„æ‰€æœ‰å·¥ä½œè´Ÿè½½éƒ½ä¼šè¢«é¢å‘èº«ä»½æ–‡ä»¶ï¼Œå®ƒä»¬å¯ä»¥æ ¹æ®ä¿¡ä»»åŸŸçš„æ ¹å¯†é’¥è¿›è¡ŒéªŒè¯ã€‚\né€šå¸¸å»ºè®®å°†å¤„äºä¸åŒç‰©ç†ä½ç½®ï¼ˆå¦‚ä¸åŒçš„æ•°æ®ä¸­å¿ƒæˆ–äº‘åŒºåŸŸï¼‰æˆ–åº”ç”¨ä¸åŒå®‰å…¨å®è·µçš„ç¯å¢ƒï¼ˆå¦‚ä¸ç”Ÿäº§ç¯å¢ƒç›¸æ¯”çš„æš‚å­˜æˆ–å®éªŒç¯å¢ƒï¼‰çš„å·¥ä½œè´Ÿè½½æ”¾åœ¨ä¸åŒçš„ä¿¡ä»»åŸŸä¸­ã€‚\nSPIFFE å¯éªŒè¯çš„èº«ä»½æ–‡ä»¶ï¼ˆSVIDï¼‰ linkSVIDï¼ˆSPIFFE Verifiable Identity Documentï¼‰ æ˜¯å·¥ä½œè´Ÿè½½å‘èµ„æºæˆ–è°ƒç”¨è€…è¯æ˜å…¶èº«ä»½çš„æ–‡ä»¶ã€‚å¦‚æœ SVID æ˜¯ç”± SPIFFE ID çš„ä¿¡ä»»åŸŸå†…çš„æœºæ„ç­¾å‘çš„ï¼Œåˆ™è¢«è®¤ä¸ºæ˜¯æœ‰æ•ˆçš„ã€‚\nSVID åŒ…å«ä¸€ä¸ª SPIFFE IDï¼Œä»£è¡¨äº†æœåŠ¡çš„èº«ä»½ã€‚å®ƒå°† SPIFFE ID ç¼–ç åœ¨ä¸€ä¸ªå¯åŠ å¯†éªŒè¯çš„æ–‡ä»¶ä¸­ï¼Œç›®å‰æ”¯æŒä¸¤ç§æ ¼å¼ï¼šX.509 è¯ä¹¦æˆ– JWT ä»¤ç‰Œã€‚\nç”±äºä»¤ç‰Œå®¹æ˜“å—åˆ°é‡æ”¾æ”»å‡»ï¼ˆreplay attackï¼‰ï¼Œå³åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­è·å¾—ä»¤ç‰Œçš„æ”»å‡»è€…å¯ä»¥ä½¿ç”¨å®ƒæ¥å†’å……å·¥ä½œè´Ÿè½½ï¼Œå› æ­¤å»ºè®®å°½å¯èƒ½ä½¿ç”¨ X.509-SVIDã€‚ç„¶è€Œï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼ŒJWTä»¤ç‰Œæ ¼å¼æ˜¯å”¯ä¸€çš„é€‰æ‹©ï¼Œä¾‹å¦‚ï¼Œå½“ä½ çš„æ¶æ„åœ¨ä¸¤ä¸ªå·¥ä½œè´Ÿè½½ä¹‹é—´æœ‰ä¸€ä¸ªL7ä»£ç†æˆ–è´Ÿè½½å‡è¡¡å™¨ã€‚\nå…³äº SVID çš„è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜… SVID è§„èŒƒã€‚\nSPIFFE å·¥ä½œè´Ÿè½½ API linkå·¥ä½œè´Ÿè½½ API æä¾›ä»¥ä¸‹å†…å®¹ã€‚\nå¯¹äºX.509æ ¼å¼çš„èº«ä»½æ–‡ä»¶ï¼ˆX.509-SVIDï¼‰:\nå…¶èº«ä»½ï¼Œæè¿°ä¸º SPIFFE IDã€‚\nä¸€ä¸ªä¸è¯¥ ID ç»‘å®šçš„ç§é’¥ï¼Œå¯ç”¨äºä»£è¡¨å·¥ä½œè´Ÿè½½ç­¾ç½²æ•°æ®ã€‚ä¸€ä¸ªç›¸åº”çš„çŸ­æœŸ X.509 è¯ä¹¦ä¹Ÿå°†è¢«åˆ›å»ºï¼Œå³ X509-SVIDã€‚è¿™å¯ä»¥ç”¨æ¥å»ºç«‹ TLS æˆ–ä»¥å…¶ä»–æ–¹å¼å¯¹å…¶ä»–å·¥ä½œè´Ÿè½½è¿›è¡Œè®¤è¯ã€‚\nä¸€ç»„è¯ä¹¦â€”â€”è¢«ç§°ä¸ºä¿¡ä»»åŒ…ã€‚ä¸€ä¸ªå·¥ä½œè´Ÿè½½ç”¨æ¥éªŒè¯å¦ä¸€ä¸ªå·¥ä½œè´Ÿè½½æå‡ºçš„X.509-SVIDã€‚\nå¯¹äº JWT æ ¼å¼çš„èº«ä»½æ–‡ä»¶ï¼ˆJWT-SVIDï¼‰ï¼š\nå…¶èº«ä»½ï¼Œæè¿°ä¸º SPIFFE ID\nJWT ä»¤ç‰Œ\nä¸€ç»„è¯ä¹¦â€”â€”è¢«ç§°ä¸ºä¿¡ä»»åŒ…ï¼Œä¸€ä¸ªå·¥ä½œè´Ÿè½½ç”¨æ¥éªŒè¯å…¶ä»–å·¥ä½œè´Ÿè½½çš„èº«ä»½ã€‚\nä¸ AWS EC2 å®ä¾‹å…ƒæ•°æ® APIå’Œ Google GCE å®ä¾‹å…ƒæ•°æ® API ç±»ä¼¼ï¼Œå·¥ä½œè´Ÿè½½ API ä¸è¦æ±‚è°ƒç”¨çš„å·¥ä½œè´Ÿè½½å¯¹è‡ªå·±çš„èº«ä»½æœ‰ä»»ä½•äº†è§£ï¼Œä¹Ÿä¸è¦æ±‚è°ƒç”¨ API æ—¶æ‹¥æœ‰ä»»ä½•è®¤è¯ä»¤ç‰Œã€‚è¿™æ„å‘³ç€ä½ çš„åº”ç”¨ç¨‹åºä¸éœ€è¦ä¸å·¥ä½œè´Ÿè½½å…±åŒéƒ¨ç½²ä»»ä½•è®¤è¯å¯†é’¥ã€‚\nç„¶è€Œï¼Œä¸è¿™äº›å…¶ä»– API ä¸åŒçš„æ˜¯ï¼ŒWorkload API ä¸å¹³å°æ— å…³ï¼Œå¯ä»¥åœ¨è¿›ç¨‹çº§å’Œå†…æ ¸çº§è¯†åˆ«æ­£åœ¨è¿è¡Œçš„æœåŠ¡ï¼Œè¿™ä½¿å¾—å®ƒé€‚åˆä¸ Kubernetes ç­‰å®¹å™¨è°ƒåº¦å™¨ä¸€èµ·ä½¿ç”¨ã€‚\nä¸ºäº†æœ€å¤§é™åº¦åœ°å‡å°‘å¯†é’¥æ³„éœ²çš„é£é™©ï¼Œæ‰€æœ‰ç§é’¥ï¼ˆå’Œç›¸åº”çš„è¯ä¹¦ï¼‰éƒ½æ˜¯çŸ­æœŸçš„ï¼Œç»å¸¸è‡ªåŠ¨è½®æ¢ã€‚å·¥ä½œè´Ÿè½½å¯ä»¥åœ¨ç›¸åº”çš„å¯†é’¥è¿‡æœŸå‰ä»å·¥ä½œè´Ÿè½½APIè¯·æ±‚æ–°çš„å¯†é’¥å’Œä¿¡ä»»åŒ…ã€‚\nä¿¡ä»»åŒ… linkå½“ä½¿ç”¨ X.509-SVID æ—¶ï¼Œç›®æ ‡å·¥ä½œè´Ÿè½½ä½¿ç”¨ä¿¡ä»»åŒ…ï¼ˆTrust Bundleï¼‰æ¥éªŒè¯æºå·¥ä½œè´Ÿè½½çš„èº«ä»½ã€‚ä¿¡ä»»åŒ…æ˜¯ä¸€ä¸ªæˆ–å¤šä¸ªè¯ä¹¦æœºæ„ï¼ˆCAï¼‰æ ¹è¯ä¹¦çš„é›†åˆï¼Œå·¥ä½œè´Ÿè½½è®¤ä¸ºè¿™äº›è¯ä¹¦æ˜¯å¯ä¿¡çš„ã€‚ä¿¡ä»»åŒ…åŒ…å« X.509 å’Œ JWT SVID çš„å…¬é’¥ææ–™ã€‚\nç”¨æ¥éªŒè¯ X.509 SVID çš„å…¬é’¥ææ–™æ˜¯ä¸€ç»„è¯ä¹¦ã€‚ç”¨äºéªŒè¯ JWT çš„å…¬é’¥ææ–™æ˜¯ä¸€ä¸ªåŸå§‹å…¬é’¥ã€‚ä¿¡ä»»åŒ…çš„å†…å®¹æ˜¯ç»å¸¸è½®æ¢çš„ã€‚å·¥ä½œè´Ÿè½½åœ¨è°ƒç”¨å·¥ä½œè´Ÿè½½ API æ—¶æ£€ç´¢ä¿¡ä»»åŒ…ã€‚\nå‚è€ƒ link SPIFFE å®˜ç½‘ - spiffe.io "
            }
        );
    index.add(
            {
                id:  36 ,
                href: "\/docs\/develop\/value\/",
                title: "ä¸ªäººä»·å€¼ï¼šå†°å±±æ¨¡å‹",
                description: "ä¸€ã€æ¨¡å‹ç¼˜èµ·ä¸æ ¸å¿ƒé€»è¾‘ linkå†°å±±ç†è®ºæœ€æ—©ç”±å¼—æ´›ä¼Šå¾·æå‡ºï¼Œç»ç¾å›½å¿ƒç†å­¦å®¶éº¦å…‹åˆ©å…°å‘å±•ä¸ºèƒ½åŠ›ç´ è´¨æ¨¡å‹ã€‚ä¸ªäººä»·å€¼å†°å±±æ¨¡å‹åœ¨æ­¤åŸºç¡€ä¸Šæ¼”åŒ–è€Œæ¥ï¼Œå°†äººçš„ç»¼åˆä»·å€¼æ¯”ä½œæµ·ä¸Šå†°å±±ï¼š\nå¯è§éƒ¨åˆ†ï¼ˆ20%ï¼‰ï¼šçŸ¥è¯†å‚¨å¤‡ã€æŠ€èƒ½è¯ä¹¦ã€è¡Œä¸ºè¡¨ç°ç­‰æ˜¾æ€§è¦ç´  æ½œåœ¨éƒ¨åˆ†ï¼ˆ80%ï¼‰ï¼šä»·å€¼è§‚ã€æ€ç»´æ¨¡å¼ã€æƒ…ç»ªèƒ½åŠ›ã€å†…åœ¨åŠ¨æœºç­‰éšæ€§ç‰¹è´¨ è¯¥æ¨¡å‹æ­ç¤ºï¼šå†³å®šä¸ªäººå‘å±•ä¸Šé™çš„å¾€å¾€ä¸æ˜¯æ°´é¢ä¸Šçš„\"ç¡¬å®åŠ›\"ï¼Œè€Œæ˜¯æ·±è—äºæ„è¯†åº•å±‚çš„\"è½¯ç´ è´¨\"ã€‚\näºŒã€å†°å±±åˆ†å±‚è§£æ link è¡¨å±‚ä»·å€¼ï¼ˆå†°å±±ä¹‹ä¸Šï¼‰\nçŸ¥è¯†ä½“ç³»ï¼šå­¦å†èƒŒæ™¯ã€ä¸“ä¸šèµ„è´¨ æŠ€èƒ½å‚¨å¤‡ï¼šè¯­è¨€èƒ½åŠ›ã€æŠ€æœ¯è®¤è¯ è¡Œä¸ºè¾“å‡ºï¼šå·¥ä½œæˆæœã€ç¤¾äº¤è¡¨ç° æ·±å±‚ä»·å€¼ï¼ˆå†°å±±ä¹‹ä¸‹ï¼‰\nè‡ªæˆ‘è®¤çŸ¥ï¼šå¯¹è‡ªèº«ä¼˜åŠ¿/å±€é™çš„æ¸…é†’åˆ¤æ–­ ä»·å€¼å–å‘ï¼šæ˜¯éåˆ¤æ–­æ ‡å‡†å’Œäººç”Ÿä¼˜å…ˆçº§ æ€ç»´æ¨¡å¼ï¼šåˆ†æé—®é¢˜çš„è§’åº¦ä¸é€»è¾‘ç»“æ„ æƒ…ç»ªèƒ½åŠ›ï¼šå‹åŠ›ç®¡ç†ã€åŒç†å¿ƒã€è‡ªæˆ‘æ¿€åŠ± åº•å±‚åŠ¨æœºï¼šæˆå°±æ¬²æœ›ã€å¥½å¥‡å¿ƒã€åˆ©ä»–ç²¾ç¥ ä¸‰ã€éšæ€§ç‰¹è´¨çš„å…³é”®ä½œç”¨ link å†³ç­–è´¨é‡ï¼šé¢å¯¹èŒä¸šé€‰æ‹©æ—¶ï¼Œä»·å€¼è§‚å†³å®šæ–¹å‘å–èˆ é€†å¢ƒçªç ´ï¼šæˆé•¿å‹æ€ç»´å¸®åŠ©çªç ´èƒ½åŠ›å¤©èŠ±æ¿ å…³ç³»æ„å»ºï¼šæƒ…ç»ªæ™ºåŠ›å½±å“å›¢é˜Ÿåä½œæ•ˆèƒ½ æŒç»­å‘å±•ï¼šå†…åœ¨åŠ¨æœºé©±åŠ¨ç»ˆèº«å­¦ä¹  å…¸å‹æ¡ˆä¾‹ï¼šä¹”å¸ƒæ–¯å¯¹å®Œç¾ä¸»ä¹‰çš„æ‰§ç€ï¼ˆéšæ€§ä»·å€¼ï¼‰æ¨åŠ¨è‹¹æœçªç ´æ€§åˆ›æ–°ï¼Œè¿œè¶…å…¶ç¼–ç¨‹èƒ½åŠ›ï¼ˆæ˜¾æ€§ä»·å€¼ï¼‰å¸¦æ¥çš„å½±å“ã€‚\nå››ã€ä»·å€¼æå‡è·¯å¾„ link æ˜¾æ€§å±‚è¿­ä»£ï¼šå»ºç«‹Tå‹çŸ¥è¯†ç»“æ„ï¼Œä¿æŒæŠ€èƒ½æ›´æ–° éšæ€§å±‚ä¿®ç‚¼ï¼š é€šè¿‡åæ€æ—¥è®°å¼ºåŒ–è‡ªæˆ‘è®¤çŸ¥ ç”¨æ­£å¿µå†¥æƒ³æå‡æƒ…ç»ªè§‰å¯Ÿ æ„å»ºå¤šå…ƒæ€ç»´æ¨¡å‹ï¼ˆå¦‚èŠ’æ ¼è·¨å­¦ç§‘æ€ç»´ï¼‰ ç³»ç»Ÿæ•´åˆï¼šå°†å†…åœ¨ç‰¹è´¨è½¬åŒ–ä¸ºå¯å±•ç¤ºçš„è¡Œä¸ºæˆæœ äº”ã€åº”ç”¨åœºæ™¯ link èŒä¸šè§„åˆ’ï¼šåŒ¹é…æ·±å±‚ä»·å€¼è§‚çš„å·¥ä½œå¸¦æ¥æŒç»­åŠ¨åŠ› äººæ‰é€‰æ‹”ï¼šä¼ä¸šæ›´å…³æ³¨å†°å±±ä¸‹çš„æ–‡åŒ–é€‚åº”æ€§ æ•™è‚²åŸ¹å…»ï¼šå®¶åº­æ•™è‚²åº”ä¾§é‡å“æ ¼å¡‘é€ è€Œéå•çº¯çŸ¥è¯†çŒè¾“ ç»“è¯­ linkä¸ªäººä»·å€¼å†°å±±æ¨¡å‹æé†’æˆ‘ä»¬ï¼šåœ¨äººå·¥æ™ºèƒ½æ›¿ä»£æ˜¾æ€§æŠ€èƒ½çš„æ—¶ä»£ï¼Œå¡‘é€ å¼ºå¤§çš„åº•å±‚æ“ä½œç³»ç»Ÿï¼ˆä»·å€¼è§‚Ã—æ€ç»´Ã—åŠ¨æœºï¼‰æ‰æ˜¯æ ¸å¿ƒç«äº‰åŠ›ã€‚æ­£å¦‚ç®¡ç†å­¦å®¶å½¼å¾—Â·å¾·é²å…‹æ‰€è¨€ï¼šâ€œé¢„æµ‹æœªæ¥çš„æœ€å¥½æ–¹å¼ï¼Œå°±æ˜¯åˆ›é€ å®ƒã€‚â€œè€Œåˆ›é€ æœªæ¥çš„å¯†é’¥ï¼Œæ­£è—åœ¨æ¯ä¸ªäººçš„å†°å±±ä¹‹ä¸‹ã€‚\n",
                content: "ä¸€ã€æ¨¡å‹ç¼˜èµ·ä¸æ ¸å¿ƒé€»è¾‘ linkå†°å±±ç†è®ºæœ€æ—©ç”±å¼—æ´›ä¼Šå¾·æå‡ºï¼Œç»ç¾å›½å¿ƒç†å­¦å®¶éº¦å…‹åˆ©å…°å‘å±•ä¸ºèƒ½åŠ›ç´ è´¨æ¨¡å‹ã€‚ä¸ªäººä»·å€¼å†°å±±æ¨¡å‹åœ¨æ­¤åŸºç¡€ä¸Šæ¼”åŒ–è€Œæ¥ï¼Œå°†äººçš„ç»¼åˆä»·å€¼æ¯”ä½œæµ·ä¸Šå†°å±±ï¼š\nå¯è§éƒ¨åˆ†ï¼ˆ20%ï¼‰ï¼šçŸ¥è¯†å‚¨å¤‡ã€æŠ€èƒ½è¯ä¹¦ã€è¡Œä¸ºè¡¨ç°ç­‰æ˜¾æ€§è¦ç´  æ½œåœ¨éƒ¨åˆ†ï¼ˆ80%ï¼‰ï¼šä»·å€¼è§‚ã€æ€ç»´æ¨¡å¼ã€æƒ…ç»ªèƒ½åŠ›ã€å†…åœ¨åŠ¨æœºç­‰éšæ€§ç‰¹è´¨ è¯¥æ¨¡å‹æ­ç¤ºï¼šå†³å®šä¸ªäººå‘å±•ä¸Šé™çš„å¾€å¾€ä¸æ˜¯æ°´é¢ä¸Šçš„\"ç¡¬å®åŠ›\"ï¼Œè€Œæ˜¯æ·±è—äºæ„è¯†åº•å±‚çš„\"è½¯ç´ è´¨\"ã€‚\näºŒã€å†°å±±åˆ†å±‚è§£æ link è¡¨å±‚ä»·å€¼ï¼ˆå†°å±±ä¹‹ä¸Šï¼‰\nçŸ¥è¯†ä½“ç³»ï¼šå­¦å†èƒŒæ™¯ã€ä¸“ä¸šèµ„è´¨ æŠ€èƒ½å‚¨å¤‡ï¼šè¯­è¨€èƒ½åŠ›ã€æŠ€æœ¯è®¤è¯ è¡Œä¸ºè¾“å‡ºï¼šå·¥ä½œæˆæœã€ç¤¾äº¤è¡¨ç° æ·±å±‚ä»·å€¼ï¼ˆå†°å±±ä¹‹ä¸‹ï¼‰\nè‡ªæˆ‘è®¤çŸ¥ï¼šå¯¹è‡ªèº«ä¼˜åŠ¿/å±€é™çš„æ¸…é†’åˆ¤æ–­ ä»·å€¼å–å‘ï¼šæ˜¯éåˆ¤æ–­æ ‡å‡†å’Œäººç”Ÿä¼˜å…ˆçº§ æ€ç»´æ¨¡å¼ï¼šåˆ†æé—®é¢˜çš„è§’åº¦ä¸é€»è¾‘ç»“æ„ æƒ…ç»ªèƒ½åŠ›ï¼šå‹åŠ›ç®¡ç†ã€åŒç†å¿ƒã€è‡ªæˆ‘æ¿€åŠ± åº•å±‚åŠ¨æœºï¼šæˆå°±æ¬²æœ›ã€å¥½å¥‡å¿ƒã€åˆ©ä»–ç²¾ç¥ ä¸‰ã€éšæ€§ç‰¹è´¨çš„å…³é”®ä½œç”¨ link å†³ç­–è´¨é‡ï¼šé¢å¯¹èŒä¸šé€‰æ‹©æ—¶ï¼Œä»·å€¼è§‚å†³å®šæ–¹å‘å–èˆ é€†å¢ƒçªç ´ï¼šæˆé•¿å‹æ€ç»´å¸®åŠ©çªç ´èƒ½åŠ›å¤©èŠ±æ¿ å…³ç³»æ„å»ºï¼šæƒ…ç»ªæ™ºåŠ›å½±å“å›¢é˜Ÿåä½œæ•ˆèƒ½ æŒç»­å‘å±•ï¼šå†…åœ¨åŠ¨æœºé©±åŠ¨ç»ˆèº«å­¦ä¹  å…¸å‹æ¡ˆä¾‹ï¼šä¹”å¸ƒæ–¯å¯¹å®Œç¾ä¸»ä¹‰çš„æ‰§ç€ï¼ˆéšæ€§ä»·å€¼ï¼‰æ¨åŠ¨è‹¹æœçªç ´æ€§åˆ›æ–°ï¼Œè¿œè¶…å…¶ç¼–ç¨‹èƒ½åŠ›ï¼ˆæ˜¾æ€§ä»·å€¼ï¼‰å¸¦æ¥çš„å½±å“ã€‚\nå››ã€ä»·å€¼æå‡è·¯å¾„ link æ˜¾æ€§å±‚è¿­ä»£ï¼šå»ºç«‹Tå‹çŸ¥è¯†ç»“æ„ï¼Œä¿æŒæŠ€èƒ½æ›´æ–° éšæ€§å±‚ä¿®ç‚¼ï¼š é€šè¿‡åæ€æ—¥è®°å¼ºåŒ–è‡ªæˆ‘è®¤çŸ¥ ç”¨æ­£å¿µå†¥æƒ³æå‡æƒ…ç»ªè§‰å¯Ÿ æ„å»ºå¤šå…ƒæ€ç»´æ¨¡å‹ï¼ˆå¦‚èŠ’æ ¼è·¨å­¦ç§‘æ€ç»´ï¼‰ ç³»ç»Ÿæ•´åˆï¼šå°†å†…åœ¨ç‰¹è´¨è½¬åŒ–ä¸ºå¯å±•ç¤ºçš„è¡Œä¸ºæˆæœ äº”ã€åº”ç”¨åœºæ™¯ link èŒä¸šè§„åˆ’ï¼šåŒ¹é…æ·±å±‚ä»·å€¼è§‚çš„å·¥ä½œå¸¦æ¥æŒç»­åŠ¨åŠ› äººæ‰é€‰æ‹”ï¼šä¼ä¸šæ›´å…³æ³¨å†°å±±ä¸‹çš„æ–‡åŒ–é€‚åº”æ€§ æ•™è‚²åŸ¹å…»ï¼šå®¶åº­æ•™è‚²åº”ä¾§é‡å“æ ¼å¡‘é€ è€Œéå•çº¯çŸ¥è¯†çŒè¾“ ç»“è¯­ linkä¸ªäººä»·å€¼å†°å±±æ¨¡å‹æé†’æˆ‘ä»¬ï¼šåœ¨äººå·¥æ™ºèƒ½æ›¿ä»£æ˜¾æ€§æŠ€èƒ½çš„æ—¶ä»£ï¼Œå¡‘é€ å¼ºå¤§çš„åº•å±‚æ“ä½œç³»ç»Ÿï¼ˆä»·å€¼è§‚Ã—æ€ç»´Ã—åŠ¨æœºï¼‰æ‰æ˜¯æ ¸å¿ƒç«äº‰åŠ›ã€‚æ­£å¦‚ç®¡ç†å­¦å®¶å½¼å¾—Â·å¾·é²å…‹æ‰€è¨€ï¼šâ€œé¢„æµ‹æœªæ¥çš„æœ€å¥½æ–¹å¼ï¼Œå°±æ˜¯åˆ›é€ å®ƒã€‚â€œè€Œåˆ›é€ æœªæ¥çš„å¯†é’¥ï¼Œæ­£è—åœ¨æ¯ä¸ªäººçš„å†°å±±ä¹‹ä¸‹ã€‚\n"
            }
        );
    index.add(
            {
                id:  37 ,
                href: "\/docs\/information\/secure\/",
                title: "å®‰å…¨",
                description: "",
                content: ""
            }
        );
    index.add(
            {
                id:  38 ,
                href: "\/docs\/information\/software\/cloud\/storage\/pv\/",
                title: "æŒä¹…åŒ–å·ï¼ˆPersistent Volumeï¼‰",
                description: "æœ¬æ–‡æ¡£ä»‹ç»äº† Kubernetes ä¸­ PersistentVolume çš„å½“å‰çŠ¶æ€ã€‚å»ºè®®æ‚¨åœ¨é˜…è¯»æœ¬æ–‡æ¡£å‰å…ˆç†Ÿæ‚‰ volumeã€‚\nä»‹ç» linkå¯¹äºç®¡ç†è®¡ç®—èµ„æºæ¥è¯´ï¼Œç®¡ç†å­˜å‚¨èµ„æºæ˜æ˜¾æ˜¯å¦ä¸€ä¸ªé—®é¢˜ã€‚PersistentVolume å­ç³»ç»Ÿä¸ºç”¨æˆ·å’Œç®¡ç†å‘˜æä¾›äº†ä¸€ä¸ª APIï¼Œè¯¥ API å°†å¦‚ä½•æä¾›å­˜å‚¨çš„ç»†èŠ‚æŠ½è±¡äº†å‡ºæ¥ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬å¼•å…¥ä¸¤ä¸ªæ–°çš„ API èµ„æºï¼šPersistentVolume å’Œ PersistentVolumeClaimã€‚\nPersistentVolumeï¼ˆPVï¼‰æ˜¯ç”±ç®¡ç†å‘˜è®¾ç½®çš„å­˜å‚¨ï¼Œå®ƒæ˜¯ç¾¤é›†çš„ä¸€éƒ¨åˆ†ã€‚å°±åƒèŠ‚ç‚¹æ˜¯é›†ç¾¤ä¸­çš„èµ„æºä¸€æ ·ï¼ŒPV ä¹Ÿæ˜¯é›†ç¾¤ä¸­çš„èµ„æºã€‚ PV æ˜¯ Volume ä¹‹ç±»çš„å·æ’ä»¶ï¼Œä½†å…·æœ‰ç‹¬ç«‹äºä½¿ç”¨ PV çš„ Pod çš„ç”Ÿå‘½å‘¨æœŸã€‚æ­¤ API å¯¹è±¡åŒ…å«å­˜å‚¨å®ç°çš„ç»†èŠ‚ï¼Œå³ NFSã€iSCSI æˆ–ç‰¹å®šäºäº‘ä¾›åº”å•†çš„å­˜å‚¨ç³»ç»Ÿã€‚\n",
                content: "æœ¬æ–‡æ¡£ä»‹ç»äº† Kubernetes ä¸­ PersistentVolume çš„å½“å‰çŠ¶æ€ã€‚å»ºè®®æ‚¨åœ¨é˜…è¯»æœ¬æ–‡æ¡£å‰å…ˆç†Ÿæ‚‰ volumeã€‚\nä»‹ç» linkå¯¹äºç®¡ç†è®¡ç®—èµ„æºæ¥è¯´ï¼Œç®¡ç†å­˜å‚¨èµ„æºæ˜æ˜¾æ˜¯å¦ä¸€ä¸ªé—®é¢˜ã€‚PersistentVolume å­ç³»ç»Ÿä¸ºç”¨æˆ·å’Œç®¡ç†å‘˜æä¾›äº†ä¸€ä¸ª APIï¼Œè¯¥ API å°†å¦‚ä½•æä¾›å­˜å‚¨çš„ç»†èŠ‚æŠ½è±¡äº†å‡ºæ¥ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬å¼•å…¥ä¸¤ä¸ªæ–°çš„ API èµ„æºï¼šPersistentVolume å’Œ PersistentVolumeClaimã€‚\nPersistentVolumeï¼ˆPVï¼‰æ˜¯ç”±ç®¡ç†å‘˜è®¾ç½®çš„å­˜å‚¨ï¼Œå®ƒæ˜¯ç¾¤é›†çš„ä¸€éƒ¨åˆ†ã€‚å°±åƒèŠ‚ç‚¹æ˜¯é›†ç¾¤ä¸­çš„èµ„æºä¸€æ ·ï¼ŒPV ä¹Ÿæ˜¯é›†ç¾¤ä¸­çš„èµ„æºã€‚ PV æ˜¯ Volume ä¹‹ç±»çš„å·æ’ä»¶ï¼Œä½†å…·æœ‰ç‹¬ç«‹äºä½¿ç”¨ PV çš„ Pod çš„ç”Ÿå‘½å‘¨æœŸã€‚æ­¤ API å¯¹è±¡åŒ…å«å­˜å‚¨å®ç°çš„ç»†èŠ‚ï¼Œå³ NFSã€iSCSI æˆ–ç‰¹å®šäºäº‘ä¾›åº”å•†çš„å­˜å‚¨ç³»ç»Ÿã€‚\nPersistentVolumeClaimï¼ˆPVCï¼‰æ˜¯ç”¨æˆ·å­˜å‚¨çš„è¯·æ±‚ã€‚å®ƒä¸ Pod ç›¸ä¼¼ã€‚Pod æ¶ˆè€—èŠ‚ç‚¹èµ„æºï¼ŒPVC æ¶ˆè€— PV èµ„æºã€‚Pod å¯ä»¥è¯·æ±‚ç‰¹å®šçº§åˆ«çš„èµ„æºï¼ˆCPU å’Œå†…å­˜ï¼‰ã€‚å£°æ˜å¯ä»¥è¯·æ±‚ç‰¹å®šçš„å¤§å°å’Œè®¿é—®æ¨¡å¼ï¼ˆä¾‹å¦‚ï¼Œå¯ä»¥ä»¥è¯»/å†™ä¸€æ¬¡æˆ– åªè¯»å¤šæ¬¡æ¨¡å¼æŒ‚è½½ï¼‰ã€‚\nè™½ç„¶ PersistentVolumeClaims å…è®¸ç”¨æˆ·ä½¿ç”¨æŠ½è±¡å­˜å‚¨èµ„æºï¼Œä½†ç”¨æˆ·éœ€è¦å…·æœ‰ä¸åŒæ€§è´¨ï¼ˆä¾‹å¦‚æ€§èƒ½ï¼‰çš„ PersistentVolume æ¥è§£å†³ä¸åŒçš„é—®é¢˜ã€‚é›†ç¾¤ç®¡ç†å‘˜éœ€è¦èƒ½å¤Ÿæä¾›å„ç§å„æ ·çš„ PersistentVolumeï¼Œè¿™äº›PersistentVolume çš„å¤§å°å’Œè®¿é—®æ¨¡å¼å¯ä»¥å„æœ‰ä¸åŒï¼Œä½†ä¸éœ€è¦å‘ç”¨æˆ·å…¬å¼€å®ç°è¿™äº›å·çš„ç»†èŠ‚ã€‚å¯¹äºè¿™äº›éœ€æ±‚ï¼ŒStorageClass èµ„æºå¯ä»¥å®ç°ã€‚\nè¯·å‚é˜…å·¥ä½œç¤ºä¾‹çš„è¯¦ç»†è¿‡ç¨‹ã€‚\nå·å’Œå£°æ˜çš„ç”Ÿå‘½å‘¨æœŸ linkPV å±äºé›†ç¾¤ä¸­çš„èµ„æºã€‚PVC æ˜¯å¯¹è¿™äº›èµ„æºçš„è¯·æ±‚ï¼Œä¹Ÿä½œä¸ºå¯¹èµ„æºçš„è¯·æ±‚çš„æ£€æŸ¥ã€‚ PV å’Œ PVC ä¹‹é—´çš„ç›¸äº’ä½œç”¨éµå¾ªè¿™æ ·çš„ç”Ÿå‘½å‘¨æœŸï¼š\né…ç½®ï¼ˆProvisionï¼‰ linkæœ‰ä¸¤ç§æ–¹å¼æ¥é…ç½® PVï¼šé™æ€æˆ–åŠ¨æ€ã€‚\né™æ€ linké›†ç¾¤ç®¡ç†å‘˜åˆ›å»ºä¸€äº› PVã€‚å®ƒä»¬å¸¦æœ‰å¯ä¾›ç¾¤é›†ç”¨æˆ·ä½¿ç”¨çš„å®é™…å­˜å‚¨çš„ç»†èŠ‚ã€‚å®ƒä»¬å­˜åœ¨äº Kubernetes API ä¸­ï¼Œå¯ç”¨äºæ¶ˆè´¹ã€‚\nåŠ¨æ€ linkæ ¹æ® StorageClassesï¼Œå½“ç®¡ç†å‘˜åˆ›å»ºçš„é™æ€ PV éƒ½ä¸åŒ¹é…ç”¨æˆ·çš„ PersistentVolumeClaim æ—¶ï¼Œé›†ç¾¤å¯èƒ½ä¼šå°è¯•åŠ¨æ€åœ°ä¸º PVC åˆ›å»ºå·ã€‚\nç»‘å®š linkåœ¨åŠ¨æ€é…ç½®çš„æƒ…å†µä¸‹ï¼Œç”¨æˆ·åˆ›å»ºæˆ–å·²ç»åˆ›å»ºäº†å…·æœ‰ç‰¹å®šå­˜å‚¨é‡çš„ PersistentVolumeClaim ä»¥åŠæŸäº›è®¿é—®æ¨¡å¼ã€‚master ä¸­çš„æ§åˆ¶ç¯è·¯ç›‘è§†æ–°çš„ PVCï¼Œå¯»æ‰¾åŒ¹é…çš„ PVï¼ˆå¦‚æœå¯èƒ½ï¼‰ï¼Œå¹¶å°†å®ƒä»¬ç»‘å®šåœ¨ä¸€èµ·ã€‚å¦‚æœä¸ºæ–°çš„ PVC åŠ¨æ€è°ƒé… PVï¼Œåˆ™è¯¥ç¯è·¯å°†å§‹ç»ˆå°†è¯¥ PV ç»‘å®šåˆ° PVCã€‚å¦åˆ™ï¼Œç”¨æˆ·æ€»ä¼šå¾—åˆ°ä»–ä»¬æ‰€è¯·æ±‚çš„å­˜å‚¨ï¼Œä½†æ˜¯å®¹é‡å¯èƒ½è¶…å‡ºè¦æ±‚çš„æ•°é‡ã€‚ä¸€æ—¦ PV å’Œ PVC ç»‘å®šåï¼ŒPersistentVolumeClaim ç»‘å®šæ˜¯æ’ä»–æ€§çš„ï¼Œä¸ç®¡å®ƒä»¬æ˜¯å¦‚ä½•ç»‘å®šçš„ã€‚ PVC è·Ÿ PV ç»‘å®šæ˜¯ä¸€å¯¹ä¸€çš„æ˜ å°„ã€‚\nå¦‚æœæ²¡æœ‰åŒ¹é…çš„å·ï¼Œå£°æ˜å°†æ— é™æœŸåœ°ä¿æŒæœªç»‘å®šçŠ¶æ€ã€‚éšç€åŒ¹é…å·çš„å¯ç”¨ï¼Œå£°æ˜å°†è¢«ç»‘å®šã€‚ä¾‹å¦‚ï¼Œé…ç½®äº†è®¸å¤š 50Gi PVçš„é›†ç¾¤å°†ä¸ä¼šåŒ¹é…è¯·æ±‚ 100Gi çš„PVCã€‚å°†100Gi PV æ·»åŠ åˆ°ç¾¤é›†æ—¶ï¼Œå¯ä»¥ç»‘å®š PVCã€‚\nä½¿ç”¨ linkPod ä½¿ç”¨å£°æ˜ä½œä¸ºå·ã€‚é›†ç¾¤æ£€æŸ¥å£°æ˜ä»¥æŸ¥æ‰¾ç»‘å®šçš„å·å¹¶ä¸ºé›†ç¾¤æŒ‚è½½è¯¥å·ã€‚å¯¹äºæ”¯æŒå¤šç§è®¿é—®æ¨¡å¼çš„å·ï¼Œç”¨æˆ·æŒ‡å®šåœ¨ä½¿ç”¨å£°æ˜ä½œä¸ºå®¹å™¨ä¸­çš„å·æ—¶æ‰€éœ€çš„æ¨¡å¼ã€‚\nç”¨æˆ·è¿›è¡Œäº†å£°æ˜ï¼Œå¹¶ä¸”è¯¥å£°æ˜æ˜¯ç»‘å®šçš„ï¼Œåˆ™åªè¦ç”¨æˆ·éœ€è¦ï¼Œç»‘å®šçš„ PV å°±å±äºè¯¥ç”¨æˆ·ã€‚ç”¨æˆ·é€šè¿‡åœ¨ Pod çš„ volume é…ç½®ä¸­åŒ…å« persistentVolumeClaim æ¥è°ƒåº¦ Pod å¹¶è®¿é—®ç”¨æˆ·å£°æ˜çš„ PVã€‚\næŒä¹…åŒ–å·å£°æ˜çš„ä¿æŠ¤ linkPVC ä¿æŠ¤çš„ç›®çš„æ˜¯ç¡®ä¿ç”± pod æ­£åœ¨ä½¿ç”¨çš„ PVC ä¸ä¼šä»ç³»ç»Ÿä¸­ç§»é™¤ï¼Œå› ä¸ºå¦‚æœè¢«ç§»é™¤çš„è¯å¯èƒ½ä¼šå¯¼è‡´æ•°æ®ä¸¢å¤±ã€‚\næ³¨æ„ï¼šå½“ pod çŠ¶æ€ä¸º Pending å¹¶ä¸” pod å·²ç»åˆ†é…ç»™èŠ‚ç‚¹æˆ– pod ä¸º Running çŠ¶æ€æ—¶ï¼ŒPVC å¤„äºæ´»åŠ¨çŠ¶æ€ã€‚\nå½“å¯ç”¨PVC ä¿æŠ¤ alpha åŠŸèƒ½æ—¶ï¼Œå¦‚æœç”¨æˆ·åˆ é™¤äº†ä¸€ä¸ª pod æ­£åœ¨ä½¿ç”¨çš„ PVCï¼Œåˆ™è¯¥ PVC ä¸ä¼šè¢«ç«‹å³åˆ é™¤ã€‚PVC çš„åˆ é™¤å°†è¢«æ¨è¿Ÿï¼Œç›´åˆ° PVC ä¸å†è¢«ä»»ä½• pod ä½¿ç”¨ã€‚\næ‚¨å¯ä»¥çœ‹åˆ°ï¼Œå½“ PVC çš„çŠ¶æ€ä¸º Teminatiing æ—¶ï¼ŒPVC å—åˆ°ä¿æŠ¤ï¼ŒFinalizers åˆ—è¡¨ä¸­åŒ…å« kubernetes.io/pvc-protectionï¼š\nkubectl described pvc hostpath Name: hostpath Namespace: default StorageClass: example-hostpath Status: Terminating Volume: Labels: Annotations: volume.beta.kubernetes.io/storage-class=example-hostpath volume.beta.kubernetes.io/storage-provisioner=example.com/hostpath Finalizers: [kubernetes.io/pvc-protection] ... å›æ”¶ linkç”¨æˆ·ç”¨å®Œ volume åï¼Œå¯ä»¥ä»å…è®¸å›æ”¶èµ„æºçš„ API ä¸­åˆ é™¤ PVC å¯¹è±¡ã€‚PersistentVolume çš„å›æ”¶ç­–ç•¥å‘Šè¯‰é›†ç¾¤åœ¨å­˜å‚¨å·å£°æ˜é‡Šæ”¾ååº”å¦‚ä½•å¤„ç†è¯¥å·ã€‚ç›®å‰ï¼Œvolume çš„å¤„ç†ç­–ç•¥æœ‰ä¿ç•™ã€å›æ”¶æˆ–åˆ é™¤ã€‚\nä¿ç•™ linkä¿ç•™å›æ”¶ç­–ç•¥å…è®¸æ‰‹åŠ¨å›æ”¶èµ„æºã€‚å½“ PersistentVolumeClaim è¢«åˆ é™¤æ—¶ï¼ŒPersistentVolume ä»ç„¶å­˜åœ¨ï¼Œvolume è¢«è§†ä¸ºâ€œå·²é‡Šæ”¾â€ã€‚ä½†æ˜¯ç”±äºå‰ä¸€ä¸ªå£°æ˜äººçš„æ•°æ®ä»ç„¶å­˜åœ¨ï¼Œæ‰€ä»¥è¿˜ä¸èƒ½é©¬ä¸Šè¿›è¡Œå…¶ä»–å£°æ˜ã€‚ç®¡ç†å‘˜å¯ä»¥é€šè¿‡ä»¥ä¸‹æ­¥éª¤æ‰‹åŠ¨å›æ”¶å·ã€‚\nåˆ é™¤ PersistentVolumeã€‚åœ¨åˆ é™¤ PV åï¼Œå¤–éƒ¨åŸºç¡€æ¶æ„ä¸­çš„å…³è”å­˜å‚¨èµ„äº§ï¼ˆå¦‚ AWS EBSã€GCE PDã€Azure Disk æˆ– Cinder å·ï¼‰ä»ç„¶å­˜åœ¨ã€‚ æ‰‹åŠ¨æ¸…ç†ç›¸å…³å­˜å‚¨èµ„äº§ä¸Šçš„æ•°æ®ã€‚ æ‰‹åŠ¨åˆ é™¤å…³è”çš„å­˜å‚¨èµ„äº§ï¼Œæˆ–è€…å¦‚æœè¦é‡æ–°ä½¿ç”¨ç›¸åŒçš„å­˜å‚¨èµ„äº§ï¼Œè¯·ä½¿ç”¨å­˜å‚¨èµ„äº§å®šä¹‰åˆ›å»ºæ–°çš„ PersistentVolumeã€‚ å›æ”¶ linkå¦‚æœå­˜å‚¨å·æ’ä»¶æ”¯æŒï¼Œå›æ”¶ç­–ç•¥ä¼šåœ¨ volumeä¸Šæ‰§è¡ŒåŸºæœ¬æ“¦é™¤ï¼ˆrm -rf / thevolume / *ï¼‰ï¼Œå¯è¢«å†æ¬¡å£°æ˜ä½¿ç”¨ã€‚\nä½†æ˜¯ï¼Œç®¡ç†å‘˜å¯ä»¥ä½¿ç”¨å¦‚æ­¤å¤„æ‰€è¿°çš„ Kubernetes controller manager å‘½ä»¤è¡Œå‚æ•°æ¥é…ç½®è‡ªå®šä¹‰å›æ”¶ç«™ pod æ¨¡æ¿ã€‚è‡ªå®šä¹‰å›æ”¶ç«™ pod æ¨¡æ¿å¿…é¡»åŒ…å« volumes è§„èŒƒï¼Œå¦‚ä¸‹é¢çš„ç¤ºä¾‹æ‰€ç¤ºï¼š\napiVersion: v1 kind: Pod metadata: name: pv-recycler namespace: default spec: restartPolicy: Never volumes: - name: vol hostPath: path: /any/path/it/will/be/replaced containers: - name: pv-recycler image: \"k8s.gcr.io/busybox\" command: [\"/bin/sh\", \"-c\", \"test -e /scrub \u0026\u0026 rm -rf /scrub/..?* /scrub/.[!.]* /scrub/* \u0026\u0026 test -z \\\"$(ls -A /scrub)\\\" || exit 1\"] volumeMounts: - name: vol mountPath: /scrub ä½†æ˜¯ï¼Œvolumes éƒ¨åˆ†çš„è‡ªå®šä¹‰å›æ”¶ç«™æ¨¡å—ä¸­æŒ‡å®šçš„ç‰¹å®šè·¯å¾„å°†è¢«æ›¿æ¢ä¸ºæ­£åœ¨å›æ”¶çš„å·çš„ç‰¹å®šè·¯å¾„ã€‚\nåˆ é™¤ linkå¯¹äºæ”¯æŒåˆ é™¤å›æ”¶ç­–ç•¥çš„å·æ’ä»¶ï¼Œåˆ é™¤æ“ä½œå°†ä» Kubernetes ä¸­åˆ é™¤ PersistentVolume å¯¹è±¡ï¼Œå¹¶åˆ é™¤å¤–éƒ¨åŸºç¡€æ¶æ„ï¼ˆå¦‚ AWS EBSã€GCE PDã€Azure Disk æˆ– Cinder å·ï¼‰ä¸­çš„å…³è”å­˜å‚¨èµ„äº§ã€‚åŠ¨æ€é…ç½®çš„å·ç»§æ‰¿å…¶ StorageClassï¼Œé»˜è®¤ä¸º Deleteã€‚ç®¡ç†å‘˜åº”è¯¥æ ¹æ®ç”¨æˆ·çš„æœŸæœ›æ¥é…ç½® StorageClassï¼Œå¦åˆ™å°±å¿…é¡»è¦åœ¨ PV åˆ›å»ºåè¿›è¡Œç¼–è¾‘æˆ–ä¿®è¡¥ã€‚è¯·å‚é˜…æ›´æ”¹ PersistentVolume çš„å›æ”¶ç­–ç•¥ã€‚\næ‰©å±•æŒä¹…åŒ–å·å£°æ˜ linkKubernetes 1.8 å¢åŠ äº†å¯¹æ‰©å±•æŒä¹…åŒ–å­˜å‚¨å·çš„ Alpha æ”¯æŒã€‚åœ¨ v1.9 ä¸­ï¼Œä»¥ä¸‹æŒä¹…åŒ–å·æ”¯æŒæ‰©å±•æŒä¹…åŒ–å·å£°æ˜ï¼š\ngcePersistentDisk awsElasticBlockStore Cinder glusterfs rbd ç®¡ç†å‘˜å¯ä»¥é€šè¿‡å°† ExpandPersistentVolumes ç‰¹æ€§é—¨è®¾ç½®ä¸ºtrueæ¥å…è®¸æ‰©å±•æŒä¹…å·å£°æ˜ã€‚ç®¡ç†å‘˜è¿˜åº”è¯¥å¯ç”¨PersistentVolumeClaimResize å‡†å…¥æ§åˆ¶æ’ä»¶æ¥æ‰§è¡Œå¯¹å¯è°ƒæ•´å¤§å°çš„å·çš„å…¶ä»–éªŒè¯ã€‚\nä¸€æ—¦ PersistentVolumeClaimResize å‡†å…¥æ’ä»¶å·²æ‰“å¼€ï¼Œå°†åªå…è®¸å…¶ allowVolumeExpansion å­—æ®µè®¾ç½®ä¸º true çš„å­˜å‚¨ç±»è¿›è¡Œå¤§å°è°ƒæ•´ã€‚\nkind: StorageClass apiVersion: storage.k8s.io/v1 metadata: name: gluster-vol-default provisioner: kubernetes.io/glusterfs parameters: resturl: \"http://192.168.10.100:8080\" restuser: \"\" secretNamespace: \"\" secretName: \"\" allowVolumeExpansion: true ä¸€æ—¦åŠŸèƒ½é—¨å’Œå‰è¿°å‡†å…¥æ’ä»¶æ‰“å¼€åï¼Œç”¨æˆ·å°±å¯ä»¥é€šè¿‡ç®€å•åœ°ç¼–è¾‘å£°æ˜ä»¥è¯·æ±‚æ›´å¤§çš„ PersistentVolumeClaim å·ã€‚è¿™åè¿‡æ¥å°†è§¦å‘ PersistentVolume åç«¯çš„å·æ‰©å±•ã€‚\nåœ¨ä»»ä½•æƒ…å†µä¸‹éƒ½ä¸ä¼šåˆ›å»ºæ–°çš„ PersistentVolume æ¥æ»¡è¶³å£°æ˜ã€‚ Kubernetes å°†å°è¯•è°ƒæ•´ç°æœ‰ volume æ¥æ»¡è¶³å£°æ˜çš„è¦æ±‚ã€‚\nå¯¹äºæ‰©å±•åŒ…å«æ–‡ä»¶ç³»ç»Ÿçš„å·ï¼Œåªæœ‰åœ¨ ReadWrite æ¨¡å¼ä¸‹ä½¿ç”¨ PersistentVolumeClaim å¯åŠ¨æ–°çš„ Pod æ—¶ï¼Œæ‰ä¼šæ‰§è¡Œæ–‡ä»¶ç³»ç»Ÿè°ƒæ•´å¤§å°ã€‚æ¢å¥è¯è¯´ï¼Œå¦‚æœæ­£åœ¨æ‰©å±•çš„å·åœ¨ pod æˆ–éƒ¨ç½²ä¸­ä½¿ç”¨ï¼Œåˆ™éœ€è¦åˆ é™¤å¹¶é‡æ–°åˆ›å»ºè¦è¿›è¡Œæ–‡ä»¶ç³»ç»Ÿè°ƒæ•´å¤§å°çš„podã€‚æ­¤å¤–ï¼Œæ–‡ä»¶ç³»ç»Ÿè°ƒæ•´å¤§å°ä»…é€‚ç”¨äºä»¥ä¸‹æ–‡ä»¶ç³»ç»Ÿç±»å‹ï¼š\nXFS Ext3ã€Ext4 æ³¨æ„ï¼šæ‰©å±• EBS å·æ˜¯ä¸€ä¸ªè€—æ—¶çš„æ“ä½œã€‚å¦å¤–ï¼Œæ¯6ä¸ªå°æ—¶æœ‰ä¸€ä¸ªä¿®æ”¹å·çš„é…é¢ã€‚\næŒä¹…åŒ–å·ç±»å‹ linkPersistentVolume ç±»å‹ä»¥æ’ä»¶å½¢å¼å®ç°ã€‚Kubernetes ç›®å‰æ”¯æŒä»¥ä¸‹æ’ä»¶ç±»å‹ï¼š\nGCEPersistentDisk AWSElasticBlockStore AzureFile AzureDisk FC (Fibre Channel) FlexVolume Flocker NFS iSCSI RBD (Ceph Block Device) CephFS Cinder (OpenStack block storage) Glusterfs VsphereVolume Quobyte Volumes HostPath ï¼ˆä»…é™äºä½†èŠ‚ç‚¹æµ‹è¯•â€”â€” ä¸ä¼šä»¥ä»»ä½•æ–¹å¼æ”¯æŒæœ¬åœ°å­˜å‚¨ï¼Œä¹Ÿæ— æ³•åœ¨å¤šèŠ‚ç‚¹é›†ç¾¤ä¸­å·¥ä½œï¼‰ VMware Photon Portworx Volumes ScaleIO Volumes StorageOS åŸå§‹å—æ”¯æŒä»…é€‚ç”¨äºä»¥ä¸Šè¿™äº›æ’ä»¶ã€‚\næŒä¹…åŒ–å· linkæ¯ä¸ª PV é…ç½®ä¸­éƒ½åŒ…å«ä¸€ä¸ª sepc è§„æ ¼å­—æ®µå’Œä¸€ä¸ª status å·çŠ¶æ€å­—æ®µã€‚\napiVersion: v1 kind: PersistentVolume metadata: name: pv0003 spec: capacity: storage: 5Gi volumeMode: Filesystem accessModes: - ReadWriteOnce persistentVolumeReclaimPolicy: Recycle storageClassName: slow mountOptions: - hard - nfsvers=4.1 nfs: path: /tmp server: 172.17.0.2 å®¹é‡ linké€šå¸¸ï¼ŒPV å°†å…·æœ‰ç‰¹å®šçš„å­˜å‚¨å®¹é‡ã€‚è¿™æ˜¯ä½¿ç”¨ PV çš„å®¹é‡å±æ€§è®¾ç½®çš„ã€‚æŸ¥çœ‹ Kubernetes èµ„æºæ¨¡å‹ ä»¥äº†è§£ capacity é¢„æœŸã€‚\nç›®å‰ï¼Œå­˜å‚¨å¤§å°æ˜¯å¯ä»¥è®¾ç½®æˆ–è¯·æ±‚çš„å”¯ä¸€èµ„æºã€‚æœªæ¥çš„å±æ€§å¯èƒ½åŒ…æ‹¬ IOPSã€ååé‡ç­‰ã€‚\nå·æ¨¡å¼ linkåœ¨ v1.9 ä¹‹å‰ï¼Œæ‰€æœ‰å·æ’ä»¶çš„é»˜è®¤è¡Œä¸ºæ˜¯åœ¨æŒä¹…å·ä¸Šåˆ›å»ºä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿã€‚åœ¨ v1.9 ä¸­ï¼Œç”¨æˆ·å¯ä»¥æŒ‡å®šä¸€ä¸ª volumeModeï¼Œé™¤äº†æ–‡ä»¶ç³»ç»Ÿä¹‹å¤–ï¼Œå®ƒç°åœ¨å°†æ”¯æŒåŸå§‹å—è®¾å¤‡ã€‚ volumeMode çš„æœ‰æ•ˆå€¼å¯ä»¥æ˜¯â€œFilesystemâ€æˆ–â€œBlockâ€ã€‚å¦‚æœæœªæŒ‡å®šï¼ŒvolumeMode å°†é»˜è®¤ä¸ºâ€œFilesystemâ€ã€‚è¿™æ˜¯ä¸€ä¸ªå¯é€‰çš„ API å‚æ•°ã€‚\næ³¨æ„ï¼šè¯¥åŠŸèƒ½åœ¨ V1.9 ä¸­æ˜¯ alphaçš„ï¼Œæœªæ¥å¯èƒ½ä¼šæ›´æ”¹ã€‚\nè®¿é—®æ¨¡å¼ linkPersistentVolume å¯ä»¥ä»¥èµ„æºæä¾›è€…æ”¯æŒçš„ä»»ä½•æ–¹å¼æŒ‚è½½åˆ°ä¸»æœºä¸Šã€‚å¦‚ä¸‹è¡¨æ‰€ç¤ºï¼Œä¾›åº”å•†å…·æœ‰ä¸åŒçš„åŠŸèƒ½ï¼Œæ¯ä¸ª PV çš„è®¿é—®æ¨¡å¼éƒ½å°†è¢«è®¾ç½®ä¸ºè¯¥å·æ”¯æŒçš„ç‰¹å®šæ¨¡å¼ã€‚ä¾‹å¦‚ï¼ŒNFS å¯ä»¥æ”¯æŒå¤šä¸ªè¯»/å†™å®¢æˆ·ç«¯ï¼Œä½†ç‰¹å®šçš„ NFS PV å¯èƒ½ä»¥åªè¯»æ–¹å¼å¯¼å‡ºåˆ°æœåŠ¡å™¨ä¸Šã€‚æ¯ä¸ª PV éƒ½æœ‰ä¸€å¥—è‡ªå·±çš„ç”¨æ¥æè¿°ç‰¹å®šåŠŸèƒ½çš„è®¿é—®æ¨¡å¼ã€‚\nå­˜å‚¨æ¨¡å¼åŒ…æ‹¬ï¼š\nReadWriteOnceâ€”â€”è¯¥å·å¯ä»¥è¢«å•ä¸ªèŠ‚ç‚¹ä»¥è¯»/å†™æ¨¡å¼æŒ‚è½½ ReadOnlyManyâ€”â€”è¯¥å·å¯ä»¥è¢«å¤šä¸ªèŠ‚ç‚¹ä»¥åªè¯»æ¨¡å¼æŒ‚è½½ ReadWriteManyâ€”â€”è¯¥å·å¯ä»¥è¢«å¤šä¸ªèŠ‚ç‚¹ä»¥è¯»/å†™æ¨¡å¼æŒ‚è½½ åœ¨å‘½ä»¤è¡Œä¸­ï¼Œè®¿é—®æ¨¡å¼ç¼©å†™ä¸ºï¼š\nRWO - ReadWriteOnce ROX - ReadOnlyMany RWX - ReadWriteMany é‡è¦ï¼ä¸€ä¸ªå·ä¸€æ¬¡åªèƒ½ä½¿ç”¨ä¸€ç§è®¿é—®æ¨¡å¼æŒ‚è½½ï¼Œå³ä½¿å®ƒæ”¯æŒå¾ˆå¤šè®¿é—®æ¨¡å¼ã€‚ä¾‹å¦‚ï¼ŒGCEPersistentDisk å¯ä»¥ç”±å•ä¸ªèŠ‚ç‚¹ä½œä¸º ReadWriteOnce æ¨¡å¼æŒ‚è½½ï¼Œæˆ–ç”±å¤šä¸ªèŠ‚ç‚¹ä»¥ ReadOnlyMany æ¨¡å¼æŒ‚è½½ï¼Œä½†ä¸èƒ½åŒæ—¶æŒ‚è½½ã€‚\nVolume æ’ä»¶ ReadWriteOnce ReadOnlyMany ReadWriteMany AWSElasticBlockStore âœ“ - - AzureFile âœ“ âœ“ âœ“ AzureDisk âœ“ - - CephFS âœ“ âœ“ âœ“ Cinder âœ“ - - FC âœ“ âœ“ - FlexVolume âœ“ âœ“ - Flocker âœ“ - - GCEPersistentDisk âœ“ âœ“ - Glusterfs âœ“ âœ“ âœ“ HostPath âœ“ - - iSCSI âœ“ âœ“ - PhotonPersistentDisk âœ“ - - Quobyte âœ“ âœ“ âœ“ NFS âœ“ âœ“ âœ“ RBD âœ“ âœ“ - VsphereVolume âœ“ - - ï¼ˆå½“ pod å¹¶åˆ—æ—¶æœ‰æ•ˆï¼‰ PortworxVolume âœ“ - âœ“ ScaleIO âœ“ âœ“ - StorageOS âœ“ - - ç±» linkPV å¯ä»¥å…·æœ‰ä¸€ä¸ªç±»ï¼Œé€šè¿‡å°† storageClassName å±æ€§è®¾ç½®ä¸º StorageClass çš„åç§°æ¥æŒ‡å®šè¯¥ç±»ã€‚ä¸€ä¸ªç‰¹å®šç±»åˆ«çš„ PV åªèƒ½ç»‘å®šåˆ°è¯·æ±‚è¯¥ç±»åˆ«çš„ PVCã€‚æ²¡æœ‰ storageClassName çš„ PV å°±æ²¡æœ‰ç±»ï¼Œå®ƒåªèƒ½ç»‘å®šåˆ°ä¸éœ€è¦ç‰¹å®šç±»çš„ PVCã€‚\nè¿‡å»ï¼Œä½¿ç”¨çš„æ˜¯ volume.beta.kubernetes.io/storage-class æ³¨è§£è€Œä¸æ˜¯ storageClassName å±æ€§ã€‚è¿™ä¸ªæ³¨è§£ä»ç„¶æœ‰æ•ˆï¼Œä½†æ˜¯å°†æ¥çš„ Kubernetes ç‰ˆæœ¬ä¸­å°†ä¼šå®Œå…¨å¼ƒç”¨å®ƒã€‚\nå›æ”¶ç­–ç•¥ linkå½“å‰çš„å›æ”¶ç­–ç•¥åŒ…æ‹¬ï¼š\nRetainï¼ˆä¿ç•™ï¼‰â€”â€”æ‰‹åŠ¨å›æ”¶ Recycleï¼ˆå›æ”¶ï¼‰â€”â€”åŸºæœ¬æ“¦é™¤ï¼ˆrm -rf /thevolume/*ï¼‰ Deleteï¼ˆåˆ é™¤ï¼‰â€”â€”å…³è”çš„å­˜å‚¨èµ„äº§ï¼ˆä¾‹å¦‚ AWS EBSã€GCE PDã€Azure Disk å’Œ OpenStack Cinder å·ï¼‰å°†è¢«åˆ é™¤ å½“å‰ï¼Œåªæœ‰ NFS å’Œ HostPath æ”¯æŒå›æ”¶ç­–ç•¥ã€‚AWS EBSã€GCE PDã€Azure Disk å’Œ Cinder å·æ”¯æŒåˆ é™¤ç­–ç•¥ã€‚\næŒ‚è½½é€‰é¡¹ linkKubernetes ç®¡ç†å‘˜å¯ä»¥æŒ‡å®šåœ¨èŠ‚ç‚¹ä¸Šä¸ºæŒ‚è½½æŒä¹…å·æŒ‡å®šæŒ‚è½½é€‰é¡¹ã€‚\næ³¨æ„ï¼šä¸æ˜¯æ‰€æœ‰çš„æŒä¹…åŒ–å·ç±»å‹éƒ½æ”¯æŒæŒ‚è½½é€‰é¡¹ã€‚\nä»¥ä¸‹å·ç±»å‹æ”¯æŒæŒ‚è½½é€‰é¡¹ï¼š\nGCEPersistentDisk AWSElasticBlockStore AzureFile AzureDisk NFS iSCSI RBD ï¼ˆCeph Block Deviceï¼‰ CephFS Cinder ï¼ˆOpenStack å·å­˜å‚¨ï¼‰ Glusterfs VsphereVolume Quobyte Volumes VMware Photon æŒ‚è½½é€‰é¡¹æ²¡æœ‰æ ¡éªŒï¼Œå¦‚æœæŒ‚è½½é€‰é¡¹æ— æ•ˆåˆ™æŒ‚è½½å¤±è´¥ã€‚\nè¿‡å»ï¼Œä½¿ç”¨ volume.beta.kubernetes.io/mount-options æ³¨è§£è€Œä¸æ˜¯ mountOptions å±æ€§ã€‚è¿™ä¸ªæ³¨è§£ä»ç„¶æœ‰æ•ˆï¼Œä½†åœ¨å°†æ¥çš„ Kubernetes ç‰ˆæœ¬ä¸­å®ƒå°†ä¼šè¢«å®Œå…¨å¼ƒç”¨ã€‚\nçŠ¶æ€ linkå·å¯ä»¥å¤„äºä»¥ä¸‹çš„æŸç§çŠ¶æ€ï¼š\nAvailableï¼ˆå¯ç”¨ï¼‰â€”â€”ä¸€å—ç©ºé—²èµ„æºè¿˜æ²¡æœ‰è¢«ä»»ä½•å£°æ˜ç»‘å®š Boundï¼ˆå·²ç»‘å®šï¼‰â€”â€”å·å·²ç»è¢«å£°æ˜ç»‘å®š Releasedï¼ˆå·²é‡Šæ”¾ï¼‰â€”â€”å£°æ˜è¢«åˆ é™¤ï¼Œä½†æ˜¯èµ„æºè¿˜æœªè¢«é›†ç¾¤é‡æ–°å£°æ˜ Failedï¼ˆå¤±è´¥ï¼‰â€”â€”è¯¥å·çš„è‡ªåŠ¨å›æ”¶å¤±è´¥ å‘½ä»¤è¡Œä¼šæ˜¾ç¤ºç»‘å®šåˆ° PV çš„ PVC çš„åç§°ã€‚\nPersistentVolumeClaim linkæ¯ä¸ª PVC ä¸­éƒ½åŒ…å«ä¸€ä¸ª spec è§„æ ¼å­—æ®µå’Œä¸€ä¸ª status å£°æ˜çŠ¶æ€å­—æ®µã€‚\nkind: PersistentVolumeClaim apiVersion: v1 metadata: name: myclaim spec: accessModes: - ReadWriteOnce volumeMode: Filesystem resources: requests: storage: 8Gi storageClassName: slow selector: matchLabels: release: \"stable\" matchExpressions: - {key: environment, operator: In, values: [dev]} è®¿é—®æ¨¡å¼ linkåœ¨è¯·æ±‚å…·æœ‰ç‰¹å®šè®¿é—®æ¨¡å¼çš„å­˜å‚¨æ—¶ï¼Œå£°æ˜ä½¿ç”¨ä¸å·ç›¸åŒçš„çº¦å®šã€‚\nå·æ¨¡å¼ linkå£°æ˜ä½¿ç”¨ä¸å·ç›¸åŒçš„çº¦å®šï¼ŒæŒ‡ç¤ºå°†å·ä½œä¸ºæ–‡ä»¶ç³»ç»Ÿæˆ–å—è®¾å¤‡ä½¿ç”¨ã€‚\nèµ„æº linkåƒ pod ä¸€æ ·ï¼Œå£°æ˜å¯ä»¥è¯·æ±‚ç‰¹å®šæ•°é‡çš„èµ„æºã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¯·æ±‚æ˜¯ç”¨äºå­˜å‚¨çš„ã€‚ç›¸åŒçš„èµ„æºæ¨¡å‹é€‚ç”¨äºå·å’Œå£°æ˜ã€‚\né€‰æ‹©å™¨ linkå£°æ˜å¯ä»¥æŒ‡å®šä¸€ä¸ªæ ‡ç­¾é€‰æ‹©å™¨æ¥è¿›ä¸€æ­¥è¿‡æ»¤è¯¥ç»„å·ã€‚åªæœ‰æ ‡ç­¾ä¸é€‰æ‹©å™¨åŒ¹é…çš„å·å¯ä»¥ç»‘å®šåˆ°å£°æ˜ã€‚é€‰æ‹©å™¨ç”±ä¸¤ä¸ªå­—æ®µç»„æˆï¼š\nmatchLabelsï¼švolume å¿…é¡»æœ‰å…·æœ‰è¯¥å€¼çš„æ ‡ç­¾ matchExpressionsï¼šè¿™æ˜¯ä¸€ä¸ªè¦æ±‚åˆ—è¡¨ï¼Œé€šè¿‡æŒ‡å®šå…³é”®å­—ï¼Œå€¼åˆ—è¡¨ä»¥åŠä¸å…³é”®å­—å’Œå€¼ç›¸å…³çš„è¿ç®—ç¬¦ç»„æˆã€‚æœ‰æ•ˆçš„è¿ç®—ç¬¦åŒ…æ‹¬ Inã€NotInã€Exists å’Œ DoesNotExistã€‚ æ‰€æœ‰æ¥è‡ª matchLabels å’Œ matchExpressions çš„è¦æ±‚éƒ½è¢«â€œä¸â€åœ¨ä¸€èµ·â€”â€”å®ƒä»¬å¿…é¡»å…¨éƒ¨æ»¡è¶³æ‰èƒ½åŒ¹é…ã€‚\nç±» linkå£°æ˜å¯ä»¥é€šè¿‡ä½¿ç”¨å±æ€§ storageClassName æŒ‡å®š StorageClass çš„åç§°æ¥è¯·æ±‚ç‰¹å®šçš„ç±»ã€‚åªæœ‰æ‰€è¯·æ±‚çš„ç±»ä¸ PVC å…·æœ‰ç›¸åŒ storageClassName çš„ PV æ‰èƒ½ç»‘å®šåˆ° PVCã€‚\nPVC ä¸ä¸€å®šè¦è¯·æ±‚ç±»ã€‚å…¶ storageClassName è®¾ç½®ä¸º \"\" çš„ PVC å§‹ç»ˆè¢«è§£é‡Šä¸ºæ²¡æœ‰è¯·æ±‚ç±»çš„ PVï¼Œå› æ­¤åªèƒ½ç»‘å®šåˆ°æ²¡æœ‰ç±»çš„ PVï¼ˆæ²¡æœ‰æ³¨è§£æˆ– \"\"ï¼‰ã€‚æ²¡æœ‰ storageClassName çš„ PVC æ ¹æ®æ˜¯å¦æ‰“å¼€DefaultStorageClass å‡†å…¥æ§åˆ¶æ’ä»¶ï¼Œé›†ç¾¤å¯¹å…¶è¿›è¡Œä¸åŒå¤„ç†ã€‚\nå¦‚æœæ‰“å¼€äº†å‡†å…¥æ§åˆ¶æ’ä»¶ï¼Œç®¡ç†å‘˜å¯ä»¥æŒ‡å®šä¸€ä¸ªé»˜è®¤çš„ StorageClassã€‚æ‰€æœ‰æ²¡æœ‰ StorageClassName çš„ PVC å°†è¢«ç»‘å®šåˆ°è¯¥é»˜è®¤çš„ PVã€‚é€šè¿‡åœ¨ StorageClass å¯¹è±¡ä¸­å°†æ³¨è§£ storageclass.kubernetes.io/is-default-class è®¾ç½®ä¸º â€œtrueâ€ æ¥æŒ‡å®šé»˜è®¤çš„ StorageClassã€‚å¦‚æœç®¡ç†å‘˜æ²¡æœ‰æŒ‡å®šç¼ºçœå€¼ï¼Œé‚£ä¹ˆé›†ç¾¤ä¼šå“åº” PVC åˆ›å»ºï¼Œå°±å¥½åƒå…³é—­äº†å‡†å…¥æ§åˆ¶æ’ä»¶ä¸€æ ·ã€‚å¦‚æœæŒ‡å®šäº†å¤šä¸ªé»˜è®¤å€¼ï¼Œåˆ™å‡†å…¥æ§åˆ¶æ’ä»¶å°†ç¦æ­¢æ‰€æœ‰ PVC åˆ›å»ºã€‚ å¦‚æœå‡†å…¥æ§åˆ¶æ’ä»¶è¢«å…³é—­ï¼Œåˆ™æ²¡æœ‰é»˜è®¤ StorageClass çš„æ¦‚å¿µã€‚æ‰€æœ‰æ²¡æœ‰ storageClassName çš„ PVC åªèƒ½ç»‘å®šåˆ°æ²¡æœ‰ç±»çš„ PVã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ²¡æœ‰ storageClassName çš„ PVC çš„å¤„ç†æ–¹å¼ä¸ storageClassName è®¾ç½®ä¸º \"\" çš„ PVC çš„å¤„ç†æ–¹å¼ç›¸åŒã€‚ æ ¹æ®å®‰è£…æ–¹æ³•çš„ä¸åŒï¼Œé»˜è®¤çš„ StorageClass å¯ä»¥åœ¨å®‰è£…è¿‡ç¨‹ä¸­é€šè¿‡æ’ä»¶ç®¡ç†å™¨éƒ¨ç½²åˆ° Kubernetes é›†ç¾¤ã€‚\nå½“ PVC æŒ‡å®šäº† selectorï¼Œé™¤äº†è¯·æ±‚ä¸€ä¸ª StorageClass ä¹‹å¤–ï¼Œè¿™äº›éœ€æ±‚è¢«â€œä¸â€åœ¨ä¸€èµ·ï¼šåªæœ‰è¢«è¯·æ±‚çš„ç±»çš„ PV å…·æœ‰å’Œè¢«è¯·æ±‚çš„æ ‡ç­¾æ‰å¯ä»¥è¢«ç»‘å®šåˆ° PVCã€‚\næ³¨æ„ï¼šç›®å‰ï¼Œå…·æœ‰éç©º selector çš„ PVC ä¸èƒ½ä¸ºå…¶åŠ¨æ€é…ç½® PVã€‚\nè¿‡å»ï¼Œä½¿ç”¨æ³¨è§£ volume.beta.kubernetes.io/storage-class è€Œä¸æ˜¯ storageClassName å±æ€§ã€‚è¿™ä¸ªæ³¨è§£ä»ç„¶æœ‰æ•ˆï¼Œä½†æ˜¯åœ¨æœªæ¥çš„ Kubernetes ç‰ˆæœ¬ä¸­ä¸ä¼šæ”¯æŒã€‚\nå£°æ˜ä½œä¸ºå· linké€šè¿‡å°†å£°æ˜ç”¨ä½œå·æ¥è®¿é—®å­˜å‚¨ã€‚å£°æ˜å¿…é¡»ä¸ä½¿ç”¨å£°æ˜çš„ pod å­˜åœ¨äºç›¸åŒçš„å‘½åç©ºé—´ä¸­ã€‚é›†ç¾¤åœ¨ pod çš„å‘½åç©ºé—´ä¸­æŸ¥æ‰¾å£°æ˜ï¼Œå¹¶ä½¿ç”¨å®ƒæ¥è·å–æ”¯æŒå£°æ˜çš„ PersistentVolumeã€‚è¯¥å·ç„¶åè¢«æŒ‚è½½åˆ°ä¸»æœºçš„ pod ä¸Šã€‚\nkind: Pod apiVersion: v1 metadata: name: mypod spec: containers: - name: myfrontend image: dockerfile/nginx volumeMounts: - mountPath: \"/var/www/html\" name: mypd volumes: - name: mypd persistentVolumeClaim: claimName: myclaim å‘½åç©ºé—´æ³¨æ„ç‚¹ linkPersistentVolumes ç»‘å®šæ˜¯å”¯ä¸€çš„ï¼Œå¹¶ä¸”ç”±äº PersistentVolumeClaims æ˜¯å‘½åç©ºé—´å¯¹è±¡ï¼Œå› æ­¤åªèƒ½åœ¨ä¸€ä¸ªå‘½åç©ºé—´å†…æŒ‚è½½å…·æœ‰â€œå¤šä¸ªâ€æ¨¡å¼ï¼ˆROXã€RWXï¼‰çš„å£°æ˜ã€‚\nåŸå§‹å—å·æ”¯æŒ linkåŸå§‹å—å·çš„é™æ€é…ç½®åœ¨ v1.9 ä¸­ä½œä¸º alpha åŠŸèƒ½å¼•å…¥ã€‚ç”±äºè¿™ä¸ªæ”¹å˜ï¼Œéœ€è¦ä¸€äº›æ–°çš„ API å­—æ®µæ¥ä½¿ç”¨è¯¥åŠŸèƒ½ã€‚ç›®å‰ï¼ŒFibre Channl æ˜¯æ”¯æŒè¯¥åŠŸèƒ½çš„å”¯ä¸€æ’ä»¶ã€‚\nä½¿ç”¨åŸå§‹å—å·ä½œä¸ºæŒä¹…åŒ–å· link apiVersion: v1 kind: PersistentVolume metadata: name: block-pv spec: capacity: storage: 10Gi accessModes: - ReadWriteOnce volumeMode: Block persistentVolumeReclaimPolicy: Retain fc: targetWWNs: [\"50060e801049cfd1\"] lun: 0 readOnly: false æŒä¹…åŒ–å·å£°æ˜è¯·æ±‚åŸå§‹å—å· link apiVersion: v1 kind: PersistentVolumeClaim metadata: name: block-pvc spec: accessModes: - ReadWriteOnce volumeMode: Block resources: requests: storage: 10Gi åœ¨ Pod è§„æ ¼é…ç½®ä¸­ä¸ºå®¹å™¨æ·»åŠ åŸå§‹å—è®¾å¤‡ link apiVersion: v1 kind: Pod metadata: name: pod-with-block-volume spec: containers: - name: fc-container image: fedora:26 command: [\"/bin/sh\", \"-c\"] args: [ \"tail -f /dev/null\" ] volumeDevices: - name: data devicePath: /dev/xvda volumes: - name: data persistentVolumeClaim: claimName: block-pvc æ³¨æ„ï¼šå½“ä¸º Pod å¢åŠ åŸå§‹å—è®¾å¤‡æ—¶ï¼Œæˆ‘ä»¬åœ¨å®¹å™¨ä¸­æŒ‡å®šè®¾å¤‡è·¯å¾„è€Œä¸æ˜¯æŒ‚è½½è·¯å¾„ã€‚\nç»‘å®šå—å· linkå¦‚æœç”¨æˆ·é€šè¿‡ä½¿ç”¨ PersistentVolumeClaim è§„èŒƒä¸­çš„ volumeMode å­—æ®µæŒ‡ç¤ºæ­¤è¯·æ±‚æ¥è¯·æ±‚åŸå§‹å—å·ï¼Œåˆ™ç»‘å®šè§„åˆ™ä¸ä»¥å‰ä¸è®¤ä¸ºè¯¥æ¨¡å¼ä¸ºè§„èŒƒä¸€éƒ¨åˆ†çš„ç‰ˆæœ¬ç•¥æœ‰ä¸åŒã€‚\nä¸‹é¢æ˜¯ç”¨æˆ·å’Œç®¡ç†å‘˜æŒ‡å®šè¯·æ±‚åŸå§‹å—è®¾å¤‡çš„å¯èƒ½ç»„åˆçš„è¡¨æ ¼ã€‚è¯¥è¡¨æŒ‡ç¤ºå·æ˜¯å¦å°†è¢«ç»‘å®šæˆ–æœªç»™å®šç»„åˆã€‚é™æ€è®¾ç½®çš„å·çš„å·ç»‘å®šçŸ©é˜µï¼š\nPV volumeMode PVC volumeMode ç»“æœ unspecified unspecified ç»‘å®š unspecified Block ä¸ç»‘å®š unspecified Filesystem ç»‘å®š Block unspecified ä¸ç»‘å®š Block Block ç»‘å®š Block Filesystem ä¸ç»‘å®š Filesystem Filesystem ç»‘å®š Filesystem Block ä¸ç»‘å®š Filesystem unspecified ç»‘å®š æ³¨æ„ï¼šalpha ç‰ˆæœ¬åªæ”¯æŒé™æ€é…ç½®å·ã€‚ä½¿ç”¨åŸå§‹å—è®¾å¤‡æ—¶ï¼Œç®¡ç†å‘˜åº”è¯¥æ³¨æ„è€ƒè™‘è¿™äº›å€¼ã€‚\nç¼–å†™å¯ç§»æ¤é…ç½® linkå¦‚æœæ‚¨æ­£åœ¨ç¼–å†™åœ¨å¤šç§é›†ç¾¤ä¸Šè¿è¡Œå¹¶éœ€è¦æŒä¹…å­˜å‚¨çš„é…ç½®æ¨¡æ¿æˆ–ç¤ºä¾‹ï¼Œæˆ‘ä»¬å»ºè®®æ‚¨ä½¿ç”¨ä»¥ä¸‹æ¨¡å¼ï¼š\nè¦åœ¨æ‚¨çš„åœ¨é…ç½®ç»„åˆä¸­åŒ…å« PersistentVolumeClaim å¯¹è±¡ï¼ˆä¸ Deploymentã€ConfigMapç­‰ä¸€èµ·ï¼‰ã€‚ ä¸è¦åœ¨é…ç½®ä¸­åŒ…å« PersistentVolume å¯¹è±¡ï¼Œå› ä¸ºç”¨æˆ·å®ä¾‹åŒ–é…ç½®å¯èƒ½æ²¡æœ‰åˆ›å»º PersistentVolume çš„æƒé™ã€‚ ç»™ç”¨æˆ·åœ¨å®ä¾‹åŒ–æ¨¡æ¿æ—¶æä¾›å­˜å‚¨ç±»åç§°çš„é€‰é¡¹ã€‚ å¦‚æœç”¨æˆ·æä¾›å­˜å‚¨ç±»åç§°ï¼Œåˆ™å°†è¯¥å€¼æ”¾å…¥ persistentVolumeClaim.storageClassName å­—æ®µä¸­ã€‚å¦‚æœé›†ç¾¤å…·æœ‰ç”±ç®¡ç†å‘˜å¯ç”¨çš„ StorageClassï¼Œè¿™å°†å¯¼è‡´ PVC åŒ¹é…æ­£ç¡®çš„å­˜å‚¨ç±»åˆ«ã€‚ å¦‚æœç”¨æˆ·æœªæä¾›å­˜å‚¨ç±»åç§°ï¼Œåˆ™å°† persistentVolumeClaim.storageClassName å­—æ®µä¿ç•™ä¸º nilã€‚ è¿™å°†å¯¼è‡´ä½¿ç”¨é›†ç¾¤ä¸­é»˜è®¤çš„ StorageClass ä¸ºç”¨æˆ·è‡ªåŠ¨é…ç½® PVã€‚è®¸å¤šé›†ç¾¤ç¯å¢ƒéƒ½æœ‰é»˜è®¤çš„ StorageClassï¼Œæˆ–è€…ç®¡ç†å‘˜å¯ä»¥åˆ›å»ºè‡ªå·±çš„é»˜è®¤ StorageClassã€‚ åœ¨æ‚¨çš„å·¥å…·ä¸­ï¼Œè¯·æ³¨æ„ä¸€æ®µæ—¶é—´ä¹‹åä»æœªç»‘å®šçš„ PVCï¼Œå¹¶å‘ç”¨æˆ·å±•ç¤ºå®ƒä»¬ï¼Œå› ä¸ºè¿™è¡¨ç¤ºé›†ç¾¤å¯èƒ½æ²¡æœ‰åŠ¨æ€å­˜å‚¨æ”¯æŒï¼ˆåœ¨è¿™ç§æƒ…å†µä¸‹ç”¨æˆ·åº”åˆ›å»ºåŒ¹é…çš„ PVï¼‰ï¼Œæˆ–é›†ç¾¤æ²¡æœ‰å­˜å‚¨ç³»ç»Ÿï¼ˆåœ¨è¿™ç§æƒ…å†µä¸‹ç”¨æˆ·ä¸èƒ½éƒ¨ç½²éœ€è¦ PVC çš„é…ç½®ï¼‰ã€‚ åŸæ–‡åœ°å€ï¼šhttps://kubernetes.io/docs/concepts/storage/persistent-volumes/\nè¯‘è€…ï¼šrootsongjc\n"
            }
        );
    index.add(
            {
                id:  39 ,
                href: "\/docs\/economy\/",
                title: "ç»æµ",
                description: "",
                content: ""
            }
        );
    index.add(
            {
                id:  40 ,
                href: "\/docs\/information\/software\/cloud\/auth\/",
                title: "è®¤è¯",
                description: "",
                content: ""
            }
        );
    index.add(
            {
                id:  41 ,
                href: "\/docs\/information\/aigc\/",
                title: "AIGC",
                description: "",
                content: ""
            }
        );
    index.add(
            {
                id:  42 ,
                href: "\/docs\/information\/software\/cloud\/k8s_rs_manager\/label\/",
                title: "Label",
                description: "Label æ˜¯é™„ç€åˆ° object ä¸Šï¼ˆä¾‹å¦‚ Podï¼‰çš„é”®å€¼å¯¹ã€‚å¯ä»¥åœ¨åˆ›å»º object çš„æ—¶å€™æŒ‡å®šï¼Œä¹Ÿå¯ä»¥åœ¨ object åˆ›å»ºåéšæ—¶æŒ‡å®šã€‚Labels çš„å€¼å¯¹ç³»ç»Ÿæœ¬èº«å¹¶æ²¡æœ‰ä»€ä¹ˆå«ä¹‰ï¼Œåªæ˜¯å¯¹ç”¨æˆ·æ‰æœ‰æ„ä¹‰ã€‚\n\"labels\": { \"key1\" : \"value1\", \"key2\" : \"value2\" } Kubernetes æœ€ç»ˆå°†å¯¹ labels æœ€ç»ˆç´¢å¼•å’Œåå‘ç´¢å¼•ç”¨æ¥ä¼˜åŒ–æŸ¥è¯¢å’Œ watchï¼Œåœ¨ UI å’Œå‘½ä»¤è¡Œä¸­ä¼šå¯¹å®ƒä»¬æ’åºã€‚ä¸è¦åœ¨ label ä¸­ä½¿ç”¨å¤§å‹ã€éæ ‡è¯†çš„ç»“æ„åŒ–æ•°æ®ï¼Œè®°å½•è¿™æ ·çš„æ•°æ®åº”è¯¥ç”¨ annotationã€‚\nåŠ¨æœº linkLabel èƒ½å¤Ÿå°†ç»„ç»‡æ¶æ„æ˜ å°„åˆ°ç³»ç»Ÿæ¶æ„ä¸Šï¼ˆå°±åƒæ˜¯åº·å¨å®šå¾‹ï¼‰ï¼Œè¿™æ ·èƒ½å¤Ÿæ›´ä¾¿äºå¾®æœåŠ¡çš„ç®¡ç†ï¼Œä½ å¯ä»¥ç»™ object æ‰“ä¸Šå¦‚ä¸‹ç±»å‹çš„ labelï¼š\n\"release\" : \"stable\", \"release\" : \"canary\" \"environment\" : \"dev\", \"environment\" : \"qa\", \"environment\" : \"production\" \"tier\" : \"frontend\", \"tier\" : \"backend\", \"tier\" : \"cache\" \"partition\" : \"customerA\", \"partition\" : \"customerB\" \"track\" : \"daily\", \"track\" : \"weekly\" \"team\" : \"teamA\",\"team:\" : \"teamB\" è¯­æ³•å’Œå­—ç¬¦é›† linkLabel key çš„ç»„æˆï¼š\n",
                content: "Label æ˜¯é™„ç€åˆ° object ä¸Šï¼ˆä¾‹å¦‚ Podï¼‰çš„é”®å€¼å¯¹ã€‚å¯ä»¥åœ¨åˆ›å»º object çš„æ—¶å€™æŒ‡å®šï¼Œä¹Ÿå¯ä»¥åœ¨ object åˆ›å»ºåéšæ—¶æŒ‡å®šã€‚Labels çš„å€¼å¯¹ç³»ç»Ÿæœ¬èº«å¹¶æ²¡æœ‰ä»€ä¹ˆå«ä¹‰ï¼Œåªæ˜¯å¯¹ç”¨æˆ·æ‰æœ‰æ„ä¹‰ã€‚\n\"labels\": { \"key1\" : \"value1\", \"key2\" : \"value2\" } Kubernetes æœ€ç»ˆå°†å¯¹ labels æœ€ç»ˆç´¢å¼•å’Œåå‘ç´¢å¼•ç”¨æ¥ä¼˜åŒ–æŸ¥è¯¢å’Œ watchï¼Œåœ¨ UI å’Œå‘½ä»¤è¡Œä¸­ä¼šå¯¹å®ƒä»¬æ’åºã€‚ä¸è¦åœ¨ label ä¸­ä½¿ç”¨å¤§å‹ã€éæ ‡è¯†çš„ç»“æ„åŒ–æ•°æ®ï¼Œè®°å½•è¿™æ ·çš„æ•°æ®åº”è¯¥ç”¨ annotationã€‚\nåŠ¨æœº linkLabel èƒ½å¤Ÿå°†ç»„ç»‡æ¶æ„æ˜ å°„åˆ°ç³»ç»Ÿæ¶æ„ä¸Šï¼ˆå°±åƒæ˜¯åº·å¨å®šå¾‹ï¼‰ï¼Œè¿™æ ·èƒ½å¤Ÿæ›´ä¾¿äºå¾®æœåŠ¡çš„ç®¡ç†ï¼Œä½ å¯ä»¥ç»™ object æ‰“ä¸Šå¦‚ä¸‹ç±»å‹çš„ labelï¼š\n\"release\" : \"stable\", \"release\" : \"canary\" \"environment\" : \"dev\", \"environment\" : \"qa\", \"environment\" : \"production\" \"tier\" : \"frontend\", \"tier\" : \"backend\", \"tier\" : \"cache\" \"partition\" : \"customerA\", \"partition\" : \"customerB\" \"track\" : \"daily\", \"track\" : \"weekly\" \"team\" : \"teamA\",\"team:\" : \"teamB\" è¯­æ³•å’Œå­—ç¬¦é›† linkLabel key çš„ç»„æˆï¼š\nä¸å¾—è¶…è¿‡ 63 ä¸ªå­—ç¬¦ å¯ä»¥ä½¿ç”¨å‰ç¼€ï¼Œä½¿ç”¨ / åˆ†éš”ï¼Œå‰ç¼€å¿…é¡»æ˜¯ DNS å­åŸŸï¼Œä¸å¾—è¶…è¿‡ 253 ä¸ªå­—ç¬¦ï¼Œç³»ç»Ÿä¸­çš„è‡ªåŠ¨åŒ–ç»„ä»¶åˆ›å»ºçš„ label å¿…é¡»æŒ‡å®šå‰ç¼€ï¼Œkubernetes.io/ ç”± kubernetes ä¿ç•™ èµ·å§‹å¿…é¡»æ˜¯å­—æ¯ï¼ˆå¤§å°å†™éƒ½å¯ä»¥ï¼‰æˆ–æ•°å­—ï¼Œä¸­é—´å¯ä»¥æœ‰è¿å­—ç¬¦ã€ä¸‹åˆ’çº¿å’Œç‚¹ Label value çš„ç»„æˆï¼š\nä¸å¾—è¶…è¿‡ 63 ä¸ªå­—ç¬¦ èµ·å§‹å¿…é¡»æ˜¯å­—æ¯ï¼ˆå¤§å°å†™éƒ½å¯ä»¥ï¼‰æˆ–æ•°å­—ï¼Œä¸­é—´å¯ä»¥æœ‰è¿å­—ç¬¦ã€ä¸‹åˆ’çº¿å’Œç‚¹ Label selector linkLabel ä¸æ˜¯å”¯ä¸€çš„ï¼Œå¾ˆå¤š object å¯èƒ½æœ‰ç›¸åŒçš„ labelã€‚\né€šè¿‡ label selectorï¼Œå®¢æˆ·ç«¯ï¼ç”¨æˆ·å¯ä»¥æŒ‡å®šä¸€ä¸ª object é›†åˆï¼Œé€šè¿‡ label selector å¯¹ object çš„é›†åˆè¿›è¡Œæ“ä½œã€‚\nLabel selector æœ‰ä¸¤ç§ç±»å‹ï¼š\nequality-based ï¼šå¯ä»¥ä½¿ç”¨ =ã€==ã€!= æ“ä½œç¬¦ï¼Œå¯ä»¥ä½¿ç”¨é€—å·åˆ†éš”å¤šä¸ªè¡¨è¾¾å¼ set-based ï¼šå¯ä»¥ä½¿ç”¨ inã€notinã€! æ“ä½œç¬¦ï¼Œå¦å¤–è¿˜å¯ä»¥æ²¡æœ‰æ“ä½œç¬¦ï¼Œç›´æ¥å†™å‡ºæŸä¸ª label çš„ keyï¼Œè¡¨ç¤ºè¿‡æ»¤æœ‰æŸä¸ª key çš„ object è€Œä¸ç®¡è¯¥ key çš„ value æ˜¯ä½•å€¼ï¼Œ! è¡¨ç¤ºæ²¡æœ‰è¯¥ label çš„ object ç¤ºä¾‹ link $ kubectl get pods -l environment=production,tier=frontend $ kubectl get pods -l 'environment in (production),tier in (frontend)' $ kubectl get pods -l 'environment in (production, qa)' $ kubectl get pods -l 'environment,environment notin (frontend)' åœ¨ API object ä¸­è®¾ç½® label selector linkåœ¨ serviceã€replicationcontroller ç­‰ object ä¸­æœ‰å¯¹ pod çš„ label selectorï¼Œä½¿ç”¨æ–¹æ³•åªèƒ½ä½¿ç”¨ç­‰äºæ“ä½œï¼Œä¾‹å¦‚ï¼š\nselector: component: redis åœ¨ Jobã€Deploymentã€ReplicaSet å’Œ DaemonSet è¿™äº› object ä¸­ï¼Œæ”¯æŒ set-based çš„è¿‡æ»¤ï¼Œä¾‹å¦‚ï¼š\nselector: matchLabels: component: redis matchExpressions: - {key: tier, operator: In, values: [cache]} - {key: environment, operator: NotIn, values: [dev]} å¦‚ Service é€šè¿‡ label selector å°†åŒä¸€ç±»å‹çš„ pod ä½œä¸ºä¸€ä¸ªæœåŠ¡ expose å‡ºæ¥ã€‚\nå¦å¤–åœ¨ node affinity å’Œ pod affinity ä¸­çš„ label selector çš„è¯­æ³•åˆæœ‰äº›è®¸ä¸åŒï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š\naffinity: nodeAffinity: requiredDuringSchedulingIgnoredDuringExecution: nodeSelectorTerms: - matchExpressions: - key: kubernetes.io/e2e-az-name operator: In values: - e2e-az1 - e2e-az2 preferredDuringSchedulingIgnoredDuringExecution: - weight: 1 preference: matchExpressions: - key: another-node-label-key operator: In values: - another-node-label-value "
            }
        );
    index.add(
            {
                id:  43 ,
                href: "\/docs\/information\/software\/cloud\/storage\/storageclass\/",
                title: "StorageClass",
                description: "æœ¬æ–‡ä»‹ç»äº† Kubernetes ä¸­ StorageClass çš„æ¦‚å¿µã€‚åœ¨é˜…è¯»æœ¬æ–‡ä¹‹å‰å»ºè®®å…ˆç†Ÿæ‚‰ å· å’Œ Persistent Volumeï¼ˆæŒä¹…å·ï¼‰ã€‚\n",
                content: "æœ¬æ–‡ä»‹ç»äº† Kubernetes ä¸­ StorageClass çš„æ¦‚å¿µã€‚åœ¨é˜…è¯»æœ¬æ–‡ä¹‹å‰å»ºè®®å…ˆç†Ÿæ‚‰ å· å’Œ Persistent Volumeï¼ˆæŒä¹…å·ï¼‰ã€‚\nä»‹ç» linkStorageClass ä¸ºç®¡ç†å‘˜æä¾›äº†æè¿°å­˜å‚¨ â€œclassï¼ˆç±»ï¼‰â€ çš„æ–¹æ³•ã€‚ ä¸åŒçš„ class å¯èƒ½ä¼šæ˜ å°„åˆ°ä¸åŒçš„æœåŠ¡è´¨é‡ç­‰çº§æˆ–å¤‡ä»½ç­–ç•¥ï¼Œæˆ–ç”±ç¾¤é›†ç®¡ç†å‘˜ç¡®å®šçš„ä»»æ„ç­–ç•¥ã€‚ Kubernetes æœ¬èº«ä¸æ¸…æ¥šå„ç§ class ä»£è¡¨çš„ä»€ä¹ˆã€‚è¿™ä¸ªæ¦‚å¿µåœ¨å…¶ä»–å­˜å‚¨ç³»ç»Ÿä¸­æœ‰æ—¶è¢«ç§°ä¸ºâ€œé…ç½®æ–‡ä»¶â€ã€‚\nStorageClass èµ„æº linkStorageClass ä¸­åŒ…å« provisionerã€parameters å’Œ reclaimPolicy å­—æ®µï¼Œå½“ class éœ€è¦åŠ¨æ€åˆ†é… PersistentVolume æ—¶ä¼šä½¿ç”¨åˆ°ã€‚\nStorageClass å¯¹è±¡çš„åç§°å¾ˆé‡è¦ï¼Œç”¨æˆ·ä½¿ç”¨è¯¥ç±»æ¥è¯·æ±‚ä¸€ä¸ªç‰¹å®šçš„æ–¹æ³•ã€‚ å½“åˆ›å»º StorageClass å¯¹è±¡æ—¶ï¼Œç®¡ç†å‘˜è®¾ç½®åç§°å’Œå…¶ä»–å‚æ•°ï¼Œä¸€æ—¦åˆ›å»ºäº†å¯¹è±¡å°±ä¸èƒ½å†å¯¹å…¶æ›´æ–°ã€‚\nç®¡ç†å‘˜å¯ä»¥ä¸ºæ²¡æœ‰ç”³è¯·ç»‘å®šåˆ°ç‰¹å®š class çš„ PVC æŒ‡å®šä¸€ä¸ªé»˜è®¤çš„ StorageClass ï¼š æ›´å¤šè¯¦æƒ…è¯·å‚é˜… PersistentVolumeClaim ç« èŠ‚ã€‚\nkind: StorageClass apiVersion: storage.k8s.io/v1 metadata: name: standard provisioner: kubernetes.io/aws-ebs parameters: type: gp2 reclaimPolicy: Retain mountOptions: - debug Provisionerï¼ˆå­˜å‚¨åˆ†é…å™¨ï¼‰ linkStorage class æœ‰ä¸€ä¸ªåˆ†é…å™¨ï¼Œç”¨æ¥å†³å®šä½¿ç”¨å“ªä¸ªå·æ’ä»¶åˆ†é… PVã€‚è¯¥å­—æ®µå¿…é¡»æŒ‡å®šã€‚\nVolume Plugin Internal Provisioner Config Example AWSElasticBlockStore âœ“ AWS AzureFile âœ“ Azure File AzureDisk âœ“ Azure Disk CephFS - - Cinder âœ“ OpenStack Cinder FC - - FlexVolume - - Flocker âœ“ - GCEPersistentDisk âœ“ GCE Glusterfs âœ“ Glusterfs iSCSI - - PhotonPersistentDisk âœ“ - Quobyte âœ“ Quobyte NFS - - RBD âœ“ Ceph RBD VsphereVolume âœ“ vSphere PortworxVolume âœ“ Portworx Volume ScaleIO âœ“ ScaleIO StorageOS âœ“ StorageOS æ‚¨ä¸é™äºæŒ‡å®šæ­¤å¤„åˆ—å‡ºçš„\"å†…ç½®\"åˆ†é…å™¨ï¼ˆå…¶åç§°å‰ç¼€ä¸º kubernetes.io å¹¶æ‰“åŒ…åœ¨ Kubernetes ä¸­ï¼‰ã€‚ æ‚¨è¿˜å¯ä»¥è¿è¡Œå’ŒæŒ‡å®šå¤–éƒ¨åˆ†é…å™¨ï¼Œè¿™äº›ç‹¬ç«‹çš„ç¨‹åºéµå¾ªç”± Kubernetes å®šä¹‰çš„ è§„èŒƒã€‚ å¤–éƒ¨ä¾›åº”å•†çš„ä½œè€…å®Œå…¨å¯ä»¥è‡ªç”±å†³å®šä»–ä»¬çš„ä»£ç ä¿å­˜äºä½•å¤„ã€æ‰“åŒ…æ–¹å¼ã€è¿è¡Œæ–¹å¼ã€ä½¿ç”¨çš„æ’ä»¶ï¼ˆåŒ…æ‹¬Flexï¼‰ç­‰ã€‚ ä»£ç ä»“åº“ kubernetes-incubator/external-storage åŒ…å«ä¸€ä¸ªç”¨äºä¸ºå¤–éƒ¨åˆ†é…å™¨ç¼–å†™åŠŸèƒ½å®ç°çš„ç±»åº“ï¼Œä»¥åŠå„ç§ç¤¾åŒºç»´æŠ¤çš„å¤–éƒ¨åˆ†é…å™¨ã€‚\nä¾‹å¦‚ï¼ŒNFS æ²¡æœ‰å†…éƒ¨åˆ†é…å™¨ï¼Œä½†å¯ä»¥ä½¿ç”¨å¤–éƒ¨åˆ†é…å™¨ã€‚ä¸€äº›å¤–éƒ¨åˆ†é…å™¨åœ¨ä»£ç ä»“åº“ kubernetes-incubator/external-storage ä¸­ã€‚ ä¹Ÿæœ‰ç¬¬ä¸‰æ–¹å­˜å‚¨ä¾›åº”å•†æä¾›è‡ªå·±çš„å¤–éƒ¨åˆ†é…å™¨ã€‚\nå…³äºå†…ç½®çš„ StorageClass çš„é…ç½®è¯·å‚è€ƒ Storage Classesã€‚\nå›æ”¶ç­–ç•¥ linkç”± storage class åŠ¨æ€åˆ›å»ºçš„ Persistent Volume ä¼šåœ¨çš„ reclaimPolicy å­—æ®µä¸­æŒ‡å®šå›æ”¶ç­–ç•¥ï¼Œå¯ä»¥æ˜¯ Delete æˆ–è€… Retainã€‚å¦‚æœ StorageClass å¯¹è±¡è¢«åˆ›å»ºæ—¶æ²¡æœ‰æŒ‡å®š reclaimPolicy ï¼Œå®ƒå°†é»˜è®¤ä¸º Deleteã€‚\né€šè¿‡ storage class æ‰‹åŠ¨åˆ›å»ºå¹¶ç®¡ç†çš„ Persistent Volume ä¼šä½¿ç”¨å®ƒä»¬è¢«åˆ›å»ºæ—¶æŒ‡å®šçš„å›æ”¶æ”¿ç­–ã€‚\næŒ‚è½½é€‰é¡¹ linkç”± storage class åŠ¨æ€åˆ›å»ºçš„ Persistent Volume å°†ä½¿ç”¨ class ä¸­ mountOptions å­—æ®µæŒ‡å®šçš„æŒ‚è½½é€‰é¡¹ã€‚\nå¦‚æœå·æ’ä»¶ä¸æ”¯æŒæŒ‚è½½é€‰é¡¹ï¼Œå´æŒ‡å®šäº†è¯¥é€‰é¡¹ï¼Œåˆ™åˆ†é…æ“ä½œå¤±è´¥ã€‚ å®‰è£…é€‰é¡¹åœ¨ class å’Œ PV ä¸Šéƒ½ä¸ä¼šåšéªŒè¯ï¼Œæ‰€ä»¥å¦‚æœæŒ‚è½½é€‰é¡¹æ— æ•ˆï¼Œé‚£ä¹ˆè¿™ä¸ª PV å°±ä¼šå¤±è´¥ã€‚\nå‚æ•° linkStorage class å…·æœ‰æè¿°å±äº storage class å·çš„å‚æ•°ã€‚å–å†³äºåˆ†é…å™¨ï¼Œå¯ä»¥æ¥å—ä¸åŒçš„å‚æ•°ã€‚ ä¾‹å¦‚ï¼Œå‚æ•° type çš„å€¼ io1 å’Œå‚æ•° iopsPerGB ç‰¹å®šäº EBS PVã€‚å½“å‚æ•°è¢«çœç•¥æ—¶ï¼Œä¼šä½¿ç”¨é»˜è®¤å€¼ã€‚\nå‚è€ƒ link https://kubernetes.io/docs/concepts/storage/storage-classes/ "
            }
        );
    index.add(
            {
                id:  44 ,
                href: "\/docs\/history\/",
                title: "å†å²",
                description: "",
                content: ""
            }
        );
    index.add(
            {
                id:  45 ,
                href: "\/docs\/information\/software\/cloud\/storage\/",
                title: "å­˜å‚¨",
                description: "",
                content: ""
            }
        );
    index.add(
            {
                id:  46 ,
                href: "\/docs\/information\/software\/cloud\/k8s_rs_manager\/annotation\/",
                title: "Annotation",
                description: "Annotationï¼Œé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯æ³¨è§£ã€‚Annotation å¯ä»¥å°† Kubernetes èµ„æºå¯¹è±¡å…³è”åˆ°ä»»æ„çš„éæ ‡è¯†æ€§å…ƒæ•°æ®ã€‚ä½¿ç”¨å®¢æˆ·ç«¯ï¼ˆå¦‚å·¥å…·å’Œåº“ï¼‰å¯ä»¥æ£€ç´¢åˆ°è¿™äº›å…ƒæ•°æ®ã€‚\nå…³è”å…ƒæ•°æ®åˆ°å¯¹è±¡ linkLabel å’Œ Annotation éƒ½å¯ä»¥å°†å…ƒæ•°æ®å…³è”åˆ° Kubernetes èµ„æºå¯¹è±¡ã€‚Label ä¸»è¦ç”¨äºé€‰æ‹©å¯¹è±¡ï¼Œå¯ä»¥æŒ‘é€‰å‡ºæ»¡è¶³ç‰¹å®šæ¡ä»¶çš„å¯¹è±¡ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œannotation ä¸èƒ½ç”¨äºæ ‡è¯†åŠé€‰æ‹©å¯¹è±¡ã€‚annotation ä¸­çš„å…ƒæ•°æ®å¯å¤šå¯å°‘ï¼Œå¯ä»¥æ˜¯ç»“æ„åŒ–çš„æˆ–éç»“æ„åŒ–çš„ï¼Œä¹Ÿå¯ä»¥åŒ…å« label ä¸­ä¸å…è®¸å‡ºç°çš„å­—ç¬¦ã€‚\nAnnotation å’Œ label ä¸€æ ·éƒ½æ˜¯ key/value é”®å€¼å¯¹æ˜ å°„ç»“æ„ï¼š\njson\"annotations\": {\"key1\":\"value1\",\"key2\":\"value2\"}\nä»¥ä¸‹åˆ—å‡ºäº†ä¸€äº›å¯ä»¥è®°å½•åœ¨ annotation ä¸­çš„å¯¹è±¡ä¿¡æ¯ï¼š\nå£°æ˜é…ç½®å±‚ç®¡ç†çš„å­—æ®µã€‚ä½¿ç”¨ annotation å…³è”è¿™ç±»å­—æ®µå¯ä»¥ç”¨äºåŒºåˆ†ä»¥ä¸‹å‡ ç§é…ç½®æ¥æºï¼šå®¢æˆ·ç«¯æˆ–æœåŠ¡å™¨è®¾ç½®çš„é»˜è®¤å€¼ï¼Œè‡ªåŠ¨ç”Ÿæˆçš„å­—æ®µæˆ–è‡ªåŠ¨ç”Ÿæˆçš„ auto-scaling å’Œ auto-sizing ç³»ç»Ÿé…ç½®çš„å­—æ®µã€‚\nåˆ›å»ºä¿¡æ¯ã€ç‰ˆæœ¬ä¿¡æ¯æˆ–é•œåƒä¿¡æ¯ã€‚ä¾‹å¦‚æ—¶é—´æˆ³ã€ç‰ˆæœ¬å·ã€git åˆ†æ”¯ã€PR åºå·ã€é•œåƒå“ˆå¸Œå€¼ä»¥åŠä»“åº“åœ°å€ã€‚\nè®°å½•æ—¥å¿—ã€ç›‘æ§ã€åˆ†ææˆ–å®¡è®¡å­˜å‚¨ä»“åº“çš„æŒ‡é’ˆ\nå¯ä»¥ç”¨äº debug çš„å®¢æˆ·ç«¯ï¼ˆåº“æˆ–å·¥å…·ï¼‰ä¿¡æ¯ï¼Œä¾‹å¦‚åç§°ã€ç‰ˆæœ¬å’Œåˆ›å»ºä¿¡æ¯ã€‚\nç”¨æˆ·ä¿¡æ¯ï¼Œä»¥åŠå·¥å…·æˆ–ç³»ç»Ÿæ¥æºä¿¡æ¯ã€ä¾‹å¦‚æ¥è‡ªé Kubernetes ç”Ÿæ€çš„ç›¸å…³å¯¹è±¡çš„ URL ä¿¡æ¯ã€‚\nè½»é‡çº§éƒ¨ç½²å·¥å…·å…ƒæ•°æ®ï¼Œä¾‹å¦‚é…ç½®æˆ–æ£€æŸ¥ç‚¹ã€‚\nè´Ÿè´£äººçš„ç”µè¯æˆ–è”ç³»æ–¹å¼ï¼Œæˆ–èƒ½æ‰¾åˆ°ç›¸å…³ä¿¡æ¯çš„ç›®å½•æ¡ç›®ä¿¡æ¯ï¼Œä¾‹å¦‚å›¢é˜Ÿç½‘ç«™ã€‚\nå¦‚æœä¸ä½¿ç”¨ annotationï¼Œæ‚¨ä¹Ÿå¯ä»¥å°†ä»¥ä¸Šç±»å‹çš„ä¿¡æ¯å­˜æ”¾åœ¨å¤–éƒ¨æ•°æ®åº“æˆ–ç›®å½•ä¸­ï¼Œä½†è¿™æ ·åšä¸åˆ©äºåˆ›å»ºç”¨äºéƒ¨ç½²ã€ç®¡ç†ã€å†…éƒ¨æ£€æŸ¥çš„å…±äº«å·¥å…·å’Œå®¢æˆ·ç«¯åº“ã€‚\nç¤ºä¾‹ linkå¦‚ Istio çš„ Deployment é…ç½®ä¸­å°±ä½¿ç”¨åˆ°äº† annotationï¼š\napiVersion: extensions/v1beta1 kind: Deployment metadata: name: istio-manager spec: replicas: 1 template: metadata: annotations: alpha.istio.io/sidecar: ignore labels: istio: manager spec: serviceAccountName: istio-manager-service-account containers: - name: discovery image: harbor-001.jimmysong.io/library/manager:0.1.5 imagePullPolicy: Always args: [\"discovery\", \"-v\", \"2\"] ports: - containerPort: 8080 env: - name: POD_NAMESPACE valueFrom: fieldRef: apiVersion: v1 fieldPath: metadata.namespace - name: apiserver image: harbor-001.jimmysong.io/library/manager:0.1.5 imagePullPolicy: Always args: [\"apiserver\", \"-v\", \"2\"] ports: - containerPort: 8081 env: - name: POD_NAMESPACE valueFrom: fieldRef: apiVersion: v1 fieldPath: metadata.namespace alpha.istio.io/sidecar æ³¨è§£å°±æ˜¯ç”¨æ¥æ§åˆ¶æ˜¯å¦è‡ªåŠ¨å‘ pod ä¸­æ³¨å…¥ sidecar çš„ã€‚\n",
                content: "Annotationï¼Œé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯æ³¨è§£ã€‚Annotation å¯ä»¥å°† Kubernetes èµ„æºå¯¹è±¡å…³è”åˆ°ä»»æ„çš„éæ ‡è¯†æ€§å…ƒæ•°æ®ã€‚ä½¿ç”¨å®¢æˆ·ç«¯ï¼ˆå¦‚å·¥å…·å’Œåº“ï¼‰å¯ä»¥æ£€ç´¢åˆ°è¿™äº›å…ƒæ•°æ®ã€‚\nå…³è”å…ƒæ•°æ®åˆ°å¯¹è±¡ linkLabel å’Œ Annotation éƒ½å¯ä»¥å°†å…ƒæ•°æ®å…³è”åˆ° Kubernetes èµ„æºå¯¹è±¡ã€‚Label ä¸»è¦ç”¨äºé€‰æ‹©å¯¹è±¡ï¼Œå¯ä»¥æŒ‘é€‰å‡ºæ»¡è¶³ç‰¹å®šæ¡ä»¶çš„å¯¹è±¡ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œannotation ä¸èƒ½ç”¨äºæ ‡è¯†åŠé€‰æ‹©å¯¹è±¡ã€‚annotation ä¸­çš„å…ƒæ•°æ®å¯å¤šå¯å°‘ï¼Œå¯ä»¥æ˜¯ç»“æ„åŒ–çš„æˆ–éç»“æ„åŒ–çš„ï¼Œä¹Ÿå¯ä»¥åŒ…å« label ä¸­ä¸å…è®¸å‡ºç°çš„å­—ç¬¦ã€‚\nAnnotation å’Œ label ä¸€æ ·éƒ½æ˜¯ key/value é”®å€¼å¯¹æ˜ å°„ç»“æ„ï¼š\njson\"annotations\": {\"key1\":\"value1\",\"key2\":\"value2\"}\nä»¥ä¸‹åˆ—å‡ºäº†ä¸€äº›å¯ä»¥è®°å½•åœ¨ annotation ä¸­çš„å¯¹è±¡ä¿¡æ¯ï¼š\nå£°æ˜é…ç½®å±‚ç®¡ç†çš„å­—æ®µã€‚ä½¿ç”¨ annotation å…³è”è¿™ç±»å­—æ®µå¯ä»¥ç”¨äºåŒºåˆ†ä»¥ä¸‹å‡ ç§é…ç½®æ¥æºï¼šå®¢æˆ·ç«¯æˆ–æœåŠ¡å™¨è®¾ç½®çš„é»˜è®¤å€¼ï¼Œè‡ªåŠ¨ç”Ÿæˆçš„å­—æ®µæˆ–è‡ªåŠ¨ç”Ÿæˆçš„ auto-scaling å’Œ auto-sizing ç³»ç»Ÿé…ç½®çš„å­—æ®µã€‚\nåˆ›å»ºä¿¡æ¯ã€ç‰ˆæœ¬ä¿¡æ¯æˆ–é•œåƒä¿¡æ¯ã€‚ä¾‹å¦‚æ—¶é—´æˆ³ã€ç‰ˆæœ¬å·ã€git åˆ†æ”¯ã€PR åºå·ã€é•œåƒå“ˆå¸Œå€¼ä»¥åŠä»“åº“åœ°å€ã€‚\nè®°å½•æ—¥å¿—ã€ç›‘æ§ã€åˆ†ææˆ–å®¡è®¡å­˜å‚¨ä»“åº“çš„æŒ‡é’ˆ\nå¯ä»¥ç”¨äº debug çš„å®¢æˆ·ç«¯ï¼ˆåº“æˆ–å·¥å…·ï¼‰ä¿¡æ¯ï¼Œä¾‹å¦‚åç§°ã€ç‰ˆæœ¬å’Œåˆ›å»ºä¿¡æ¯ã€‚\nç”¨æˆ·ä¿¡æ¯ï¼Œä»¥åŠå·¥å…·æˆ–ç³»ç»Ÿæ¥æºä¿¡æ¯ã€ä¾‹å¦‚æ¥è‡ªé Kubernetes ç”Ÿæ€çš„ç›¸å…³å¯¹è±¡çš„ URL ä¿¡æ¯ã€‚\nè½»é‡çº§éƒ¨ç½²å·¥å…·å…ƒæ•°æ®ï¼Œä¾‹å¦‚é…ç½®æˆ–æ£€æŸ¥ç‚¹ã€‚\nè´Ÿè´£äººçš„ç”µè¯æˆ–è”ç³»æ–¹å¼ï¼Œæˆ–èƒ½æ‰¾åˆ°ç›¸å…³ä¿¡æ¯çš„ç›®å½•æ¡ç›®ä¿¡æ¯ï¼Œä¾‹å¦‚å›¢é˜Ÿç½‘ç«™ã€‚\nå¦‚æœä¸ä½¿ç”¨ annotationï¼Œæ‚¨ä¹Ÿå¯ä»¥å°†ä»¥ä¸Šç±»å‹çš„ä¿¡æ¯å­˜æ”¾åœ¨å¤–éƒ¨æ•°æ®åº“æˆ–ç›®å½•ä¸­ï¼Œä½†è¿™æ ·åšä¸åˆ©äºåˆ›å»ºç”¨äºéƒ¨ç½²ã€ç®¡ç†ã€å†…éƒ¨æ£€æŸ¥çš„å…±äº«å·¥å…·å’Œå®¢æˆ·ç«¯åº“ã€‚\nç¤ºä¾‹ linkå¦‚ Istio çš„ Deployment é…ç½®ä¸­å°±ä½¿ç”¨åˆ°äº† annotationï¼š\napiVersion: extensions/v1beta1 kind: Deployment metadata: name: istio-manager spec: replicas: 1 template: metadata: annotations: alpha.istio.io/sidecar: ignore labels: istio: manager spec: serviceAccountName: istio-manager-service-account containers: - name: discovery image: harbor-001.jimmysong.io/library/manager:0.1.5 imagePullPolicy: Always args: [\"discovery\", \"-v\", \"2\"] ports: - containerPort: 8080 env: - name: POD_NAMESPACE valueFrom: fieldRef: apiVersion: v1 fieldPath: metadata.namespace - name: apiserver image: harbor-001.jimmysong.io/library/manager:0.1.5 imagePullPolicy: Always args: [\"apiserver\", \"-v\", \"2\"] ports: - containerPort: 8081 env: - name: POD_NAMESPACE valueFrom: fieldRef: apiVersion: v1 fieldPath: metadata.namespace alpha.istio.io/sidecar æ³¨è§£å°±æ˜¯ç”¨æ¥æ§åˆ¶æ˜¯å¦è‡ªåŠ¨å‘ pod ä¸­æ³¨å…¥ sidecar çš„ã€‚\n"
            }
        );
    index.add(
            {
                id:  47 ,
                href: "\/docs\/information\/software\/cloud\/storage\/local-persistent-storage\/",
                title: "æœ¬åœ°æŒä¹…åŒ–å­˜å‚¨",
                description: "æœ¬åœ°æŒä¹…åŒ–å·å…è®¸ç”¨æˆ·é€šè¿‡æ ‡å‡† PVC æ¥å£ä»¥ç®€å•ä¾¿æºçš„æ–¹å¼è®¿é—®æœ¬åœ°å­˜å‚¨ã€‚PV ä¸­åŒ…å«ç³»ç»Ÿç”¨äºå°† Pod å®‰æ’åˆ°æ­£ç¡®èŠ‚ç‚¹çš„èŠ‚ç‚¹äº²å’Œæ€§ä¿¡æ¯ã€‚\nä¸€æ—¦é…ç½®äº†æœ¬åœ°å·ï¼Œå¤–éƒ¨é™æ€é…ç½®å™¨ï¼ˆprovisionerï¼‰å¯ç”¨äºå¸®åŠ©ç®€åŒ–æœ¬åœ°å­˜å‚¨ç®¡ç†ã€‚è¯·æ³¨æ„ï¼Œæœ¬åœ°å­˜å‚¨é…ç½®å™¨ä¸å¤§å¤šæ•°é…ç½®å™¨ä¸åŒï¼Œå¹¶ä¸”å°šä¸æ”¯æŒåŠ¨æ€é…ç½®ã€‚ç›¸åï¼Œå®ƒè¦æ±‚ç®¡ç†å‘˜é¢„å…ˆé…ç½®æ¯ä¸ªèŠ‚ç‚¹ä¸Šçš„æœ¬åœ°å·ï¼Œå¹¶ä¸”è¿™äº›å·åº”è¯¥æ˜¯ï¼š\nFilesystem volumeModeï¼ˆé»˜è®¤ï¼‰PVâ€”â€” å°†å®ƒä»¬æŒ‚è½½åˆ°å‘ç°ç›®å½•ä¸‹ã€‚ Block volumeMode PVâ€”â€”åœ¨å‘ç°ç›®å½•ä¸‹ä¸ºèŠ‚ç‚¹ä¸Šçš„å—è®¾å¤‡åˆ›å»ºä¸€ä¸ªç¬¦å·é“¾æ¥ã€‚ é…ç½®å™¨å°†é€šè¿‡ä¸ºæ¯ä¸ªå·åˆ›å»ºå’Œæ¸…é™¤ PersistentVolumes æ¥ç®¡ç†å‘ç°ç›®å½•ä¸‹çš„å·ã€‚\né…ç½®è¦æ±‚ link æœ¬åœ°å·æ’ä»¶å¸Œæœ›è·¯å¾„ç¨³å®šï¼ŒåŒ…æ‹¬åœ¨é‡æ–°å¯åŠ¨æ—¶å’Œæ·»åŠ æˆ–åˆ é™¤ç£ç›˜æ—¶ã€‚ é™æ€é…ç½®å™¨ä»…å‘ç°æŒ‚è½½ç‚¹ï¼ˆå¯¹äºæ–‡ä»¶ç³»ç»Ÿæ¨¡å¼å·ï¼‰æˆ–ç¬¦å·é“¾æ¥ï¼ˆå¯¹äºå—æ¨¡å¼å·ï¼‰ã€‚å¯¹äºåŸºäºç›®å½•çš„æœ¬åœ°å·å¿…é¡»ç»‘å®šåˆ°å‘ç°ç›®å½•ä¸­ã€‚ ç‰ˆæœ¬å…¼å®¹æ€§ linkæ¨èé…ç½®å™¨ç‰ˆæœ¬ä¸Kubernetesç‰ˆæœ¬\nProvisioner version K8s version Reason 2.1.0 1.10 Beta API default, block 2.0.0 1.8, 1.9 Mount propagation 1.0.1 1.7 K8såŠŸèƒ½çŠ¶æ€ linkå¦è¯·å‚é˜…å·²çŸ¥é—®é¢˜å’Œ CHANGELOGã€‚\n",
                content: "æœ¬åœ°æŒä¹…åŒ–å·å…è®¸ç”¨æˆ·é€šè¿‡æ ‡å‡† PVC æ¥å£ä»¥ç®€å•ä¾¿æºçš„æ–¹å¼è®¿é—®æœ¬åœ°å­˜å‚¨ã€‚PV ä¸­åŒ…å«ç³»ç»Ÿç”¨äºå°† Pod å®‰æ’åˆ°æ­£ç¡®èŠ‚ç‚¹çš„èŠ‚ç‚¹äº²å’Œæ€§ä¿¡æ¯ã€‚\nä¸€æ—¦é…ç½®äº†æœ¬åœ°å·ï¼Œå¤–éƒ¨é™æ€é…ç½®å™¨ï¼ˆprovisionerï¼‰å¯ç”¨äºå¸®åŠ©ç®€åŒ–æœ¬åœ°å­˜å‚¨ç®¡ç†ã€‚è¯·æ³¨æ„ï¼Œæœ¬åœ°å­˜å‚¨é…ç½®å™¨ä¸å¤§å¤šæ•°é…ç½®å™¨ä¸åŒï¼Œå¹¶ä¸”å°šä¸æ”¯æŒåŠ¨æ€é…ç½®ã€‚ç›¸åï¼Œå®ƒè¦æ±‚ç®¡ç†å‘˜é¢„å…ˆé…ç½®æ¯ä¸ªèŠ‚ç‚¹ä¸Šçš„æœ¬åœ°å·ï¼Œå¹¶ä¸”è¿™äº›å·åº”è¯¥æ˜¯ï¼š\nFilesystem volumeModeï¼ˆé»˜è®¤ï¼‰PVâ€”â€” å°†å®ƒä»¬æŒ‚è½½åˆ°å‘ç°ç›®å½•ä¸‹ã€‚ Block volumeMode PVâ€”â€”åœ¨å‘ç°ç›®å½•ä¸‹ä¸ºèŠ‚ç‚¹ä¸Šçš„å—è®¾å¤‡åˆ›å»ºä¸€ä¸ªç¬¦å·é“¾æ¥ã€‚ é…ç½®å™¨å°†é€šè¿‡ä¸ºæ¯ä¸ªå·åˆ›å»ºå’Œæ¸…é™¤ PersistentVolumes æ¥ç®¡ç†å‘ç°ç›®å½•ä¸‹çš„å·ã€‚\né…ç½®è¦æ±‚ link æœ¬åœ°å·æ’ä»¶å¸Œæœ›è·¯å¾„ç¨³å®šï¼ŒåŒ…æ‹¬åœ¨é‡æ–°å¯åŠ¨æ—¶å’Œæ·»åŠ æˆ–åˆ é™¤ç£ç›˜æ—¶ã€‚ é™æ€é…ç½®å™¨ä»…å‘ç°æŒ‚è½½ç‚¹ï¼ˆå¯¹äºæ–‡ä»¶ç³»ç»Ÿæ¨¡å¼å·ï¼‰æˆ–ç¬¦å·é“¾æ¥ï¼ˆå¯¹äºå—æ¨¡å¼å·ï¼‰ã€‚å¯¹äºåŸºäºç›®å½•çš„æœ¬åœ°å·å¿…é¡»ç»‘å®šåˆ°å‘ç°ç›®å½•ä¸­ã€‚ ç‰ˆæœ¬å…¼å®¹æ€§ linkæ¨èé…ç½®å™¨ç‰ˆæœ¬ä¸Kubernetesç‰ˆæœ¬\nProvisioner version K8s version Reason 2.1.0 1.10 Beta API default, block 2.0.0 1.8, 1.9 Mount propagation 1.0.1 1.7 K8såŠŸèƒ½çŠ¶æ€ linkå¦è¯·å‚é˜…å·²çŸ¥é—®é¢˜å’Œ CHANGELOGã€‚\n1.10ï¼šBeta link æ·»åŠ äº†æ–°çš„ PV.NodeAffinity å­—æ®µã€‚ é‡è¦ï¼š Alpha PV NodeAffinity annotation å·²å¼ƒç”¨ã€‚ç”¨æˆ·å¿…é¡»æ‰‹åŠ¨æ›´æ–°å…¶ PV ä»¥ä½¿ç”¨æ–°çš„ NodeAffinityå­—æ®µæˆ–è¿è¡Œä¸€æ¬¡æ€§æ›´æ–°ä½œä¸šã€‚ Alphaï¼šæ·»åŠ äº†å¯¹ raw block çš„æ”¯æŒã€‚ 1.9ï¼šAlpha link æ–°çš„ StorageClass volumeBindingMode å‚æ•°å°†å»¶è¿ŸPVCç»‘å®šï¼Œç›´åˆ° pod è¢«è°ƒåº¦ã€‚ 1.7ï¼šAlpha link æ–°çš„local PersistentVolume æºï¼Œå…è®¸æŒ‡å®šå…·æœ‰ node affinity çš„ç›®å½•æˆ–æŒ‚è½½ç‚¹ã€‚ ä½¿ç”¨ç»‘å®šåˆ°è¯¥ PV çš„ PVC çš„ Pod å°†å§‹ç»ˆè°ƒåº¦åˆ°è¯¥èŠ‚ç‚¹ã€‚ æœªæ¥çš„åŠŸèƒ½ link æœ¬åœ°å—è®¾å¤‡ä½œä¸ºå·æºï¼Œå…·æœ‰åˆ†åŒºå’Œ fs æ ¼å¼åŒ– å…±äº«æœ¬åœ°æŒä¹…åŒ–å­˜å‚¨çš„åŠ¨æ€èµ„æºè°ƒé… å½“åœ° PV å¥åº·ç›‘æµ‹ã€æ±¡ç‚¹å’Œå®¹å¿ å†…è” PVï¼ˆä½¿ç”¨ä¸“ç”¨æœ¬åœ°ç£ç›˜ä½œä¸ºä¸´æ—¶å­˜å‚¨ï¼‰ ç”¨æˆ·æŒ‡å— linkè¿™äº›è¯´æ˜åæ˜ äº†æœ€æ–°ç‰ˆæœ¬çš„ä»£ç åº“ã€‚æœ‰å…³æ—§ç‰ˆæœ¬çš„è¯´æ˜ï¼Œè¯·å‚é˜…ç‰ˆæœ¬å…¼å®¹æ€§ä¸‹çš„ç‰ˆæœ¬é“¾æ¥ã€‚\næ­¥éª¤1ï¼šä½¿ç”¨æœ¬åœ°ç£ç›˜å¯åŠ¨é›†ç¾¤ linkå¯ç”¨alpha feature gate link1.10+ linkå¦‚æœéœ€è¦åŸå§‹çš„æœ¬åœ°å—åŠŸèƒ½ï¼Œ\nexport KUBE_FEATURE_GATES =\"BlockVolume = true\" æ³¨æ„ï¼š1.10 ä¹‹å‰çš„ Kubernetes ç‰ˆæœ¬éœ€è¦å‡ ä¸ªé™„åŠ  feature gateï¼Œå› ä¸ºæŒä¹…çš„æœ¬åœ°å·å’Œå…¶ä»–åŠŸèƒ½å¤„äº alpha ç‰ˆæœ¬ã€‚\né€‰é¡¹1ï¼šè£¸é‡‘å±ç¯å¢ƒ link æ ¹æ®åº”ç”¨ç¨‹åºçš„è¦æ±‚å¯¹æ¯ä¸ªèŠ‚ç‚¹ä¸Šçš„ç£ç›˜è¿›è¡Œåˆ†åŒºå’Œæ ¼å¼åŒ–ã€‚ æ ¹æ® StorageClass å°†æ‰€æœ‰æ–‡ä»¶ç³»ç»ŸæŒ‚è½½åˆ°åŒä¸€ä¸ªç›®å½•ä¸‹ã€‚ç›®å½•åœ¨ configmap ä¸­æŒ‡å®šï¼Œè§ä¸‹æ–‡ã€‚ ä½¿ç”¨ KUBE_FEATURE_GATES é…ç½® Kubernetes API serverã€controller managerã€scheduler å’Œæ‰€æœ‰kubeletï¼Œå¦‚ä¸Šæ‰€è¿°ã€‚ å¦‚æœä¸ä½¿ç”¨é»˜è®¤ Kubernetes è°ƒåº¦ç¨‹åºç­–ç•¥ï¼Œåˆ™å¿…é¡»å¯ç”¨ä»¥ä¸‹è°“è¯ï¼š 1.9ä¹‹å‰ï¼šNoVolumeBindConflict 1.9+ï¼šVolumeBindingChecker é€‰é¡¹2ï¼šæœ¬åœ°æµ‹è¯•é›†ç¾¤ link åˆ›å»º /mnt/disks ç›®å½•å¹¶å°†å¤šä¸ªå·æŒ‚è½½åˆ°å…¶å­ç›®å½•ã€‚ä¸‹é¢çš„ç¤ºä¾‹ä½¿ç”¨ä¸‰ä¸ª ram ç£ç›˜æ¥æ¨¡æ‹ŸçœŸå®çš„æœ¬åœ°å·ï¼š\nmkdir/mnt/disks vol for vol1 vol2 vol3;do mkdir/mnt/disks/$vol mount -t tmpfs $vol/mnt/disks/$vol DONE è¿è¡Œæœ¬åœ°é›†ç¾¤ã€‚\n$ALLOW_PRIVILEGED = true LOG_LEVEL = 5 FEATURE_GATES = $KUBE_FEATURE_GATES hack/local-up-cluster.sh æ­¥éª¤2ï¼šåˆ›å»ºStorageClassï¼ˆ1.9+ï¼‰ linkè¦å»¶è¿Ÿå·ç»‘å®šï¼Œç›´åˆ° pod è¢«è°ƒåº¦ï¼Œå¹¶åœ¨å•ä¸ª pod ä¸­å¤„ç†å¤šä¸ªæœ¬åœ° PVï¼Œå¿…é¡»ä½¿ç”¨è®¾ç½®ä¸º WaitForFirstConsumer çš„ volumeBindingMode åˆ›å»º StorageClassã€‚\n$kubectl create -f provisioner/deployment/kubernetes/example/default_example_storageclass.yaml æ­¥éª¤3ï¼šåˆ›å»ºæœ¬åœ°æŒä¹…å· linké€‰é¡¹1ï¼šä½¿ç”¨æœ¬åœ°å·é™æ€é…ç½®å™¨ link ç”Ÿæˆ Provisioner çš„ ServiceAccountã€Roleã€DaemonSet å’Œ ConfigMap è§„èŒƒï¼Œå¹¶å¯¹å…¶è¿›è¡Œè‡ªå®šä¹‰ã€‚\nè¿™ä¸€æ­¥ä½¿ç”¨ helm æ¨¡æ¿æ¥ç”Ÿæˆè§„æ ¼ã€‚æœ‰å…³å®‰è£…è¯´æ˜ï¼Œè¯·å‚é˜…helm readmeã€‚è¦ä½¿ç”¨é»˜è®¤å€¼ç”Ÿæˆé…ç½®å™¨çš„è§„æ ¼ï¼Œè¯·è¿è¡Œï¼š\nhelm template ./helm/provisioner \u003e ./provisioner/deployment/kubernetes/provisioner_generated.yaml æ‚¨ä¹Ÿå¯ä»¥æä¾›ä¸€ä¸ªè‡ªå®šä¹‰å€¼æ–‡ä»¶ï¼š\nhelm template ./helm/provisioner --values custom-values.yaml \u003e ./provisioner/deployment/kubernetes/provisioner_generated.yaml éƒ¨ç½²é…ç½®ç¨‹åº\nå¦‚æœç”¨æˆ·å¯¹ Provisioner çš„ yaml æ–‡ä»¶çš„å†…å®¹æ„Ÿåˆ°æ»¡æ„ï¼Œå¯ä»¥ç”¨ kubectl åˆ›å»º Provisioner çš„ DaemonSet å’Œ ConfigMapã€‚\n$kubectl create -f ./provisioner/deployment/kubernetes/provisioner_generated.yaml æ£€æŸ¥å‘ç°çš„æœ¬åœ°å·\nä¸€æ—¦å¯åŠ¨ï¼Œå¤–éƒ¨é™æ€é…ç½®å™¨å°†å‘ç°å¹¶åˆ›å»ºæœ¬åœ° PVã€‚\nä¾‹å¦‚ï¼Œå¦‚æœç›®å½• /mnt/disks/ åŒ…å«ä¸€ä¸ªç›®å½• /mnt/disks/vol1ï¼Œåˆ™é™æ€é…ç½®å™¨ä¼šåˆ›å»ºä»¥ä¸‹æœ¬åœ°å· PVï¼š\n$ kubectl get pv NAME CAPACITY ACCESSMODES RECLAIMPOLICY STATUS CLAIM STORAGECLASS REASON AGE local-pv-ce05be60 1024220Ki RWO Delete Available local-storage 26s $ kubectl describe pv local-pv-ce05be60 Name:\tlocal-pv-ce05be60 Labels:\tAnnotations:\tpv.kubernetes.io/provisioned-by=local-volume-provisioner-minikube-18f57fb2-a186-11e7-b543-080027d51893 StorageClass:\tlocal-fast Status:\tAvailable Claim:\tReclaim Policy:\tDelete Access Modes:\tRWO Capacity:\t1024220Ki NodeAffinity: Required Terms: Term 0: kubernetes.io/hostname in [my-node] Message:\tSource: Type:\tLocalVolume (a persistent volume backed by local storage on a node) Path:\t/mnt/disks/vol1 Events:\tä¸Šé¢æè¿°çš„ PV å¯ä»¥é€šè¿‡å¼•ç”¨ local-fast storageClassName å£°æ˜å’Œç»‘å®šåˆ° PVCã€‚\né€‰é¡¹2ï¼šæ‰‹åŠ¨åˆ›å»ºæœ¬åœ°æŒä¹…åŒ–å· linkæœ‰å…³ç¤ºä¾‹ PersistentVolume è§„èŒƒï¼Œè¯·å‚é˜…Kubernetesæ–‡æ¡£ã€‚\næ­¥éª¤4ï¼šåˆ›å»ºæœ¬åœ°æŒä¹…å·å£°æ˜ link kind: PersistentVolumeClaim apiVersion: v1 metadata: name: example-local-claim spec: accessModes: - ReadWriteOnce resources: requests: storage: 5Gi storageClassName: local-storage è¯·æ›¿æ¢ä»¥ä¸‹å…ƒç´ ä»¥åæ˜ æ‚¨çš„é…ç½®ï¼š\nå·æ‰€éœ€çš„å­˜å‚¨å®¹é‡â€œ5Giâ€ â€œlocal-storageâ€ï¼Œä¸æœ¬åœ° PV å…³è”çš„å­˜å‚¨ç±»åç§°åº”è¯¥ç”¨äºæ»¡è¶³æ­¤ PVC å¯¹äºè¯•å›¾å£°æ˜ â€œBlockâ€ PV çš„ â€œBlockâ€ volumeMode PVCï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹ç¤ºä¾‹ï¼š\nkind: PersistentVolumeClaim apiVersion: v1 metadata: name: example-local-claim spec: accessModes: - ReadWriteOnce resources: requests: storage: 5Gi volumeMode: Block storageClassName: local-storage è¯·æ³¨æ„ï¼Œæ­¤å¤„å”¯ä¸€éœ€è¦æ³¨æ„çš„å­—æ®µæ˜¯ volumeModeï¼Œå®ƒå·²è¢«è®¾ç½®ä¸ºâ€œBlockâ€ã€‚\næœ€ä½³å®è·µ link å¯¹äºIOéš”ç¦»ï¼Œå»ºè®®æ¯ä¸ªå·ä½¿ç”¨æ•´ä¸ªç£ç›˜ å¯¹äºå®¹é‡éš”ç¦»ï¼Œå»ºè®®ä½¿ç”¨å•ä¸ªåˆ†åŒº é¿å…é‡æ–°åˆ›å»ºå…·æœ‰ç›¸åŒèŠ‚ç‚¹åç§°çš„èŠ‚ç‚¹ï¼Œè€Œä»ç„¶å­˜åœ¨æŒ‡å®šäº†è¯¥èŠ‚ç‚¹äº²å’Œæ€§çš„æ—§ PVã€‚å¦åˆ™ï¼Œç³»ç»Ÿå¯èƒ½è®¤ä¸ºæ–°èŠ‚ç‚¹åŒ…å«æ—§çš„ PVã€‚ å¯¹äºå¸¦æœ‰æ–‡ä»¶ç³»ç»Ÿçš„å·ï¼Œå»ºè®®åœ¨ fstab æ¡ç›®å’Œè¯¥æŒ‚è½½ç‚¹çš„ç›®å½•åç§°ä¸­ä½¿ç”¨å®ƒä»¬çš„ UUIDï¼ˆä¾‹å¦‚ ls -l/dev/disk/by-uuid çš„è¾“å‡ºï¼‰ã€‚è¿™ç§åšæ³•å¯ç¡®ä¿å³ä½¿è®¾å¤‡è·¯å¾„å‘ç”Ÿå˜åŒ–ï¼ˆä¾‹å¦‚ï¼Œå¦‚æœ /dev/sda1 åœ¨æ·»åŠ æ–°ç£ç›˜æ—¶å˜ä¸º /dev/sdb1ï¼‰ï¼Œä¹Ÿä¸ä¼šé”™è¯¯åœ°æŒ‚åœ¨æœ¬åœ°å·ã€‚æ­¤å¤–ï¼Œè¿™ç§åšæ³•å°†ç¡®ä¿å¦‚æœåˆ›å»ºå…·æœ‰ç›¸åŒåç§°çš„å¦ä¸€ä¸ªèŠ‚ç‚¹ï¼Œåˆ™è¯¥èŠ‚ç‚¹ä¸Šçš„ä»»ä½•å·éƒ½æ˜¯å”¯ä¸€çš„ï¼Œè€Œä¸ä¼šè¯¯è®¤ä¸ºæ˜¯å…·æœ‰ç›¸åŒåç§°çš„å¦ä¸€ä¸ªèŠ‚ç‚¹ä¸Šçš„å·ã€‚ å¯¹äºæ²¡æœ‰æ–‡ä»¶ç³»ç»Ÿçš„ raw block å·ï¼Œä½¿ç”¨å”¯ä¸€çš„ ID ä½œä¸ºç¬¦å·é“¾æ¥åç§°ã€‚æ ¹æ®æ‚¨çš„ç¯å¢ƒï¼Œ/dev/disk/by-id/ ä¸­çš„å· ID å¯èƒ½åŒ…å«å”¯ä¸€çš„ç¡¬ä»¶åºåˆ—å·ã€‚å¦åˆ™ï¼Œåº”è¯¥ç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„ IDã€‚ç¬¦å·é“¾æ¥åç§°çš„å”¯ä¸€æ€§å°†ç¡®ä¿å¦‚æœåˆ›å»ºå…·æœ‰ç›¸åŒåç§°çš„å¦ä¸€ä¸ªèŠ‚ç‚¹ï¼Œåˆ™è¯¥èŠ‚ç‚¹ä¸Šçš„ä»»ä½•å·éƒ½æ˜¯å”¯ä¸€çš„ï¼Œè€Œä¸ä¼šè¯¯è®¤ä¸ºæ˜¯å…·æœ‰ç›¸åŒåç§°çš„å¦ä¸€ä¸ªèŠ‚ç‚¹ä¸Šçš„å·ã€‚ åˆ é™¤/æ¸…ç†åº•å±‚å· linkå½“æ‚¨æƒ³è¦åœç”¨æœ¬åœ°å·æ—¶ï¼Œä»¥ä¸‹æ˜¯å¯èƒ½çš„å·¥ä½œæµç¨‹ã€‚\nåœæ­¢ä½¿ç”¨å·çš„ pod ä»èŠ‚ç‚¹ä¸­åˆ é™¤æœ¬åœ°å·ï¼ˆå³å¸è½½ã€æ‹”å‡ºç£ç›˜ç­‰ï¼‰ åˆ é™¤ PVC ä¾›åº”å•†å°†å°è¯•æ¸…ç†å·ï¼Œä½†ç”±äºå·ä¸å†å­˜åœ¨è€Œä¼šå¤±è´¥ æ‰‹åŠ¨åˆ é™¤ PV å¯¹è±¡ å‚è€ƒ link Local Persistent Storage User Guide "
            }
        );
    index.add(
            {
                id:  48 ,
                href: "\/docs\/information\/mix\/",
                title: "æ‚",
                description: "",
                content: ""
            }
        );
    index.add(
            {
                id:  49 ,
                href: "\/docs\/information\/software\/cloud\/resource_oversold\/",
                title: "èµ„æºè¶…å–",
                description: "èƒŒæ™¯ linkWhat linkèµ„æºè¶…å–ï¼ˆOversubscriptionï¼‰ æ˜¯æŒ‡åœ¨è®¡ç®—èµ„æºï¼ˆå¦‚CPUã€å†…å­˜ï¼‰çš„åˆ†é…è¿‡ç¨‹ä¸­ï¼Œç³»ç»Ÿæ‰¿è¯ºç»™ç”¨æˆ·æˆ–å·¥ä½œè´Ÿè½½çš„èµ„æºæ€»é‡ è¶…è¿‡å®é™…å¯ç”¨çš„ç‰©ç†èµ„æºã€‚è¿™ä¸€æ¦‚å¿µç±»ä¼¼äºèˆªç©ºå…¬å¸çš„æœºç¥¨è¶…å”®ï¼šé£æœºåº§ä½æ˜¯æœ‰é™çš„ï¼Œä½†é€šè¿‡ç»Ÿè®¡åˆ†æå’Œå†å²æ•°æ®é¢„æµ‹ï¼Œèˆªç©ºå…¬å¸å¯ä»¥å–å‡ºç•¥å¤šäºå®é™…å®¹é‡çš„æœºç¥¨ï¼Œå› ä¸ºé€šå¸¸ä¼šæœ‰éƒ¨åˆ†ä¹˜å®¢æ”¹ç­¾æˆ–å–æ¶ˆè¡Œç¨‹ã€‚\nåœ¨Kubernetesï¼ˆk8sï¼‰ä¸­ï¼Œè¶…å–é€šå¸¸è¡¨ç°ä¸ºï¼š\nèµ„æºè¯·æ±‚ï¼ˆRequestsï¼‰æ€»å’Œ \u003c èŠ‚ç‚¹å®é™…èµ„æº\nä¾‹å¦‚ï¼šä¸€ä¸ªèŠ‚ç‚¹æœ‰16æ ¸CPUï¼Œä½†æ‰€æœ‰Podçš„CPUè¯·æ±‚æ€»å’Œä¸º20æ ¸ã€‚ èµ„æºé™åˆ¶ï¼ˆLimitsï¼‰æ€»å’Œ Â» èŠ‚ç‚¹å®é™…èµ„æº\nä¾‹å¦‚ï¼šèŠ‚ç‚¹å†…å­˜ä¸º64GBï¼Œä½†æ‰€æœ‰Podçš„å†…å­˜é™åˆ¶æ€»å’Œè¾¾åˆ°80GBã€‚ ä¸ºä»€ä¹ˆèƒ½å®ç°è¶…å–ï¼Ÿ\nèµ„æºä½¿ç”¨å…·æœ‰æ³¢åŠ¨æ€§ å¤§å¤šæ•°åº”ç”¨ä¸ä¼šå§‹ç»ˆæ»¡è´Ÿè·è¿è¡Œï¼ˆå¦‚WebæœåŠ¡åœ¨å¤œé—´æµé‡ä½è°·æ—¶CPUåˆ©ç”¨ç‡å¯èƒ½ä½äº10%ï¼‰ã€‚ æ—¶é—´ç‰‡å¤ç”¨ï¼ˆCPUï¼‰ CPUæ˜¯æ—¶åˆ†å¤ç”¨èµ„æºï¼Œè¶…å–çš„Podé€šè¿‡åˆ†æ—¶å…±äº«ç‰©ç†æ ¸å¿ƒã€‚ å†…å­˜è¶…å–çš„æŠ•æœºæ€§ ä¾èµ–â€œå¹¶éæ‰€æœ‰Podä¼šåŒæ—¶æ»¡è´Ÿè·ä½¿ç”¨å†…å­˜â€çš„å‡è®¾ï¼Œä½†é£é™©è¾ƒé«˜ï¼ˆå¯èƒ½è§¦å‘OOM Killï¼‰ã€‚ è¶…å– vs èµ„æºè¿‡åº¦åˆ†é…ï¼ˆOvercommitmentï¼‰\nè¶…å– æ˜¯ä¸»åŠ¨è¡Œä¸ºï¼Œç›®çš„æ˜¯æé«˜èµ„æºåˆ©ç”¨ç‡ï¼Œé€šå¸¸ä¼´éšç›‘æ§å’Œå…œåº•æœºåˆ¶ã€‚ è¿‡åº¦åˆ†é… å¯èƒ½æ˜¯æ— æ„è¯†çš„é…ç½®é”™è¯¯ï¼Œå®¹æ˜“å¯¼è‡´ç³»ç»Ÿä¸ç¨³å®šã€‚ # ä¸€ä¸ªè¶…å–CPUçš„Podé…ç½®ç¤ºä¾‹ï¼š resources: requests: cpu: \"0.5\" # è°ƒåº¦å™¨æŒ‰æ­¤å€¼åˆ†é… limits: cpu: \"2\" # å®é™…å¯çªå‘ä½¿ç”¨2æ ¸ï¼ˆå¦‚æœèŠ‚ç‚¹æœ‰ç©ºé—²ï¼‰ Why link1. æå‡é›†ç¾¤èµ„æºåˆ©ç”¨ç‡\nç°å®é—®é¢˜ï¼šå¤§å¤šæ•°Kubernetesé›†ç¾¤çš„å¹³å‡èµ„æºåˆ©ç”¨ç‡ä¸è¶³50%ï¼ˆå°¤å…¶æ˜¯CPUï¼‰ï¼Œå¤§é‡èµ„æºå› â€œé¢„ç•™â€è€Œé—²ç½®ã€‚ è¶…å–çš„ä½œç”¨ï¼š å…è®¸æ›´å¤šPodè¿è¡Œåœ¨ç›¸åŒèŠ‚ç‚¹ä¸Šï¼Œå……åˆ†åˆ©ç”¨èµ„æºç©ºé—²æ—¶æ®µã€‚ ä¾‹å¦‚ï¼šä¸€ä¸ª16æ ¸çš„èŠ‚ç‚¹ï¼Œè‹¥æ‰€æœ‰Podçš„requestsæ€»å’Œä¸º10æ ¸ï¼Œè¶…å–åå®é™…è¿è¡Œ20æ ¸çš„è´Ÿè½½ï¼ˆåˆ©ç”¨æ—¶é—´ç‰‡å¤ç”¨ï¼‰ã€‚ 2. é™ä½æˆæœ¬\näº‘ç¯å¢ƒæˆæœ¬ä¼˜åŒ–ï¼šå‡å°‘ä¸ºâ€œå³°å€¼è´Ÿè½½â€é¢„ç•™çš„èŠ‚ç‚¹æ•°é‡ï¼Œç›´æ¥é™ä½äº‘å‚å•†è®¡è´¹ï¼ˆå¦‚AWS EC2å®ä¾‹è´¹ç”¨ï¼‰ã€‚ è£¸é‡‘å±æœåŠ¡å™¨åœºæ™¯ï¼šé€šè¿‡è¶…å–æ¨è¿Ÿç¡¬ä»¶æ‰©å®¹ï¼Œé™ä½CAPEXï¼ˆèµ„æœ¬æ”¯å‡ºï¼‰ã€‚ 3. æ”¯æŒå¼¹æ€§ä¸šåŠ¡éœ€æ±‚\nçªå‘æµé‡å¤„ç†ï¼šäº’è”ç½‘æœåŠ¡çš„æµé‡å…·æœ‰æ½®æ±ç‰¹å¾ï¼ˆå¦‚ç”µå•†å¤§ä¿ƒï¼‰ï¼Œè¶…å–å…è®¸Podä¸´æ—¶çªç ´requestsé™åˆ¶ï¼Œå¿«é€Ÿå“åº”è¯·æ±‚ã€‚ æ‰¹å¤„ç†ä»»åŠ¡ï¼šAIè®­ç»ƒã€æ—¥å¿—åˆ†æç­‰çŸ­æ—¶é«˜è´Ÿè½½ä»»åŠ¡ï¼Œå¯é€šè¿‡è¶…å–â€œè§ç¼æ’é’ˆâ€å¼è°ƒåº¦ï¼Œé¿å…æ’é˜Ÿç­‰å¾…ã€‚ 4. å¼€å‘/æµ‹è¯•ç¯å¢ƒæ•ˆç‡\nä½ä¼˜å…ˆçº§è´Ÿè½½å®¹å¿è¶…å–ï¼šå¼€å‘ç¯å¢ƒçš„Podé€šå¸¸ä¸éœ€è¦ä¸¥æ ¼SLAï¼Œè¶…å–å¯è®©å•èŠ‚ç‚¹è¿è¡Œæ›´å¤šæµ‹è¯•å®¹å™¨ï¼ŒåŠ é€ŸCI/CDæµç¨‹ã€‚ èƒŒåçš„ç»æµå­¦åŸç†\nè¶…å–æœ¬è´¨æ˜¯é€šè¿‡é£é™©äº¤æ¢æ•ˆç‡ï¼Œå…¶å¯è¡Œæ€§ä¾èµ–ä¸¤ä¸ªç»Ÿè®¡è§„å¾‹ï¼š\nè´Ÿè½½ä¸é‡åˆæ€§ï¼šä¸åŒä¸šåŠ¡çš„å³°å€¼æ—¶é—´é”™å¼€ï¼ˆå¦‚ç™½å¤©åœ¨çº¿æœåŠ¡ã€å¤œé—´æ‰¹å¤„ç†ä»»åŠ¡ï¼‰ã€‚ å±€éƒ¨æ€§åŸç†ï¼šå¤šæ•°åº”ç”¨çš„å®é™…èµ„æºä½¿ç”¨é‡é•¿æœŸä½äºå…¶requestsï¼ˆå¦‚æŸæœåŠ¡å£°æ˜éœ€è¦4æ ¸ï¼Œä½†å®é™…å¹³å‡ä½¿ç”¨1æ ¸ï¼‰ã€‚ å…¸å‹æ¡ˆä¾‹\n",
                content: "èƒŒæ™¯ linkWhat linkèµ„æºè¶…å–ï¼ˆOversubscriptionï¼‰ æ˜¯æŒ‡åœ¨è®¡ç®—èµ„æºï¼ˆå¦‚CPUã€å†…å­˜ï¼‰çš„åˆ†é…è¿‡ç¨‹ä¸­ï¼Œç³»ç»Ÿæ‰¿è¯ºç»™ç”¨æˆ·æˆ–å·¥ä½œè´Ÿè½½çš„èµ„æºæ€»é‡ è¶…è¿‡å®é™…å¯ç”¨çš„ç‰©ç†èµ„æºã€‚è¿™ä¸€æ¦‚å¿µç±»ä¼¼äºèˆªç©ºå…¬å¸çš„æœºç¥¨è¶…å”®ï¼šé£æœºåº§ä½æ˜¯æœ‰é™çš„ï¼Œä½†é€šè¿‡ç»Ÿè®¡åˆ†æå’Œå†å²æ•°æ®é¢„æµ‹ï¼Œèˆªç©ºå…¬å¸å¯ä»¥å–å‡ºç•¥å¤šäºå®é™…å®¹é‡çš„æœºç¥¨ï¼Œå› ä¸ºé€šå¸¸ä¼šæœ‰éƒ¨åˆ†ä¹˜å®¢æ”¹ç­¾æˆ–å–æ¶ˆè¡Œç¨‹ã€‚\nåœ¨Kubernetesï¼ˆk8sï¼‰ä¸­ï¼Œè¶…å–é€šå¸¸è¡¨ç°ä¸ºï¼š\nèµ„æºè¯·æ±‚ï¼ˆRequestsï¼‰æ€»å’Œ \u003c èŠ‚ç‚¹å®é™…èµ„æº\nä¾‹å¦‚ï¼šä¸€ä¸ªèŠ‚ç‚¹æœ‰16æ ¸CPUï¼Œä½†æ‰€æœ‰Podçš„CPUè¯·æ±‚æ€»å’Œä¸º20æ ¸ã€‚ èµ„æºé™åˆ¶ï¼ˆLimitsï¼‰æ€»å’Œ Â» èŠ‚ç‚¹å®é™…èµ„æº\nä¾‹å¦‚ï¼šèŠ‚ç‚¹å†…å­˜ä¸º64GBï¼Œä½†æ‰€æœ‰Podçš„å†…å­˜é™åˆ¶æ€»å’Œè¾¾åˆ°80GBã€‚ ä¸ºä»€ä¹ˆèƒ½å®ç°è¶…å–ï¼Ÿ\nèµ„æºä½¿ç”¨å…·æœ‰æ³¢åŠ¨æ€§ å¤§å¤šæ•°åº”ç”¨ä¸ä¼šå§‹ç»ˆæ»¡è´Ÿè·è¿è¡Œï¼ˆå¦‚WebæœåŠ¡åœ¨å¤œé—´æµé‡ä½è°·æ—¶CPUåˆ©ç”¨ç‡å¯èƒ½ä½äº10%ï¼‰ã€‚ æ—¶é—´ç‰‡å¤ç”¨ï¼ˆCPUï¼‰ CPUæ˜¯æ—¶åˆ†å¤ç”¨èµ„æºï¼Œè¶…å–çš„Podé€šè¿‡åˆ†æ—¶å…±äº«ç‰©ç†æ ¸å¿ƒã€‚ å†…å­˜è¶…å–çš„æŠ•æœºæ€§ ä¾èµ–â€œå¹¶éæ‰€æœ‰Podä¼šåŒæ—¶æ»¡è´Ÿè·ä½¿ç”¨å†…å­˜â€çš„å‡è®¾ï¼Œä½†é£é™©è¾ƒé«˜ï¼ˆå¯èƒ½è§¦å‘OOM Killï¼‰ã€‚ è¶…å– vs èµ„æºè¿‡åº¦åˆ†é…ï¼ˆOvercommitmentï¼‰\nè¶…å– æ˜¯ä¸»åŠ¨è¡Œä¸ºï¼Œç›®çš„æ˜¯æé«˜èµ„æºåˆ©ç”¨ç‡ï¼Œé€šå¸¸ä¼´éšç›‘æ§å’Œå…œåº•æœºåˆ¶ã€‚ è¿‡åº¦åˆ†é… å¯èƒ½æ˜¯æ— æ„è¯†çš„é…ç½®é”™è¯¯ï¼Œå®¹æ˜“å¯¼è‡´ç³»ç»Ÿä¸ç¨³å®šã€‚ # ä¸€ä¸ªè¶…å–CPUçš„Podé…ç½®ç¤ºä¾‹ï¼š resources: requests: cpu: \"0.5\" # è°ƒåº¦å™¨æŒ‰æ­¤å€¼åˆ†é… limits: cpu: \"2\" # å®é™…å¯çªå‘ä½¿ç”¨2æ ¸ï¼ˆå¦‚æœèŠ‚ç‚¹æœ‰ç©ºé—²ï¼‰ Why link1. æå‡é›†ç¾¤èµ„æºåˆ©ç”¨ç‡\nç°å®é—®é¢˜ï¼šå¤§å¤šæ•°Kubernetesé›†ç¾¤çš„å¹³å‡èµ„æºåˆ©ç”¨ç‡ä¸è¶³50%ï¼ˆå°¤å…¶æ˜¯CPUï¼‰ï¼Œå¤§é‡èµ„æºå› â€œé¢„ç•™â€è€Œé—²ç½®ã€‚ è¶…å–çš„ä½œç”¨ï¼š å…è®¸æ›´å¤šPodè¿è¡Œåœ¨ç›¸åŒèŠ‚ç‚¹ä¸Šï¼Œå……åˆ†åˆ©ç”¨èµ„æºç©ºé—²æ—¶æ®µã€‚ ä¾‹å¦‚ï¼šä¸€ä¸ª16æ ¸çš„èŠ‚ç‚¹ï¼Œè‹¥æ‰€æœ‰Podçš„requestsæ€»å’Œä¸º10æ ¸ï¼Œè¶…å–åå®é™…è¿è¡Œ20æ ¸çš„è´Ÿè½½ï¼ˆåˆ©ç”¨æ—¶é—´ç‰‡å¤ç”¨ï¼‰ã€‚ 2. é™ä½æˆæœ¬\näº‘ç¯å¢ƒæˆæœ¬ä¼˜åŒ–ï¼šå‡å°‘ä¸ºâ€œå³°å€¼è´Ÿè½½â€é¢„ç•™çš„èŠ‚ç‚¹æ•°é‡ï¼Œç›´æ¥é™ä½äº‘å‚å•†è®¡è´¹ï¼ˆå¦‚AWS EC2å®ä¾‹è´¹ç”¨ï¼‰ã€‚ è£¸é‡‘å±æœåŠ¡å™¨åœºæ™¯ï¼šé€šè¿‡è¶…å–æ¨è¿Ÿç¡¬ä»¶æ‰©å®¹ï¼Œé™ä½CAPEXï¼ˆèµ„æœ¬æ”¯å‡ºï¼‰ã€‚ 3. æ”¯æŒå¼¹æ€§ä¸šåŠ¡éœ€æ±‚\nçªå‘æµé‡å¤„ç†ï¼šäº’è”ç½‘æœåŠ¡çš„æµé‡å…·æœ‰æ½®æ±ç‰¹å¾ï¼ˆå¦‚ç”µå•†å¤§ä¿ƒï¼‰ï¼Œè¶…å–å…è®¸Podä¸´æ—¶çªç ´requestsé™åˆ¶ï¼Œå¿«é€Ÿå“åº”è¯·æ±‚ã€‚ æ‰¹å¤„ç†ä»»åŠ¡ï¼šAIè®­ç»ƒã€æ—¥å¿—åˆ†æç­‰çŸ­æ—¶é«˜è´Ÿè½½ä»»åŠ¡ï¼Œå¯é€šè¿‡è¶…å–â€œè§ç¼æ’é’ˆâ€å¼è°ƒåº¦ï¼Œé¿å…æ’é˜Ÿç­‰å¾…ã€‚ 4. å¼€å‘/æµ‹è¯•ç¯å¢ƒæ•ˆç‡\nä½ä¼˜å…ˆçº§è´Ÿè½½å®¹å¿è¶…å–ï¼šå¼€å‘ç¯å¢ƒçš„Podé€šå¸¸ä¸éœ€è¦ä¸¥æ ¼SLAï¼Œè¶…å–å¯è®©å•èŠ‚ç‚¹è¿è¡Œæ›´å¤šæµ‹è¯•å®¹å™¨ï¼ŒåŠ é€ŸCI/CDæµç¨‹ã€‚ èƒŒåçš„ç»æµå­¦åŸç†\nè¶…å–æœ¬è´¨æ˜¯é€šè¿‡é£é™©äº¤æ¢æ•ˆç‡ï¼Œå…¶å¯è¡Œæ€§ä¾èµ–ä¸¤ä¸ªç»Ÿè®¡è§„å¾‹ï¼š\nè´Ÿè½½ä¸é‡åˆæ€§ï¼šä¸åŒä¸šåŠ¡çš„å³°å€¼æ—¶é—´é”™å¼€ï¼ˆå¦‚ç™½å¤©åœ¨çº¿æœåŠ¡ã€å¤œé—´æ‰¹å¤„ç†ä»»åŠ¡ï¼‰ã€‚ å±€éƒ¨æ€§åŸç†ï¼šå¤šæ•°åº”ç”¨çš„å®é™…èµ„æºä½¿ç”¨é‡é•¿æœŸä½äºå…¶requestsï¼ˆå¦‚æŸæœåŠ¡å£°æ˜éœ€è¦4æ ¸ï¼Œä½†å®é™…å¹³å‡ä½¿ç”¨1æ ¸ï¼‰ã€‚ å…¸å‹æ¡ˆä¾‹\næŸè§†é¢‘ç½‘ç«™ï¼šé€šè¿‡CPUè¶…å–å°†ç›´æ’­è½¬ç ä»»åŠ¡çš„é›†ç¾¤æˆæœ¬é™ä½40%ï¼Œä»…åœ¨å¤§è§„æ¨¡ç›´æ’­äº‹ä»¶æ—¶çŸ­æš‚å¯ç”¨å¤‡ç”¨èŠ‚ç‚¹ã€‚ æœºå™¨å­¦ä¹ å¹³å°ï¼šè¶…å–GPUèŠ‚ç‚¹çš„æ˜¾å­˜ï¼Œå…è®¸å¤šä¸ªæ¨ç†ä»»åŠ¡å…±äº«åŒä¸€å¼ GPUå¡ï¼ˆéœ€æ˜¾å­˜éš”ç¦»å·¥å…·é…åˆï¼‰ã€‚ é£é™©ä¸æŒ‘æˆ˜ linkKubernetesèµ„æºè¶…å–è™½ç„¶èƒ½æé«˜èµ„æºåˆ©ç”¨ç‡ï¼Œä½†åŒæ—¶ä¹Ÿå¼•å…¥äº†æ½œåœ¨é£é™©ã€‚å¦‚æœä¸åŠ ä»¥æ§åˆ¶ï¼Œå¯èƒ½å¯¼è‡´é›†ç¾¤ä¸ç¨³å®šã€åº”ç”¨æ€§èƒ½ä¸‹é™ï¼Œç”šè‡³æœåŠ¡ä¸­æ–­ã€‚ä»¥ä¸‹æ˜¯è¶…å–çš„ä¸»è¦é£é™©å’Œåº”å¯¹æ€è·¯ï¼š\n1. èµ„æºç«äº‰å¯¼è‡´çš„æ€§èƒ½ä¸‹é™\nï¼ˆ1ï¼‰CPU Throttlingï¼ˆCPUé™æµï¼‰\né—®é¢˜ï¼šå½“å¤šä¸ªPodç«äº‰CPUæ—¶ï¼ŒKubernetesä¼šå¯¹è¶…å‡ºrequestsçš„Podè¿›è¡ŒCPUé™æµï¼Œå¯¼è‡´åº”ç”¨å“åº”å˜æ…¢ã€‚ è¡¨ç°ï¼šPodçš„cpu_throttlingæŒ‡æ ‡å‡é«˜ï¼Œè¯·æ±‚å»¶è¿Ÿå¢åŠ ã€‚ è§£å†³æ–¹æ¡ˆï¼š ä½¿ç”¨Horizontal Pod Autoscaler (HPA)åŠ¨æ€è°ƒæ•´å‰¯æœ¬æ•°ï¼Œå‡å°‘å•Podè´Ÿè½½ã€‚ ç›‘æ§CPU ThrottlingæŒ‡æ ‡ï¼Œä¼˜åŒ–requestså’Œlimitsçš„æ¯”å€¼ï¼ˆå¦‚requests: 1, limits: 2ï¼‰ã€‚ ï¼ˆ2ï¼‰å†…å­˜äº‰æŠ¢ï¼ˆOOM Killï¼‰\né—®é¢˜ï¼šå†…å­˜è¶…å–åï¼Œå¦‚æœå¤šä¸ªPodåŒæ—¶å ç”¨é«˜å†…å­˜ï¼ŒKubernetesçš„kubeletä¼šè§¦å‘OOM Killerï¼Œå¼ºåˆ¶ç»ˆæ­¢Podã€‚ è¡¨ç°ï¼šPodè¢«æ„å¤–ç»ˆæ­¢ï¼Œæ—¥å¿—æ˜¾ç¤ºOOMKilledã€‚ è§£å†³æ–¹æ¡ˆï¼š é¿å…è¶…å–å…³é”®ä¸šåŠ¡Podï¼Œä»…å¯¹ä½ä¼˜å…ˆçº§ä»»åŠ¡ï¼ˆå¦‚æ‰¹å¤„ç†Jobï¼‰è¶…å–å†…å­˜ã€‚ è®¾ç½®åˆç†çš„limitsï¼Œå¹¶ç›‘æ§memory.usageï¼Œæ¥è¿‘é˜ˆå€¼æ—¶å‘Šè­¦ã€‚ 2. èŠ‚ç‚¹èµ„æºè€—å°½ï¼ˆNoisy Neighbor Problemï¼‰\nï¼ˆ1ï¼‰ç£ç›˜I/Oã€ç½‘ç»œå¸¦å®½äº‰æŠ¢\né—®é¢˜ï¼šè¶…å–é€šå¸¸åªå…³æ³¨CPU/å†…å­˜ï¼Œä½†ç£ç›˜I/Oã€ç½‘ç»œå¸¦å®½ä¹Ÿå¯èƒ½æˆä¸ºç“¶é¢ˆã€‚ ä¾‹å¦‚ï¼šæŸä¸ªPodç–¯ç‹‚å†™æ—¥å¿—ï¼Œå¯¼è‡´èŠ‚ç‚¹ç£ç›˜IOPSé¥±å’Œï¼Œå½±å“å…¶ä»–Podã€‚ è§£å†³æ–¹æ¡ˆï¼š ä½¿ç”¨ResourceQuotaé™åˆ¶æ¯ä¸ªNamespaceçš„å­˜å‚¨/ç½‘ç»œèµ„æºã€‚ å¯¹é«˜I/Oè´Ÿè½½çš„Podä½¿ç”¨Local SSDæˆ–ç‹¬ç«‹ç½‘ç»œQoSç­–ç•¥ã€‚ ï¼ˆ2ï¼‰èŠ‚ç‚¹å‹åŠ›é©±é€ï¼ˆNode Pressure Evictionï¼‰\né—®é¢˜ï¼šå½“èŠ‚ç‚¹èµ„æºï¼ˆå†…å­˜ã€ç£ç›˜ï¼‰è€—å°½æ—¶ï¼Œkubeletä¼šæŒ‰ä¼˜å…ˆçº§é©±é€Podï¼Œå¯èƒ½å¯¼è‡´æœåŠ¡ä¸­æ–­ã€‚ è§£å†³æ–¹æ¡ˆï¼š é…ç½®kubeletçš„--eviction-hardå‚æ•°ï¼Œæå‰è§¦å‘é©±é€ï¼ˆå¦‚memory.available\u003c10%æ—¶ï¼‰ã€‚ ä½¿ç”¨Pod PriorityClassï¼Œç¡®ä¿å…³é”®æœåŠ¡ä¸è¢«ä¼˜å…ˆé©±é€ã€‚ 3. ç›‘æ§ä¸è¿ç»´å¤æ‚åº¦å¢åŠ \nï¼ˆ1ï¼‰èµ„æºä½¿ç”¨éš¾ä»¥é¢„æµ‹\né—®é¢˜ï¼šè¶…å–åï¼Œå®é™…èµ„æºä½¿ç”¨é‡å¯èƒ½è¿œè¶…requestsï¼Œå¯¼è‡´å®¹é‡è§„åˆ’å›°éš¾ã€‚ è§£å†³æ–¹æ¡ˆï¼š ä½¿ç”¨Prometheus + Grafanaç›‘æ§å®é™…èµ„æºåˆ©ç”¨ç‡ï¼Œå»ºç«‹è¶…å–æ¯”ä¾‹æ¨¡å‹ï¼ˆå¦‚è¶…å–ç‡=Î£limits/èŠ‚ç‚¹å®¹é‡ï¼‰ã€‚ å®šæœŸè¿›è¡Œå‹åŠ›æµ‹è¯•ï¼Œæ¨¡æ‹Ÿå³°å€¼è´Ÿè½½ä¸‹çš„é›†ç¾¤è¡Œä¸ºã€‚ ï¼ˆ2ï¼‰æ•…éšœæ’æŸ¥éš¾åº¦ä¸Šå‡\né—®é¢˜ï¼šè¶…å–ç¯å¢ƒä¸‹ï¼Œé—®é¢˜å¯èƒ½ç”±èµ„æºç«äº‰å¼•èµ·ï¼Œè€Œéåº”ç”¨æœ¬èº«ã€‚ è§£å†³æ–¹æ¡ˆï¼š è®°å½•kubeletæ—¥å¿—ï¼Œå…³æ³¨OOMKilledå’ŒCPUThrottlingäº‹ä»¶ã€‚ ä½¿ç”¨kubectl describe nodeæŸ¥çœ‹èŠ‚ç‚¹èµ„æºåˆ†é…æƒ…å†µã€‚ 4. ä¸é€‚åˆè¶…å–çš„åœºæ™¯\nåœºæ™¯ é£é™© å»ºè®® é‡‘èäº¤æ˜“ç±»æœåŠ¡ å»¶è¿Ÿæ•æ„Ÿï¼ŒOOMå¯èƒ½å¯¼è‡´äº¤æ˜“å¤±è´¥ ç¦ç”¨è¶…å–ï¼Œä½¿ç”¨Guaranteed QoS æ•°æ®åº“ï¼ˆMySQL/Redisï¼‰ å†…å­˜ç«äº‰å¯èƒ½å¯¼è‡´ç¼“å­˜å¤±æ•ˆæˆ–æŸ¥è¯¢è¶…æ—¶ ç‹¬ç«‹èŠ‚ç‚¹éƒ¨ç½²ï¼Œä¸è¶…å–å†…å­˜ å®æ—¶éŸ³è§†é¢‘å¤„ç† CPUé™æµä¼šå¯¼è‡´å¡é¡¿ã€éŸ³ç”»ä¸åŒæ­¥ é¢„ç•™ä¸“ç”¨èµ„æº æ€»ç»“ï¼šå¦‚ä½•å®‰å…¨è¶…å–ï¼Ÿ\nåˆ†å±‚è¶…å–ï¼šæ ¸å¿ƒä¸šåŠ¡ä¸è¶…å–ï¼Œéæ ¸å¿ƒä¸šåŠ¡é€‚åº¦è¶…å–ã€‚ åŠ¨æ€è°ƒæ•´ï¼šç»“åˆVPA/HPAè‡ªåŠ¨ä¼˜åŒ–èµ„æºåˆ†é…ã€‚ ä¸¥æ ¼ç›‘æ§ï¼šå…³æ³¨OOM Killã€CPU Throttlingã€èŠ‚ç‚¹å‹åŠ›æŒ‡æ ‡ã€‚ æ¸è¿›å¼éªŒè¯ï¼šå…ˆåœ¨Dev/Testç¯å¢ƒæµ‹è¯•ï¼Œå†é€æ­¥æ¨å¹¿åˆ°ç”Ÿäº§ã€‚ å®ç°åŸç† linkCPUè™šæ‹ŸåŒ–ä¸éš”ç¦» linkLinux Cgroupsï¼ˆæ§åˆ¶ç»„ï¼‰ linkKubernetesé€šè¿‡cgroupsï¼ˆç‰¹åˆ«æ˜¯cpuå’Œcpuacctå­ç³»ç»Ÿï¼‰é™åˆ¶å®¹å™¨çš„CPUä½¿ç”¨ï¼š\ncpu.cfs_quota_us \u0026 cpu.cfs_period_us\nç”¨äºå®ç°CPUæ—¶é—´ç‰‡åˆ†é…ï¼ˆCFSè°ƒåº¦å™¨ï¼‰ã€‚ ä¾‹å¦‚ï¼šè®¾ç½®cpu.cfs_quota_us=100000ï¼ˆ100msï¼‰å’Œcpu.cfs_period_us=100000ï¼ˆ100msï¼‰ï¼Œè¡¨ç¤ºå®¹å™¨æœ€å¤šä½¿ç”¨1ä¸ªCPUæ ¸å¿ƒã€‚ å¦‚æœquota=200000ï¼Œåˆ™å…è®¸ä½¿ç”¨2ä¸ªCPUæ ¸å¿ƒï¼ˆå³limits.cpu: \"2\"ï¼‰ã€‚ cpu.shares\nç”¨äºè®¾ç½®CPUæƒé‡ï¼ˆå½±å“requests.cpuï¼‰ã€‚ é»˜è®¤å€¼ï¼š1024ï¼ˆç›¸å½“äº1ä¸ªCPUæ ¸å¿ƒçš„æƒé‡ï¼‰ã€‚ ä¾‹å¦‚ï¼šPod Açš„requests.cpu: 2 â†’ cpu.shares=2048ï¼›Pod Bçš„requests.cpu: 1 â†’ cpu.shares=1024ã€‚ å½“CPUèµ„æºç´§å¼ æ—¶ï¼ŒPod Aè·å¾—çš„CPUæ—¶é—´æ˜¯Pod Bçš„2å€ã€‚ CPU Throttlingï¼ˆé™æµï¼‰ link å½“å®¹å™¨å°è¯•ä½¿ç”¨è¶…è¿‡limits.cpuæ—¶ï¼Œå†…æ ¸ä¼šé™åˆ¶å…¶CPUæ—¶é—´ç‰‡ï¼Œå¯¼è‡´æ€§èƒ½ä¸‹é™ï¼ˆthrottled_cpu_timeå¢åŠ ï¼‰ã€‚ æŸ¥çœ‹å®¹å™¨çš„CPUé™æµæƒ…å†µï¼š cat /sys/fs/cgroup/cpu/kubepods/pod-/cpu.stat è¾“å‡ºç¤ºä¾‹ï¼š nr_periods 1000 nr_throttled 200 throttled_time 50000000 # è¢«é™æµçš„æ—¶é—´ï¼ˆçº³ç§’ï¼‰ å¤šæ ¸ä¸è¶…çº¿ç¨‹ï¼ˆSMTï¼‰çš„å½±å“ link ç‰©ç†æ ¸å¿ƒï¼ˆCoreï¼‰ vs é€»è¾‘æ ¸å¿ƒï¼ˆvCPUï¼‰ï¼š è¶…çº¿ç¨‹ï¼ˆHyper-Threadingï¼‰ä¼šè®©1ä¸ªç‰©ç†æ ¸å¿ƒè¡¨ç°ä¸º2ä¸ªé€»è¾‘æ ¸å¿ƒï¼ˆvCPUï¼‰ã€‚ Kubernetesçš„limits.cpuå¯¹åº”çš„æ˜¯é€»è¾‘æ ¸å¿ƒï¼Œå› æ­¤è¶…å–æ—¶éœ€æ³¨æ„ç‰©ç†æ ¸å¿ƒçš„äº‰æŠ¢ã€‚ CPUäº²å’Œæ€§ï¼ˆAffinityï¼‰ï¼š å¯é€šè¿‡cpuAffinityå°†Podç»‘å®šåˆ°ç‰¹å®šæ ¸å¿ƒï¼Œå‡å°‘ä¸Šä¸‹æ–‡åˆ‡æ¢å¼€é”€ï¼ˆä½†å¯¹è¶…å–çµæ´»æ€§æœ‰å½±å“ï¼‰ã€‚ å†…å­˜è™šæ‹ŸåŒ–ä¸éš”ç¦» linkCgroupså†…å­˜æ§åˆ¶ linkKubernetesé€šè¿‡memoryå­ç³»ç»Ÿé™åˆ¶å®¹å™¨å†…å­˜ï¼š\nmemory.limit_in_bytes\nå¯¹åº”limits.memoryï¼Œä¾‹å¦‚è®¾ç½®4Gi â†’ memory.limit_in_bytes=4294967296ã€‚ å½“å®¹å™¨å†…å­˜ä½¿ç”¨è¶…è¿‡è¯¥å€¼ï¼Œä¼šè§¦å‘OOM Killï¼ˆé™¤éé…ç½®äº†swapï¼Œä½†Kubernetesé»˜è®¤ç¦ç”¨ï¼‰ã€‚ memory.soft_limit_in_bytes\nå¯¹åº”requests.memoryï¼Œå†…æ ¸ä¼šå°½é‡ä¿éšœè¯¥å€¼ï¼Œä½†ä¸å¼ºåˆ¶é™åˆ¶ã€‚ memory.oom_control\nå¯ç¦ç”¨OOM Killerï¼ˆä¸æ¨èï¼Œå¯èƒ½å¯¼è‡´èŠ‚ç‚¹ä¸ç¨³å®šï¼‰ã€‚ å†…å­˜è¶…å–çš„é£é™© link OOM Killæœºåˆ¶ï¼š å½“èŠ‚ç‚¹å†…å­˜ä¸è¶³æ—¶ï¼Œå†…æ ¸æ ¹æ®oom_scoreï¼ˆå—QoSå½±å“ï¼‰é€‰æ‹©ç‰ºç‰²è€…ã€‚ æŸ¥çœ‹Podçš„OOMåˆ†æ•°ï¼š cat /proc//oom_score BestEffort Podçš„åˆ†æ•°é€šå¸¸æœ€é«˜ï¼ˆæœ€å…ˆè¢«æ€ï¼‰ã€‚ Swapçš„äº‰è®®ï¼š Kubernetesé»˜è®¤ç¦ç”¨swapï¼Œå› ä¸ºç£ç›˜äº¤æ¢ä¼šå¤§å¹…é™ä½æ€§èƒ½ã€‚ å¦‚æœå¯ç”¨swapï¼Œè¶…å–å†…å­˜çš„Podå¯èƒ½ä¸ä¼šç«‹å³OOM Killï¼Œä½†ä¼šå¯¼è‡´ä¸¥é‡æ€§èƒ½ä¸‹é™ã€‚ Kernelå†…å­˜ä¸é€æ˜å¤§é¡µï¼ˆTHPï¼‰ link Kernelå†…å­˜ï¼š åŒ…æ‹¬Slabã€Page Tablesç­‰ï¼Œä¸è®¡å…¥limits.memoryï¼Œä½†å¯èƒ½å½±å“èŠ‚ç‚¹ç¨³å®šæ€§ã€‚ é€æ˜å¤§é¡µï¼ˆTransparent Huge Pages, THPï¼‰ï¼š å¤§å†…å­˜é¡µï¼ˆ2MB/1GBï¼‰å¯æé«˜æ€§èƒ½ï¼Œä½†å¯èƒ½å¯¼è‡´å†…å­˜ç¢ç‰‡åŒ–ã€‚ å»ºè®®åœ¨kubeletä¸­ç¦ç”¨THPï¼š --feature-gates=DynamicKubeletConfig=true --kube-reserved=\"memory=1Gi\" --kernel-memcg-notify=true èµ„æºè¯·æ±‚ï¼ˆRequestsï¼‰ä¸é™åˆ¶ï¼ˆLimitsï¼‰ linkRequestsï¼ˆè¯·æ±‚ï¼‰ link å®šä¹‰ï¼šPodå‘Kuberneteså£°æ˜çš„æœ€å°èµ„æºéœ€æ±‚ï¼Œè°ƒåº¦å™¨ï¼ˆSchedulerï¼‰ä¾æ®è¯¥å€¼å†³å®šPodåº”è¯¥è¿è¡Œåœ¨å“ªä¸ªèŠ‚ç‚¹ä¸Šã€‚ ç¤ºä¾‹ï¼š resources: requests: cpu: \"1\" # ç”³è¯·1æ ¸CPU memory: \"2Gi\" # ç”³è¯·2GBå†…å­˜ ä½œç”¨ï¼š è°ƒåº¦ä¾æ®ï¼šå¦‚æœä¸€ä¸ªèŠ‚ç‚¹çš„å‰©ä½™å¯åˆ†é…CPU \u003c 1æ ¸ï¼Œåˆ™Podä¸ä¼šè¢«è°ƒåº¦åˆ°è¯¥èŠ‚ç‚¹ã€‚ èµ„æºé¢„ç•™ï¼škubeletä¼šä¸ºPodé¢„ç•™è¿™éƒ¨åˆ†èµ„æºï¼Œå³ä½¿Podæœªå®Œå…¨ä½¿ç”¨ã€‚ Limitsï¼ˆé™åˆ¶ï¼‰ link å®šä¹‰ï¼šPodå¯ä»¥ä½¿ç”¨çš„æœ€å¤§èµ„æºä¸Šé™ï¼Œè¶…è¿‡è¯¥å€¼ä¼šè¢«é™åˆ¶ï¼ˆCPUï¼‰æˆ–ç»ˆæ­¢ï¼ˆå†…å­˜ï¼‰ã€‚ ç¤ºä¾‹ï¼š resources: limits: cpu: \"2\" # æœ€å¤šä½¿ç”¨2æ ¸CPU memory: \"4Gi\" # æœ€å¤šä½¿ç”¨4GBå†…å­˜ ä½œç”¨ï¼š CPUé™æµï¼ˆThrottlingï¼‰ï¼šå¦‚æœPodå°è¯•ä½¿ç”¨è¶…è¿‡limits.cpuï¼ŒLinuxå†…æ ¸çš„CFSï¼ˆå®Œå…¨å…¬å¹³è°ƒåº¦å™¨ï¼‰ä¼šé™åˆ¶å…¶CPUæ—¶é—´ç‰‡ã€‚ OOM Killï¼šå¦‚æœPodçš„å†…å­˜ä½¿ç”¨è¶…è¿‡limits.memoryï¼Œkubeletä¼šå¼ºåˆ¶ç»ˆæ­¢è¯¥Podï¼ˆOOMKilledï¼‰ã€‚ Requests vs Limits å…³ç³» link åœºæ™¯ è¡¨ç° requests \u003c limits å¯è¶…å–ï¼šPodå¯ä»¥ä¸´æ—¶ä½¿ç”¨è¶…å‡ºrequestsçš„èµ„æºï¼ˆè¶…å–çš„åŸºç¡€ï¼‰ã€‚ requests == limits ä¸å¯è¶…å–ï¼šPodåªèƒ½ä½¿ç”¨å›ºå®šé‡çš„èµ„æºï¼ˆGuaranteed QoSï¼Œé€‚åˆå…³é”®ä¸šåŠ¡ï¼‰ã€‚ æœªè®¾ç½®requests/limits æœ€ä½ä¼˜å…ˆçº§ï¼šPodå¯èƒ½è¢«éšæ„è°ƒåº¦ï¼Œå¹¶é¢ä¸´èµ„æºç«äº‰ï¼ˆBestEffort QoSï¼‰ã€‚ QoSï¼ˆæœåŠ¡è´¨é‡ï¼‰ linkKubernetesæ ¹æ®requestså’Œlimitsçš„é…ç½®ï¼Œå°†Podåˆ†ä¸º3ç§QoSç­‰çº§ï¼Œç›´æ¥å½±å“èµ„æºç«äº‰æ—¶çš„ä¼˜å…ˆçº§ï¼š\nGuaranteedï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰ link æ¡ä»¶ï¼šæ‰€æœ‰å®¹å™¨çš„requests == limitsï¼ˆCPUå’Œå†…å­˜å‡éœ€è®¾ç½®ï¼‰ã€‚ ç‰¹ç‚¹ï¼š èµ„æºå®Œå…¨ä¿éšœï¼Œä¸ä¼šè¢«è¶…å–å½±å“ã€‚ æœ€åè¢«OOM Killï¼Œé€‚åˆæ•°æ®åº“ã€æ ¸å¿ƒæœåŠ¡ã€‚ Burstableï¼ˆä¸­ç­‰ä¼˜å…ˆçº§ï¼‰ link æ¡ä»¶ï¼šè‡³å°‘ä¸€ä¸ªå®¹å™¨è®¾ç½®äº†requestsï¼Œä½†requests \u003c limitsã€‚ ç‰¹ç‚¹ï¼š å¯ä»¥è¶…å–ï¼Œä½†å—limitsçº¦æŸã€‚ OOM Killä¼˜å…ˆçº§ä½äºBestEffortï¼Œé€‚åˆæ™®é€šä¸šåŠ¡Podã€‚ BestEffortï¼ˆæœ€ä½ä¼˜å…ˆçº§ï¼‰ link æ¡ä»¶ï¼šæœªè®¾ç½®ä»»ä½•requestså’Œlimitsã€‚ ç‰¹ç‚¹ï¼š èµ„æºæ— ä¿éšœï¼Œå®Œå…¨ä¾èµ–èŠ‚ç‚¹å‰©ä½™èµ„æºã€‚ æœ€å…ˆè¢«OOM Killï¼Œé€‚åˆä¸´æ—¶ä»»åŠ¡ã€æµ‹è¯•ç¯å¢ƒã€‚ QoSä¼˜å…ˆçº§æ€»ç»“ link OOM Killé¡ºåºï¼šBestEffort â†’ Burstable â†’ Guaranteed è°ƒåº¦å™¨å¦‚ä½•åŸºäºèµ„æºè¯·æ±‚åˆ†é…Podï¼Ÿ linkKubernetesè°ƒåº¦å™¨ï¼ˆkube-schedulerï¼‰åœ¨è°ƒåº¦Podæ—¶ï¼Œä»…è€ƒè™‘requestsï¼Œè€Œlimitsä¸å½±å“è°ƒåº¦å†³ç­–ã€‚æµç¨‹å¦‚ä¸‹ï¼š\nç­›é€‰ï¼ˆFilteringï¼‰\næ£€æŸ¥èŠ‚ç‚¹å‰©ä½™å¯åˆ†é…èµ„æºï¼ˆAllocatableï¼‰æ˜¯å¦ â‰¥ Podçš„requestsã€‚ æ’é™¤ä¸æ»¡è¶³æ¡ä»¶çš„èŠ‚ç‚¹ï¼ˆå¦‚CPUä¸è¶³ã€å†…å­˜ä¸è¶³ï¼‰ã€‚ è¯„åˆ†ï¼ˆScoringï¼‰\nå¯¹å‰©ä½™èŠ‚ç‚¹æ‰“åˆ†ï¼ˆå¦‚é€‰æ‹©èµ„æºå‰©ä½™æœ€å¤šçš„èŠ‚ç‚¹ï¼Œé¿å…çƒ­ç‚¹ï¼‰ã€‚ ç»‘å®šï¼ˆBindingï¼‰\nå°†Podç»‘å®šåˆ°æœ€ä½³èŠ‚ç‚¹ï¼Œkubeletè´Ÿè´£åç»­èµ„æºåˆ†é…ã€‚ å…³é”®ç‚¹\nè¶…å–çš„æœ¬è´¨ï¼šå¤šä¸ªPodçš„requestsæ€»å’Œå¯ä»¥è¶…è¿‡èŠ‚ç‚¹å®é™…èµ„æºï¼Œåªè¦å®ƒä»¬çš„limitsæ€»å’Œä¹Ÿå…è®¸ã€‚ è°ƒåº¦å™¨ä¸æ£€æŸ¥limitsï¼šå³ä½¿limitsæ€»å’Œè¿œè¶…èŠ‚ç‚¹å®¹é‡ï¼Œåªè¦requestsæ»¡è¶³ï¼ŒPodä»ä¼šè¢«è°ƒåº¦ã€‚ ç¤ºä¾‹ï¼šè¶…å–è°ƒåº¦åœºæ™¯\nå‡è®¾ä¸€ä¸ªèŠ‚ç‚¹æœ‰ 4æ ¸CPU / 8GBå†…å­˜ï¼š\nPod CPU Requests CPU Limits å†…å­˜ Requests å†…å­˜ Limits Pod A 1æ ¸ 2æ ¸ 2GB 4GB Pod B 1æ ¸ 2æ ¸ 2GB 4GB Pod C 1æ ¸ 2æ ¸ 2GB 4GB è°ƒåº¦ç»“æœï¼š requestsæ€»å’Œ = 3æ ¸CPU / 6GBå†…å­˜ â‰¤ èŠ‚ç‚¹å®¹é‡ï¼ˆ4æ ¸/8GBï¼‰â†’ å…è®¸è°ƒåº¦ã€‚ limitsæ€»å’Œ = 6æ ¸CPU / 12GBå†…å­˜ \u003e èŠ‚ç‚¹å®¹é‡ â†’ å®é™…è¿è¡Œä¾èµ–èµ„æºäº‰æŠ¢ã€‚ å®ç°æ–¹æ¡ˆ linké™æ€è¶…å– linkæ ¸å¿ƒæ€æƒ³ï¼šé€šè¿‡æ‰‹åŠ¨è®¾ç½®Podçš„requestså’Œlimitså·®å€¼ï¼Œå…è®¸å…¶ä¸´æ—¶å ç”¨è¶…é¢èµ„æºã€‚\nCPUé™æ€è¶…å–\né€‚ç”¨åœºæ™¯ï¼šçªå‘æµé‡ã€æ‰¹å¤„ç†ä»»åŠ¡ç­‰çŸ­æœŸé«˜è´Ÿè½½éœ€æ±‚ã€‚ é…ç½®ç¤ºä¾‹ï¼š resources: requests: cpu: \"1\" # è°ƒåº¦å™¨æŒ‰1æ ¸åˆ†é… limits: cpu: \"4\" # å®é™…å…è®¸ä½¿ç”¨4æ ¸ï¼ˆè¶…å–3æ ¸ï¼‰ æ•ˆæœï¼š è°ƒåº¦å™¨ä¿è¯è‡³å°‘æœ‰1æ ¸å¯ç”¨ï¼Œä½†Podå¯çªå‘ä½¿ç”¨è‡³4æ ¸ï¼ˆè‹¥èŠ‚ç‚¹æœ‰ç©ºé—²èµ„æºï¼‰ã€‚ è‹¥å¤šä¸ªPodåŒæ—¶çˆ†å‘ï¼Œåˆ™è§¦å‘CPU Throttlingã€‚ å†…å­˜é™æ€è¶…å–\né€‚ç”¨åœºæ™¯ï¼šå†…å­˜ä½¿ç”¨æ³¢åŠ¨å¤§çš„æœåŠ¡ï¼ˆå¦‚ç¼“å­˜æœåŠ¡ï¼‰ã€‚ é…ç½®ç¤ºä¾‹ï¼š resources: requests: memory: \"1Gi\" # è°ƒåº¦å™¨é¢„ç•™1GB limits: memory: \"3Gi\" # å…è®¸ä½¿ç”¨3GBï¼ˆè¶…å–2GBï¼‰ é£é™©ï¼š è‹¥å¤šä¸ªPodåŒæ—¶å ç”¨é«˜å†…å­˜ï¼Œå¯èƒ½è§¦å‘OOM Killã€‚ é™æ€è¶…å–çš„ä¼˜ç¼ºç‚¹\nä¼˜ç‚¹ ç¼ºç‚¹ é…ç½®ç®€å•ï¼Œæ— éœ€é¢å¤–ç»„ä»¶ è¶…å–æ¯”ä¾‹å›ºå®šï¼Œæ— æ³•é€‚åº”åŠ¨æ€è´Ÿè½½ é€‚åˆå·²çŸ¥è§„å¾‹çš„è´Ÿè½½ å†…å­˜è¶…å–é£é™©è¾ƒé«˜ åŠ¨æ€è¶…å– linkæ ¸å¿ƒæ€æƒ³ï¼šé€šè¿‡è‡ªåŠ¨åŒ–å·¥å…·å®æ—¶è°ƒæ•´requestsï¼ŒåŸºäºå®é™…è´Ÿè½½åŠ¨æ€æ§åˆ¶è¶…å–æ¯”ä¾‹ã€‚\nVertical Pod Autoscalerï¼ˆVPAï¼‰ link ä½œç”¨ï¼šè‡ªåŠ¨è°ƒæ•´Podçš„requestså’Œlimitsï¼Œé¿å…èµ„æºæµªè´¹ã€‚ é…ç½®ç¤ºä¾‹ï¼š apiVersion: autoscaling.k8s.io/v1 kind: VerticalPodAutoscaler metadata: name: my-app-vpa spec: targetRef: apiVersion: \"apps/v1\" kind: Deployment name: my-app updatePolicy: updateMode: \"Auto\" # è‡ªåŠ¨æ›´æ–°Podèµ„æº åŠ¨æ€è¶…å–é€»è¾‘ï¼š VPAç›‘æ§Podçš„å†å²èµ„æºä½¿ç”¨é‡ï¼Œé™ä½requestsï¼ˆå¦‚ä»2æ ¸â†’1æ ¸ï¼‰ï¼Œè…¾å‡ºèµ„æºä¾›å…¶ä»–Podè¶…å–ä½¿ç”¨ã€‚ æ³¨æ„ï¼šVPAçš„Autoæ¨¡å¼ä¼šé‡å»ºPodï¼Œå¯èƒ½å¼•å‘çŸ­æš‚æœåŠ¡ä¸­æ–­ã€‚ åŸºäºPrometheusçš„è‡ªé€‚åº”è¶…å– linkæ¶æ„ï¼š\ngraph LR Prometheus --\u003e|æŒ‡æ ‡æ•°æ®| Custom-Controller Custom-Controller --\u003e|è°ƒæ•´requests| Kubernetes-API å®ç°æ­¥éª¤ï¼š\nä½¿ç”¨Prometheusé‡‡é›†èŠ‚ç‚¹å’ŒPodçš„å®æ—¶èµ„æºä½¿ç”¨ç‡ï¼ˆå¦‚container_cpu_usage_seconds_totalï¼‰ã€‚ è‡ªå®šä¹‰æ§åˆ¶å™¨è®¡ç®—å®‰å…¨è¶…å–æ¯”ä¾‹ï¼ˆä¾‹å¦‚ï¼šè¶…å–ç³»æ•° = å½“å‰ç©ºé—²èµ„æº / æ€»èµ„æºï¼‰ã€‚ åŠ¨æ€ä¿®æ”¹Podçš„requestsï¼ˆéœ€é…åˆkubectl patchæˆ–APIè°ƒç”¨ï¼‰ã€‚ åŠ¨æ€è¶…å–çš„ä¼˜ç¼ºç‚¹\nä¼˜ç‚¹ ç¼ºç‚¹ é€‚åº”è´Ÿè½½å˜åŒ–ï¼Œèµ„æºåˆ©ç”¨ç‡æœ€å¤§åŒ– å®ç°å¤æ‚åº¦é«˜ï¼Œéœ€ç»´æŠ¤ç›‘æ§å’Œæ§åˆ¶å™¨ é™ä½OOMé£é™©ï¼ˆé€šè¿‡åŠ¨æ€è°ƒæ•´ï¼‰ VPAçš„Autoæ¨¡å¼å¯èƒ½å¯¼è‡´Podé‡å»º èŠ‚ç‚¹çº§è¶…å– linkæ ¸å¿ƒæ€æƒ³ï¼šåœ¨èŠ‚ç‚¹å±‚é¢å…¨å±€æ§åˆ¶èµ„æºåˆ†é…ï¼Œè€Œéå•ä¸ªPodã€‚\nkubeletèµ„æºé¢„ç•™å‚æ•° link --system-reservedï¼šä¸ºç³»ç»Ÿè¿›ç¨‹ï¼ˆå¦‚sshdã€dockerï¼‰é¢„ç•™èµ„æºã€‚ --kube-reservedï¼šä¸ºKubernetesç»„ä»¶ï¼ˆå¦‚kubeletã€CNIæ’ä»¶ï¼‰é¢„ç•™èµ„æºã€‚ --eviction-hardï¼šè®¾ç½®èµ„æºé©±é€é˜ˆå€¼ï¼ˆå¦‚å†…å­˜ä¸è¶³æ—¶è§¦å‘Podé©±é€ï¼‰ã€‚ ç¤ºä¾‹ï¼šå…è®¸èŠ‚ç‚¹è¶…å–CPU 20%\nkubelet \\ --system-reserved=cpu=1,memory=1Gi \\ --kube-reserved=cpu=0.5,memory=512Mi \\ --eviction-hard=memory.available\u003c500Mi èŠ‚ç‚¹èµ„æºåˆ†é…ç­–ç•¥ link --cpu-manager-policy=staticï¼š å°†CPUæ ¸å¿ƒç‹¬å åˆ†é…ç»™å…³é”®Podï¼ˆå¦‚Guaranteed QoSçš„Podï¼‰ï¼Œå…¶ä½™æ ¸å¿ƒç”¨äºè¶…å–ã€‚ --memory-manager-policy=Noneï¼š é»˜è®¤ç­–ç•¥ï¼Œå…è®¸å†…å­˜è¶…å–ï¼ˆè‹¥éœ€ä¸¥æ ¼éš”ç¦»ï¼Œå¯åˆ‡æ¢ä¸ºStaticæˆ–Dynamicï¼‰ã€‚ èŠ‚ç‚¹çº§è¶…å–çš„ä¼˜ç¼ºç‚¹ link ä¼˜ç‚¹ ç¼ºç‚¹ å…¨å±€æ§åˆ¶ï¼Œé¿å…å•ä¸ªPodé…ç½®é—æ¼ è°ƒæ•´éœ€é‡å¯kubeletï¼Œå½±å“èŠ‚ç‚¹å¯ç”¨æ€§ é€‚åˆæ··åˆéƒ¨ç½²ï¼ˆå…³é”®+éå…³é”®ä¸šåŠ¡ï¼‰ å†…å­˜è¶…å–ä»éœ€è°¨æ… è¶…å–æ§åˆ¶å™¨ linkä¸ºäº†å®ç°åŠ¨æ€èµ„æºè¶…å–ï¼Œæˆ‘ä»¬å¯ä»¥è®¾è®¡ä¸€ä¸ªè¶…å–æ§åˆ¶ç³»ç»Ÿï¼ŒåŒ…å«ä»¥ä¸‹æ ¸å¿ƒç»„ä»¶ï¼š\nè¶…å–Serverï¼ˆOversell Serverï¼‰ï¼šè´Ÿè´£è®¡ç®—è¶…å–ç­–ç•¥ï¼Œç”Ÿæˆ/æ›´æ–°OversellRule CRã€‚ è¶…å–Operatorï¼ˆOversell Operatorï¼‰ï¼šç›‘å¬OversellRule CRï¼ŒåŠ¨æ€è°ƒæ•´Podçš„requests/limitsã€‚ ç›‘æ§ç³»ç»Ÿï¼ˆPrometheus + Metrics Serverï¼‰ï¼šæä¾›å®æ—¶èµ„æºåˆ©ç”¨ç‡æ•°æ®ã€‚ graph TB subgraph è¶…å–æ§åˆ¶ç³»ç»Ÿ OversellServer --\u003e|ç”Ÿæˆ/æ›´æ–°| OversellRuleCR OversellOperator --\u003e|ç›‘å¬| OversellRuleCR OversellOperator --\u003e|ä¿®æ”¹Podèµ„æº| KubernetesAPI Prometheus --\u003e|èµ„æºæŒ‡æ ‡| OversellServer end è¶…å–çš„å…³é”®æŠ€æœ¯è€ƒé‡ linkèµ„æºç±»å‹å·®å¼‚ï¼šCPU vs å†…å­˜è¶…å– linkCPUè¶…å–ï¼šæ—¶é—´ç‰‡å¤ç”¨ link æŠ€æœ¯åŸç†ï¼š CPUæ˜¯æ—¶åˆ†å¤ç”¨èµ„æºï¼Œé€šè¿‡Linux CFSè°ƒåº¦å™¨åˆ†é…æ—¶é—´ç‰‡ã€‚ è¶…å–åï¼Œå¤šä¸ªPodåˆ†æ—¶å…±äº«ç‰©ç†æ ¸å¿ƒï¼ˆå¦‚10ä¸ªPodçš„limits.cpuæ€»å’Œä¸º20æ ¸ï¼Œä½†èŠ‚ç‚¹åªæœ‰16æ ¸ï¼‰ã€‚ ä¼˜åŠ¿ï¼š å³ä½¿è¶…å–ï¼ŒPodä»…ä¼šå› Throttlingå¯¼è‡´æ€§èƒ½ä¸‹é™ï¼Œé€šå¸¸ä¸ä¼šå´©æºƒã€‚ é£é™©æ§åˆ¶ï¼š ç›‘æ§CPU Throttlingæ¯”ä¾‹ï¼ˆè¶…è¿‡5%éœ€å‘Šè­¦ï¼‰ã€‚ ä¸ºå…³é”®Podè®¾ç½®cpuAffinityï¼Œå‡å°‘ä¸Šä¸‹æ–‡åˆ‡æ¢å¼€é”€ã€‚ æŒ‡æ ‡å‚è€ƒï¼š\n# æŸ¥è¯¢å®¹å™¨çš„CPUé™æµæ—¶é—´å æ¯” sum(rate(container_cpu_cfs_throttled_seconds_total{container!=\"\"}[5m])) by (pod) / sum(rate(container_cpu_usage_seconds_total{container!=\"\"}[5m])) by (pod) å†…å­˜è¶…å–ï¼šOOM Killé£é™© link æŠ€æœ¯åŸç†ï¼š å†…å­˜æ˜¯ç‹¬å å¼èµ„æºï¼Œè¶…å–ä¾èµ–â€œå¹¶éæ‰€æœ‰PodåŒæ—¶æ»¡è´Ÿè·â€çš„å‡è®¾ã€‚ ä¸€æ—¦èŠ‚ç‚¹å†…å­˜è€—å°½ï¼Œå†…æ ¸æ ¹æ®oom_scoreå¼ºåˆ¶ç»ˆæ­¢Podï¼ˆOOMKilledï¼‰ã€‚ ä¼˜åŠ¿ï¼š å¯æ˜¾è‘—æé«˜å†…å­˜åˆ©ç”¨ç‡ï¼ˆå°¤å…¶å¯¹ç¨€ç–ä½¿ç”¨çš„æœåŠ¡ï¼‰ã€‚ é£é™©æ§åˆ¶ï¼š é¿å…è¶…å–å…³é”®Podï¼ˆå¦‚æ•°æ®åº“ï¼‰ï¼Œä»…å¯¹æ— çŠ¶æ€æœåŠ¡è¶…å–ã€‚ è®¾ç½®limits.memory â‰¤ èŠ‚ç‚¹å¯ç”¨å†…å­˜çš„70%ï¼ˆé¢„ç•™ç¼“å†²ï¼‰ã€‚ æŒ‡æ ‡å‚è€ƒï¼š\n# æŸ¥è¯¢OOM Killäº‹ä»¶ kube_pod_container_status_last_terminated_reason{reason=\"OOMKilled\"} CPUä¸å†…å­˜è¶…å–å¯¹æ¯”\nç»´åº¦ CPUè¶…å– å†…å­˜è¶…å– éš”ç¦»æœºåˆ¶ æ—¶é—´ç‰‡åˆ†æ—¶å…±äº« ç¡¬æ€§ä¸Šé™ï¼ˆOOM Killï¼‰ è¶…å–å®‰å…¨æ€§ é«˜ï¼ˆä»…é™æµï¼‰ ä½ï¼ˆå¯èƒ½å´©æºƒï¼‰ é€‚åˆåœºæ™¯ è®¡ç®—å¯†é›†å‹ã€æ‰¹å¤„ç†ä»»åŠ¡ å†…å­˜ä½¿ç”¨æ³¢åŠ¨å¤§çš„æ— çŠ¶æ€æœåŠ¡ ç›‘æ§ä¸å‘Šè­¦ç­–ç•¥ linkæ ¸å¿ƒç›‘æ§æŒ‡æ ‡ link æŒ‡æ ‡ è¯´æ˜ è¶…å–å¥åº·é˜ˆå€¼ node_memory_MemAvailable_bytes èŠ‚ç‚¹å¯ç”¨å†…å­˜é‡ \u003c20%æ€»å†…å­˜æ—¶å‘Šè­¦ container_cpu_cfs_throttled_seconds_total CPUé™æµæ—¶é—´ \u003e5%æ—¶å‘Šè­¦ container_memory_working_set_bytes Podå†…å­˜ä½¿ç”¨é‡ï¼ˆå¸¸é©»é›†ï¼‰ æ¥è¿‘limits.memoryæ—¶å‘Šè­¦ kube_pod_status_phase{phase=\"Failed\"} å› OOM Killå¤±è´¥çš„Pod ä»»æ„å‡ºç°å³å‘Šè­¦ Grafanaçœ‹æ¿ç¤ºä¾‹ï¼š\nCPUè¶…å–çœ‹æ¿ï¼šå±•ç¤ºå„èŠ‚ç‚¹çš„CPU Allocatable vs CPU Requests vs CPU Usageã€‚ å†…å­˜è¶…å–çœ‹æ¿ï¼šç›‘æ§Memory Limitsæ€»å’Œä¸èŠ‚ç‚¹ç‰©ç†å†…å­˜çš„æ¯”ä¾‹ã€‚ å‘Šè­¦è§„åˆ™ç¤ºä¾‹ï¼ˆPrometheusï¼‰ link # å†…å­˜è¶…å–å‘Šè­¦ï¼šèŠ‚ç‚¹å¯ç”¨å†…å­˜ä¸è¶³ - alert: NodeMemoryUnderPressure expr: node_memory_MemAvailable_bytes / node_memory_MemTotal_bytes \u003c 0.2 for: 5m labels: severity: warning annotations: summary: \"{{ $labels.instance }} å¯ç”¨å†…å­˜ä½äº20%\" # CPUé™æµå‘Šè­¦ - alert: HighCPUThrottling expr: rate(container_cpu_cfs_throttled_seconds_total[5m]) / rate(container_cpu_usage_seconds_total[5m]) \u003e 0.05 for: 10m labels: severity: warning ä¼˜å…ˆçº§ä¸æŠ¢å æœºåˆ¶ linkPod PriorityClass linké€šè¿‡å®šä¹‰ä¼˜å…ˆçº§ï¼Œç¡®ä¿å…³é”®ä¸šåŠ¡åœ¨èµ„æºç«äº‰æ—¶ä¼˜å…ˆå­˜æ´»ï¼š\napiVersion: scheduling.k8s.io/v1 kind: PriorityClass metadata: name: high-priority value: 1000000 # ä¼˜å…ˆçº§æ•°å€¼ï¼ˆè¶Šé«˜è¶Šä¼˜å…ˆï¼‰ preemptionPolicy: Never # æ˜¯å¦å…è®¸æŠ¢å å…¶ä»–Pod ä½¿ç”¨åœºæ™¯ï¼š\nå…³é”®ä¸šåŠ¡ï¼šè®¾ç½®ä¸ºhigh-priorityï¼Œé¿å…è¢«OOM Killæˆ–é©±é€ã€‚ æ‰¹å¤„ç†ä»»åŠ¡ï¼šè®¾ç½®ä¸ºlow-priorityï¼Œå…è®¸è¶…å–ä¸”å¯è¢«æŠ¢å ã€‚ è°ƒåº¦æŠ¢å ï¼ˆPreemptionï¼‰ link è§¦å‘æ¡ä»¶ï¼š\nå½“é«˜ä¼˜å…ˆçº§Podå› èµ„æºä¸è¶³æ— æ³•è°ƒåº¦æ—¶ï¼ŒKubernetesä¼šå°è¯•é©±é€ä½ä¼˜å…ˆçº§Podè…¾å‡ºèµ„æºã€‚ é™åˆ¶ï¼š ä»…é©±é€Burstable/BestEffort Podï¼Œä¸é©±é€Guaranteed Podã€‚ éœ€é…åˆPodDisruptionBudgetï¼ˆPDBï¼‰é˜²æ­¢å¤§è§„æ¨¡ä¸­æ–­ã€‚ ç¤ºä¾‹ï¼š\napiVersion: policy/v1 kind: PodDisruptionBudget metadata: name: zk-pdb spec: minAvailable: 2 # ä¿è¯è‡³å°‘2ä¸ªPodå¯ç”¨ selector: matchLabels: app: zookeeper è¶…å–åœºæ™¯ä¸‹çš„ä¼˜åŒ–æŠ€å·§ linkCPUç»‘æ ¸ï¼ˆCPU Pinningï¼‰ link é—®é¢˜ï¼šè¶…å–å¯èƒ½å¯¼è‡´CPUç¼“å­˜é¢‘ç¹å¤±æ•ˆï¼Œé™ä½æ€§èƒ½ã€‚ æ–¹æ¡ˆï¼šå¯¹å»¶è¿Ÿæ•æ„Ÿå‹Podç»‘å®šç‰¹å®šæ ¸å¿ƒï¼š resources: limits: cpu: \"2\" affinity: nodeAffinity: {...} podAntiAffinity: {...} å†…å­˜å¤§é¡µï¼ˆHugePagesï¼‰ link é—®é¢˜ï¼šå¸¸è§„4KBå†…å­˜é¡µåœ¨è¶…å–æ—¶å¯èƒ½å¼•å‘TLBæŠ–åŠ¨ã€‚ æ–¹æ¡ˆï¼šä¸ºæ•°æ®åº“ç­‰åº”ç”¨åˆ†é…å¤§é¡µå†…å­˜ï¼š resources: limits: memory: \"2Gi\" hugepages-2Mi: \"1Gi\" cgroup v2å¢å¼ºéš”ç¦» link ç‰¹æ€§ï¼š CPUæƒé‡ï¼šæ›¿ä»£cpu.sharesï¼Œæ›´ç²¾ç¡®æ§åˆ¶èµ„æºåˆ†é…ã€‚ å†…å­˜QoSï¼šé™åˆ¶å†…å­˜å›æ”¶ä¼˜å…ˆçº§ï¼Œå‡å°‘OOMæ¦‚ç‡ã€‚ å¯ç”¨æ–¹å¼ï¼š kubelet --cgroup-driver=systemd --cgroups-per-qos=true --enforce-node-allocatable=pods è¶…å–çš„æœ€ä½³å®è·µ linkèµ„æºè¶…å–æ˜¯ä¸€æŠŠåŒåˆƒå‰‘ï¼Œç”¨å¾—å¥½å¯ä»¥æ˜¾è‘—æå‡é›†ç¾¤æ•ˆç‡ï¼Œç”¨ä¸å¥½åˆ™å¯èƒ½å¯¼è‡´ç¨³å®šæ€§é—®é¢˜ã€‚æœ¬ç« å°†ç»“åˆç”Ÿäº§ç»éªŒï¼Œæ€»ç»“é€‚åˆè¶…å–çš„åœºæ™¯ã€é¿å…è¶…å–é™·é˜±çš„æ–¹æ³•ï¼Œä»¥åŠæ··åˆéƒ¨ç½²ç­–ç•¥ï¼Œå¸®åŠ©ä½ åœ¨å®‰å…¨è¾¹ç•Œå†…æœ€å¤§åŒ–èµ„æºåˆ©ç”¨ç‡ã€‚\né€‚åˆè¶…å–çš„åœºæ™¯ linkéå…³é”®ä¸šåŠ¡ link ä¸šåŠ¡ç±»å‹ è¶…å–å»ºè®® å¼€å‘/æµ‹è¯•ç¯å¢ƒ å…è®¸CPU/å†…å­˜è¶…å–ï¼Œå³ä½¿å‘ç”ŸOOM Killå½±å“ä¹Ÿæœ‰é™ CI/CDæµæ°´çº¿ æ„å»ºä»»åŠ¡å¯è¶…å–CPUï¼ŒåŠ é€Ÿä»»åŠ¡å®Œæˆï¼ˆé…åˆBestEffort QoSï¼‰ æ‰¹å¤„ç†ä½œä¸š æ—¥å¿—åˆ†æã€æ•°æ®æ¸…æ´—ç­‰çŸ­æ—¶ä»»åŠ¡ï¼Œé€‚åˆåŠ¨æ€è¶…å–ï¼ˆçªå‘èµ„æºéœ€æ±‚åé‡Šæ”¾ï¼‰ é…ç½®ç¤ºä¾‹ï¼ˆä½ä¼˜å…ˆçº§æ‰¹å¤„ç†Jobï¼‰ï¼š\napiVersion: batch/v1 kind: Job metadata: name: data-processor spec: template: spec: priorityClassName: low-priority # è®¾ç½®ä¸ºä½ä¼˜å…ˆçº§ containers: - name: processor resources: requests: cpu: \"0.5\" memory: \"512Mi\" limits: cpu: \"2\" memory: \"2Gi\" å¼¹æ€§ä¸šåŠ¡è´Ÿè½½ link ä¸šåŠ¡ç±»å‹ è¶…å–ç­–ç•¥ WebæœåŠ¡ æ ¹æ®æµé‡è§„å¾‹è¶…å–CPUï¼ˆæ—¥é—´é«˜å³°æ—¶çªå‘ï¼Œå¤œé—´è‡ªåŠ¨ç¼©å®¹ï¼‰ ç¼“å­˜æœåŠ¡ è¶…å–å†…å­˜ï¼ˆå¦‚Rediså®ä¾‹å†…å­˜limitsè®¾ä¸ºç‰©ç†å†…å­˜çš„120%ï¼Œä¾èµ–ç›‘æ§åŠæ—¶æ‰©å®¹ï¼‰ æ¶ˆæ¯é˜Ÿåˆ—æ¶ˆè´¹è€… æ¶ˆè´¹é˜Ÿåˆ—ç§¯å‹æ—¶ä¸´æ—¶è¶…å–CPUï¼Œå¿«é€Ÿæ¶ˆè´¹åé‡Šæ”¾èµ„æº æµé‡è‡ªé€‚åº”è¶…å–æ¶æ„ï¼š\ngraph LR HPA(Horizontal Pod Autoscaler) --\u003e|æ‰©ç¼©å®¹| Pod VPA(Vertical Pod Autoscaler) --\u003e|è°ƒæ•´requests/limits| Pod Prometheus --\u003e|ç›‘æ§æŒ‡æ ‡| HPA Prometheus --\u003e|å†å²æ•°æ®| VPA é¿å…è¶…å–é™·é˜±çš„ç¡¬æ€§è§„åˆ™ linkå†…å­˜è¶…å–çš„ç¦åŒº link ç¦æ­¢è¶…å–çš„åœºæ™¯ï¼š\næ•°æ®åº“ï¼ˆMySQL/PostgreSQLç­‰ï¼‰â€”â€” OOMå¯èƒ½å¯¼è‡´æ•°æ®æŸåã€‚ æœ‰çŠ¶æ€æœåŠ¡ï¼ˆå¦‚Etcdã€ZooKeeperï¼‰â€”â€” å†…å­˜ä¸è¶³ç ´åé›†ç¾¤ä¸€è‡´æ€§ã€‚ å®æ—¶éŸ³è§†é¢‘å¤„ç†â€”â€” å†…å­˜æŠ–åŠ¨å¼•å‘å¡é¡¿æˆ–ä¸­æ–­ã€‚ å®‰å…¨æ›¿ä»£æ–¹æ¡ˆï¼š\n# æ•°æ®åº“Podçš„é…ç½®ç¤ºä¾‹ï¼ˆç¦æ­¢è¶…å–ï¼‰ resources: requests: memory: \"8Gi\" limits: memory: \"8Gi\" # requests == limits â†’ Guaranteed QoS CPUè¶…å–çš„ç¼“å†²ç­–ç•¥ link è®¾ç½®Throttlingå‘Šè­¦é˜ˆå€¼ï¼š # å½“CPUé™æµæ—¶é—´å æ¯”è¶…è¿‡10%æ—¶å‘Šè­¦ sum(rate(container_cpu_cfs_throttled_seconds_total[5m])) by (pod) / sum(rate(container_cpu_usage_seconds_total[5m])) by (pod) \u003e 0.1 å…³é”®Podçš„CPUç»‘å®šï¼š affinity: nodeAffinity: {...} resources: limits: cpu: \"2\" requests: cpu: \"2\" å…¨å±€èµ„æºé…é¢ï¼ˆResourceQuotaï¼‰ linké€šè¿‡ResourceQuotaé™åˆ¶Namespaceçº§åˆ«çš„è¶…å–æ€»é‡ï¼Œé¿å…å•ä¸ªå›¢é˜Ÿè¿‡åº¦å ç”¨èµ„æºï¼š\napiVersion: v1 kind: ResourceQuota metadata: name: oversell-quota spec: hard: requests.cpu: \"100\" # æ‰€æœ‰Podçš„requestsæ€»å’Œä¸è¶…è¿‡100æ ¸ limits.cpu: \"200\" # æ‰€æœ‰Podçš„limitsæ€»å’Œä¸è¶…è¿‡200æ ¸ï¼ˆè¶…å–æ¯”ä¾‹2:1ï¼‰ requests.memory: 200Gi limits.memory: 300Gi # å†…å­˜è¶…å–æ¯”ä¾‹1.5:1 æ··åˆéƒ¨ç½²ç­–ç•¥ linkèŠ‚ç‚¹åˆ†ç»„ç®¡ç† link èŠ‚ç‚¹æ±  è¶…å–ç­–ç•¥ æ ‡ç­¾é€‰æ‹©å™¨ç¤ºä¾‹ critical-nodes ç¦æ­¢è¶…å–ï¼ˆGuaranteed QoSä¸“ç”¨ï¼‰ node-role.kubernetes.io/critical=true oversell-nodes å…è®¸CPU/å†…å­˜è¶…å–ï¼ˆè¿è¡Œéå…³é”®ä¸šåŠ¡ï¼‰ node-role.kubernetes.io/oversell=true è°ƒåº¦ç¤ºä¾‹ï¼š\napiVersion: apps/v1 kind: Deployment metadata: name: nginx spec: template: spec: nodeSelector: node-role.kubernetes.io/oversell: \"true\" # æŒ‡å®šè°ƒåº¦åˆ°è¶…å–èŠ‚ç‚¹ ä¼˜å…ˆçº§ä¸é©±é€ååŒ link å…³é”®ä¸šåŠ¡ï¼š è®¾ç½®priorityClassName: system-cluster-criticalï¼ˆKuberneteså†…ç½®æœ€é«˜ä¼˜å…ˆçº§ï¼‰ã€‚ é…ç½®podAntiAffinityé¿å…ä¸å…¶ä»–é«˜è´Ÿè½½PodåŒèŠ‚ç‚¹ã€‚ ä½ä¼˜å…ˆçº§ä»»åŠ¡ï¼š å…è®¸è¢«é©±é€ï¼ˆpriorityClassName: low-priorityï¼‰ã€‚ è®¾ç½®restartPolicy: OnFailureåº”å¯¹OOM Killã€‚ å®Œæ•´ç¤ºä¾‹ï¼š\napiVersion: apps/v1 kind: Deployment metadata: name: web-service spec: template: spec: priorityClassName: high-priority affinity: podAntiAffinity: requiredDuringSchedulingIgnoredDuringExecution: - labelSelector: matchExpressions: - key: app operator: In values: [\"redis\"] topologyKey: kubernetes.io/hostname containers: - name: nginx resources: requests: cpu: \"2\" memory: \"4Gi\" limits: cpu: \"2\" memory: \"4Gi\" è¶…å–å®æ–½çš„æ¸è¿›å¼éªŒè¯ linkå››é˜¶æ®µä¸Šçº¿æµç¨‹ link è§‚å¯ŸæœŸï¼ˆ1å‘¨ï¼‰ï¼š é‡‡é›†ç°æœ‰ä¸šåŠ¡çš„çœŸå®èµ„æºä½¿ç”¨æ›²çº¿ï¼ˆå°¤å…¶å…³æ³¨æ³¢è°·æ—¶æ®µï¼‰ã€‚ å°è§„æ¨¡æµ‹è¯•ï¼ˆ2å‘¨ï¼‰ï¼š åœ¨devå‘½åç©ºé—´å¯¹éå…³é”®Podå¯ç”¨è¶…å–ï¼Œç›‘æ§Throttling/OOMäº‹ä»¶ã€‚ æ»šåŠ¨æ¨å¹¿ï¼ˆ1ä¸ªæœˆï¼‰ï¼š æŒ‰ä¸šåŠ¡ä¼˜å…ˆçº§åˆ†æ‰¹è°ƒæ•´requests/limitsï¼Œä¼˜å…ˆå¤„ç†æ‰¹å¤„ç†ä»»åŠ¡ã€‚ å…¨å±€ä¼˜åŒ–ï¼š ç»“åˆVPAåŠ¨æ€è°ƒæ•´è¶…å–æ¯”ä¾‹ï¼Œå®šæœŸå®¡æŸ¥ç›‘æ§æ•°æ®ã€‚ éªŒæ”¶æŒ‡æ ‡ï¼š\nCPUå¹³å‡åˆ©ç”¨ç‡ä»30%æå‡è‡³60%+ï¼Œä¸”Throttlingç‡\u003c5%ã€‚ å†…å­˜OOM Killäº‹ä»¶æ¯å‘¨â‰¤1æ¬¡ï¼ˆä»…å‘ç”Ÿåœ¨ä½ä¼˜å…ˆçº§Podï¼‰ã€‚ æ€»ç»“ï¼šè¶…å–çš„å®‰å…¨è¾¹ç•Œ link âœ… å¯ä»¥åšï¼š å¯¹æ— çŠ¶æ€ã€å¯ä¸­æ–­çš„ä¸šåŠ¡è¶…å–CPUã€‚ åœ¨ç›‘æ§å®Œå¤‡çš„æƒ…å†µä¸‹è¶…å–å†…å­˜ï¼ˆé¢„ç•™20%ç¼“å†²ï¼‰ã€‚ âŒ ä¸è¦åšï¼š è¶…å–æ•°æ®åº“ã€æœ‰çŠ¶æ€æœåŠ¡çš„å†…å­˜ã€‚ åœ¨æœªè®¾ç½®PriorityClasså’ŒResourceQuotaæ—¶å…¨å±€è¶…å–ã€‚ "
            }
        );
    index.add(
            {
                id:  50 ,
                href: "\/docs\/information\/software\/cloud\/autoscale\/",
                title: "Cluster Autoscaler",
                description: "1. ä»€ä¹ˆæ˜¯ Cluster Autoscalerï¼Ÿ linkKubernetes Cluster Autoscalerï¼ˆCAï¼‰ æ˜¯ä¸€ä¸ªå¼€æºçš„ Kubernetes ç»„ä»¶ï¼Œç”¨äº è‡ªåŠ¨è°ƒæ•´é›†ç¾¤çš„èŠ‚ç‚¹æ•°é‡ï¼Œä»¥ç¡®ä¿ Pod èƒ½å¤Ÿè¢«é«˜æ•ˆè°ƒåº¦ï¼ŒåŒæ—¶ä¼˜åŒ–èµ„æºåˆ©ç”¨ç‡ï¼Œé™ä½æˆæœ¬ã€‚\næ ¸å¿ƒåŠŸèƒ½ link è‡ªåŠ¨æ‰©å®¹ï¼šå½“ Pod å› èµ„æºä¸è¶³æ— æ³•è°ƒåº¦æ—¶ï¼Œè‡ªåŠ¨å¢åŠ èŠ‚ç‚¹ã€‚ è‡ªåŠ¨ç¼©å®¹ï¼šå½“èŠ‚ç‚¹åˆ©ç”¨ç‡è¿‡ä½æ—¶ï¼Œå®‰å…¨ç§»é™¤ç©ºé—²èŠ‚ç‚¹ã€‚ å¤šäº‘æ”¯æŒï¼šå…¼å®¹ AWSã€GCPã€Azureã€é˜¿é‡Œäº‘ã€è…¾è®¯äº‘ç­‰ä¸»æµäº‘å¹³å°ã€‚ 2. ä¸ºä»€ä¹ˆéœ€è¦ Cluster Autoscalerï¼Ÿ linkåœ¨ Kubernetes é›†ç¾¤ä¸­ï¼ŒPod çš„è´Ÿè½½é€šå¸¸æ˜¯åŠ¨æ€å˜åŒ–çš„ï¼š\nçªå‘æµé‡ï¼šä¸šåŠ¡é«˜å³°æ—¶ï¼Œéœ€è¦å¿«é€Ÿæ‰©å®¹èŠ‚ç‚¹ä»¥æ‰¿è½½æ›´å¤š Podã€‚ èµ„æºæµªè´¹ï¼šä½å³°æœŸæ—¶ï¼Œéƒ¨åˆ†èŠ‚ç‚¹å¯èƒ½é—²ç½®ï¼Œä½†ä»éœ€æ”¯ä»˜è´¹ç”¨ã€‚ æ‰‹åŠ¨ç®¡ç†èŠ‚ç‚¹çš„é—®é¢˜ï¼š\nå“åº”æ…¢ï¼šäººå·¥è°ƒæ•´èŠ‚ç‚¹æ•°é‡æ— æ³•åº”å¯¹çªå‘æµé‡ã€‚ æˆæœ¬é«˜ï¼šå›ºå®šèŠ‚ç‚¹æ•°é‡å¯èƒ½å¯¼è‡´èµ„æºæµªè´¹æˆ–ä¸è¶³ã€‚ Cluster Autoscaler çš„è§£å†³æ–¹æ¡ˆï¼š\nè‡ªåŠ¨åŒ–ï¼šæ ¹æ® Pod éœ€æ±‚åŠ¨æ€è°ƒæ•´èŠ‚ç‚¹æ•°é‡ã€‚ æˆæœ¬ä¼˜åŒ–ï¼šå‡å°‘é—²ç½®èŠ‚ç‚¹ï¼ŒèŠ‚çœäº‘èµ„æºè´¹ç”¨ã€‚ 3. Cluster Autoscaler çš„å·¥ä½œåŸç† linkï¼ˆ1ï¼‰è§¦å‘æ‰©å®¹çš„æ¡ä»¶ link å½“ Kubernetes è°ƒåº¦å™¨ï¼ˆSchedulerï¼‰å‘ç° Pending Podï¼ˆå› èµ„æºä¸è¶³æ— æ³•è°ƒåº¦çš„ Podï¼‰æ—¶ï¼ŒCluster Autoscaler ä¼šæ£€æŸ¥ï¼š æ˜¯å¦æœ‰åˆé€‚çš„èŠ‚ç‚¹æ± ï¼ˆNode Poolï¼‰å¯ä»¥æ‰©å®¹ã€‚ æ‰©å®¹åæ˜¯å¦èƒ½æ»¡è¶³ Pod çš„èµ„æºéœ€æ±‚ï¼ˆCPUã€å†…å­˜ç­‰ï¼‰ã€‚ ï¼ˆ2ï¼‰è§¦å‘ç¼©å®¹çš„æ¡ä»¶ link å½“èŠ‚ç‚¹ é•¿æ—¶é—´åˆ©ç”¨ç‡è¿‡ä½ï¼ˆé»˜è®¤ä½äº 50%ï¼‰æ—¶ï¼ŒCluster Autoscaler ä¼šå°è¯•ç¼©å®¹ï¼š æ£€æŸ¥èŠ‚ç‚¹ä¸Šçš„ Pod æ˜¯å¦å¯ä»¥è¢«å®‰å…¨è¿ç§»ï¼ˆå¦‚ä½¿ç”¨ PodDisruptionBudget ä¿æŠ¤å…³é”®åº”ç”¨ï¼‰ã€‚ ç¡®ä¿ç¼©å®¹ä¸ä¼šå¯¼è‡´å…¶ä»–èŠ‚ç‚¹è¿‡è½½ã€‚ ï¼ˆ3ï¼‰ä¸äº‘å‚å•†çš„äº¤äº’ linkCluster Autoscaler é€šè¿‡è°ƒç”¨ äº‘å‚å•†çš„ APIï¼ˆå¦‚ AWS ASGã€Azure VMSSã€GCP MIGï¼‰è°ƒæ•´èŠ‚ç‚¹æ•°é‡ï¼š\n",
                content: "1. ä»€ä¹ˆæ˜¯ Cluster Autoscalerï¼Ÿ linkKubernetes Cluster Autoscalerï¼ˆCAï¼‰ æ˜¯ä¸€ä¸ªå¼€æºçš„ Kubernetes ç»„ä»¶ï¼Œç”¨äº è‡ªåŠ¨è°ƒæ•´é›†ç¾¤çš„èŠ‚ç‚¹æ•°é‡ï¼Œä»¥ç¡®ä¿ Pod èƒ½å¤Ÿè¢«é«˜æ•ˆè°ƒåº¦ï¼ŒåŒæ—¶ä¼˜åŒ–èµ„æºåˆ©ç”¨ç‡ï¼Œé™ä½æˆæœ¬ã€‚\næ ¸å¿ƒåŠŸèƒ½ link è‡ªåŠ¨æ‰©å®¹ï¼šå½“ Pod å› èµ„æºä¸è¶³æ— æ³•è°ƒåº¦æ—¶ï¼Œè‡ªåŠ¨å¢åŠ èŠ‚ç‚¹ã€‚ è‡ªåŠ¨ç¼©å®¹ï¼šå½“èŠ‚ç‚¹åˆ©ç”¨ç‡è¿‡ä½æ—¶ï¼Œå®‰å…¨ç§»é™¤ç©ºé—²èŠ‚ç‚¹ã€‚ å¤šäº‘æ”¯æŒï¼šå…¼å®¹ AWSã€GCPã€Azureã€é˜¿é‡Œäº‘ã€è…¾è®¯äº‘ç­‰ä¸»æµäº‘å¹³å°ã€‚ 2. ä¸ºä»€ä¹ˆéœ€è¦ Cluster Autoscalerï¼Ÿ linkåœ¨ Kubernetes é›†ç¾¤ä¸­ï¼ŒPod çš„è´Ÿè½½é€šå¸¸æ˜¯åŠ¨æ€å˜åŒ–çš„ï¼š\nçªå‘æµé‡ï¼šä¸šåŠ¡é«˜å³°æ—¶ï¼Œéœ€è¦å¿«é€Ÿæ‰©å®¹èŠ‚ç‚¹ä»¥æ‰¿è½½æ›´å¤š Podã€‚ èµ„æºæµªè´¹ï¼šä½å³°æœŸæ—¶ï¼Œéƒ¨åˆ†èŠ‚ç‚¹å¯èƒ½é—²ç½®ï¼Œä½†ä»éœ€æ”¯ä»˜è´¹ç”¨ã€‚ æ‰‹åŠ¨ç®¡ç†èŠ‚ç‚¹çš„é—®é¢˜ï¼š\nå“åº”æ…¢ï¼šäººå·¥è°ƒæ•´èŠ‚ç‚¹æ•°é‡æ— æ³•åº”å¯¹çªå‘æµé‡ã€‚ æˆæœ¬é«˜ï¼šå›ºå®šèŠ‚ç‚¹æ•°é‡å¯èƒ½å¯¼è‡´èµ„æºæµªè´¹æˆ–ä¸è¶³ã€‚ Cluster Autoscaler çš„è§£å†³æ–¹æ¡ˆï¼š\nè‡ªåŠ¨åŒ–ï¼šæ ¹æ® Pod éœ€æ±‚åŠ¨æ€è°ƒæ•´èŠ‚ç‚¹æ•°é‡ã€‚ æˆæœ¬ä¼˜åŒ–ï¼šå‡å°‘é—²ç½®èŠ‚ç‚¹ï¼ŒèŠ‚çœäº‘èµ„æºè´¹ç”¨ã€‚ 3. Cluster Autoscaler çš„å·¥ä½œåŸç† linkï¼ˆ1ï¼‰è§¦å‘æ‰©å®¹çš„æ¡ä»¶ link å½“ Kubernetes è°ƒåº¦å™¨ï¼ˆSchedulerï¼‰å‘ç° Pending Podï¼ˆå› èµ„æºä¸è¶³æ— æ³•è°ƒåº¦çš„ Podï¼‰æ—¶ï¼ŒCluster Autoscaler ä¼šæ£€æŸ¥ï¼š æ˜¯å¦æœ‰åˆé€‚çš„èŠ‚ç‚¹æ± ï¼ˆNode Poolï¼‰å¯ä»¥æ‰©å®¹ã€‚ æ‰©å®¹åæ˜¯å¦èƒ½æ»¡è¶³ Pod çš„èµ„æºéœ€æ±‚ï¼ˆCPUã€å†…å­˜ç­‰ï¼‰ã€‚ ï¼ˆ2ï¼‰è§¦å‘ç¼©å®¹çš„æ¡ä»¶ link å½“èŠ‚ç‚¹ é•¿æ—¶é—´åˆ©ç”¨ç‡è¿‡ä½ï¼ˆé»˜è®¤ä½äº 50%ï¼‰æ—¶ï¼ŒCluster Autoscaler ä¼šå°è¯•ç¼©å®¹ï¼š æ£€æŸ¥èŠ‚ç‚¹ä¸Šçš„ Pod æ˜¯å¦å¯ä»¥è¢«å®‰å…¨è¿ç§»ï¼ˆå¦‚ä½¿ç”¨ PodDisruptionBudget ä¿æŠ¤å…³é”®åº”ç”¨ï¼‰ã€‚ ç¡®ä¿ç¼©å®¹ä¸ä¼šå¯¼è‡´å…¶ä»–èŠ‚ç‚¹è¿‡è½½ã€‚ ï¼ˆ3ï¼‰ä¸äº‘å‚å•†çš„äº¤äº’ linkCluster Autoscaler é€šè¿‡è°ƒç”¨ äº‘å‚å•†çš„ APIï¼ˆå¦‚ AWS ASGã€Azure VMSSã€GCP MIGï¼‰è°ƒæ•´èŠ‚ç‚¹æ•°é‡ï¼š\næ‰©å®¹ï¼šå¢åŠ èŠ‚ç‚¹æ± ä¸­çš„å®ä¾‹æ•°é‡ã€‚ ç¼©å®¹ï¼šé€‰æ‹©æœ€ç©ºé—²çš„èŠ‚ç‚¹è¿›è¡Œç§»é™¤ã€‚ 4. æ”¯æŒçš„äº‘å¹³å° link äº‘å¹³å° ä¾èµ–ç»„ä»¶ å¤‡æ³¨ AWS EC2 Auto Scaling Groups (ASG) æ”¯æŒ Spot å®ä¾‹ GCP Managed Instance Groups (MIG) å†…ç½® GKE æ”¯æŒ Azure VM Scale Sets (VMSS) é€‚ç”¨äº AKS é˜¿é‡Œäº‘ å¼¹æ€§ä¼¸ç¼©ç»„ (ESS) éœ€é…ç½® RAM æƒé™ è…¾è®¯äº‘ å¼¹æ€§ä¼¸ç¼© (AS) éœ€é€‚é… æœ¬åœ°/è£¸é‡‘å± éœ€è‡ªå®šä¹‰å®ç° è¾ƒå°‘ä½¿ç”¨ 5. å¦‚ä½•éƒ¨ç½² Cluster Autoscalerï¼Ÿ linkï¼ˆ1ï¼‰å‰ç½®æ¡ä»¶ link Kubernetes é›†ç¾¤ï¼ˆç‰ˆæœ¬ â‰¥ 1.14ï¼‰ã€‚ é…ç½®å¥½ èŠ‚ç‚¹ç»„/è‡ªåŠ¨ä¼¸ç¼©ç»„ï¼ˆå¦‚ AWS ASGï¼‰ã€‚ ç¡®ä¿èŠ‚ç‚¹æœ‰è¶³å¤Ÿçš„ IAM æƒé™ï¼ˆå¦‚ autoscaling:SetDesiredCapacityï¼‰ã€‚ ï¼ˆ2ï¼‰å®‰è£…æ–¹å¼ï¼ˆä»¥ AWS EKS ä¸ºä¾‹ï¼‰ linkæ–¹å¼ 1ï¼šHelm å®‰è£… link helm repo add autoscaler https://kubernetes.github.io/autoscaler helm install cluster-autoscaler autoscaler/cluster-autoscaler \\ --namespace kube-system \\ --set \"autoDiscovery.clusterName=\" \\ --set \"awsRegion=\" \\ --set \"rbac.create=true\" æ–¹å¼ 2ï¼šç›´æ¥éƒ¨ç½² YAML link apiVersion: apps/v1 kind: Deployment metadata: name: cluster-autoscaler namespace: kube-system spec: replicas: 1 selector: matchLabels: app: cluster-autoscaler template: metadata: labels: app: cluster-autoscaler spec: containers: - name: cluster-autoscaler image: k8s.gcr.io/autoscaling/cluster-autoscaler:v1.25.0 command: - ./cluster-autoscaler - --cloud-provider=aws - --node-group-auto-discovery=asg:tag=k8s.io/cluster-autoscaler/enabled, - --balance-similar-node-groups - --skip-nodes-with-system-pods=false serviceAccountName: cluster-autoscaler ï¼ˆ3ï¼‰å…³é”®å‚æ•°é…ç½® link å‚æ•° è¯´æ˜ --scale-down-utilization-threshold ç¼©å®¹é˜ˆå€¼ï¼ˆé»˜è®¤ 0.5ï¼Œå³ 50% åˆ©ç”¨ç‡ï¼‰ --expander æ‰©å®¹ç­–ç•¥ï¼ˆleast-waste / random / priorityï¼‰ --skip-nodes-with-system-pods æ˜¯å¦è·³è¿‡å«ç³»ç»Ÿ Pod çš„èŠ‚ç‚¹ï¼ˆé»˜è®¤ trueï¼‰ 6. æœ€ä½³å®è·µ linkï¼ˆ1ï¼‰åˆç†è®¾ç½® Pod èµ„æºè¯·æ±‚ link resources: requests: cpu: \"500m\" memory: \"512Mi\" é¿å…æœªè®¾ç½® requestsï¼Œå¦åˆ™ CA æ— æ³•æ­£ç¡®è®¡ç®—èµ„æºéœ€æ±‚ã€‚ ï¼ˆ2ï¼‰ä½¿ç”¨ PodDisruptionBudget (PDB) ä¿æŠ¤å…³é”®åº”ç”¨ link apiVersion: policy/v1 kind: PodDisruptionBudget metadata: name: myapp-pdb spec: minAvailable: 1 # ç¡®ä¿è‡³å°‘ 1 ä¸ª Pod å¯ç”¨ selector: matchLabels: app: myapp ï¼ˆ3ï¼‰ç»“åˆ HPAï¼ˆHorizontal Pod Autoscalerï¼‰ link HPA è´Ÿè´£ Pod æ¨ªå‘æ‰©ç¼©ï¼ŒCA è´Ÿè´£èŠ‚ç‚¹æ‰©ç¼©ï¼Œä¸¤è€…é…åˆå®ç°å…¨è‡ªåŠ¨å¼¹æ€§ä¼¸ç¼©ã€‚ ï¼ˆ4ï¼‰ç›‘æ§ä¸å‘Šè­¦ link ä½¿ç”¨ Prometheus + Grafana ç›‘æ§ï¼š kube_pod_status_unschedulableï¼ˆPending Pod æ•°é‡ï¼‰ã€‚ cluster_autoscaler_nodes_countï¼ˆèŠ‚ç‚¹å˜åŒ–è¶‹åŠ¿ï¼‰ã€‚ 7. å¸¸è§é—®é¢˜ linkQ1ï¼šCluster Autoscaler å’Œ HPA æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ link HPAï¼šè°ƒæ•´ Pod å‰¯æœ¬æ•°é‡ï¼ˆæ°´å¹³æ‰©ç¼©å®¹ï¼‰ã€‚ CAï¼šè°ƒæ•´èŠ‚ç‚¹æ•°é‡ï¼ˆå‚ç›´æ‰©ç¼©å®¹ï¼‰ã€‚ Q2ï¼šä¸ºä»€ä¹ˆèŠ‚ç‚¹æ²¡æœ‰è‡ªåŠ¨ç¼©å®¹ï¼Ÿ link å¯èƒ½åŸå› ï¼š èŠ‚ç‚¹ä¸Šæœ‰ ä¸å¯è¿ç§»çš„ Podï¼ˆå¦‚ kube-system ç»„ä»¶ï¼‰ã€‚ æœªæ»¡è¶³ scale-down-utilization-thresholdã€‚ PDB é˜»æ­¢ Pod è¢«é©±é€ã€‚ Q3ï¼šå¦‚ä½•é˜²æ­¢é¢‘ç¹æ‰©ç¼©å®¹ï¼Ÿ link è°ƒæ•´ --scale-down-delay-after-addï¼ˆé»˜è®¤ 10mï¼‰å’Œ --scale-down-unneeded-timeï¼ˆé»˜è®¤ 10mï¼‰ã€‚ 8. æ€»ç»“ linkKubernetes Cluster Autoscaler æ˜¯æ„å»ºå¼¹æ€§ã€é«˜å¯ç”¨é›†ç¾¤çš„å…³é”®ç»„ä»¶ï¼Œèƒ½å¤Ÿï¼š âœ… è‡ªåŠ¨ä¼˜åŒ–èŠ‚ç‚¹æ•°é‡ï¼Œæé«˜èµ„æºåˆ©ç”¨ç‡ã€‚\nâœ… é™ä½æˆæœ¬ï¼Œå‡å°‘é—²ç½®èŠ‚ç‚¹å¼€é”€ã€‚\nâœ… æ”¯æŒå¤šäº‘ç¯å¢ƒï¼Œä¸ä¸»æµäº‘å¹³å°æ— ç¼é›†æˆã€‚\né€‚ç”¨äº çªå‘æµé‡ã€CI/CDã€å¤§æ•°æ®è®¡ç®— ç­‰åŠ¨æ€è´Ÿè½½åœºæ™¯ã€‚å»ºè®®ç»“åˆ HPA å’Œ PDB å®ç°æ›´å®Œå–„çš„è‡ªåŠ¨æ‰©ç¼©ç­–ç•¥ã€‚\nå‚è€ƒé“¾æ¥ link å®˜æ–¹ GitHub AWS EKS æœ€ä½³å®è·µ GKE è‡ªåŠ¨æ‰©ç¼©æ–‡æ¡£ "
            }
        );
    index.add(
            {
                id:  51 ,
                href: "\/docs\/information\/software\/cloud\/k8s_rs_manager\/taint_toleration\/",
                title: "Taint \u0026 Toleration",
                description: "Taintï¼ˆæ±¡ç‚¹ï¼‰å’Œ Tolerationï¼ˆå®¹å¿ï¼‰å¯ä»¥ä½œç”¨äº node å’Œ pod ä¸Šï¼Œå…¶ç›®çš„æ˜¯ä¼˜åŒ– pod åœ¨é›†ç¾¤é—´çš„è°ƒåº¦ï¼Œè¿™è·ŸèŠ‚ç‚¹äº²å’Œæ€§ç±»ä¼¼ï¼Œåªä¸è¿‡å®ƒä»¬ä½œç”¨çš„æ–¹å¼ç›¸åï¼Œå…·æœ‰ taint çš„ node å’Œ pod æ˜¯äº’æ–¥å…³ç³»ï¼Œè€Œå…·æœ‰èŠ‚ç‚¹äº²å’Œæ€§å…³ç³»çš„ node å’Œ pod æ˜¯ç›¸å¸çš„ã€‚å¦å¤–è¿˜æœ‰å¯ä»¥ç»™ node èŠ‚ç‚¹è®¾ç½® labelï¼Œé€šè¿‡ç»™ pod è®¾ç½® nodeSelector å°† pod è°ƒåº¦åˆ°å…·æœ‰åŒ¹é…æ ‡ç­¾çš„èŠ‚ç‚¹ä¸Šã€‚\nTaint å’Œ toleration ç›¸äº’é…åˆï¼Œå¯ä»¥ç”¨æ¥é¿å… pod è¢«åˆ†é…åˆ°ä¸åˆé€‚çš„èŠ‚ç‚¹ä¸Šã€‚æ¯ä¸ªèŠ‚ç‚¹ä¸Šéƒ½å¯ä»¥åº”ç”¨ä¸€ä¸ªæˆ–å¤šä¸ª taint ï¼Œè¿™è¡¨ç¤ºå¯¹äºé‚£äº›ä¸èƒ½å®¹å¿è¿™äº› taint çš„ podï¼Œæ˜¯ä¸ä¼šè¢«è¯¥èŠ‚ç‚¹æ¥å—çš„ã€‚å¦‚æœå°† toleration åº”ç”¨äº pod ä¸Šï¼Œåˆ™è¡¨ç¤ºè¿™äº› pod å¯ä»¥ï¼ˆä½†ä¸è¦æ±‚ï¼‰è¢«è°ƒåº¦åˆ°å…·æœ‰ç›¸åº” taint çš„èŠ‚ç‚¹ä¸Šã€‚\nç¤ºä¾‹ linkä»¥ä¸‹åˆ†åˆ«ä»¥ä¸º node è®¾ç½® taint å’Œä¸º pod è®¾ç½® toleration ä¸ºä¾‹ã€‚\nä¸º node è®¾ç½® taint linkä¸º node1 è®¾ç½® taintï¼š\nkubectl taint nodes node1 key1=value1:NoSchedule kubectl taint nodes node1 key1=value1:NoExecute kubectl taint nodes node1 key2=value2:NoSchedule åˆ é™¤ä¸Šé¢çš„ taintï¼š\n",
                content: "Taintï¼ˆæ±¡ç‚¹ï¼‰å’Œ Tolerationï¼ˆå®¹å¿ï¼‰å¯ä»¥ä½œç”¨äº node å’Œ pod ä¸Šï¼Œå…¶ç›®çš„æ˜¯ä¼˜åŒ– pod åœ¨é›†ç¾¤é—´çš„è°ƒåº¦ï¼Œè¿™è·ŸèŠ‚ç‚¹äº²å’Œæ€§ç±»ä¼¼ï¼Œåªä¸è¿‡å®ƒä»¬ä½œç”¨çš„æ–¹å¼ç›¸åï¼Œå…·æœ‰ taint çš„ node å’Œ pod æ˜¯äº’æ–¥å…³ç³»ï¼Œè€Œå…·æœ‰èŠ‚ç‚¹äº²å’Œæ€§å…³ç³»çš„ node å’Œ pod æ˜¯ç›¸å¸çš„ã€‚å¦å¤–è¿˜æœ‰å¯ä»¥ç»™ node èŠ‚ç‚¹è®¾ç½® labelï¼Œé€šè¿‡ç»™ pod è®¾ç½® nodeSelector å°† pod è°ƒåº¦åˆ°å…·æœ‰åŒ¹é…æ ‡ç­¾çš„èŠ‚ç‚¹ä¸Šã€‚\nTaint å’Œ toleration ç›¸äº’é…åˆï¼Œå¯ä»¥ç”¨æ¥é¿å… pod è¢«åˆ†é…åˆ°ä¸åˆé€‚çš„èŠ‚ç‚¹ä¸Šã€‚æ¯ä¸ªèŠ‚ç‚¹ä¸Šéƒ½å¯ä»¥åº”ç”¨ä¸€ä¸ªæˆ–å¤šä¸ª taint ï¼Œè¿™è¡¨ç¤ºå¯¹äºé‚£äº›ä¸èƒ½å®¹å¿è¿™äº› taint çš„ podï¼Œæ˜¯ä¸ä¼šè¢«è¯¥èŠ‚ç‚¹æ¥å—çš„ã€‚å¦‚æœå°† toleration åº”ç”¨äº pod ä¸Šï¼Œåˆ™è¡¨ç¤ºè¿™äº› pod å¯ä»¥ï¼ˆä½†ä¸è¦æ±‚ï¼‰è¢«è°ƒåº¦åˆ°å…·æœ‰ç›¸åº” taint çš„èŠ‚ç‚¹ä¸Šã€‚\nç¤ºä¾‹ linkä»¥ä¸‹åˆ†åˆ«ä»¥ä¸º node è®¾ç½® taint å’Œä¸º pod è®¾ç½® toleration ä¸ºä¾‹ã€‚\nä¸º node è®¾ç½® taint linkä¸º node1 è®¾ç½® taintï¼š\nkubectl taint nodes node1 key1=value1:NoSchedule kubectl taint nodes node1 key1=value1:NoExecute kubectl taint nodes node1 key2=value2:NoSchedule åˆ é™¤ä¸Šé¢çš„ taintï¼š\nkubectl taint nodes node1 key1:NoSchedule- kubectl taint nodes node1 key1:NoExecute- kubectl taint nodes node1 key2:NoSchedule- æŸ¥çœ‹ node1 ä¸Šçš„ taintï¼š\nkubectl describe nodes node1 ä¸º pod è®¾ç½® toleration linkåªè¦åœ¨ pod çš„ spec ä¸­è®¾ç½® tolerations å­—æ®µå³å¯ï¼Œå¯ä»¥æœ‰å¤šä¸ª keyï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š\ntolerations: - key: \"key1\" operator: \"Equal\" value: \"value1\" effect: \"NoSchedule\" - key: \"key1\" operator: \"Equal\" value: \"value1\" effect: \"NoExecute\" - key: \"node.alpha.kubernetes.io/unreachable\" operator: \"Exists\" effect: \"NoExecute\" tolerationSeconds: 6000 value çš„å€¼å¯ä»¥ä¸º NoScheduleã€ PreferNoSchedule æˆ– NoExecuteã€‚ tolerationSeconds æ˜¯å½“ pod éœ€è¦è¢«é©±é€æ—¶ï¼Œå¯ä»¥ç»§ç»­åœ¨ node ä¸Šè¿è¡Œçš„æ—¶é—´ã€‚ è¯¦ç»†ä½¿ç”¨æ–¹æ³•è¯·å‚è€ƒå®˜æ–¹æ–‡æ¡£ã€‚\nå‚è€ƒ link Taints and Tolerations - kuberentes.io "
            }
        );
    index.add(
            {
                id:  52 ,
                href: "\/docs\/information\/software\/cloud\/k8s_rs_manager\/garbage-collection\/",
                title: "åƒåœ¾å›æ”¶",
                description: "Kubernetes åƒåœ¾æ”¶é›†å™¨çš„è§’è‰²æ˜¯åˆ é™¤æŒ‡å®šçš„å¯¹è±¡ï¼Œè¿™äº›å¯¹è±¡æ›¾ç»æœ‰ä½†ä»¥åä¸å†æ‹¥æœ‰ Owner äº†ã€‚\næ³¨æ„ï¼šåƒåœ¾æ”¶é›†æ˜¯ beta ç‰¹æ€§ï¼Œåœ¨ Kubernetes 1.4 åŠä»¥ä¸Šç‰ˆæœ¬é»˜è®¤å¯ç”¨ã€‚\nOwner å’Œ Dependent linkä¸€äº› Kubernetes å¯¹è±¡æ˜¯å…¶å®ƒä¸€äº›çš„ Ownerã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ª ReplicaSet æ˜¯ä¸€ç»„ Pod çš„ Ownerã€‚å…·æœ‰ Owner çš„å¯¹è±¡è¢«ç§°ä¸ºæ˜¯ Owner çš„ Dependentã€‚æ¯ä¸ª Dependent å¯¹è±¡å…·æœ‰ä¸€ä¸ªæŒ‡å‘å…¶æ‰€å±å¯¹è±¡çš„ metadata.ownerReferences å­—æ®µã€‚\næœ‰æ—¶ï¼ŒKubernetes ä¼šè‡ªåŠ¨è®¾ç½® ownerReference çš„å€¼ã€‚ä¾‹å¦‚ï¼Œå½“åˆ›å»ºä¸€ä¸ª ReplicaSet æ—¶ï¼ŒKubernetes è‡ªåŠ¨è®¾ç½® ReplicaSet ä¸­æ¯ä¸ª Pod çš„ ownerReference å­—æ®µå€¼ã€‚åœ¨ 1.6 ç‰ˆæœ¬ï¼ŒKubernetes ä¼šè‡ªåŠ¨ä¸ºä¸€äº›å¯¹è±¡è®¾ç½® ownerReference çš„å€¼ï¼Œè¿™äº›å¯¹è±¡æ˜¯ç”± ReplicationControllerã€ReplicaSetã€StatefulSetã€DaemonSet å’Œ Deployment æ‰€åˆ›å»ºæˆ–ç®¡ç†ã€‚\nä¹Ÿå¯ä»¥é€šè¿‡æ‰‹åŠ¨è®¾ç½® ownerReference çš„å€¼ï¼Œæ¥æŒ‡å®š Owner å’Œ Dependent ä¹‹é—´çš„å…³ç³»ã€‚\nè¿™æœ‰ä¸€ä¸ªé…ç½®æ–‡ä»¶my-repset.yamlï¼Œè¡¨ç¤ºä¸€ä¸ªå…·æœ‰ 3 ä¸ª Pod çš„ ReplicaSetï¼š\n# k8s \u003e= 1.16 ä½¿ç”¨ä¸‹é¢æ³¨é‡Š https://stackoverflow.com/questions/64412740/no-matches-for-kind-replicaset-in-version-extensions-v1beta1/64412990#64412990 # apiVersion: apps/v1 # k8s \u003c 1.16 ä½¿ç”¨ä¸‹é¢é…ç½® apiVersion: extensions/v1beta1 kind: ReplicaSet metadata: name: my-repset spec: replicas: 3 selector: matchLabels: pod-is-for: garbage-collection-example template: metadata: labels: pod-is-for: garbage-collection-example spec: containers: - name: nginx image: nginx å¦‚æœåˆ›å»ºè¯¥ ReplicaSetï¼Œç„¶åæŸ¥çœ‹ Pod çš„ metadata å­—æ®µï¼Œèƒ½å¤Ÿçœ‹åˆ° OwnerReferences å­—æ®µï¼š\n",
                content: "Kubernetes åƒåœ¾æ”¶é›†å™¨çš„è§’è‰²æ˜¯åˆ é™¤æŒ‡å®šçš„å¯¹è±¡ï¼Œè¿™äº›å¯¹è±¡æ›¾ç»æœ‰ä½†ä»¥åä¸å†æ‹¥æœ‰ Owner äº†ã€‚\næ³¨æ„ï¼šåƒåœ¾æ”¶é›†æ˜¯ beta ç‰¹æ€§ï¼Œåœ¨ Kubernetes 1.4 åŠä»¥ä¸Šç‰ˆæœ¬é»˜è®¤å¯ç”¨ã€‚\nOwner å’Œ Dependent linkä¸€äº› Kubernetes å¯¹è±¡æ˜¯å…¶å®ƒä¸€äº›çš„ Ownerã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ª ReplicaSet æ˜¯ä¸€ç»„ Pod çš„ Ownerã€‚å…·æœ‰ Owner çš„å¯¹è±¡è¢«ç§°ä¸ºæ˜¯ Owner çš„ Dependentã€‚æ¯ä¸ª Dependent å¯¹è±¡å…·æœ‰ä¸€ä¸ªæŒ‡å‘å…¶æ‰€å±å¯¹è±¡çš„ metadata.ownerReferences å­—æ®µã€‚\næœ‰æ—¶ï¼ŒKubernetes ä¼šè‡ªåŠ¨è®¾ç½® ownerReference çš„å€¼ã€‚ä¾‹å¦‚ï¼Œå½“åˆ›å»ºä¸€ä¸ª ReplicaSet æ—¶ï¼ŒKubernetes è‡ªåŠ¨è®¾ç½® ReplicaSet ä¸­æ¯ä¸ª Pod çš„ ownerReference å­—æ®µå€¼ã€‚åœ¨ 1.6 ç‰ˆæœ¬ï¼ŒKubernetes ä¼šè‡ªåŠ¨ä¸ºä¸€äº›å¯¹è±¡è®¾ç½® ownerReference çš„å€¼ï¼Œè¿™äº›å¯¹è±¡æ˜¯ç”± ReplicationControllerã€ReplicaSetã€StatefulSetã€DaemonSet å’Œ Deployment æ‰€åˆ›å»ºæˆ–ç®¡ç†ã€‚\nä¹Ÿå¯ä»¥é€šè¿‡æ‰‹åŠ¨è®¾ç½® ownerReference çš„å€¼ï¼Œæ¥æŒ‡å®š Owner å’Œ Dependent ä¹‹é—´çš„å…³ç³»ã€‚\nè¿™æœ‰ä¸€ä¸ªé…ç½®æ–‡ä»¶my-repset.yamlï¼Œè¡¨ç¤ºä¸€ä¸ªå…·æœ‰ 3 ä¸ª Pod çš„ ReplicaSetï¼š\n# k8s \u003e= 1.16 ä½¿ç”¨ä¸‹é¢æ³¨é‡Š https://stackoverflow.com/questions/64412740/no-matches-for-kind-replicaset-in-version-extensions-v1beta1/64412990#64412990 # apiVersion: apps/v1 # k8s \u003c 1.16 ä½¿ç”¨ä¸‹é¢é…ç½® apiVersion: extensions/v1beta1 kind: ReplicaSet metadata: name: my-repset spec: replicas: 3 selector: matchLabels: pod-is-for: garbage-collection-example template: metadata: labels: pod-is-for: garbage-collection-example spec: containers: - name: nginx image: nginx å¦‚æœåˆ›å»ºè¯¥ ReplicaSetï¼Œç„¶åæŸ¥çœ‹ Pod çš„ metadata å­—æ®µï¼Œèƒ½å¤Ÿçœ‹åˆ° OwnerReferences å­—æ®µï¼š\nkubectl create -f my-repset.yaml kubectl get pods --output=yaml è¾“å‡ºæ˜¾ç¤ºäº† Pod çš„ Owner æ˜¯åä¸º my-repset çš„ ReplicaSetï¼š\napiVersion: v1 kind: Pod metadata: ... ownerReferences: - apiVersion: extensions/v1beta1 controller: true blockOwnerDeletion: true kind: ReplicaSet name: my-repset uid: d9607e19-f88f-11e6-a518-42010a800195 ... æ§åˆ¶åƒåœ¾æ”¶é›†å™¨åˆ é™¤ Dependent linkå½“åˆ é™¤å¯¹è±¡æ—¶ï¼Œå¯ä»¥æŒ‡å®šæ˜¯å¦è¯¥å¯¹è±¡çš„ Dependent ä¹Ÿè‡ªåŠ¨åˆ é™¤æ‰ã€‚è‡ªåŠ¨åˆ é™¤ Dependent ä¹Ÿç§°ä¸º çº§è”åˆ é™¤ã€‚Kubernetes ä¸­æœ‰ä¸¤ç§ çº§è”åˆ é™¤ çš„æ¨¡å¼ï¼šbackground æ¨¡å¼å’Œ foreground æ¨¡å¼ã€‚\nå¦‚æœåˆ é™¤å¯¹è±¡æ—¶ï¼Œä¸è‡ªåŠ¨åˆ é™¤å®ƒçš„ Dependentï¼Œè¿™äº› Dependent è¢«ç§°ä½œæ˜¯åŸå¯¹è±¡çš„ å­¤å„¿ã€‚\nBackground çº§è”åˆ é™¤ linkåœ¨ background çº§è”åˆ é™¤ æ¨¡å¼ä¸‹ï¼ŒKubernetes ä¼šç«‹å³åˆ é™¤ Owner å¯¹è±¡ï¼Œç„¶ååƒåœ¾æ”¶é›†å™¨ä¼šåœ¨åå°åˆ é™¤è¿™äº› Dependentã€‚\nForeground çº§è”åˆ é™¤ linkåœ¨ foreground çº§è”åˆ é™¤ æ¨¡å¼ä¸‹ï¼Œæ ¹å¯¹è±¡é¦–å…ˆè¿›å…¥ â€œåˆ é™¤ä¸­â€ çŠ¶æ€ã€‚åœ¨ â€œåˆ é™¤ä¸­â€ çŠ¶æ€ä¼šæœ‰å¦‚ä¸‹çš„æƒ…å†µï¼š\nå¯¹è±¡ä»ç„¶å¯ä»¥é€šè¿‡ REST API å¯è§ ä¼šè®¾ç½®å¯¹è±¡çš„ deletionTimestamp å­—æ®µ å¯¹è±¡çš„ metadata.finalizers å­—æ®µåŒ…å«äº†å€¼ â€œforegroundDeletionâ€ ä¸€æ—¦è¢«è®¾ç½®ä¸º â€œåˆ é™¤ä¸­â€ çŠ¶æ€ï¼Œåƒåœ¾æ”¶é›†å™¨ä¼šåˆ é™¤å¯¹è±¡çš„æ‰€æœ‰ Dependentã€‚åƒåœ¾æ”¶é›†å™¨åˆ é™¤äº†æ‰€æœ‰ â€œBlockingâ€ çš„ Dependentï¼ˆå¯¹è±¡çš„ ownerReference.blockOwnerDeletion=trueï¼‰ä¹‹åï¼Œå®ƒä¼šåˆ é™¤ Owner å¯¹è±¡ã€‚\næ³¨æ„ï¼Œåœ¨ â€œforeground åˆ é™¤â€ æ¨¡å¼ä¸‹ï¼ŒDependent åªæœ‰é€šè¿‡ ownerReference.blockOwnerDeletion æ‰èƒ½é˜»æ­¢åˆ é™¤ Owner å¯¹è±¡ã€‚åœ¨ Kubernetes 1.7 ç‰ˆæœ¬ä¸­å°†å¢åŠ  admission controllerï¼ŒåŸºäº Owner å¯¹è±¡ä¸Šçš„åˆ é™¤æƒé™æ¥æ§åˆ¶ç”¨æˆ·å»è®¾ç½® blockOwnerDeletion çš„å€¼ä¸º trueï¼Œæ‰€ä»¥æœªæˆæƒçš„ Dependent ä¸èƒ½å¤Ÿå»¶è¿Ÿ Owner å¯¹è±¡çš„åˆ é™¤ã€‚\nå¦‚æœä¸€ä¸ªå¯¹è±¡çš„ownerReferences å­—æ®µè¢«ä¸€ä¸ª Controllerï¼ˆä¾‹å¦‚ Deployment æˆ– ReplicaSetï¼‰è®¾ç½®ï¼ŒblockOwnerDeletion ä¼šè¢«è‡ªåŠ¨è®¾ç½®ï¼Œæ²¡å¿…è¦æ‰‹åŠ¨ä¿®æ”¹è¿™ä¸ªå­—æ®µã€‚\nè®¾ç½®çº§è”åˆ é™¤ç­–ç•¥ linké€šè¿‡ä¸º Owner å¯¹è±¡è®¾ç½® deleteOptions.propagationPolicy å­—æ®µï¼Œå¯ä»¥æ§åˆ¶çº§è”åˆ é™¤ç­–ç•¥ã€‚å¯èƒ½çš„å–å€¼åŒ…æ‹¬ï¼šâ€œorphanâ€ã€â€œForegroundâ€ æˆ– â€œBackgroundâ€ã€‚\nå¯¹å¾ˆå¤š Controller èµ„æºï¼ŒåŒ…æ‹¬ ReplicationControllerã€ReplicaSetã€StatefulSetã€DaemonSet å’Œ Deploymentï¼Œé»˜è®¤çš„åƒåœ¾æ”¶é›†ç­–ç•¥æ˜¯ orphanã€‚å› æ­¤ï¼Œé™¤éæŒ‡å®šå…¶å®ƒçš„åƒåœ¾æ”¶é›†ç­–ç•¥ï¼Œå¦åˆ™æ‰€æœ‰ Dependent å¯¹è±¡ä½¿ç”¨çš„éƒ½æ˜¯ orphan ç­–ç•¥ã€‚\næ³¨æ„ï¼šæœ¬æ®µæ‰€æŒ‡çš„é»˜è®¤å€¼æ˜¯æŒ‡ REST API çš„é»˜è®¤å€¼ï¼Œå¹¶é kubectl å‘½ä»¤çš„é»˜è®¤å€¼ï¼Œkubectl é»˜è®¤ä¸ºçº§è”åˆ é™¤ï¼Œåé¢ä¼šè®²åˆ°ã€‚\nä¸‹é¢æ˜¯ä¸€ä¸ªåœ¨åå°åˆ é™¤ Dependent å¯¹è±¡çš„ä¾‹å­ï¼š\nkubectl proxy --port=8080 curl -X DELETE localhost:8080/apis/extensions/v1beta1/namespaces/default/replicasets/my-repset \\ -d '{\"kind\":\"DeleteOptions\",\"apiVersion\":\"v1\",\"propagationPolicy\":\"Background\"}' \\ -H \"Content-Type: application/json\" ä¸‹é¢æ˜¯ä¸€ä¸ªåœ¨å‰å°åˆ é™¤ Dependent å¯¹è±¡çš„ä¾‹å­ï¼š\nkubectl proxy --port=8080 curl -X DELETE localhost:8080/apis/extensions/v1beta1/namespaces/default/replicasets/my-repset \\ -d '{\"kind\":\"DeleteOptions\",\"apiVersion\":\"v1\",\"propagationPolicy\":\"Foreground\"}' \\ -H \"Content-Type: application/json\" ä¸‹é¢æ˜¯ä¸€ä¸ªå­¤å„¿ Dependent çš„ä¾‹å­ï¼š\nkubectl proxy --port=8080 curl -X DELETE localhost:8080/apis/extensions/v1beta1/namespaces/default/replicasets/my-repset \\ -d '{\"kind\":\"DeleteOptions\",\"apiVersion\":\"v1\",\"propagationPolicy\":\"Orphan\"}' \\ -H \"Content-Type: application/json\" kubectl ä¹Ÿæ”¯æŒçº§è”åˆ é™¤ã€‚ é€šè¿‡è®¾ç½® --cascade ä¸º trueï¼Œå¯ä»¥ä½¿ç”¨ kubectl è‡ªåŠ¨åˆ é™¤ Dependent å¯¹è±¡ã€‚è®¾ç½® --cascade ä¸º falseï¼Œä¼šä½¿ Dependent å¯¹è±¡æˆä¸ºå­¤å„¿ Dependent å¯¹è±¡ã€‚--cascade çš„é»˜è®¤å€¼æ˜¯ trueã€‚\nä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ï¼Œä½¿ä¸€ä¸ª ReplicaSet çš„ Dependent å¯¹è±¡æˆä¸ºå­¤å„¿ Dependentï¼š\nkubectl delete replicaset my-repset --cascade=false å·²çŸ¥çš„é—®é¢˜ link 1.7 ç‰ˆæœ¬ï¼Œåƒåœ¾æ”¶é›†ä¸æ”¯æŒ è‡ªå®šä¹‰èµ„æºï¼Œæ¯”å¦‚é‚£äº›é€šè¿‡ CustomResourceDefinition æ–°å¢ï¼Œæˆ–è€…é€šè¿‡ API server èšé›†è€Œæˆçš„èµ„æºå¯¹è±¡ã€‚ å…¶å®ƒå·²çŸ¥çš„é—®é¢˜ã€‚ "
            }
        );
    index.add(
            {
                id:  53 ,
                href: "\/docs\/information\/software\/cloud\/k8s_rs_manager\/scheduling\/",
                title: "èµ„æºè°ƒåº¦",
                description: "Kubernetes ä½œä¸ºä¸€ä¸ªå®¹å™¨ç¼–æ’è°ƒåº¦å¼•æ“ï¼Œèµ„æºè°ƒåº¦æ˜¯å®ƒçš„æœ€åŸºæœ¬ä¹Ÿæ˜¯æœ€é‡è¦çš„åŠŸèƒ½ï¼Œè¿™ä¸€èŠ‚ä¸­æˆ‘ä»¬å°†ç€é‡è®²è§£ Kubernetes ä¸­æ˜¯å¦‚ä½•åšèµ„æºè°ƒåº¦çš„ã€‚\nKubernetes ä¸­æœ‰ä¸€ä¸ªå«åš kube-scheduler çš„ç»„ä»¶ï¼Œè¯¥ç»„ä»¶å°±æ˜¯ä¸“é—¨ç›‘å¬ kube-apiserver ä¸­æ˜¯å¦æœ‰è¿˜æœªè°ƒåº¦åˆ° node ä¸Šçš„ podï¼Œå†é€šè¿‡ç‰¹å®šçš„ç®—æ³•ä¸º pod æŒ‡å®šåˆ†æ´¾ node è¿è¡Œã€‚\nKubernetes ä¸­çš„ä¼—å¤šèµ„æºç±»å‹ï¼Œä¾‹å¦‚ Deploymentã€DaemonSetã€StatefulSet ç­‰éƒ½å·²ç»å®šä¹‰äº† Pod è¿è¡Œçš„ä¸€äº›é»˜è®¤è°ƒåº¦ç­–ç•¥ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬ç»†å¿ƒçš„æ ¹æ® node æˆ–è€… pod çš„ä¸åŒå±æ€§ï¼Œåˆ†åˆ«ä¸ºå®ƒä»¬æ‰“ä¸Šæ ‡ç­¾ä¹‹åï¼Œæˆ‘ä»¬å°†å‘ç° Kubernetes ä¸­çš„é«˜çº§è°ƒåº¦ç­–ç•¥æ˜¯å¤šä¹ˆå¼ºå¤§ã€‚å½“ç„¶å¦‚æœè¦å®ç°åŠ¨æ€çš„èµ„æºè°ƒåº¦ï¼Œå³ pod å·²ç»è°ƒåº¦åˆ°æŸäº›èŠ‚ç‚¹ä¸Šåï¼Œå› ä¸ºä¸€äº›å…¶å®ƒåŸå› ï¼Œæƒ³è¦è®© pod é‡æ–°è°ƒåº¦åˆ°å…¶å®ƒèŠ‚ç‚¹ã€‚\nè€ƒè™‘ä»¥ä¸‹ä¸¤ç§æƒ…å†µï¼š\né›†ç¾¤ä¸­æœ‰æ–°å¢èŠ‚ç‚¹ï¼Œæƒ³è¦è®©é›†ç¾¤ä¸­çš„èŠ‚ç‚¹çš„èµ„æºåˆ©ç”¨ç‡æ¯”è¾ƒå‡è¡¡ä¸€äº›ï¼Œæƒ³è¦å°†ä¸€äº›é«˜è´Ÿè½½çš„èŠ‚ç‚¹ä¸Šçš„ pod é©±é€åˆ°æ–°å¢èŠ‚ç‚¹ä¸Šï¼Œè¿™æ˜¯ kuberentes çš„ scheduler æ‰€ä¸æ”¯æŒçš„ï¼Œéœ€è¦ä½¿ç”¨å¦‚ descheduler è¿™æ ·çš„æ’ä»¶æ¥å®ç°ã€‚ æƒ³è¦è¿è¡Œä¸€äº›å¤§æ•°æ®åº”ç”¨ï¼Œè®¾è®¡åˆ°èµ„æºåˆ†ç‰‡ï¼Œpod éœ€è¦ä¸æ•°æ®åˆ†å¸ƒè¾¾åˆ°ä¸€è‡´å‡è¡¡ï¼Œé¿å…ä¸ªåˆ«èŠ‚ç‚¹å¤„ç†å¤§é‡æ•°æ®ï¼Œè€Œå…¶å®ƒèŠ‚ç‚¹é—²ç½®å¯¼è‡´æ•´ä¸ªä½œä¸šå»¶è¿Ÿï¼Œè¿™æ—¶å€™å¯ä»¥è€ƒè™‘ä½¿ç”¨ kube-batchã€‚ ",
                content: "Kubernetes ä½œä¸ºä¸€ä¸ªå®¹å™¨ç¼–æ’è°ƒåº¦å¼•æ“ï¼Œèµ„æºè°ƒåº¦æ˜¯å®ƒçš„æœ€åŸºæœ¬ä¹Ÿæ˜¯æœ€é‡è¦çš„åŠŸèƒ½ï¼Œè¿™ä¸€èŠ‚ä¸­æˆ‘ä»¬å°†ç€é‡è®²è§£ Kubernetes ä¸­æ˜¯å¦‚ä½•åšèµ„æºè°ƒåº¦çš„ã€‚\nKubernetes ä¸­æœ‰ä¸€ä¸ªå«åš kube-scheduler çš„ç»„ä»¶ï¼Œè¯¥ç»„ä»¶å°±æ˜¯ä¸“é—¨ç›‘å¬ kube-apiserver ä¸­æ˜¯å¦æœ‰è¿˜æœªè°ƒåº¦åˆ° node ä¸Šçš„ podï¼Œå†é€šè¿‡ç‰¹å®šçš„ç®—æ³•ä¸º pod æŒ‡å®šåˆ†æ´¾ node è¿è¡Œã€‚\nKubernetes ä¸­çš„ä¼—å¤šèµ„æºç±»å‹ï¼Œä¾‹å¦‚ Deploymentã€DaemonSetã€StatefulSet ç­‰éƒ½å·²ç»å®šä¹‰äº† Pod è¿è¡Œçš„ä¸€äº›é»˜è®¤è°ƒåº¦ç­–ç•¥ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬ç»†å¿ƒçš„æ ¹æ® node æˆ–è€… pod çš„ä¸åŒå±æ€§ï¼Œåˆ†åˆ«ä¸ºå®ƒä»¬æ‰“ä¸Šæ ‡ç­¾ä¹‹åï¼Œæˆ‘ä»¬å°†å‘ç° Kubernetes ä¸­çš„é«˜çº§è°ƒåº¦ç­–ç•¥æ˜¯å¤šä¹ˆå¼ºå¤§ã€‚å½“ç„¶å¦‚æœè¦å®ç°åŠ¨æ€çš„èµ„æºè°ƒåº¦ï¼Œå³ pod å·²ç»è°ƒåº¦åˆ°æŸäº›èŠ‚ç‚¹ä¸Šåï¼Œå› ä¸ºä¸€äº›å…¶å®ƒåŸå› ï¼Œæƒ³è¦è®© pod é‡æ–°è°ƒåº¦åˆ°å…¶å®ƒèŠ‚ç‚¹ã€‚\nè€ƒè™‘ä»¥ä¸‹ä¸¤ç§æƒ…å†µï¼š\né›†ç¾¤ä¸­æœ‰æ–°å¢èŠ‚ç‚¹ï¼Œæƒ³è¦è®©é›†ç¾¤ä¸­çš„èŠ‚ç‚¹çš„èµ„æºåˆ©ç”¨ç‡æ¯”è¾ƒå‡è¡¡ä¸€äº›ï¼Œæƒ³è¦å°†ä¸€äº›é«˜è´Ÿè½½çš„èŠ‚ç‚¹ä¸Šçš„ pod é©±é€åˆ°æ–°å¢èŠ‚ç‚¹ä¸Šï¼Œè¿™æ˜¯ kuberentes çš„ scheduler æ‰€ä¸æ”¯æŒçš„ï¼Œéœ€è¦ä½¿ç”¨å¦‚ descheduler è¿™æ ·çš„æ’ä»¶æ¥å®ç°ã€‚ æƒ³è¦è¿è¡Œä¸€äº›å¤§æ•°æ®åº”ç”¨ï¼Œè®¾è®¡åˆ°èµ„æºåˆ†ç‰‡ï¼Œpod éœ€è¦ä¸æ•°æ®åˆ†å¸ƒè¾¾åˆ°ä¸€è‡´å‡è¡¡ï¼Œé¿å…ä¸ªåˆ«èŠ‚ç‚¹å¤„ç†å¤§é‡æ•°æ®ï¼Œè€Œå…¶å®ƒèŠ‚ç‚¹é—²ç½®å¯¼è‡´æ•´ä¸ªä½œä¸šå»¶è¿Ÿï¼Œè¿™æ—¶å€™å¯ä»¥è€ƒè™‘ä½¿ç”¨ kube-batchã€‚ "
            }
        );
    index.add(
            {
                id:  54 ,
                href: "\/docs\/information\/software\/cloud\/k8s_rs_manager\/qos\/",
                title: "Qos æœåŠ¡è´¨é‡ç­‰çº§",
                description: "QoSï¼ˆQuality of Serviceï¼‰ï¼Œå¤§éƒ¨åˆ†è¯‘ä¸ºâ€œæœåŠ¡è´¨é‡ç­‰çº§â€ï¼Œåˆè¯‘ä½œâ€œæœåŠ¡è´¨é‡ä¿è¯â€ï¼Œæ˜¯ä½œç”¨åœ¨ Pod ä¸Šçš„ä¸€ä¸ªé…ç½®ï¼Œå½“ Kubernetes åˆ›å»ºä¸€ä¸ª Pod æ—¶ï¼Œå®ƒå°±ä¼šç»™è¿™ä¸ª Pod åˆ†é…ä¸€ä¸ª QoS ç­‰çº§ï¼Œå¯ä»¥æ˜¯ä»¥ä¸‹ç­‰çº§ä¹‹ä¸€ï¼š\nGuaranteedï¼šPod é‡Œçš„æ¯ä¸ªå®¹å™¨éƒ½å¿…é¡»æœ‰å†…å­˜/CPU é™åˆ¶å’Œè¯·æ±‚ï¼Œè€Œä¸”å€¼å¿…é¡»ç›¸ç­‰ã€‚ Burstableï¼šPod é‡Œè‡³å°‘æœ‰ä¸€ä¸ªå®¹å™¨æœ‰å†…å­˜æˆ–è€… CPU è¯·æ±‚ä¸”ä¸æ»¡è¶³ Guarantee ç­‰çº§çš„è¦æ±‚ï¼Œå³å†…å­˜/CPU çš„å€¼è®¾ç½®çš„ä¸åŒã€‚ BestEffortï¼šå®¹å™¨å¿…é¡»æ²¡æœ‰ä»»ä½•å†…å­˜æˆ–è€… CPU çš„é™åˆ¶æˆ–è¯·æ±‚ã€‚ è¯¥é…ç½®ä¸æ˜¯é€šè¿‡ä¸€ä¸ªé…ç½®é¡¹æ¥é…ç½®çš„ï¼Œè€Œæ˜¯é€šè¿‡é…ç½® CPU/å†…å­˜çš„ limits ä¸ requests å€¼çš„å¤§å°æ¥ç¡®è®¤æœåŠ¡è´¨é‡ç­‰çº§çš„ã€‚ä½¿ç”¨ kubectl get pod -o yaml å¯ä»¥çœ‹åˆ° pod çš„é…ç½®è¾“å‡ºä¸­æœ‰ qosClass ä¸€é¡¹ã€‚è¯¥é…ç½®çš„ä½œç”¨æ˜¯ä¸ºäº†ç»™èµ„æºè°ƒåº¦æä¾›ç­–ç•¥æ”¯æŒï¼ŒKubernetes ä¾èµ–è¿™ç§åˆ†ç±»æ¥å†³å®šå½“ Node ä¸Šæ²¡æœ‰è¶³å¤Ÿå¯ç”¨èµ„æºæ—¶è¦é©±é€å“ªäº› Podã€‚\nä¾‹å¦‚ï¼Œä¸‹é¢è¿™ä¸ª YAML é…ç½®ä¸­çš„ Pod èµ„æºé…ç½®éƒ¨åˆ†è®¾ç½®çš„æœåŠ¡è´¨é‡ç­‰çº§å°±æ˜¯ Guaranteeã€‚\nspec: containers: ... resources: limits: cpu: 100m memory: 128Mi requests: cpu: 100m memory: 128Mi ä¸‹é¢çš„ YAML é…ç½®çš„ Pod çš„æœåŠ¡è´¨é‡ç­‰çº§æ˜¯ Burstableã€‚\n",
                content: "QoSï¼ˆQuality of Serviceï¼‰ï¼Œå¤§éƒ¨åˆ†è¯‘ä¸ºâ€œæœåŠ¡è´¨é‡ç­‰çº§â€ï¼Œåˆè¯‘ä½œâ€œæœåŠ¡è´¨é‡ä¿è¯â€ï¼Œæ˜¯ä½œç”¨åœ¨ Pod ä¸Šçš„ä¸€ä¸ªé…ç½®ï¼Œå½“ Kubernetes åˆ›å»ºä¸€ä¸ª Pod æ—¶ï¼Œå®ƒå°±ä¼šç»™è¿™ä¸ª Pod åˆ†é…ä¸€ä¸ª QoS ç­‰çº§ï¼Œå¯ä»¥æ˜¯ä»¥ä¸‹ç­‰çº§ä¹‹ä¸€ï¼š\nGuaranteedï¼šPod é‡Œçš„æ¯ä¸ªå®¹å™¨éƒ½å¿…é¡»æœ‰å†…å­˜/CPU é™åˆ¶å’Œè¯·æ±‚ï¼Œè€Œä¸”å€¼å¿…é¡»ç›¸ç­‰ã€‚ Burstableï¼šPod é‡Œè‡³å°‘æœ‰ä¸€ä¸ªå®¹å™¨æœ‰å†…å­˜æˆ–è€… CPU è¯·æ±‚ä¸”ä¸æ»¡è¶³ Guarantee ç­‰çº§çš„è¦æ±‚ï¼Œå³å†…å­˜/CPU çš„å€¼è®¾ç½®çš„ä¸åŒã€‚ BestEffortï¼šå®¹å™¨å¿…é¡»æ²¡æœ‰ä»»ä½•å†…å­˜æˆ–è€… CPU çš„é™åˆ¶æˆ–è¯·æ±‚ã€‚ è¯¥é…ç½®ä¸æ˜¯é€šè¿‡ä¸€ä¸ªé…ç½®é¡¹æ¥é…ç½®çš„ï¼Œè€Œæ˜¯é€šè¿‡é…ç½® CPU/å†…å­˜çš„ limits ä¸ requests å€¼çš„å¤§å°æ¥ç¡®è®¤æœåŠ¡è´¨é‡ç­‰çº§çš„ã€‚ä½¿ç”¨ kubectl get pod -o yaml å¯ä»¥çœ‹åˆ° pod çš„é…ç½®è¾“å‡ºä¸­æœ‰ qosClass ä¸€é¡¹ã€‚è¯¥é…ç½®çš„ä½œç”¨æ˜¯ä¸ºäº†ç»™èµ„æºè°ƒåº¦æä¾›ç­–ç•¥æ”¯æŒï¼ŒKubernetes ä¾èµ–è¿™ç§åˆ†ç±»æ¥å†³å®šå½“ Node ä¸Šæ²¡æœ‰è¶³å¤Ÿå¯ç”¨èµ„æºæ—¶è¦é©±é€å“ªäº› Podã€‚\nä¾‹å¦‚ï¼Œä¸‹é¢è¿™ä¸ª YAML é…ç½®ä¸­çš„ Pod èµ„æºé…ç½®éƒ¨åˆ†è®¾ç½®çš„æœåŠ¡è´¨é‡ç­‰çº§å°±æ˜¯ Guaranteeã€‚\nspec: containers: ... resources: limits: cpu: 100m memory: 128Mi requests: cpu: 100m memory: 128Mi ä¸‹é¢çš„ YAML é…ç½®çš„ Pod çš„æœåŠ¡è´¨é‡ç­‰çº§æ˜¯ Burstableã€‚\nspec: containers: ... resources: limits: memory: \"180Mi\" requests: memory: \"100Mi\" å‚è€ƒ link é…ç½® Pod çš„æœåŠ¡è´¨é‡ - kubernetes.io "
            }
        );
    index.add(
            {
                id:  55 ,
                href: "\/docs\/information\/software\/cloud\/k8s_rs_manager\/deployment\/",
                title: "Deployment",
                description: "Deployment ä¸º Pod å’Œ ReplicaSet æä¾›äº†ä¸€ä¸ªå£°æ˜å¼å®šä¹‰ï¼ˆdeclarativeï¼‰æ–¹æ³•ï¼Œç”¨æ¥æ›¿ä»£ä»¥å‰çš„ ReplicationController æ¥æ–¹ä¾¿çš„ç®¡ç†åº”ç”¨ã€‚å…¸å‹çš„åº”ç”¨åœºæ™¯åŒ…æ‹¬ï¼š\nå®šä¹‰ Deployment æ¥åˆ›å»º Pod å’Œ ReplicaSet æ»šåŠ¨å‡çº§å’Œå›æ»šåº”ç”¨ æ‰©å®¹å’Œç¼©å®¹ æš‚åœå’Œç»§ç»­ Deployment æ¯”å¦‚ä¸€ä¸ªç®€å•çš„ nginx åº”ç”¨å¯ä»¥å®šä¹‰ä¸ºï¼š\napiVersion: extensions/v1beta1 kind: Deployment metadata: name: nginx-deployment spec: replicas: 3 template: metadata: labels: app: nginx spec: containers: - name: nginx image: nginx:1.7.9 ports: - containerPort: 80 æ‰©å®¹ï¼š\nkubectl scale deployment nginx-deployment --replicas 10 å¦‚æœé›†ç¾¤æ”¯æŒ horizontal pod autoscaling çš„è¯ï¼Œè¿˜å¯ä»¥ä¸º Deployment è®¾ç½®è‡ªåŠ¨æ‰©å±•ï¼š\nkubectl autoscale deployment nginx-deployment --min=10 --max=15 --cpu-percent=80 æ›´æ–°é•œåƒä¹Ÿæ¯”è¾ƒç®€å•ï¼š\n",
                content: "Deployment ä¸º Pod å’Œ ReplicaSet æä¾›äº†ä¸€ä¸ªå£°æ˜å¼å®šä¹‰ï¼ˆdeclarativeï¼‰æ–¹æ³•ï¼Œç”¨æ¥æ›¿ä»£ä»¥å‰çš„ ReplicationController æ¥æ–¹ä¾¿çš„ç®¡ç†åº”ç”¨ã€‚å…¸å‹çš„åº”ç”¨åœºæ™¯åŒ…æ‹¬ï¼š\nå®šä¹‰ Deployment æ¥åˆ›å»º Pod å’Œ ReplicaSet æ»šåŠ¨å‡çº§å’Œå›æ»šåº”ç”¨ æ‰©å®¹å’Œç¼©å®¹ æš‚åœå’Œç»§ç»­ Deployment æ¯”å¦‚ä¸€ä¸ªç®€å•çš„ nginx åº”ç”¨å¯ä»¥å®šä¹‰ä¸ºï¼š\napiVersion: extensions/v1beta1 kind: Deployment metadata: name: nginx-deployment spec: replicas: 3 template: metadata: labels: app: nginx spec: containers: - name: nginx image: nginx:1.7.9 ports: - containerPort: 80 æ‰©å®¹ï¼š\nkubectl scale deployment nginx-deployment --replicas 10 å¦‚æœé›†ç¾¤æ”¯æŒ horizontal pod autoscaling çš„è¯ï¼Œè¿˜å¯ä»¥ä¸º Deployment è®¾ç½®è‡ªåŠ¨æ‰©å±•ï¼š\nkubectl autoscale deployment nginx-deployment --min=10 --max=15 --cpu-percent=80 æ›´æ–°é•œåƒä¹Ÿæ¯”è¾ƒç®€å•ï¼š\nkubectl set image deployment/nginx-deployment nginx=nginx:1.9.1 å›æ»šï¼š\nkubectl rollout undo deployment/nginx-deployment Deployment æ¦‚å¿µè¯¦ç»†è§£æ linkæœ¬æ–‡ç¿»è¯‘è‡ª kubernetes å®˜æ–¹æ–‡æ¡£ï¼šhttps://kubernetes.io/docs/concepts/workloads/controllers/deployment\næ ¹æ® 2017 å¹´ 5 æœˆ 10 æ—¥çš„ Commit 8481c02 ç¿»è¯‘ã€‚\nDeployment æ˜¯ä»€ä¹ˆï¼Ÿ linkDeployment ä¸º Pod å’Œ Replica Setï¼ˆä¸‹ä¸€ä»£ Replication Controllerï¼‰æä¾›å£°æ˜å¼æ›´æ–°ã€‚\næ‚¨åªéœ€è¦åœ¨ Deployment ä¸­æè¿°æ‚¨æƒ³è¦çš„ç›®æ ‡çŠ¶æ€æ˜¯ä»€ä¹ˆï¼ŒDeployment controller å°±ä¼šå¸®æ‚¨å°† Pod å’Œ ReplicaSet çš„å®é™…çŠ¶æ€æ”¹å˜åˆ°æ‚¨çš„ç›®æ ‡çŠ¶æ€ã€‚æ‚¨å¯ä»¥å®šä¹‰ä¸€ä¸ªå…¨æ–°çš„ Deployment æ¥åˆ›å»º ReplicaSet æˆ–è€…åˆ é™¤å·²æœ‰çš„ Deployment å¹¶åˆ›å»ºä¸€ä¸ªæ–°çš„æ¥æ›¿æ¢ã€‚\næ³¨æ„ï¼šæ‚¨ä¸è¯¥æ‰‹åŠ¨ç®¡ç†ç”± Deployment åˆ›å»ºçš„ ReplicaSetï¼Œå¦åˆ™æ‚¨å°±ç¯¡è¶Šäº† Deployment controller çš„èŒè´£ï¼ä¸‹æ–‡ç½—åˆ—äº† Deployment å¯¹è±¡ä¸­å·²ç»è¦†ç›–äº†æ‰€æœ‰çš„ç”¨ä¾‹ã€‚å¦‚æœæœªæœ‰è¦†ç›–æ‚¨æ‰€æœ‰éœ€è¦çš„ç”¨ä¾‹ï¼Œè¯·ç›´æ¥åœ¨ Kubernetes çš„ä»£ç åº“ä¸­æ issueã€‚\nå…¸å‹çš„ç”¨ä¾‹å¦‚ä¸‹ï¼š\nä½¿ç”¨ Deployment æ¥åˆ›å»º ReplicaSetã€‚ReplicaSet åœ¨åå°åˆ›å»º podã€‚æ£€æŸ¥å¯åŠ¨çŠ¶æ€ï¼Œçœ‹å®ƒæ˜¯æˆåŠŸè¿˜æ˜¯å¤±è´¥ã€‚ ç„¶åï¼Œé€šè¿‡æ›´æ–° Deployment çš„ PodTemplateSpec å­—æ®µæ¥å£°æ˜ Pod çš„æ–°çŠ¶æ€ã€‚è¿™ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ ReplicaSetï¼ŒDeployment ä¼šæŒ‰ç…§æ§åˆ¶çš„é€Ÿç‡å°† pod ä»æ—§çš„ ReplicaSet ç§»åŠ¨åˆ°æ–°çš„ ReplicaSet ä¸­ã€‚ å¦‚æœå½“å‰çŠ¶æ€ä¸ç¨³å®šï¼Œå›æ»šåˆ°ä¹‹å‰çš„ Deployment revisionã€‚æ¯æ¬¡å›æ»šéƒ½ä¼šæ›´æ–° Deployment çš„ revisionã€‚ æ‰©å®¹ Deployment ä»¥æ»¡è¶³æ›´é«˜çš„è´Ÿè½½ã€‚ æš‚åœ Deployment æ¥åº”ç”¨ PodTemplateSpec çš„å¤šä¸ªä¿®å¤ï¼Œç„¶åæ¢å¤ä¸Šçº¿ã€‚ æ ¹æ® Deployment çš„çŠ¶æ€åˆ¤æ–­ä¸Šçº¿æ˜¯å¦ hang ä½äº†ã€‚ æ¸…é™¤æ—§çš„ä¸å¿…è¦çš„ ReplicaSetã€‚ åˆ›å»º Deployment linkä¸‹é¢æ˜¯ä¸€ä¸ª Deployment ç¤ºä¾‹ï¼Œå®ƒåˆ›å»ºäº†ä¸€ä¸ª ReplicaSet æ¥å¯åŠ¨ 3 ä¸ª nginx podã€‚\nä¸‹è½½ç¤ºä¾‹æ–‡ä»¶å¹¶æ‰§è¡Œå‘½ä»¤ï¼š\n$ kubectl create -f https://kubernetes.io/docs/user-guide/nginx-deployment.yaml --record deployment \"nginx-deployment\" created å°† kubectl çš„--recordçš„ flag è®¾ç½®ä¸ºtrue å¯ä»¥åœ¨ annotation ä¸­è®°å½•å½“å‰å‘½ä»¤åˆ›å»ºæˆ–è€…å‡çº§äº†è¯¥èµ„æºã€‚è¿™åœ¨æœªæ¥ä¼šå¾ˆæœ‰ç”¨ï¼Œä¾‹å¦‚ï¼ŒæŸ¥çœ‹åœ¨æ¯ä¸ª Deployment revision ä¸­æ‰§è¡Œäº†å“ªäº›å‘½ä»¤ã€‚\nç„¶åç«‹å³æ‰§è¡Œ get å°†è·å¾—å¦‚ä¸‹ç»“æœï¼š\n$ kubectl get deployments NAME DESIRED CURRENT UP-TO-DATE AVAILABLE AGE nginx-deployment 3 0 0 0 1s è¾“å‡ºç»“æœè¡¨æ˜æˆ‘ä»¬å¸Œæœ›çš„ repalica æ•°æ˜¯ 3ï¼ˆæ ¹æ® deployment ä¸­çš„.spec.replicasé…ç½®ï¼‰å½“å‰ replica æ•°ï¼ˆ.status.replicasï¼‰æ˜¯ 0, æœ€æ–°çš„ replica æ•°ï¼ˆ.status.updatedReplicasï¼‰æ˜¯ 0ï¼Œå¯ç”¨çš„ replica æ•°ï¼ˆ.status.availableReplicasï¼‰æ˜¯ 0ã€‚\nè¿‡å‡ ç§’åå†æ‰§è¡Œ get å‘½ä»¤ï¼Œå°†è·å¾—å¦‚ä¸‹è¾“å‡ºï¼š\n$ kubectl get deployments NAME DESIRED CURRENT UP-TO-DATE AVAILABLE AGE nginx-deployment 3 3 3 3 18s æˆ‘ä»¬å¯ä»¥çœ‹åˆ° Deployment å·²ç»åˆ›å»ºäº† 3 ä¸ª replicaï¼Œæ‰€æœ‰çš„ replica éƒ½å·²ç»æ˜¯æœ€æ–°çš„äº†ï¼ˆåŒ…å«æœ€æ–°çš„ pod templateï¼‰ï¼Œå¯ç”¨çš„ï¼ˆæ ¹æ® Deployment ä¸­çš„.spec.minReadySecondså£°æ˜ï¼Œå¤„äºå·²å°±ç»ªçŠ¶æ€çš„ pod çš„æœ€å°‘ä¸ªæ•°ï¼‰ã€‚æ‰§è¡Œkubectl get rså’Œkubectl get podsä¼šæ˜¾ç¤º Replica Setï¼ˆRSï¼‰å’Œ Pod å·²åˆ›å»ºã€‚\n$ kubectl get rs NAME DESIRED CURRENT READY AGE nginx-deployment-2035384211 3 3 0 18s æ‚¨å¯èƒ½ä¼šæ³¨æ„åˆ° ReplicaSet çš„åå­—æ€»æ˜¯-ã€‚\n$ kubectl get pods --show-labels NAME READY STATUS RESTARTS AGE LABELS nginx-deployment-2035384211-7ci7o 1/1 Running 0 18s app=nginx,pod-template-hash=2035384211 nginx-deployment-2035384211-kzszj 1/1 Running 0 18s app=nginx,pod-template-hash=2035384211 nginx-deployment-2035384211-qqcnn 1/1 Running 0 18s app=nginx,pod-template-hash=2035384211 åˆšåˆ›å»ºçš„ Replica Set å°†ä¿è¯æ€»æ˜¯æœ‰ 3 ä¸ª nginx çš„ pod å­˜åœ¨ã€‚\næ³¨æ„ï¼š æ‚¨å¿…é¡»åœ¨ Deployment ä¸­çš„ selector æŒ‡å®šæ­£ç¡®çš„ pod template labelï¼ˆåœ¨è¯¥ç¤ºä¾‹ä¸­æ˜¯ app = nginxï¼‰ï¼Œä¸è¦è·Ÿå…¶ä»–çš„ controller çš„ selector ä¸­æŒ‡å®šçš„ pod template label ææ··äº†ï¼ˆåŒ…æ‹¬ Deploymentã€Replica Setã€Replication Controller ç­‰ï¼‰ã€‚Kubernetes æœ¬èº«å¹¶ä¸ä¼šé˜»æ­¢æ‚¨ä»»æ„æŒ‡å®š pod template labelï¼Œä½†æ˜¯å¦‚æœæ‚¨çœŸçš„è¿™ä¹ˆåšäº†ï¼Œè¿™äº› controller ä¹‹é—´ä¼šç›¸äº’æ‰“æ¶ï¼Œå¹¶å¯èƒ½å¯¼è‡´ä¸æ­£ç¡®çš„è¡Œä¸ºã€‚\nPod-template-hash label linkæ³¨æ„ï¼šè¿™ä¸ª label ä¸æ˜¯ç”¨æˆ·æŒ‡å®šçš„ï¼\næ³¨æ„ä¸Šé¢ç¤ºä¾‹è¾“å‡ºä¸­çš„ pod label é‡Œçš„ pod-template-hash labelã€‚å½“ Deployment åˆ›å»ºæˆ–è€…æ¥ç®¡ ReplicaSet æ—¶ï¼ŒDeployment controller ä¼šè‡ªåŠ¨ä¸º Pod æ·»åŠ  pod-template-hash labelã€‚è¿™æ ·åšçš„ç›®çš„æ˜¯é˜²æ­¢ Deployment çš„å­ ReplicaSet çš„ pod åå­—é‡å¤ã€‚é€šè¿‡å°† ReplicaSet çš„ PodTemplate è¿›è¡Œå“ˆå¸Œæ•£åˆ—ï¼Œä½¿ç”¨ç”Ÿæˆçš„å“ˆå¸Œå€¼ä½œä¸º label çš„å€¼ï¼Œå¹¶æ·»åŠ åˆ° ReplicaSet selector é‡Œã€ pod template label å’Œ ReplicaSet ç®¡ç†ä¸­çš„ Pod ä¸Šã€‚\næ›´æ–° Deployment link**æ³¨æ„ï¼š**Deployment çš„ rollout å½“ä¸”ä»…å½“ Deployment çš„ pod templateï¼ˆä¾‹å¦‚ .spec.templateï¼‰ä¸­çš„ label æ›´æ–°æˆ–è€…é•œåƒæ›´æ”¹æ—¶è¢«è§¦å‘ã€‚å…¶ä»–æ›´æ–°ï¼Œä¾‹å¦‚æ‰©å®¹ Deployment ä¸ä¼šè§¦å‘ rolloutã€‚\nå‡å¦‚æˆ‘ä»¬ç°åœ¨æƒ³è¦è®© nginx pod ä½¿ç”¨ nginx:1.9.1 çš„é•œåƒæ¥ä»£æ›¿åŸæ¥çš„ nginx:1.7.9 çš„é•œåƒã€‚\n$ kubectl set image deployment/nginx-deployment nginx=nginx:1.9.1 deployment \"nginx-deployment\" image updated æˆ‘ä»¬å¯ä»¥ä½¿ç”¨editå‘½ä»¤æ¥ç¼–è¾‘ Deploymentï¼Œä¿®æ”¹.spec.template.spec.containers [0].imageï¼Œå°†nginx:1.7.9æ”¹å†™æˆnginx:1.9.1ã€‚\n$ kubectl edit deployment/nginx-deployment deployment \"nginx-deployment\" edited æŸ¥çœ‹ rollout çš„çŠ¶æ€ï¼Œåªè¦æ‰§è¡Œï¼š\n$ kubectl rollout status deployment/nginx-deployment Waiting for rollout to finish: 2 out of 3 new replicas have been updated... deployment \"nginx-deployment\" successfully rolled out Rollout æˆåŠŸåï¼ŒgetDeploymentï¼š\n$ kubectl get deployments NAME DESIRED CURRENT UP-TO-DATE AVAILABLE AGE nginx-deployment 3 3 3 3 36s UP-TO-DATE çš„ replica çš„æ•°ç›®å·²ç»è¾¾åˆ°äº†é…ç½®ä¸­è¦æ±‚çš„æ•°ç›®ã€‚\nCURRENT çš„ replica æ•°è¡¨ç¤º Deployment ç®¡ç†çš„ replica æ•°é‡ï¼ŒAVAILABLE çš„ replica æ•°æ˜¯å½“å‰å¯ç”¨çš„ replica æ•°é‡ã€‚\næˆ‘ä»¬é€šè¿‡æ‰§è¡Œ kubectl get rs å¯ä»¥çœ‹åˆ° Deployment æ›´æ–°äº† Podï¼Œé€šè¿‡åˆ›å»ºä¸€ä¸ªæ–°çš„ ReplicaSet å¹¶æ‰©å®¹äº† 3 ä¸ª replicaï¼ŒåŒæ—¶å°†åŸæ¥çš„ ReplicaSet ç¼©å®¹åˆ°äº† 0 ä¸ª replicaã€‚\n$ kubectl get rs NAME DESIRED CURRENT READY AGE nginx-deployment-1564180365 3 3 0 6s nginx-deployment-2035384211 0 0 0 36s æ‰§è¡Œget podsåªä¼šçœ‹åˆ°å½“å‰çš„æ–°çš„ podï¼š\n$ kubectl get pods NAME READY STATUS RESTARTS AGE nginx-deployment-1564180365-khku8 1/1 Running 0 14s nginx-deployment-1564180365-nacti 1/1 Running 0 14s nginx-deployment-1564180365-z9gth 1/1 Running 0 14s ä¸‹æ¬¡æ›´æ–°è¿™äº› pod çš„æ—¶å€™ï¼Œåªéœ€è¦æ›´æ–° Deployment ä¸­çš„ pod çš„ template å³å¯ã€‚\nDeployment å¯ä»¥ä¿è¯åœ¨å‡çº§æ—¶åªæœ‰ä¸€å®šæ•°é‡çš„ Pod æ˜¯ down çš„ã€‚é»˜è®¤çš„ï¼Œå®ƒä¼šç¡®ä¿è‡³å°‘æœ‰æ¯”æœŸæœ›çš„ Pod æ•°é‡å°‘ä¸€ä¸ªæ˜¯ up çŠ¶æ€ï¼ˆæœ€å¤šä¸€ä¸ªä¸å¯ç”¨ï¼‰ã€‚\nDeployment åŒæ—¶ä¹Ÿå¯ä»¥ç¡®ä¿åªåˆ›å»ºå‡ºè¶…è¿‡æœŸæœ›æ•°é‡çš„ä¸€å®šæ•°é‡çš„ Podã€‚é»˜è®¤çš„ï¼Œå®ƒä¼šç¡®ä¿æœ€å¤šæ¯”æœŸæœ›çš„ Pod æ•°é‡å¤šä¸€ä¸ªçš„ Pod æ˜¯ up çš„ï¼ˆæœ€å¤š 1 ä¸ª surge ï¼‰ã€‚\nåœ¨æœªæ¥çš„ Kuberentes ç‰ˆæœ¬ä¸­ï¼Œå°†ä» 1-1 å˜æˆ 25%-25%ã€‚\nä¾‹å¦‚ï¼Œå¦‚æœæ‚¨è‡ªå·±çœ‹ä¸‹ä¸Šé¢çš„ Deploymentï¼Œæ‚¨ä¼šå‘ç°ï¼Œå¼€å§‹åˆ›å»ºä¸€ä¸ªæ–°çš„ Podï¼Œç„¶ååˆ é™¤ä¸€äº›æ—§çš„ Pod å†åˆ›å»ºä¸€ä¸ªæ–°çš„ã€‚å½“æ–°çš„ Pod åˆ›å»ºå‡ºæ¥ä¹‹å‰ä¸ä¼šæ€æ‰æ—§çš„ Podã€‚è¿™æ ·èƒ½å¤Ÿç¡®ä¿å¯ç”¨çš„ Pod æ•°é‡è‡³å°‘æœ‰ 2 ä¸ªï¼ŒPod çš„æ€»æ•°æœ€å¤š 4 ä¸ªã€‚\n$ kubectl describe deployments Name: nginx-deployment Namespace: default CreationTimestamp: Tue, 15 Mar 2016 12:01:06 -0700 Labels: app=nginx Selector: app=nginx Replicas: 3 updated | 3 total | 3 available | 0 unavailable StrategyType: RollingUpdate MinReadySeconds: 0 RollingUpdateStrategy: 1 max unavailable, 1 max surge OldReplicaSets: NewReplicaSet: nginx-deployment-1564180365 (3/3 replicas created) Events: FirstSeen LastSeen Count From SubobjectPath Type Reason Message --------- -------- ----- ---- ------------- -------- ------ ------- 36s 36s 1 {deployment-controller} Normal ScalingReplicaSet Scaled up replica set nginx-deployment-2035384211 to 3 23s 23s 1 {deployment-controller} Normal ScalingReplicaSet Scaled up replica set nginx-deployment-1564180365 to 1 23s 23s 1 {deployment-controller} Normal ScalingReplicaSet Scaled down replica set nginx-deployment-2035384211 to 2 23s 23s 1 {deployment-controller} Normal ScalingReplicaSet Scaled up replica set nginx-deployment-1564180365 to 2 21s 21s 1 {deployment-controller} Normal ScalingReplicaSet Scaled down replica set nginx-deployment-2035384211 to 0 21s 21s 1 {deployment-controller} Normal ScalingReplicaSet Scaled up replica set nginx-deployment-1564180365 to 3 æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å½“æˆ‘ä»¬åˆšå¼€å§‹åˆ›å»ºè¿™ä¸ª Deployment çš„æ—¶å€™ï¼Œåˆ›å»ºäº†ä¸€ä¸ª ReplicaSetï¼ˆnginx-deployment-2035384211ï¼‰ï¼Œå¹¶ç›´æ¥æ‰©å®¹åˆ°äº† 3 ä¸ª replicaã€‚\nå½“æˆ‘ä»¬æ›´æ–°è¿™ä¸ª Deployment çš„æ—¶å€™ï¼Œå®ƒä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ ReplicaSetï¼ˆnginx-deployment-1564180365ï¼‰ï¼Œå°†å®ƒæ‰©å®¹åˆ° 1 ä¸ª replicaï¼Œç„¶åç¼©å®¹åŸå…ˆçš„ ReplicaSet åˆ° 2 ä¸ª replicaï¼Œæ­¤æ—¶æ»¡è¶³è‡³å°‘ 2 ä¸ª Pod æ˜¯å¯ç”¨çŠ¶æ€ï¼ŒåŒä¸€æ—¶åˆ»æœ€å¤šæœ‰ 4 ä¸ª Pod å¤„äºåˆ›å»ºçš„çŠ¶æ€ã€‚\næ¥ç€ç»§ç»­ä½¿ç”¨ç›¸åŒçš„ rolling update ç­–ç•¥æ‰©å®¹æ–°çš„ ReplicaSet å’Œç¼©å®¹æ—§çš„ ReplicaSetã€‚æœ€ç»ˆï¼Œå°†ä¼šåœ¨æ–°çš„ ReplicaSet ä¸­æœ‰ 3 ä¸ªå¯ç”¨çš„ replicaï¼Œæ—§çš„ ReplicaSet çš„ replica æ•°ç›®å˜æˆ 0ã€‚\nRolloverï¼ˆå¤šä¸ª rollout å¹¶è¡Œï¼‰ linkæ¯å½“ Deployment controller è§‚æµ‹åˆ°æœ‰æ–°çš„ deployment è¢«åˆ›å»ºæ—¶ï¼Œå¦‚æœæ²¡æœ‰å·²å­˜åœ¨çš„ ReplicaSet æ¥åˆ›å»ºæœŸæœ›ä¸ªæ•°çš„ Pod çš„è¯ï¼Œå°±ä¼šåˆ›å»ºå‡ºä¸€ä¸ªæ–°çš„ ReplicaSet æ¥åšè¿™ä»¶äº‹ã€‚å·²å­˜åœ¨çš„ ReplicaSet æ§åˆ¶ label ä¸ .spec.selector åŒ¹é…ä½†æ˜¯ template è·Ÿ .spec.template ä¸åŒ¹é…çš„ Pod ç¼©å®¹ã€‚æœ€ç»ˆï¼Œæ–°çš„ ReplicaSet å°†ä¼šæ‰©å®¹å‡º .spec.replicas æŒ‡å®šæ•°ç›®çš„ Podï¼Œæ—§çš„ ReplicaSet ä¼šç¼©å®¹åˆ° 0ã€‚\nå¦‚æœæ‚¨æ›´æ–°äº†ä¸€ä¸ªçš„å·²å­˜åœ¨å¹¶æ­£åœ¨è¿›è¡Œä¸­çš„ Deploymentï¼Œæ¯æ¬¡æ›´æ–° Deployment éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ ReplicaSet å¹¶æ‰©å®¹å®ƒï¼ŒåŒæ—¶å›æ»šä¹‹å‰æ‰©å®¹çš„ ReplicaSet â€”â€” å°†å®ƒæ·»åŠ åˆ°æ—§çš„ ReplicaSet åˆ—è¡¨ä¸­ï¼Œå¼€å§‹ç¼©å®¹ã€‚\nä¾‹å¦‚ï¼Œå‡å¦‚æ‚¨åˆ›å»ºäº†ä¸€ä¸ªæœ‰ 5 ä¸ª niginx:1.7.9 replica çš„ Deploymentï¼Œä½†æ˜¯å½“è¿˜åªæœ‰ 3 ä¸ª nginx:1.7.9 çš„ replica åˆ›å»ºå‡ºæ¥çš„æ—¶å€™æ‚¨å°±å¼€å§‹æ›´æ–°å«æœ‰ 5 ä¸ª nginx:1.9.1 replica çš„ Deploymentã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒDeployment ä¼šç«‹å³æ€æ‰å·²åˆ›å»ºçš„ 3 ä¸ª nginx:1.7.9 çš„ Podï¼Œå¹¶å¼€å§‹åˆ›å»º nginx:1.9.1 çš„ Podã€‚å®ƒä¸ä¼šç­‰åˆ°æ‰€æœ‰çš„ 5 ä¸ª nginx:1.7.9 çš„ Pod éƒ½åˆ›å»ºå®Œæˆåæ‰å¼€å§‹æ”¹å˜èˆªé“ã€‚\nLabel selector æ›´æ–° linkæˆ‘ä»¬é€šå¸¸ä¸é¼“åŠ±æ›´æ–° label selectorï¼Œæˆ‘ä»¬å»ºè®®äº‹å…ˆè§„åˆ’å¥½æ‚¨çš„ selectorã€‚\nä»»ä½•æƒ…å†µä¸‹ï¼Œåªè¦æ‚¨æƒ³è¦æ‰§è¡Œ label selector çš„æ›´æ–°ï¼Œè¯·ä¸€å®šè¦è°¨æ…å¹¶ç¡®è®¤æ‚¨å·²ç»é¢„æ–™åˆ°æ‰€æœ‰å¯èƒ½å› æ­¤å¯¼è‡´çš„åæœã€‚\nå¢æ·» selector éœ€è¦åŒæ—¶åœ¨ Deployment çš„ spec ä¸­æ›´æ–°æ–°çš„ labelï¼Œå¦åˆ™å°†è¿”å›æ ¡éªŒé”™è¯¯ã€‚æ­¤æ›´æ”¹æ˜¯ä¸å¯è¦†ç›–çš„ï¼Œè¿™æ„å‘³ç€æ–°çš„ selector ä¸ä¼šé€‰æ‹©ä½¿ç”¨æ—§ selector åˆ›å»ºçš„ ReplicaSet å’Œ Podï¼Œä»è€Œå¯¼è‡´æ‰€æœ‰æ—§ç‰ˆæœ¬çš„ ReplicaSet éƒ½è¢«ä¸¢å¼ƒï¼Œå¹¶åˆ›å»ºæ–°çš„ ReplicaSetã€‚ æ›´æ–° selectorï¼Œå³æ›´æ”¹ selector key çš„å½“å‰å€¼ï¼Œå°†å¯¼è‡´è·Ÿå¢æ·» selector åŒæ ·çš„åæœã€‚ åˆ é™¤ selectorï¼Œå³åˆ é™¤ Deployment selector ä¸­çš„å·²æœ‰çš„ keyï¼Œä¸éœ€è¦å¯¹ Pod template label åšä»»ä½•æ›´æ”¹ï¼Œç°æœ‰çš„ ReplicaSet ä¹Ÿä¸ä¼šæˆä¸ºå­¤å„¿ï¼Œä½†æ˜¯è¯·æ³¨æ„ï¼Œåˆ é™¤çš„ label ä»ç„¶å­˜åœ¨äºç°æœ‰çš„ Pod å’Œ ReplicaSet ä¸­ã€‚ å›é€€ Deployment linkæœ‰æ—¶å€™æ‚¨å¯èƒ½æƒ³å›é€€ä¸€ä¸ª Deploymentï¼Œä¾‹å¦‚ï¼Œå½“ Deployment ä¸ç¨³å®šæ—¶ï¼Œæ¯”å¦‚ä¸€ç›´ crash loopingã€‚\né»˜è®¤æƒ…å†µä¸‹ï¼Œkubernetes ä¼šåœ¨ç³»ç»Ÿä¸­ä¿å­˜å‰ä¸¤æ¬¡çš„ Deployment çš„ rollout å†å²è®°å½•ï¼Œä»¥ä¾¿æ‚¨å¯ä»¥éšæ—¶å›é€€ï¼ˆæ‚¨å¯ä»¥ä¿®æ”¹ revision history limit æ¥æ›´æ”¹ä¿å­˜çš„ revision æ•°ï¼‰ã€‚\n**æ³¨æ„ï¼š**åªè¦ Deployment çš„ rollout è¢«è§¦å‘å°±ä¼šåˆ›å»ºä¸€ä¸ª revisionã€‚ä¹Ÿå°±æ˜¯è¯´å½“ä¸”ä»…å½“ Deployment çš„ Pod templateï¼ˆå¦‚ .spec.templateï¼‰è¢«æ›´æ”¹ï¼Œä¾‹å¦‚æ›´æ–° template ä¸­çš„ label å’Œå®¹å™¨é•œåƒæ—¶ï¼Œå°±ä¼šåˆ›å»ºå‡ºä¸€ä¸ªæ–°çš„ revisionã€‚\nå…¶ä»–çš„æ›´æ–°ï¼Œæ¯”å¦‚æ‰©å®¹ Deployment ä¸ä¼šåˆ›å»º revisionâ€”â€” å› æ­¤æˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿çš„æ‰‹åŠ¨æˆ–è€…è‡ªåŠ¨æ‰©å®¹ã€‚è¿™æ„å‘³ç€å½“æ‚¨å›é€€åˆ°å†å² revision æ—¶ï¼Œåªæœ‰ Deployment ä¸­çš„ Pod template éƒ¨åˆ†æ‰ä¼šå›é€€ã€‚\nå‡è®¾æˆ‘ä»¬åœ¨æ›´æ–° Deployment çš„æ—¶å€™çŠ¯äº†ä¸€ä¸ªæ‹¼å†™é”™è¯¯ï¼Œå°†é•œåƒçš„åå­—å†™æˆäº† nginx:1.91ï¼Œè€Œæ­£ç¡®çš„åå­—åº”è¯¥æ˜¯ nginx:1.9.1ï¼š\n$ kubectl set image deployment/nginx-deployment nginx=nginx:1.91 deployment \"nginx-deployment\" image updated Rollout å°†ä¼šå¡ä½ã€‚\n$ kubectl rollout status deployments nginx-deployment Waiting for rollout to finish: 2 out of 3 new replicas have been updated... æŒ‰ä½ Ctrl-C åœæ­¢ä¸Šé¢çš„ rollout çŠ¶æ€ç›‘æ§ã€‚\næ‚¨ä¼šçœ‹åˆ°æ—§çš„ replicaï¼ˆnginx-deployment-1564180365 å’Œ nginx-deployment-2035384211ï¼‰å’Œæ–°çš„ replica ï¼ˆnginx-deployment-3066724191ï¼‰æ•°ç›®éƒ½æ˜¯ 2 ä¸ªã€‚\n$ kubectl get rs NAME DESIRED CURRENT READY AGE nginx-deployment-1564180365 2 2 0 25s nginx-deployment-2035384211 0 0 0 36s nginx-deployment-3066724191 2 2 2 6s çœ‹ä¸‹åˆ›å»º Podï¼Œæ‚¨ä¼šçœ‹åˆ°æœ‰ä¸¤ä¸ªæ–°çš„ ReplicaSet åˆ›å»ºçš„ Pod å¤„äº ImagePullBackOff çŠ¶æ€ï¼Œå¾ªç¯æ‹‰å–é•œåƒã€‚\n$ kubectl get pods NAME READY STATUS RESTARTS AGE nginx-deployment-1564180365-70iae 1/1 Running 0 25s nginx-deployment-1564180365-jbqqo 1/1 Running 0 25s nginx-deployment-3066724191-08mng 0/1 ImagePullBackOff 0 6s nginx-deployment-3066724191-eocby 0/1 ImagePullBackOff 0 6s æ³¨æ„ï¼ŒDeployment controller ä¼šè‡ªåŠ¨åœæ­¢åçš„ rolloutï¼Œå¹¶åœæ­¢æ‰©å®¹æ–°çš„ ReplicaSetã€‚\n$ kubectl describe deployment Name: nginx-deployment Namespace: default CreationTimestamp: Tue, 15 Mar 2016 14:48:04 -0700 Labels: app=nginx Selector: app=nginx Replicas: 2 updated | 3 total | 2 available | 2 unavailable StrategyType: RollingUpdate MinReadySeconds: 0 RollingUpdateStrategy: 1 max unavailable, 1 max surge OldReplicaSets: nginx-deployment-1564180365 (2/2 replicas created) NewReplicaSet: nginx-deployment-3066724191 (2/2 replicas created) Events: FirstSeen LastSeen Count From SubobjectPath Type Reason Message --------- -------- ----- ---- ------------- -------- ------ ------- 1m 1m 1 {deployment-controller} Normal ScalingReplicaSet Scaled up replica set nginx-deployment-2035384211 to 3 22s 22s 1 {deployment-controller} Normal ScalingReplicaSet Scaled up replica set nginx-deployment-1564180365 to 1 22s 22s 1 {deployment-controller} Normal ScalingReplicaSet Scaled down replica set nginx-deployment-2035384211 to 2 22s 22s 1 {deployment-controller} Normal ScalingReplicaSet Scaled up replica set nginx-deployment-1564180365 to 2 21s 21s 1 {deployment-controller} Normal ScalingReplicaSet Scaled down replica set nginx-deployment-2035384211 to 0 21s 21s 1 {deployment-controller} Normal ScalingReplicaSet Scaled up replica set nginx-deployment-1564180365 to 3 13s 13s 1 {deployment-controller} Normal ScalingReplicaSet Scaled up replica set nginx-deployment-3066724191 to 1 13s 13s 1 {deployment-controller} Normal ScalingReplicaSet Scaled down replica set nginx-deployment-1564180365 to 2 13s 13s 1 {deployment-controller} Normal ScalingReplicaSet Scaled up replica set nginx-deployment-3066724191 to 2 ä¸ºäº†ä¿®å¤è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦å›é€€åˆ°ç¨³å®šçš„ Deployment revisionã€‚\næ£€æŸ¥ Deployment å‡çº§çš„å†å²è®°å½• linké¦–å…ˆï¼Œæ£€æŸ¥ä¸‹ Deployment çš„ revisionï¼š\n$ kubectl rollout history deployment/nginx-deployment deployments \"nginx-deployment\": REVISION CHANGE-CAUSE 1 kubectl create -f https://kubernetes.io/docs/user-guide/nginx-deployment.yaml--record 2 kubectl set image deployment/nginx-deployment nginx=nginx:1.9.1 3 kubectl set image deployment/nginx-deployment nginx=nginx:1.91 å› ä¸ºæˆ‘ä»¬åˆ›å»º Deployment çš„æ—¶å€™ä½¿ç”¨äº†--record å‚æ•°å¯ä»¥è®°å½•å‘½ä»¤ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿çš„æŸ¥çœ‹æ¯æ¬¡ revision çš„å˜åŒ–ã€‚\næŸ¥çœ‹å•ä¸ª revision çš„è¯¦ç»†ä¿¡æ¯ï¼š\n$ kubectl rollout history deployment/nginx-deployment --revision=2 deployments \"nginx-deployment\" revision 2 Labels: app=nginx pod-template-hash=1159050644 Annotations: kubernetes.io/change-cause=kubectl set image deployment/nginx-deployment nginx=nginx:1.9.1 Containers: nginx: Image: nginx:1.9.1 Port: 80/TCP QoS Tier: cpu: BestEffort memory: BestEffort Environment Variables: No volumes. å›é€€åˆ°å†å²ç‰ˆæœ¬ linkç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥å†³å®šå›é€€å½“å‰çš„ rollout åˆ°ä¹‹å‰çš„ç‰ˆæœ¬ï¼š\n$ kubectl rollout undo deployment/nginx-deployment deployment \"nginx-deployment\" rolled back ä¹Ÿå¯ä»¥ä½¿ç”¨--revisionå‚æ•°æŒ‡å®šæŸä¸ªå†å²ç‰ˆæœ¬ï¼š\n$ kubectl rollout undo deployment/nginx-deployment --to-revision=2 deployment \"nginx-deployment\" rolled back è¯¥ Deployment ç°åœ¨å·²ç»å›é€€åˆ°äº†å…ˆå‰çš„ç¨³å®šç‰ˆæœ¬ã€‚å¦‚æ‚¨æ‰€è§ï¼ŒDeployment controller äº§ç”Ÿäº†ä¸€ä¸ªå›é€€åˆ° revison 2 çš„DeploymentRollbackçš„ eventã€‚\n$ kubectl get deployment NAME DESIRED CURRENT UP-TO-DATE AVAILABLE AGE nginx-deployment 3 3 3 3 30m $ kubectl describe deployment Name: nginx-deployment Namespace: default CreationTimestamp: Tue, 15 Mar 2016 14:48:04 -0700 Labels: app=nginx Selector: app=nginx Replicas: 3 updated | 3 total | 3 available | 0 unavailable StrategyType: RollingUpdate MinReadySeconds: 0 RollingUpdateStrategy: 1 max unavailable, 1 max surge OldReplicaSets: NewReplicaSet: nginx-deployment-1564180365 (3/3 replicas created) Events: FirstSeen LastSeen Count From SubobjectPath Type Reason Message --------- -------- ----- ---- ------------- -------- ------ ------- 30m 30m 1 {deployment-controller} Normal ScalingReplicaSet Scaled up replica set nginx-deployment-2035384211 to 3 29m 29m 1 {deployment-controller} Normal ScalingReplicaSet Scaled up replica set nginx-deployment-1564180365 to 1 29m 29m 1 {deployment-controller} Normal ScalingReplicaSet Scaled down replica set nginx-deployment-2035384211 to 2 29m 29m 1 {deployment-controller} Normal ScalingReplicaSet Scaled up replica set nginx-deployment-1564180365 to 2 29m 29m 1 {deployment-controller} Normal ScalingReplicaSet Scaled down replica set nginx-deployment-2035384211 to 0 29m 29m 1 {deployment-controller} Normal ScalingReplicaSet Scaled up replica set nginx-deployment-3066724191 to 2 29m 29m 1 {deployment-controller} Normal ScalingReplicaSet Scaled up replica set nginx-deployment-3066724191 to 1 29m 29m 1 {deployment-controller} Normal ScalingReplicaSet Scaled down replica set nginx-deployment-1564180365 to 2 2m 2m 1 {deployment-controller} Normal ScalingReplicaSet Scaled down replica set nginx-deployment-3066724191 to 0 2m 2m 1 {deployment-controller} Normal DeploymentRollback Rolled back deployment \"nginx-deployment\" to revision 2 29m 2m 2 {deployment-controller} Normal ScalingReplicaSet Scaled up replica set nginx-deployment-1564180365 to 3 æ¸…ç† Policy linkæ‚¨å¯ä»¥é€šè¿‡è®¾ç½® .spec.revisonHistoryLimit é¡¹æ¥æŒ‡å®š deployment æœ€å¤šä¿ç•™å¤šå°‘ revision å†å²è®°å½•ã€‚é»˜è®¤çš„ä¼šä¿ç•™æ‰€æœ‰çš„ revisionï¼›å¦‚æœå°†è¯¥é¡¹è®¾ç½®ä¸º 0ï¼ŒDeployment å°±ä¸å…è®¸å›é€€äº†ã€‚\nDeployment æ‰©å®¹ linkæ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ‰©å®¹ Deploymentï¼š\n$ kubectl scale deployment nginx-deployment --replicas 10 deployment \"nginx-deployment\" scaled å‡è®¾æ‚¨çš„é›†ç¾¤ä¸­å¯ç”¨äº† horizontal pod autoscalingï¼Œæ‚¨å¯ä»¥ç»™ Deployment è®¾ç½®ä¸€ä¸ª autoscalerï¼ŒåŸºäºå½“å‰ Pod çš„ CPU åˆ©ç”¨ç‡é€‰æ‹©æœ€å°‘å’Œæœ€å¤šçš„ Pod æ•°ã€‚\n$ kubectl autoscale deployment nginx-deployment --min=10 --max=15 --cpu-percent=80 deployment \"nginx-deployment\" autoscaled æ¯”ä¾‹æ‰©å®¹ linkRollingUpdate Deployment æ”¯æŒåŒæ—¶è¿è¡Œä¸€ä¸ªåº”ç”¨çš„å¤šä¸ªç‰ˆæœ¬ã€‚æˆ–è€… autoscaler æ‰© å®¹ RollingUpdate Deployment çš„æ—¶å€™ï¼Œæ­£åœ¨ä¸­é€”çš„ rolloutï¼ˆè¿›è¡Œä¸­æˆ–è€…å·²ç»æš‚åœçš„ï¼‰ï¼Œä¸ºäº†é™ä½é£é™©ï¼ŒDeployment controller å°†ä¼šå¹³è¡¡å·²å­˜åœ¨çš„æ´»åŠ¨ä¸­çš„ ReplicaSetï¼ˆæœ‰ Pod çš„ ReplicaSetï¼‰å’Œæ–°åŠ å…¥çš„ replicaã€‚è¿™è¢«ç§°ä¸ºæ¯”ä¾‹æ‰©å®¹ã€‚\nä¾‹å¦‚ï¼Œæ‚¨æ­£åœ¨è¿è¡Œä¸­å«æœ‰ 10 ä¸ª replica çš„ Deploymentã€‚maxSurge=3ï¼ŒmaxUnavailable=2ã€‚\n$ kubectl get deploy NAME DESIRED CURRENT UP-TO-DATE AVAILABLE AGE nginx-deployment 10 10 10 10 50s æ‚¨æ›´æ–°äº†ä¸€ä¸ªé•œåƒï¼Œè€Œåœ¨é›†ç¾¤å†…éƒ¨æ— æ³•è§£æã€‚\n$ kubectl set image deploy/nginx-deployment nginx=nginx:sometag deployment \"nginx-deployment\" image updated é•œåƒæ›´æ–°å¯åŠ¨äº†ä¸€ä¸ªåŒ…å« ReplicaSet nginx-deployment-1989198191 çš„æ–°çš„ rolloutï¼Œä½†æ˜¯å®ƒè¢«é˜»å¡äº†ï¼Œå› ä¸ºæˆ‘ä»¬ä¸Šé¢æåˆ°çš„ maxUnavailableã€‚\n$ kubectl get rs NAME DESIRED CURRENT READY AGE nginx-deployment-1989198191 5 5 0 9s nginx-deployment-618515232 8 8 8 1m ç„¶åå‘èµ·äº†ä¸€ä¸ªæ–°çš„ Deployment æ‰©å®¹è¯·æ±‚ã€‚autoscaler å°† Deployment çš„ repllica æ•°ç›®å¢åŠ åˆ°äº† 15 ä¸ªã€‚Deployment controller éœ€è¦åˆ¤æ–­åœ¨å“ªé‡Œå¢åŠ è¿™ 5 ä¸ªæ–°çš„ replicaã€‚å¦‚æœæˆ‘ä»¬æ²¡æœ‰è°ç”¨æ¯”ä¾‹æ‰©å®¹ï¼Œæ‰€æœ‰çš„ 5 ä¸ª replica éƒ½ä¼šåŠ åˆ°ä¸€ä¸ªæ–°çš„ ReplicaSet ä¸­ã€‚å¦‚æœä½¿ç”¨æ¯”ä¾‹æ‰©å®¹ï¼Œæ–°æ·»åŠ çš„ replica å°†ä¼ æ’­åˆ°æ‰€æœ‰çš„ ReplicaSet ä¸­ã€‚å¤§çš„éƒ¨åˆ†åŠ å…¥ replica æ•°æœ€å¤šçš„ ReplicaSet ä¸­ï¼Œå°çš„éƒ¨åˆ†åŠ å…¥åˆ° replica æ•°å°‘çš„ ReplciaSet ä¸­ã€‚0 ä¸ª replica çš„ ReplicaSet ä¸ä¼šè¢«æ‰©å®¹ã€‚\nåœ¨æˆ‘ä»¬ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œ3 ä¸ª replica å°†æ·»åŠ åˆ°æ—§çš„ ReplicaSet ä¸­ï¼Œ2 ä¸ª replica å°†æ·»åŠ åˆ°æ–°çš„ ReplicaSet ä¸­ã€‚rollout è¿›ç¨‹æœ€ç»ˆä¼šå°†æ‰€æœ‰çš„ replica ç§»åŠ¨åˆ°æ–°çš„ ReplicaSet ä¸­ï¼Œå‡è®¾æ–°çš„ replica æˆä¸ºå¥åº·çŠ¶æ€ã€‚\n$ kubectl get deploy NAME DESIRED CURRENT UP-TO-DATE AVAILABLE AGE nginx-deployment 15 18 7 8 7m $ kubectl get rs NAME DESIRED CURRENT READY AGE nginx-deployment-1989198191 7 7 0 7m nginx-deployment-618515232 11 11 11 7m åˆ é™¤ autoscale link kubectl get hpa kubectl delete hpa ${name of hpa} æš‚åœå’Œæ¢å¤ Deployment linkæ‚¨å¯ä»¥åœ¨å‘å‡ºä¸€æ¬¡æˆ–å¤šæ¬¡æ›´æ–°å‰æš‚åœä¸€ä¸ª Deploymentï¼Œç„¶åå†æ¢å¤å®ƒã€‚è¿™æ ·æ‚¨å°±èƒ½åœ¨ Deployment æš‚åœæœŸé—´è¿›è¡Œå¤šæ¬¡ä¿®å¤å·¥ä½œï¼Œè€Œä¸ä¼šå‘å‡ºä¸å¿…è¦çš„ rolloutã€‚\nä¾‹å¦‚ä½¿ç”¨åˆšåˆšåˆ›å»º Deploymentï¼š\n$ kubectl get deploy NAME DESIRED CURRENT UP-TO-DATE AVAILABLE AGE nginx 3 3 3 3 1m [mkargaki@dhcp129-211 kubernetes]$ kubectl get rs NAME DESIRED CURRENT READY AGE nginx-2142116321 3 3 3 1m ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æš‚åœ Deploymentï¼š\n$ kubectl rollout pause deployment/nginx-deployment deployment \"nginx-deployment\" paused ç„¶åæ›´æ–° Deplyment ä¸­çš„é•œåƒï¼š\n$ kubectl set image deploy/nginx nginx=nginx:1.9.1 deployment \"nginx-deployment\" image updated æ³¨æ„æ–°çš„ rollout å¯åŠ¨äº†ï¼š\n$ kubectl rollout history deploy/nginx deployments \"nginx\" REVISION CHANGE-CAUSE 1 $ kubectl get rs NAME DESIRED CURRENT READY AGE nginx-2142116321 3 3 3 2m æ‚¨å¯ä»¥è¿›è¡Œä»»æ„å¤šæ¬¡æ›´æ–°ï¼Œä¾‹å¦‚æ›´æ–°ä½¿ç”¨çš„èµ„æºï¼š\n$ kubectl set resources deployment nginx -c=nginx --limits=cpu=200m,memory=512Mi deployment \"nginx\" resource requirements updated Deployment æš‚åœå‰çš„åˆå§‹çŠ¶æ€å°†ç»§ç»­å®ƒçš„åŠŸèƒ½ï¼Œè€Œä¸ä¼šå¯¹ Deployment çš„æ›´æ–°äº§ç”Ÿä»»ä½•å½±å“ï¼Œåªè¦ Deployment æ˜¯æš‚åœçš„ã€‚\næœ€åï¼Œæ¢å¤è¿™ä¸ª Deploymentï¼Œè§‚å¯Ÿå®Œæˆæ›´æ–°çš„ ReplicaSet å·²ç»åˆ›å»ºå‡ºæ¥äº†ï¼š\n$ kubectl rollout resume deploy nginx deployment \"nginx\" resumed $ KUBECTL get rs -w NAME DESIRED CURRENT READY AGE nginx-2142116321 2 2 2 2m nginx-3926361531 2 2 0 6s nginx-3926361531 2 2 1 18s nginx-2142116321 1 2 2 2m nginx-2142116321 1 2 2 2m nginx-3926361531 3 2 1 18s nginx-3926361531 3 2 1 18s nginx-2142116321 1 1 1 2m nginx-3926361531 3 3 1 18s nginx-3926361531 3 3 2 19s nginx-2142116321 0 1 1 2m nginx-2142116321 0 1 1 2m nginx-2142116321 0 0 0 2m nginx-3926361531 3 3 3 20s ^C $ KUBECTL get rs NAME DESIRED CURRENT READY AGE nginx-2142116321 0 0 0 2m nginx-3926361531 3 3 3 28s **æ³¨æ„ï¼š**åœ¨æ¢å¤ Deployment ä¹‹å‰æ‚¨æ— æ³•å›é€€ä¸€ä¸ªå·²ç»æš‚åœçš„ Deploymentã€‚\nDeployment çŠ¶æ€ linkDeployment åœ¨ç”Ÿå‘½å‘¨æœŸä¸­æœ‰å¤šç§çŠ¶æ€ã€‚åœ¨åˆ›å»ºä¸€ä¸ªæ–°çš„ ReplicaSet çš„æ—¶å€™å®ƒå¯ä»¥æ˜¯ progressing çŠ¶æ€ï¼Œ complete çŠ¶æ€ï¼Œæˆ–è€… fail to progress çŠ¶æ€ã€‚\nè¿›è¡Œä¸­çš„ Deployment linkKubernetes å°†æ‰§è¡Œè¿‡ä¸‹åˆ—ä»»åŠ¡ä¹‹ä¸€çš„ Deployment æ ‡è®°ä¸º progressing çŠ¶æ€ï¼š\nDeployment æ­£åœ¨åˆ›å»ºæ–°çš„ ReplicaSet è¿‡ç¨‹ä¸­ã€‚ Deployment æ­£åœ¨æ‰©å®¹ä¸€ä¸ªå·²æœ‰çš„ ReplicaSetã€‚ Deployment æ­£åœ¨ç¼©å®¹ä¸€ä¸ªå·²æœ‰çš„ ReplicaSetã€‚ æœ‰æ–°çš„å¯ç”¨çš„ pod å‡ºç°ã€‚ æ‚¨å¯ä»¥ä½¿ç”¨ kubectl rollout status å‘½ä»¤ç›‘æ§ Deployment çš„è¿›åº¦ã€‚\nå®Œæˆçš„ Deployment linkKubernetes å°†åŒ…æ‹¬ä»¥ä¸‹ç‰¹æ€§çš„ Deployment æ ‡è®°ä¸º complete çŠ¶æ€ï¼š\nDeployment æœ€å°å¯ç”¨ã€‚æœ€å°å¯ç”¨æ„å‘³ç€ Deployment çš„å¯ç”¨ replica ä¸ªæ•°ç­‰äºæˆ–è€…è¶…è¿‡ Deployment ç­–ç•¥ä¸­çš„æœŸæœ›ä¸ªæ•°ã€‚ æ‰€æœ‰ä¸è¯¥ Deployment ç›¸å…³çš„ replica éƒ½è¢«æ›´æ–°åˆ°äº†æ‚¨æŒ‡å®šç‰ˆæœ¬ï¼Œä¹Ÿå°±è¯´æ›´æ–°å®Œæˆã€‚ è¯¥ Deployment ä¸­æ²¡æœ‰æ—§çš„ Pod å­˜åœ¨ã€‚ æ‚¨å¯ä»¥ç”¨ kubectl rollout status å‘½ä»¤æŸ¥çœ‹ Deployment æ˜¯å¦å®Œæˆã€‚å¦‚æœ rollout æˆåŠŸå®Œæˆï¼Œkubectl rollout status å°†è¿”å›ä¸€ä¸ª 0 å€¼çš„ Exit Codeã€‚\n$ kubectl rollout status deploy/nginx Waiting for rollout to finish: 2 of 3 updated replicas are available... deployment \"nginx\" successfully rolled out $ echo $? 0 å¤±è´¥çš„ Deployment linkæ‚¨çš„ Deployment åœ¨å°è¯•éƒ¨ç½²æ–°çš„ ReplicaSet çš„æ—¶å€™å¯èƒ½å¡ä½ï¼Œæ°¸è¿œä¹Ÿä¸ä¼šå®Œæˆã€‚è¿™å¯èƒ½æ˜¯å› ä¸ºä»¥ä¸‹å‡ ä¸ªå› ç´ å¼•èµ·çš„ï¼š\næ— æ•ˆçš„å¼•ç”¨ ä¸å¯è¯»çš„ probe failure é•œåƒæ‹‰å–é”™è¯¯ æƒé™ä¸å¤Ÿ èŒƒå›´é™åˆ¶ ç¨‹åºè¿è¡Œæ—¶é…ç½®é”™è¯¯ æ¢æµ‹è¿™ç§æƒ…å†µçš„ä¸€ç§æ–¹å¼æ˜¯ï¼Œåœ¨æ‚¨çš„ Deployment spec ä¸­æŒ‡å®š spec.progressDeadlineSecondsã€‚spec.progressDeadlineSeconds è¡¨ç¤º Deployment controller ç­‰å¾…å¤šå°‘ç§’æ‰èƒ½ç¡®å®šï¼ˆé€šè¿‡ Deployment statusï¼‰Deployment è¿›ç¨‹æ˜¯å¡ä½çš„ã€‚\nä¸‹é¢çš„ kubectl å‘½ä»¤è®¾ç½® progressDeadlineSeconds ä½¿ controller åœ¨ Deployment åœ¨è¿›åº¦å¡ä½ 10 åˆ†é’ŸåæŠ¥å‘Šï¼š\n$ kubectl patch deployment/nginx-deployment -p '{\"spec\":{\"progressDeadlineSeconds\":600}}' \"nginx-deployment\" patched å½“è¶…è¿‡æˆªæ­¢æ—¶é—´åï¼ŒDeployment controller ä¼šåœ¨ Deployment çš„status.conditions ä¸­å¢åŠ ä¸€æ¡ DeploymentConditionï¼Œå®ƒåŒ…æ‹¬å¦‚ä¸‹å±æ€§ï¼š\nType=Progressing Status=False Reason=ProgressDeadlineExceeded **æ³¨æ„ï¼š**kubernetes é™¤äº†æŠ¥å‘Š Reason=ProgressDeadlineExceeded çŠ¶æ€ä¿¡æ¯å¤–ä¸ä¼šå¯¹å¡ä½çš„ Deployment åšä»»ä½•æ“ä½œã€‚æ›´é«˜å±‚æ¬¡çš„åè°ƒå™¨å¯ä»¥åˆ©ç”¨å®ƒå¹¶é‡‡å–ç›¸åº”è¡ŒåŠ¨ï¼Œä¾‹å¦‚ï¼Œå›æ»š Deployment åˆ°ä¹‹å‰çš„ç‰ˆæœ¬ã€‚\n**æ³¨æ„ï¼š**å¦‚æœæ‚¨æš‚åœäº†ä¸€ä¸ª Deploymentï¼Œåœ¨æš‚åœçš„è¿™æ®µæ—¶é—´å†… kubernetnes ä¸ä¼šæ£€æŸ¥æ‚¨æŒ‡å®šçš„ deadlineã€‚æ‚¨å¯ä»¥åœ¨ Deployment çš„ rollout é€”ä¸­å®‰å…¨çš„æš‚åœå®ƒï¼Œç„¶åå†æ¢å¤å®ƒï¼Œè¿™ä¸ä¼šè§¦å‘è¶…è¿‡ deadline çš„çŠ¶æ€ã€‚\næ‚¨å¯èƒ½åœ¨ä½¿ç”¨ Deployment çš„æ—¶å€™é‡åˆ°ä¸€äº›çŸ­æš‚çš„é”™è¯¯ï¼Œè¿™äº›å¯èƒ½æ˜¯ç”±äºæ‚¨è®¾ç½®äº†å¤ªçŸ­çš„ timeoutï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯å› ä¸ºå„ç§å…¶ä»–é”™è¯¯å¯¼è‡´çš„çŸ­æš‚é”™è¯¯ã€‚ä¾‹å¦‚ï¼Œå‡è®¾æ‚¨ä½¿ç”¨äº†æ— æ•ˆçš„å¼•ç”¨ã€‚å½“æ‚¨ Describe Deployment çš„æ—¶å€™å¯èƒ½ä¼šæ³¨æ„åˆ°å¦‚ä¸‹ä¿¡æ¯ï¼š\n$ kubectl describe deployment nginx-deployment \u003c...\u003e Conditions: Type Status Reason ---- ------ ------ Available True MinimumReplicasAvailable Progressing True ReplicaSetUpdated ReplicaFailure True FailedCreate \u003c...\u003e æ‰§è¡Œkubectl get deployment nginx-deployment -o yamlï¼ŒDeployement çš„çŠ¶æ€å¯èƒ½çœ‹èµ·æ¥åƒè¿™ä¸ªæ ·å­ï¼š\nstatus: availableReplicas: 2 conditions: - lastTransitionTime: 2016-10-04T12:25:39Z lastUpdateTime: 2016-10-04T12:25:39Z message: Replica set \"nginx-deployment-4262182780\" is progressing. reason: ReplicaSetUpdated status: \"True\" type: Progressing - lastTransitionTime: 2016-10-04T12:25:42Z lastUpdateTime: 2016-10-04T12:25:42Z message: Deployment has minimum availability. reason: MinimumReplicasAvailable status: \"True\" type: Available - lastTransitionTime: 2016-10-04T12:25:39Z lastUpdateTime: 2016-10-04T12:25:39Z message: 'Error creating: pods \"nginx-deployment-4262182780-\" is forbidden: exceeded quota: object-counts, requested: pods=1, used: pods=3, limited: pods=2' reason: FailedCreate status: \"True\" type: ReplicaFailure observedGeneration: 3 replicas: 2 unavailableReplicas: 2 æœ€ç»ˆï¼Œä¸€æ—¦è¶…è¿‡ Deployment è¿›ç¨‹çš„ deadlineï¼Œkubernetes ä¼šæ›´æ–°çŠ¶æ€å’Œå¯¼è‡´ Progressing çŠ¶æ€çš„åŸå› ï¼š\nConditions: Type Status Reason ---- ------ ------ Available True MinimumReplicasAvailable Progressing False ProgressDeadlineExceeded ReplicaFailure True FailedCreate æ‚¨å¯ä»¥é€šè¿‡ç¼©å®¹ Deployment çš„æ–¹å¼è§£å†³é…é¢ä¸è¶³çš„é—®é¢˜ï¼Œæˆ–è€…å¢åŠ æ‚¨çš„ namespace çš„é…é¢ã€‚å¦‚æœæ‚¨æ»¡è¶³äº†é…é¢æ¡ä»¶åï¼ŒDeployment controller å°±ä¼šå®Œæˆæ‚¨çš„ Deployment rolloutï¼Œæ‚¨å°†çœ‹åˆ° Deployment çš„çŠ¶æ€æ›´æ–°ä¸ºæˆåŠŸçŠ¶æ€ï¼ˆStatus=Trueå¹¶ä¸”Reason=NewReplicaSetAvailableï¼‰ã€‚\nConditions: Type Status Reason ---- ------ ------ Available True MinimumReplicasAvailable Progressing True NewReplicaSetAvailable Type=Availableã€ Status=True æ„å‘³ç€æ‚¨çš„ Deployment æœ‰æœ€å°å¯ç”¨æ€§ã€‚ æœ€å°å¯ç”¨æ€§æ˜¯åœ¨ Deployment ç­–ç•¥ä¸­æŒ‡å®šçš„å‚æ•°ã€‚Type=Progressing ã€ Status=True æ„å‘³ç€æ‚¨çš„ Deployment æˆ–è€…åœ¨éƒ¨ç½²è¿‡ç¨‹ä¸­ï¼Œæˆ–è€…å·²ç»æˆåŠŸéƒ¨ç½²ï¼Œè¾¾åˆ°äº†æœŸæœ›çš„æœ€å°‘çš„å¯ç”¨ replica æ•°é‡ï¼ˆæŸ¥çœ‹ç‰¹å®šçŠ¶æ€çš„ Reasonâ€”â€” åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ Reason=NewReplicaSetAvailable æ„å‘³ç€ Deployment å·²ç»å®Œæˆï¼‰ã€‚\næ‚¨å¯ä»¥ä½¿ç”¨ kubectl rollout status å‘½ä»¤æŸ¥çœ‹ Deployment è¿›ç¨‹æ˜¯å¦å¤±è´¥ã€‚å½“ Deployment è¿‡ç¨‹è¶…è¿‡äº† deadlineï¼Œkubectl rollout status å°†è¿”å›é 0 çš„ exit codeã€‚\n$ kubectl rollout status deploy/nginx Waiting for rollout to finish: 2 out of 3 new replicas have been updated... error: deployment \"nginx\" exceeded its progress deadline $ echo $? 1 æ“ä½œå¤±è´¥çš„ Deployment linkæ‰€æœ‰å¯¹å®Œæˆçš„ Deployment çš„æ“ä½œéƒ½é€‚ç”¨äºå¤±è´¥çš„ Deploymentã€‚æ‚¨å¯ä»¥å¯¹å®ƒæ‰© / ç¼©å®¹ï¼Œå›é€€åˆ°å†å²ç‰ˆæœ¬ï¼Œæ‚¨ç”šè‡³å¯ä»¥å¤šæ¬¡æš‚åœå®ƒæ¥åº”ç”¨ Deployment pod templateã€‚\næ¸…ç† Policy linkæ‚¨å¯ä»¥è®¾ç½® Deployment ä¸­çš„ .spec.revisionHistoryLimit é¡¹æ¥æŒ‡å®šä¿ç•™å¤šå°‘æ—§çš„ ReplicaSetã€‚ ä½™ä¸‹çš„å°†åœ¨åå°è¢«å½“ä½œåƒåœ¾æ”¶é›†ã€‚é»˜è®¤çš„ï¼Œæ‰€æœ‰çš„ revision å†å²å°±éƒ½ä¼šè¢«ä¿ç•™ã€‚åœ¨æœªæ¥çš„ç‰ˆæœ¬ä¸­ï¼Œå°†ä¼šæ›´æ”¹ä¸º 2ã€‚\n**æ³¨æ„ï¼š**å°†è¯¥å€¼è®¾ç½®ä¸º 0ï¼Œå°†å¯¼è‡´æ‰€æœ‰çš„ Deployment å†å²è®°å½•éƒ½ä¼šè¢«æ¸…é™¤ï¼Œè¯¥ Deployment å°±æ— æ³•å†å›é€€äº†ã€‚\nç”¨ä¾‹ linké‡‘ä¸é›€ Deployment linkå¦‚æœæ‚¨æƒ³è¦ä½¿ç”¨ Deployment å¯¹éƒ¨åˆ†ç”¨æˆ·æˆ–æœåŠ¡å™¨å‘å¸ƒ releaseï¼Œæ‚¨å¯ä»¥åˆ›å»ºå¤šä¸ª Deploymentï¼Œæ¯ä¸ª Deployment å¯¹åº”ä¸€ä¸ª releaseï¼Œå‚ç…§ managing resources ä¸­å¯¹é‡‘ä¸é›€æ¨¡å¼çš„æè¿°ã€‚\nç¼–å†™ Deployment Spec linkåœ¨æ‰€æœ‰çš„ Kubernetes é…ç½®ä¸­ï¼ŒDeployment ä¹Ÿéœ€è¦ apiVersionï¼Œkind å’Œ metadata è¿™äº›é…ç½®é¡¹ã€‚é…ç½®æ–‡ä»¶çš„é€šç”¨ä½¿ç”¨è¯´æ˜æŸ¥çœ‹ éƒ¨ç½²åº”ç”¨ï¼Œé…ç½®å®¹å™¨ï¼Œå’Œä½¿ç”¨ kubectl ç®¡ç†èµ„æºæ–‡æ¡£ã€‚\nPod Template link.spec.template æ˜¯ .spec ä¸­å”¯ä¸€è¦æ±‚çš„å­—æ®µã€‚\n.spec.template æ˜¯ pod template. å®ƒè·Ÿ Pod æœ‰ä¸€æ¨¡ä¸€æ ·çš„ schemaï¼Œé™¤äº†å®ƒæ˜¯åµŒå¥—çš„å¹¶ä¸”ä¸éœ€è¦ apiVersion å’Œ kind å­—æ®µã€‚\nå¦å¤–ä¸ºäº†åˆ’åˆ† Pod çš„èŒƒå›´ï¼ŒDeployment ä¸­çš„ pod template å¿…é¡»æŒ‡å®šé€‚å½“çš„ labelï¼ˆä¸è¦è·Ÿå…¶ä»– controller é‡å¤äº†ï¼Œå‚è€ƒ selectorï¼‰å’Œé€‚å½“çš„é‡å¯ç­–ç•¥ã€‚\n.spec.template.spec.restartPolicy å¯ä»¥è®¾ç½®ä¸º Always , å¦‚æœä¸æŒ‡å®šçš„è¯è¿™å°±æ˜¯é»˜è®¤é…ç½®ã€‚\nReplicas link.spec.replicas æ˜¯å¯ä»¥é€‰å­—æ®µï¼ŒæŒ‡å®šæœŸæœ›çš„ pod æ•°é‡ï¼Œé»˜è®¤æ˜¯ 1ã€‚\nSelector link.spec.selector æ˜¯å¯é€‰å­—æ®µï¼Œç”¨æ¥æŒ‡å®š label selector ï¼Œåœˆå®š Deployment ç®¡ç†çš„ pod èŒƒå›´ã€‚\nå¦‚æœè¢«æŒ‡å®šï¼Œ .spec.selector å¿…é¡»åŒ¹é… .spec.template.metadata.labelsï¼Œå¦åˆ™å®ƒå°†è¢« API æ‹’ç»ã€‚å¦‚æœ .spec.selector æ²¡æœ‰è¢«æŒ‡å®šï¼Œ .spec.selector.matchLabels é»˜è®¤æ˜¯ .spec.template.metadata.labelsã€‚\nåœ¨ Pod çš„ template è·Ÿ .spec.template ä¸åŒæˆ–è€…æ•°é‡è¶…è¿‡äº† .spec.replicas è§„å®šçš„æ•°é‡çš„æƒ…å†µä¸‹ï¼ŒDeployment ä¼šæ€æ‰ label è·Ÿ selector ä¸åŒçš„ Podã€‚\n**æ³¨æ„ï¼š**æ‚¨ä¸åº”è¯¥å†åˆ›å»ºå…¶ä»– label è·Ÿè¿™ä¸ª selector åŒ¹é…çš„ podï¼Œæˆ–è€…é€šè¿‡å…¶ä»– Deploymentï¼Œæˆ–è€…é€šè¿‡å…¶ä»– Controllerï¼Œä¾‹å¦‚ ReplicaSet å’Œ ReplicationControllerã€‚å¦åˆ™è¯¥ Deployment ä¼šè¢«æŠŠå®ƒä»¬å½“æˆéƒ½æ˜¯è‡ªå·±åˆ›å»ºçš„ã€‚Kubernetes ä¸ä¼šé˜»æ­¢æ‚¨è¿™ä¹ˆåšã€‚\nå¦‚æœæ‚¨æœ‰å¤šä¸ª controller ä½¿ç”¨äº†é‡å¤çš„ selectorï¼Œcontroller ä»¬å°±ä¼šäº’ç›¸æ‰“æ¶å¹¶å¯¼è‡´ä¸æ­£ç¡®çš„è¡Œä¸ºã€‚\nç­–ç•¥ link.spec.strategy æŒ‡å®šæ–°çš„ Pod æ›¿æ¢æ—§çš„ Pod çš„ç­–ç•¥ã€‚ .spec.strategy.type å¯ä»¥æ˜¯ â€œRecreateâ€ æˆ–è€…æ˜¯ â€œRollingUpdateâ€ã€‚â€œRollingUpdateâ€ æ˜¯é»˜è®¤å€¼ã€‚\nRecreate Deployment link.spec.strategy.type==Recreate æ—¶ï¼Œåœ¨åˆ›å»ºå‡ºæ–°çš„ Pod ä¹‹å‰ä¼šå…ˆæ€æ‰æ‰€æœ‰å·²å­˜åœ¨çš„ Podã€‚\nRolling Update Deployment link.spec.strategy.type==RollingUpdate æ—¶ï¼ŒDeployment ä½¿ç”¨ Rolling Update çš„æ–¹å¼æ›´æ–° Pod ã€‚æ‚¨å¯ä»¥æŒ‡å®š maxUnavailable å’Œ maxSurge æ¥æ§åˆ¶ rolling update è¿›ç¨‹ã€‚\nMax Unavailable link.spec.strategy.rollingUpdate.maxUnavailable æ˜¯å¯é€‰é…ç½®é¡¹ï¼Œç”¨æ¥æŒ‡å®šåœ¨å‡çº§è¿‡ç¨‹ä¸­ä¸å¯ç”¨ Pod çš„æœ€å¤§æ•°é‡ã€‚è¯¥å€¼å¯ä»¥æ˜¯ä¸€ä¸ªç»å¯¹å€¼ï¼ˆä¾‹å¦‚ 5ï¼‰ï¼Œä¹Ÿå¯ä»¥æ˜¯æœŸæœ› Pod æ•°é‡çš„ç™¾åˆ†æ¯”ï¼ˆä¾‹å¦‚ 10%ï¼‰ã€‚é€šè¿‡è®¡ç®—ç™¾åˆ†æ¯”çš„ç»å¯¹å€¼å‘ä¸‹å–æ•´ã€‚å¦‚æœ .spec.strategy.rollingUpdate.maxSurge ä¸º 0 æ—¶ï¼Œè¿™ä¸ªå€¼ä¸å¯ä»¥ä¸º 0ã€‚é»˜è®¤å€¼æ˜¯ 1ã€‚\nä¾‹å¦‚ï¼Œè¯¥å€¼è®¾ç½®æˆ 30%ï¼Œå¯åŠ¨ rolling update åæ—§çš„ ReplicatSet å°†ä¼šç«‹å³ç¼©å®¹åˆ°æœŸæœ›çš„ Pod æ•°é‡çš„ 70%ã€‚æ–°çš„ Pod ready åï¼Œéšç€æ–°çš„ ReplicaSet çš„æ‰©å®¹ï¼Œæ—§çš„ ReplicaSet ä¼šè¿›ä¸€æ­¥ç¼©å®¹ï¼Œç¡®ä¿åœ¨å‡çº§çš„æ‰€æœ‰æ—¶åˆ»å¯ä»¥ç”¨çš„ Pod æ•°é‡è‡³å°‘æ˜¯æœŸæœ› Pod æ•°é‡çš„ 70%ã€‚\nMax Surge link.spec.strategy.rollingUpdate.maxSurge æ˜¯å¯é€‰é…ç½®é¡¹ï¼Œç”¨æ¥æŒ‡å®šå¯ä»¥è¶…è¿‡æœŸæœ›çš„ Pod æ•°é‡çš„æœ€å¤§ä¸ªæ•°ã€‚è¯¥å€¼å¯ä»¥æ˜¯ä¸€ä¸ªç»å¯¹å€¼ï¼ˆä¾‹å¦‚ 5ï¼‰æˆ–è€…æ˜¯æœŸæœ›çš„ Pod æ•°é‡çš„ç™¾åˆ†æ¯”ï¼ˆä¾‹å¦‚ 10%ï¼‰ã€‚å½“ MaxUnavailable ä¸º 0 æ—¶è¯¥å€¼ä¸å¯ä»¥ä¸º 0ã€‚é€šè¿‡ç™¾åˆ†æ¯”è®¡ç®—çš„ç»å¯¹å€¼å‘ä¸Šå–æ•´ã€‚é»˜è®¤å€¼æ˜¯ 1ã€‚\nä¾‹å¦‚ï¼Œè¯¥å€¼è®¾ç½®æˆ 30%ï¼Œå¯åŠ¨ rolling update åæ–°çš„ ReplicatSet å°†ä¼šç«‹å³æ‰©å®¹ï¼Œæ–°è€ Pod çš„æ€»æ•°ä¸èƒ½è¶…è¿‡æœŸæœ›çš„ Pod æ•°é‡çš„ 130%ã€‚æ—§çš„ Pod è¢«æ€æ‰åï¼Œæ–°çš„ ReplicaSet å°†ç»§ç»­æ‰©å®¹ï¼Œæ—§çš„ ReplicaSet ä¼šè¿›ä¸€æ­¥ç¼©å®¹ï¼Œç¡®ä¿åœ¨å‡çº§çš„æ‰€æœ‰æ—¶åˆ»æ‰€æœ‰çš„ Pod æ•°é‡å’Œä¸ä¼šè¶…è¿‡æœŸæœ› Pod æ•°é‡çš„ 130%ã€‚\nProgress Deadline Seconds link.spec.progressDeadlineSeconds æ˜¯å¯é€‰é…ç½®é¡¹ï¼Œç”¨æ¥æŒ‡å®šåœ¨ç³»ç»ŸæŠ¥å‘Š Deployment çš„ failed progressing â€”â€” è¡¨ç°ä¸º resource çš„çŠ¶æ€ä¸­ type=Progressingã€Status=Falseã€ Reason=ProgressDeadlineExceeded å‰å¯ä»¥ç­‰å¾…çš„ Deployment è¿›è¡Œçš„ç§’æ•°ã€‚Deployment controller ä¼šç»§ç»­é‡è¯•è¯¥ Deploymentã€‚æœªæ¥ï¼Œåœ¨å®ç°äº†è‡ªåŠ¨å›æ»šåï¼Œ deployment controller åœ¨è§‚å¯Ÿåˆ°è¿™ç§çŠ¶æ€æ—¶å°±ä¼šè‡ªåŠ¨å›æ»šã€‚\nå¦‚æœè®¾ç½®è¯¥å‚æ•°ï¼Œè¯¥å€¼å¿…é¡»å¤§äº .spec.minReadySecondsã€‚\nMin Ready Seconds link.spec.minReadySeconds æ˜¯ä¸€ä¸ªå¯é€‰é…ç½®é¡¹ï¼Œç”¨æ¥æŒ‡å®šæ²¡æœ‰ä»»ä½•å®¹å™¨ crash çš„ Pod å¹¶è¢«è®¤ä¸ºæ˜¯å¯ç”¨çŠ¶æ€çš„æœ€å°ç§’æ•°ã€‚é»˜è®¤æ˜¯ 0ï¼ˆPod åœ¨ ready åå°±ä¼šè¢«è®¤ä¸ºæ˜¯å¯ç”¨çŠ¶æ€ï¼‰ã€‚è¿›ä¸€æ­¥äº†è§£ä»€ä¹ˆä»€ä¹ˆå Pod ä¼šè¢«è®¤ä¸ºæ˜¯ ready çŠ¶æ€ï¼Œå‚é˜… Container Probesã€‚\nRollback To link.spec.rollbackTo æ˜¯ä¸€ä¸ªå¯ä»¥é€‰é…ç½®é¡¹ï¼Œç”¨æ¥é…ç½® Deployment å›é€€çš„é…ç½®ã€‚è®¾ç½®è¯¥å‚æ•°å°†è§¦å‘å›é€€æ“ä½œï¼Œæ¯æ¬¡å›é€€å®Œæˆåï¼Œè¯¥å€¼å°±ä¼šè¢«æ¸…é™¤ã€‚\nRevision link.spec.rollbackTo.revision æ˜¯ä¸€ä¸ªå¯é€‰é…ç½®é¡¹ï¼Œç”¨æ¥æŒ‡å®šå›é€€åˆ°çš„ revisionã€‚é»˜è®¤æ˜¯ 0ï¼Œæ„å‘³ç€å›é€€åˆ°ä¸Šä¸€ä¸ª revisionã€‚\nRevision History Limit linkDeployment revision history å­˜å‚¨åœ¨å®ƒæ§åˆ¶çš„ ReplicaSets ä¸­ã€‚\n.spec.revisionHistoryLimit æ˜¯ä¸€ä¸ªå¯é€‰é…ç½®é¡¹ï¼Œç”¨æ¥æŒ‡å®šå¯ä»¥ä¿ç•™çš„æ—§çš„ ReplicaSet æ•°é‡ã€‚è¯¥ç†æƒ³å€¼å–å†³äºå¿ƒ Deployment çš„é¢‘ç‡å’Œç¨³å®šæ€§ã€‚å¦‚æœè¯¥å€¼æ²¡æœ‰è®¾ç½®çš„è¯ï¼Œé»˜è®¤æ‰€æœ‰æ—§çš„ Replicaset æˆ–ä¼šè¢«ä¿ç•™ï¼Œå°†èµ„æºå­˜å‚¨åœ¨ etcd ä¸­ï¼Œæ˜¯ç”¨ kubectl get rs æŸ¥çœ‹è¾“å‡ºã€‚æ¯ä¸ª Deployment çš„è¯¥é…ç½®éƒ½ä¿å­˜åœ¨ ReplicaSet ä¸­ï¼Œç„¶è€Œï¼Œä¸€æ—¦æ‚¨åˆ é™¤çš„æ—§çš„ RepelicaSetï¼Œæ‚¨çš„ Deployment å°±æ— æ³•å†å›é€€åˆ°é‚£ä¸ª revison äº†ã€‚\nå¦‚æœæ‚¨å°†è¯¥å€¼è®¾ç½®ä¸º 0ï¼Œæ‰€æœ‰å…·æœ‰ 0 ä¸ª replica çš„ ReplicaSet éƒ½ä¼šè¢«åˆ é™¤ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ–°çš„ Deployment rollout æ— æ³•æ’¤é”€ï¼Œå› ä¸º revision history éƒ½è¢«æ¸…ç†æ‰äº†ã€‚\nPaused link.spec.paused æ˜¯å¯ä»¥å¯é€‰é…ç½®é¡¹ï¼Œboolean å€¼ã€‚ç”¨æ¥æŒ‡å®šæš‚åœå’Œæ¢å¤ Deploymentã€‚Paused å’Œæ²¡æœ‰ paused çš„ Deployment ä¹‹é—´çš„å”¯ä¸€åŒºåˆ«å°±æ˜¯ï¼Œæ‰€æœ‰å¯¹ paused deployment ä¸­çš„ PodTemplateSpec çš„ä¿®æ”¹éƒ½ä¸ä¼šè§¦å‘æ–°çš„ rolloutã€‚Deployment è¢«åˆ›å»ºä¹‹åé»˜è®¤æ˜¯é pausedã€‚\n"
            }
        );
    index.add(
            {
                id:  56 ,
                href: "\/docs\/information\/software\/cloud\/k8s_rs_manager\/statefulset\/",
                title: "StatefulSet",
                description: "StatefulSet ä½œä¸º Controller ä¸º Pod æä¾›å”¯ä¸€çš„æ ‡è¯†ã€‚å®ƒå¯ä»¥ä¿è¯éƒ¨ç½²å’Œ scale çš„é¡ºåºã€‚\nä½¿ç”¨æ¡ˆä¾‹å‚è€ƒï¼škubernetes contrib - statefulsetsï¼Œå…¶ä¸­åŒ…å«zookeeperå’Œkakfaçš„statefulsetè®¾ç½®å’Œä½¿ç”¨è¯´æ˜ã€‚\nStatefulSetæ˜¯ä¸ºäº†è§£å†³æœ‰çŠ¶æ€æœåŠ¡çš„é—®é¢˜ï¼ˆå¯¹åº”Deploymentså’ŒReplicaSetsæ˜¯ä¸ºæ— çŠ¶æ€æœåŠ¡è€Œè®¾è®¡ï¼‰ï¼Œå…¶åº”ç”¨åœºæ™¯åŒ…æ‹¬ï¼š\nç¨³å®šçš„æŒä¹…åŒ–å­˜å‚¨ï¼Œå³Podé‡æ–°è°ƒåº¦åè¿˜æ˜¯èƒ½è®¿é—®åˆ°ç›¸åŒçš„æŒä¹…åŒ–æ•°æ®ï¼ŒåŸºäºPVCæ¥å®ç° ç¨³å®šçš„ç½‘ç»œæ ‡å¿—ï¼Œå³Podé‡æ–°è°ƒåº¦åå…¶PodNameå’ŒHostNameä¸å˜ï¼ŒåŸºäºHeadless Serviceï¼ˆå³æ²¡æœ‰Cluster IPçš„Serviceï¼‰æ¥å®ç° æœ‰åºéƒ¨ç½²ï¼Œæœ‰åºæ‰©å±•ï¼Œå³Podæ˜¯æœ‰é¡ºåºçš„ï¼Œåœ¨éƒ¨ç½²æˆ–è€…æ‰©å±•çš„æ—¶å€™è¦ä¾æ®å®šä¹‰çš„é¡ºåºä¾æ¬¡ä¾æ¬¡è¿›è¡Œï¼ˆå³ä»0åˆ°N-1ï¼Œåœ¨ä¸‹ä¸€ä¸ªPodè¿è¡Œä¹‹å‰æ‰€æœ‰ä¹‹å‰çš„Podå¿…é¡»éƒ½æ˜¯Runningå’ŒReadyçŠ¶æ€ï¼‰ï¼ŒåŸºäºinit containersæ¥å®ç° æœ‰åºæ”¶ç¼©ï¼Œæœ‰åºåˆ é™¤ï¼ˆå³ä»N-1åˆ°0ï¼‰ ä»ä¸Šé¢çš„åº”ç”¨åœºæ™¯å¯ä»¥å‘ç°ï¼ŒStatefulSetç”±ä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ç»„æˆï¼š\nç”¨äºå®šä¹‰ç½‘ç»œæ ‡å¿—ï¼ˆDNS domainï¼‰çš„Headless Service ç”¨äºåˆ›å»ºPersistentVolumesçš„volumeClaimTemplates å®šä¹‰å…·ä½“åº”ç”¨çš„StatefulSet StatefulSetä¸­æ¯ä¸ªPodçš„DNSæ ¼å¼ä¸ºstatefulSetName-{0..N-1}.serviceName.namespace.svc.cluster.localï¼Œå…¶ä¸­\n",
                content: "StatefulSet ä½œä¸º Controller ä¸º Pod æä¾›å”¯ä¸€çš„æ ‡è¯†ã€‚å®ƒå¯ä»¥ä¿è¯éƒ¨ç½²å’Œ scale çš„é¡ºåºã€‚\nä½¿ç”¨æ¡ˆä¾‹å‚è€ƒï¼škubernetes contrib - statefulsetsï¼Œå…¶ä¸­åŒ…å«zookeeperå’Œkakfaçš„statefulsetè®¾ç½®å’Œä½¿ç”¨è¯´æ˜ã€‚\nStatefulSetæ˜¯ä¸ºäº†è§£å†³æœ‰çŠ¶æ€æœåŠ¡çš„é—®é¢˜ï¼ˆå¯¹åº”Deploymentså’ŒReplicaSetsæ˜¯ä¸ºæ— çŠ¶æ€æœåŠ¡è€Œè®¾è®¡ï¼‰ï¼Œå…¶åº”ç”¨åœºæ™¯åŒ…æ‹¬ï¼š\nç¨³å®šçš„æŒä¹…åŒ–å­˜å‚¨ï¼Œå³Podé‡æ–°è°ƒåº¦åè¿˜æ˜¯èƒ½è®¿é—®åˆ°ç›¸åŒçš„æŒä¹…åŒ–æ•°æ®ï¼ŒåŸºäºPVCæ¥å®ç° ç¨³å®šçš„ç½‘ç»œæ ‡å¿—ï¼Œå³Podé‡æ–°è°ƒåº¦åå…¶PodNameå’ŒHostNameä¸å˜ï¼ŒåŸºäºHeadless Serviceï¼ˆå³æ²¡æœ‰Cluster IPçš„Serviceï¼‰æ¥å®ç° æœ‰åºéƒ¨ç½²ï¼Œæœ‰åºæ‰©å±•ï¼Œå³Podæ˜¯æœ‰é¡ºåºçš„ï¼Œåœ¨éƒ¨ç½²æˆ–è€…æ‰©å±•çš„æ—¶å€™è¦ä¾æ®å®šä¹‰çš„é¡ºåºä¾æ¬¡ä¾æ¬¡è¿›è¡Œï¼ˆå³ä»0åˆ°N-1ï¼Œåœ¨ä¸‹ä¸€ä¸ªPodè¿è¡Œä¹‹å‰æ‰€æœ‰ä¹‹å‰çš„Podå¿…é¡»éƒ½æ˜¯Runningå’ŒReadyçŠ¶æ€ï¼‰ï¼ŒåŸºäºinit containersæ¥å®ç° æœ‰åºæ”¶ç¼©ï¼Œæœ‰åºåˆ é™¤ï¼ˆå³ä»N-1åˆ°0ï¼‰ ä»ä¸Šé¢çš„åº”ç”¨åœºæ™¯å¯ä»¥å‘ç°ï¼ŒStatefulSetç”±ä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ç»„æˆï¼š\nç”¨äºå®šä¹‰ç½‘ç»œæ ‡å¿—ï¼ˆDNS domainï¼‰çš„Headless Service ç”¨äºåˆ›å»ºPersistentVolumesçš„volumeClaimTemplates å®šä¹‰å…·ä½“åº”ç”¨çš„StatefulSet StatefulSetä¸­æ¯ä¸ªPodçš„DNSæ ¼å¼ä¸ºstatefulSetName-{0..N-1}.serviceName.namespace.svc.cluster.localï¼Œå…¶ä¸­\nserviceNameä¸ºHeadless Serviceçš„åå­— 0..N-1ä¸ºPodæ‰€åœ¨çš„åºå·ï¼Œä»0å¼€å§‹åˆ°N-1 statefulSetNameä¸ºStatefulSetçš„åå­— namespaceä¸ºæœåŠ¡æ‰€åœ¨çš„namespaceï¼ŒHeadless Servicå’ŒStatefulSetå¿…é¡»åœ¨ç›¸åŒçš„namespace .cluster.localä¸ºCluster Domain ä½¿ç”¨ StatefulSet linkStatefulSet é€‚ç”¨äºæœ‰ä»¥ä¸‹æŸä¸ªæˆ–å¤šä¸ªéœ€æ±‚çš„åº”ç”¨ï¼š\nç¨³å®šï¼Œå”¯ä¸€çš„ç½‘ç»œæ ‡å¿—ã€‚ ç¨³å®šï¼ŒæŒä¹…åŒ–å­˜å‚¨ã€‚ æœ‰åºï¼Œä¼˜é›…åœ°éƒ¨ç½²å’Œ scaleã€‚ æœ‰åºï¼Œä¼˜é›…åœ°åˆ é™¤å’Œç»ˆæ­¢ã€‚ æœ‰åºï¼Œè‡ªåŠ¨çš„æ»šåŠ¨å‡çº§ã€‚ åœ¨ä¸Šæ–‡ä¸­ï¼Œç¨³å®šæ˜¯ Pod ï¼ˆé‡æ–°ï¼‰è°ƒåº¦ä¸­æŒä¹…æ€§çš„ä»£åè¯ã€‚ å¦‚æœåº”ç”¨ç¨‹åºä¸éœ€è¦ä»»ä½•ç¨³å®šçš„æ ‡è¯†ç¬¦ã€æœ‰åºéƒ¨ç½²ã€åˆ é™¤å’Œ scaleï¼Œåˆ™åº”è¯¥ä½¿ç”¨æä¾›ä¸€ç»„æ— çŠ¶æ€å‰¯æœ¬çš„ controller æ¥éƒ¨ç½²åº”ç”¨ç¨‹åºï¼Œä¾‹å¦‚ Deployment æˆ– ReplicaSet å¯èƒ½æ›´é€‚åˆæ‚¨çš„æ— çŠ¶æ€éœ€æ±‚ã€‚\né™åˆ¶ link StatefulSet æ˜¯ beta èµ„æºï¼ŒKubernetes 1.5 ä»¥å‰ç‰ˆæœ¬ä¸æ”¯æŒã€‚ å¯¹äºæ‰€æœ‰çš„ alpha/beta çš„èµ„æºï¼Œæ‚¨éƒ½å¯ä»¥é€šè¿‡åœ¨ apiserver ä¸­è®¾ç½® --runtime-config é€‰é¡¹æ¥ç¦ç”¨ã€‚ ç»™å®š Pod çš„å­˜å‚¨å¿…é¡»ç”± PersistentVolume Provisioner æ ¹æ®è¯·æ±‚çš„ storage class è¿›è¡Œé…ç½®ï¼Œæˆ–ç”±ç®¡ç†å‘˜é¢„å…ˆé…ç½®ã€‚ åˆ é™¤æˆ– scale StatefulSet å°†_ä¸ä¼š_åˆ é™¤ä¸ StatefulSet ç›¸å…³è”çš„ volumeã€‚ è¿™æ ·åšæ˜¯ä¸ºäº†ç¡®ä¿æ•°æ®å®‰å…¨æ€§ï¼Œè¿™é€šå¸¸æ¯”è‡ªåŠ¨æ¸…é™¤æ‰€æœ‰ç›¸å…³ StatefulSet èµ„æºæ›´æœ‰ä»·å€¼ã€‚ StatefulSets ç›®å‰è¦æ±‚ Headless Service è´Ÿè´£ Pod çš„ç½‘ç»œèº«ä»½ã€‚ æ‚¨æœ‰è´£ä»»åˆ›å»ºæ­¤æœåŠ¡ã€‚ ç»„ä»¶ linkä¸‹é¢çš„ç¤ºä¾‹ä¸­æè¿°äº† StatefulSet ä¸­çš„ç»„ä»¶ã€‚\nä¸€ä¸ªåä¸º nginx çš„ headless serviceï¼Œç”¨äºæ§åˆ¶ç½‘ç»œåŸŸã€‚ ä¸€ä¸ªåä¸º web çš„ StatefulSetï¼Œå®ƒçš„ Spec ä¸­æŒ‡å®šåœ¨æœ‰ 3 ä¸ªè¿è¡Œ nginx å®¹å™¨çš„ Podã€‚ volumeClaimTemplates ä½¿ç”¨ PersistentVolume Provisioner æä¾›çš„ PersistentVolumes ä½œä¸ºç¨³å®šå­˜å‚¨ã€‚ apiVersion: v1 kind: Service metadata: name: nginx labels: app: nginx spec: ports: - port: 80 name: web clusterIP: None selector: app: nginx --- apiVersion: apps/v1beta1 kind: StatefulSet metadata: name: web spec: serviceName: \"nginx\" replicas: 3 template: metadata: labels: app: nginx spec: terminationGracePeriodSeconds: 10 containers: - name: nginx image: gcr.io/google_containers/nginx-slim:0.8 ports: - containerPort: 80 name: web volumeMounts: - name: www mountPath: /usr/share/nginx/html volumeClaimTemplates: - metadata: name: www annotations: volume.beta.kubernetes.io/storage-class: anything spec: accessModes: [ \"ReadWriteOnce\" ] resources: requests: storage: 1Gi Pod èº«ä»½ linkStatefulSet Pod å…·æœ‰å”¯ä¸€çš„èº«ä»½ï¼ŒåŒ…æ‹¬åºæ•°ï¼Œç¨³å®šçš„ç½‘ç»œèº«ä»½å’Œç¨³å®šçš„å­˜å‚¨ã€‚ èº«ä»½ç»‘å®šåˆ° Pod ä¸Šï¼Œä¸ç®¡å®ƒï¼ˆé‡æ–°ï¼‰è°ƒåº¦åˆ°å“ªä¸ªèŠ‚ç‚¹ä¸Šã€‚\nåºæ•° linkå¯¹äºä¸€ä¸ªæœ‰ N ä¸ªå‰¯æœ¬çš„ StatefulSetï¼Œæ¯ä¸ªå‰¯æœ¬éƒ½ä¼šè¢«æŒ‡å®šä¸€ä¸ªæ•´æ•°åºæ•°ï¼Œåœ¨ [0,N)ä¹‹é—´ï¼Œä¸”å”¯ä¸€ã€‚\nç¨³å®šçš„ç½‘ç»œ ID linkStatefulSet ä¸­çš„æ¯ä¸ª Pod ä» StatefulSet çš„åç§°å’Œ Pod çš„åºæ•°æ´¾ç”Ÿå…¶ä¸»æœºåã€‚æ„é€ çš„ä¸»æœºåçš„æ¨¡å¼æ˜¯$ï¼ˆstatefulsetåç§°)-$(åºæ•°)ã€‚ ä¸Šé¢çš„ä¾‹å­å°†åˆ›å»ºä¸‰ä¸ªåä¸ºweb-0ï¼Œweb-1ï¼Œweb-2çš„ Podã€‚\nStatefulSet å¯ä»¥ä½¿ç”¨ Headless Service æ¥æ§åˆ¶å…¶ Pod çš„åŸŸã€‚æ­¤æœåŠ¡ç®¡ç†çš„åŸŸçš„æ ¼å¼ä¸ºï¼š$(æœåŠ¡åç§°).$(namespace).svc.cluster.localï¼Œå…¶ä¸­ â€œcluster.localâ€ æ˜¯é›†ç¾¤åŸŸã€‚\nåœ¨åˆ›å»ºæ¯ä¸ªPodæ—¶ï¼Œå®ƒå°†è·å–ä¸€ä¸ªåŒ¹é…çš„ DNS å­åŸŸï¼Œé‡‡ç”¨ä»¥ä¸‹å½¢å¼ï¼š$(pod åç§°).$(ç®¡ç†æœåŠ¡åŸŸ)ï¼Œå…¶ä¸­ç®¡ç†æœåŠ¡ç”± StatefulSet ä¸Šçš„ serviceName å­—æ®µå®šä¹‰ã€‚\nä»¥ä¸‹æ˜¯ Cluster Domainï¼ŒæœåŠ¡åç§°ï¼ŒStatefulSet åç§°ä»¥åŠå¦‚ä½•å½±å“ StatefulSet çš„ Pod çš„ DNS åç§°çš„ä¸€äº›ç¤ºä¾‹ã€‚\nCluster Domain Service (ns/name) StatefulSet (ns/name) StatefulSet Domain Pod DNS Pod Hostname cluster.local default/nginx default/web nginx.default.svc.cluster.local web-{0..N-1}.nginx.default.svc.cluster.local web-{0..N-1} cluster.local foo/nginx foo/web nginx.foo.svc.cluster.local web-{0..N-1}.nginx.foo.svc.cluster.local web-{0..N-1} kube.local foo/nginx foo/web nginx.foo.svc.kube.local web-{0..N-1}.nginx.foo.svc.kube.local web-{0..N-1} æ³¨æ„ Cluster Domain å°†è¢«è®¾ç½®æˆ cluster.local é™¤éè¿›è¡Œäº†å…¶ä»–é…ç½®ã€‚\nç¨³å®šå­˜å‚¨ linkKubernetes ä¸ºæ¯ä¸ª VolumeClaimTemplate åˆ›å»ºä¸€ä¸ª PersistentVolumeã€‚ä¸Šé¢çš„ nginx çš„ä¾‹å­ä¸­ï¼Œæ¯ä¸ª Pod å°†å…·æœ‰ä¸€ä¸ªç”± anything å­˜å‚¨ç±»åˆ›å»ºçš„ 1 GB å­˜å‚¨çš„ PersistentVolumeã€‚å½“è¯¥ Pod ï¼ˆé‡æ–°ï¼‰è°ƒåº¦åˆ°èŠ‚ç‚¹ä¸Šï¼ŒvolumeMounts å°†æŒ‚è½½ä¸ PersistentVolume Claim ç›¸å…³è”çš„ PersistentVolumeã€‚è¯·æ³¨æ„ï¼Œä¸ PersistentVolume Claim ç›¸å…³è”çš„ PersistentVolume åœ¨ äº§å‡º Pod æˆ– StatefulSet çš„æ—¶å€™ä¸ä¼šè¢«åˆ é™¤ã€‚è¿™å¿…é¡»æ‰‹åŠ¨å®Œæˆã€‚\néƒ¨ç½²å’Œ Scale ä¿è¯ link å¯¹äºæœ‰ N ä¸ªå‰¯æœ¬çš„ StatefulSetï¼ŒPod å°†æŒ‰ç…§ {0..N-1} çš„é¡ºåºè¢«åˆ›å»ºå’Œéƒ¨ç½²ã€‚ å½“ åˆ é™¤ Pod çš„æ—¶å€™ï¼Œå°†æŒ‰ç…§é€†åºæ¥ç»ˆç»“ï¼Œä»{N-1..0} å¯¹ Pod æ‰§è¡Œ scale æ“ä½œä¹‹å‰ï¼Œå®ƒæ‰€æœ‰çš„å‰ä»»å¿…é¡»å¤„äº Running å’Œ Ready çŠ¶æ€ã€‚ åœ¨ç»ˆæ­¢ Pod å‰ï¼Œå®ƒæ‰€æœ‰çš„ç»§ä»»è€…å¿…é¡»å¤„äºå®Œå…¨å…³é—­çŠ¶æ€ã€‚ ä¸åº”è¯¥å°† StatefulSet çš„ pod.Spec.TerminationGracePeriodSeconds è®¾ç½®ä¸º 0ã€‚è¿™æ ·æ˜¯ä¸å®‰å…¨çš„ä¸”å¼ºçƒˆä¸å»ºè®®æ‚¨è¿™æ ·åšã€‚è¿›ä¸€æ­¥è§£é‡Šï¼Œè¯·å‚é˜… å¼ºåˆ¶åˆ é™¤ StatefulSet Podã€‚\nä¸Šé¢çš„ nginx ç¤ºä¾‹åˆ›å»ºåï¼Œ3 ä¸ª Pod å°†æŒ‰ç…§å¦‚ä¸‹é¡ºåºåˆ›å»º web-0ï¼Œweb-1ï¼Œweb-2ã€‚åœ¨ web-0 å¤„äº è¿è¡Œå¹¶å°±ç»ª çŠ¶æ€ä¹‹å‰ï¼Œweb-1 å°†ä¸ä¼šè¢«éƒ¨ç½²ï¼ŒåŒæ ·å½“ web-1 å¤„äºè¿è¡Œå¹¶å°±ç»ªçŠ¶æ€ä¹‹å‰ web-2ä¹Ÿä¸ä¼šè¢«éƒ¨ç½²ã€‚å¦‚æœåœ¨ web-1 è¿è¡Œå¹¶å°±ç»ªåï¼Œweb-2 å¯åŠ¨ä¹‹å‰ï¼Œ web-0 å¤±è´¥äº†ï¼Œweb-2 å°†ä¸ä¼šå¯åŠ¨ï¼Œç›´åˆ° web-0 æˆåŠŸé‡å¯å¹¶å¤„äºè¿è¡Œå¹¶å°±ç»ªçŠ¶æ€ã€‚\nå¦‚æœç”¨æˆ·é€šè¿‡ä¿®è¡¥ StatefulSet æ¥ scale éƒ¨ç½²çš„ç¤ºä¾‹ï¼Œä»¥ä½¿ replicas=1ï¼Œåˆ™ web-2 å°†é¦–å…ˆè¢«ç»ˆæ­¢ã€‚ åœ¨ web-2 å®Œå…¨å…³é—­å’Œåˆ é™¤ä¹‹å‰ï¼Œweb-1 ä¸ä¼šè¢«ç»ˆæ­¢ã€‚ å¦‚æœ web-0 åœ¨ web-2 ç»ˆæ­¢å¹¶ä¸”å®Œå…¨å…³é—­ä¹‹åï¼Œä½†æ˜¯åœ¨ web-1 ç»ˆæ­¢ä¹‹å‰å¤±è´¥ï¼Œåˆ™ web-1 å°†ä¸ä¼šç»ˆæ­¢ï¼Œé™¤é web-0 æ­£åœ¨è¿è¡Œå¹¶å‡†å¤‡å°±ç»ªã€‚\nPod ç®¡ç†ç­–ç•¥ linkåœ¨ Kubernetes 1.7 å’Œä¹‹åç‰ˆæœ¬ï¼ŒStatefulSet å…è®¸æ‚¨æ”¾å¼€é¡ºåºä¿è¯ï¼ŒåŒæ—¶é€šè¿‡ .spec.podManagementPolicy å­—æ®µä¿è¯èº«ä»½çš„å”¯ä¸€æ€§ã€‚\nOrderedReady Pod ç®¡ç† linkStatefulSet ä¸­é»˜è®¤ä½¿ç”¨çš„æ˜¯ OrderedReady pod ç®¡ç†ã€‚å®ƒå®ç°äº† å¦‚ä¸Š æ‰€è¿°çš„è¡Œä¸ºã€‚\nå¹¶è¡Œ Pod ç®¡ç† linkParallel pod ç®¡ç†å‘Šè¯‰ StatefulSet controller å¹¶è¡Œçš„å¯åŠ¨å’Œç»ˆæ­¢ Podï¼Œåœ¨å¯åŠ¨å’Œç»ˆæ­¢å…¶ä»– Pod ä¹‹å‰ä¸ä¼šç­‰å¾… Pod å˜æˆ è¿è¡Œå¹¶å°±ç»ªæˆ–å®Œå…¨ç»ˆæ­¢çŠ¶æ€ã€‚\næ›´æ–°ç­–ç•¥ linkåœ¨ kubernetes 1.7 å’Œä»¥ä¸Šç‰ˆæœ¬ä¸­ï¼ŒStatefulSet çš„ .spec.updateStrategy å­—æ®µå…è®¸æ‚¨é…ç½®å’Œç¦ç”¨ StatefulSet ä¸­çš„å®¹å™¨ã€labelã€resource request/limitã€annotation çš„æ»šåŠ¨æ›´æ–°ã€‚\nåˆ é™¤ linkOnDelete æ›´æ–°ç­–ç•¥å®ç°äº†é—ç•™ï¼ˆ1.6å’Œä»¥å‰ï¼‰çš„è¡Œä¸ºã€‚ å½“ spec.updateStrategy æœªæŒ‡å®šæ—¶ï¼Œè¿™æ˜¯é»˜è®¤ç­–ç•¥ã€‚ å½“StatefulSet çš„ .spec.updateStrategy.type è®¾ç½®ä¸º OnDelete æ—¶ï¼ŒStatefulSet æ§åˆ¶å™¨å°†ä¸ä¼šè‡ªåŠ¨æ›´æ–° StatefulSet ä¸­çš„ Podã€‚ ç”¨æˆ·å¿…é¡»æ‰‹åŠ¨åˆ é™¤ Pod ä»¥ä½¿æ§åˆ¶å™¨åˆ›å»ºæ–°çš„ Podï¼Œä»¥åæ˜ å¯¹StatefulSetçš„ .spec.template è¿›è¡Œçš„ä¿®æ”¹ã€‚\næ»šåŠ¨æ›´æ–° linkRollingUpdate æ›´æ–°ç­–ç•¥åœ¨ StatefulSet ä¸­å®ç° Pod çš„è‡ªåŠ¨æ»šåŠ¨æ›´æ–°ã€‚ å½“StatefulSetçš„ .spec.updateStrategy.type è®¾ç½®ä¸º RollingUpdate æ—¶ï¼ŒStatefulSet æ§åˆ¶å™¨å°†åœ¨ StatefulSet ä¸­åˆ é™¤å¹¶é‡æ–°åˆ›å»ºæ¯ä¸ª Podã€‚ å®ƒå°†ä»¥ä¸ Pod ç»ˆæ­¢ç›¸åŒçš„é¡ºåºè¿›è¡Œï¼ˆä»æœ€å¤§çš„åºæ•°åˆ°æœ€å°çš„åºæ•°ï¼‰ï¼Œæ¯æ¬¡æ›´æ–°ä¸€ä¸ª Podã€‚ åœ¨æ›´æ–°å…¶å‰èº«ä¹‹å‰ï¼Œå®ƒå°†ç­‰å¾…æ­£åœ¨æ›´æ–°çš„ Pod çŠ¶æ€å˜æˆæ­£åœ¨è¿è¡Œå¹¶å°±ç»ªã€‚\nåˆ†åŒº linkå¯ä»¥é€šè¿‡æŒ‡å®š .spec.updateStrategy.rollingUpdate.partition æ¥å¯¹ RollingUpdate æ›´æ–°ç­–ç•¥è¿›è¡Œåˆ†åŒºã€‚å¦‚æœæŒ‡å®šäº†åˆ†åŒºï¼Œåˆ™å½“ StatefulSet çš„ .spec.template æ›´æ–°æ—¶ï¼Œå…·æœ‰å¤§äºæˆ–ç­‰äºåˆ†åŒºåºæ•°çš„æ‰€æœ‰ Pod å°†è¢«æ›´æ–°ã€‚å…·æœ‰å°äºåˆ†åŒºçš„åºæ•°çš„æ‰€æœ‰ Pod å°†ä¸ä¼šè¢«æ›´æ–°ï¼Œå³ä½¿åˆ é™¤å®ƒä»¬ä¹Ÿå°†è¢«é‡æ–°åˆ›å»ºã€‚å¦‚æœ StatefulSet çš„ .spec.updateStrategy.rollingUpdate.partition å¤§äºå…¶ .spec.replicasï¼Œåˆ™å…¶ .spec.template çš„æ›´æ–°å°†ä¸ä¼šä¼ æ’­åˆ° Podã€‚\nåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæ‚¨ä¸éœ€è¦ä½¿ç”¨åˆ†åŒºï¼Œä½†å¦‚æœæ‚¨æƒ³è¦è¿›è¡Œåˆ†é˜¶æ®µæ›´æ–°ï¼Œä½¿ç”¨é‡‘ä¸é›€å‘å¸ƒæˆ–æ‰§è¡Œåˆ†é˜¶æ®µå‘å¸ƒï¼Œå®ƒä»¬å°†éå¸¸æœ‰ç”¨ã€‚\nç®€å•ç¤ºä¾‹ linkä»¥ä¸€ä¸ªç®€å•çš„nginxæœåŠ¡web.yamlä¸ºä¾‹ï¼š\n--- apiVersion: v1 kind: Service metadata: name: nginx labels: app: nginx spec: ports: - port: 80 name: web clusterIP: None selector: app: nginx --- apiVersion: apps/v1beta1 kind: StatefulSet metadata: name: web spec: serviceName: \"nginx\" replicas: 2 template: metadata: labels: app: nginx spec: containers: - name: nginx image: gcr.io/google_containers/nginx-slim:0.8 ports: - containerPort: 80 name: web volumeMounts: - name: www mountPath: /usr/share/nginx/html volumeClaimTemplates: - metadata: name: www annotations: volume.alpha.kubernetes.io/storage-class: anything spec: accessModes: [ \"ReadWriteOnce\" ] resources: requests: storage: 1Gi $ kubectl create -f web.yaml service \"nginx\" created statefulset \"web\" created # æŸ¥çœ‹åˆ›å»ºçš„headless serviceå’Œstatefulset $ kubectl get service nginx NAME CLUSTER-IP EXTERNAL-IP PORT(S) AGE nginx None 80/TCP 1m $ kubectl get statefulset web NAME DESIRED CURRENT AGE web 2 2 2m # æ ¹æ®volumeClaimTemplatesè‡ªåŠ¨åˆ›å»ºPVCï¼ˆåœ¨GCEä¸­ä¼šè‡ªåŠ¨åˆ›å»ºkubernetes.io/gce-pdç±»å‹çš„volumeï¼‰ $ kubectl get pvc NAME STATUS VOLUME CAPACITY ACCESSMODES AGE www-web-0 Bound pvc-d064a004-d8d4-11e6-b521-42010a800002 1Gi RWO 16s www-web-1 Bound pvc-d06a3946-d8d4-11e6-b521-42010a800002 1Gi RWO 16s # æŸ¥çœ‹åˆ›å»ºçš„Podï¼Œä»–ä»¬éƒ½æ˜¯æœ‰åºçš„ $ kubectl get pods -l app=nginx NAME READY STATUS RESTARTS AGE web-0 1/1 Running 0 5m web-1 1/1 Running 0 4m # ä½¿ç”¨nslookupæŸ¥çœ‹è¿™äº›Podçš„DNS $ kubectl run -i --tty --image busybox dns-test --restart=Never --rm /bin/sh / # nslookup web-0.nginx Server: 10.0.0.10 Address 1: 10.0.0.10 kube-dns.kube-system.svc.cluster.local Name: web-0.nginx Address 1: 10.244.2.10 / # nslookup web-1.nginx Server: 10.0.0.10 Address 1: 10.0.0.10 kube-dns.kube-system.svc.cluster.local Name: web-1.nginx Address 1: 10.244.3.12 / # nslookup web-0.nginx.default.svc.cluster.local Server: 10.0.0.10 Address 1: 10.0.0.10 kube-dns.kube-system.svc.cluster.local Name: web-0.nginx.default.svc.cluster.local Address 1: 10.244.2.10 è¿˜å¯ä»¥è¿›è¡Œå…¶ä»–çš„æ“ä½œ\n# æ‰©å®¹ $ kubectl scale statefulset web --replicas=5 # ç¼©å®¹ $ kubectl patch statefulset web -p '{\"spec\":{\"replicas\":3}}' # é•œåƒæ›´æ–°ï¼ˆç›®å‰è¿˜ä¸æ”¯æŒç›´æ¥æ›´æ–°imageï¼Œéœ€è¦patchæ¥é—´æ¥å®ç°ï¼‰ $ kubectl patch statefulset web --type='json' -p='[{\"op\": \"replace\", \"path\": \"/spec/template/spec/containers/0/image\", \"value\":\"gcr.io/google_containers/nginx-slim:0.7\"}]' # åˆ é™¤StatefulSetå’ŒHeadless Service $ kubectl delete statefulset web $ kubectl delete service nginx # StatefulSetåˆ é™¤åPVCè¿˜ä¼šä¿ç•™ç€ï¼Œæ•°æ®ä¸å†ä½¿ç”¨çš„è¯ä¹Ÿéœ€è¦åˆ é™¤ $ kubectl delete pvc www-web-0 www-web-1 zookeeper linkå¦å¤–ä¸€ä¸ªæ›´èƒ½è¯´æ˜StatefulSetå¼ºå¤§åŠŸèƒ½çš„ç¤ºä¾‹ä¸ºzookeeper.yamlï¼Œè¿™ä¸ªä¾‹å­ä»…ä¸ºè®²è§£ï¼Œå®é™…å¯ç”¨çš„é…ç½®è¯·ä½¿ç”¨ https://github.com/kubernetes/contrib/tree/master/statefulsets ä¸­çš„é…ç½®ã€‚\n--- apiVersion: v1 kind: Service metadata: name: zk-headless labels: app: zk-headless spec: ports: - port: 2888 name: server - port: 3888 name: leader-election clusterIP: None selector: app: zk --- apiVersion: v1 kind: ConfigMap metadata: name: zk-config data: ensemble: \"zk-0;zk-1;zk-2\" jvm.heap: \"2G\" tick: \"2000\" init: \"10\" sync: \"5\" client.cnxns: \"60\" snap.retain: \"3\" purge.interval: \"1\" --- apiVersion: policy/v1beta1 kind: PodDisruptionBudget metadata: name: zk-budget spec: selector: matchLabels: app: zk minAvailable: 2 --- apiVersion: apps/v1beta1 kind: StatefulSet metadata: name: zk spec: serviceName: zk-headless replicas: 3 template: metadata: labels: app: zk annotations: pod.alpha.kubernetes.io/initialized: \"true\" scheduler.alpha.kubernetes.io/affinity: \u003e { \"podAntiAffinity\": { \"requiredDuringSchedulingRequiredDuringExecution\": [{ \"labelSelector\": { \"matchExpressions\": [{ \"key\": \"app\", \"operator\": \"In\", \"values\": [\"zk-headless\"] }] }, \"topologyKey\": \"kubernetes.io/hostname\" }] } } spec: containers: - name: k8szk imagePullPolicy: Always image: gcr.io/google_samples/k8szk:v1 resources: requests: memory: \"4Gi\" cpu: \"1\" ports: - containerPort: 2181 name: client - containerPort: 2888 name: server - containerPort: 3888 name: leader-election env: - name : ZK_ENSEMBLE valueFrom: configMapKeyRef: name: zk-config key: ensemble - name : ZK_HEAP_SIZE valueFrom: configMapKeyRef: name: zk-config key: jvm.heap - name : ZK_TICK_TIME valueFrom: configMapKeyRef: name: zk-config key: tick - name : ZK_INIT_LIMIT valueFrom: configMapKeyRef: name: zk-config key: init - name : ZK_SYNC_LIMIT valueFrom: configMapKeyRef: name: zk-config key: tick - name : ZK_MAX_CLIENT_CNXNS valueFrom: configMapKeyRef: name: zk-config key: client.cnxns - name: ZK_SNAP_RETAIN_COUNT valueFrom: configMapKeyRef: name: zk-config key: snap.retain - name: ZK_PURGE_INTERVAL valueFrom: configMapKeyRef: name: zk-config key: purge.interval - name: ZK_CLIENT_PORT value: \"2181\" - name: ZK_SERVER_PORT value: \"2888\" - name: ZK_ELECTION_PORT value: \"3888\" command: - sh - -c - zkGenConfig.sh \u0026\u0026 zkServer.sh start-foreground readinessProbe: exec: command: - \"zkOk.sh\" initialDelaySeconds: 15 timeoutSeconds: 5 livenessProbe: exec: command: - \"zkOk.sh\" initialDelaySeconds: 15 timeoutSeconds: 5 volumeMounts: - name: datadir mountPath: /var/lib/zookeeper securityContext: runAsUser: 1000 fsGroup: 1000 volumeClaimTemplates: - metadata: name: datadir annotations: volume.alpha.kubernetes.io/storage-class: anything spec: accessModes: [ \"ReadWriteOnce\" ] resources: requests: storage: 20Gi kubectl create -f zookeeper.yaml è¯¦ç»†çš„ä½¿ç”¨è¯´æ˜è§zookeeper stateful applicationã€‚\nå…³äºStatefulSetçš„æ›´å¤šç¤ºä¾‹è¯·å‚é˜… github.com/kubernetes/contrib - statefulsetsï¼Œå…¶ä¸­åŒ…æ‹¬äº†zookeeperå’Œkafkaã€‚\né›†ç¾¤å¤–éƒ¨è®¿é—®StatefulSetçš„Pod linkæˆ‘ä»¬è®¾æƒ³ä¸€ä¸‹è¿™æ ·çš„åœºæ™¯ï¼šåœ¨kubernetesé›†ç¾¤å¤–éƒ¨è°ƒè¯•StatefulSetä¸­æœ‰åºçš„Podï¼Œé‚£ä¹ˆå¦‚ä½•è®¿é—®è¿™äº›çš„podå‘¢ï¼Ÿ\næ–¹æ³•æ˜¯ä¸ºpodè®¾ç½®labelï¼Œç„¶åç”¨kubectl exposeå°†å…¶ä»¥NodePortçš„æ–¹å¼æš´éœ²åˆ°é›†ç¾¤å¤–éƒ¨ï¼Œä»¥ä¸Šé¢çš„zookeeperçš„ä¾‹å­æ¥è¯´æ˜ï¼Œä¸‹é¢ä½¿ç”¨å‘½ä»¤çš„æ–¹å¼æ¥æš´éœ²å…¶ä¸­çš„ä¸¤ä¸ªzookeeperèŠ‚ç‚¹ï¼Œä¹Ÿå¯ä»¥å†™ä¸€ä¸ªserivceé…ç½®yamlæ–‡ä»¶ã€‚\nkubectl label pod zk-0 zkInst=0 kubectl label pod zk-1 zkInst=1 kubectl expose po zk-0 --port=2181 --target-port=2181 --name=zk-0 --selector=zkInst=0 --type=NodePort kubectl expose po zk-1 --port=2181 --target-port=2181 --name=zk-1 --selector=zkInst=1 --type=NodePort è¿™æ ·åœ¨kubernetesé›†ç¾¤å¤–éƒ¨å°±å¯ä»¥æ ¹æ®podæ‰€åœ¨çš„ä¸»æœºæ‰€æ˜ å°„çš„ç«¯å£æ¥è®¿é—®äº†ã€‚\næŸ¥çœ‹zk-0è¿™ä¸ªserviceå¯ä»¥çœ‹åˆ°å¦‚ä¸‹ç»“æœï¼š\nNAME CLUSTER-IP EXTERNAL-IP PORT(S) AGE zk-0 10.254.98.14 2181:31693/TCP 5m é›†ç¾¤å¤–éƒ¨å°±å¯ä»¥ä½¿ç”¨æ‰€æœ‰çš„nodeä¸­çš„ä»»ä½•ä¸€ä¸ªIP:31693æ¥è®¿é—®è¿™ä¸ªzookeeperå®ä¾‹ã€‚\nå‚è€ƒ link https://kubernetes.io/docs/concepts/workloads/controllers/statefulset/\nkubernetes contrib - statefulsets\n"
            }
        );
    index.add(
            {
                id:  57 ,
                href: "\/docs\/information\/software\/cloud\/k8s_rs_manager\/deamonset\/",
                title: "DaemonSet",
                description: "æœ¬æ–‡å°†ä¸ºæ‚¨ä»‹ç» DaemonSet çš„åŸºæœ¬æ¦‚å¿µã€‚\nä»€ä¹ˆæ˜¯ DaemonSetï¼Ÿ linkDaemonSet ç¡®ä¿å…¨éƒ¨ï¼ˆæˆ–è€…ä¸€äº›ï¼‰Node ä¸Šè¿è¡Œä¸€ä¸ª Pod çš„å‰¯æœ¬ã€‚å½“æœ‰ Node åŠ å…¥é›†ç¾¤æ—¶ï¼Œä¹Ÿä¼šä¸ºä»–ä»¬æ–°å¢ä¸€ä¸ª Pod ã€‚å½“æœ‰ Node ä»é›†ç¾¤ç§»é™¤æ—¶ï¼Œè¿™äº› Pod ä¹Ÿä¼šè¢«å›æ”¶ã€‚åˆ é™¤ DaemonSet å°†ä¼šåˆ é™¤å®ƒåˆ›å»ºçš„æ‰€æœ‰ Podã€‚\nä½¿ç”¨ DaemonSet çš„ä¸€äº›å…¸å‹ç”¨æ³•ï¼š\nè¿è¡Œé›†ç¾¤å­˜å‚¨ daemonï¼Œä¾‹å¦‚åœ¨æ¯ä¸ª Node ä¸Šè¿è¡Œ glusterdã€cephã€‚ åœ¨æ¯ä¸ª Node ä¸Šè¿è¡Œæ—¥å¿—æ”¶é›† daemonï¼Œä¾‹å¦‚fluentdã€logstashã€‚ åœ¨æ¯ä¸ª Node ä¸Šè¿è¡Œç›‘æ§ daemonï¼Œä¾‹å¦‚ Prometheus Node Exporterã€collectdã€Datadog ä»£ç†ã€New Relic ä»£ç†ï¼Œæˆ– Ganglia gmondã€‚ ä¸€ä¸ªç®€å•çš„ç”¨æ³•æ˜¯ï¼Œåœ¨æ‰€æœ‰çš„ Node ä¸Šéƒ½å­˜åœ¨ä¸€ä¸ª DaemonSetï¼Œå°†è¢«ä½œä¸ºæ¯ç§ç±»å‹çš„ daemon ä½¿ç”¨ã€‚ ä¸€ä¸ªç¨å¾®å¤æ‚çš„ç”¨æ³•å¯èƒ½æ˜¯ï¼Œå¯¹å•ç‹¬çš„æ¯ç§ç±»å‹çš„ daemon ä½¿ç”¨å¤šä¸ª DaemonSetï¼Œä½†å…·æœ‰ä¸åŒçš„æ ‡å¿—ï¼Œå’Œ/æˆ–å¯¹ä¸åŒç¡¬ä»¶ç±»å‹å…·æœ‰ä¸åŒçš„å†…å­˜ã€CPUè¦æ±‚ã€‚\n",
                content: "æœ¬æ–‡å°†ä¸ºæ‚¨ä»‹ç» DaemonSet çš„åŸºæœ¬æ¦‚å¿µã€‚\nä»€ä¹ˆæ˜¯ DaemonSetï¼Ÿ linkDaemonSet ç¡®ä¿å…¨éƒ¨ï¼ˆæˆ–è€…ä¸€äº›ï¼‰Node ä¸Šè¿è¡Œä¸€ä¸ª Pod çš„å‰¯æœ¬ã€‚å½“æœ‰ Node åŠ å…¥é›†ç¾¤æ—¶ï¼Œä¹Ÿä¼šä¸ºä»–ä»¬æ–°å¢ä¸€ä¸ª Pod ã€‚å½“æœ‰ Node ä»é›†ç¾¤ç§»é™¤æ—¶ï¼Œè¿™äº› Pod ä¹Ÿä¼šè¢«å›æ”¶ã€‚åˆ é™¤ DaemonSet å°†ä¼šåˆ é™¤å®ƒåˆ›å»ºçš„æ‰€æœ‰ Podã€‚\nä½¿ç”¨ DaemonSet çš„ä¸€äº›å…¸å‹ç”¨æ³•ï¼š\nè¿è¡Œé›†ç¾¤å­˜å‚¨ daemonï¼Œä¾‹å¦‚åœ¨æ¯ä¸ª Node ä¸Šè¿è¡Œ glusterdã€cephã€‚ åœ¨æ¯ä¸ª Node ä¸Šè¿è¡Œæ—¥å¿—æ”¶é›† daemonï¼Œä¾‹å¦‚fluentdã€logstashã€‚ åœ¨æ¯ä¸ª Node ä¸Šè¿è¡Œç›‘æ§ daemonï¼Œä¾‹å¦‚ Prometheus Node Exporterã€collectdã€Datadog ä»£ç†ã€New Relic ä»£ç†ï¼Œæˆ– Ganglia gmondã€‚ ä¸€ä¸ªç®€å•çš„ç”¨æ³•æ˜¯ï¼Œåœ¨æ‰€æœ‰çš„ Node ä¸Šéƒ½å­˜åœ¨ä¸€ä¸ª DaemonSetï¼Œå°†è¢«ä½œä¸ºæ¯ç§ç±»å‹çš„ daemon ä½¿ç”¨ã€‚ ä¸€ä¸ªç¨å¾®å¤æ‚çš„ç”¨æ³•å¯èƒ½æ˜¯ï¼Œå¯¹å•ç‹¬çš„æ¯ç§ç±»å‹çš„ daemon ä½¿ç”¨å¤šä¸ª DaemonSetï¼Œä½†å…·æœ‰ä¸åŒçš„æ ‡å¿—ï¼Œå’Œ/æˆ–å¯¹ä¸åŒç¡¬ä»¶ç±»å‹å…·æœ‰ä¸åŒçš„å†…å­˜ã€CPUè¦æ±‚ã€‚\nç¼–å†™ DaemonSet Spec linkå¿…éœ€å­—æ®µ linkå’Œå…¶å®ƒæ‰€æœ‰ Kubernetes é…ç½®ä¸€æ ·ï¼ŒDaemonSet éœ€è¦ apiVersionã€kind å’Œ metadataå­—æ®µã€‚æœ‰å…³é…ç½®æ–‡ä»¶çš„é€šç”¨ä¿¡æ¯ï¼Œè¯¦è§æ–‡æ¡£ éƒ¨ç½²åº”ç”¨ã€é…ç½®å®¹å™¨ å’Œèµ„æºç®¡ç†ã€‚\nDaemonSet ä¹Ÿéœ€è¦ä¸€ä¸ª .specé…ç½®æ®µã€‚\nPod æ¨¡æ¿ link.spec å”¯ä¸€å¿…éœ€çš„å­—æ®µæ˜¯ .spec.templateã€‚\n.spec.template æ˜¯ä¸€ä¸ª Pod æ¨¡æ¿ã€‚ å®ƒä¸ Pod å…·æœ‰ç›¸åŒçš„ schemaï¼Œé™¤äº†å®ƒæ˜¯åµŒå¥—çš„ï¼Œè€Œä¸”ä¸å…·æœ‰ apiVersion æˆ– kind å­—æ®µã€‚\nPod é™¤äº†å¿…é¡»å­—æ®µå¤–ï¼Œåœ¨ DaemonSet ä¸­çš„ Pod æ¨¡æ¿å¿…é¡»æŒ‡å®šåˆç†çš„æ ‡ç­¾ï¼ˆæŸ¥çœ‹ pod selectorï¼‰ã€‚\nåœ¨ DaemonSet ä¸­çš„ Pod æ¨¡æ¿å¿…éœ€å…·æœ‰ä¸€ä¸ªå€¼ä¸º Always çš„ RestartPolicyï¼Œæˆ–è€…æœªæŒ‡å®šå®ƒçš„å€¼ï¼Œé»˜è®¤æ˜¯ Alwaysã€‚\nPod Selector link.spec.selector å­—æ®µè¡¨ç¤º Pod Selectorï¼Œå®ƒä¸ Job æˆ–å…¶å®ƒèµ„æºçš„ .spec.selector çš„åŸç†æ˜¯ç›¸åŒçš„ã€‚\nspec.selector è¡¨ç¤ºä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒç”±å¦‚ä¸‹ä¸¤ä¸ªå­—æ®µç»„æˆï¼š\nmatchLabels - ä¸ ReplicationController çš„ .spec.selector çš„åŸç†ç›¸åŒã€‚ matchExpressions - å…è®¸æ„å»ºæ›´åŠ å¤æ‚çš„ Selectorï¼Œå¯ä»¥é€šè¿‡æŒ‡å®š keyã€value åˆ—è¡¨ï¼Œä»¥åŠä¸ key å’Œ value åˆ—è¡¨çš„ç›¸å…³çš„æ“ä½œç¬¦ã€‚ å½“ä¸Šè¿°ä¸¤ä¸ªå­—æ®µéƒ½æŒ‡å®šæ—¶ï¼Œç»“æœè¡¨ç¤ºçš„æ˜¯ AND å…³ç³»ã€‚\nå¦‚æœæŒ‡å®šäº† .spec.selectorï¼Œå¿…é¡»ä¸ .spec.template.metadata.labels ç›¸åŒ¹é…ã€‚å¦‚æœæ²¡æœ‰æŒ‡å®šï¼Œå®ƒä»¬é»˜è®¤æ˜¯ç­‰ä»·çš„ã€‚å¦‚æœä¸å®ƒä»¬é…ç½®çš„ä¸åŒ¹é…ï¼Œåˆ™ä¼šè¢« API æ‹’ç»ã€‚\nå¦‚æœ Pod çš„ label ä¸ selector åŒ¹é…ï¼Œæˆ–è€…ç›´æ¥åŸºäºå…¶å®ƒçš„ DaemonSetã€æˆ–è€… Controllerï¼ˆä¾‹å¦‚ ReplicationControllerï¼‰ï¼Œä¹Ÿä¸å¯ä»¥åˆ›å»ºä»»ä½• Podã€‚ å¦åˆ™ DaemonSet Controller å°†è®¤ä¸ºé‚£äº› Pod æ˜¯å®ƒåˆ›å»ºçš„ã€‚Kubernetes ä¸ä¼šé˜»æ­¢è¿™æ ·åšã€‚ä¸€ä¸ªåœºæ™¯æ˜¯ï¼Œå¯èƒ½å¸Œæœ›åœ¨ä¸€ä¸ªå…·æœ‰ä¸åŒå€¼çš„ã€ç”¨æ¥æµ‹è¯•ç”¨çš„ Node ä¸Šæ‰‹åŠ¨åˆ›å»º Podã€‚\nä»…åœ¨ç›¸åŒçš„ Node ä¸Šè¿è¡Œ Pod linkå¦‚æœæŒ‡å®šäº† .spec.template.spec.nodeSelectorï¼ŒDaemonSet Controller å°†åœ¨èƒ½å¤ŸåŒ¹é…ä¸Š Node Selector çš„ Node ä¸Šåˆ›å»º Podã€‚ ç±»ä¼¼è¿™ç§æƒ…å†µï¼Œå¯ä»¥æŒ‡å®š .spec.template.spec.affinityï¼Œç„¶å DaemonSet Controller å°†åœ¨èƒ½å¤ŸåŒ¹é…ä¸Š Node Affinity çš„ Node ä¸Šåˆ›å»º Podã€‚ å¦‚æœæ ¹æœ¬å°±æ²¡æœ‰æŒ‡å®šï¼Œåˆ™ DaemonSet Controller å°†åœ¨æ‰€æœ‰ Node ä¸Šåˆ›å»º Podã€‚\nå¦‚ä½•è°ƒåº¦ Daemon Pod linkæ­£å¸¸æƒ…å†µä¸‹ï¼ŒPod è¿è¡Œåœ¨å“ªä¸ªæœºå™¨ä¸Šæ˜¯ç”± Kubernetes è°ƒåº¦å™¨è¿›è¡Œé€‰æ‹©çš„ã€‚ç„¶è€Œï¼Œç”± Daemon Controller åˆ›å»ºçš„ Pod å·²ç»ç¡®å®šäº†åœ¨å“ªä¸ªæœºå™¨ä¸Šï¼ˆPod åˆ›å»ºæ—¶æŒ‡å®šäº† .spec.nodeNameï¼‰ï¼Œå› æ­¤ï¼š\nDaemonSet Controller å¹¶ä¸å…³å¿ƒä¸€ä¸ª Node çš„ unschedulable å­—æ®µã€‚ DaemonSet Controller å¯ä»¥åˆ›å»º Podï¼Œå³ä½¿è°ƒåº¦å™¨è¿˜æ²¡æœ‰è¢«å¯åŠ¨ï¼Œè¿™å¯¹é›†ç¾¤å¯åŠ¨æ˜¯éå¸¸æœ‰å¸®åŠ©çš„ã€‚ Daemon Pod å…³å¿ƒ Taint å’Œ Tolerationï¼Œå®ƒä»¬ä¼šä¸ºæ²¡æœ‰æŒ‡å®š tolerationSeconds çš„ node.alpha.kubernetes.io/notReady å’Œ node.alpha.kubernetes.io/unreachable çš„ Taintï¼Œè€Œåˆ›å»ºå…·æœ‰ NoExecute çš„ Tolerationã€‚è¿™ç¡®ä¿äº†å½“ alpha ç‰¹æ€§çš„ TaintBasedEvictions è¢«å¯ç”¨ï¼Œå½“ Node å‡ºç°æ•…éšœï¼Œæ¯”å¦‚ç½‘ç»œåˆ†åŒºï¼Œè¿™æ—¶å®ƒä»¬å°†ä¸ä¼šè¢«æ¸…é™¤æ‰ï¼ˆå½“ TaintBasedEvictions ç‰¹æ€§æ²¡æœ‰å¯ç”¨ï¼Œåœ¨è¿™äº›åœºæ™¯ä¸‹ä¹Ÿä¸ä¼šè¢«æ¸…é™¤ï¼Œä½†ä¼šå› ä¸º NodeController çš„ç¡¬ç¼–ç è¡Œä¸ºè€Œè¢«æ¸…é™¤ï¼ŒToleration æ˜¯ä¸ä¼šçš„ï¼‰ã€‚\nä¸ Daemon Pod é€šä¿¡ linkä¸ DaemonSet ä¸­çš„ Pod è¿›è¡Œé€šä¿¡ï¼Œå‡ ç§å¯èƒ½çš„æ¨¡å¼å¦‚ä¸‹ï¼š\nPushï¼šé…ç½® DaemonSet ä¸­çš„ Pod å‘å…¶å®ƒ Service å‘é€æ›´æ–°ï¼Œä¾‹å¦‚ç»Ÿè®¡æ•°æ®åº“ã€‚å®ƒä»¬æ²¡æœ‰å®¢æˆ·ç«¯ã€‚ NodeIP å’Œå·²çŸ¥ç«¯å£ï¼šDaemonSet ä¸­çš„ Pod å¯ä»¥ä½¿ç”¨ hostPortï¼Œä»è€Œå¯ä»¥é€šè¿‡ Node IP è®¿é—®åˆ° Podã€‚å®¢æˆ·ç«¯èƒ½é€šè¿‡æŸç§æ–¹æ³•çŸ¥é“ Node IP åˆ—è¡¨ï¼Œå¹¶ä¸”åŸºäºæ­¤ä¹Ÿå¯ä»¥çŸ¥é“ç«¯å£ã€‚ DNSï¼šåˆ›å»ºå…·æœ‰ç›¸åŒ Pod Selector çš„ Headless Serviceï¼Œç„¶åé€šè¿‡ä½¿ç”¨ endpoints èµ„æºæˆ–ä» DNS æ£€ç´¢åˆ°å¤šä¸ª A è®°å½•æ¥å‘ç° DaemonSetã€‚ Serviceï¼šåˆ›å»ºå…·æœ‰ç›¸åŒ Pod Selector çš„ Serviceï¼Œå¹¶ä½¿ç”¨è¯¥ Service è®¿é—®åˆ°æŸä¸ªéšæœº Node ä¸Šçš„ daemonã€‚ï¼ˆæ²¡æœ‰åŠæ³•è®¿é—®åˆ°ç‰¹å®š Nodeï¼‰ æ›´æ–° DaemonSet linkå¦‚æœä¿®æ”¹äº† Node Labelï¼ŒDaemonSet å°†ç«‹åˆ»å‘æ–°åŒ¹é…ä¸Šçš„ Node æ·»åŠ  Podï¼ŒåŒæ—¶åˆ é™¤æ–°è¿‘æ— æ³•åŒ¹é…ä¸Šçš„ Node ä¸Šçš„ Podã€‚\nå¯ä»¥ä¿®æ”¹ DaemonSet åˆ›å»ºçš„ Podã€‚ç„¶è€Œï¼Œä¸å…è®¸å¯¹ Pod çš„æ‰€æœ‰å­—æ®µè¿›è¡Œæ›´æ–°ã€‚å½“ä¸‹æ¬¡ Nodeï¼ˆå³ä½¿å…·æœ‰ç›¸åŒçš„åç§°ï¼‰è¢«åˆ›å»ºæ—¶ï¼ŒDaemonSet Controller è¿˜ä¼šä½¿ç”¨æœ€åˆçš„æ¨¡æ¿ã€‚\nå¯ä»¥åˆ é™¤ä¸€ä¸ª DaemonSetã€‚å¦‚æœä½¿ç”¨ kubectl å¹¶æŒ‡å®š --cascade=false é€‰é¡¹ï¼Œåˆ™ Pod å°†è¢«ä¿ç•™åœ¨ Node ä¸Šã€‚ç„¶åå¯ä»¥åˆ›å»ºå…·æœ‰ä¸åŒæ¨¡æ¿çš„æ–° DaemonSetã€‚å…·æœ‰ä¸åŒæ¨¡æ¿çš„æ–° DaemonSet å°†é¥èƒ½å¤Ÿé€šè¿‡ Label åŒ¹é…è¯†åˆ«æ‰€æœ‰å·²ç»å­˜åœ¨çš„ Podã€‚å®ƒä¸ä¼šä¿®æ”¹æˆ–åˆ é™¤å®ƒä»¬ï¼Œå³ä½¿æ˜¯é”™è¯¯åŒ¹é…äº† Pod æ¨¡æ¿ã€‚é€šè¿‡åˆ é™¤ Pod æˆ–è€… åˆ é™¤ Nodeï¼Œå¯ä»¥å¼ºåˆ¶åˆ›å»ºæ–°çš„ Podã€‚\nåœ¨ Kubernetes 1.6 æˆ–ä»¥åç‰ˆæœ¬ï¼Œå¯ä»¥åœ¨ DaemonSet ä¸Š æ‰§è¡Œæ»šåŠ¨å‡çº§ã€‚\ninit è„šæœ¬ linkå¾ˆå¯èƒ½é€šè¿‡ç›´æ¥åœ¨ä¸€ä¸ª Node ä¸Šå¯åŠ¨ daemon è¿›ç¨‹ï¼ˆä¾‹å¦‚ï¼Œä½¿ç”¨ initã€upstartdã€æˆ– systemdï¼‰ã€‚è¿™éå¸¸å¥½ï¼Œç„¶è€ŒåŸºäº DaemonSet æ¥è¿è¡Œè¿™äº›è¿›ç¨‹æœ‰å¦‚ä¸‹ä¸€äº›å¥½å¤„ï¼š\nåƒå¯¹å¾…åº”ç”¨ç¨‹åºä¸€æ ·ï¼Œå…·å¤‡ä¸º daemon æä¾›ç›‘æ§å’Œç®¡ç†æ—¥å¿—çš„èƒ½åŠ›ã€‚ ä¸º daemon å’Œåº”ç”¨ç¨‹åºä½¿ç”¨ç›¸åŒçš„é…ç½®è¯­è¨€å’Œå·¥å…·ï¼ˆå¦‚ Pod æ¨¡æ¿ã€kubectlï¼‰ã€‚ Kubernetes æœªæ¥ç‰ˆæœ¬å¯èƒ½ä¼šæ”¯æŒå¯¹ DaemonSet åˆ›å»º Pod ä¸ Nodeå‡çº§å·¥ä½œæµè¿›è¡Œé›†æˆã€‚ åœ¨èµ„æºå—é™çš„å®¹å™¨ä¸­è¿è¡Œ daemonï¼Œèƒ½å¤Ÿå¢åŠ  daemon å’Œåº”ç”¨å®¹å™¨çš„éš”ç¦»æ€§ã€‚ç„¶è€Œè¿™ä¹Ÿå®ç°äº†åœ¨å®¹å™¨ä¸­è¿è¡Œ daemonï¼Œä½†å´ä¸èƒ½åœ¨ Pod ä¸­è¿è¡Œï¼ˆä¾‹å¦‚ï¼Œç›´æ¥åŸºäº Docker å¯åŠ¨ï¼‰ã€‚ è£¸ Pod linkå¯èƒ½è¦ç›´æ¥åˆ›å»º Podï¼ŒåŒæ—¶æŒ‡å®šå…¶è¿è¡Œåœ¨ç‰¹å®šçš„ Node ä¸Šã€‚ ç„¶è€Œï¼ŒDaemonSet æ›¿æ¢äº†ç”±äºä»»ä½•åŸå› è¢«åˆ é™¤æˆ–ç»ˆæ­¢çš„ Podï¼Œä¾‹å¦‚ Node å¤±è´¥ã€ä¾‹è¡ŒèŠ‚ç‚¹ç»´æŠ¤ï¼Œæ¯”å¦‚å†…æ ¸å‡çº§ã€‚ç”±äºè¿™ä¸ªåŸå› ï¼Œæˆ‘ä»¬åº”è¯¥ä½¿ç”¨ DaemonSet è€Œä¸æ˜¯å•ç‹¬åˆ›å»º Podã€‚\né™æ€ Pod linkå¾ˆå¯èƒ½ï¼Œé€šè¿‡åœ¨ä¸€ä¸ªæŒ‡å®šç›®å½•ä¸‹ç¼–å†™æ–‡ä»¶æ¥åˆ›å»º Podï¼Œè¯¥ç›®å½•å— Kubelet æ‰€ç›‘è§†ã€‚è¿™äº› Pod è¢«ç§°ä¸º é™æ€ Podã€‚ ä¸åƒ DaemonSetï¼Œé™æ€ Pod ä¸å— kubectl å’Œ å…¶å®ƒ Kubernetes API å®¢æˆ·ç«¯ç®¡ç†ã€‚é™æ€ Pod ä¸ä¾èµ–äº apiserverï¼Œè¿™ä½¿å¾—å®ƒä»¬åœ¨é›†ç¾¤å¯åŠ¨çš„æƒ…å†µä¸‹éå¸¸æœ‰ç”¨ã€‚ è€Œä¸”ï¼Œæœªæ¥é™æ€ Pod å¯èƒ½ä¼šè¢«åºŸå¼ƒæ‰ã€‚\nReplication Controller linkDaemonSet ä¸ Replication Controller éå¸¸ç±»ä¼¼ï¼Œå®ƒä»¬éƒ½èƒ½åˆ›å»º Podï¼Œè¿™äº› Pod éƒ½å…·æœ‰ä¸æœŸæœ›è¢«ç»ˆæ­¢çš„è¿›ç¨‹ï¼ˆä¾‹å¦‚ï¼ŒWeb æœåŠ¡å™¨ã€å­˜å‚¨æœåŠ¡å™¨ï¼‰ã€‚ ä¸ºæ— çŠ¶æ€çš„ Service ä½¿ç”¨ Replication Controllerï¼Œåƒ frontendï¼Œå®ç°å¯¹å‰¯æœ¬çš„æ•°é‡è¿›è¡Œæ‰©ç¼©å®¹ã€å¹³æ»‘å‡çº§ï¼Œæ¯”ä¹‹äºç²¾ç¡®æ§åˆ¶ Pod è¿è¡Œåœ¨æŸä¸ªä¸»æœºä¸Šè¦é‡è¦å¾—å¤šã€‚éœ€è¦ Pod å‰¯æœ¬æ€»æ˜¯è¿è¡Œåœ¨å…¨éƒ¨æˆ–ç‰¹å®šä¸»æœºä¸Šï¼Œå¹¶éœ€è¦å…ˆäºå…¶ä»– Pod å¯åŠ¨ï¼Œå½“è¿™è¢«è®¤ä¸ºéå¸¸é‡è¦æ—¶ï¼Œåº”è¯¥ä½¿ç”¨ Daemon Controllerã€‚\n"
            }
        );
    index.add(
            {
                id:  58 ,
                href: "\/docs\/information\/software\/cloud\/k8s_rs_manager\/replicaset\/",
                title: "ReplicationController å’Œ ReplicaSet",
                description: "ReplicationController ç”¨æ¥ç¡®ä¿å®¹å™¨åº”ç”¨çš„å‰¯æœ¬æ•°å§‹ç»ˆä¿æŒåœ¨ç”¨æˆ·å®šä¹‰çš„å‰¯æœ¬æ•°ï¼Œå³å¦‚æœæœ‰å®¹å™¨å¼‚å¸¸é€€å‡ºï¼Œä¼šè‡ªåŠ¨åˆ›å»ºæ–°çš„ Pod æ¥æ›¿ä»£ï¼›è€Œå¦‚æœå¼‚å¸¸å¤šå‡ºæ¥çš„å®¹å™¨ä¹Ÿä¼šè‡ªåŠ¨å›æ”¶ã€‚\nåœ¨æ–°ç‰ˆæœ¬çš„ Kubernetes ä¸­å»ºè®®ä½¿ç”¨ ReplicaSet æ¥å–ä»£ ReplicationControllerã€‚ReplicaSet è·Ÿ ReplicationController æ²¡æœ‰æœ¬è´¨çš„ä¸åŒï¼Œåªæ˜¯åå­—ä¸ä¸€æ ·ï¼Œå¹¶ä¸” ReplicaSet æ”¯æŒé›†åˆå¼çš„ selectorã€‚\nè™½ç„¶ ReplicaSet å¯ä»¥ç‹¬ç«‹ä½¿ç”¨ï¼Œä½†ä¸€èˆ¬è¿˜æ˜¯å»ºè®®ä½¿ç”¨ Deployment æ¥è‡ªåŠ¨ç®¡ç† ReplicaSetï¼Œè¿™æ ·å°±æ— éœ€æ‹…å¿ƒè·Ÿå…¶ä»–æœºåˆ¶çš„ä¸å…¼å®¹é—®é¢˜ï¼ˆæ¯”å¦‚ ReplicaSet ä¸æ”¯æŒ rolling-update ä½† Deployment æ”¯æŒï¼‰ã€‚\nReplicaSet ç¤ºä¾‹ï¼š\napiVersion: extensions/v1beta1 kind: ReplicaSet metadata: name: frontend # these labels can be applied automatically # from the labels in the pod template if not set # labels: # app: guestbook # tier: frontend spec: # this replicas value is default # modify it according to your case replicas: 3 # selector can be applied automatically # from the labels in the pod template if not set, # but we are specifying the selector here to # demonstrate its usage. selector: matchLabels: tier: frontend matchExpressions: - {key: tier, operator: In, values: [frontend]} template: metadata: labels: app: guestbook tier: frontend spec: containers: - name: php-redis image: gcr.io/google_samples/gb-frontend:v3 resources: requests: cpu: 100m memory: 100Mi env: - name: GET_HOSTS_FROM value: dns # If your cluster config does not include a dns service, then to # instead access environment variables to find service host # info, comment out the 'value: dns' line above, and uncomment the # line below. # value: env ports: - containerPort: 80 ",
                content: "ReplicationController ç”¨æ¥ç¡®ä¿å®¹å™¨åº”ç”¨çš„å‰¯æœ¬æ•°å§‹ç»ˆä¿æŒåœ¨ç”¨æˆ·å®šä¹‰çš„å‰¯æœ¬æ•°ï¼Œå³å¦‚æœæœ‰å®¹å™¨å¼‚å¸¸é€€å‡ºï¼Œä¼šè‡ªåŠ¨åˆ›å»ºæ–°çš„ Pod æ¥æ›¿ä»£ï¼›è€Œå¦‚æœå¼‚å¸¸å¤šå‡ºæ¥çš„å®¹å™¨ä¹Ÿä¼šè‡ªåŠ¨å›æ”¶ã€‚\nåœ¨æ–°ç‰ˆæœ¬çš„ Kubernetes ä¸­å»ºè®®ä½¿ç”¨ ReplicaSet æ¥å–ä»£ ReplicationControllerã€‚ReplicaSet è·Ÿ ReplicationController æ²¡æœ‰æœ¬è´¨çš„ä¸åŒï¼Œåªæ˜¯åå­—ä¸ä¸€æ ·ï¼Œå¹¶ä¸” ReplicaSet æ”¯æŒé›†åˆå¼çš„ selectorã€‚\nè™½ç„¶ ReplicaSet å¯ä»¥ç‹¬ç«‹ä½¿ç”¨ï¼Œä½†ä¸€èˆ¬è¿˜æ˜¯å»ºè®®ä½¿ç”¨ Deployment æ¥è‡ªåŠ¨ç®¡ç† ReplicaSetï¼Œè¿™æ ·å°±æ— éœ€æ‹…å¿ƒè·Ÿå…¶ä»–æœºåˆ¶çš„ä¸å…¼å®¹é—®é¢˜ï¼ˆæ¯”å¦‚ ReplicaSet ä¸æ”¯æŒ rolling-update ä½† Deployment æ”¯æŒï¼‰ã€‚\nReplicaSet ç¤ºä¾‹ï¼š\napiVersion: extensions/v1beta1 kind: ReplicaSet metadata: name: frontend # these labels can be applied automatically # from the labels in the pod template if not set # labels: # app: guestbook # tier: frontend spec: # this replicas value is default # modify it according to your case replicas: 3 # selector can be applied automatically # from the labels in the pod template if not set, # but we are specifying the selector here to # demonstrate its usage. selector: matchLabels: tier: frontend matchExpressions: - {key: tier, operator: In, values: [frontend]} template: metadata: labels: app: guestbook tier: frontend spec: containers: - name: php-redis image: gcr.io/google_samples/gb-frontend:v3 resources: requests: cpu: 100m memory: 100Mi env: - name: GET_HOSTS_FROM value: dns # If your cluster config does not include a dns service, then to # instead access environment variables to find service host # info, comment out the 'value: dns' line above, and uncomment the # line below. # value: env ports: - containerPort: 80 "
            }
        );
    index.add(
            {
                id:  59 ,
                href: "\/docs\/information\/software\/cloud\/k8s_rs_manager\/job_cronjob\/",
                title: "Job \u0026 CronJob",
                description: "Job linkJob è´Ÿè´£æ‰¹å¤„ç†ä»»åŠ¡ï¼Œå³ä»…æ‰§è¡Œä¸€æ¬¡çš„ä»»åŠ¡ï¼Œå®ƒä¿è¯æ‰¹å¤„ç†ä»»åŠ¡çš„ä¸€ä¸ªæˆ–å¤šä¸ª Pod æˆåŠŸç»“æŸã€‚\nJob Spec æ ¼å¼ link spec.template æ ¼å¼åŒ Pod RestartPolicy ä»…æ”¯æŒ Never æˆ– OnFailure å•ä¸ª Pod æ—¶ï¼Œé»˜è®¤ Pod æˆåŠŸè¿è¡Œå Job å³ç»“æŸ .spec.completions æ ‡å¿— Job ç»“æŸéœ€è¦æˆåŠŸè¿è¡Œçš„ Pod ä¸ªæ•°ï¼Œé»˜è®¤ä¸º 1 .spec.parallelism æ ‡å¿—å¹¶è¡Œè¿è¡Œçš„ Pod çš„ä¸ªæ•°ï¼Œé»˜è®¤ä¸º 1 spec.activeDeadlineSeconds æ ‡å¿—å¤±è´¥ Pod çš„é‡è¯•æœ€å¤§æ—¶é—´ï¼Œè¶…è¿‡è¿™ä¸ªæ—¶é—´ä¸ä¼šç»§ç»­é‡è¯• ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š\napiVersion: batch/v1 kind: Job metadata: name: pi spec: template: metadata: name: pi spec: containers: - name: pi image: perl command: [\"perl\", \"-Mbignum=bpi\", \"-wle\", \"print bpi(2000)\"] restartPolicy: Never $ kubectl create -f ./job.yaml job \"pi\" created $ pods=$(kubectl get pods --selector=job-name=pi --output=jsonpath={.items..metadata.name}) $ kubectl logs $pods -c pi 3.141592653589793238462643383279502... Bare Pod linkæ‰€è°“ Bare Pod æ˜¯æŒ‡ç›´æ¥ç”¨ PodSpec æ¥åˆ›å»ºçš„ Podï¼ˆå³ä¸åœ¨ ReplicaSet æˆ–è€… ReplicationController çš„ç®¡ç†ä¹‹ä¸‹çš„ Podï¼‰ã€‚è¿™äº› Pod åœ¨ Node é‡å¯åä¸ä¼šè‡ªåŠ¨é‡å¯ï¼Œä½† Job åˆ™ä¼šåˆ›å»ºæ–°çš„ Pod ç»§ç»­ä»»åŠ¡ã€‚æ‰€ä»¥ï¼Œæ¨èä½¿ç”¨ Job æ¥æ›¿ä»£ Bare Podï¼Œå³ä¾¿æ˜¯åº”ç”¨åªéœ€è¦ä¸€ä¸ª Podã€‚\n",
                content: "Job linkJob è´Ÿè´£æ‰¹å¤„ç†ä»»åŠ¡ï¼Œå³ä»…æ‰§è¡Œä¸€æ¬¡çš„ä»»åŠ¡ï¼Œå®ƒä¿è¯æ‰¹å¤„ç†ä»»åŠ¡çš„ä¸€ä¸ªæˆ–å¤šä¸ª Pod æˆåŠŸç»“æŸã€‚\nJob Spec æ ¼å¼ link spec.template æ ¼å¼åŒ Pod RestartPolicy ä»…æ”¯æŒ Never æˆ– OnFailure å•ä¸ª Pod æ—¶ï¼Œé»˜è®¤ Pod æˆåŠŸè¿è¡Œå Job å³ç»“æŸ .spec.completions æ ‡å¿— Job ç»“æŸéœ€è¦æˆåŠŸè¿è¡Œçš„ Pod ä¸ªæ•°ï¼Œé»˜è®¤ä¸º 1 .spec.parallelism æ ‡å¿—å¹¶è¡Œè¿è¡Œçš„ Pod çš„ä¸ªæ•°ï¼Œé»˜è®¤ä¸º 1 spec.activeDeadlineSeconds æ ‡å¿—å¤±è´¥ Pod çš„é‡è¯•æœ€å¤§æ—¶é—´ï¼Œè¶…è¿‡è¿™ä¸ªæ—¶é—´ä¸ä¼šç»§ç»­é‡è¯• ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š\napiVersion: batch/v1 kind: Job metadata: name: pi spec: template: metadata: name: pi spec: containers: - name: pi image: perl command: [\"perl\", \"-Mbignum=bpi\", \"-wle\", \"print bpi(2000)\"] restartPolicy: Never $ kubectl create -f ./job.yaml job \"pi\" created $ pods=$(kubectl get pods --selector=job-name=pi --output=jsonpath={.items..metadata.name}) $ kubectl logs $pods -c pi 3.141592653589793238462643383279502... Bare Pod linkæ‰€è°“ Bare Pod æ˜¯æŒ‡ç›´æ¥ç”¨ PodSpec æ¥åˆ›å»ºçš„ Podï¼ˆå³ä¸åœ¨ ReplicaSet æˆ–è€… ReplicationController çš„ç®¡ç†ä¹‹ä¸‹çš„ Podï¼‰ã€‚è¿™äº› Pod åœ¨ Node é‡å¯åä¸ä¼šè‡ªåŠ¨é‡å¯ï¼Œä½† Job åˆ™ä¼šåˆ›å»ºæ–°çš„ Pod ç»§ç»­ä»»åŠ¡ã€‚æ‰€ä»¥ï¼Œæ¨èä½¿ç”¨ Job æ¥æ›¿ä»£ Bare Podï¼Œå³ä¾¿æ˜¯åº”ç”¨åªéœ€è¦ä¸€ä¸ª Podã€‚\nCronJob linkCron Job ç®¡ç†åŸºäºæ—¶é—´çš„ Jobï¼Œå³ï¼š\nåœ¨ç»™å®šæ—¶é—´ç‚¹åªè¿è¡Œä¸€æ¬¡ å‘¨æœŸæ€§åœ°åœ¨ç»™å®šæ—¶é—´ç‚¹è¿è¡Œ ä¸€ä¸ª CronJob å¯¹è±¡ç±»ä¼¼äº crontab ï¼ˆcron tableï¼‰æ–‡ä»¶ä¸­çš„ä¸€è¡Œã€‚å®ƒæ ¹æ®æŒ‡å®šçš„é¢„å®šè®¡åˆ’å‘¨æœŸæ€§åœ°è¿è¡Œä¸€ä¸ª Jobï¼Œæ ¼å¼å¯ä»¥å‚è€ƒ Cron ã€‚\nå‰ææ¡ä»¶ linkå½“å‰ä½¿ç”¨çš„ Kubernetes é›†ç¾¤ï¼Œç‰ˆæœ¬ \u003e= 1.8ï¼ˆå¯¹ CronJobï¼‰ã€‚å¯¹äºå…ˆå‰ç‰ˆæœ¬çš„é›†ç¾¤ï¼Œç‰ˆæœ¬ \u003c 1.8ï¼Œå¯åŠ¨ API Serverï¼ˆå‚è€ƒ ä¸ºé›†ç¾¤å¼€å¯æˆ–å…³é—­ API ç‰ˆæœ¬ è·å–æ›´å¤šä¿¡æ¯ï¼‰æ—¶ï¼Œé€šè¿‡ä¼ é€’é€‰é¡¹ --runtime-config=batch/v2alpha1=true å¯ä»¥å¼€å¯ batch/v2alpha1 APIã€‚\nå…¸å‹çš„ç”¨æ³•å¦‚ä¸‹æ‰€ç¤ºï¼š\nåœ¨ç»™å®šçš„æ—¶é—´ç‚¹è°ƒåº¦ Job è¿è¡Œ åˆ›å»ºå‘¨æœŸæ€§è¿è¡Œçš„ Jobï¼Œä¾‹å¦‚ï¼šæ•°æ®åº“å¤‡ä»½ã€å‘é€é‚®ä»¶ã€‚ CronJob Spec link .spec.scheduleï¼šè°ƒåº¦ï¼Œå¿…éœ€å­—æ®µï¼ŒæŒ‡å®šä»»åŠ¡è¿è¡Œå‘¨æœŸï¼Œæ ¼å¼åŒ Cron\n.spec.jobTemplateï¼šJob æ¨¡æ¿ï¼Œå¿…éœ€å­—æ®µï¼ŒæŒ‡å®šéœ€è¦è¿è¡Œçš„ä»»åŠ¡ï¼Œæ ¼å¼åŒ Job\n.spec.startingDeadlineSeconds ï¼šå¯åŠ¨ Job çš„æœŸé™ï¼ˆç§’çº§åˆ«ï¼‰ï¼Œè¯¥å­—æ®µæ˜¯å¯é€‰çš„ã€‚å¦‚æœå› ä¸ºä»»ä½•åŸå› è€Œé”™è¿‡äº†è¢«è°ƒåº¦çš„æ—¶é—´ï¼Œé‚£ä¹ˆé”™è¿‡æ‰§è¡Œæ—¶é—´çš„ Job å°†è¢«è®¤ä¸ºæ˜¯å¤±è´¥çš„ã€‚å¦‚æœæ²¡æœ‰æŒ‡å®šï¼Œåˆ™æ²¡æœ‰æœŸé™\n.spec.concurrencyPolicyï¼šå¹¶å‘ç­–ç•¥ï¼Œè¯¥å­—æ®µä¹Ÿæ˜¯å¯é€‰çš„ã€‚å®ƒæŒ‡å®šäº†å¦‚ä½•å¤„ç†è¢« Cron Job åˆ›å»ºçš„ Job çš„å¹¶å‘æ‰§è¡Œã€‚åªå…è®¸æŒ‡å®šä¸‹é¢ç­–ç•¥ä¸­çš„ä¸€ç§ï¼š\nAllowï¼ˆé»˜è®¤ï¼‰ï¼šå…è®¸å¹¶å‘è¿è¡Œ Job Forbidï¼šç¦æ­¢å¹¶å‘è¿è¡Œï¼Œå¦‚æœå‰ä¸€ä¸ªè¿˜æ²¡æœ‰å®Œæˆï¼Œåˆ™ç›´æ¥è·³è¿‡ä¸‹ä¸€ä¸ª Replaceï¼šå–æ¶ˆå½“å‰æ­£åœ¨è¿è¡Œçš„ Jobï¼Œç”¨ä¸€ä¸ªæ–°çš„æ¥æ›¿æ¢ æ³¨æ„ï¼Œå½“å‰ç­–ç•¥åªèƒ½åº”ç”¨äºåŒä¸€ä¸ª Cron Job åˆ›å»ºçš„ Jobã€‚å¦‚æœå­˜åœ¨å¤šä¸ª Cron Jobï¼Œå®ƒä»¬åˆ›å»ºçš„ Job ä¹‹é—´æ€»æ˜¯å…è®¸å¹¶å‘è¿è¡Œã€‚\n.spec.suspend ï¼šæŒ‚èµ·ï¼Œè¯¥å­—æ®µä¹Ÿæ˜¯å¯é€‰çš„ã€‚å¦‚æœè®¾ç½®ä¸º trueï¼Œåç»­æ‰€æœ‰æ‰§è¡Œéƒ½ä¼šè¢«æŒ‚èµ·ã€‚å®ƒå¯¹å·²ç»å¼€å§‹æ‰§è¡Œçš„ Job ä¸èµ·ä½œç”¨ã€‚é»˜è®¤å€¼ä¸º falseã€‚\n.spec.successfulJobsHistoryLimit å’Œ .spec.failedJobsHistoryLimit ï¼šå†å²é™åˆ¶ï¼Œæ˜¯å¯é€‰çš„å­—æ®µã€‚å®ƒä»¬æŒ‡å®šäº†å¯ä»¥ä¿ç•™å¤šå°‘å®Œæˆå’Œå¤±è´¥çš„ Jobã€‚\né»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒä»¬åˆ†åˆ«è®¾ç½®ä¸º 3 å’Œ 1ã€‚è®¾ç½®é™åˆ¶çš„å€¼ä¸º 0ï¼Œç›¸å…³ç±»å‹çš„ Job å®Œæˆåå°†ä¸ä¼šè¢«ä¿ç•™ã€‚\napiVersion: batch/v1beta1 kind: CronJob metadata: name: hello spec: schedule: \"*/1 * * * *\" jobTemplate: spec: template: spec: containers: - name: hello image: busybox args: - /bin/sh - -c - date; echo Hello from the Kubernetes cluster restartPolicy: OnFailure $ kubectl create -f cronjob.yaml cronjob \"hello\" created å½“ç„¶ï¼Œä¹Ÿå¯ä»¥ç”¨kubectl runæ¥åˆ›å»ºä¸€ä¸ªCronJobï¼š\nkubectl run hello --schedule=\"*/1 * * * *\" --restart=OnFailure --image=busybox -- /bin/sh -c \"date; echo Hello from the Kubernetes cluster\" $ kubectl get cronjob NAME SCHEDULE SUSPEND ACTIVE LAST-SCHEDULE hello */1 * * * * False 0 $ kubectl get jobs NAME DESIRED SUCCESSFUL AGE hello-1202039034 1 1 49s $ pods=$(kubectl get pods --selector=job-name=hello-1202039034 --output=jsonpath={.items..metadata.name}) $ kubectl logs $pods Mon Aug 29 21:34:09 UTC 2016 Hello from the Kubernetes cluster # æ³¨æ„ï¼Œåˆ é™¤ cronjob çš„æ—¶å€™ä¸ä¼šè‡ªåŠ¨åˆ é™¤ jobï¼Œè¿™äº› job å¯ä»¥ç”¨ kubectl delete job æ¥åˆ é™¤ $ kubectl delete cronjob hello cronjob \"hello\" deleted Cron Job é™åˆ¶ linkCron Job åœ¨æ¯æ¬¡è°ƒåº¦è¿è¡Œæ—¶é—´å†… å¤§æ¦‚ ä¼šåˆ›å»ºä¸€ä¸ª Job å¯¹è±¡ã€‚æˆ‘ä»¬ä¹‹æ‰€ä»¥è¯´ å¤§æ¦‚ ï¼Œæ˜¯å› ä¸ºåœ¨ç‰¹å®šçš„ç¯å¢ƒä¸‹å¯èƒ½ä¼šåˆ›å»ºä¸¤ä¸ª Jobï¼Œæˆ–è€…ä¸€ä¸ª Job éƒ½æ²¡åˆ›å»ºã€‚æˆ‘ä»¬å°è¯•å°‘å‘ç”Ÿè¿™ç§æƒ…å†µï¼Œä½†å´ä¸èƒ½å®Œå…¨é¿å…ã€‚å› æ­¤ï¼Œåˆ›å»º Job æ“ä½œåº”è¯¥æ˜¯ å¹‚ç­‰çš„ã€‚\nJob æ ¹æ®å®ƒæ‰€åˆ›å»ºçš„ Pod çš„å¹¶è¡Œåº¦ï¼Œè´Ÿè´£é‡è¯•åˆ›å»º Podï¼Œå¹¶å°±å†³å®šè¿™ä¸€ç»„ Pod çš„æˆåŠŸæˆ–å¤±è´¥ã€‚Cron Job æ ¹æœ¬å°±ä¸ä¼šå»æ£€æŸ¥ Podã€‚\nåˆ é™¤ Cron Job linkä¸€æ—¦ä¸å†éœ€è¦ Cron Jobï¼Œç®€å•åœ°å¯ä»¥ä½¿ç”¨ kubectl å‘½ä»¤åˆ é™¤å®ƒï¼š\n$ kubectl delete cronjob hello cronjob \"hello\" deleted è¿™å°†ä¼šç»ˆæ­¢æ­£åœ¨åˆ›å»ºçš„ Jobã€‚ç„¶è€Œï¼Œè¿è¡Œä¸­çš„ Job å°†ä¸ä¼šè¢«ç»ˆæ­¢ï¼Œä¸ä¼šåˆ é™¤ Job æˆ– å®ƒä»¬çš„ Podã€‚ä¸ºäº†æ¸…ç†é‚£äº› Job å’Œ Podï¼Œéœ€è¦åˆ—å‡ºè¯¥ Cron Job åˆ›å»ºçš„å…¨éƒ¨ Jobï¼Œç„¶ååˆ é™¤å®ƒä»¬ï¼š\n$ kubectl get jobs NAME DESIRED SUCCESSFUL AGE hello-1201907962 1 1 11m hello-1202039034 1 1 8m ... $ kubectl delete jobs hello-1201907962 hello-1202039034 ... job \"hello-1201907962\" deleted job \"hello-1202039034\" deleted ... ä¸€æ—¦ Job è¢«åˆ é™¤ï¼Œç”± Job åˆ›å»ºçš„ Pod ä¹Ÿä¼šè¢«åˆ é™¤ã€‚æ³¨æ„ï¼Œæ‰€æœ‰ç”±åç§°ä¸º â€œhelloâ€ çš„ Cron Job åˆ›å»ºçš„ Job ä¼šä»¥å‰ç¼€å­—ç¬¦ä¸² â€œhello-â€ è¿›è¡Œå‘½åã€‚å¦‚æœæƒ³è¦åˆ é™¤å½“å‰ Namespace ä¸­çš„æ‰€æœ‰ Jobï¼Œå¯ä»¥é€šè¿‡å‘½ä»¤ kubectl delete jobs --all ç«‹åˆ»åˆ é™¤å®ƒä»¬ã€‚\n"
            }
        );
    index.add(
            {
                id:  60 ,
                href: "\/docs\/information\/software\/cloud\/k8s_rs_manager\/ingress\/",
                title: "Ingress",
                description: "Ingress æ˜¯ä» Kubernetes é›†ç¾¤å¤–éƒ¨è®¿é—®é›†ç¾¤å†…éƒ¨æœåŠ¡çš„å…¥å£ï¼Œè¿™ç¯‡æ–‡ç« éƒ¨åˆ†è¯‘è‡ª Kubernetes å®˜æ–¹æ–‡æ¡£ Ingress Resourceï¼Œåé¢çš„ç« èŠ‚ä¼šè®²åˆ°ä½¿ç”¨ Traefik æ¥åš Ingress controllerï¼Œæ–‡ç« æœ«å°¾ç»™å‡ºäº†å‡ ä¸ªç›¸å…³é“¾æ¥ã€‚\n",
                content: "Ingress æ˜¯ä» Kubernetes é›†ç¾¤å¤–éƒ¨è®¿é—®é›†ç¾¤å†…éƒ¨æœåŠ¡çš„å…¥å£ï¼Œè¿™ç¯‡æ–‡ç« éƒ¨åˆ†è¯‘è‡ª Kubernetes å®˜æ–¹æ–‡æ¡£ Ingress Resourceï¼Œåé¢çš„ç« èŠ‚ä¼šè®²åˆ°ä½¿ç”¨ Traefik æ¥åš Ingress controllerï¼Œæ–‡ç« æœ«å°¾ç»™å‡ºäº†å‡ ä¸ªç›¸å…³é“¾æ¥ã€‚\n**æœ¯è¯­ **\nåœ¨æœ¬ç¯‡æ–‡ç« ä¸­ä½ å°†ä¼šçœ‹åˆ°ä¸€äº›åœ¨å…¶ä»–åœ°æ–¹è¢«äº¤å‰ä½¿ç”¨çš„æœ¯è¯­ï¼Œä¸ºäº†é˜²æ­¢äº§ç”Ÿæ­§ä¹‰ï¼Œæˆ‘ä»¬é¦–å…ˆæ¥æ¾„æ¸…ä¸‹ã€‚\nèŠ‚ç‚¹ï¼šKubernetes é›†ç¾¤ä¸­çš„ä¸€å°ç‰©ç†æœºæˆ–è€…è™šæ‹Ÿæœºã€‚ é›†ç¾¤ï¼šä½äº Internet é˜²ç«å¢™åçš„èŠ‚ç‚¹ï¼Œè¿™æ˜¯ kubernetes ç®¡ç†çš„ä¸»è¦è®¡ç®—èµ„æºã€‚ è¾¹ç•Œè·¯ç”±å™¨ï¼šä¸ºé›†ç¾¤å¼ºåˆ¶æ‰§è¡Œé˜²ç«å¢™ç­–ç•¥çš„è·¯ç”±å™¨ã€‚ è¿™å¯èƒ½æ˜¯ç”±äº‘æä¾›å•†æˆ–ç‰©ç†ç¡¬ä»¶ç®¡ç†çš„ç½‘å…³ã€‚ é›†ç¾¤ç½‘ç»œï¼šä¸€ç»„é€»è¾‘æˆ–ç‰©ç†é“¾æ¥ï¼Œå¯æ ¹æ® Kubernetes ç½‘ç»œæ¨¡å‹ å®ç°ç¾¤é›†å†…çš„é€šä¿¡ã€‚ é›†ç¾¤ç½‘ç»œçš„å®ç°åŒ…æ‹¬ Overlay æ¨¡å‹çš„ flannel å’ŒåŸºäº SDN çš„ OVSã€‚ æœåŠ¡ï¼šä½¿ç”¨æ ‡ç­¾é€‰æ‹©å™¨æ ‡è¯†ä¸€ç»„ pod æˆä¸ºçš„ Kubernetes æœåŠ¡ã€‚ é™¤éå¦æœ‰è¯´æ˜ï¼Œå¦åˆ™æœåŠ¡å‡å®šåœ¨é›†ç¾¤ç½‘ç»œå†…ä»…å¯é€šè¿‡è™šæ‹Ÿ IP è®¿é—®ã€‚ ä»€ä¹ˆæ˜¯ Ingressï¼Ÿ linké€šå¸¸æƒ…å†µä¸‹ï¼Œservice å’Œ pod ä»…å¯åœ¨é›†ç¾¤å†…éƒ¨ç½‘ç»œä¸­é€šè¿‡ IP åœ°å€è®¿é—®ã€‚æ‰€æœ‰åˆ°è¾¾è¾¹ç•Œè·¯ç”±å™¨çš„æµé‡æˆ–è¢«ä¸¢å¼ƒæˆ–è¢«è½¬å‘åˆ°å…¶ä»–åœ°æ–¹ã€‚ä»æ¦‚å¿µä¸Šè®²ï¼Œå¯èƒ½åƒä¸‹é¢è¿™æ ·ï¼š\ninternet | ------------ [Services] Ingress æ˜¯æˆæƒå…¥ç«™è¿æ¥åˆ°è¾¾é›†ç¾¤æœåŠ¡çš„è§„åˆ™é›†åˆã€‚\ninternet | [Ingress] --|-----|-- [Services] ä½ å¯ä»¥ç»™ Ingress é…ç½®æä¾›å¤–éƒ¨å¯è®¿é—®çš„ URLã€è´Ÿè½½å‡è¡¡ã€SSLã€åŸºäºåç§°çš„è™šæ‹Ÿä¸»æœºç­‰ã€‚ç”¨æˆ·é€šè¿‡ POST Ingress èµ„æºåˆ° API server çš„æ–¹å¼æ¥è¯·æ±‚ ingressã€‚ Ingress controller è´Ÿè´£å®ç° Ingressï¼Œé€šå¸¸ä½¿ç”¨è´Ÿè½½å‡è¡¡å™¨ï¼Œå®ƒè¿˜å¯ä»¥é…ç½®è¾¹ç•Œè·¯ç”±å’Œå…¶ä»–å‰ç«¯ï¼Œè¿™æœ‰åŠ©äºä»¥é«˜å¯ç”¨çš„æ–¹å¼å¤„ç†æµé‡ã€‚\nå…ˆå†³æ¡ä»¶ linkåœ¨ä½¿ç”¨ Ingress èµ„æºä¹‹å‰ï¼Œæœ‰å¿…è¦å…ˆäº†è§£ä¸‹é¢å‡ ä»¶äº‹æƒ…ã€‚\nIngress èµ„æºå¯¹è±¡åœ¨ Kubernetes 1.1 ä¹‹å‰è¿˜æ²¡æœ‰ã€‚ ä½ éœ€è¦ä¸€ä¸ª Ingress Controller æ¥å®ç° Ingressï¼Œå•çº¯çš„åˆ›å»ºä¸€ä¸ª Ingress æ²¡æœ‰ä»»ä½•æ„ä¹‰ã€‚ GCE/GKE ä¼šåœ¨ master èŠ‚ç‚¹ä¸Šéƒ¨ç½²ä¸€ä¸ª ingress controllerã€‚ä½ å¯ä»¥åœ¨ä¸€ä¸ª pod ä¸­éƒ¨ç½²ä»»æ„ä¸ªè‡ªå®šä¹‰çš„ ingress controllerã€‚ä½ å¿…é¡»æ­£ç¡®åœ°æ³¨è§£æ¯ä¸ª ingressï¼Œæ¯”å¦‚è¿è¡Œå¤šä¸ª ingress controller å’Œå…³é—­ glbcã€‚ åœ¨é GCE/GKE çš„ç¯å¢ƒä¸­ï¼Œä½ éœ€è¦åœ¨ pod ä¸­ éƒ¨ç½²ä¸€ä¸ª controllerï¼Œä¾‹å¦‚ Nginx Ingress Controllerã€‚ Ingress èµ„æº linkæœ€ç®€åŒ–çš„ Ingress é…ç½®å¦‚ä¸‹ã€‚\n1: apiVersion: extensions/v1beta1 2: kind: Ingress 3: metadata: 4: name: test-ingress 5: spec: 6: rules: 7: - http: 8: paths: 9: - path: /testpath 10: backend: 11: serviceName: test 12: servicePort: 80 å¦‚æœä½ æ²¡æœ‰é…ç½® Ingress controller å°±å°†å…¶ POST åˆ° API server ä¸ä¼šæœ‰ä»»ä½•ç”¨å¤„ã€‚\né…ç½®è¯´æ˜\n**1-4 è¡Œ **ï¼šè·Ÿ Kubernetes çš„å…¶ä»–é…ç½®ä¸€æ ·ï¼Œingress çš„é…ç½®ä¹Ÿéœ€è¦ apiVersionï¼Œkind å’Œ metadata å­—æ®µã€‚é…ç½®æ–‡ä»¶çš„è¯¦ç»†è¯´æ˜è¯·æŸ¥çœ‹ éƒ¨ç½²åº”ç”¨ï¼Œé…ç½®å®¹å™¨ å’Œä½¿ç”¨èµ„æºã€‚\n**5-7 è¡Œ **: Ingress spec ä¸­åŒ…å«é…ç½®ä¸€ä¸ª loadbalancer æˆ– proxy server çš„æ‰€æœ‰ä¿¡æ¯ã€‚æœ€é‡è¦çš„æ˜¯ï¼Œå®ƒåŒ…å«äº†ä¸€ä¸ªåŒ¹é…æ‰€æœ‰å…¥ç«™è¯·æ±‚çš„è§„åˆ™åˆ—è¡¨ã€‚ç›®å‰ ingress åªæ”¯æŒ http è§„åˆ™ã€‚\n**8-9 è¡Œ **ï¼šæ¯æ¡ http è§„åˆ™åŒ…å«ä»¥ä¸‹ä¿¡æ¯ï¼šä¸€ä¸ª host é…ç½®é¡¹ï¼ˆæ¯”å¦‚ for.bar.comï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸­é»˜è®¤æ˜¯ *ï¼‰ï¼Œpath åˆ—è¡¨ï¼ˆæ¯”å¦‚ï¼š/testpathï¼‰ï¼Œæ¯ä¸ª path éƒ½å…³è”ä¸€ä¸ª backend(æ¯”å¦‚ test:80)ã€‚åœ¨ loadbalancer å°†æµé‡è½¬å‘åˆ° backend ä¹‹å‰ï¼Œæ‰€æœ‰çš„å…¥ç«™è¯·æ±‚éƒ½è¦å…ˆåŒ¹é… host å’Œ pathã€‚\n**10-12 è¡Œ **ï¼šæ­£å¦‚ services doc ä¸­æè¿°çš„é‚£æ ·ï¼Œbackend æ˜¯ä¸€ä¸ª service:port çš„ç»„åˆã€‚Ingress çš„æµé‡è¢«è½¬å‘åˆ°å®ƒæ‰€åŒ¹é…çš„ backendã€‚\nå…¨å±€å‚æ•°ï¼šä¸ºäº†ç®€å•èµ·è§ï¼ŒIngress ç¤ºä¾‹ä¸­æ²¡æœ‰å…¨å±€å‚æ•°ï¼Œè¯·å‚é˜…èµ„æºå®Œæ•´å®šä¹‰çš„ API å‚è€ƒã€‚ åœ¨æ‰€æœ‰è¯·æ±‚éƒ½ä¸èƒ½è·Ÿ spec ä¸­çš„ path åŒ¹é…çš„æƒ…å†µä¸‹ï¼Œè¯·æ±‚è¢«å‘é€åˆ° Ingress controller çš„é»˜è®¤åç«¯ï¼Œå¯ä»¥æŒ‡å®šå…¨å±€ç¼ºçœ backendã€‚\nIngress controller linkä¸ºäº†ä½¿ Ingress æ­£å¸¸å·¥ä½œï¼Œé›†ç¾¤ä¸­å¿…é¡»è¿è¡Œ Ingress controllerã€‚ è¿™ä¸å…¶ä»–ç±»å‹çš„æ§åˆ¶å™¨ä¸åŒï¼Œå…¶ä»–ç±»å‹çš„æ§åˆ¶å™¨é€šå¸¸ä½œä¸º kube-controller-manager äºŒè¿›åˆ¶æ–‡ä»¶çš„ä¸€éƒ¨åˆ†è¿è¡Œï¼Œåœ¨é›†ç¾¤å¯åŠ¨æ—¶è‡ªåŠ¨å¯åŠ¨ã€‚ ä½ éœ€è¦é€‰æ‹©æœ€é€‚åˆè‡ªå·±é›†ç¾¤çš„ Ingress controller æˆ–è€…è‡ªå·±å®ç°ä¸€ä¸ªã€‚\nKubernetes å½“å‰æ”¯æŒå¹¶ç»´æŠ¤ GCE å’Œ nginx ä¸¤ç§ controller F5ï¼ˆå…¬å¸ï¼‰æ”¯æŒå¹¶ç»´æŠ¤ F5 BIG-IP Controller for Kubernetes Kong åŒæ—¶æ”¯æŒå¹¶ç»´æŠ¤ ç¤¾åŒºç‰ˆ ä¸ ä¼ä¸šç‰ˆ çš„ Kong Ingress Controller for Kubernetes Traefik æ˜¯åŠŸèƒ½é½å…¨çš„ ingress controllerï¼ˆLetâ€™s Encrypt, secrets, http2, websocketâ€¦ï¼‰, Containous ä¹Ÿå¯¹å…¶æä¾›å•†ä¸šæ”¯æŒã€‚ Istio ä½¿ç”¨ CRD Gateway æ¥ æ§åˆ¶ Ingress æµé‡ã€‚ åœ¨ä½ å¼€å§‹å‰ linkä»¥ä¸‹æ–‡æ¡£æè¿°äº† Ingress èµ„æºä¸­å…¬å¼€çš„ä¸€ç»„è·¨å¹³å°åŠŸèƒ½ã€‚ ç†æƒ³æƒ…å†µä¸‹ï¼Œæ‰€æœ‰çš„ Ingress controller éƒ½åº”è¯¥ç¬¦åˆè¿™ä¸ªè§„èŒƒï¼Œä½†æ˜¯æˆ‘ä»¬è¿˜æ²¡æœ‰å®ç°ã€‚ GCE å’Œ Nginx æ§åˆ¶å™¨çš„æ–‡æ¡£åˆ†åˆ«åœ¨ è¿™é‡Œ å’Œ è¿™é‡Œã€‚å¦‚æœæ‚¨ä½¿ç”¨ F5 BIG-IP controllerï¼Œè¯·å‚çœ‹ è¿™é‡Œã€‚\nç¡®ä¿æ‚¨æŸ¥çœ‹æ§åˆ¶å™¨ç‰¹å®šçš„æ–‡æ¡£ï¼Œä»¥ä¾¿æ‚¨äº†è§£æ¯ä¸ªæ–‡æ¡£çš„æ³¨æ„äº‹é¡¹ã€‚\nIngress ç±»å‹ linkå• Service Ingress linkKubernetes ä¸­å·²ç»å­˜åœ¨ä¸€äº›æ¦‚å¿µå¯ä»¥æš´éœ²å•ä¸ª serviceï¼ˆæŸ¥çœ‹ æ›¿ä»£æ–¹æ¡ˆï¼‰ï¼Œä½†æ˜¯ä½ ä»ç„¶å¯ä»¥é€šè¿‡ Ingress æ¥å®ç°ï¼Œé€šè¿‡æŒ‡å®šä¸€ä¸ªæ²¡æœ‰ rule çš„é»˜è®¤ backend çš„æ–¹å¼ã€‚\ningress.yaml å®šä¹‰æ–‡ä»¶ï¼š\napiVersion: extensions/v1beta1 kind: Ingress metadata: name: test-ingress spec: backend: serviceName: testsvc servicePort: 80 ä½¿ç”¨kubectl create -få‘½ä»¤åˆ›å»ºï¼Œç„¶åæŸ¥çœ‹ ingressï¼š\n$ kubectl get ing NAME RULE BACKEND ADDRESS test-ingress - testsvc:80 107.178.254.228 107.178.254.228 å°±æ˜¯ Ingress controller ä¸ºäº†å®ç° Ingress è€Œåˆ†é…çš„ IP åœ°å€ã€‚RULE åˆ—è¡¨ç¤ºæ‰€æœ‰å‘é€ç»™è¯¥ IP çš„æµé‡éƒ½è¢«è½¬å‘åˆ°äº† BACKEND æ‰€åˆ—çš„ Kubernetes service ä¸Šã€‚\nç®€å•å±•å¼€ linkå¦‚å‰é¢æè¿°çš„é‚£æ ·ï¼Œkubernetes pod ä¸­çš„ IP åªåœ¨é›†ç¾¤ç½‘ç»œå†…éƒ¨å¯è§ï¼Œæˆ‘ä»¬éœ€è¦åœ¨è¾¹ç•Œè®¾ç½®ä¸€ä¸ªä¸œè¥¿ï¼Œè®©å®ƒèƒ½å¤Ÿæ¥æ”¶ ingress çš„æµé‡å¹¶å°†å®ƒä»¬è½¬å‘åˆ°æ­£ç¡®çš„ç«¯ç‚¹ä¸Šã€‚è¿™ä¸ªä¸œè¥¿ä¸€èˆ¬æ˜¯é«˜å¯ç”¨çš„ loadbalancerã€‚ä½¿ç”¨ Ingress èƒ½å¤Ÿå…è®¸ä½ å°† loadbalancer çš„ä¸ªæ•°é™ä½åˆ°æœ€å°‘ï¼Œä¾‹å¦‚ï¼Œå‡å¦‚ä½ æƒ³è¦åˆ›å»ºè¿™æ ·çš„ä¸€ä¸ªè®¾ç½®ï¼š\nfoo.bar.com -\u003e 178.91.123.132 -\u003e /foo s1:80 /bar s2:80 ä½ éœ€è¦ä¸€ä¸ªè¿™æ ·çš„ ingressï¼š\napiVersion: extensions/v1beta1 kind: Ingress metadata: name: test spec: rules: - host: foo.bar.com http: paths: - path: /foo backend: serviceName: s1 servicePort: 80 - path: /bar backend: serviceName: s2 servicePort: 80 ä½¿ç”¨ kubectl create -f åˆ›å»ºå®Œ ingress åï¼š\n$ kubectl get ing NAME RULE BACKEND ADDRESS test - foo.bar.com /foo s1:80 /bar s2:80 åªè¦æœåŠ¡ï¼ˆs1ï¼Œs2ï¼‰å­˜åœ¨ï¼ŒIngress controller å°±ä¼šå°†æä¾›ä¸€ä¸ªæ»¡è¶³è¯¥ Ingress çš„ç‰¹å®š loadbalancer å®ç°ã€‚ è¿™ä¸€æ­¥å®Œæˆåï¼Œæ‚¨å°†åœ¨ Ingress çš„æœ€åä¸€åˆ—çœ‹åˆ° loadbalancer çš„åœ°å€ã€‚\nåŸºäºåç§°çš„è™šæ‹Ÿä¸»æœº linkName-based çš„è™šæ‹Ÿä¸»æœºåœ¨åŒä¸€ä¸ª IP åœ°å€ä¸‹æ‹¥æœ‰å¤šä¸ªä¸»æœºåã€‚\nfoo.bar.com --| |-\u003e foo.bar.com s1:80 | 178.91.123.132 | bar.foo.com --| |-\u003e bar.foo.com s2:80 ä¸‹é¢è¿™ä¸ª ingress è¯´æ˜åŸºäº Host header çš„åç«¯ loadbalancer çš„è·¯ç”±è¯·æ±‚ï¼š\napiVersion: extensions/v1beta1 kind: Ingress metadata: name: test spec: rules: - host: foo.bar.com http: paths: - backend: serviceName: s1 servicePort: 80 - host: bar.foo.com http: paths: - backend: serviceName: s2 servicePort: 80 é»˜è®¤ backendï¼šä¸€ä¸ªæ²¡æœ‰ rule çš„ ingressï¼Œå¦‚å‰é¢ç« èŠ‚ä¸­æ‰€ç¤ºï¼Œæ‰€æœ‰æµé‡éƒ½å°†å‘é€åˆ°ä¸€ä¸ªé»˜è®¤ backendã€‚ä½ å¯ä»¥ç”¨è¯¥æŠ€å·§é€šçŸ¥ loadbalancer å¦‚ä½•æ‰¾åˆ°ä½ ç½‘ç«™çš„ 404 é¡µé¢ï¼Œé€šè¿‡åˆ¶å®šä¸€äº›åˆ— rule å’Œä¸€ä¸ªé»˜è®¤ backend çš„æ–¹å¼ã€‚å¦‚æœè¯·æ±‚ header ä¸­çš„ host ä¸èƒ½è·Ÿ ingress ä¸­çš„ host åŒ¹é…ï¼Œå¹¶ä¸” / æˆ–è¯·æ±‚çš„ URL ä¸èƒ½ä¸ä»»ä½•ä¸€ä¸ª path åŒ¹é…ï¼Œåˆ™æµé‡å°†è·¯ç”±åˆ°ä½ çš„é»˜è®¤ backendã€‚\nTLS linkä½ å¯ä»¥é€šè¿‡æŒ‡å®šåŒ…å« TLS ç§é’¥å’Œè¯ä¹¦çš„ secret æ¥åŠ å¯† Ingressã€‚ ç›®å‰ï¼ŒIngress ä»…æ”¯æŒå•ä¸ª TLS ç«¯å£ 443ï¼Œå¹¶å‡å®š TLS terminationã€‚ å¦‚æœ Ingress ä¸­çš„ TLS é…ç½®éƒ¨åˆ†æŒ‡å®šäº†ä¸åŒçš„ä¸»æœºï¼Œåˆ™å®ƒä»¬å°†æ ¹æ®é€šè¿‡ SNI TLS æ‰©å±•æŒ‡å®šçš„ä¸»æœºåï¼ˆå‡å¦‚ Ingress controller æ”¯æŒ SNIï¼‰åœ¨å¤šä¸ªç›¸åŒç«¯å£ä¸Šè¿›è¡Œå¤ç”¨ã€‚ TLS secret ä¸­å¿…é¡»åŒ…å«åä¸º tls.crt å’Œ tls.key çš„å¯†é’¥ï¼Œè¿™é‡Œé¢åŒ…å«äº†ç”¨äº TLS çš„è¯ä¹¦å’Œç§é’¥ï¼Œä¾‹å¦‚ï¼š\napiVersion: v1 data: tls.crt: base64 encoded cert tls.key: base64 encoded key kind: Secret metadata: name: testsecret namespace: default type: Opaque åœ¨ Ingress ä¸­å¼•ç”¨è¿™ä¸ª secret å°†é€šçŸ¥ Ingress controller ä½¿ç”¨ TLS åŠ å¯†ä»å°†å®¢æˆ·ç«¯åˆ° loadbalancer çš„ channelï¼š\napiVersion: extensions/v1beta1 kind: Ingress metadata: name: no-rules-map spec: tls: - secretName: testsecret backend: serviceName: s1 servicePort: 80 è¯·æ³¨æ„ï¼Œå„ç§ Ingress controller æ”¯æŒçš„ TLS åŠŸèƒ½ä¹‹é—´å­˜åœ¨å·®è·ã€‚ è¯·å‚é˜…æœ‰å…³ nginxï¼ŒGCE æˆ–ä»»ä½•å…¶ä»–å¹³å°ç‰¹å®š Ingress controller çš„æ–‡æ¡£ï¼Œä»¥äº†è§£ TLS åœ¨ä½ çš„ç¯å¢ƒä¸­çš„å·¥ä½œåŸç†ã€‚\nIngress controller å¯åŠ¨æ—¶é™„å¸¦ä¸€äº›é€‚ç”¨äºæ‰€æœ‰ Ingress çš„è´Ÿè½½å¹³è¡¡ç­–ç•¥è®¾ç½®ï¼Œä¾‹å¦‚è´Ÿè½½å‡è¡¡ç®—æ³•ï¼Œåç«¯æƒé‡æ–¹æ¡ˆç­‰ã€‚æ›´é«˜çº§çš„è´Ÿè½½å¹³è¡¡æ¦‚å¿µï¼ˆä¾‹å¦‚æŒä¹…ä¼šè¯ï¼ŒåŠ¨æ€æƒé‡ï¼‰å°šæœªåœ¨ Ingress ä¸­å…¬å¼€ã€‚ ä½ ä»ç„¶å¯ä»¥é€šè¿‡ service loadbalancer è·å–è¿™äº›åŠŸèƒ½ã€‚ éšç€æ—¶é—´çš„æ¨ç§»ï¼Œæˆ‘ä»¬è®¡åˆ’å°†é€‚ç”¨äºè·¨å¹³å°çš„è´Ÿè½½å¹³è¡¡æ¨¡å¼åŠ å…¥åˆ° Ingress èµ„æºä¸­ã€‚\nè¿˜å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå°½ç®¡å¥åº·æ£€æŸ¥ä¸ç›´æ¥é€šè¿‡ Ingress å…¬å¼€ï¼Œä½† Kubernetes ä¸­å­˜åœ¨å¹¶è¡Œæ¦‚å¿µï¼Œä¾‹å¦‚ å‡†å¤‡æ¢æŸ¥ï¼Œå¯ä»¥ä½¿ä½ è¾¾æˆç›¸åŒçš„æœ€ç»ˆç»“æœã€‚ è¯·æŸ¥çœ‹ç‰¹å®šæ§åˆ¶å™¨çš„æ–‡æ¡£ï¼Œä»¥äº†è§£ä»–ä»¬å¦‚ä½•å¤„ç†å¥åº·æ£€æŸ¥ï¼ˆnginxï¼ŒGCEï¼‰ã€‚\næ›´æ–° Ingress linkå‡å¦‚ä½ æƒ³è¦å‘å·²æœ‰çš„ ingress ä¸­å¢åŠ ä¸€ä¸ªæ–°çš„ Hostï¼Œä½ å¯ä»¥ç¼–è¾‘å’Œæ›´æ–°è¯¥ ingressï¼š\n$ kubectl get ing NAME RULE BACKEND ADDRESS test - 178.91.123.132 foo.bar.com /foo s1:80 $ kubectl edit ing test è¿™ä¼šå¼¹å‡ºä¸€ä¸ªåŒ…å«å·²æœ‰çš„ yaml æ–‡ä»¶çš„ç¼–è¾‘å™¨ï¼Œä¿®æ”¹å®ƒï¼Œå¢åŠ æ–°çš„ Host é…ç½®ã€‚\nspec: rules: - host: foo.bar.com http: paths: - backend: serviceName: s1 servicePort: 80 path: /foo - host: bar.baz.com http: paths: - backend: serviceName: s2 servicePort: 80 path: /foo .. ä¿å­˜å®ƒä¼šæ›´æ–° API server ä¸­çš„èµ„æºï¼Œè¿™ä¼šè§¦å‘ ingress controller é‡æ–°é…ç½® loadbalancerã€‚\n$ kubectl get ing NAME RULE BACKEND ADDRESS test - 178.91.123.132 foo.bar.com /foo s1:80 bar.baz.com /foo s2:80 åœ¨ä¸€ä¸ªä¿®æ”¹è¿‡çš„ ingress yaml æ–‡ä»¶ä¸Šè°ƒç”¨kubectl replace -f å‘½ä»¤ä¸€æ ·å¯ä»¥è¾¾åˆ°åŒæ ·çš„æ•ˆæœã€‚\nè·¨å¯ç”¨åŸŸæ•…éšœ linkåœ¨ä¸åŒäº‘ä¾›åº”å•†ä¹‹é—´ï¼Œè·¨æ•…éšœåŸŸçš„æµé‡ä¼ æ’­æŠ€æœ¯æœ‰æ‰€ä¸åŒã€‚ æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹ç›¸å…³ Ingress controller çš„æ–‡æ¡£ã€‚ æœ‰å…³åœ¨ federation é›†ç¾¤ä¸­éƒ¨ç½² Ingress çš„è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜… federation æ–‡æ¡£ã€‚\næœªæ¥è®¡åˆ’ link å¤šæ ·åŒ–çš„ HTTPS/TLS æ¨¡å‹æ”¯æŒï¼ˆå¦‚ SNIï¼Œre-encryptionï¼‰ é€šè¿‡å£°æ˜æ¥è¯·æ±‚ IP æˆ–è€…ä¸»æœºå ç»“åˆ L4 å’Œ L7 Ingress æ›´å¤šçš„ Ingress controller è¯·è·Ÿè¸ª L7 å’Œ Ingress çš„ proposalï¼Œäº†è§£æœ‰å…³èµ„æºæ¼”è¿›çš„æ›´å¤šç»†èŠ‚ï¼Œä»¥åŠ Ingress repositoryï¼Œäº†è§£æœ‰å…³å„ç§ Ingress controller æ¼”è¿›çš„æ›´å¤šè¯¦ç»†ä¿¡æ¯ã€‚\næ›¿ä»£æ–¹æ¡ˆ linkä½ å¯ä»¥é€šè¿‡å¾ˆå¤šç§æ–¹å¼æš´éœ² service è€Œä¸å¿…ç›´æ¥ä½¿ç”¨ ingressï¼š\nä½¿ç”¨ Service.Type=LoadBalancer ä½¿ç”¨ Service.Type=NodePort ä½¿ç”¨ Port Proxy éƒ¨ç½²ä¸€ä¸ª Service loadbalancer è¿™å…è®¸ä½ åœ¨å¤šä¸ª service ä¹‹é—´å…±äº«å•ä¸ª IPï¼Œå¹¶é€šè¿‡ Service Annotations å®ç°æ›´é«˜çº§çš„è´Ÿè½½å¹³è¡¡ã€‚ å‚è€ƒ link Kubernetes Ingress Resource - kubernetes.io ä½¿ç”¨ NGINX Plus è´Ÿè½½å‡è¡¡ Kubernetes æœåŠ¡ - dockone.io ä½¿ç”¨ NGINX å’Œ NGINX Plus çš„ Ingress Controller è¿›è¡Œ Kubernetes çš„è´Ÿè½½å‡è¡¡ - cnblogs.com "
            }
        );
    index.add(
            {
                id:  61 ,
                href: "\/docs\/information\/software\/cloud\/k8s_rs_manager\/custom_hpa\/",
                title: "è‡ªå®šä¹‰æŒ‡æ ‡ HPA",
                description: "Kubernetes ä¸­ä¸ä»…æ”¯æŒ CPUã€å†…å­˜ä¸ºæŒ‡æ ‡çš„ HPAï¼Œè¿˜æ”¯æŒè‡ªå®šä¹‰æŒ‡æ ‡çš„ HPAï¼Œä¾‹å¦‚ QPSã€‚\næœ¬æ–‡ä¸­ä½¿ç”¨çš„ YAML æ–‡ä»¶è§ manifests/HPAã€‚\nè®¾ç½®è‡ªå®šä¹‰æŒ‡æ ‡ linkKubernetes1.6\nåœ¨ Kubernetes1.6 é›†ç¾¤ä¸­é…ç½®è‡ªå®šä¹‰æŒ‡æ ‡çš„ HPA çš„è¯´æ˜å·²åºŸå¼ƒã€‚\nåœ¨è®¾ç½®å®šä¹‰æŒ‡æ ‡ HPA ä¹‹å‰éœ€è¦å…ˆè¿›è¡Œå¦‚ä¸‹é…ç½®ï¼š\nå°† heapster çš„å¯åŠ¨å‚æ•° --api-server è®¾ç½®ä¸º true\n",
                content: "Kubernetes ä¸­ä¸ä»…æ”¯æŒ CPUã€å†…å­˜ä¸ºæŒ‡æ ‡çš„ HPAï¼Œè¿˜æ”¯æŒè‡ªå®šä¹‰æŒ‡æ ‡çš„ HPAï¼Œä¾‹å¦‚ QPSã€‚\næœ¬æ–‡ä¸­ä½¿ç”¨çš„ YAML æ–‡ä»¶è§ manifests/HPAã€‚\nè®¾ç½®è‡ªå®šä¹‰æŒ‡æ ‡ linkKubernetes1.6\nåœ¨ Kubernetes1.6 é›†ç¾¤ä¸­é…ç½®è‡ªå®šä¹‰æŒ‡æ ‡çš„ HPA çš„è¯´æ˜å·²åºŸå¼ƒã€‚\nåœ¨è®¾ç½®å®šä¹‰æŒ‡æ ‡ HPA ä¹‹å‰éœ€è¦å…ˆè¿›è¡Œå¦‚ä¸‹é…ç½®ï¼š\nå°† heapster çš„å¯åŠ¨å‚æ•° --api-server è®¾ç½®ä¸º true\nå¯ç”¨ custom metric API\nå°† kube-controller-manager çš„å¯åŠ¨å‚æ•°ä¸­ --horizontal-pod-autoscaler-use-rest-clients è®¾ç½®ä¸º trueï¼Œå¹¶æŒ‡å®š --master ä¸º API server åœ°å€ï¼Œå¦‚ --master=http://172.20.0.113:8080\nåœ¨ Kubernetes1.5 ä»¥å‰å¾ˆå®¹æ˜“è®¾ç½®ï¼Œå‚è€ƒ 1.6 ä»¥å‰ç‰ˆæœ¬çš„ kubernetes ä¸­å¼€å¯è‡ªå®šä¹‰ HPAï¼Œè€Œåœ¨ 1.6 ä¸­å› ä¸ºå–æ¶ˆäº†åŸæ¥çš„ annotation æ–¹å¼è®¾ç½® custom metricï¼Œåªèƒ½é€šè¿‡ API server å’Œ kube-aggregator æ¥è·å– custom metricï¼Œå› ä¸ºåªæœ‰ä¸¤ç§æ–¹å¼æ¥è®¾ç½®äº†ï¼Œä¸€æ˜¯ç›´æ¥é€šè¿‡ API server è·å– heapster çš„ metricsï¼ŒäºŒæ˜¯éƒ¨ç½² kube-aggragator æ¥å®ç°ã€‚\næˆ‘ä»¬å°†åœ¨ Kubernetes1.8 ç‰ˆæœ¬çš„ Kubernetes ä¸­ï¼Œä½¿ç”¨èšåˆçš„ API server æ¥å®ç°è‡ªå®šä¹‰æŒ‡æ ‡çš„ HPAã€‚\nKuberentes1.7+\nç¡®è®¤æ‚¨çš„ Kubernetes ç‰ˆæœ¬åœ¨ 1.7 æˆ–ä»¥ä¸Šï¼Œä¿®æ”¹ä»¥ä¸‹é…ç½®ï¼š\nå°† kube-controller-manager çš„å¯åŠ¨å‚æ•°ä¸­ --horizontal-pod-autoscaler-use-rest-clients è®¾ç½®ä¸º trueï¼Œå¹¶æŒ‡å®š --master ä¸º API server åœ°å€ï¼Œå¦‚ --master=http://172.20.0.113:8080 ä¿®æ”¹ kube-apiserver çš„é…ç½®æ–‡ä»¶ apiserverï¼Œå¢åŠ ä¸€æ¡é…ç½® --requestheader-client-ca-file=/etc/kubernetes/ssl/ca.pem --requestheader-allowed-names=aggregator --requestheader-extra-headers-prefix=X-Remote-Extra- --requestheader-group-headers=X-Remote-Group --requestheader-username-headers=X-Remote-User --proxy-client-cert-file=/etc/kubernetes/ssl/kubernetes.pem --proxy-client-key-file=/etc/kubernetes/ssl/kubernetes-key.pemï¼Œç”¨æ¥é…ç½® aggregator çš„ CA è¯ä¹¦ã€‚ å·²ç»å†…ç½®äº† apiregistration.k8s.io/v1beta1 APIï¼Œå¯ä»¥ç›´æ¥å®šä¹‰ APIServiceï¼Œå¦‚ï¼š\napiVersion: apiregistration.k8s.io/v1 kind: APIService metadata: name: v1.custom-metrics.metrics.k8s.io spec: insecureSkipTLSVerify: true group: custom-metrics.metrics.k8s.io groupPriorityMinimum: 1000 versionPriority: 5 service: name: api namespace: custom-metrics version: v1alpha1 éƒ¨ç½² Prometheus\nä½¿ç”¨ prometheus-operator.yaml æ–‡ä»¶éƒ¨ç½² Prometheus operatorã€‚\næ³¨æ„ï¼š å°†é•œåƒä¿®æ”¹ä¸ºä½ è‡ªå·±çš„é•œåƒä»“åº“åœ°å€ã€‚\nè¿™äº§ç”Ÿä¸€ä¸ªè‡ªå®šä¹‰çš„ APIï¼šhttp://172.20.0.113:8080/apis/custom-metrics.metrics.k8s.io/v1alpha1ï¼Œå¯ä»¥é€šè¿‡æµè§ˆå™¨è®¿é—®ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤å¯ä»¥æ£€æŸ¥è¯¥ APIï¼š\n$ kubectl get --raw=apis/custom-metrics.metrics.k8s.io/v1alpha1 {\"kind\":\"APIResourceList\",\"apiVersion\":\"v1\",\"groupVersion\":\"custom-metrics.metrics.k8s.io/v1alpha1\",\"resources\":[{\"name\":\"jobs.batch/http_requests\",\"singularName\":\"\",\"namespaced\":true,\"kind\":\"MetricValueList\",\"verbs\":[\"get\"]},{\"name\":\"namespaces/http_requests\",\"singularName\":\"\",\"namespaced\":false,\"kind\":\"MetricValueList\",\"verbs\":[\"get\"]},{\"name\":\"jobs.batch/up\",\"singularName\":\"\",\"namespaced\":true,\"kind\":\"MetricValueList\",\"verbs\":[\"get\"]},{\"name\":\"pods/up\",\"singularName\":\"\",\"namespaced\":true,\"kind\":\"MetricValueList\",\"verbs\":[\"get\"]},{\"name\":\"services/scrape_samples_scraped\",\"singularName\":\"\",\"namespaced\":true,\"kind\":\"MetricValueList\",\"verbs\":[\"get\"]},{\"name\":\"namespaces/scrape_samples_scraped\",\"singularName\":\"\",\"namespaced\":false,\"kind\":\"MetricValueList\",\"verbs\":[\"get\"]},{\"name\":\"pods/scrape_duration_seconds\",\"singularName\":\"\",\"namespaced\":true,\"kind\":\"MetricValueList\",\"verbs\":[\"get\"]},{\"name\":\"services/scrape_duration_seconds\",\"singularName\":\"\",\"namespaced\":true,\"kind\":\"MetricValueList\",\"verbs\":[\"get\"]},{\"name\":\"pods/http_requests\",\"singularName\":\"\",\"namespaced\":true,\"kind\":\"MetricValueList\",\"verbs\":[\"get\"]},{\"name\":\"pods/scrape_samples_post_metric_relabeling\",\"singularName\":\"\",\"namespaced\":true,\"kind\":\"MetricValueList\",\"verbs\":[\"get\"]},{\"name\":\"jobs.batch/scrape_samples_scraped\",\"singularName\":\"\",\"namespaced\":true,\"kind\":\"MetricValueList\",\"verbs\":[\"get\"]},{\"name\":\"jobs.batch/scrape_duration_seconds\",\"singularName\":\"\",\"namespaced\":true,\"kind\":\"MetricValueList\",\"verbs\":[\"get\"]},{\"name\":\"namespaces/scrape_duration_seconds\",\"singularName\":\"\",\"namespaced\":false,\"kind\":\"MetricValueList\",\"verbs\":[\"get\"]},{\"name\":\"namespaces/scrape_samples_post_metric_relabeling\",\"singularName\":\"\",\"namespaced\":false,\"kind\":\"MetricValueList\",\"verbs\":[\"get\"]},{\"name\":\"services/scrape_samples_post_metric_relabeling\",\"singularName\":\"\",\"namespaced\":true,\"kind\":\"MetricValueList\",\"verbs\":[\"get\"]},{\"name\":\"services/up\",\"singularName\":\"\",\"namespaced\":true,\"kind\":\"MetricValueList\",\"verbs\":[\"get\"]},{\"name\":\"pods/scrape_samples_scraped\",\"singularName\":\"\",\"namespaced\":true,\"kind\":\"MetricValueList\",\"verbs\":[\"get\"]},{\"name\":\"services/http_requests\",\"singularName\":\"\",\"namespaced\":true,\"kind\":\"MetricValueList\",\"verbs\":[\"get\"]},{\"name\":\"jobs.batch/scrape_samples_post_metric_relabeling\",\"singularName\":\"\",\"namespaced\":true,\"kind\":\"MetricValueList\",\"verbs\":[\"get\"]},{\"name\":\"namespaces/up\",\"singularName\":\"\",\"namespaced\":false,\"kind\":\"MetricValueList\",\"verbs\":[\"get\"]}]} å‚è€ƒ link 1.6 ä»¥å‰ç‰ˆæœ¬çš„ kubernetes ä¸­å¼€å¯è‡ªå®šä¹‰ HPA - medium.com Horizontal Pod Autoscaler Walkthrough - kubernetes.io Kubernetes 1.8: Now with 100% Daily Value of Custom Metrics - blog.openshift.com Arbitrary/Custom Metrics in the Horizontal Pod Autoscaler#117 - github.com "
            }
        );
    index.add(
            {
                id:  62 ,
                href: "\/docs\/information\/software\/cloud\/k8s_rs_manager\/admission_controller\/",
                title: "å‡†å…¥æ§åˆ¶å™¨ï¼ˆAdmission Controllerï¼‰",
                description: "å‡†å…¥æ§åˆ¶å™¨ï¼ˆAdmission Controllerï¼‰ä½äº API Server ä¸­ï¼Œåœ¨å¯¹è±¡è¢«æŒä¹…åŒ–ä¹‹å‰ï¼Œå‡†å…¥æ§åˆ¶å™¨æ‹¦æˆªå¯¹ API Server çš„è¯·æ±‚ï¼Œä¸€èˆ¬ç”¨æ¥åšèº«ä»½éªŒè¯å’Œæˆæƒã€‚å…¶ä¸­åŒ…å«ä¸¤ä¸ªç‰¹æ®Šçš„æ§åˆ¶å™¨ï¼šMutatingAdmissionWebhook å’Œ ValidatingAdmissionWebhookã€‚åˆ†åˆ«ä½œä¸ºé…ç½®çš„å˜å¼‚å’ŒéªŒè¯å‡†å…¥æ§åˆ¶ webhookã€‚\nå‡†å…¥æ§åˆ¶å™¨åŒ…æ‹¬ä»¥ä¸‹ä¸¤ç§ï¼š\nå˜æ›´ï¼ˆMutatingï¼‰å‡†å…¥æ§åˆ¶ï¼šä¿®æ”¹è¯·æ±‚çš„å¯¹è±¡ éªŒè¯ï¼ˆValidatingï¼‰å‡†å…¥æ§åˆ¶ï¼šéªŒè¯è¯·æ±‚çš„å¯¹è±¡ å‡†å…¥æ§åˆ¶å™¨æ˜¯åœ¨ API Server çš„å¯åŠ¨å‚æ•°é‡é…ç½®çš„ã€‚ä¸€ä¸ªå‡†å…¥æ§åˆ¶å™¨å¯èƒ½å±äºä»¥ä¸Šä¸¤è€…ä¸­çš„ä¸€ç§ï¼Œä¹Ÿå¯èƒ½ä¸¤è€…éƒ½å±äºã€‚å½“è¯·æ±‚åˆ°è¾¾ API Server çš„æ—¶å€™é¦–å…ˆæ‰§è¡Œå˜æ›´å‡†å…¥æ§åˆ¶ï¼Œç„¶åå†æ‰§è¡ŒéªŒè¯å‡†å…¥æ§åˆ¶ã€‚\næˆ‘ä»¬åœ¨éƒ¨ç½² Kubernetes é›†ç¾¤çš„æ—¶å€™éƒ½ä¼šé»˜è®¤å¼€å¯ä¸€ç³»åˆ—å‡†å…¥æ§åˆ¶å™¨ï¼Œå¦‚æœæ²¡æœ‰è®¾ç½®è¿™äº›å‡†å…¥æ§åˆ¶å™¨çš„è¯å¯ä»¥è¯´ä½ çš„ Kubernetes é›†ç¾¤å°±æ˜¯åœ¨è£¸å¥”ï¼Œåº”è¯¥åªæœ‰é›†ç¾¤ç®¡ç†å‘˜å¯ä»¥ä¿®æ”¹é›†ç¾¤çš„å‡†å…¥æ§åˆ¶å™¨ã€‚\n",
                content: "å‡†å…¥æ§åˆ¶å™¨ï¼ˆAdmission Controllerï¼‰ä½äº API Server ä¸­ï¼Œåœ¨å¯¹è±¡è¢«æŒä¹…åŒ–ä¹‹å‰ï¼Œå‡†å…¥æ§åˆ¶å™¨æ‹¦æˆªå¯¹ API Server çš„è¯·æ±‚ï¼Œä¸€èˆ¬ç”¨æ¥åšèº«ä»½éªŒè¯å’Œæˆæƒã€‚å…¶ä¸­åŒ…å«ä¸¤ä¸ªç‰¹æ®Šçš„æ§åˆ¶å™¨ï¼šMutatingAdmissionWebhook å’Œ ValidatingAdmissionWebhookã€‚åˆ†åˆ«ä½œä¸ºé…ç½®çš„å˜å¼‚å’ŒéªŒè¯å‡†å…¥æ§åˆ¶ webhookã€‚\nå‡†å…¥æ§åˆ¶å™¨åŒ…æ‹¬ä»¥ä¸‹ä¸¤ç§ï¼š\nå˜æ›´ï¼ˆMutatingï¼‰å‡†å…¥æ§åˆ¶ï¼šä¿®æ”¹è¯·æ±‚çš„å¯¹è±¡ éªŒè¯ï¼ˆValidatingï¼‰å‡†å…¥æ§åˆ¶ï¼šéªŒè¯è¯·æ±‚çš„å¯¹è±¡ å‡†å…¥æ§åˆ¶å™¨æ˜¯åœ¨ API Server çš„å¯åŠ¨å‚æ•°é‡é…ç½®çš„ã€‚ä¸€ä¸ªå‡†å…¥æ§åˆ¶å™¨å¯èƒ½å±äºä»¥ä¸Šä¸¤è€…ä¸­çš„ä¸€ç§ï¼Œä¹Ÿå¯èƒ½ä¸¤è€…éƒ½å±äºã€‚å½“è¯·æ±‚åˆ°è¾¾ API Server çš„æ—¶å€™é¦–å…ˆæ‰§è¡Œå˜æ›´å‡†å…¥æ§åˆ¶ï¼Œç„¶åå†æ‰§è¡ŒéªŒè¯å‡†å…¥æ§åˆ¶ã€‚\næˆ‘ä»¬åœ¨éƒ¨ç½² Kubernetes é›†ç¾¤çš„æ—¶å€™éƒ½ä¼šé»˜è®¤å¼€å¯ä¸€ç³»åˆ—å‡†å…¥æ§åˆ¶å™¨ï¼Œå¦‚æœæ²¡æœ‰è®¾ç½®è¿™äº›å‡†å…¥æ§åˆ¶å™¨çš„è¯å¯ä»¥è¯´ä½ çš„ Kubernetes é›†ç¾¤å°±æ˜¯åœ¨è£¸å¥”ï¼Œåº”è¯¥åªæœ‰é›†ç¾¤ç®¡ç†å‘˜å¯ä»¥ä¿®æ”¹é›†ç¾¤çš„å‡†å…¥æ§åˆ¶å™¨ã€‚\nä¾‹å¦‚æˆ‘ä¼šé»˜è®¤å¼€å¯å¦‚ä¸‹çš„å‡†å…¥æ§åˆ¶å™¨ã€‚\n--admission-control=ServiceAccount,NamespaceLifecycle,NamespaceExists,LimitRanger,ResourceQuota,MutatingAdmissionWebhook,ValidatingAdmissionWebhook å‡†å…¥æ§åˆ¶å™¨åˆ—è¡¨ linkKubernetes ç›®å‰æ”¯æŒçš„å‡†å…¥æ§åˆ¶å™¨æœ‰ï¼š\nAlwaysPullImagesï¼šæ­¤å‡†å…¥æ§åˆ¶å™¨ä¿®æ”¹æ¯ä¸ª Pod çš„æ—¶å€™éƒ½å¼ºåˆ¶é‡æ–°æ‹‰å–é•œåƒã€‚ DefaultStorageClassï¼šæ­¤å‡†å…¥æ§åˆ¶å™¨è§‚å¯Ÿåˆ›å»ºPersistentVolumeClaimæ—¶ä¸è¯·æ±‚ä»»ä½•ç‰¹å®šå­˜å‚¨ç±»çš„å¯¹è±¡ï¼Œå¹¶è‡ªåŠ¨å‘å…¶æ·»åŠ é»˜è®¤å­˜å‚¨ç±»ã€‚è¿™æ ·ï¼Œç”¨æˆ·å°±ä¸éœ€è¦å…³æ³¨ç‰¹æ®Šå­˜å‚¨ç±»è€Œè·å¾—é»˜è®¤å­˜å‚¨ç±»ã€‚ DefaultTolerationSecondsï¼šæ­¤å‡†å…¥æ§åˆ¶å™¨å°†Podçš„å®¹å¿æ—¶é—´notready:NoExecuteå’Œunreachable:NoExecute é»˜è®¤è®¾ç½®ä¸º5åˆ†é’Ÿã€‚ DenyEscalatingExecï¼šæ­¤å‡†å…¥æ§åˆ¶å™¨å°†æ‹’ç»exec å’Œé™„åŠ å‘½ä»¤åˆ°ä»¥å…è®¸è®¿é—®å®¿ä¸»æœºçš„å‡çº§äº†æƒé™è¿è¡Œçš„podã€‚ EventRateLimit (alpha)ï¼šæ­¤å‡†å…¥æ§åˆ¶å™¨ç¼“è§£äº† API Server è¢«äº‹ä»¶è¯·æ±‚æ·¹æ²¡çš„é—®é¢˜ï¼Œé™åˆ¶æ—¶é—´é€Ÿç‡ã€‚ ExtendedResourceTolerationï¼šæ­¤æ’ä»¶æœ‰åŠ©äºåˆ›å»ºå…·æœ‰æ‰©å±•èµ„æºçš„ä¸“ç”¨èŠ‚ç‚¹ã€‚ ImagePolicyWebhookï¼šæ­¤å‡†å…¥æ§åˆ¶å™¨å…è®¸åç«¯åˆ¤æ–­é•œåƒæ‹‰å–ç­–ç•¥ï¼Œä¾‹å¦‚é…ç½®é•œåƒä»“åº“çš„å¯†é’¥ã€‚ Initializers (alpha)ï¼šPodåˆå§‹åŒ–çš„å‡†å…¥æ§åˆ¶å™¨ï¼Œè¯¦æƒ…è¯·å‚è€ƒåŠ¨æ€å‡†å…¥æ§åˆ¶ã€‚ LimitPodHardAntiAffinityTopologyï¼šæ­¤å‡†å…¥æ§åˆ¶å™¨æ‹’ç»ä»»ä½•åœ¨ requiredDuringSchedulingRequiredDuringExecution çš„ AntiAffinity å­—æ®µä¸­å®šä¹‰é™¤äº†kubernetes.io/hostname ä¹‹å¤–çš„æ‹“æ‰‘å…³é”®å­—çš„ pod ã€‚ LimitRangerï¼šæ­¤å‡†å…¥æ§åˆ¶å™¨å°†ç¡®ä¿æ‰€æœ‰èµ„æºè¯·æ±‚ä¸ä¼šè¶…è¿‡ namespace çš„ LimitRangeã€‚ MutatingAdmissionWebhook ï¼ˆ1.9ç‰ˆæœ¬ä¸­ä¸ºbetaï¼‰ï¼šè¯¥å‡†å…¥æ§åˆ¶å™¨è°ƒç”¨ä¸è¯·æ±‚åŒ¹é…çš„ä»»ä½•å˜æ›´ webhookã€‚åŒ¹é…çš„ webhookæ˜¯ä¸²è¡Œè°ƒç”¨çš„ï¼›å¦‚æœéœ€è¦ï¼Œæ¯ä¸ªäººéƒ½å¯ä»¥ä¿®æ”¹å¯¹è±¡ã€‚ NamespaceAutoProvisionï¼šæ­¤å‡†å…¥æ§åˆ¶å™¨æ£€æŸ¥å‘½åç©ºé—´èµ„æºä¸Šçš„æ‰€æœ‰ä¼ å…¥è¯·æ±‚ï¼Œå¹¶æ£€æŸ¥å¼•ç”¨çš„å‘½åç©ºé—´æ˜¯å¦å­˜åœ¨ã€‚å¦‚æœä¸å­˜åœ¨å°±åˆ›å»ºä¸€ä¸ªå‘½åç©ºé—´ã€‚ NamespaceExistsï¼šæ­¤è®¸å¯æ§åˆ¶å™¨æ£€æŸ¥é™¤ Namespace å…¶è‡ªèº«ä¹‹å¤–çš„å‘½åç©ºé—´èµ„æºä¸Šçš„æ‰€æœ‰è¯·æ±‚ã€‚å¦‚æœè¯·æ±‚å¼•ç”¨çš„å‘½åç©ºé—´ä¸å­˜åœ¨ï¼Œåˆ™æ‹’ç»è¯¥è¯·æ±‚ã€‚ NamespaceLifecycleï¼šæ­¤å‡†å…¥æ§åˆ¶å™¨å¼ºåˆ¶æ‰§è¡Œæ­£åœ¨ç»ˆæ­¢çš„å‘½ä»¤ç©ºé—´ä¸­ä¸èƒ½åˆ›å»ºæ–°å¯¹è±¡ï¼Œå¹¶ç¡®ä¿Namespaceæ‹’ç»ä¸å­˜åœ¨çš„è¯·æ±‚ã€‚æ­¤å‡†å…¥æ§åˆ¶å™¨è¿˜é˜²æ­¢ç¼ºå¤±ä¸‰ä¸ªç³»ç»Ÿä¿ç•™çš„å‘½åç©ºé—´defaultã€kube-systemã€kube-publicã€‚ NodeRestrictionï¼šè¯¥å‡†å…¥æ§åˆ¶å™¨é™åˆ¶äº† kubelet å¯ä»¥ä¿®æ”¹çš„Nodeå’ŒPodå¯¹è±¡ã€‚ OwnerReferencesPermissionEnforcementï¼šæ­¤å‡†å…¥æ§åˆ¶å™¨ä¿æŠ¤å¯¹metadata.ownerReferenceså¯¹è±¡çš„è®¿é—®ï¼Œä»¥ä¾¿åªæœ‰å¯¹è¯¥å¯¹è±¡å…·æœ‰â€œåˆ é™¤â€æƒé™çš„ç”¨æˆ·æ‰èƒ½å¯¹å…¶è¿›è¡Œæ›´æ”¹ã€‚ PodNodeSelectorï¼šæ­¤å‡†å…¥æ§åˆ¶å™¨é€šè¿‡è¯»å–å‘½åç©ºé—´æ³¨é‡Šå’Œå…¨å±€é…ç½®æ¥é™åˆ¶å¯åœ¨å‘½åç©ºé—´å†…ä½¿ç”¨çš„èŠ‚ç‚¹é€‰æ‹©å™¨ã€‚ PodPresetï¼šæ­¤å‡†å…¥æ§åˆ¶å™¨æ³¨å…¥ä¸€ä¸ªpodï¼Œå…¶ä¸­åŒ…å«åŒ¹é…çš„PodPresetä¸­æŒ‡å®šçš„å­—æ®µï¼Œè¯¦ç»†ä¿¡æ¯è§Pod Presetã€‚ PodSecurityPolicyï¼šæ­¤å‡†å…¥æ§åˆ¶å™¨ç”¨äºåˆ›å»ºå’Œä¿®æ”¹podï¼Œå¹¶æ ¹æ®è¯·æ±‚çš„å®‰å…¨ä¸Šä¸‹æ–‡å’Œå¯ç”¨çš„Podå®‰å…¨ç­–ç•¥ç¡®å®šæ˜¯å¦åº”è¯¥å…è®¸å®ƒã€‚ PodTolerationRestrictionï¼šæ­¤å‡†å…¥æ§åˆ¶å™¨é¦–å…ˆéªŒè¯å®¹å™¨çš„å®¹å¿åº¦ä¸å…¶å‘½åç©ºé—´çš„å®¹å¿åº¦ä¹‹é—´æ˜¯å¦å­˜åœ¨å†²çªï¼Œå¹¶åœ¨å­˜åœ¨å†²çªæ—¶æ‹’ç»è¯¥å®¹å™¨è¯·æ±‚ã€‚ Priorityï¼šæ­¤æ§åˆ¶å™¨ä½¿ç”¨priorityClassNameå­—æ®µå¹¶å¡«å……ä¼˜å…ˆçº§çš„æ•´æ•°å€¼ã€‚å¦‚æœæœªæ‰¾åˆ°ä¼˜å…ˆçº§ï¼Œåˆ™æ‹’ç»Podã€‚ ResourceQuotaï¼šæ­¤å‡†å…¥æ§åˆ¶å™¨å°†è§‚å¯Ÿä¼ å…¥è¯·æ±‚å¹¶ç¡®ä¿å®ƒä¸è¿åå‘½åç©ºé—´çš„ResourceQuotaå¯¹è±¡ä¸­åˆ—ä¸¾çš„ä»»ä½•çº¦æŸã€‚ SecurityContextDenyï¼šæ­¤å‡†å…¥æ§åˆ¶å™¨å°†æ‹’ç»ä»»ä½•è¯•å›¾è®¾ç½®æŸäº›å‡çº§çš„SecurityContextå­—æ®µçš„pod ã€‚ ServiceAccountï¼šæ­¤å‡†å…¥æ§åˆ¶å™¨å®ç°serviceAccountsçš„è‡ªåŠ¨åŒ–ã€‚ ç”¨ä¸­çš„å­˜å‚¨å¯¹è±¡ä¿æŠ¤ï¼šè¯¥StorageObjectInUseProtectionæ’ä»¶å°†kubernetes.io/pvc-protectionæˆ–kubernetes.io/pv-protectionç»ˆç»“å™¨æ·»åŠ åˆ°æ–°åˆ›å»ºçš„æŒä¹…å·å£°æ˜ï¼ˆPVCï¼‰æˆ–æŒä¹…å·ï¼ˆPVï¼‰ã€‚åœ¨ç”¨æˆ·åˆ é™¤PVCæˆ–PVçš„æƒ…å†µä¸‹ï¼ŒPVCæˆ–PVä¸ä¼šè¢«ç§»é™¤ï¼Œç›´åˆ°PVCæˆ–PVä¿æŠ¤æ§åˆ¶å™¨ä»PVCæˆ–PVä¸­ç§»é™¤ç»ˆç»“å™¨ã€‚æœ‰å…³æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…ä½¿ç”¨ä¸­çš„å­˜å‚¨å¯¹è±¡ä¿æŠ¤ã€‚ ValidatingAdmissionWebhookï¼ˆ1.8ç‰ˆæœ¬ä¸­ä¸ºalphaï¼›1.9ç‰ˆæœ¬ä¸­ä¸ºbetaï¼‰ï¼šè¯¥å‡†å…¥æ§åˆ¶å™¨è°ƒç”¨ä¸è¯·æ±‚åŒ¹é…çš„ä»»ä½•éªŒè¯webhookã€‚åŒ¹é…çš„webhooksæ˜¯å¹¶è¡Œè°ƒç”¨çš„ï¼›å¦‚æœå…¶ä¸­ä»»ä½•ä¸€ä¸ªæ‹’ç»è¯·æ±‚ï¼Œåˆ™è¯·æ±‚å¤±è´¥ã€‚ æ¨èé…ç½® linkKubernetes 1.10+\nå¯¹äºKubernetes 1.10åŠæ›´é«˜ç‰ˆæœ¬ï¼Œæˆ‘ä»¬å»ºè®®ä½¿ç”¨--enable-admission-pluginsæ ‡å¿—è¿è¡Œä»¥ä¸‹ä¸€ç»„å‡†å…¥æ§åˆ¶å™¨ï¼ˆé¡ºåºæ— å…³ç´§è¦ï¼‰ã€‚\næ³¨æ„ï¼š --admission-controlåœ¨1.10ä¸­å·²å¼ƒç”¨å¹¶æ›¿æ¢ä¸º--enable-admission-pluginsã€‚\n--enable-admission-plugins=NamespaceLifecycle,LimitRanger,ServiceAccount,DefaultStorageClass,DefaultTolerationSeconds,MutatingAdmissionWebhook,ValidatingAdmissionWebhook,ResourceQuota å¯¹äºKubernetes 1.9åŠæ›´æ—©ç‰ˆæœ¬ï¼Œæˆ‘ä»¬å»ºè®®ä½¿ç”¨--admission-controlæ ‡å¿—ï¼ˆé¡ºåºæœ‰å…³ï¼‰è¿è¡Œä»¥ä¸‹ä¸€ç»„è®¸å¯æ§åˆ¶å™¨ã€‚\nKubernetes 1.9\n--admission-control=NamespaceLifecycle,LimitRanger,ServiceAccount,DefaultStorageClass,DefaultTolerationSeconds,MutatingAdmissionWebhook,ValidatingAdmissionWebhook,ResourceQuota å€¼å¾—é‡ç”³çš„æ˜¯ï¼Œåœ¨1.9ä¸­ï¼Œè¿™äº›å‘ç”Ÿåœ¨å˜æ›´é˜¶æ®µå’ŒéªŒè¯é˜¶æ®µï¼Œå¹¶ä¸”ä¾‹å¦‚ResourceQuotaåœ¨éªŒè¯é˜¶æ®µè¿è¡Œï¼Œå› æ­¤æ˜¯è¿è¡Œçš„æœ€åä¸€ä¸ªå‡†å…¥æ§åˆ¶å™¨ã€‚ MutatingAdmissionWebhookåœ¨æ­¤åˆ—è¡¨ä¸­å‡ºç°åœ¨å®ƒä¹‹å‰ï¼Œå› ä¸ºå®ƒåœ¨å˜æ›´é˜¶æ®µè¿è¡Œã€‚\nå¯¹äºæ—©æœŸç‰ˆæœ¬ï¼Œæ²¡æœ‰éªŒè¯å‡†å…¥æ§åˆ¶å™¨å’Œå˜æ›´å‡†å…¥æ§åˆ¶å™¨çš„æ¦‚å¿µï¼Œå¹¶ä¸”å‡†å…¥æ§åˆ¶å™¨ä»¥æŒ‡å®šçš„ç¡®åˆ‡é¡ºåºè¿è¡Œã€‚\nKubernetes 1.6 - 1.8\n--admission-control=NamespaceLifecycle,LimitRanger,ServiceAccount,PersistentVolumeLabel,DefaultStorageClass,ResourceQuota,DefaultTolerationSeconds å‚è€ƒ link Using Admission Controllers - kubernetes.io "
            }
        );
    index.add(
            {
                id:  63 ,
                href: "\/docs\/information\/software\/cloud\/k8s_rs_manager\/revision_generation\/",
                title: "ResourceVersion \u0026 Generation",
                description: "æœ€è¿‘ç”¨kubernetes client-goå®ç°ä¸€ä¸ªç›‘å¬ deployments å˜åŒ–çš„åŠŸèƒ½ï¼Œåœ¨å¦‚ä½•åˆ¤æ–­ kubernetes èµ„æºçš„å˜åŒ–æœ‰äº†ç–‘é—®ï¼ŒæŸ¥é˜…æ–‡æ¡£å¾—çŸ¥æœ‰ä¸¤ä¸ªä¸kubernetesèµ„æºå¯¹è±¡ç›¸å…³çš„å±æ€§ã€‚\nResourceVersion Generation ResourceVersion linkresourceVersionçš„ç»´æŠ¤åˆ©ç”¨äº†åº•å±‚å­˜å‚¨etcdçš„Revisionæœºåˆ¶ã€‚\nEtcd Version linkETCDå…±å››ç§version\nRevision ModRevision Version CreateRevision å­—æ®µ ä½œç”¨èŒƒå›´ è¯´æ˜ Version Key å•ä¸ªKeyçš„ä¿®æ”¹æ¬¡æ•°ï¼Œå•è°ƒé€’å¢ Revision å…¨å±€ Keyåœ¨é›†ç¾¤ä¸­çš„å…¨å±€ç‰ˆæœ¬å·ï¼Œå…¨å±€å”¯ä¸€ ModRevison Key Key æœ€åä¸€æ¬¡ä¿®æ”¹æ—¶çš„ Revision CreateRevision å…¨å±€ Key åˆ›å»ºæ—¶çš„ Revision æ ¹æ®æ›´æ–°èµ„æºæ—¶æ˜¯å¦å¸¦æœ‰resourceVersionåˆ†ä¸¤ç§æƒ…å†µï¼š\næœªå¸¦resourceVersionï¼šæ— æ¡ä»¶æ›´æ–°ï¼Œè·å¾—etcdä¸­æœ€æ–°çš„æ•°æ®ç„¶åå†æ­¤åŸºç¡€ä¸Šæ›´æ–° å¸¦æœ‰resourceVersionï¼šå’Œetcdä¸­modRevisionå¯¹æ¯”ï¼Œä¸ä¸€æ ·å°±æç¤ºç‰ˆæœ¬å†²çªï¼Œè¯´æ˜æ•°æ®å·²å‘ç”Ÿä¿®æ”¹ï¼Œå½“å‰è¦ä¿®æ”¹çš„ç‰ˆæœ¬å·²ä¸æ˜¯æœ€æ–°æ•°æ®ã€‚ Kubernetesèµ„æºç‰ˆæœ¬æ§åˆ¶é‡‡ç”¨ä¹è§‚é”ï¼Œapiserveråœ¨å†™å…¥etcdæ—¶ä½œå†²çªæ£€æµ‹ã€‚\nGeneration linkGenerationåˆå§‹å€¼ä¸º1ï¼ŒéšSpecå†…å®¹çš„æ”¹å˜è€Œè‡ªå¢ã€‚\nå¦‚æœcontrolleræ›´æ–°èµ„æºå¤±è´¥ï¼Œå¸¸è§çš„åšæ³•æ˜¯ï¼Œé‡æ–°æ‹‰å–èµ„æºï¼Œå¦‚æœèµ„æºGenerationæ²¡æœ‰å˜åŒ–ï¼Œå°†æ›´æ–°ç»“æœPatchåˆ°æ–°çš„èµ„æºä¸Šå†å°è¯•æ›´æ–°ã€‚\n",
                content: "æœ€è¿‘ç”¨kubernetes client-goå®ç°ä¸€ä¸ªç›‘å¬ deployments å˜åŒ–çš„åŠŸèƒ½ï¼Œåœ¨å¦‚ä½•åˆ¤æ–­ kubernetes èµ„æºçš„å˜åŒ–æœ‰äº†ç–‘é—®ï¼ŒæŸ¥é˜…æ–‡æ¡£å¾—çŸ¥æœ‰ä¸¤ä¸ªä¸kubernetesèµ„æºå¯¹è±¡ç›¸å…³çš„å±æ€§ã€‚\nResourceVersion Generation ResourceVersion linkresourceVersionçš„ç»´æŠ¤åˆ©ç”¨äº†åº•å±‚å­˜å‚¨etcdçš„Revisionæœºåˆ¶ã€‚\nEtcd Version linkETCDå…±å››ç§version\nRevision ModRevision Version CreateRevision å­—æ®µ ä½œç”¨èŒƒå›´ è¯´æ˜ Version Key å•ä¸ªKeyçš„ä¿®æ”¹æ¬¡æ•°ï¼Œå•è°ƒé€’å¢ Revision å…¨å±€ Keyåœ¨é›†ç¾¤ä¸­çš„å…¨å±€ç‰ˆæœ¬å·ï¼Œå…¨å±€å”¯ä¸€ ModRevison Key Key æœ€åä¸€æ¬¡ä¿®æ”¹æ—¶çš„ Revision CreateRevision å…¨å±€ Key åˆ›å»ºæ—¶çš„ Revision æ ¹æ®æ›´æ–°èµ„æºæ—¶æ˜¯å¦å¸¦æœ‰resourceVersionåˆ†ä¸¤ç§æƒ…å†µï¼š\næœªå¸¦resourceVersionï¼šæ— æ¡ä»¶æ›´æ–°ï¼Œè·å¾—etcdä¸­æœ€æ–°çš„æ•°æ®ç„¶åå†æ­¤åŸºç¡€ä¸Šæ›´æ–° å¸¦æœ‰resourceVersionï¼šå’Œetcdä¸­modRevisionå¯¹æ¯”ï¼Œä¸ä¸€æ ·å°±æç¤ºç‰ˆæœ¬å†²çªï¼Œè¯´æ˜æ•°æ®å·²å‘ç”Ÿä¿®æ”¹ï¼Œå½“å‰è¦ä¿®æ”¹çš„ç‰ˆæœ¬å·²ä¸æ˜¯æœ€æ–°æ•°æ®ã€‚ Kubernetesèµ„æºç‰ˆæœ¬æ§åˆ¶é‡‡ç”¨ä¹è§‚é”ï¼Œapiserveråœ¨å†™å…¥etcdæ—¶ä½œå†²çªæ£€æµ‹ã€‚\nGeneration linkGenerationåˆå§‹å€¼ä¸º1ï¼ŒéšSpecå†…å®¹çš„æ”¹å˜è€Œè‡ªå¢ã€‚\nå¦‚æœcontrolleræ›´æ–°èµ„æºå¤±è´¥ï¼Œå¸¸è§çš„åšæ³•æ˜¯ï¼Œé‡æ–°æ‹‰å–èµ„æºï¼Œå¦‚æœèµ„æºGenerationæ²¡æœ‰å˜åŒ–ï¼Œå°†æ›´æ–°ç»“æœPatchåˆ°æ–°çš„èµ„æºä¸Šå†å°è¯•æ›´æ–°ã€‚\n"
            }
        );
    index.add(
            {
                id:  64 ,
                href: "\/docs\/information\/software\/serven_rules\/",
                title: "è®¾è®¡æ¨¡å¼ä¸ä¸ƒå¤§åŸåˆ™",
                description: "è®¾è®¡æ¨¡å¼æ¦‚è¿° linkè®¾è®¡æ¨¡å¼æ˜¯å¯å¤ç”¨é¢å‘å¯¹è±¡è½¯ä»¶çš„è®¾è®¡ç»éªŒæ€»ç»“ï¼Œé€šè¿‡23ç§ç»å…¸æ¨¡å¼è§£å†³ç‰¹å®šåœºæ™¯ä¸‹çš„ä»£ç æ‰©å±•æ€§ã€å¤ç”¨æ€§ã€ç»´æŠ¤æ€§é—®é¢˜ã€‚å…¶æœ¬è´¨éµå¾ªä¸ƒå¤§æ ¸å¿ƒè®¾è®¡åŸåˆ™ï¼š\nä¸ƒå¤§è®¾è®¡åŸåˆ™è¯¦è§£ link1. å•ä¸€èŒè´£åŸåˆ™ï¼ˆSRPï¼‰ linkæ ¸å¿ƒæ€æƒ³ï¼šä¸€ä¸ªç±»åªè´Ÿè´£ä¸€ä¸ªåŠŸèƒ½é¢†åŸŸä¸­çš„ç›¸åº”èŒè´£\nè§£å†³é—®é¢˜ï¼š\né¿å…ç±»å› æ‰¿æ‹…è¿‡å¤šèŒè´£å¯¼è‡´çš„é«˜è€¦åˆ å‡å°‘ä¿®æ”¹ä»£ç æ—¶å¼•å‘è¿é”é”™è¯¯çš„é£é™© ç¤ºä¾‹ï¼š\n// é”™è¯¯ç¤ºä¾‹ï¼šç”¨æˆ·ç®¡ç†ç±»åŒæ—¶å¤„ç†ä¿¡æ¯å­˜å‚¨å’Œæ—¥å¿—è®°å½• class UserManager { void saveUser() { /* å­˜å‚¨ç”¨æˆ· */ } void logActivity() { /* è®°å½•æ—¥å¿— */ } } // æ­£ç¡®æ‹†åˆ† class UserRepository { void saveUser() } class ActivityLogger { void logActivity() } 2. å¼€é—­åŸåˆ™ï¼ˆOCPï¼‰ linkæ ¸å¿ƒæ€æƒ³ï¼šå¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­\nè§£å†³é—®é¢˜ï¼š\næ–°åŠŸèƒ½æ‰©å±•æ— éœ€ä¿®æ”¹åŸæœ‰ä»£ç  æå‡ç³»ç»Ÿç¨³å®šæ€§ä¸å¯ç»´æŠ¤æ€§ ç¤ºä¾‹ï¼š\n// åŸºç¡€å›¾å½¢æ¥å£ interface Shape { double area(); } // æ–°å¢å›¾å½¢åªéœ€æ‰©å±•æ¥å£ class Circle implements Shape { /* å®ç°åœ†é¢ç§¯è®¡ç®— */ } class Square implements Shape { /* å®ç°æ­£æ–¹å½¢é¢ç§¯è®¡ç®— */ } 3. é‡Œæ°æ›¿æ¢åŸåˆ™ï¼ˆLSPï¼‰ linkæ ¸å¿ƒæ€æƒ³ï¼šå­ç±»å¿…é¡»èƒ½æ›¿æ¢çˆ¶ç±»ä¸”ä¸å½±å“ç¨‹åºæ­£ç¡®æ€§\nè§£å†³é—®é¢˜ï¼š\n",
                content: "è®¾è®¡æ¨¡å¼æ¦‚è¿° linkè®¾è®¡æ¨¡å¼æ˜¯å¯å¤ç”¨é¢å‘å¯¹è±¡è½¯ä»¶çš„è®¾è®¡ç»éªŒæ€»ç»“ï¼Œé€šè¿‡23ç§ç»å…¸æ¨¡å¼è§£å†³ç‰¹å®šåœºæ™¯ä¸‹çš„ä»£ç æ‰©å±•æ€§ã€å¤ç”¨æ€§ã€ç»´æŠ¤æ€§é—®é¢˜ã€‚å…¶æœ¬è´¨éµå¾ªä¸ƒå¤§æ ¸å¿ƒè®¾è®¡åŸåˆ™ï¼š\nä¸ƒå¤§è®¾è®¡åŸåˆ™è¯¦è§£ link1. å•ä¸€èŒè´£åŸåˆ™ï¼ˆSRPï¼‰ linkæ ¸å¿ƒæ€æƒ³ï¼šä¸€ä¸ªç±»åªè´Ÿè´£ä¸€ä¸ªåŠŸèƒ½é¢†åŸŸä¸­çš„ç›¸åº”èŒè´£\nè§£å†³é—®é¢˜ï¼š\né¿å…ç±»å› æ‰¿æ‹…è¿‡å¤šèŒè´£å¯¼è‡´çš„é«˜è€¦åˆ å‡å°‘ä¿®æ”¹ä»£ç æ—¶å¼•å‘è¿é”é”™è¯¯çš„é£é™© ç¤ºä¾‹ï¼š\n// é”™è¯¯ç¤ºä¾‹ï¼šç”¨æˆ·ç®¡ç†ç±»åŒæ—¶å¤„ç†ä¿¡æ¯å­˜å‚¨å’Œæ—¥å¿—è®°å½• class UserManager { void saveUser() { /* å­˜å‚¨ç”¨æˆ· */ } void logActivity() { /* è®°å½•æ—¥å¿— */ } } // æ­£ç¡®æ‹†åˆ† class UserRepository { void saveUser() } class ActivityLogger { void logActivity() } 2. å¼€é—­åŸåˆ™ï¼ˆOCPï¼‰ linkæ ¸å¿ƒæ€æƒ³ï¼šå¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­\nè§£å†³é—®é¢˜ï¼š\næ–°åŠŸèƒ½æ‰©å±•æ— éœ€ä¿®æ”¹åŸæœ‰ä»£ç  æå‡ç³»ç»Ÿç¨³å®šæ€§ä¸å¯ç»´æŠ¤æ€§ ç¤ºä¾‹ï¼š\n// åŸºç¡€å›¾å½¢æ¥å£ interface Shape { double area(); } // æ–°å¢å›¾å½¢åªéœ€æ‰©å±•æ¥å£ class Circle implements Shape { /* å®ç°åœ†é¢ç§¯è®¡ç®— */ } class Square implements Shape { /* å®ç°æ­£æ–¹å½¢é¢ç§¯è®¡ç®— */ } 3. é‡Œæ°æ›¿æ¢åŸåˆ™ï¼ˆLSPï¼‰ linkæ ¸å¿ƒæ€æƒ³ï¼šå­ç±»å¿…é¡»èƒ½æ›¿æ¢çˆ¶ç±»ä¸”ä¸å½±å“ç¨‹åºæ­£ç¡®æ€§\nè§£å†³é—®é¢˜ï¼š\né˜²æ­¢ç»§æ‰¿å…³ç³»ç ´åç³»ç»ŸåŸæœ‰é€»è¾‘ ç¡®ä¿å¤šæ€çš„æ­£ç¡®ä½¿ç”¨ ç»å…¸æ¡ˆä¾‹ï¼š\n// é”™è¯¯è®¾è®¡ class Rectangle { int width, height; } class Square extends Rectangle {} // ä¿®æ”¹widthä¼šè‡ªåŠ¨æ”¹å˜height // æ­£ç¡®åšæ³•ï¼šé€šè¿‡æ¥å£å®šä¹‰å½¢çŠ¶ interface Quadrilateral { int getWidth(); int getHeight(); } 4. ä¾èµ–å€’ç½®åŸåˆ™ï¼ˆDIPï¼‰ linkæ ¸å¿ƒæ€æƒ³ï¼šé«˜å±‚æ¨¡å—ä¸ä¾èµ–ä½å±‚æ¨¡å—ï¼ŒäºŒè€…éƒ½ä¾èµ–æŠ½è±¡\nè§£å†³é—®é¢˜ï¼š\né™ä½æ¨¡å—é—´è€¦åˆåº¦ æé«˜ç³»ç»Ÿå¯æ‰©å±•æ€§ åœºæ™¯ç¤ºä¾‹ï¼š\ninterface MessageService { void send(); } // é«˜å±‚æ¨¡å—é€šè¿‡æ¥å£è°ƒç”¨ class Notification { private MessageService service; Notification(MessageService service) { this.service = service; } } // å¯æ‰©å±•å¤šç§å®ç°ï¼ˆEmailService/SMSServiceï¼‰ 5. æ¥å£éš”ç¦»åŸåˆ™ï¼ˆISPï¼‰ linkæ ¸å¿ƒæ€æƒ³ï¼šå®¢æˆ·ç«¯ä¸åº”ä¾èµ–å®ƒä¸éœ€è¦çš„æ¥å£\nè§£å†³é—®é¢˜ï¼š\né¿å…æ¥å£è‡ƒè‚¿å¯¼è‡´å®ç°ç±»å†—ä½™ å‡å°‘æ¥å£å˜æ›´å¯¹å®¢æˆ·ç«¯çš„å½±å“ å®ç°æ–¹å¼ï¼š\n// é”™è¯¯ï¼šå¤§å‹æ¥å£ interface Animal { void eat(); void fly(); // ä¼é¹…ä¸éœ€è¦æ­¤æ–¹æ³• } // æ­£ç¡®æ‹†åˆ† interface Swimmable { void swim(); } interface Flyable { void fly(); } 6. è¿ªç±³ç‰¹æ³•åˆ™ï¼ˆLoDï¼‰ linkæ ¸å¿ƒæ€æƒ³ï¼šä¸€ä¸ªå¯¹è±¡åº”å°½å¯èƒ½å°‘äº†è§£å…¶ä»–å¯¹è±¡\nè§£å†³é—®é¢˜ï¼š\né™ä½ç±»ä¹‹é—´çš„è€¦åˆåº¦ æé«˜æ¨¡å—ç‹¬ç«‹æ€§ åº”ç”¨åœºæ™¯ï¼š\n// ç›´æ¥é€šä¿¡ï¼ˆé«˜è€¦åˆï¼‰ class A { void call(B b) { b.method(); } } // é€šè¿‡ä¸­ä»‹ç±»ï¼ˆä½è€¦åˆï¼‰ class Mediator { void process() { B b = new B(); b.method(); } } 7. åˆæˆå¤ç”¨åŸåˆ™ï¼ˆCARPï¼‰ linkæ ¸å¿ƒæ€æƒ³ï¼šä¼˜å…ˆä½¿ç”¨ç»„åˆ/èšåˆï¼Œè€Œéç»§æ‰¿\nè§£å†³é—®é¢˜ï¼š\né¿å…ç»§æ‰¿ç ´åå°è£…æ€§ æ›´çµæ´»åœ°å¤ç”¨å·²æœ‰åŠŸèƒ½ å¯¹æ¯”ç¤ºä¾‹ï¼š\n// é”™è¯¯ï¼šé€šè¿‡ç»§æ‰¿å®ç°å¤ç”¨ class Car extends Engine {} // æ­£ç¡®ï¼šé€šè¿‡ç»„åˆå®ç°å¤ç”¨ class Car { private Engine engine; Car(Engine engine) { this.engine = engine; } } æ€»ç»“ link åŸåˆ™ æ ¸å¿ƒä»·å€¼ å…¸å‹åº”ç”¨åœºæ™¯ SRP åŠŸèƒ½èšç„¦ æ¨¡å—æ‹†åˆ†ã€å¾®æœåŠ¡è®¾è®¡ OCP ç¨³å®šæ‰©å±• æ’ä»¶ç³»ç»Ÿã€æ¡†æ¶è®¾è®¡ LSP ç»§æ‰¿å®‰å…¨ å¤šæ€å®ç°ã€APIè®¾è®¡ DIP è§£è€¦æŠ½è±¡ ä¾èµ–æ³¨å…¥ã€ä¸­é—´ä»¶ ISP æ¥å£ç²¾ç®€ SDKè®¾è®¡ã€åè®®å®šä¹‰ LoD æœ€å°äº¤äº’ åˆ†å±‚æ¶æ„ã€MVCæ¨¡å¼ CARP çµæ´»å¤ç”¨ ç»„ä»¶åŒ–å¼€å‘ã€åº“å°è£… æ ¸å¿ƒç›®æ ‡ï¼šé€šè¿‡é«˜å†…èšã€ä½è€¦åˆçš„è®¾è®¡ï¼Œæ„å»ºå¯ç»´æŠ¤ã€å¯æ‰©å±•ã€é«˜å¤ç”¨çš„è½¯ä»¶ç³»ç»Ÿ\n"
            }
        );
    index.add(
            {
                id:  65 ,
                href: "\/docs\/information\/software\/clean_arch\/",
                title: "ç®€æ´æ¶æ„",
                description: "1. æ¦‚å¿µä¸æ ¸å¿ƒç›®æ ‡ linkç®€æ´æ¶æ„ï¼ˆClean Architectureï¼‰æ˜¯ä¸€ç§ä»¥ä¸šåŠ¡é€»è¾‘ä¸ºæ ¸å¿ƒçš„è½¯ä»¶æ¶æ„è®¾è®¡æ–¹æ³•è®ºã€‚å…¶æ ¸å¿ƒç›®æ ‡æ˜¯ï¼š\nå»ºç«‹æ¡†æ¶æ— å…³çš„ç³»ç»Ÿç»“æ„ ä¿æŒä¸šåŠ¡é€»è¾‘çš„ç‹¬ç«‹æ€§ä¸å¯æµ‹è¯•æ€§ å®ç°åŒå‘éš”ç¦»ï¼šä¸šåŠ¡æ ¸å¿ƒä¸æŠ€æœ¯å®ç°çš„éš”ç¦»ã€æ•°æ®æºä¸å±•ç¤ºå±‚çš„éš”ç¦» é€šè¿‡åˆ†å±‚è®¾è®¡å¼ºåˆ¶å®æ–½ä¾èµ–è§„åˆ™ 2. æ ¸å¿ƒè®¾è®¡æ€æƒ³ linkgraph TD subgraph æ¡†æ¶å±‚ Web[Webæ¡†æ¶] DB[(æ•°æ®åº“)] subgraph æ¥å£é€‚é…å±‚ Controllers Presenters subgraph ç”¨ä¾‹å±‚ UseCases subgraph å®ä½“å±‚ Entities end end end end Web --\u003e Controllers Controllers --\u003e UseCases UseCases --\u003e Entities Presenters --\u003e UseCases DB -.-\u003e Entities 2.1 åˆ†å±‚ç»“æ„ï¼ˆåŒå¿ƒåœ†æ¨¡å‹ï¼‰ linkåˆ†å±‚è¯´æ˜ï¼š link å®ä½“å±‚ï¼ˆEntitiesï¼‰\nåŒ…å«æ ¸å¿ƒä¸šåŠ¡å¯¹è±¡ä¸è§„åˆ™ ç¤ºä¾‹ï¼šè®¢å•å®ä½“ã€ç”¨æˆ·å®ä½“åŠå…¶éªŒè¯è§„åˆ™ ç”¨ä¾‹å±‚ï¼ˆUse Casesï¼‰\nå®ç°å…·ä½“ä¸šåŠ¡åœºæ™¯çš„äº¤äº’é€»è¾‘ ç¤ºä¾‹ï¼šâ€œåˆ›å»ºè®¢å•\"æµç¨‹ã€â€œæ”¯ä»˜å¤„ç†\"æµç¨‹ æ¥å£é€‚é…å±‚ï¼ˆInterface Adaptersï¼‰\nè½¬æ¢æ•°æ®æ ¼å¼é€‚é…ä¸åŒåè®® åŒ…å«ï¼šæ§åˆ¶å™¨ã€ç½‘å…³ã€æ•°æ®æ˜ å°„å™¨ æ¡†æ¶å±‚ï¼ˆFrameworks \u0026 Driversï¼‰\næŠ€æœ¯å®ç°ç»†èŠ‚ï¼šæ•°æ®åº“ã€Webæ¡†æ¶ã€UIç»„ä»¶ 2.2 ä¾èµ–è§„åˆ™ link å‘å†…ä¾èµ–åŸåˆ™ï¼šå¤–å±‚å¯ä»¥ä¾èµ–å†…å±‚ï¼Œåä¹‹ç¦æ­¢ æŠ½è±¡æ¥å£å®šä¹‰åœ¨å†…å±‚ï¼Œå…·ä½“å®ç°æ”¾åœ¨å¤–å±‚ æ•°æ®æµå‘ï¼šä»å¤–å±‚åˆ°å†…å±‚å¿…é¡»ç»è¿‡è¾¹ç•Œæ¥å£ 3. è§£å†³çš„å…³é”®é—®é¢˜ link é—®é¢˜ç±»å‹ ä¼ ç»Ÿæ¶æ„ç—›ç‚¹ ç®€æ´æ¶æ„è§£å†³æ–¹æ¡ˆ ä»£ç è€¦åˆåº¦ ä¸šåŠ¡é€»è¾‘ä¸æŠ€æœ¯å®ç°æ·±åº¦è€¦åˆ é€šè¿‡åˆ†å±‚å¼ºåˆ¶è§£è€¦ å¯ç»´æŠ¤æ€§ ä¿®æ”¹æ¡†æ¶å¯¼è‡´ä¸šåŠ¡é€»è¾‘å˜åŠ¨ ä¸šåŠ¡æ ¸å¿ƒä¿æŒæŠ€æœ¯ä¸­ç«‹ æµ‹è¯•å¤æ‚åº¦ éœ€è¦å¯åŠ¨å®Œæ•´ç¯å¢ƒæ‰èƒ½æµ‹è¯• æ ¸å¿ƒå±‚å¯è„±ç¦»æ¡†æ¶ç‹¬ç«‹æµ‹è¯• æŠ€æœ¯é”å®š æ›´æ¢æŠ€æœ¯æ ˆæˆæœ¬æé«˜ é€šè¿‡æ¥å£é€‚é…å®ç°çµæ´»æ›¿æ¢ 4. å…·ä½“å®ç°ç¤ºä¾‹ link4.1 ä»£ç ç»“æ„ link # å®ä½“å±‚ class Order: def __init__(self, items: list, total: float): self._validate(items, total) def _validate(self, items, total): # æ ¸å¿ƒä¸šåŠ¡è§„åˆ™å®ç° # ç”¨ä¾‹å±‚ class CreateOrderUseCase: def __init__(self, order_repo: OrderRepository): self.repo = order_repo def execute(self, items): order = Order(items) return self.repo.save(order) # æ¥å£é€‚é…å±‚ï¼ˆå®ç°å†…å±‚å®šä¹‰çš„æŠ½è±¡æ¥å£ï¼‰ class SQLOrderRepository: def save(self, order): # æ•°æ®åº“å…·ä½“å®ç° # æ¡†æ¶å±‚ï¼ˆFastAPIç¤ºä¾‹ï¼‰ @app.post(\"/orders\") def create_order(items: list): repo = SQLOrderRepository() use_case = CreateOrderUseCase(repo) return use_case.execute(items) 4.2 ä¾èµ–ç®¡ç† linkgraph TD A[Webæ¡†æ¶] --\u003e|ä¾èµ–| B[æ¥å£é€‚é…å™¨] B --\u003e|å®ç°| C[ç”¨ä¾‹å±‚æ¥å£] C --\u003e|ä¾èµ–| D[å®ä½“å±‚] 5. ç±»ä¼¼æ¶æ„æ€æƒ³å¯¹æ¯” link æ¶æ„ç±»å‹ æ ¸å¿ƒå·®å¼‚ç‚¹ é€‚ç”¨åœºæ™¯ åˆ†å±‚æ¶æ„ æ°´å¹³åˆ†å±‚ vs åŒå¿ƒåœ†åˆ†å±‚ ä¼ ç»Ÿä¼ä¸šåº”ç”¨ å…­è¾¹å½¢æ¶æ„ ç«¯å£-é€‚é…å™¨æ¨¡å¼æ›´æ˜ç¡® é«˜äº¤äº’æ€§ç³»ç»Ÿ DDD å¼ºè°ƒé¢†åŸŸå»ºæ¨¡è€Œéç»“æ„çº¦æŸ å¤æ‚ä¸šåŠ¡ç³»ç»Ÿ æ´‹è‘±æ¶æ„ ç±»ä¼¼åˆ†å±‚ä½†å¼ºè°ƒé¢†åŸŸæœåŠ¡å±‚ é•¿æœŸæ¼”è¿›çš„ä¸­å¤§å‹ç³»ç»Ÿ 6. ä¼˜åŠ¿ä¸æŒ‘æˆ˜ linkâœ… æ ¸å¿ƒä¼˜åŠ¿ï¼š\n",
                content: "1. æ¦‚å¿µä¸æ ¸å¿ƒç›®æ ‡ linkç®€æ´æ¶æ„ï¼ˆClean Architectureï¼‰æ˜¯ä¸€ç§ä»¥ä¸šåŠ¡é€»è¾‘ä¸ºæ ¸å¿ƒçš„è½¯ä»¶æ¶æ„è®¾è®¡æ–¹æ³•è®ºã€‚å…¶æ ¸å¿ƒç›®æ ‡æ˜¯ï¼š\nå»ºç«‹æ¡†æ¶æ— å…³çš„ç³»ç»Ÿç»“æ„ ä¿æŒä¸šåŠ¡é€»è¾‘çš„ç‹¬ç«‹æ€§ä¸å¯æµ‹è¯•æ€§ å®ç°åŒå‘éš”ç¦»ï¼šä¸šåŠ¡æ ¸å¿ƒä¸æŠ€æœ¯å®ç°çš„éš”ç¦»ã€æ•°æ®æºä¸å±•ç¤ºå±‚çš„éš”ç¦» é€šè¿‡åˆ†å±‚è®¾è®¡å¼ºåˆ¶å®æ–½ä¾èµ–è§„åˆ™ 2. æ ¸å¿ƒè®¾è®¡æ€æƒ³ linkgraph TD subgraph æ¡†æ¶å±‚ Web[Webæ¡†æ¶] DB[(æ•°æ®åº“)] subgraph æ¥å£é€‚é…å±‚ Controllers Presenters subgraph ç”¨ä¾‹å±‚ UseCases subgraph å®ä½“å±‚ Entities end end end end Web --\u003e Controllers Controllers --\u003e UseCases UseCases --\u003e Entities Presenters --\u003e UseCases DB -.-\u003e Entities 2.1 åˆ†å±‚ç»“æ„ï¼ˆåŒå¿ƒåœ†æ¨¡å‹ï¼‰ linkåˆ†å±‚è¯´æ˜ï¼š link å®ä½“å±‚ï¼ˆEntitiesï¼‰\nåŒ…å«æ ¸å¿ƒä¸šåŠ¡å¯¹è±¡ä¸è§„åˆ™ ç¤ºä¾‹ï¼šè®¢å•å®ä½“ã€ç”¨æˆ·å®ä½“åŠå…¶éªŒè¯è§„åˆ™ ç”¨ä¾‹å±‚ï¼ˆUse Casesï¼‰\nå®ç°å…·ä½“ä¸šåŠ¡åœºæ™¯çš„äº¤äº’é€»è¾‘ ç¤ºä¾‹ï¼šâ€œåˆ›å»ºè®¢å•\"æµç¨‹ã€â€œæ”¯ä»˜å¤„ç†\"æµç¨‹ æ¥å£é€‚é…å±‚ï¼ˆInterface Adaptersï¼‰\nè½¬æ¢æ•°æ®æ ¼å¼é€‚é…ä¸åŒåè®® åŒ…å«ï¼šæ§åˆ¶å™¨ã€ç½‘å…³ã€æ•°æ®æ˜ å°„å™¨ æ¡†æ¶å±‚ï¼ˆFrameworks \u0026 Driversï¼‰\næŠ€æœ¯å®ç°ç»†èŠ‚ï¼šæ•°æ®åº“ã€Webæ¡†æ¶ã€UIç»„ä»¶ 2.2 ä¾èµ–è§„åˆ™ link å‘å†…ä¾èµ–åŸåˆ™ï¼šå¤–å±‚å¯ä»¥ä¾èµ–å†…å±‚ï¼Œåä¹‹ç¦æ­¢ æŠ½è±¡æ¥å£å®šä¹‰åœ¨å†…å±‚ï¼Œå…·ä½“å®ç°æ”¾åœ¨å¤–å±‚ æ•°æ®æµå‘ï¼šä»å¤–å±‚åˆ°å†…å±‚å¿…é¡»ç»è¿‡è¾¹ç•Œæ¥å£ 3. è§£å†³çš„å…³é”®é—®é¢˜ link é—®é¢˜ç±»å‹ ä¼ ç»Ÿæ¶æ„ç—›ç‚¹ ç®€æ´æ¶æ„è§£å†³æ–¹æ¡ˆ ä»£ç è€¦åˆåº¦ ä¸šåŠ¡é€»è¾‘ä¸æŠ€æœ¯å®ç°æ·±åº¦è€¦åˆ é€šè¿‡åˆ†å±‚å¼ºåˆ¶è§£è€¦ å¯ç»´æŠ¤æ€§ ä¿®æ”¹æ¡†æ¶å¯¼è‡´ä¸šåŠ¡é€»è¾‘å˜åŠ¨ ä¸šåŠ¡æ ¸å¿ƒä¿æŒæŠ€æœ¯ä¸­ç«‹ æµ‹è¯•å¤æ‚åº¦ éœ€è¦å¯åŠ¨å®Œæ•´ç¯å¢ƒæ‰èƒ½æµ‹è¯• æ ¸å¿ƒå±‚å¯è„±ç¦»æ¡†æ¶ç‹¬ç«‹æµ‹è¯• æŠ€æœ¯é”å®š æ›´æ¢æŠ€æœ¯æ ˆæˆæœ¬æé«˜ é€šè¿‡æ¥å£é€‚é…å®ç°çµæ´»æ›¿æ¢ 4. å…·ä½“å®ç°ç¤ºä¾‹ link4.1 ä»£ç ç»“æ„ link # å®ä½“å±‚ class Order: def __init__(self, items: list, total: float): self._validate(items, total) def _validate(self, items, total): # æ ¸å¿ƒä¸šåŠ¡è§„åˆ™å®ç° # ç”¨ä¾‹å±‚ class CreateOrderUseCase: def __init__(self, order_repo: OrderRepository): self.repo = order_repo def execute(self, items): order = Order(items) return self.repo.save(order) # æ¥å£é€‚é…å±‚ï¼ˆå®ç°å†…å±‚å®šä¹‰çš„æŠ½è±¡æ¥å£ï¼‰ class SQLOrderRepository: def save(self, order): # æ•°æ®åº“å…·ä½“å®ç° # æ¡†æ¶å±‚ï¼ˆFastAPIç¤ºä¾‹ï¼‰ @app.post(\"/orders\") def create_order(items: list): repo = SQLOrderRepository() use_case = CreateOrderUseCase(repo) return use_case.execute(items) 4.2 ä¾èµ–ç®¡ç† linkgraph TD A[Webæ¡†æ¶] --\u003e|ä¾èµ–| B[æ¥å£é€‚é…å™¨] B --\u003e|å®ç°| C[ç”¨ä¾‹å±‚æ¥å£] C --\u003e|ä¾èµ–| D[å®ä½“å±‚] 5. ç±»ä¼¼æ¶æ„æ€æƒ³å¯¹æ¯” link æ¶æ„ç±»å‹ æ ¸å¿ƒå·®å¼‚ç‚¹ é€‚ç”¨åœºæ™¯ åˆ†å±‚æ¶æ„ æ°´å¹³åˆ†å±‚ vs åŒå¿ƒåœ†åˆ†å±‚ ä¼ ç»Ÿä¼ä¸šåº”ç”¨ å…­è¾¹å½¢æ¶æ„ ç«¯å£-é€‚é…å™¨æ¨¡å¼æ›´æ˜ç¡® é«˜äº¤äº’æ€§ç³»ç»Ÿ DDD å¼ºè°ƒé¢†åŸŸå»ºæ¨¡è€Œéç»“æ„çº¦æŸ å¤æ‚ä¸šåŠ¡ç³»ç»Ÿ æ´‹è‘±æ¶æ„ ç±»ä¼¼åˆ†å±‚ä½†å¼ºè°ƒé¢†åŸŸæœåŠ¡å±‚ é•¿æœŸæ¼”è¿›çš„ä¸­å¤§å‹ç³»ç»Ÿ 6. ä¼˜åŠ¿ä¸æŒ‘æˆ˜ linkâœ… æ ¸å¿ƒä¼˜åŠ¿ï¼š\nä¸šåŠ¡æ ¸å¿ƒç”Ÿå­˜å‘¨æœŸå¯è¾¾10å¹´ä»¥ä¸Š æ–°åŠŸèƒ½å¼€å‘æ•ˆç‡æå‡40%ï¼ˆIBMæ¡ˆä¾‹ç ”ç©¶ï¼‰ æŠ€æœ¯è¿ç§»æˆæœ¬é™ä½70% âš ï¸ å®æ–½æŒ‘æˆ˜ï¼š\nåˆæœŸè®¾è®¡å¤æ‚åº¦å¢åŠ 20%-30% éœ€è¦å›¢é˜Ÿæ¶æ„æ„è¯†çš„æ ¹æœ¬è½¬å˜ å¯¹ç®€å•CRUDç³»ç»Ÿå¯èƒ½è¿‡åº¦è®¾è®¡ 7. æœ€ä½³å®è·µå»ºè®® link æ¸è¿›å¼æ”¹é€ ï¼šä»æ ¸å¿ƒæ¨¡å—å¼€å§‹å®æ–½ å¥‘çº¦æµ‹è¯•ï¼šç¡®ä¿æ¥å£å±‚ç¬¦åˆè§„èŒƒ ä¾èµ–æ£€æŸ¥ï¼šä½¿ç”¨å·¥å…·å¼ºåˆ¶åˆ†å±‚è§„åˆ™ï¼ˆå¦‚ArchUnitï¼‰ æ–‡æ¡£é©±åŠ¨ï¼šç»´æŠ¤æ¸…æ™°çš„æ¶æ„è¾¹ç•Œæ–‡æ¡£ æ€§èƒ½ç›‘æ§ï¼šå…³æ³¨è·¨å±‚é€šä¿¡å¼€é”€ 8. æ¼”è¿›è¶‹åŠ¿ link ä¸å¾®æœåŠ¡æ¶æ„èåˆå½¢æˆClean Microservices ç»“åˆServerlessçš„æ— æ¡†æ¶å®ç° é€šè¿‡WebAssemblyå®ç°æ ¸å¿ƒå±‚è·¨å¹³å° "
            }
        );
    index.add(
            {
                id:  66 ,
                href: "\/docs\/mix\/mermaid\/syntax\/c4\/",
                title: "C4 Diagrams",
                description: "C4 Diagrams link C4 Diagram: This is an experimental diagram for now. The syntax and properties can change in future releases. Proper documentation will be provided when the syntax is stable.\nMermaidâ€™s C4 diagram syntax is compatible with plantUML. See example below:\nC4Context title System Context diagram for Internet Banking System Enterprise_Boundary(b0, \"BankBoundary0\") { Person(customerA, \"Banking Customer A\", \"A customer of the bank, with personal bank accounts.\") Person(customerB, \"Banking Customer B\") Person_Ext(customerC, \"Banking Customer C\", \"desc\") Person(customerD, \"Banking Customer D\", \"A customer of the bank, with personal bank accounts.\") System(SystemAA, \"Internet Banking System\", \"Allows customers to view information about their bank accounts, and make payments.\") Enterprise_Boundary(b1, \"BankBoundary\") { SystemDb_Ext(SystemE, \"Mainframe Banking System\", \"Stores all of the core banking information about customers, accounts, transactions, etc.\") System_Boundary(b2, \"BankBoundary2\") { System(SystemA, \"Banking System A\") System(SystemB, \"Banking System B\", \"A system of the bank, with personal bank accounts. next line.\") } System_Ext(SystemC, \"E-mail system\", \"The internal Microsoft Exchange e-mail system.\") SystemDb(SystemD, \"Banking System D Database\", \"A system of the bank, with personal bank accounts.\") Boundary(b3, \"BankBoundary3\", \"boundary\") { SystemQueue(SystemF, \"Banking System F Queue\", \"A system of the bank.\") SystemQueue_Ext(SystemG, \"Banking System G Queue\", \"A system of the bank, with personal bank accounts.\") } } } BiRel(customerA, SystemAA, \"Uses\") BiRel(SystemAA, SystemE, \"Uses\") Rel(SystemAA, SystemC, \"Sends e-mails\", \"SMTP\") Rel(SystemC, customerA, \"Sends e-mails to\") UpdateElementStyle(customerA, $fontColor=\"red\", $bgColor=\"grey\", $borderColor=\"red\") UpdateRelStyle(customerA, SystemAA, $textColor=\"blue\", $lineColor=\"blue\", $offsetX=\"5\") UpdateRelStyle(SystemAA, SystemE, $textColor=\"blue\", $lineColor=\"blue\", $offsetY=\"-10\") UpdateRelStyle(SystemAA, SystemC, $textColor=\"blue\", $lineColor=\"blue\", $offsetY=\"-40\", $offsetX=\"-50\") UpdateRelStyle(SystemC, customerA, $textColor=\"red\", $lineColor=\"red\", $offsetX=\"-50\", $offsetY=\"20\") UpdateLayoutConfig($c4ShapeInRow=\"3\", $c4BoundaryInRow=\"1\") C4Context title System Context diagram for Internet Banking System Enterprise_Boundary(b0, \"BankBoundary0\") { Person(customerA, \"Banking Customer A\", \"A customer of the bank, with personal bank accounts.\") Person(customerB, \"Banking Customer B\") Person_Ext(customerC, \"Banking Customer C\", \"desc\") Person(customerD, \"Banking Customer D\", \"A customer of the bank, with personal bank accounts.\") System(SystemAA, \"Internet Banking System\", \"Allows customers to view information about their bank accounts, and make payments.\") Enterprise_Boundary(b1, \"BankBoundary\") { SystemDb_Ext(SystemE, \"Mainframe Banking System\", \"Stores all of the core banking information about customers, accounts, transactions, etc.\") System_Boundary(b2, \"BankBoundary2\") { System(SystemA, \"Banking System A\") System(SystemB, \"Banking System B\", \"A system of the bank, with personal bank accounts. next line.\") } System_Ext(SystemC, \"E-mail system\", \"The internal Microsoft Exchange e-mail system.\") SystemDb(SystemD, \"Banking System D Database\", \"A system of the bank, with personal bank accounts.\") Boundary(b3, \"BankBoundary3\", \"boundary\") { SystemQueue(SystemF, \"Banking System F Queue\", \"A system of the bank.\") SystemQueue_Ext(SystemG, \"Banking System G Queue\", \"A system of the bank, with personal bank accounts.\") } } } BiRel(customerA, SystemAA, \"Uses\") BiRel(SystemAA, SystemE, \"Uses\") Rel(SystemAA, SystemC, \"Sends e-mails\", \"SMTP\") Rel(SystemC, customerA, \"Sends e-mails to\") UpdateElementStyle(customerA, $fontColor=\"red\", $bgColor=\"grey\", $borderColor=\"red\") UpdateRelStyle(customerA, SystemAA, $textColor=\"blue\", $lineColor=\"blue\", $offsetX=\"5\") UpdateRelStyle(SystemAA, SystemE, $textColor=\"blue\", $lineColor=\"blue\", $offsetY=\"-10\") UpdateRelStyle(SystemAA, SystemC, $textColor=\"blue\", $lineColor=\"blue\", $offsetY=\"-40\", $offsetX=\"-50\") UpdateRelStyle(SystemC, customerA, $textColor=\"red\", $lineColor=\"red\", $offsetX=\"-50\", $offsetY=\"20\") UpdateLayoutConfig($c4ShapeInRow=\"3\", $c4BoundaryInRow=\"1\") For an example, see the source code demos/index.html\n",
                content: "C4 Diagrams link C4 Diagram: This is an experimental diagram for now. The syntax and properties can change in future releases. Proper documentation will be provided when the syntax is stable.\nMermaidâ€™s C4 diagram syntax is compatible with plantUML. See example below:\nC4Context title System Context diagram for Internet Banking System Enterprise_Boundary(b0, \"BankBoundary0\") { Person(customerA, \"Banking Customer A\", \"A customer of the bank, with personal bank accounts.\") Person(customerB, \"Banking Customer B\") Person_Ext(customerC, \"Banking Customer C\", \"desc\") Person(customerD, \"Banking Customer D\", \"A customer of the bank, with personal bank accounts.\") System(SystemAA, \"Internet Banking System\", \"Allows customers to view information about their bank accounts, and make payments.\") Enterprise_Boundary(b1, \"BankBoundary\") { SystemDb_Ext(SystemE, \"Mainframe Banking System\", \"Stores all of the core banking information about customers, accounts, transactions, etc.\") System_Boundary(b2, \"BankBoundary2\") { System(SystemA, \"Banking System A\") System(SystemB, \"Banking System B\", \"A system of the bank, with personal bank accounts. next line.\") } System_Ext(SystemC, \"E-mail system\", \"The internal Microsoft Exchange e-mail system.\") SystemDb(SystemD, \"Banking System D Database\", \"A system of the bank, with personal bank accounts.\") Boundary(b3, \"BankBoundary3\", \"boundary\") { SystemQueue(SystemF, \"Banking System F Queue\", \"A system of the bank.\") SystemQueue_Ext(SystemG, \"Banking System G Queue\", \"A system of the bank, with personal bank accounts.\") } } } BiRel(customerA, SystemAA, \"Uses\") BiRel(SystemAA, SystemE, \"Uses\") Rel(SystemAA, SystemC, \"Sends e-mails\", \"SMTP\") Rel(SystemC, customerA, \"Sends e-mails to\") UpdateElementStyle(customerA, $fontColor=\"red\", $bgColor=\"grey\", $borderColor=\"red\") UpdateRelStyle(customerA, SystemAA, $textColor=\"blue\", $lineColor=\"blue\", $offsetX=\"5\") UpdateRelStyle(SystemAA, SystemE, $textColor=\"blue\", $lineColor=\"blue\", $offsetY=\"-10\") UpdateRelStyle(SystemAA, SystemC, $textColor=\"blue\", $lineColor=\"blue\", $offsetY=\"-40\", $offsetX=\"-50\") UpdateRelStyle(SystemC, customerA, $textColor=\"red\", $lineColor=\"red\", $offsetX=\"-50\", $offsetY=\"20\") UpdateLayoutConfig($c4ShapeInRow=\"3\", $c4BoundaryInRow=\"1\") C4Context title System Context diagram for Internet Banking System Enterprise_Boundary(b0, \"BankBoundary0\") { Person(customerA, \"Banking Customer A\", \"A customer of the bank, with personal bank accounts.\") Person(customerB, \"Banking Customer B\") Person_Ext(customerC, \"Banking Customer C\", \"desc\") Person(customerD, \"Banking Customer D\", \"A customer of the bank, with personal bank accounts.\") System(SystemAA, \"Internet Banking System\", \"Allows customers to view information about their bank accounts, and make payments.\") Enterprise_Boundary(b1, \"BankBoundary\") { SystemDb_Ext(SystemE, \"Mainframe Banking System\", \"Stores all of the core banking information about customers, accounts, transactions, etc.\") System_Boundary(b2, \"BankBoundary2\") { System(SystemA, \"Banking System A\") System(SystemB, \"Banking System B\", \"A system of the bank, with personal bank accounts. next line.\") } System_Ext(SystemC, \"E-mail system\", \"The internal Microsoft Exchange e-mail system.\") SystemDb(SystemD, \"Banking System D Database\", \"A system of the bank, with personal bank accounts.\") Boundary(b3, \"BankBoundary3\", \"boundary\") { SystemQueue(SystemF, \"Banking System F Queue\", \"A system of the bank.\") SystemQueue_Ext(SystemG, \"Banking System G Queue\", \"A system of the bank, with personal bank accounts.\") } } } BiRel(customerA, SystemAA, \"Uses\") BiRel(SystemAA, SystemE, \"Uses\") Rel(SystemAA, SystemC, \"Sends e-mails\", \"SMTP\") Rel(SystemC, customerA, \"Sends e-mails to\") UpdateElementStyle(customerA, $fontColor=\"red\", $bgColor=\"grey\", $borderColor=\"red\") UpdateRelStyle(customerA, SystemAA, $textColor=\"blue\", $lineColor=\"blue\", $offsetX=\"5\") UpdateRelStyle(SystemAA, SystemE, $textColor=\"blue\", $lineColor=\"blue\", $offsetY=\"-10\") UpdateRelStyle(SystemAA, SystemC, $textColor=\"blue\", $lineColor=\"blue\", $offsetY=\"-40\", $offsetX=\"-50\") UpdateRelStyle(SystemC, customerA, $textColor=\"red\", $lineColor=\"red\", $offsetX=\"-50\", $offsetY=\"20\") UpdateLayoutConfig($c4ShapeInRow=\"3\", $c4BoundaryInRow=\"1\") For an example, see the source code demos/index.html\n5 types of C4 charts are supported.\nSystem Context (C4Context) Container diagram (C4Container) Component diagram (C4Component) Dynamic diagram (C4Dynamic) Deployment diagram (C4Deployment) Please refer to the linked document C4-PlantUML syntax for how to write the C4 diagram.\nC4 diagram is fixed style, such as css color, so different css is not provided under different skins. updateElementStyle and UpdateElementStyle are written in the diagram last part. updateElementStyle is inconsistent with the original definition and updates the style of the relationship, including the offset of the text label relative to the original position.\nThe layout does not use a fully automated layout algorithm. The position of shapes is adjusted by changing the order in which statements are written. So there is no plan to support the following Layout statements. The number of shapes per row and the number of boundaries can be adjusted using UpdateLayoutConfig.\nLayout Lay_U, Lay_Up Lay_D, Lay_Down Lay_L, Lay_Left Lay_R, Lay_Right The following unfinished features are not supported in the short term.\nsprite\ntags\nlink\nLegend\nSystem Context\nPerson(alias, label, ?descr, ?sprite, ?tags, $link) Person_Ext System(alias, label, ?descr, ?sprite, ?tags, $link) SystemDb SystemQueue System_Ext SystemDb_Ext SystemQueue_Ext Boundary(alias, label, ?type, ?tags, $link) Enterprise_Boundary(alias, label, ?tags, $link) System_Boundary Container diagram\nContainer(alias, label, ?techn, ?descr, ?sprite, ?tags, $link) ContainerDb ContainerQueue Container_Ext ContainerDb_Ext ContainerQueue_Ext Container_Boundary(alias, label, ?tags, $link) Component diagram\nComponent(alias, label, ?techn, ?descr, ?sprite, ?tags, $link) ComponentDb ComponentQueue Component_Ext ComponentDb_Ext ComponentQueue_Ext Dynamic diagram\nRelIndex(index, from, to, label, ?tags, $link) Deployment diagram\nDeployment_Node(alias, label, ?type, ?descr, ?sprite, ?tags, $link) Node(alias, label, ?type, ?descr, ?sprite, ?tags, $link): short name of Deployment_Node() Node_L(alias, label, ?type, ?descr, ?sprite, ?tags, $link): left aligned Node() Node_R(alias, label, ?type, ?descr, ?sprite, ?tags, $link): right aligned Node() Relationship Types\nRel(from, to, label, ?techn, ?descr, ?sprite, ?tags, $link) BiRel (bidirectional relationship) Rel_U, Rel_Up Rel_D, Rel_Down Rel_L, Rel_Left Rel_R, Rel_Right Rel_Back RelIndex * Compatible with C4-Plantuml syntax, but ignores the index parameter. The sequence number is determined by the order in which the rel statements are written. Custom tags/stereotypes support and skin param updates\nAddElementTag(tagStereo, ?bgColor, ?fontColor, ?borderColor, ?shadowing, ?shape, ?sprite, ?techn, ?legendText, ?legendSprite): Introduces a new element tag. The styles of the tagged elements are updated and the tag is displayed in the calculated legend. AddRelTag(tagStereo, ?textColor, ?lineColor, ?lineStyle, ?sprite, ?techn, ?legendText, ?legendSprite): Introduces a new Relationship tag. The styles of the tagged relationships are updated and the tag is displayed in the calculated legend. UpdateElementStyle(elementName, ?bgColor, ?fontColor, ?borderColor, ?shadowing, ?shape, ?sprite, ?techn, ?legendText, ?legendSprite): This call updates the default style of the elements (component, â€¦) and creates no additional legend entry. UpdateRelStyle(from, to, ?textColor, ?lineColor, ?offsetX, ?offsetY): This call updates the default relationship colors and creates no additional legend entry. Two new parameters, offsetX and offsetY, are added to set the offset of the original position of the text. RoundedBoxShape(): This call returns the name of the rounded box shape and can be used as ?shape argument. EightSidedShape(): This call returns the name of the eight sided shape and can be used as ?shape argument. DashedLine(): This call returns the name of the dashed line and can be used as ?lineStyle argument. DottedLine(): This call returns the name of the dotted line and can be used as ?lineStyle argument. BoldLine(): This call returns the name of the bold line and can be used as ?lineStyle argument. UpdateLayoutConfig(?c4ShapeInRow, ?c4BoundaryInRow): New. This call updates the default c4ShapeInRow(4) and c4BoundaryInRow(2). There are two ways to assign parameters with question marks. One uses the non-named parameter assignment method in the order of the parameters, and the other uses the named parameter assignment method, where the name must start with a $ symbol.\nExample: UpdateRelStyle(from, to, ?textColor, ?lineColor, ?offsetX, ?offsetY)\nUpdateRelStyle(customerA, bankA, \"red\", \"blue\", \"-40\", \"60\") UpdateRelStyle(customerA, bankA, $offsetX=\"-40\", $offsetY=\"60\", $lineColor=\"blue\", $textColor=\"red\") UpdateRelStyle(customerA, bankA, $offsetY=\"60\") C4 System Context Diagram (C4Context) link C4Context title System Context diagram for Internet Banking System Enterprise_Boundary(b0, \"BankBoundary0\") { Person(customerA, \"Banking Customer A\", \"A customer of the bank, with personal bank accounts.\") Person(customerB, \"Banking Customer B\") Person_Ext(customerC, \"Banking Customer C\", \"desc\") Person(customerD, \"Banking Customer D\", \"A customer of the bank, with personal bank accounts.\") System(SystemAA, \"Internet Banking System\", \"Allows customers to view information about their bank accounts, and make payments.\") Enterprise_Boundary(b1, \"BankBoundary\") { SystemDb_Ext(SystemE, \"Mainframe Banking System\", \"Stores all of the core banking information about customers, accounts, transactions, etc.\") System_Boundary(b2, \"BankBoundary2\") { System(SystemA, \"Banking System A\") System(SystemB, \"Banking System B\", \"A system of the bank, with personal bank accounts. next line.\") } System_Ext(SystemC, \"E-mail system\", \"The internal Microsoft Exchange e-mail system.\") SystemDb(SystemD, \"Banking System D Database\", \"A system of the bank, with personal bank accounts.\") Boundary(b3, \"BankBoundary3\", \"boundary\") { SystemQueue(SystemF, \"Banking System F Queue\", \"A system of the bank.\") SystemQueue_Ext(SystemG, \"Banking System G Queue\", \"A system of the bank, with personal bank accounts.\") } } } BiRel(customerA, SystemAA, \"Uses\") BiRel(SystemAA, SystemE, \"Uses\") Rel(SystemAA, SystemC, \"Sends e-mails\", \"SMTP\") Rel(SystemC, customerA, \"Sends e-mails to\") UpdateElementStyle(customerA, $fontColor=\"red\", $bgColor=\"grey\", $borderColor=\"red\") UpdateRelStyle(customerA, SystemAA, $textColor=\"blue\", $lineColor=\"blue\", $offsetX=\"5\") UpdateRelStyle(SystemAA, SystemE, $textColor=\"blue\", $lineColor=\"blue\", $offsetY=\"-10\") UpdateRelStyle(SystemAA, SystemC, $textColor=\"blue\", $lineColor=\"blue\", $offsetY=\"-40\", $offsetX=\"-50\") UpdateRelStyle(SystemC, customerA, $textColor=\"red\", $lineColor=\"red\", $offsetX=\"-50\", $offsetY=\"20\") UpdateLayoutConfig($c4ShapeInRow=\"3\", $c4BoundaryInRow=\"1\") C4Context title System Context diagram for Internet Banking System Enterprise_Boundary(b0, \"BankBoundary0\") { Person(customerA, \"Banking Customer A\", \"A customer of the bank, with personal bank accounts.\") Person(customerB, \"Banking Customer B\") Person_Ext(customerC, \"Banking Customer C\", \"desc\") Person(customerD, \"Banking Customer D\", \"A customer of the bank, with personal bank accounts.\") System(SystemAA, \"Internet Banking System\", \"Allows customers to view information about their bank accounts, and make payments.\") Enterprise_Boundary(b1, \"BankBoundary\") { SystemDb_Ext(SystemE, \"Mainframe Banking System\", \"Stores all of the core banking information about customers, accounts, transactions, etc.\") System_Boundary(b2, \"BankBoundary2\") { System(SystemA, \"Banking System A\") System(SystemB, \"Banking System B\", \"A system of the bank, with personal bank accounts. next line.\") } System_Ext(SystemC, \"E-mail system\", \"The internal Microsoft Exchange e-mail system.\") SystemDb(SystemD, \"Banking System D Database\", \"A system of the bank, with personal bank accounts.\") Boundary(b3, \"BankBoundary3\", \"boundary\") { SystemQueue(SystemF, \"Banking System F Queue\", \"A system of the bank.\") SystemQueue_Ext(SystemG, \"Banking System G Queue\", \"A system of the bank, with personal bank accounts.\") } } } BiRel(customerA, SystemAA, \"Uses\") BiRel(SystemAA, SystemE, \"Uses\") Rel(SystemAA, SystemC, \"Sends e-mails\", \"SMTP\") Rel(SystemC, customerA, \"Sends e-mails to\") UpdateElementStyle(customerA, $fontColor=\"red\", $bgColor=\"grey\", $borderColor=\"red\") UpdateRelStyle(customerA, SystemAA, $textColor=\"blue\", $lineColor=\"blue\", $offsetX=\"5\") UpdateRelStyle(SystemAA, SystemE, $textColor=\"blue\", $lineColor=\"blue\", $offsetY=\"-10\") UpdateRelStyle(SystemAA, SystemC, $textColor=\"blue\", $lineColor=\"blue\", $offsetY=\"-40\", $offsetX=\"-50\") UpdateRelStyle(SystemC, customerA, $textColor=\"red\", $lineColor=\"red\", $offsetX=\"-50\", $offsetY=\"20\") UpdateLayoutConfig($c4ShapeInRow=\"3\", $c4BoundaryInRow=\"1\") C4 Container diagram (C4Container) link C4Container title Container diagram for Internet Banking System System_Ext(email_system, \"E-Mail System\", \"The internal Microsoft Exchange system\", $tags=\"v1.0\") Person(customer, Customer, \"A customer of the bank, with personal bank accounts\", $tags=\"v1.0\") Container_Boundary(c1, \"Internet Banking\") { Container(spa, \"Single-Page App\", \"JavaScript, Angular\", \"Provides all the Internet banking functionality to cutomers via their web browser\") Container_Ext(mobile_app, \"Mobile App\", \"C#, Xamarin\", \"Provides a limited subset of the Internet banking functionality to customers via their mobile device\") Container(web_app, \"Web Application\", \"Java, Spring MVC\", \"Delivers the static content and the Internet banking SPA\") ContainerDb(database, \"Database\", \"SQL Database\", \"Stores user registration information, hashed auth credentials, access logs, etc.\") ContainerDb_Ext(backend_api, \"API Application\", \"Java, Docker Container\", \"Provides Internet banking functionality via API\") } System_Ext(banking_system, \"Mainframe Banking System\", \"Stores all of the core banking information about customers, accounts, transactions, etc.\") Rel(customer, web_app, \"Uses\", \"HTTPS\") UpdateRelStyle(customer, web_app, $offsetY=\"60\", $offsetX=\"90\") Rel(customer, spa, \"Uses\", \"HTTPS\") UpdateRelStyle(customer, spa, $offsetY=\"-40\") Rel(customer, mobile_app, \"Uses\") UpdateRelStyle(customer, mobile_app, $offsetY=\"-30\") Rel(web_app, spa, \"Delivers\") UpdateRelStyle(web_app, spa, $offsetX=\"130\") Rel(spa, backend_api, \"Uses\", \"async, JSON/HTTPS\") Rel(mobile_app, backend_api, \"Uses\", \"async, JSON/HTTPS\") Rel_Back(database, backend_api, \"Reads from and writes to\", \"sync, JDBC\") Rel(email_system, customer, \"Sends e-mails to\") UpdateRelStyle(email_system, customer, $offsetX=\"-45\") Rel(backend_api, email_system, \"Sends e-mails using\", \"sync, SMTP\") UpdateRelStyle(backend_api, email_system, $offsetY=\"-60\") Rel(backend_api, banking_system, \"Uses\", \"sync/async, XML/HTTPS\") UpdateRelStyle(backend_api, banking_system, $offsetY=\"-50\", $offsetX=\"-140\") C4Container title Container diagram for Internet Banking System System_Ext(email_system, \"E-Mail System\", \"The internal Microsoft Exchange system\", $tags=\"v1.0\") Person(customer, Customer, \"A customer of the bank, with personal bank accounts\", $tags=\"v1.0\") Container_Boundary(c1, \"Internet Banking\") { Container(spa, \"Single-Page App\", \"JavaScript, Angular\", \"Provides all the Internet banking functionality to cutomers via their web browser\") Container_Ext(mobile_app, \"Mobile App\", \"C#, Xamarin\", \"Provides a limited subset of the Internet banking functionality to customers via their mobile device\") Container(web_app, \"Web Application\", \"Java, Spring MVC\", \"Delivers the static content and the Internet banking SPA\") ContainerDb(database, \"Database\", \"SQL Database\", \"Stores user registration information, hashed auth credentials, access logs, etc.\") ContainerDb_Ext(backend_api, \"API Application\", \"Java, Docker Container\", \"Provides Internet banking functionality via API\") } System_Ext(banking_system, \"Mainframe Banking System\", \"Stores all of the core banking information about customers, accounts, transactions, etc.\") Rel(customer, web_app, \"Uses\", \"HTTPS\") UpdateRelStyle(customer, web_app, $offsetY=\"60\", $offsetX=\"90\") Rel(customer, spa, \"Uses\", \"HTTPS\") UpdateRelStyle(customer, spa, $offsetY=\"-40\") Rel(customer, mobile_app, \"Uses\") UpdateRelStyle(customer, mobile_app, $offsetY=\"-30\") Rel(web_app, spa, \"Delivers\") UpdateRelStyle(web_app, spa, $offsetX=\"130\") Rel(spa, backend_api, \"Uses\", \"async, JSON/HTTPS\") Rel(mobile_app, backend_api, \"Uses\", \"async, JSON/HTTPS\") Rel_Back(database, backend_api, \"Reads from and writes to\", \"sync, JDBC\") Rel(email_system, customer, \"Sends e-mails to\") UpdateRelStyle(email_system, customer, $offsetX=\"-45\") Rel(backend_api, email_system, \"Sends e-mails using\", \"sync, SMTP\") UpdateRelStyle(backend_api, email_system, $offsetY=\"-60\") Rel(backend_api, banking_system, \"Uses\", \"sync/async, XML/HTTPS\") UpdateRelStyle(backend_api, banking_system, $offsetY=\"-50\", $offsetX=\"-140\") C4 Component diagram (C4Component) link C4Component title Component diagram for Internet Banking System - API Application Container(spa, \"Single Page Application\", \"javascript and angular\", \"Provides all the internet banking functionality to customers via their web browser.\") Container(ma, \"Mobile App\", \"Xamarin\", \"Provides a limited subset ot the internet banking functionality to customers via their mobile mobile device.\") ContainerDb(db, \"Database\", \"Relational Database Schema\", \"Stores user registration information, hashed authentication credentials, access logs, etc.\") System_Ext(mbs, \"Mainframe Banking System\", \"Stores all of the core banking information about customers, accounts, transactions, etc.\") Container_Boundary(api, \"API Application\") { Component(sign, \"Sign In Controller\", \"MVC Rest Controller\", \"Allows users to sign in to the internet banking system\") Component(accounts, \"Accounts Summary Controller\", \"MVC Rest Controller\", \"Provides customers with a summary of their bank accounts\") Component(security, \"Security Component\", \"Spring Bean\", \"Provides functionality related to singing in, changing passwords, etc.\") Component(mbsfacade, \"Mainframe Banking System Facade\", \"Spring Bean\", \"A facade onto the mainframe banking system.\") Rel(sign, security, \"Uses\") Rel(accounts, mbsfacade, \"Uses\") Rel(security, db, \"Read \u0026 write to\", \"JDBC\") Rel(mbsfacade, mbs, \"Uses\", \"XML/HTTPS\") } Rel_Back(spa, sign, \"Uses\", \"JSON/HTTPS\") Rel(spa, accounts, \"Uses\", \"JSON/HTTPS\") Rel(ma, sign, \"Uses\", \"JSON/HTTPS\") Rel(ma, accounts, \"Uses\", \"JSON/HTTPS\") UpdateRelStyle(spa, sign, $offsetY=\"-40\") UpdateRelStyle(spa, accounts, $offsetX=\"40\", $offsetY=\"40\") UpdateRelStyle(ma, sign, $offsetX=\"-90\", $offsetY=\"40\") UpdateRelStyle(ma, accounts, $offsetY=\"-40\") UpdateRelStyle(sign, security, $offsetX=\"-160\", $offsetY=\"10\") UpdateRelStyle(accounts, mbsfacade, $offsetX=\"140\", $offsetY=\"10\") UpdateRelStyle(security, db, $offsetY=\"-40\") UpdateRelStyle(mbsfacade, mbs, $offsetY=\"-40\") C4Component title Component diagram for Internet Banking System - API Application Container(spa, \"Single Page Application\", \"javascript and angular\", \"Provides all the internet banking functionality to customers via their web browser.\") Container(ma, \"Mobile App\", \"Xamarin\", \"Provides a limited subset ot the internet banking functionality to customers via their mobile mobile device.\") ContainerDb(db, \"Database\", \"Relational Database Schema\", \"Stores user registration information, hashed authentication credentials, access logs, etc.\") System_Ext(mbs, \"Mainframe Banking System\", \"Stores all of the core banking information about customers, accounts, transactions, etc.\") Container_Boundary(api, \"API Application\") { Component(sign, \"Sign In Controller\", \"MVC Rest Controller\", \"Allows users to sign in to the internet banking system\") Component(accounts, \"Accounts Summary Controller\", \"MVC Rest Controller\", \"Provides customers with a summary of their bank accounts\") Component(security, \"Security Component\", \"Spring Bean\", \"Provides functionality related to singing in, changing passwords, etc.\") Component(mbsfacade, \"Mainframe Banking System Facade\", \"Spring Bean\", \"A facade onto the mainframe banking system.\") Rel(sign, security, \"Uses\") Rel(accounts, mbsfacade, \"Uses\") Rel(security, db, \"Read \u0026 write to\", \"JDBC\") Rel(mbsfacade, mbs, \"Uses\", \"XML/HTTPS\") } Rel_Back(spa, sign, \"Uses\", \"JSON/HTTPS\") Rel(spa, accounts, \"Uses\", \"JSON/HTTPS\") Rel(ma, sign, \"Uses\", \"JSON/HTTPS\") Rel(ma, accounts, \"Uses\", \"JSON/HTTPS\") UpdateRelStyle(spa, sign, $offsetY=\"-40\") UpdateRelStyle(spa, accounts, $offsetX=\"40\", $offsetY=\"40\") UpdateRelStyle(ma, sign, $offsetX=\"-90\", $offsetY=\"40\") UpdateRelStyle(ma, accounts, $offsetY=\"-40\") UpdateRelStyle(sign, security, $offsetX=\"-160\", $offsetY=\"10\") UpdateRelStyle(accounts, mbsfacade, $offsetX=\"140\", $offsetY=\"10\") UpdateRelStyle(security, db, $offsetY=\"-40\") UpdateRelStyle(mbsfacade, mbs, $offsetY=\"-40\") C4 Dynamic diagram (C4Dynamic) link C4Dynamic title Dynamic diagram for Internet Banking System - API Application ContainerDb(c4, \"Database\", \"Relational Database Schema\", \"Stores user registration information, hashed authentication credentials, access logs, etc.\") Container(c1, \"Single-Page Application\", \"JavaScript and Angular\", \"Provides all of the Internet banking functionality to customers via their web browser.\") Container_Boundary(b, \"API Application\") { Component(c3, \"Security Component\", \"Spring Bean\", \"Provides functionality Related to signing in, changing passwords, etc.\") Component(c2, \"Sign In Controller\", \"Spring MVC Rest Controller\", \"Allows users to sign in to the Internet Banking System.\") } Rel(c1, c2, \"Submits credentials to\", \"JSON/HTTPS\") Rel(c2, c3, \"Calls isAuthenticated() on\") Rel(c3, c4, \"select * from users where username = ?\", \"JDBC\") UpdateRelStyle(c1, c2, $textColor=\"red\", $offsetY=\"-40\") UpdateRelStyle(c2, c3, $textColor=\"red\", $offsetX=\"-40\", $offsetY=\"60\") UpdateRelStyle(c3, c4, $textColor=\"red\", $offsetY=\"-40\", $offsetX=\"10\") C4Dynamic title Dynamic diagram for Internet Banking System - API Application ContainerDb(c4, \"Database\", \"Relational Database Schema\", \"Stores user registration information, hashed authentication credentials, access logs, etc.\") Container(c1, \"Single-Page Application\", \"JavaScript and Angular\", \"Provides all of the Internet banking functionality to customers via their web browser.\") Container_Boundary(b, \"API Application\") { Component(c3, \"Security Component\", \"Spring Bean\", \"Provides functionality Related to signing in, changing passwords, etc.\") Component(c2, \"Sign In Controller\", \"Spring MVC Rest Controller\", \"Allows users to sign in to the Internet Banking System.\") } Rel(c1, c2, \"Submits credentials to\", \"JSON/HTTPS\") Rel(c2, c3, \"Calls isAuthenticated() on\") Rel(c3, c4, \"select * from users where username = ?\", \"JDBC\") UpdateRelStyle(c1, c2, $textColor=\"red\", $offsetY=\"-40\") UpdateRelStyle(c2, c3, $textColor=\"red\", $offsetX=\"-40\", $offsetY=\"60\") UpdateRelStyle(c3, c4, $textColor=\"red\", $offsetY=\"-40\", $offsetX=\"10\") C4 Deployment diagram (C4Deployment) link C4Deployment title Deployment Diagram for Internet Banking System - Live Deployment_Node(mob, \"Customer's mobile device\", \"Apple IOS or Android\"){ Container(mobile, \"Mobile App\", \"Xamarin\", \"Provides a limited subset of the Internet Banking functionality to customers via their mobile device.\") } Deployment_Node(comp, \"Customer's computer\", \"Microsoft Windows or Apple macOS\"){ Deployment_Node(browser, \"Web Browser\", \"Google Chrome, Mozilla Firefox, Apple Safari or Microsoft Edge\"){ Container(spa, \"Single Page Application\", \"JavaScript and Angular\", \"Provides all of the Internet Banking functionality to customers via their web browser.\") } } Deployment_Node(plc, \"Big Bank plc\", \"Big Bank plc data center\"){ Deployment_Node(dn, \"bigbank-api*** x8\", \"Ubuntu 16.04 LTS\"){ Deployment_Node(apache, \"Apache Tomcat\", \"Apache Tomcat 8.x\"){ Container(api, \"API Application\", \"Java and Spring MVC\", \"Provides Internet Banking functionality via a JSON/HTTPS API.\") } } Deployment_Node(bb2, \"bigbank-web*** x4\", \"Ubuntu 16.04 LTS\"){ Deployment_Node(apache2, \"Apache Tomcat\", \"Apache Tomcat 8.x\"){ Container(web, \"Web Application\", \"Java and Spring MVC\", \"Delivers the static content and the Internet Banking single page application.\") } } Deployment_Node(bigbankdb01, \"bigbank-db01\", \"Ubuntu 16.04 LTS\"){ Deployment_Node(oracle, \"Oracle - Primary\", \"Oracle 12c\"){ ContainerDb(db, \"Database\", \"Relational Database Schema\", \"Stores user registration information, hashed authentication credentials, access logs, etc.\") } } Deployment_Node(bigbankdb02, \"bigbank-db02\", \"Ubuntu 16.04 LTS\") { Deployment_Node(oracle2, \"Oracle - Secondary\", \"Oracle 12c\") { ContainerDb(db2, \"Database\", \"Relational Database Schema\", \"Stores user registration information, hashed authentication credentials, access logs, etc.\") } } } Rel(mobile, api, \"Makes API calls to\", \"json/HTTPS\") Rel(spa, api, \"Makes API calls to\", \"json/HTTPS\") Rel_U(web, spa, \"Delivers to the customer's web browser\") Rel(api, db, \"Reads from and writes to\", \"JDBC\") Rel(api, db2, \"Reads from and writes to\", \"JDBC\") Rel_R(db, db2, \"Replicates data to\") UpdateRelStyle(spa, api, $offsetY=\"-40\") UpdateRelStyle(web, spa, $offsetY=\"-40\") UpdateRelStyle(api, db, $offsetY=\"-20\", $offsetX=\"5\") UpdateRelStyle(api, db2, $offsetX=\"-40\", $offsetY=\"-20\") UpdateRelStyle(db, db2, $offsetY=\"-10\") C4Deployment title Deployment Diagram for Internet Banking System - Live Deployment_Node(mob, \"Customer's mobile device\", \"Apple IOS or Android\"){ Container(mobile, \"Mobile App\", \"Xamarin\", \"Provides a limited subset of the Internet Banking functionality to customers via their mobile device.\") } Deployment_Node(comp, \"Customer's computer\", \"Microsoft Windows or Apple macOS\"){ Deployment_Node(browser, \"Web Browser\", \"Google Chrome, Mozilla Firefox, Apple Safari or Microsoft Edge\"){ Container(spa, \"Single Page Application\", \"JavaScript and Angular\", \"Provides all of the Internet Banking functionality to customers via their web browser.\") } } Deployment_Node(plc, \"Big Bank plc\", \"Big Bank plc data center\"){ Deployment_Node(dn, \"bigbank-api*** x8\", \"Ubuntu 16.04 LTS\"){ Deployment_Node(apache, \"Apache Tomcat\", \"Apache Tomcat 8.x\"){ Container(api, \"API Application\", \"Java and Spring MVC\", \"Provides Internet Banking functionality via a JSON/HTTPS API.\") } } Deployment_Node(bb2, \"bigbank-web*** x4\", \"Ubuntu 16.04 LTS\"){ Deployment_Node(apache2, \"Apache Tomcat\", \"Apache Tomcat 8.x\"){ Container(web, \"Web Application\", \"Java and Spring MVC\", \"Delivers the static content and the Internet Banking single page application.\") } } Deployment_Node(bigbankdb01, \"bigbank-db01\", \"Ubuntu 16.04 LTS\"){ Deployment_Node(oracle, \"Oracle - Primary\", \"Oracle 12c\"){ ContainerDb(db, \"Database\", \"Relational Database Schema\", \"Stores user registration information, hashed authentication credentials, access logs, etc.\") } } Deployment_Node(bigbankdb02, \"bigbank-db02\", \"Ubuntu 16.04 LTS\") { Deployment_Node(oracle2, \"Oracle - Secondary\", \"Oracle 12c\") { ContainerDb(db2, \"Database\", \"Relational Database Schema\", \"Stores user registration information, hashed authentication credentials, access logs, etc.\") } } } Rel(mobile, api, \"Makes API calls to\", \"json/HTTPS\") Rel(spa, api, \"Makes API calls to\", \"json/HTTPS\") Rel_U(web, spa, \"Delivers to the customer's web browser\") Rel(api, db, \"Reads from and writes to\", \"JDBC\") Rel(api, db2, \"Reads from and writes to\", \"JDBC\") Rel_R(db, db2, \"Replicates data to\") UpdateRelStyle(spa, api, $offsetY=\"-40\") UpdateRelStyle(web, spa, $offsetY=\"-40\") UpdateRelStyle(api, db, $offsetY=\"-20\", $offsetX=\"5\") UpdateRelStyle(api, db2, $offsetX=\"-40\", $offsetY=\"-20\") UpdateRelStyle(db, db2, $offsetY=\"-10\") "
            }
        );
    index.add(
            {
                id:  67 ,
                href: "\/docs\/mix\/mermaid\/syntax\/classdiagram\/",
                title: "Class diagrams",
                description: "Class diagrams link â€œIn software engineering, a class diagram in the Unified Modeling Language (UML) is a type of static structure diagram that describes the structure of a system by showing the systemâ€™s classes, their attributes, operations (or methods), and the relationships among objects.â€\n-Wikipedia\nThe class diagram is the main building block of object-oriented modeling. It is used for general conceptual modeling of the structure of the application, and for detailed modeling to translate the models into programming code. Class diagrams can also be used for data modeling. The classes in a class diagram represent both the main elements, interactions in the application, and the classes to be programmed.\n",
                content: "Class diagrams link â€œIn software engineering, a class diagram in the Unified Modeling Language (UML) is a type of static structure diagram that describes the structure of a system by showing the systemâ€™s classes, their attributes, operations (or methods), and the relationships among objects.â€\n-Wikipedia\nThe class diagram is the main building block of object-oriented modeling. It is used for general conceptual modeling of the structure of the application, and for detailed modeling to translate the models into programming code. Class diagrams can also be used for data modeling. The classes in a class diagram represent both the main elements, interactions in the application, and the classes to be programmed.\nMermaid can render class diagrams.\n--- title: Animal example --- classDiagram note \"From Duck till Zebra\" Animal \u003c|-- Duck note for Duck \"can fly\\ncan swim\\ncan dive\\ncan help in debugging\" Animal \u003c|-- Fish Animal \u003c|-- Zebra Animal : +int age Animal : +String gender Animal: +isMammal() Animal: +mate() class Duck{ +String beakColor +swim() +quack() } class Fish{ -int sizeInFeet -canEat() } class Zebra{ +bool is_wild +run() } --- title: Animal example --- classDiagram note \"From Duck till Zebra\" Animal \u003c|-- Duck note for Duck \"can fly\\ncan swim\\ncan dive\\ncan help in debugging\" Animal \u003c|-- Fish Animal \u003c|-- Zebra Animal : +int age Animal : +String gender Animal: +isMammal() Animal: +mate() class Duck{ +String beakColor +swim() +quack() } class Fish{ -int sizeInFeet -canEat() } class Zebra{ +bool is_wild +run() } Syntax linkClass linkUML provides mechanisms to represent class members, such as attributes and methods, and additional information about them. A single instance of a class in the diagram contains three compartments:\nThe top compartment contains the name of the class. It is printed in bold and centered, and the first letter is capitalized. It may also contain optional annotation text describing the nature of the class. The middle compartment contains the attributes of the class. They are left-aligned and the first letter is lowercase. The bottom compartment contains the operations the class can execute. They are also left-aligned and the first letter is lowercase. --- title: Bank example --- classDiagram class BankAccount BankAccount : +String owner BankAccount : +Bigdecimal balance BankAccount : +deposit(amount) BankAccount : +withdrawal(amount) --- title: Bank example --- classDiagram class BankAccount BankAccount : +String owner BankAccount : +Bigdecimal balance BankAccount : +deposit(amount) BankAccount : +withdrawal(amount) Define a class linkThere are two ways to define a class:\nExplicitly using keyword class like class Animal which would define the Animal class. Via a relationship which defines two classes at a time along with their relationship. For instance, Vehicle \u003c|-- Car. classDiagram class Animal Vehicle \u003c|-- Car classDiagram class Animal Vehicle \u003c|-- Car Naming convention: a class name should be composed only of alphanumeric characters (including unicode), underscores, and dashes (-).\nClass labels linkIn case you need to provide a label for a class, you can use the following syntax:\nclassDiagram class Animal[\"Animal with a label\"] class Car[\"Car with *! symbols\"] Animal --\u003e Car classDiagram class Animal[\"Animal with a label\"] class Car[\"Car with *! symbols\"] Animal --\u003e Car You can also use backticks to escape special characters in the label:\nclassDiagram class `Animal Class!` class `Car Class` `Animal Class!` --\u003e `Car Class` classDiagram class `Animal Class!` class `Car Class` `Animal Class!` --\u003e `Car Class` Defining Members of a class linkUML provides mechanisms to represent class members such as attributes and methods, as well as additional information about them.\nMermaid distinguishes between attributes and functions/methods based on if the parenthesis () are present or not. The ones with () are treated as functions/methods, and all others as attributes.\nThere are two ways to define the members of a class, and regardless of whichever syntax is used to define the members, the output will still be same. The two different ways are :\nAssociate a member of a class using : (colon) followed by member name, useful to define one member at a time. For example: classDiagram class BankAccount BankAccount : +String owner BankAccount : +BigDecimal balance BankAccount : +deposit(amount) BankAccount : +withdrawal(amount) classDiagram class BankAccount BankAccount : +String owner BankAccount : +BigDecimal balance BankAccount : +deposit(amount) BankAccount : +withdrawal(amount) Associate members of a class using {} brackets, where members are grouped within curly brackets. Suitable for defining multiple members at once. For example: classDiagram class BankAccount{ +String owner +BigDecimal balance +deposit(amount) +withdrawal(amount) } classDiagram class BankAccount{ +String owner +BigDecimal balance +deposit(amount) +withdrawal(amount) } Return Type linkOptionally you can end a method/function definition with the data type that will be returned (note: there must be a space between the final ) and the return type). An example:\nclassDiagram class BankAccount{ +String owner +BigDecimal balance +deposit(amount) bool +withdrawal(amount) int } classDiagram class BankAccount{ +String owner +BigDecimal balance +deposit(amount) bool +withdrawal(amount) int } Generic Types linkMembers can be defined using generic types, such as List, for fields, parameters, and return types by enclosing the type within ~ (tilde). Nested type declarations such as List"
            }
        );
    index.add(
            {
                id:  68 ,
                href: "\/docs\/mix\/mermaid\/syntax\/entityrelationshipdiagram\/",
                title: "Entity Relationship Diagrams",
                description: "Entity Relationship Diagrams link An entityâ€“relationship model (or ER model) describes interrelated things of interest in a specific domain of knowledge. A basic ER model is composed of entity types (which classify the things of interest) and specifies relationships that can exist between entities (instances of those entity types). Wikipedia.\nNote that practitioners of ER modelling almost always refer to entity types simply as entities. For example the CUSTOMER entity type would be referred to simply as the CUSTOMER entity. This is so common it would be inadvisable to do anything else, but technically an entity is an abstract instance of an entity type, and this is what an ER diagram shows - abstract instances, and the relationships between them. This is why entities are always named using singular nouns.\n",
                content: "Entity Relationship Diagrams link An entityâ€“relationship model (or ER model) describes interrelated things of interest in a specific domain of knowledge. A basic ER model is composed of entity types (which classify the things of interest) and specifies relationships that can exist between entities (instances of those entity types). Wikipedia.\nNote that practitioners of ER modelling almost always refer to entity types simply as entities. For example the CUSTOMER entity type would be referred to simply as the CUSTOMER entity. This is so common it would be inadvisable to do anything else, but technically an entity is an abstract instance of an entity type, and this is what an ER diagram shows - abstract instances, and the relationships between them. This is why entities are always named using singular nouns.\nMermaid can render ER diagrams\n--- title: Order example --- erDiagram CUSTOMER ||--o{ ORDER : places ORDER ||--|{ LINE-ITEM : contains CUSTOMER }|..|{ DELIVERY-ADDRESS : uses --- title: Order example --- erDiagram CUSTOMER ||--o{ ORDER : places ORDER ||--|{ LINE-ITEM : contains CUSTOMER }|..|{ DELIVERY-ADDRESS : uses Entity names are often capitalised, although there is no accepted standard on this, and it is not required in Mermaid.\nRelationships between entities are represented by lines with end markers representing cardinality. Mermaid uses the most popular crowâ€™s foot notation. The crowâ€™s foot intuitively conveys the possibility of many instances of the entity that it connects to.\nER diagrams can be used for various purposes, ranging from abstract logical models devoid of any implementation details, through to physical models of relational database tables. It can be useful to include attribute definitions on ER diagrams to aid comprehension of the purpose and meaning of entities. These do not necessarily need to be exhaustive; often a small subset of attributes is enough. Mermaid allows them to be defined in terms of their type and name.\nerDiagram CUSTOMER ||--o{ ORDER : places CUSTOMER { string name string custNumber string sector } ORDER ||--|{ LINE-ITEM : contains ORDER { int orderNumber string deliveryAddress } LINE-ITEM { string productCode int quantity float pricePerUnit } erDiagram CUSTOMER ||--o{ ORDER : places CUSTOMER { string name string custNumber string sector } ORDER ||--|{ LINE-ITEM : contains ORDER { int orderNumber string deliveryAddress } LINE-ITEM { string productCode int quantity float pricePerUnit } When including attributes on ER diagrams, you must decide whether to include foreign keys as attributes. This probably depends on how closely you are trying to represent relational table structures. If your diagram is a logical model which is not meant to imply a relational implementation, then it is better to leave these out because the associative relationships already convey the way that entities are associated. For example, a JSON data structure can implement a one-to-many relationship without the need for foreign key properties, using arrays. Similarly an object-oriented programming language may use pointers or references to collections. Even for models that are intended for relational implementation, you might decide that inclusion of foreign key attributes duplicates information already portrayed by the relationships, and does not add meaning to entities. Ultimately, itâ€™s your choice.\nSyntax linkEntities and Relationships linkMermaid syntax for ER diagrams is compatible with PlantUML, with an extension to label the relationship. Each statement consists of the following parts:\n[ : ] Where:\nfirst-entity is the name of an entity. Names must begin with an alphabetic character or an underscore (from v10.5.0+), and may also contain digits and hyphens. relationship describes the way that both entities inter-relate. See below. second-entity is the name of the other entity. relationship-label describes the relationship from the perspective of the first entity. For example:\nPROPERTY ||--|{ ROOM : contains This statement can be read as a property contains one or more rooms, and a room is part of one and only one property. You can see that the label here is from the first entityâ€™s perspective: a property contains a room, but a room does not contain a property. When considered from the perspective of the second entity, the equivalent label is usually very easy to infer. (Some ER diagrams label relationships from both perspectives, but this is not supported here, and is usually superfluous).\nOnly the first-entity part of a statement is mandatory. This makes it possible to show an entity with no relationships, which can be useful during iterative construction of diagrams. If any other parts of a statement are specified, then all parts are mandatory.\nRelationship Syntax linkThe relationship part of each statement can be broken down into three sub-components:\nthe cardinality of the first entity with respect to the second, whether the relationship confers identity on a â€˜childâ€™ entity the cardinality of the second entity with respect to the first Cardinality is a property that describes how many elements of another entity can be related to the entity in question. In the above example a PROPERTY can have one or more ROOM instances associated to it, whereas a ROOM can only be associated with one PROPERTY. In each cardinality marker there are two characters. The outermost character represents a maximum value, and the innermost character represents a minimum value. The table below summarises possible cardinalities.\nValue (left) Value (right) Meaning |o o| Zero or one || || Exactly one }o o{ Zero or more (no upper limit) }| |{ One or more (no upper limit) Aliases\nValue (left) Value (right) Alias for one or zero one or zero Zero or one zero or one zero or one Zero or one one or more one or more One or more one or many one or many One or more many(1) many(1) One or more 1+ 1+ One or more zero or more zero or more Zero or more zero or many zero or many Zero or more many(0) many(1) Zero or more 0+ 0+ Zero or more only one only one Exactly one 1 1 Exactly one Identification linkRelationships may be classified as either identifying or non-identifying and these are rendered with either solid or dashed lines respectively. This is relevant when one of the entities in question can not have independent existence without the other. For example a firm that insures people to drive cars might need to store data on NAMED-DRIVERs. In modelling this we might start out by observing that a CAR can be driven by many PERSON instances, and a PERSON can drive many CARs - both entities can exist without the other, so this is a non-identifying relationship that we might specify in Mermaid as: PERSON }|..|{ CAR : \"driver\". Note the two dots in the middle of the relationship that will result in a dashed line being drawn between the two entities. But when this many-to-many relationship is resolved into two one-to-many relationships, we observe that a NAMED-DRIVER cannot exist without both a PERSON and a CAR - the relationships become identifying and would be specified using hyphens, which translate to a solid line:\nAliases\nValue Alias for to identifying optionally to non-identifying erDiagram CAR ||--o{ NAMED-DRIVER : allows PERSON ||--o{ NAMED-DRIVER : is erDiagram CAR ||--o{ NAMED-DRIVER : allows PERSON ||--o{ NAMED-DRIVER : is Attributes linkAttributes can be defined for entities by specifying the entity name followed by a block containing multiple type name pairs, where a block is delimited by an opening { and a closing }. The attributes are rendered inside the entity boxes. For example:\nerDiagram CAR ||--o{ NAMED-DRIVER : allows CAR { string registrationNumber string make string model } PERSON ||--o{ NAMED-DRIVER : is PERSON { string firstName string lastName int age } erDiagram CAR ||--o{ NAMED-DRIVER : allows CAR { string registrationNumber string make string model } PERSON ||--o{ NAMED-DRIVER : is PERSON { string firstName string lastName int age } The type values must begin with an alphabetic character and may contain digits, hyphens, underscores, parentheses and square brackets. The name values follow a similar format to type, but may start with an asterisk as another option to indicate an attribute is a primary key. Other than that, there are no restrictions, and there is no implicit set of valid data types.\nEntity Name Aliases (v10.5.0+) linkAn alias can be added to an entity using square brackets. If provided, the alias will be showed in the diagram instead of the entity name.\nerDiagram p[Person] { string firstName string lastName } a[\"Customer Account\"] { string email } p ||--o| a : has erDiagram p[Person] { string firstName string lastName } a[\"Customer Account\"] { string email } p ||--o| a : has Attribute Keys and Comments linkAttributes may also have a key or comment defined. Keys can be PK, FK or UK, for Primary Key, Foreign Key or Unique Key. To specify multiple key constraints on a single attribute, separate them with a comma (e.g., PK, FK).. A comment is defined by double quotes at the end of an attribute. Comments themselves cannot have double-quote characters in them.\nerDiagram CAR ||--o{ NAMED-DRIVER : allows CAR { string registrationNumber PK string make string model string[] parts } PERSON ||--o{ NAMED-DRIVER : is PERSON { string driversLicense PK \"The license #\" string(99) firstName \"Only 99 characters are allowed\" string lastName string phone UK int age } NAMED-DRIVER { string carRegistrationNumber PK, FK string driverLicence PK, FK } MANUFACTURER only one to zero or more CAR : makes erDiagram CAR ||--o{ NAMED-DRIVER : allows CAR { string registrationNumber PK string make string model string[] parts } PERSON ||--o{ NAMED-DRIVER : is PERSON { string driversLicense PK \"The license #\" string(99) firstName \"Only 99 characters are allowed\" string lastName string phone UK int age } NAMED-DRIVER { string carRegistrationNumber PK, FK string driverLicence PK, FK } MANUFACTURER only one to zero or more CAR : makes Other Things link If you want the relationship label to be more than one word, you must use double quotes around the phrase If you donâ€™t want a label at all on a relationship, you must use an empty double-quoted string Styling linkConfig options linkFor simple color customization:\nName Used as fill Background color of an entity or attribute stroke Border color of an entity or attribute, line color of a relationship Classes used linkThe following CSS class selectors are available for richer styling:\nSelector Description .er.attributeBoxEven The box containing attributes on even-numbered rows .er.attributeBoxOdd The box containing attributes on odd-numbered rows .er.entityBox The box representing an entity .er.entityLabel The label for an entity .er.relationshipLabel The label for a relationship .er.relationshipLabelBox The box surrounding a relationship label .er.relationshipLine The line representing a relationship between entities "
            }
        );
    index.add(
            {
                id:  69 ,
                href: "\/docs\/mix\/mermaid\/syntax\/examples\/",
                title: "Examples",
                description: "Examples linkThis page contains a collection of examples of diagrams and charts that can be created through mermaid and its myriad applications.\nIf you wish to learn how to support mermaid on your webpage, read the Beginnerâ€™s Guide.\nIf you wish to learn about mermaidâ€™s syntax, Read the ",
                content: "Examples linkThis page contains a collection of examples of diagrams and charts that can be created through mermaid and its myriad applications.\nIf you wish to learn how to support mermaid on your webpage, read the Beginnerâ€™s Guide.\nIf you wish to learn about mermaidâ€™s syntax, Read the "
            }
        );
    index.add(
            {
                id:  70 ,
                href: "\/docs\/mix\/mermaid\/syntax\/flowchart\/",
                title: "Flowcharts - Basic Syntax",
                description: "Flowcharts - Basic Syntax linkFlowcharts are composed of nodes (geometric shapes) and edges (arrows or lines). The Mermaid code defines how nodes and edges are made and accommodates different arrow types, multi-directional arrows, and any linking to and from subgraphs.\nWarning If you are using the word â€œendâ€ in a Flowchart node, capitalize the entire word or any of the letters (e.g., â€œEndâ€ or â€œENDâ€), or apply this workaround. Typing â€œendâ€ in all lowercase letters will break the Flowchart.\n",
                content: "Flowcharts - Basic Syntax linkFlowcharts are composed of nodes (geometric shapes) and edges (arrows or lines). The Mermaid code defines how nodes and edges are made and accommodates different arrow types, multi-directional arrows, and any linking to and from subgraphs.\nWarning If you are using the word â€œendâ€ in a Flowchart node, capitalize the entire word or any of the letters (e.g., â€œEndâ€ or â€œENDâ€), or apply this workaround. Typing â€œendâ€ in all lowercase letters will break the Flowchart.\nA node (default) link --- title: Node --- flowchart LR id --- title: Node --- flowchart LR id Note The id is what is displayed in the box.\nğŸ’¡ Tip Instead of flowchart one can also use graph.\nA node with text linkIt is also possible to set text in the box that differs from the id. If this is done several times, it is the last text found for the node that will be used. Also if you define edges for the node later on, you can omit text definitions. The one previously defined will be used when rendering the box.\n--- title: Node with text --- flowchart LR id1[This is the text in the box] --- title: Node with text --- flowchart LR id1[This is the text in the box] Unicode text linkUse \" to enclose the unicode text.\nflowchart LR id[\"This â¤ Unicode\"] flowchart LR id[\"This â¤ Unicode\"] Markdown formatting linkUse double quotes and backticks â€œ` text `â€ to enclose the markdown text.\n%%{init: {\"flowchart\": {\"htmlLabels\": false}} }%% flowchart LR markdown[\"`This **is** _Markdown_`\"] newLines[\"`Line1 Line 2 Line 3`\"] markdown --\u003e newLines %%{init: {\"flowchart\": {\"htmlLabels\": false}} }%% flowchart LR markdown[\"`This **is** _Markdown_`\"] newLines[\"`Line1 Line 2 Line 3`\"] markdown --\u003e newLines Direction linkThis statement declares the direction of the Flowchart.\nThis declares the flowchart is oriented from top to bottom (TD or TB).\nflowchart TD Start --\u003e Stop flowchart TD Start --\u003e Stop This declares the flowchart is oriented from left to right (LR).\nflowchart LR Start --\u003e Stop flowchart LR Start --\u003e Stop Possible FlowChart orientations are:\nTB - Top to bottom TD - Top-down/ same as top to bottom BT - Bottom to top RL - Right to left LR - Left to right Node shapes linkA node with round edges link flowchart LR id1(This is the text in the box) flowchart LR id1(This is the text in the box) A stadium-shaped node link flowchart LR id1([This is the text in the box]) flowchart LR id1([This is the text in the box]) A node in a subroutine shape link flowchart LR id1[[This is the text in the box]] flowchart LR id1[[This is the text in the box]] A node in a cylindrical shape link flowchart LR id1[(Database)] flowchart LR id1[(Database)] A node in the form of a circle link flowchart LR id1((This is the text in the circle)) flowchart LR id1((This is the text in the circle)) A node in an asymmetric shape link flowchart LR id1\u003eThis is the text in the box] flowchart LR id1\u003eThis is the text in the box] Currently only the shape above is possible and not its mirror. This might change with future releases.\nA node (rhombus) link flowchart LR id1{This is the text in the box} flowchart LR id1{This is the text in the box} A hexagon node link flowchart LR id1{{This is the text in the box}} flowchart LR id1{{This is the text in the box}} Parallelogram link flowchart TD id1[/This is the text in the box/] flowchart TD id1[/This is the text in the box/] Parallelogram alt link flowchart TD id1[\\This is the text in the box\\] flowchart TD id1[\\This is the text in the box\\] Trapezoid link flowchart TD A[/Christmas\\] flowchart TD A[/Christmas\\] Trapezoid alt link flowchart TD B[\\Go shopping/] flowchart TD B[\\Go shopping/] Double circle link flowchart TD id1(((This is the text in the circle))) flowchart TD id1(((This is the text in the circle))) Links between nodes linkNodes can be connected with links/edges. It is possible to have different types of links or attach a text string to a link.\nA link with arrow head link flowchart LR A--\u003eB flowchart LR A--\u003eB An open link link flowchart LR A --- B flowchart LR A --- B Text on links link flowchart LR A-- This is the text! ---B flowchart LR A-- This is the text! ---B or\nflowchart LR A---|This is the text|B flowchart LR A---|This is the text|B A link with arrow head and text link flowchart LR A--\u003e|text|B flowchart LR A--\u003e|text|B or\nflowchart LR A-- text --\u003eB flowchart LR A-- text --\u003eB Dotted link link flowchart LR A-.-\u003eB; flowchart LR A-.-\u003eB; Dotted link with text link flowchart LR A-. text .-\u003e B flowchart LR A-. text .-\u003e B Thick link link flowchart LR A ==\u003e B flowchart LR A ==\u003e B Thick link with text link flowchart LR A == text ==\u003e B flowchart LR A == text ==\u003e B An invisible link linkThis can be a useful tool in some instances where you want to alter the default positioning of a node.\nflowchart LR A ~~~ B flowchart LR A ~~~ B Chaining of links linkIt is possible declare many links in the same line as per below:\nflowchart LR A -- text --\u003e B -- text2 --\u003e C flowchart LR A -- text --\u003e B -- text2 --\u003e C It is also possible to declare multiple nodes links in the same line as per below:\nflowchart LR a --\u003e b \u0026 c--\u003e d flowchart LR a --\u003e b \u0026 c--\u003e d You can then describe dependencies in a very expressive way. Like the one-liner below:\nflowchart TB A \u0026 B--\u003e C \u0026 D flowchart TB A \u0026 B--\u003e C \u0026 D If you describe the same diagram using the the basic syntax, it will take four lines. A word of warning, one could go overboard with this making the flowchart harder to read in markdown form. The Swedish word lagom comes to mind. It means, not too much and not too little. This goes for expressive syntaxes as well.\nflowchart TB A --\u003e C A --\u003e D B --\u003e C B --\u003e D flowchart TB A --\u003e C A --\u003e D B --\u003e C B --\u003e D New arrow types linkThere are new types of arrows supported as per below:\nflowchart LR A --o B B --x C flowchart LR A --o B B --x C Multi directional arrows linkThere is the possibility to use multidirectional arrows.\nflowchart LR A o--o B B \u003c--\u003e C C x--x D flowchart LR A o--o B B \u003c--\u003e C C x--x D Minimum length of a link linkEach node in the flowchart is ultimately assigned to a rank in the rendered graph, i.e. to a vertical or horizontal level (depending on the flowchart orientation), based on the nodes to which it is linked. By default, links can span any number of ranks, but you can ask for any link to be longer than the others by adding extra dashes in the link definition.\nIn the following example, two extra dashes are added in the link from node B to node E, so that it spans two more ranks than regular links:\nflowchart TD A[Start] --\u003e B{Is it?} B --\u003e|Yes| C[OK] C --\u003e D[Rethink] D --\u003e B B ----\u003e|No| E[End] flowchart TD A[Start] --\u003e B{Is it?} B --\u003e|Yes| C[OK] C --\u003e D[Rethink] D --\u003e B B ----\u003e|No| E[End] Note Links may still be made longer than the requested number of ranks by the rendering engine to accommodate other requests.\nWhen the link label is written in the middle of the link, the extra dashes must be added on the right side of the link. The following example is equivalent to the previous one:\nflowchart TD A[Start] --\u003e B{Is it?} B -- Yes --\u003e C[OK] C --\u003e D[Rethink] D --\u003e B B -- No ----\u003e E[End] flowchart TD A[Start] --\u003e B{Is it?} B -- Yes --\u003e C[OK] C --\u003e D[Rethink] D --\u003e B B -- No ----\u003e E[End] For dotted or thick links, the characters to add are equals signs or dots, as summed up in the following table:\nLength 1 2 3 Normal --- ---- ----- Normal with arrow --\u003e ---\u003e ----\u003e Thick === ==== ===== Thick with arrow ==\u003e ===\u003e ====\u003e Dotted -.- -..- -...- Dotted with arrow -.-\u003e -..-\u003e -...-\u003e Special characters that break syntax linkIt is possible to put text within quotes in order to render more troublesome characters. As in the example below:\nflowchart LR id1[\"This is the (text) in the box\"] flowchart LR id1[\"This is the (text) in the box\"] Entity codes to escape characters linkIt is possible to escape characters using the syntax exemplified here.\nflowchart LR A[\"A double quote:#quot;\"] --\u003e B[\"A dec char:#9829;\"] flowchart LR A[\"A double quote:#quot;\"] --\u003e B[\"A dec char:#9829;\"] Numbers given are base 10, so # can be encoded as #35;. It is also supported to use HTML character names.\nSubgraphs linksubgraph title graph definition end An example below:\nflowchart TB c1--\u003ea2 subgraph one a1--\u003ea2 end subgraph two b1--\u003eb2 end subgraph three c1--\u003ec2 end flowchart TB c1--\u003ea2 subgraph one a1--\u003ea2 end subgraph two b1--\u003eb2 end subgraph three c1--\u003ec2 end You can also set an explicit id for the subgraph.\nflowchart TB c1--\u003ea2 subgraph ide1 [one] a1--\u003ea2 end flowchart TB c1--\u003ea2 subgraph ide1 [one] a1--\u003ea2 end flowcharts linkWith the graphtype flowchart it is also possible to set edges to and from subgraphs as in the flowchart below.\nflowchart TB c1--\u003ea2 subgraph one a1--\u003ea2 end subgraph two b1--\u003eb2 end subgraph three c1--\u003ec2 end one --\u003e two three --\u003e two two --\u003e c2 flowchart TB c1--\u003ea2 subgraph one a1--\u003ea2 end subgraph two b1--\u003eb2 end subgraph three c1--\u003ec2 end one --\u003e two three --\u003e two two --\u003e c2 Direction in subgraphs linkWith the graphtype flowcharts you can use the direction statement to set the direction which the subgraph will render like in this example.\nflowchart LR subgraph TOP direction TB subgraph B1 direction RL i1 --\u003ef1 end subgraph B2 direction BT i2 --\u003ef2 end end A --\u003e TOP --\u003e B B1 --\u003e B2 flowchart LR subgraph TOP direction TB subgraph B1 direction RL i1 --\u003ef1 end subgraph B2 direction BT i2 --\u003ef2 end end A --\u003e TOP --\u003e B B1 --\u003e B2 Limitation linkIf any of a subgraphâ€™s nodes are linked to the outside, subgraph direction will be ignored. Instead the subgraph will inherit the direction of the parent graph:\nflowchart LR subgraph subgraph1 direction TB top1[top] --\u003e bottom1[bottom] end subgraph subgraph2 direction TB top2[top] --\u003e bottom2[bottom] end %% ^ These subgraphs are identical, except for the links to them: %% Link *to* subgraph1: subgraph1 direction is maintained outside --\u003e subgraph1 %% Link *within* subgraph2: %% subgraph2 inherits the direction of the top-level graph (LR) outside ---\u003e top2 flowchart LR subgraph subgraph1 direction TB top1[top] --\u003e bottom1[bottom] end subgraph subgraph2 direction TB top2[top] --\u003e bottom2[bottom] end %% ^ These subgraphs are identical, except for the links to them: %% Link *to* subgraph1: subgraph1 direction is maintained outside --\u003e subgraph1 %% Link *within* subgraph2: %% subgraph2 inherits the direction of the top-level graph (LR) outside ---\u003e top2 Markdown Strings linkThe â€œMarkdown Stringsâ€ feature enhances flowcharts and mind maps by offering a more versatile string type, which supports text formatting options such as bold and italics, and automatically wraps text within labels.\n%%{init: {\"flowchart\": {\"htmlLabels\": false}} }%% flowchart LR subgraph \"One\" a(\"`The **cat** in the hat`\") -- \"edge label\" --\u003e b{{\"`The **dog** in the hog`\"}} end subgraph \"`**Two**`\" c(\"`The **cat** in the hat`\") -- \"`Bold **edge label**`\" --\u003e d(\"The dog in the hog\") end %%{init: {\"flowchart\": {\"htmlLabels\": false}} }%% flowchart LR subgraph \"One\" a(\"`The **cat** in the hat`\") -- \"edge label\" --\u003e b{{\"`The **dog** in the hog`\"}} end subgraph \"`**Two**`\" c(\"`The **cat** in the hat`\") -- \"`Bold **edge label**`\" --\u003e d(\"The dog in the hog\") end Formatting:\nFor bold text, use double asterisks (**) before and after the text. For italics, use single asterisks (*) before and after the text. With traditional strings, you needed to add tags for text to wrap in nodes. However, markdown strings automatically wrap text when it becomes too long and allows you to start a new line by simply using a newline character instead of a tag. This feature is applicable to node labels, edge labels, and subgraph labels.\nInteraction linkIt is possible to bind a click event to a node, the click can lead to either a javascript callback or to a link which will be opened in a new browser tab.\nNote This functionality is disabled when using securityLevel='strict' and enabled when using securityLevel='loose'.\nclick nodeId callback click nodeId call callback() nodeId is the id of the node callback is the name of a javascript function defined on the page displaying the graph, the function will be called with the nodeId as parameter. Examples of tooltip usage below:\nThe tooltip text is surrounded in double quotes. The styles of the tooltip are set by the class .mermaidTooltip.\nflowchart LR A--\u003eB B--\u003eC C--\u003eD click A callback \"Tooltip for a callback\" click B \"https://www.github.com\" \"This is a tooltip for a link\" click C call callback() \"Tooltip for a callback\" click D href \"https://www.github.com\" \"This is a tooltip for a link\" flowchart LR A--\u003eB B--\u003eC C--\u003eD click A callback \"Tooltip for a callback\" click B \"https://www.github.com\" \"This is a tooltip for a link\" click C call callback() \"Tooltip for a callback\" click D href \"https://www.github.com\" \"This is a tooltip for a link\" Success The tooltip functionality and the ability to link to urls are available from version 0.5.2.\n?\u003e Due to limitations with how Docsify handles JavaScript callback functions, an alternate working demo for the above code can be viewed at this jsfiddle.\nLinks are opened in the same browser tab/window by default. It is possible to change this by adding a link target to the click definition (_self, _blank, _parent and _top are supported):\nflowchart LR A--\u003eB B--\u003eC C--\u003eD D--\u003eE click A \"https://www.github.com\" _blank click B \"https://www.github.com\" \"Open this in a new tab\" _blank click C href \"https://www.github.com\" _blank click D href \"https://www.github.com\" \"Open this in a new tab\" _blank flowchart LR A--\u003eB B--\u003eC C--\u003eD D--\u003eE click A \"https://www.github.com\" _blank click B \"https://www.github.com\" \"Open this in a new tab\" _blank click C href \"https://www.github.com\" _blank click D href \"https://www.github.com\" \"Open this in a new tab\" _blank Beginnerâ€™s tipâ€”a full example using interactive links in a html context:\nflowchart LR A--\u003eB B--\u003eC C--\u003eD click A callback \"Tooltip\" click B \"https://www.github.com\" \"This is a link\" click C call callback() \"Tooltip\" click D href \"https://www.github.com\" \"This is a link\" Comments linkComments can be entered within a flow diagram, which will be ignored by the parser. Comments need to be on their own line, and must be prefaced with %% (double percent signs). Any text after the start of the comment to the next newline will be treated as a comment, including any flow syntax\nflowchart LR %% this is a comment A -- text --\u003e B{node} A -- text --\u003e B -- text2 --\u003e C flowchart LR %% this is a comment A -- text --\u003e B{node} A -- text --\u003e B -- text2 --\u003e C Styling and classes linkStyling links linkIt is possible to style links. For instance, you might want to style a link that is going backwards in the flow. As links have no ids in the same way as nodes, some other way of deciding what style the links should be attached to is required. Instead of ids, the order number of when the link was defined in the graph is used, or use default to apply to all links. In the example below the style defined in the linkStyle statement will belong to the fourth link in the graph:\nlinkStyle 3 stroke:#ff3,stroke-width:4px,color:red; It is also possible to add style to multiple links in a single statement, by separating link numbers with commas:\nlinkStyle 1,2,7 color:blue; Styling line curves linkIt is possible to style the type of curve used for lines between items, if the default method does not meet your needs. Available curve styles include basis, bumpX, bumpY, cardinal, catmullRom, linear, monotoneX, monotoneY, natural, step, stepAfter, and stepBefore.\nIn this example, a left-to-right graph uses the stepBefore curve style:\n%%{ init: { 'flowchart': { 'curve': 'stepBefore' } } }%% graph LR For a full list of available curves, including an explanation of custom curves, refer to the Shapes documentation in the d3-shape project.\nStyling a node linkIt is possible to apply specific styles such as a thicker border or a different background color to a node.\nflowchart LR id1(Start)--\u003eid2(Stop) style id1 fill:#f9f,stroke:#333,stroke-width:4px style id2 fill:#bbf,stroke:#f66,stroke-width:2px,color:#fff,stroke-dasharray: 5 5 flowchart LR id1(Start)--\u003eid2(Stop) style id1 fill:#f9f,stroke:#333,stroke-width:4px style id2 fill:#bbf,stroke:#f66,stroke-width:2px,color:#fff,stroke-dasharray: 5 5 Classes linkMore convenient than defining the style every time is to define a class of styles and attach this class to the nodes that should have a different look.\nA class definition looks like the example below:\nclassDef className fill:#f9f,stroke:#333,stroke-width:4px; Also, it is possible to define style to multiple classes in one statement:\nclassDef firstClassName,secondClassName font-size:12pt; Attachment of a class to a node is done as per below:\nclass nodeId1 className; It is also possible to attach a class to a list of nodes in one statement:\nclass nodeId1,nodeId2 className; A shorter form of adding a class is to attach the classname to the node using the :::operator as per below:\nflowchart LR A:::someclass --\u003e B classDef someclass fill:#f96 flowchart LR A:::someclass --\u003e B classDef someclass fill:#f96 This form can be used when declaring multiple links between nodes:\nflowchart LR A:::foo \u0026 B:::bar --\u003e C:::foobar classDef foo stroke:#f00 classDef bar stroke:#0f0 classDef foobar stroke:#00f flowchart LR A:::foo \u0026 B:::bar --\u003e C:::foobar classDef foo stroke:#f00 classDef bar stroke:#0f0 classDef foobar stroke:#00f CSS classes linkIt is also possible to predefine classes in CSS styles that can be applied from the graph definition as in the example below:\nExample style\nExample definition\nflowchart LR A--\u003eB[AAABBB] B--\u003eD class A cssClass flowchart LR A--\u003eB[AAABBB] B--\u003eD class A cssClass Default class linkIf a class is named default it will be assigned to all classes without specific class definitions.\nclassDef default fill:#f9f,stroke:#333,stroke-width:4px; Basic support for fontawesome linkIt is possible to add icons from fontawesome.\nThe icons are accessed via the syntax fa:#icon class name#.\nflowchart TD B[\"fa:fa-twitter for peace\"] B--\u003eC[fa:fa-ban forbidden] B--\u003eD(fa:fa-spinner) B--\u003eE(A fa:fa-camera-retro perhaps?) flowchart TD B[\"fa:fa-twitter for peace\"] B--\u003eC[fa:fa-ban forbidden] B--\u003eD(fa:fa-spinner) B--\u003eE(A fa:fa-camera-retro perhaps?) Mermaid is compatible with Font Awesome up to version 5, Free icons only. Check that the icons you use are from the supported set of icons.\nGraph declarations with spaces between vertices and link and without semicolon link In graph declarations, the statements also can now end without a semicolon. After release 0.2.16, ending a graph statement with semicolon is just optional. So the below graph declaration is also valid along with the old declarations of the graph.\nA single space is allowed between vertices and the link. However there should not be any space between a vertex and its text and a link and its text. The old syntax of graph declaration will also work and hence this new feature is optional and is introduced to improve readability.\nBelow is the new declaration of the graph edges which is also valid along with the old declaration of the graph edges.\nflowchart LR A[Hard edge] --\u003e|Link text| B(Round edge) B --\u003e C{Decision} C --\u003e|One| D[Result one] C --\u003e|Two| E[Result two] flowchart LR A[Hard edge] --\u003e|Link text| B(Round edge) B --\u003e C{Decision} C --\u003e|One| D[Result one] C --\u003e|Two| E[Result two] Configuration linkRenderer linkThe layout of the diagram is done with the renderer. The default renderer is dagre.\nStarting with Mermaid version 9.4, you can use an alternate renderer named elk. The elk renderer is better for larger and/or more complex diagrams.\nThe elk renderer is an experimental feature. You can change the renderer to elk by adding this directive:\n%%{init: {\"flowchart\": {\"defaultRenderer\": \"elk\"}} }%% Note Note that the site needs to use mermaid version 9.4+ for this to work and have this featured enabled in the lazy-loading configuration.\nWidth linkIt is possible to adjust the width of the rendered flowchart.\nThis is done by defining mermaid.flowchartConfig or by the CLI to use a JSON file with the configuration. How to use the CLI is described in the mermaidCLI page. mermaid.flowchartConfig can be set to a JSON string with config parameters or the corresponding object.\nmermaid.flowchartConfig = { width: 100% } "
            }
        );
    index.add(
            {
                id:  71 ,
                href: "\/docs\/mix\/mermaid\/syntax\/gantt\/",
                title: "Gantt diagrams",
                description: "Gantt diagrams link A Gantt chart is a type of bar chart, first developed by Karol Adamiecki in 1896, and independently by Henry Gantt in the 1910s, that illustrates a project schedule and the amount of time it would take for any one project to finish. Gantt charts illustrate number of days between the start and finish dates of the terminal elements and summary elements of a project.\nA note to users linkGantt Charts will record each scheduled task as one continuous bar that extends from the left to the right. The x axis represents time and the y records the different tasks and the order in which they are to be completed.\n",
                content: "Gantt diagrams link A Gantt chart is a type of bar chart, first developed by Karol Adamiecki in 1896, and independently by Henry Gantt in the 1910s, that illustrates a project schedule and the amount of time it would take for any one project to finish. Gantt charts illustrate number of days between the start and finish dates of the terminal elements and summary elements of a project.\nA note to users linkGantt Charts will record each scheduled task as one continuous bar that extends from the left to the right. The x axis represents time and the y records the different tasks and the order in which they are to be completed.\nIt is important to remember that when a date, day, or collection of dates specific to a task are â€œexcludedâ€, the Gantt Chart will accommodate those changes by extending an equal number of days, towards the right, not by creating a gap inside the task. As shown here However, if the excluded dates are between two tasks that are set to start consecutively, the excluded dates will be skipped graphically and left blank, and the following task will begin after the end of the excluded dates. As shown here A Gantt chart is useful for tracking the amount of time it would take before a project is finished, but it can also be used to graphically represent â€œnon-working daysâ€, with a few tweaks.\nMermaid can render Gantt diagrams as SVG, PNG or a MarkDown link that can be pasted into docs.\ngantt title A Gantt Diagram dateFormat YYYY-MM-DD section Section A task :a1, 2014-01-01, 30d Another task :after a1, 20d section Another Task in Another :2014-01-12, 12d another task :24d gantt title A Gantt Diagram dateFormat YYYY-MM-DD section Section A task :a1, 2014-01-01, 30d Another task :after a1, 20d section Another Task in Another :2014-01-12, 12d another task :24d Syntax link gantt dateFormat YYYY-MM-DD title Adding GANTT diagram functionality to mermaid excludes weekends %% (`excludes` accepts specific dates in YYYY-MM-DD format, days of the week (\"sunday\") or \"weekends\", but not the word \"weekdays\".) section A section Completed task :done, des1, 2014-01-06,2014-01-08 Active task :active, des2, 2014-01-09, 3d Future task : des3, after des2, 5d Future task2 : des4, after des3, 5d section Critical tasks Completed task in the critical line :crit, done, 2014-01-06,24h Implement parser and jison :crit, done, after des1, 2d Create tests for parser :crit, active, 3d Future task in critical line :crit, 5d Create tests for renderer :2d Add to mermaid :1d Functionality added :milestone, 2014-01-25, 0d section Documentation Describe gantt syntax :active, a1, after des1, 3d Add gantt diagram to demo page :after a1 , 20h Add another diagram to demo page :doc1, after a1 , 48h section Last section Describe gantt syntax :after doc1, 3d Add gantt diagram to demo page :20h Add another diagram to demo page :48h gantt dateFormat YYYY-MM-DD title Adding GANTT diagram functionality to mermaid excludes weekends %% (`excludes` accepts specific dates in YYYY-MM-DD format, days of the week (\"sunday\") or \"weekends\", but not the word \"weekdays\".) section A section Completed task :done, des1, 2014-01-06,2014-01-08 Active task :active, des2, 2014-01-09, 3d Future task : des3, after des2, 5d Future task2 : des4, after des3, 5d section Critical tasks Completed task in the critical line :crit, done, 2014-01-06,24h Implement parser and jison :crit, done, after des1, 2d Create tests for parser :crit, active, 3d Future task in critical line :crit, 5d Create tests for renderer :2d Add to mermaid :1d Functionality added :milestone, 2014-01-25, 0d section Documentation Describe gantt syntax :active, a1, after des1, 3d Add gantt diagram to demo page :after a1 , 20h Add another diagram to demo page :doc1, after a1 , 48h section Last section Describe gantt syntax :after doc1, 3d Add gantt diagram to demo page :20h Add another diagram to demo page :48h It is possible to set multiple dependencies separated by space:\ngantt apple :a, 2017-07-20, 1w banana :crit, b, 2017-07-23, 1d cherry :active, c, after b a, 1d gantt apple :a, 2017-07-20, 1w banana :crit, b, 2017-07-23, 1d cherry :active, c, after b a, 1d Title linkThe title is an optional string to be displayed at the top of the Gantt chart to describe the chart as a whole.\nSection statements linkYou can divide the chart into various sections, for example to separate different parts of a project like development and documentation.\nTo do so, start a line with the section keyword and give it a name. (Note that unlike with the title for the entire chart, this name is required.\nMilestones linkYou can add milestones to the diagrams. Milestones differ from tasks as they represent a single instant in time and are identified by the keyword milestone. Below is an example on how to use milestones. As you may notice, the exact location of the milestone is determined by the initial date for the milestone and the â€œdurationâ€ of the task this way: initial date+duration/2.\ngantt dateFormat HH:mm axisFormat %H:%M Initial milestone : milestone, m1, 17:49, 2m Task A : 10m Task B : 5m Final milestone : milestone, m2, 18:08, 4m gantt dateFormat HH:mm axisFormat %H:%M Initial milestone : milestone, m1, 17:49, 2m Task A : 10m Task B : 5m Final milestone : milestone, m2, 18:08, 4m Setting dates linkdateFormat defines the format of the date input of your gantt elements. How these dates are represented in the rendered chart output are defined by axisFormat.\nInput date format linkThe default input date format is YYYY-MM-DD. You can define your custom dateFormat.\ndateFormat YYYY-MM-DD The following formatting options are supported:\nInput Example Description YYYY 2014 4 digit year YY 14 2 digit year Q 1..4 Quarter of year. Sets month to first month in quarter. M MM 1..12 Month number MMM MMMM January..Dec Month name in locale set by dayjs.locale() D DD 1..31 Day of month Do 1st..31st Day of month with ordinal DDD DDDD 1..365 Day of year X 1410715640.579 Unix timestamp x 1410715640579 Unix ms timestamp H HH 0..23 24 hour time h hh 1..12 12 hour time used with a A. a A am pm Post or ante meridiem m mm 0..59 Minutes s ss 0..59 Seconds S 0..9 Tenths of a second SS 0..99 Hundreds of a second SSS 0..999 Thousandths of a second Z ZZ +12:00 Offset from UTC as +-HH:mm, +-HHmm, or Z More info in: https://day.js.org/docs/en/parse/string-format/\nOutput date format on the axis linkThe default output date format is YYYY-MM-DD. You can define your custom axisFormat, like 2020-Q1 for the first quarter of the year 2020.\naxisFormat %Y-%m-%d The following formatting strings are supported:\nFormat Definition %a abbreviated weekday name %A full weekday name %b abbreviated month name %B full month name %c date and time, as â€œ%a %b %e %H:%M:%S %Yâ€ %d zero-padded day of the month as a decimal number [01,31] %e space-padded day of the month as a decimal number [ 1,31]; equivalent to %_d %H hour (24-hour clock) as a decimal number [00,23] %I hour (12-hour clock) as a decimal number [01,12] %j day of the year as a decimal number [001,366] %m month as a decimal number [01,12] %M minute as a decimal number [00,59] %L milliseconds as a decimal number [000, 999] %p either AM or PM %S second as a decimal number [00,61] %U week number of the year (Sunday as the first day of the week) as a decimal number [00,53] %w weekday as a decimal number [0(Sunday),6] %W week number of the year (Monday as the first day of the week) as a decimal number [00,53] %x date, as â€œ%m/%d/%Yâ€ %X time, as â€œ%H:%M:%Sâ€ %y year without century as a decimal number [00,99] %Y year with century as a decimal number %Z time zone offset, such as â€œ-0700â€ %% a literal â€œ%â€ character More info in: https://github.com/d3/d3-time-format/tree/v4.0.0#locale_format\nAxis ticks (v10.3.0+) linkThe default output ticks are auto. You can custom your tickInterval, like 1day or 1week.\ntickInterval 1day The pattern is:\n/^([1-9][0-9]*)(millisecond|second|minute|hour|day|week|month)$/; More info in: https://github.com/d3/d3-time#interval_every\nWeek-based tickIntervals start the week on sunday by default. If you wish to specify another weekday on which the tickInterval should start, use the weekday option:\ngantt tickInterval 1week weekday monday gantt tickInterval 1week weekday monday Warning \u003e millisecond and second support was added in vMERMAID_RELEASE_VERSION\nOutput in compact mode linkThe compact mode allows you to display multiple tasks in the same row. Compact mode can be enabled for a gantt chart by setting the display mode of the graph via preceeding YAML settings.\n--- displayMode: compact --- gantt title A Gantt Diagram dateFormat YYYY-MM-DD section Section A task :a1, 2014-01-01, 30d Another task :a2, 2014-01-20, 25d Another one :a3, 2014-02-10, 20d --- displayMode: compact --- gantt title A Gantt Diagram dateFormat YYYY-MM-DD section Section A task :a1, 2014-01-01, 30d Another task :a2, 2014-01-20, 25d Another one :a3, 2014-02-10, 20d Comments linkComments can be entered within a gantt chart, which will be ignored by the parser. Comments need to be on their own line and must be prefaced with %% (double percent signs). Any text after the start of the comment to the next newline will be treated as a comment, including any diagram syntax.\ngantt title A Gantt Diagram %% This is a comment dateFormat YYYY-MM-DD section Section A task :a1, 2014-01-01, 30d Another task :after a1, 20d section Another Task in Another :2014-01-12, 12d another task :24d gantt title A Gantt Diagram %% This is a comment dateFormat YYYY-MM-DD section Section A task :a1, 2014-01-01, 30d Another task :after a1, 20d section Another Task in Another :2014-01-12, 12d another task :24d Styling linkStyling of the Gantt diagram is done by defining a number of CSS classes. During rendering, these classes are extracted from the file located at src/diagrams/gantt/styles.js\nClasses used link Class Description grid.tick Styling for the Grid Lines grid.path Styling for the Gridâ€™s borders .taskText Task Text Styling .taskTextOutsideRight Styling for Task Text that exceeds the activity bar towards the right. .taskTextOutsideLeft Styling for Task Text that exceeds the activity bar, towards the left. todayMarker Toggle and Styling for the â€œToday Markerâ€ Sample stylesheet link .grid .tick { stroke: lightgrey; opacity: 0.3; shape-rendering: crispEdges; } .grid path { stroke-width: 0; } #tag { color: white; background: #fa283d; width: 150px; position: absolute; display: none; padding: 3px 6px; margin-left: -80px; font-size: 11px; } #tag:before { border: solid transparent; content: ' '; height: 0; left: 50%; margin-left: -5px; position: absolute; width: 0; border-width: 10px; border-bottom-color: #fa283d; top: -20px; } .taskText { fill: white; text-anchor: middle; } .taskTextOutsideRight { fill: black; text-anchor: start; } .taskTextOutsideLeft { fill: black; text-anchor: end; } Today marker linkYou can style or hide the marker for the current date. To style it, add a value for the todayMarker key.\ntodayMarker stroke-width:5px,stroke:#0f0,opacity:0.5 To hide the marker, set todayMarker to off.\ntodayMarker off Configuration linkIt is possible to adjust the margins for rendering the gantt diagram.\nThis is done by defining the ganttConfig part of the configuration object. How to use the CLI is described in the mermaidCLI page.\nmermaid.ganttConfig can be set to a JSON string with config parameters or the corresponding object.\nmermaid.ganttConfig = { titleTopMargin: 25, barHeight: 20, barGap: 4, topPadding: 75, sidePadding: 75, }; Possible configuration params: link Param Description Default value mirrorActor Turns on/off the rendering of actors below the diagram as well as above it false bottomMarginAdj Adjusts how far down the graph ended. Wide borders styles with css could generate unwanted clipping which is why this config param exists. 1 Interaction linkIt is possible to bind a click event to a task. The click can lead to either a javascript callback or to a link which will be opened in the current browser tab. Note: This functionality is disabled when using securityLevel='strict' and enabled when using securityLevel='loose'.\nclick taskId call callback(arguments) click taskId href URL taskId is the id of the task callback is the name of a javascript function defined on the page displaying the graph, the function will be called with the taskId as the parameter if no other arguments are specified. Beginnerâ€™s tipâ€”a full example using interactive links in an html context:\ngantt dateFormat YYYY-MM-DD section Clickable Visit mermaidjs :active, cl1, 2014-01-07, 3d Print arguments :cl2, after cl1, 3d Print task :cl3, after cl2, 3d click cl1 href \"https://mermaidjs.github.io/\" click cl2 call printArguments(\"test1\", \"test2\", test3) click cl3 call printTask() Examples linkBar chart (using gantt chart) link gantt title Git Issues - days since last update dateFormat X axisFormat %s section Issue19062 71 : 0, 71 section Issue19401 36 : 0, 36 section Issue193 34 : 0, 34 section Issue7441 9 : 0, 9 section Issue1300 5 : 0, 5 gantt title Git Issues - days since last update dateFormat X axisFormat %s section Issue19062 71 : 0, 71 section Issue19401 36 : 0, 36 section Issue193 34 : 0, 34 section Issue7441 9 : 0, 9 section Issue1300 5 : 0, 5 "
            }
        );
    index.add(
            {
                id:  72 ,
                href: "\/docs\/mix\/mermaid\/syntax\/gitgraph\/",
                title: "Gitgraph Diagrams",
                description: "Gitgraph Diagrams link A Git Graph is a pictorial representation of git commits and git actions(commands) on various branches.\nThese kind of diagram are particularly helpful to developers and devops teams to share their Git branching strategies. For example, it makes it easier to visualize how git flow works.\nMermaid can render Git diagrams\n--- title: Example Git diagram --- gitGraph commit commit branch develop checkout develop commit commit checkout main merge develop commit commit --- title: Example Git diagram --- gitGraph commit commit branch develop checkout develop commit commit checkout main merge develop commit commit In Mermaid, we support the basic git operations like:\n",
                content: "Gitgraph Diagrams link A Git Graph is a pictorial representation of git commits and git actions(commands) on various branches.\nThese kind of diagram are particularly helpful to developers and devops teams to share their Git branching strategies. For example, it makes it easier to visualize how git flow works.\nMermaid can render Git diagrams\n--- title: Example Git diagram --- gitGraph commit commit branch develop checkout develop commit commit checkout main merge develop commit commit --- title: Example Git diagram --- gitGraph commit commit branch develop checkout develop commit commit checkout main merge develop commit commit In Mermaid, we support the basic git operations like:\ncommit : Representing a new commit on the current branch. branch : To create \u0026 switch to a new branch, setting it as the current branch. checkout : To checking out an existing branch and setting it as the current branch. merge : To merge an existing branch onto the current branch. With the help of these key git commands, you will be able to draw a gitgraph in Mermaid very easily and quickly. Entity names are often capitalized, although there is no accepted standard on this, and it is not required in Mermaid.\nSyntax linkMermaid syntax for a gitgraph is very straight-forward and simple. It follows a declarative-approach, where each commit is drawn on the timeline in the diagram, in order of its occurrences/presence in code. Basically, it follows the insertion order for each command.\nFirst thing you do is to declare your diagram type using the gitgraph keyword. This gitgraph keyword, tells Mermaid that you wish to draw a gitgraph, and parse the diagram code accordingly.\nEach gitgraph, is initialized with main branch. So unless you create a different branch, by-default the commits will go to the main branch. This is driven with how git works, where in the beginning you always start with the main branch (formerly called as master branch). And by-default, main branch is set as your current branch.\nYou make use of commit keyword to register a commit on the current branch. Let see how this works:\nA simple gitgraph showing three commits on the default (main) branch:\ngitGraph commit commit commit gitGraph commit commit commit If you look closely at the previous example, you can see the default branch main along with three commits. Also, notice that by default each commit has been given a unique \u0026 random ID. What if you wanted to give your own custom ID to a commit? Yes, it is possible to do that with Mermaid.\nAdding custom commit id linkFor a given commit you may specify a custom ID at the time of declaring it using the id attribute, followed by : and your custom value within a \"\" quote. For example: commit id: \"your_custom_id\"\nLet us see how this works with the help of the following diagram:\ngitGraph commit id: \"Alpha\" commit id: \"Beta\" commit id: \"Gamma\" gitGraph commit id: \"Alpha\" commit id: \"Beta\" commit id: \"Gamma\" In this example, we have given our custom IDs to the commits.\nModifying commit type linkIn Mermaid, a commit can be of three type, which render a bit different in the diagram. These types are:\nNORMAL : Default commit type. Represented by a solid circle in the diagram REVERSE : To emphasize a commit as a reverse commit. Represented by a crossed solid circle in the diagram. HIGHLIGHT : To highlight a particular commit in the diagram. Represented by a filled rectangle in the diagram. For a given commit you may specify its type at the time of declaring it using the type attribute, followed by : and the required type option discussed above. For example: commit type: HIGHLIGHT\nNOTE: If no commit type is specified, NORMAL is picked as default.\nLet us see how these different commit type look with the help of the following diagram:\ngitGraph commit id: \"Normal\" commit commit id: \"Reverse\" type: REVERSE commit commit id: \"Highlight\" type: HIGHLIGHT commit gitGraph commit id: \"Normal\" commit commit id: \"Reverse\" type: REVERSE commit commit id: \"Highlight\" type: HIGHLIGHT commit In this example, we have specified different types to each commit. Also, see how we have included both id and type together at the time of declaring our commits.\nAdding Tags linkFor a given commit you may decorate it as a tag, similar to the concept of tags or release version in git world. You can attach a custom tag at the time of declaring a commit using the tag attribute, followed by : and your custom value within \"\" quote. For example: commit tag: \"your_custom_tag\"\nLet us see how this works with the help of the following diagram:\ngitGraph commit commit id: \"Normal\" tag: \"v1.0.0\" commit commit id: \"Reverse\" type: REVERSE tag: \"RC_1\" commit commit id: \"Highlight\" type: HIGHLIGHT tag: \"8.8.4\" commit gitGraph commit commit id: \"Normal\" tag: \"v1.0.0\" commit commit id: \"Reverse\" type: REVERSE tag: \"RC_1\" commit commit id: \"Highlight\" type: HIGHLIGHT tag: \"8.8.4\" commit In this example, we have given custom tags to the commits. Also, see how we have combined all these attributes in a single commit declaration. You can mix-match these attributes as you like.\nCreate a new branch linkIn Mermaid, in-order to create a new branch, you make use of the branch keyword. You also need to provide a name of the new branch. The name has to be unique and cannot be that of an existing branch. A branch name that could be confused for a keyword must be quoted within \"\". Usage examples: branch develop, branch \"cherry-pick\"\nWhen Mermaid, reads the branch keyword, it creates a new branch and sets it as the current branch. Equivalent to you creating a new branch and checking it out in Git world.\nLet see this in an example:\ngitGraph commit commit branch develop commit commit commit gitGraph commit commit branch develop commit commit commit In this example, see how we started with default main branch, and pushed two commits on that. Then we created the develop branch, and all commits afterwards are put on the develop branch as it became the current branch.\nChecking out an existing branch linkIn Mermaid, in order to switch to an existing branch, you make use of the checkout keyword. You also need to provide a name of an existing branch. If no branch is found with the given name, it will result in console error. Usage example: checkout develop\nWhen Mermaid, reads the checkout keyword, it finds the given branch and sets it as the current branch. Equivalent to checking out a branch in the Git world.\nLet see modify our previous example:\ngitGraph commit commit branch develop commit commit commit checkout main commit commit gitGraph commit commit branch develop commit commit commit checkout main commit commit In this example, see how we started with default main branch, and pushed two commits on that. Then we created the develop branch, and all three commits afterwards are put on the develop branch as it became the current branch. After this we made use of the checkout keyword to set the current branch as main, and all commit that follow are registered against the current branch, i.e. main.\nMerging two branches linkIn Mermaid, in order to merge or join to an existing branch, you make use of the merge keyword. You also need to provide the name of an existing branch to merge from. If no branch is found with the given name, it will result in console error. Also, you can only merge two separate branches, and cannot merge a branch with itself. In such case an error is throw.\nUsage example: merge develop\nWhen Mermaid, reads the merge keyword, it finds the given branch and its head commit (the last commit on that branch), and joins it with the head commit on the current branch. Each merge results in a merge commit, represented in the diagram with filled double circle.\nLet us modify our previous example to merge our two branches:\ngitGraph commit commit branch develop commit commit commit checkout main commit commit merge develop commit commit gitGraph commit commit branch develop commit commit commit checkout main commit commit merge develop commit commit In this example, see how we started with default main branch, and pushed two commits on that. Then we created the develop branch, and all three commits afterwards are put on the develop branch as it became the current branch. After this we made use of the checkout keyword to set the current branch as main, and all commits that follow are registered against the current branch, i.e. main. After this we merge the develop branch onto the current branch main, resulting in a merge commit. Since the current branch at this point is still main, the last two commits are registered against that.\nYou can also decorate your merge with similar attributes as you did for the commit using:\nidâ€“\u003e To override the default ID with custom ID tagâ€“\u003e To add a custom tag to your merge commit typeâ€“\u003e To override the default shape of merge commit. Here you can use other commit type mentioned earlier. And you can choose to use none, some or all of these attributes together. For example: merge develop id: \"my_custom_id\" tag: \"my_custom_tag\" type: REVERSE\nLet us see how this works with the help of the following diagram:\ngitGraph commit id: \"1\" commit id: \"2\" branch nice_feature checkout nice_feature commit id: \"3\" checkout main commit id: \"4\" checkout nice_feature branch very_nice_feature checkout very_nice_feature commit id: \"5\" checkout main commit id: \"6\" checkout nice_feature commit id: \"7\" checkout main merge nice_feature id: \"customID\" tag: \"customTag\" type: REVERSE checkout very_nice_feature commit id: \"8\" checkout main commit id: \"9\" gitGraph commit id: \"1\" commit id: \"2\" branch nice_feature checkout nice_feature commit id: \"3\" checkout main commit id: \"4\" checkout nice_feature branch very_nice_feature checkout very_nice_feature commit id: \"5\" checkout main commit id: \"6\" checkout nice_feature commit id: \"7\" checkout main merge nice_feature id: \"customID\" tag: \"customTag\" type: REVERSE checkout very_nice_feature commit id: \"8\" checkout main commit id: \"9\" Cherry Pick commit from another branch linkSimilar to how â€˜gitâ€™ allows you to cherry-pick a commit from another branch onto the current branch, Mermaid also supports this functionality. You can also cherry-pick a commit from another branch using the cherry-pick keyword.\nTo use the cherry-pick keyword, you must specify the id using the id attribute, followed by : and your desired commit id within a \"\" quote. For example:\ncherry-pick id: \"your_custom_id\"\nHere, a new commit representing the cherry-pick is created on the current branch, and is visually highlighted in the diagram with a cherry and a tag depicting the commit id from which it is cherry-picked from.\nA few important rules to note here are:\nYou need to provide the id for an existing commit to be cherry-picked. If given commit id does not exist it will result in an error. For this, make use of the commit id:$value format of declaring commits. See the examples from above. The given commit must not exist on the current branch. The cherry-picked commit must always be a different branch than the current branch. Current branch must have at least one commit, before you can cherry-pick, otherwise it will cause an error is throw. Let see an example:\ngitGraph commit id: \"ZERO\" branch develop commit id:\"A\" checkout main commit id:\"ONE\" checkout develop commit id:\"B\" checkout main commit id:\"TWO\" cherry-pick id:\"A\" commit id:\"THREE\" checkout develop commit id:\"C\" gitGraph commit id: \"ZERO\" branch develop commit id:\"A\" checkout main commit id:\"ONE\" checkout develop commit id:\"B\" checkout main commit id:\"TWO\" cherry-pick id:\"A\" commit id:\"THREE\" checkout develop commit id:\"C\" Gitgraph specific configuration options linkIn Mermaid, you have the option to configure the gitgraph diagram. You can configure the following options:\nshowBranches : Boolean, default is true. If set to false, the branches are not shown in the diagram. showCommitLabel : Boolean, default is true. If set to false, the commit labels are not shown in the diagram. mainBranchName : String, default is main. The name of the default/root branch. mainBranchOrder : Position of the main branch in the list of branches. default is 0, meaning, by default main branch is the first in the order. Letâ€™s look at them one by one.\nHiding Branch names and lines linkSometimes you may want to hide the branch names and lines from the diagram. You can do this by using the showBranches keyword. By default its value is true. You can set it to false using directives.\nUsage example:\n%%{init: { 'logLevel': 'debug', 'theme': 'base', 'gitGraph': {'showBranches': false}} }%% gitGraph commit branch hotfix checkout hotfix commit branch develop checkout develop commit id:\"ash\" tag:\"abc\" branch featureB checkout featureB commit type:HIGHLIGHT checkout main checkout hotfix commit type:NORMAL checkout develop commit type:REVERSE checkout featureB commit checkout main merge hotfix checkout featureB commit checkout develop branch featureA commit checkout develop merge hotfix checkout featureA commit checkout featureB commit checkout develop merge featureA branch release checkout release commit checkout main commit checkout release merge main checkout develop merge release %%{init: { 'logLevel': 'debug', 'theme': 'base', 'gitGraph': {'showBranches': false}} }%% gitGraph commit branch hotfix checkout hotfix commit branch develop checkout develop commit id:\"ash\" tag:\"abc\" branch featureB checkout featureB commit type:HIGHLIGHT checkout main checkout hotfix commit type:NORMAL checkout develop commit type:REVERSE checkout featureB commit checkout main merge hotfix checkout featureB commit checkout develop branch featureA commit checkout develop merge hotfix checkout featureA commit checkout featureB commit checkout develop merge featureA branch release checkout release commit checkout main commit checkout release merge main checkout develop merge release Commit labels Layout: Rotated or Horizontal linkMermaid supports two types of commit labels layout. The default layout is rotated, which means the labels are placed below the commit circle, rotated at 45 degrees for better readability. This is particularly useful for commits with long labels.\nThe other option is horizontal, which means the labels are placed below the commit circle centred horizontally, and are not rotated. This is particularly useful for commits with short labels.\nYou can change the layout of the commit labels by using the rotateCommitLabel keyword in the directive. It defaults to true, which means the commit labels are rotated.\nUsage example: Rotated commit labels\n%%{init: { 'logLevel': 'debug', 'theme': 'base', 'gitGraph': {'rotateCommitLabel': true}} }%% gitGraph commit id: \"feat(api): ...\" commit id: \"a\" commit id: \"b\" commit id: \"fix(client): .extra long label..\" branch c2 commit id: \"feat(modules): ...\" commit id: \"test(client): ...\" checkout main commit id: \"fix(api): ...\" commit id: \"ci: ...\" branch b1 commit branch b2 commit %%{init: { 'logLevel': 'debug', 'theme': 'base', 'gitGraph': {'rotateCommitLabel': true}} }%% gitGraph commit id: \"feat(api): ...\" commit id: \"a\" commit id: \"b\" commit id: \"fix(client): .extra long label..\" branch c2 commit id: \"feat(modules): ...\" commit id: \"test(client): ...\" checkout main commit id: \"fix(api): ...\" commit id: \"ci: ...\" branch b1 commit branch b2 commit Usage example: Horizontal commit labels\n%%{init: { 'logLevel': 'debug', 'theme': 'base', 'gitGraph': {'rotateCommitLabel': false}} }%% gitGraph commit id: \"feat(api): ...\" commit id: \"a\" commit id: \"b\" commit id: \"fix(client): .extra long label..\" branch c2 commit id: \"feat(modules): ...\" commit id: \"test(client): ...\" checkout main commit id: \"fix(api): ...\" commit id: \"ci: ...\" branch b1 commit branch b2 commit %%{init: { 'logLevel': 'debug', 'theme': 'base', 'gitGraph': {'rotateCommitLabel': false}} }%% gitGraph commit id: \"feat(api): ...\" commit id: \"a\" commit id: \"b\" commit id: \"fix(client): .extra long label..\" branch c2 commit id: \"feat(modules): ...\" commit id: \"test(client): ...\" checkout main commit id: \"fix(api): ...\" commit id: \"ci: ...\" branch b1 commit branch b2 commit Hiding commit labels linkSometimes you may want to hide the commit labels from the diagram. You can do this by using the showCommitLabel keyword. By default its value is true. You can set it to false using directives.\nUsage example:\n%%{init: { 'logLevel': 'debug', 'theme': 'base', 'gitGraph': {'showBranches': false,'showCommitLabel': false}} }%% gitGraph commit branch hotfix checkout hotfix commit branch develop checkout develop commit id:\"ash\" branch featureB checkout featureB commit type:HIGHLIGHT checkout main checkout hotfix commit type:NORMAL checkout develop commit type:REVERSE checkout featureB commit checkout main merge hotfix checkout featureB commit checkout develop branch featureA commit checkout develop merge hotfix checkout featureA commit checkout featureB commit checkout develop merge featureA branch release checkout release commit checkout main commit checkout release merge main checkout develop merge release %%{init: { 'logLevel': 'debug', 'theme': 'base', 'gitGraph': {'showBranches': false,'showCommitLabel': false}} }%% gitGraph commit branch hotfix checkout hotfix commit branch develop checkout develop commit id:\"ash\" branch featureB checkout featureB commit type:HIGHLIGHT checkout main checkout hotfix commit type:NORMAL checkout develop commit type:REVERSE checkout featureB commit checkout main merge hotfix checkout featureB commit checkout develop branch featureA commit checkout develop merge hotfix checkout featureA commit checkout featureB commit checkout develop merge featureA branch release checkout release commit checkout main commit checkout release merge main checkout develop merge release Customizing main branch name linkSometimes you may want to customize the name of the main/default branch. You can do this by using the mainBranchName keyword. By default its value is main. You can set it to any string using directives.\nUsage example:\n%%{init: { 'logLevel': 'debug', 'theme': 'base', 'gitGraph': {'showBranches': true, 'showCommitLabel':true,'mainBranchName': 'MetroLine1'}} }%% gitGraph commit id:\"NewYork\" commit id:\"Dallas\" branch MetroLine2 commit id:\"LosAngeles\" commit id:\"Chicago\" commit id:\"Houston\" branch MetroLine3 commit id:\"Phoenix\" commit type: HIGHLIGHT id:\"Denver\" commit id:\"Boston\" checkout MetroLine1 commit id:\"Atlanta\" merge MetroLine3 commit id:\"Miami\" commit id:\"Washington\" merge MetroLine2 tag:\"MY JUNCTION\" commit id:\"Boston\" commit id:\"Detroit\" commit type:REVERSE id:\"SanFrancisco\" %%{init: { 'logLevel': 'debug', 'theme': 'base', 'gitGraph': {'showBranches': true, 'showCommitLabel':true,'mainBranchName': 'MetroLine1'}} }%% gitGraph commit id:\"NewYork\" commit id:\"Dallas\" branch MetroLine2 commit id:\"LosAngeles\" commit id:\"Chicago\" commit id:\"Houston\" branch MetroLine3 commit id:\"Phoenix\" commit type: HIGHLIGHT id:\"Denver\" commit id:\"Boston\" checkout MetroLine1 commit id:\"Atlanta\" merge MetroLine3 commit id:\"Miami\" commit id:\"Washington\" merge MetroLine2 tag:\"MY JUNCTION\" commit id:\"Boston\" commit id:\"Detroit\" commit type:REVERSE id:\"SanFrancisco\" Look at the imaginary railroad map created using Mermaid. Here, we have changed the default main branch name to MetroLine1.\nCustomizing branch ordering linkIn Mermaid, by default the branches are shown in the order of their definition or appearance in the diagram code.\nSometimes you may want to customize the order of the branches. You can do this by using the order keyword next the branch definition. You can set it to a positive number.\nMermaid follows the given precedence order of the order keyword.\nMain branch is always shown first as it has default order value of 0. (unless its order is modified and changed from 0 using the mainBranchOrder keyword in the config) Next, All branches without an order are shown in the order of their appearance in the diagram code. Next, All branches with an order are shown in the order of their order value. To fully control the order of all the branches, you must define order for all the branches.\nUsage example:\n%%{init: { 'logLevel': 'debug', 'theme': 'base', 'gitGraph': {'showBranches': true, 'showCommitLabel':true}} }%% gitGraph commit branch test1 order: 3 branch test2 order: 2 branch test3 order: 1 %%{init: { 'logLevel': 'debug', 'theme': 'base', 'gitGraph': {'showBranches': true, 'showCommitLabel':true}} }%% gitGraph commit branch test1 order: 3 branch test2 order: 2 branch test3 order: 1 Look at the diagram, all the branches are following the order defined.\nUsage example:\n%%{init: { 'logLevel': 'debug', 'theme': 'base', 'gitGraph': {'showBranches': true, 'showCommitLabel':true,'mainBranchOrder': 2}} }%% gitGraph commit branch test1 order: 3 branch test2 branch test3 branch test4 order: 1 %%{init: { 'logLevel': 'debug', 'theme': 'base', 'gitGraph': {'showBranches': true, 'showCommitLabel':true,'mainBranchOrder': 2}} }%% gitGraph commit branch test1 order: 3 branch test2 branch test3 branch test4 order: 1 Look at the diagram, here, all the branches without a specified order are drawn in their order of definition. Then, test4 branch is drawn because the order of 1. Then, main branch is drawn because the order of 2. And, lastly test1is drawn because the order of 3.\nNOTE: Because we have overridden the mainBranchOrder to 2, the main branch is not drawn in the beginning, instead follows the ordering.\nHere, we have changed the default main branch name to MetroLine1.\nOrientation (v10.3.0+) linkMermaid supports two graph orientations: Left-to-Right (default) and Top-to-Bottom.\nYou can set this with either LR: (for Left-to-Right) or TB: (for Top-to-Bottom) after gitGraph.\nLeft to Right (default, LR:) linkIn Mermaid, the default orientation is for commits to run from left to right and for branches to be stacked on top of one another.\nHowever, you can set this explicitly with LR: after gitGraph.\nUsage example:\ngitGraph LR: commit commit branch develop commit commit checkout main commit commit merge develop commit commit gitGraph LR: commit commit branch develop commit commit checkout main commit commit merge develop commit commit Top to Bottom (TB:) linkIn TB (Top-to-Bottom) orientation, the commits run from top to bottom of the graph and branches are arranged side-by-side.\nTo orient the graph this way, you need to add TB: after gitGraph.\nUsage example:\ngitGraph TB: commit commit branch develop commit commit checkout main commit commit merge develop commit commit gitGraph TB: commit commit branch develop commit commit checkout main commit commit merge develop commit commit Themes linkMermaid supports a bunch of pre-defined themes which you can use to find the right one for you. PS: you can actually override an existing themeâ€™s variable to get your own custom theme going. Learn more about theming your diagram here.\nThe following are the different pre-defined theme options:\nbase forest dark default neutral NOTE: To change theme you can either use the initialize call or directives. Learn more about directives Letâ€™s put them to use, and see how our sample diagram looks in different themes:\nBase Theme link %%{init: { 'logLevel': 'debug', 'theme': 'base' } }%% gitGraph commit branch hotfix checkout hotfix commit branch develop checkout develop commit id:\"ash\" tag:\"abc\" branch featureB checkout featureB commit type:HIGHLIGHT checkout main checkout hotfix commit type:NORMAL checkout develop commit type:REVERSE checkout featureB commit checkout main merge hotfix checkout featureB commit checkout develop branch featureA commit checkout develop merge hotfix checkout featureA commit checkout featureB commit checkout develop merge featureA branch release checkout release commit checkout main commit checkout release merge main checkout develop merge release %%{init: { 'logLevel': 'debug', 'theme': 'base' } }%% gitGraph commit branch hotfix checkout hotfix commit branch develop checkout develop commit id:\"ash\" tag:\"abc\" branch featureB checkout featureB commit type:HIGHLIGHT checkout main checkout hotfix commit type:NORMAL checkout develop commit type:REVERSE checkout featureB commit checkout main merge hotfix checkout featureB commit checkout develop branch featureA commit checkout develop merge hotfix checkout featureA commit checkout featureB commit checkout develop merge featureA branch release checkout release commit checkout main commit checkout release merge main checkout develop merge release Forest Theme link %%{init: { 'logLevel': 'debug', 'theme': 'forest' } }%% gitGraph commit branch hotfix checkout hotfix commit branch develop checkout develop commit id:\"ash\" tag:\"abc\" branch featureB checkout featureB commit type:HIGHLIGHT checkout main checkout hotfix commit type:NORMAL checkout develop commit type:REVERSE checkout featureB commit checkout main merge hotfix checkout featureB commit checkout develop branch featureA commit checkout develop merge hotfix checkout featureA commit checkout featureB commit checkout develop merge featureA branch release checkout release commit checkout main commit checkout release merge main checkout develop merge release %%{init: { 'logLevel': 'debug', 'theme': 'forest' } }%% gitGraph commit branch hotfix checkout hotfix commit branch develop checkout develop commit id:\"ash\" tag:\"abc\" branch featureB checkout featureB commit type:HIGHLIGHT checkout main checkout hotfix commit type:NORMAL checkout develop commit type:REVERSE checkout featureB commit checkout main merge hotfix checkout featureB commit checkout develop branch featureA commit checkout develop merge hotfix checkout featureA commit checkout featureB commit checkout develop merge featureA branch release checkout release commit checkout main commit checkout release merge main checkout develop merge release Default Theme link %%{init: { 'logLevel': 'debug', 'theme': 'default' } }%% gitGraph commit type:HIGHLIGHT branch hotfix checkout hotfix commit branch develop checkout develop commit id:\"ash\" tag:\"abc\" branch featureB checkout featureB commit type:HIGHLIGHT checkout main checkout hotfix commit type:NORMAL checkout develop commit type:REVERSE checkout featureB commit checkout main merge hotfix checkout featureB commit checkout develop branch featureA commit checkout develop merge hotfix checkout featureA commit checkout featureB commit checkout develop merge featureA branch release checkout release commit checkout main commit checkout release merge main checkout develop merge release %%{init: { 'logLevel': 'debug', 'theme': 'default' } }%% gitGraph commit type:HIGHLIGHT branch hotfix checkout hotfix commit branch develop checkout develop commit id:\"ash\" tag:\"abc\" branch featureB checkout featureB commit type:HIGHLIGHT checkout main checkout hotfix commit type:NORMAL checkout develop commit type:REVERSE checkout featureB commit checkout main merge hotfix checkout featureB commit checkout develop branch featureA commit checkout develop merge hotfix checkout featureA commit checkout featureB commit checkout develop merge featureA branch release checkout release commit checkout main commit checkout release merge main checkout develop merge release Dark Theme link %%{init: { 'logLevel': 'debug', 'theme': 'dark' } }%% gitGraph commit branch hotfix checkout hotfix commit branch develop checkout develop commit id:\"ash\" tag:\"abc\" branch featureB checkout featureB commit type:HIGHLIGHT checkout main checkout hotfix commit type:NORMAL checkout develop commit type:REVERSE checkout featureB commit checkout main merge hotfix checkout featureB commit checkout develop branch featureA commit checkout develop merge hotfix checkout featureA commit checkout featureB commit checkout develop merge featureA branch release checkout release commit checkout main commit checkout release merge main checkout develop merge release %%{init: { 'logLevel': 'debug', 'theme': 'dark' } }%% gitGraph commit branch hotfix checkout hotfix commit branch develop checkout develop commit id:\"ash\" tag:\"abc\" branch featureB checkout featureB commit type:HIGHLIGHT checkout main checkout hotfix commit type:NORMAL checkout develop commit type:REVERSE checkout featureB commit checkout main merge hotfix checkout featureB commit checkout develop branch featureA commit checkout develop merge hotfix checkout featureA commit checkout featureB commit checkout develop merge featureA branch release checkout release commit checkout main commit checkout release merge main checkout develop merge release Neutral Theme link %%{init: { 'logLevel': 'debug', 'theme': 'neutral' } }%% gitGraph commit branch hotfix checkout hotfix commit branch develop checkout develop commit id:\"ash\" tag:\"abc\" branch featureB checkout featureB commit type:HIGHLIGHT checkout main checkout hotfix commit type:NORMAL checkout develop commit type:REVERSE checkout featureB commit checkout main merge hotfix checkout featureB commit checkout develop branch featureA commit checkout develop merge hotfix checkout featureA commit checkout featureB commit checkout develop merge featureA branch release checkout release commit checkout main commit checkout release merge main checkout develop merge release %%{init: { 'logLevel': 'debug', 'theme': 'neutral' } }%% gitGraph commit branch hotfix checkout hotfix commit branch develop checkout develop commit id:\"ash\" tag:\"abc\" branch featureB checkout featureB commit type:HIGHLIGHT checkout main checkout hotfix commit type:NORMAL checkout develop commit type:REVERSE checkout featureB commit checkout main merge hotfix checkout featureB commit checkout develop branch featureA commit checkout develop merge hotfix checkout featureA commit checkout featureB commit checkout develop merge featureA branch release checkout release commit checkout main commit checkout release merge main checkout develop merge release Customize using Theme Variables linkMermaid allows you to customize your diagram using theme variables which govern the look and feel of various elements of the diagram.\nFor understanding let us take a sample diagram with theme default, the default values of the theme variables is picked automatically from the theme. Later on we will see how to override the default values of the theme variables.\nSee how the default theme is used to set the colors for the branches:\n%%{init: { 'logLevel': 'debug', 'theme': 'default' } }%% gitGraph commit branch develop commit tag:\"v1.0.0\" commit checkout main commit type: HIGHLIGHT commit merge develop commit branch featureA commit %%{init: { 'logLevel': 'debug', 'theme': 'default' } }%% gitGraph commit branch develop commit tag:\"v1.0.0\" commit checkout main commit type: HIGHLIGHT commit merge develop commit branch featureA commit IMPORTANT: linkMermaid supports the theme variables to override the default values for up to 8 branches, i.e., you can set the color/styling of up to 8 branches using theme variables. After this threshold of 8 branches, the theme variables are reused in the cyclic manner, i.e. the 9th branch will use the color/styling of the 1st branch, or the branch at index position â€˜8â€™ will use the color/styling of the branch at index position â€˜0â€™. More on this in the next section. See examples on Customizing branch label colors below\nCustomizing branch colors linkYou can customize the branch colors using the git0 to git7 theme variables. Mermaid allows you to set the colors for up-to 8 branches, where git0 variable will drive the value of the first branch, git1 will drive the value of the second branch and so on.\nNOTE: Default values for these theme variables are picked from the selected theme. If you want to override the default values, you can use the initialize call to add your custom theme variable values.\nExample:\nNow letâ€™s override the default values for the git0 to git3 variables:\n%%{init: { 'logLevel': 'debug', 'theme': 'default' , 'themeVariables': { 'git0': '#ff0000', 'git1': '#00ff00', 'git2': '#0000ff', 'git3': '#ff00ff', 'git4': '#00ffff', 'git5': '#ffff00', 'git6': '#ff00ff', 'git7': '#00ffff' } } }%% gitGraph commit branch develop commit tag:\"v1.0.0\" commit checkout main commit type: HIGHLIGHT commit merge develop commit branch featureA commit %%{init: { 'logLevel': 'debug', 'theme': 'default' , 'themeVariables': { 'git0': '#ff0000', 'git1': '#00ff00', 'git2': '#0000ff', 'git3': '#ff00ff', 'git4': '#00ffff', 'git5': '#ffff00', 'git6': '#ff00ff', 'git7': '#00ffff' } } }%% gitGraph commit branch develop commit tag:\"v1.0.0\" commit checkout main commit type: HIGHLIGHT commit merge develop commit branch featureA commit See how the branch colors are changed to the values specified in the theme variables.\nCustomizing branch label colors linkYou can customize the branch label colors using the gitBranchLabel0 to gitBranchLabel7 theme variables. Mermaid allows you to set the colors for up-to 8 branches, where gitBranchLabel0 variable will drive the value of the first branch label, gitBranchLabel1 will drive the value of the second branch label and so on.\nLets see how the default theme is used to set the colors for the branch labels:\nNow letâ€™s override the default values for the gitBranchLabel0 to gitBranchLabel2 variables:\n%%{init: { 'logLevel': 'debug', 'theme': 'default' , 'themeVariables': { 'gitBranchLabel0': '#ffffff', 'gitBranchLabel1': '#ffffff', 'gitBranchLabel2': '#ffffff', 'gitBranchLabel3': '#ffffff', 'gitBranchLabel4': '#ffffff', 'gitBranchLabel5': '#ffffff', 'gitBranchLabel6': '#ffffff', 'gitBranchLabel7': '#ffffff', 'gitBranchLabel8': '#ffffff', 'gitBranchLabel9': '#ffffff' } } }%% gitGraph checkout main branch branch1 branch branch2 branch branch3 branch branch4 branch branch5 branch branch6 branch branch7 branch branch8 branch branch9 checkout branch1 commit %%{init: { 'logLevel': 'debug', 'theme': 'default' , 'themeVariables': { 'gitBranchLabel0': '#ffffff', 'gitBranchLabel1': '#ffffff', 'gitBranchLabel2': '#ffffff', 'gitBranchLabel3': '#ffffff', 'gitBranchLabel4': '#ffffff', 'gitBranchLabel5': '#ffffff', 'gitBranchLabel6': '#ffffff', 'gitBranchLabel7': '#ffffff', 'gitBranchLabel8': '#ffffff', 'gitBranchLabel9': '#ffffff' } } }%% gitGraph checkout main branch branch1 branch branch2 branch branch3 branch branch4 branch branch5 branch branch6 branch branch7 branch branch8 branch branch9 checkout branch1 commit Here, you can see that branch8 and branch9 colors and the styles are being picked from branch at index position 0 (main) and 1(branch1) respectively, i.e., branch themeVariables are repeated cyclically.\nCustomizing Commit colors linkYou can customize commit using the commitLabelColor and commitLabelBackground theme variables for changes in the commit label color and background color respectively.\nExample: Now letâ€™s override the default values for the commitLabelColor to commitLabelBackground variables:\n%%{init: { 'logLevel': 'debug', 'theme': 'default' , 'themeVariables': { 'commitLabelColor': '#ff0000', 'commitLabelBackground': '#00ff00' } } }%% gitGraph commit branch develop commit tag:\"v1.0.0\" commit checkout main commit type: HIGHLIGHT commit merge develop commit branch featureA commit %%{init: { 'logLevel': 'debug', 'theme': 'default' , 'themeVariables': { 'commitLabelColor': '#ff0000', 'commitLabelBackground': '#00ff00' } } }%% gitGraph commit branch develop commit tag:\"v1.0.0\" commit checkout main commit type: HIGHLIGHT commit merge develop commit branch featureA commit See how the commit label color and background color are changed to the values specified in the theme variables.\nCustomizing Commit Label Font Size linkYou can customize commit using the commitLabelFontSize theme variables for changing in the font soze of the commit label .\nExample: Now letâ€™s override the default values for the commitLabelFontSize variable:\n%%{init: { 'logLevel': 'debug', 'theme': 'default' , 'themeVariables': { 'commitLabelColor': '#ff0000', 'commitLabelBackground': '#00ff00', 'commitLabelFontSize': '16px' } } }%% gitGraph commit branch develop commit tag:\"v1.0.0\" commit checkout main commit type: HIGHLIGHT commit merge develop commit branch featureA commit %%{init: { 'logLevel': 'debug', 'theme': 'default' , 'themeVariables': { 'commitLabelColor': '#ff0000', 'commitLabelBackground': '#00ff00', 'commitLabelFontSize': '16px' } } }%% gitGraph commit branch develop commit tag:\"v1.0.0\" commit checkout main commit type: HIGHLIGHT commit merge develop commit branch featureA commit See how the commit label font size changed.\nCustomizing Tag Label Font Size linkYou can customize commit using the tagLabelFontSize theme variables for changing in the font soze of the tag label .\nExample: Now letâ€™s override the default values for the tagLabelFontSize variable:\n%%{init: { 'logLevel': 'debug', 'theme': 'default' , 'themeVariables': { 'commitLabelColor': '#ff0000', 'commitLabelBackground': '#00ff00', 'tagLabelFontSize': '16px' } } }%% gitGraph commit branch develop commit tag:\"v1.0.0\" commit checkout main commit type: HIGHLIGHT commit merge develop commit branch featureA commit %%{init: { 'logLevel': 'debug', 'theme': 'default' , 'themeVariables': { 'commitLabelColor': '#ff0000', 'commitLabelBackground': '#00ff00', 'tagLabelFontSize': '16px' } } }%% gitGraph commit branch develop commit tag:\"v1.0.0\" commit checkout main commit type: HIGHLIGHT commit merge develop commit branch featureA commit See how the tag label font size changed.\nCustomizing Tag colors linkYou can customize tag using the tagLabelColor,tagLabelBackground and tagLabelBorder theme variables for changes in the tag label color,tag label background color and tag label border respectively. Example: Now letâ€™s override the default values for the tagLabelColor, tagLabelBackground and to tagLabelBorder variables:\n%%{init: { 'logLevel': 'debug', 'theme': 'default' , 'themeVariables': { 'tagLabelColor': '#ff0000', 'tagLabelBackground': '#00ff00', 'tagLabelBorder': '#0000ff' } } }%% gitGraph commit branch develop commit tag:\"v1.0.0\" commit checkout main commit type: HIGHLIGHT commit merge develop commit branch featureA commit %%{init: { 'logLevel': 'debug', 'theme': 'default' , 'themeVariables': { 'tagLabelColor': '#ff0000', 'tagLabelBackground': '#00ff00', 'tagLabelBorder': '#0000ff' } } }%% gitGraph commit branch develop commit tag:\"v1.0.0\" commit checkout main commit type: HIGHLIGHT commit merge develop commit branch featureA commit See how the tag colors are changed to the values specified in the theme variables.\nCustomizing Highlight commit colors linkYou can customize the highlight commit colors in relation to the branch it is on using the gitInv0 to gitInv7 theme variables. Mermaid allows you to set the colors for up-to 8 branches specific highlight commit, where gitInv0 variable will drive the value of the first branchâ€™s highlight commits, gitInv1 will drive the value of the second branchâ€™s highlight commit label and so on.\nExample:\nNow letâ€™s override the default values for the git0 to git3 variables:\n%%{init: { 'logLevel': 'debug', 'theme': 'default' , 'themeVariables': { 'gitInv0': '#ff0000' } } }%% gitGraph commit branch develop commit tag:\"v1.0.0\" commit checkout main commit type: HIGHLIGHT commit merge develop commit branch featureA commit %%{init: { 'logLevel': 'debug', 'theme': 'default' , 'themeVariables': { 'gitInv0': '#ff0000' } } }%% gitGraph commit branch develop commit tag:\"v1.0.0\" commit checkout main commit type: HIGHLIGHT commit merge develop commit branch featureA commit See how the highlighted commit color on the first branch is changed to the value specified in the theme variable gitInv0.\n"
            }
        );
    index.add(
            {
                id:  73 ,
                href: "\/docs\/mix\/mermaid\/",
                title: "Mermaid@v10.6.1 Syntax",
                description: "",
                content: ""
            }
        );
    index.add(
            {
                id:  74 ,
                href: "\/docs\/mix\/mermaid\/syntax\/mindmap\/",
                title: "Mindmap",
                description: "Mindmap link Mindmap: This is an experimental diagram for now. The syntax and properties can change in future releases. The syntax is stable except for the icon integration which is the experimental part.\nâ€œA mind map is a diagram used to visually organize information into a hierarchy, showing relationships among pieces of the whole. It is often created around a single concept, drawn as an image in the center of a blank page, to which associated representations of ideas such as images, words and parts of words are added. Major ideas are connected directly to the central concept, and other ideas branch out from those major ideas.â€ Wikipedia\n",
                content: "Mindmap link Mindmap: This is an experimental diagram for now. The syntax and properties can change in future releases. The syntax is stable except for the icon integration which is the experimental part.\nâ€œA mind map is a diagram used to visually organize information into a hierarchy, showing relationships among pieces of the whole. It is often created around a single concept, drawn as an image in the center of a blank page, to which associated representations of ideas such as images, words and parts of words are added. Major ideas are connected directly to the central concept, and other ideas branch out from those major ideas.â€ Wikipedia\nAn example of a mindmap. link mindmap root((mindmap)) Origins Long history ::icon(fa fa-book) Popularisation British popular psychology author Tony Buzan Research On effectivenessand features On Automatic creation Uses Creative techniques Strategic planning Argument mapping Tools Pen and paper Mermaid mindmap root((mindmap)) Origins Long history ::icon(fa fa-book) Popularisation British popular psychology author Tony Buzan Research On effectivenessand features On Automatic creation Uses Creative techniques Strategic planning Argument mapping Tools Pen and paper Mermaid Syntax linkThe syntax for creating Mindmaps is simple and relies on indentation for setting the levels in the hierarchy.\nIn the following example you can see how there are 3 different levels. One with starting at the left of the text and another level with two rows starting at the same column, defining the node A. At the end there is one more level where the text is indented further than the previous lines defining the nodes B and C.\nmindmap Root A B C In summary is a simple text outline where there is one node at the root level called Root which has one child A. A in turn has two children Band C. In the diagram below we can see this rendered as a mindmap.\nmindmap Root A B C mindmap Root A B C In this way we can use a text outline to generate a hierarchical mindmap.\nDifferent shapes linkMermaid mindmaps can show nodes using different shapes. When specifying a shape for a node the syntax is similar to flowchart nodes, with an id followed by the shape definition and with the text within the shape delimiters. Where possible we try/will try to keep the same shapes as for flowcharts, even though they are not all supported from the start.\nMindmap can show the following shapes:\nSquare link mindmap id[I am a square] mindmap id[I am a square] Rounded square link mindmap id(I am a rounded square) mindmap id(I am a rounded square) Circle link mindmap id((I am a circle)) mindmap id((I am a circle)) Bang link mindmap id))I am a bang(( mindmap id))I am a bang(( Cloud link mindmap id)I am a cloud( mindmap id)I am a cloud( Hexagon link mindmap id{{I am a hexagon}} mindmap id{{I am a hexagon}} Default link mindmap I am the default shape mindmap I am the default shape More shapes will be added, beginning with the shapes available in flowcharts.\nIcons and classes linkIcons linkAs with flowcharts you can add icons to your nodes but with an updated syntax. The styling for the font based icons are added during the integration so that they are available for the web page. This is not something a diagram author can do but has to be done with the site administrator or the integrator. Once the icon fonts are in place you add them to the mind map nodes using the ::icon() syntax. You place the classes for the icon within the parenthesis like in the following example where icons for material design and Font Awesome 5 are displayed. The intention is that this approach should be used for all diagrams supporting icons. Experimental feature: This wider scope is also the reason Mindmaps are experimental as this syntax and approach could change.\nmindmap Root A ::icon(fa fa-book) B(B) ::icon(mdi mdi-skull-outline) mindmap Root A ::icon(fa fa-book) B(B) ::icon(mdi mdi-skull-outline) Classes linkAgain the syntax for adding classes is similar to flowcharts. You can add classes using a triple colon following a number of css classes separated by space. In the following example one of the nodes has two custom classes attached urgent turning the background red and the text white and large increasing the font size:\nmindmap Root A[A] :::urgent large B(B) C mindmap Root A[A] :::urgent large B(B) C These classes need to be supplied by the site administrator.\nUnclear indentation linkThe actual indentation does not really matter only compared with the previous rows. If we take the previous example and disrupt it a little we can see how the calculations are performed. Let us start with placing C with a smaller indentation than B but larger then A.\nmindmap Root A B C This outline is unclear as B clearly is a child of A but when we move on to C the clarity is lost. C is not a child of B with a higher indentation nor does it have the same indentation as B. The only thing that is clear is that the first node with smaller indentation, indicating a parent, is A. Then Mermaid relies on this known truth and compensates for the unclear indentation and selects A as a parent of C leading till the same diagram with B and C as siblings.\nmindmap Root A B C mindmap Root A B C Markdown Strings linkThe â€œMarkdown Stringsâ€ feature enhances mind maps by offering a more versatile string type, which supports text formatting options such as bold and italics, and automatically wraps text within labels.\nmindmap id1[\"`**Root** with a second line Unicode works too: ğŸ¤“`\"] id2[\"`The dog in **the** hog... a *very long text* that wraps to a new line`\"] id3[Regular labels still works] mindmap id1[\"`**Root** with a second line Unicode works too: ğŸ¤“`\"] id2[\"`The dog in **the** hog... a *very long text* that wraps to a new line`\"] id3[Regular labels still works] Formatting:\nFor bold text, use double asterisks ** before and after the text. For italics, use single asterisks * before and after the text. With traditional strings, you needed to add tags for text to wrap in nodes. However, markdown strings automatically wrap text when it becomes too long and allows you to start a new line by simply using a newline character instead of a tag. Integrating with your library/website. linkMindmap uses the experimental lazy loading \u0026 async rendering features which could change in the future. From version 9.4.0 this diagram is included in mermaid but use lazy loading in order to keep the size of mermaid down. This is important in order to be able to add additional diagrams going forward.\nYou can still use the pre 9.4.0 method to add mermaid with mindmaps to a web page:\nFrom version 9.4.0 you can simplify this code to:\nYou can also refer the implementation in the live editor here to see how the async loading is done.\n"
            }
        );
    index.add(
            {
                id:  75 ,
                href: "\/docs\/mix\/mermaid\/syntax\/pie\/",
                title: "Pie chart diagrams",
                description: "Pie chart diagrams link A pie chart (or a circle chart) is a circular statistical graphic, which is divided into slices to illustrate numerical proportion. In a pie chart, the arc length of each slice (and consequently its central angle and area), is proportional to the quantity it represents. While it is named for its resemblance to a pie which has been sliced, there are variations on the way it can be presented. The earliest known pie chart is generally credited to William Playfairâ€™s Statistical Breviary of 1801 -Wikipedia\n",
                content: "Pie chart diagrams link A pie chart (or a circle chart) is a circular statistical graphic, which is divided into slices to illustrate numerical proportion. In a pie chart, the arc length of each slice (and consequently its central angle and area), is proportional to the quantity it represents. While it is named for its resemblance to a pie which has been sliced, there are variations on the way it can be presented. The earliest known pie chart is generally credited to William Playfairâ€™s Statistical Breviary of 1801 -Wikipedia\nMermaid can render Pie Chart diagrams.\npie title Pets adopted by volunteers \"Dogs\" : 386 \"Cats\" : 85 \"Rats\" : 15 pie title Pets adopted by volunteers \"Dogs\" : 386 \"Cats\" : 85 \"Rats\" : 15 Syntax linkDrawing a pie chart is really simple in mermaid.\nStart with pie keyword to begin the diagram showData to render the actual data values after the legend text. This is OPTIONAL Followed by title keyword and its value in string to give a title to the pie-chart. This is OPTIONAL Followed by dataSet. Pie slices will be ordered clockwise in the same order as the labels. label for a section in the pie diagram within \" \" quotes. Followed by : colon as separator Followed by positive numeric value (supported up to two decimal places) [pie] [showData] (OPTIONAL) [title] [titlevalue] (OPTIONAL) â€œ[datakey1]â€ : [dataValue1] â€œ[datakey2]â€ : [dataValue2] â€œ[datakey3]â€ : [dataValue3] . .\nExample link %%{init: {\"pie\": {\"textPosition\": 0.5}, \"themeVariables\": {\"pieOuterStrokeWidth\": \"5px\"}} }%% pie showData title Key elements in Product X \"Calcium\" : 42.96 \"Potassium\" : 50.05 \"Magnesium\" : 10.01 \"Iron\" : 5 %%{init: {\"pie\": {\"textPosition\": 0.5}, \"themeVariables\": {\"pieOuterStrokeWidth\": \"5px\"}} }%% pie showData title Key elements in Product X \"Calcium\" : 42.96 \"Potassium\" : 50.05 \"Magnesium\" : 10.01 \"Iron\" : 5 Configuration linkPossible pie diagram configuration parameters:\nParameter Description Default value textPosition The axial position of the pie slice labels, from 0.0 at the center to 1.0 at the outside edge of the circle. 0.75 "
            }
        );
    index.add(
            {
                id:  76 ,
                href: "\/docs\/mix\/mermaid\/syntax\/quadrantchart\/",
                title: "Quadrant Chart",
                description: "Quadrant Chart link A quadrant chart is a visual representation of data that is divided into four quadrants. It is used to plot data points on a two-dimensional grid, with one variable represented on the x-axis and another variable represented on the y-axis. The quadrants are determined by dividing the chart into four equal parts based on a set of criteria that is specific to the data being analyzed. Quadrant charts are often used to identify patterns and trends in data, and to prioritize actions based on the position of data points within the chart. They are commonly used in business, marketing, and risk management, among other fields.\n",
                content: "Quadrant Chart link A quadrant chart is a visual representation of data that is divided into four quadrants. It is used to plot data points on a two-dimensional grid, with one variable represented on the x-axis and another variable represented on the y-axis. The quadrants are determined by dividing the chart into four equal parts based on a set of criteria that is specific to the data being analyzed. Quadrant charts are often used to identify patterns and trends in data, and to prioritize actions based on the position of data points within the chart. They are commonly used in business, marketing, and risk management, among other fields.\nExample link quadrantChart title Reach and engagement of campaigns x-axis Low Reach --\u003e High Reach y-axis Low Engagement --\u003e High Engagement quadrant-1 We should expand quadrant-2 Need to promote quadrant-3 Re-evaluate quadrant-4 May be improved Campaign A: [0.3, 0.6] Campaign B: [0.45, 0.23] Campaign C: [0.57, 0.69] Campaign D: [0.78, 0.34] Campaign E: [0.40, 0.34] Campaign F: [0.35, 0.78] quadrantChart title Reach and engagement of campaigns x-axis Low Reach --\u003e High Reach y-axis Low Engagement --\u003e High Engagement quadrant-1 We should expand quadrant-2 Need to promote quadrant-3 Re-evaluate quadrant-4 May be improved Campaign A: [0.3, 0.6] Campaign B: [0.45, 0.23] Campaign C: [0.57, 0.69] Campaign D: [0.78, 0.34] Campaign E: [0.40, 0.34] Campaign F: [0.35, 0.78] Syntax link Note If there are no points available in the chart both axis text and quadrant will be rendered in the center of the respective quadrant. If there are points x-axis labels will rendered from the left of the respective quadrant also they will be displayed at the bottom of the chart, and y-axis labels will be rendered at the bottom of the respective quadrant, the quadrant text will render at the top of the respective quadrant.\nNote For points x and y value min value is 0 and max value is 1.\nTitle linkThe title is a short description of the chart and it will always render on top of the chart.\nExample linkquadrantChart title This is a sample example x-axis linkThe x-axis determines what text would be displayed in the x-axis. In x-axis there is two part left and right you can pass both or you can pass only left. The statement should start with x-axis then the left axis text followed by the delimiter --\u003e then right axis text.\nExample link x-axis --\u003e both the left and right axis text will be rendered. x-axis only the left axis text will be rendered. y-axis linkThe y-axis determines what text would be displayed in the y-axis. In y-axis there is two part top and bottom you can pass both or you can pass only bottom. The statement should start with y-axis then the bottom axis text followed by the delimiter --\u003e then top axis text.\nExample link y-axis --\u003e both the bottom and top axis text will be rendered. y-axis only the bottom axis text will be rendered. Quadrants text linkThe quadrant-[1,2,3,4] determine what text would be displayed inside the quadrants.\nExample link quadrant-1 determine what text will be rendered inside the top right quadrant. quadrant-2 determine what text will be rendered inside the top left quadrant. quadrant-3 determine what text will be rendered inside the bottom left quadrant. quadrant-4 determine what text will be rendered inside the bottom right quadrant. Points linkPoints are used to plot a circle inside the quadrantChart. The syntax is : [x, y] here x and y value is in the range 0 - 1.\nExample link Point 1: [0.75, 0.80] here the Point 1 will be drawn in the top right quadrant. Point 2: [0.35, 0.24] here the Point 2 will be drawn in the bottom left quadrant. Chart Configurations link Parameter Description Default value chartWidth Width of the chart 500 chartHeight Height of the chart 500 titlePadding Top and Bottom padding of the title 10 titleFontSize Title font size 20 quadrantPadding Padding outside all the quadrants 5 quadrantTextTopPadding Quadrant text top padding when text is drawn on top ( not data points are there) 5 quadrantLabelFontSize Quadrant text font size 16 quadrantInternalBorderStrokeWidth Border stroke width inside the quadrants 1 quadrantExternalBorderStrokeWidth Quadrant external border stroke width 2 xAxisLabelPadding Top and bottom padding of x-axis text 5 xAxisLabelFontSize X-axis texts font size 16 xAxisPosition Position of x-axis (top , bottom) if there are points the x-axis will always be rendered in bottom â€™top' yAxisLabelPadding Left and Right padding of y-axis text 5 yAxisLabelFontSize Y-axis texts font size 16 yAxisPosition Position of y-axis (left , right) â€™left' pointTextPadding Padding between point and the below text 5 pointLabelFontSize Point text font size 12 pointRadius Radius of the point to be drawn 5 Chart Theme Variables link Parameter Description quadrant1Fill Fill color of the top right quadrant quadrant2Fill Fill color of the top left quadrant quadrant3Fill Fill color of the bottom left quadrant quadrant4Fill Fill color of the bottom right quadrant quadrant1TextFill Text color of the top right quadrant quadrant2TextFill Text color of the top left quadrant quadrant3TextFill Text color of the bottom left quadrant quadrant4TextFill Text color of the bottom right quadrant quadrantPointFill Points fill color quadrantPointTextFill Points text color quadrantXAxisTextFill X-axis text color quadrantYAxisTextFill Y-axis text color quadrantInternalBorderStrokeFill Quadrants inner border color quadrantExternalBorderStrokeFill Quadrants outer border color quadrantTitleFill Title color Example on config and theme link %%{init: {\"quadrantChart\": {\"chartWidth\": 400, \"chartHeight\": 400}, \"themeVariables\": {\"quadrant1TextFill\": \"#ff0000\"} }}%% quadrantChart x-axis Urgent --\u003e Not Urgent y-axis Not Important --\u003e \"Important â¤\" quadrant-1 Plan quadrant-2 Do quadrant-3 Delegate quadrant-4 Delete %%{init: {\"quadrantChart\": {\"chartWidth\": 400, \"chartHeight\": 400}, \"themeVariables\": {\"quadrant1TextFill\": \"#ff0000\"} }}%% quadrantChart x-axis Urgent --\u003e Not Urgent y-axis Not Important --\u003e \"Important â¤\" quadrant-1 Plan quadrant-2 Do quadrant-3 Delegate quadrant-4 Delete "
            }
        );
    index.add(
            {
                id:  77 ,
                href: "\/docs\/mix\/mermaid\/syntax\/requirementdiagram\/",
                title: "Requirement Diagram",
                description: "Requirement Diagram link A Requirement diagram provides a visualization for requirements and their connections, to each other and other documented elements. The modeling specs follow those defined by SysML v1.6.\nRendering requirements is straightforward.\nrequirementDiagram requirement test_req { id: 1 text: the test text. risk: high verifymethod: test } element test_entity { type: simulation } test_entity - satisfies -\u003e test_req requirementDiagram requirement test_req { id: 1 text: the test text. risk: high verifymethod: test } element test_entity { type: simulation } test_entity - satisfies -\u003e test_req Syntax linkThere are three types of components to a requirement diagram: requirement, element, and relationship.\n",
                content: "Requirement Diagram link A Requirement diagram provides a visualization for requirements and their connections, to each other and other documented elements. The modeling specs follow those defined by SysML v1.6.\nRendering requirements is straightforward.\nrequirementDiagram requirement test_req { id: 1 text: the test text. risk: high verifymethod: test } element test_entity { type: simulation } test_entity - satisfies -\u003e test_req requirementDiagram requirement test_req { id: 1 text: the test text. risk: high verifymethod: test } element test_entity { type: simulation } test_entity - satisfies -\u003e test_req Syntax linkThere are three types of components to a requirement diagram: requirement, element, and relationship.\nThe grammar for defining each is defined below. Words denoted in angle brackets, such as , are enumerated keywords that have options elaborated in a table. user_defined_... is use in any place where user input is expected.\nAn important note on user text: all input can be surrounded in quotes or not. For example, both Id: \"here is an example\" and Id: here is an example are both valid. However, users must be careful with unquoted input. The parser will fail if another keyword is detected.\nRequirement linkA requirement definition contains a requirement type, name, id, text, risk, and verification method. The syntax follows:\nuser_defined_name { id: user_defined_id text: user_defined text risk: verifymethod: } Type, risk, and method are enumerations defined in SysML.\nKeyword Options Type requirement, functionalRequirement, interfaceRequirement, performanceRequirement, physicalRequirement, designConstraint Risk Low, Medium, High VerificationMethod Analysis, Inspection, Test, Demonstration Element linkAn element definition contains an element name, type, and document reference. These three are all user defined. The element feature is intended to be lightweight but allow requirements to be connected to portions of other documents.\nelement user_defined_name { type: user_defined_type docref: user_defined_ref } Relationship linkRelationships are comprised of a source node, destination node, and relationship type.\nEach follows the definition format of\n{name of source} - -\u003e {name of destination} or\n{name of destination} \u003c- - {name of source} â€œname of sourceâ€ and â€œname of destinationâ€ should be names of requirement or element nodes defined elsewhere.\nA relationship type can be one of contains, copies, derives, satisfies, verifies, refines, or traces.\nEach relationship is labeled in the diagram.\nLarger Example linkThis example uses all features of the diagram.\nrequirementDiagram requirement test_req { id: 1 text: the test text. risk: high verifymethod: test } functionalRequirement test_req2 { id: 1.1 text: the second test text. risk: low verifymethod: inspection } performanceRequirement test_req3 { id: 1.2 text: the third test text. risk: medium verifymethod: demonstration } interfaceRequirement test_req4 { id: 1.2.1 text: the fourth test text. risk: medium verifymethod: analysis } physicalRequirement test_req5 { id: 1.2.2 text: the fifth test text. risk: medium verifymethod: analysis } designConstraint test_req6 { id: 1.2.3 text: the sixth test text. risk: medium verifymethod: analysis } element test_entity { type: simulation } element test_entity2 { type: word doc docRef: reqs/test_entity } element test_entity3 { type: \"test suite\" docRef: github.com/all_the_tests } test_entity - satisfies -\u003e test_req2 test_req - traces -\u003e test_req2 test_req - contains -\u003e test_req3 test_req3 - contains -\u003e test_req4 test_req4 - derives -\u003e test_req5 test_req5 - refines -\u003e test_req6 test_entity3 - verifies -\u003e test_req5 test_req \u003c- copies - test_entity2 requirementDiagram requirement test_req { id: 1 text: the test text. risk: high verifymethod: test } functionalRequirement test_req2 { id: 1.1 text: the second test text. risk: low verifymethod: inspection } performanceRequirement test_req3 { id: 1.2 text: the third test text. risk: medium verifymethod: demonstration } interfaceRequirement test_req4 { id: 1.2.1 text: the fourth test text. risk: medium verifymethod: analysis } physicalRequirement test_req5 { id: 1.2.2 text: the fifth test text. risk: medium verifymethod: analysis } designConstraint test_req6 { id: 1.2.3 text: the sixth test text. risk: medium verifymethod: analysis } element test_entity { type: simulation } element test_entity2 { type: word doc docRef: reqs/test_entity } element test_entity3 { type: \"test suite\" docRef: github.com/all_the_tests } test_entity - satisfies -\u003e test_req2 test_req - traces -\u003e test_req2 test_req - contains -\u003e test_req3 test_req3 - contains -\u003e test_req4 test_req4 - derives -\u003e test_req5 test_req5 - refines -\u003e test_req6 test_entity3 - verifies -\u003e test_req5 test_req \u003c- copies - test_entity2 "
            }
        );
    index.add(
            {
                id:  78 ,
                href: "\/docs\/mix\/mermaid\/syntax\/sankey\/",
                title: "Sankey diagram (v10.3.0+)",
                description: "Sankey diagram (v10.3.0+) link A sankey diagram is a visualization used to depict a flow from one set of values to another.\nWarning This is an experimental diagram. Its syntax are very close to plain CSV, but it is to be extended in the nearest future.\nThe things being connected are called nodes and the connections are called links.\nExample linkThis example taken from observable. It may be rendered a little bit differently, though, in terms of size and colors.\n",
                content: "Sankey diagram (v10.3.0+) link A sankey diagram is a visualization used to depict a flow from one set of values to another.\nWarning This is an experimental diagram. Its syntax are very close to plain CSV, but it is to be extended in the nearest future.\nThe things being connected are called nodes and the connections are called links.\nExample linkThis example taken from observable. It may be rendered a little bit differently, though, in terms of size and colors.\n--- config: sankey: showValues: false --- sankey-beta Agricultural 'waste',Bio-conversion,124.729 Bio-conversion,Liquid,0.597 Bio-conversion,Losses,26.862 Bio-conversion,Solid,280.322 Bio-conversion,Gas,81.144 Biofuel imports,Liquid,35 Biomass imports,Solid,35 Coal imports,Coal,11.606 Coal reserves,Coal,63.965 Coal,Solid,75.571 District heating,Industry,10.639 District heating,Heating and cooling - commercial,22.505 District heating,Heating and cooling - homes,46.184 Electricity grid,Over generation / exports,104.453 Electricity grid,Heating and cooling - homes,113.726 Electricity grid,H2 conversion,27.14 Electricity grid,Industry,342.165 Electricity grid,Road transport,37.797 Electricity grid,Agriculture,4.412 Electricity grid,Heating and cooling - commercial,40.858 Electricity grid,Losses,56.691 Electricity grid,Rail transport,7.863 Electricity grid,Lighting \u0026 appliances - commercial,90.008 Electricity grid,Lighting \u0026 appliances - homes,93.494 Gas imports,Ngas,40.719 Gas reserves,Ngas,82.233 Gas,Heating and cooling - commercial,0.129 Gas,Losses,1.401 Gas,Thermal generation,151.891 Gas,Agriculture,2.096 Gas,Industry,48.58 Geothermal,Electricity grid,7.013 H2 conversion,H2,20.897 H2 conversion,Losses,6.242 H2,Road transport,20.897 Hydro,Electricity grid,6.995 Liquid,Industry,121.066 Liquid,International shipping,128.69 Liquid,Road transport,135.835 Liquid,Domestic aviation,14.458 Liquid,International aviation,206.267 Liquid,Agriculture,3.64 Liquid,National navigation,33.218 Liquid,Rail transport,4.413 Marine algae,Bio-conversion,4.375 Ngas,Gas,122.952 Nuclear,Thermal generation,839.978 Oil imports,Oil,504.287 Oil reserves,Oil,107.703 Oil,Liquid,611.99 Other waste,Solid,56.587 Other waste,Bio-conversion,77.81 Pumped heat,Heating and cooling - homes,193.026 Pumped heat,Heating and cooling - commercial,70.672 Solar PV,Electricity grid,59.901 Solar Thermal,Heating and cooling - homes,19.263 Solar,Solar Thermal,19.263 Solar,Solar PV,59.901 Solid,Agriculture,0.882 Solid,Thermal generation,400.12 Solid,Industry,46.477 Thermal generation,Electricity grid,525.531 Thermal generation,Losses,787.129 Thermal generation,District heating,79.329 Tidal,Electricity grid,9.452 UK land based bioenergy,Bio-conversion,182.01 Wave,Electricity grid,19.013 Wind,Electricity grid,289.366 --- config: sankey: showValues: false --- sankey-beta Agricultural 'waste',Bio-conversion,124.729 Bio-conversion,Liquid,0.597 Bio-conversion,Losses,26.862 Bio-conversion,Solid,280.322 Bio-conversion,Gas,81.144 Biofuel imports,Liquid,35 Biomass imports,Solid,35 Coal imports,Coal,11.606 Coal reserves,Coal,63.965 Coal,Solid,75.571 District heating,Industry,10.639 District heating,Heating and cooling - commercial,22.505 District heating,Heating and cooling - homes,46.184 Electricity grid,Over generation / exports,104.453 Electricity grid,Heating and cooling - homes,113.726 Electricity grid,H2 conversion,27.14 Electricity grid,Industry,342.165 Electricity grid,Road transport,37.797 Electricity grid,Agriculture,4.412 Electricity grid,Heating and cooling - commercial,40.858 Electricity grid,Losses,56.691 Electricity grid,Rail transport,7.863 Electricity grid,Lighting \u0026 appliances - commercial,90.008 Electricity grid,Lighting \u0026 appliances - homes,93.494 Gas imports,Ngas,40.719 Gas reserves,Ngas,82.233 Gas,Heating and cooling - commercial,0.129 Gas,Losses,1.401 Gas,Thermal generation,151.891 Gas,Agriculture,2.096 Gas,Industry,48.58 Geothermal,Electricity grid,7.013 H2 conversion,H2,20.897 H2 conversion,Losses,6.242 H2,Road transport,20.897 Hydro,Electricity grid,6.995 Liquid,Industry,121.066 Liquid,International shipping,128.69 Liquid,Road transport,135.835 Liquid,Domestic aviation,14.458 Liquid,International aviation,206.267 Liquid,Agriculture,3.64 Liquid,National navigation,33.218 Liquid,Rail transport,4.413 Marine algae,Bio-conversion,4.375 Ngas,Gas,122.952 Nuclear,Thermal generation,839.978 Oil imports,Oil,504.287 Oil reserves,Oil,107.703 Oil,Liquid,611.99 Other waste,Solid,56.587 Other waste,Bio-conversion,77.81 Pumped heat,Heating and cooling - homes,193.026 Pumped heat,Heating and cooling - commercial,70.672 Solar PV,Electricity grid,59.901 Solar Thermal,Heating and cooling - homes,19.263 Solar,Solar Thermal,19.263 Solar,Solar PV,59.901 Solid,Agriculture,0.882 Solid,Thermal generation,400.12 Solid,Industry,46.477 Thermal generation,Electricity grid,525.531 Thermal generation,Losses,787.129 Thermal generation,District heating,79.329 Tidal,Electricity grid,9.452 UK land based bioenergy,Bio-conversion,182.01 Wave,Electricity grid,19.013 Wind,Electricity grid,289.366 Syntax linkThe idea behind syntax is that a user types sankey-beta keyword first, then pastes raw CSV below and get the result.\nIt implements CSV standard as described here with subtle differences:\nCSV must contain 3 columns only It is allowed to have empty lines without comma separators for visual purposes Basic linkIt is implied that 3 columns inside CSV should represent source, target and value accordingly:\nsankey-beta %% source,target,value Electricity grid,Over generation / exports,104.453 Electricity grid,Heating and cooling - homes,113.726 Electricity grid,H2 conversion,27.14 sankey-beta %% source,target,value Electricity grid,Over generation / exports,104.453 Electricity grid,Heating and cooling - homes,113.726 Electricity grid,H2 conversion,27.14 Empty Lines linkCSV does not support empty lines without comma delimiters by default. But you can add them if needed:\nsankey-beta Bio-conversion,Losses,26.862 Bio-conversion,Solid,280.322 Bio-conversion,Gas,81.144 sankey-beta Bio-conversion,Losses,26.862 Bio-conversion,Solid,280.322 Bio-conversion,Gas,81.144 Commas linkIf you need to have a comma, wrap it in double quotes:\nsankey-beta Pumped heat,\"Heating and cooling, homes\",193.026 Pumped heat,\"Heating and cooling, commercial\",70.672 sankey-beta Pumped heat,\"Heating and cooling, homes\",193.026 Pumped heat,\"Heating and cooling, commercial\",70.672 Double Quotes linkIf you need to have double quote, put a pair of them inside quoted string:\nsankey-beta Pumped heat,\"Heating and cooling, \"\"homes\"\"\",193.026 Pumped heat,\"Heating and cooling, \"\"commercial\"\"\",70.672 sankey-beta Pumped heat,\"Heating and cooling, \"\"homes\"\"\",193.026 Pumped heat,\"Heating and cooling, \"\"commercial\"\"\",70.672 Configuration linkYou can customize link colors, node alignments and diagram dimensions.\nLinks Coloring linkYou can adjust linksâ€™ color by setting linkColor to one of those:\nsource - link will be of a source node color target - link will be of a target node color gradient - link color will be smoothly transient between source and target node colors hex code of color, like #a1a1a1 Node Alignment linkGraph layout can be changed by setting nodeAlignment to:\njustify center left right "
            }
        );
    index.add(
            {
                id:  79 ,
                href: "\/docs\/mix\/mermaid\/syntax\/sequencediagram\/",
                title: "Sequence diagrams",
                description: "Sequence diagrams link A Sequence diagram is an interaction diagram that shows how processes operate with one another and in what order.\nMermaid can render sequence diagrams.\nsequenceDiagram Alice-\u003e\u003eJohn: Hello John, how are you? John--\u003e\u003eAlice: Great! Alice-)John: See you later! sequenceDiagram Alice-\u003e\u003eJohn: Hello John, how are you? John--\u003e\u003eAlice: Great! Alice-)John: See you later! Note A note on nodes, the word â€œendâ€ could potentially break the diagram, due to the way that the mermaid language is scripted.\n",
                content: "Sequence diagrams link A Sequence diagram is an interaction diagram that shows how processes operate with one another and in what order.\nMermaid can render sequence diagrams.\nsequenceDiagram Alice-\u003e\u003eJohn: Hello John, how are you? John--\u003e\u003eAlice: Great! Alice-)John: See you later! sequenceDiagram Alice-\u003e\u003eJohn: Hello John, how are you? John--\u003e\u003eAlice: Great! Alice-)John: See you later! Note A note on nodes, the word â€œendâ€ could potentially break the diagram, due to the way that the mermaid language is scripted.\nIf unavoidable, one must use parentheses(), quotation marks â€œâ€, or brackets {},[], to enclose the word â€œendâ€. i.e : (end), [end], {end}.\nSyntax linkParticipants linkThe participants can be defined implicitly as in the first example on this page. The participants or actors are rendered in order of appearance in the diagram source text. Sometimes you might want to show the participants in a different order than how they appear in the first message. It is possible to specify the actorâ€™s order of appearance by doing the following:\nsequenceDiagram participant Alice participant Bob Alice-\u003e\u003eBob: Hi Bob Bob-\u003e\u003eAlice: Hi Alice sequenceDiagram participant Alice participant Bob Alice-\u003e\u003eBob: Hi Bob Bob-\u003e\u003eAlice: Hi Alice Actors linkIf you specifically want to use the actor symbol instead of a rectangle with text you can do so by using actor statements as per below.\nsequenceDiagram actor Alice actor Bob Alice-\u003e\u003eBob: Hi Bob Bob-\u003e\u003eAlice: Hi Alice sequenceDiagram actor Alice actor Bob Alice-\u003e\u003eBob: Hi Bob Bob-\u003e\u003eAlice: Hi Alice Aliases linkThe actor can have a convenient identifier and a descriptive label.\nsequenceDiagram participant A as Alice participant J as John A-\u003e\u003eJ: Hello John, how are you? J-\u003e\u003eA: Great! sequenceDiagram participant A as Alice participant J as John A-\u003e\u003eJ: Hello John, how are you? J-\u003e\u003eA: Great! Actor Creation and Destruction (v10.3.0+) linkIt is possible to create and destroy actors by messages. To do so, add a create or destroy directive before the message.\ncreate participant B A --\u003e B: Hello Create directives support actor/participant distinction and aliases. The sender or the recipient of a message can be destroyed but only the recipient can be created.\nsequenceDiagram Alice-\u003e\u003eBob: Hello Bob, how are you ? Bob-\u003e\u003eAlice: Fine, thank you. And you? create participant Carl Alice-\u003e\u003eCarl: Hi Carl! create actor D as Donald Carl-\u003e\u003eD: Hi! destroy Carl Alice-xCarl: We are too many destroy Bob Bob-\u003e\u003eAlice: I agree sequenceDiagram Alice-\u003e\u003eBob: Hello Bob, how are you ? Bob-\u003e\u003eAlice: Fine, thank you. And you? create participant Carl Alice-\u003e\u003eCarl: Hi Carl! create actor D as Donald Carl-\u003e\u003eD: Hi! destroy Carl Alice-xCarl: We are too many destroy Bob Bob-\u003e\u003eAlice: I agree Grouping / Box linkThe actor(s) can be grouped in vertical boxes. You can define a color (if not, it will be transparent) and/or a descriptive label using the following notation:\nbox Aqua Group Description ... actors ... end box Group without description ... actors ... end box rgb(33,66,99) ... actors ... end Note If your group name is a color you can force the color to be transparent:\nbox transparent Aqua ... actors ... end sequenceDiagram box Purple Alice \u0026 John participant A participant J end box Another Group participant B participant C end A-\u003e\u003eJ: Hello John, how are you? J-\u003e\u003eA: Great! A-\u003e\u003eB: Hello Bob, how is Charly? B-\u003e\u003eC: Hello Charly, how are you? sequenceDiagram box Purple Alice \u0026 John participant A participant J end box Another Group participant B participant C end A-\u003e\u003eJ: Hello John, how are you? J-\u003e\u003eA: Great! A-\u003e\u003eB: Hello Bob, how is Charly? B-\u003e\u003eC: Hello Charly, how are you? Messages linkMessages can be of two displayed either solid or with a dotted line.\n[Actor][Arrow][Actor]:Message text There are six types of arrows currently supported:\nType Description -\u003e Solid line without arrow --\u003e Dotted line without arrow -\u003e\u003e Solid line with arrowhead --\u003e\u003e Dotted line with arrowhead -x Solid line with a cross at the end --x Dotted line with a cross at the end. -) Solid line with an open arrow at the end (async) --) Dotted line with a open arrow at the end (async) Activations linkIt is possible to activate and deactivate an actor. (de)activation can be dedicated declarations:\nsequenceDiagram Alice-\u003e\u003eJohn: Hello John, how are you? activate John John--\u003e\u003eAlice: Great! deactivate John sequenceDiagram Alice-\u003e\u003eJohn: Hello John, how are you? activate John John--\u003e\u003eAlice: Great! deactivate John There is also a shortcut notation by appending +/- suffix to the message arrow:\nsequenceDiagram Alice-\u003e\u003e+John: Hello John, how are you? John--\u003e\u003e-Alice: Great! sequenceDiagram Alice-\u003e\u003e+John: Hello John, how are you? John--\u003e\u003e-Alice: Great! Activations can be stacked for same actor:\nsequenceDiagram Alice-\u003e\u003e+John: Hello John, how are you? Alice-\u003e\u003e+John: John, can you hear me? John--\u003e\u003e-Alice: Hi Alice, I can hear you! John--\u003e\u003e-Alice: I feel great! sequenceDiagram Alice-\u003e\u003e+John: Hello John, how are you? Alice-\u003e\u003e+John: John, can you hear me? John--\u003e\u003e-Alice: Hi Alice, I can hear you! John--\u003e\u003e-Alice: I feel great! Notes linkIt is possible to add notes to a sequence diagram. This is done by the notation Note [ right of | left of | over ] [Actor]: Text in note content\nSee the example below:\nsequenceDiagram participant John Note right of John: Text in note sequenceDiagram participant John Note right of John: Text in note It is also possible to create notes spanning two participants:\nsequenceDiagram Alice-\u003eJohn: Hello John, how are you? Note over Alice,John: A typical interaction sequenceDiagram Alice-\u003eJohn: Hello John, how are you? Note over Alice,John: A typical interaction It is also possible to add a line break (applies to text input in general):\nsequenceDiagram Alice-\u003eJohn: Hello John, how are you? Note over Alice,John: A typical interactionBut now in two lines sequenceDiagram Alice-\u003eJohn: Hello John, how are you? Note over Alice,John: A typical interactionBut now in two lines Loops linkIt is possible to express loops in a sequence diagram. This is done by the notation\nloop Loop text ... statements ... end See the example below:\nsequenceDiagram Alice-\u003eJohn: Hello John, how are you? loop Every minute John--\u003eAlice: Great! end sequenceDiagram Alice-\u003eJohn: Hello John, how are you? loop Every minute John--\u003eAlice: Great! end Alt linkIt is possible to express alternative paths in a sequence diagram. This is done by the notation\nalt Describing text ... statements ... else ... statements ... end or if there is sequence that is optional (if without else).\nopt Describing text ... statements ... end See the example below:\nsequenceDiagram Alice-\u003e\u003eBob: Hello Bob, how are you? alt is sick Bob-\u003e\u003eAlice: Not so good :( else is well Bob-\u003e\u003eAlice: Feeling fresh like a daisy end opt Extra response Bob-\u003e\u003eAlice: Thanks for asking end sequenceDiagram Alice-\u003e\u003eBob: Hello Bob, how are you? alt is sick Bob-\u003e\u003eAlice: Not so good :( else is well Bob-\u003e\u003eAlice: Feeling fresh like a daisy end opt Extra response Bob-\u003e\u003eAlice: Thanks for asking end Parallel linkIt is possible to show actions that are happening in parallel.\nThis is done by the notation\npar [Action 1] ... statements ... and [Action 2] ... statements ... and [Action N] ... statements ... end See the example below:\nsequenceDiagram par Alice to Bob Alice-\u003e\u003eBob: Hello guys! and Alice to John Alice-\u003e\u003eJohn: Hello guys! end Bob--\u003e\u003eAlice: Hi Alice! John--\u003e\u003eAlice: Hi Alice! sequenceDiagram par Alice to Bob Alice-\u003e\u003eBob: Hello guys! and Alice to John Alice-\u003e\u003eJohn: Hello guys! end Bob--\u003e\u003eAlice: Hi Alice! John--\u003e\u003eAlice: Hi Alice! It is also possible to nest parallel blocks.\nsequenceDiagram par Alice to Bob Alice-\u003e\u003eBob: Go help John and Alice to John Alice-\u003e\u003eJohn: I want this done today par John to Charlie John-\u003e\u003eCharlie: Can we do this today? and John to Diana John-\u003e\u003eDiana: Can you help us today? end end sequenceDiagram par Alice to Bob Alice-\u003e\u003eBob: Go help John and Alice to John Alice-\u003e\u003eJohn: I want this done today par John to Charlie John-\u003e\u003eCharlie: Can we do this today? and John to Diana John-\u003e\u003eDiana: Can you help us today? end end Critical Region linkIt is possible to show actions that must happen automatically with conditional handling of circumstances.\nThis is done by the notation\ncritical [Action that must be performed] ... statements ... option [Circumstance A] ... statements ... option [Circumstance B] ... statements ... end See the example below:\nsequenceDiagram critical Establish a connection to the DB Service--\u003eDB: connect option Network timeout Service--\u003eService: Log error option Credentials rejected Service--\u003eService: Log different error end sequenceDiagram critical Establish a connection to the DB Service--\u003eDB: connect option Network timeout Service--\u003eService: Log error option Credentials rejected Service--\u003eService: Log different error end It is also possible to have no options at all\nsequenceDiagram critical Establish a connection to the DB Service--\u003eDB: connect end sequenceDiagram critical Establish a connection to the DB Service--\u003eDB: connect end This critical block can also be nested, equivalently to the par statement as seen above.\nBreak linkIt is possible to indicate a stop of the sequence within the flow (usually used to model exceptions).\nThis is done by the notation\nbreak [something happened] ... statements ... end See the example below:\nsequenceDiagram Consumer--\u003eAPI: Book something API--\u003eBookingService: Start booking process break when the booking process fails API--\u003eConsumer: show failure end API--\u003eBillingService: Start billing process sequenceDiagram Consumer--\u003eAPI: Book something API--\u003eBookingService: Start booking process break when the booking process fails API--\u003eConsumer: show failure end API--\u003eBillingService: Start billing process Background Highlighting linkIt is possible to highlight flows by providing colored background rects. This is done by the notation\nThe colors are defined using rgb and rgba syntax.\nrect rgb(0, 255, 0) ... content ... end rect rgba(0, 0, 255, .1) ... content ... end See the examples below:\nsequenceDiagram participant Alice participant John rect rgb(191, 223, 255) note right of Alice: Alice calls John. Alice-\u003e\u003e+John: Hello John, how are you? rect rgb(200, 150, 255) Alice-\u003e\u003e+John: John, can you hear me? John--\u003e\u003e-Alice: Hi Alice, I can hear you! end John--\u003e\u003e-Alice: I feel great! end Alice -\u003e\u003e+ John: Did you want to go to the game tonight? John --\u003e\u003e- Alice: Yeah! See you there. sequenceDiagram participant Alice participant John rect rgb(191, 223, 255) note right of Alice: Alice calls John. Alice-\u003e\u003e+John: Hello John, how are you? rect rgb(200, 150, 255) Alice-\u003e\u003e+John: John, can you hear me? John--\u003e\u003e-Alice: Hi Alice, I can hear you! end John--\u003e\u003e-Alice: I feel great! end Alice -\u003e\u003e+ John: Did you want to go to the game tonight? John --\u003e\u003e- Alice: Yeah! See you there. Comments linkComments can be entered within a sequence diagram, which will be ignored by the parser. Comments need to be on their own line, and must be prefaced with %% (double percent signs). Any text after the start of the comment to the next newline will be treated as a comment, including any diagram syntax\nsequenceDiagram Alice-\u003e\u003eJohn: Hello John, how are you? %% this is a comment John--\u003e\u003eAlice: Great! sequenceDiagram Alice-\u003e\u003eJohn: Hello John, how are you? %% this is a comment John--\u003e\u003eAlice: Great! Entity codes to escape characters linkIt is possible to escape characters using the syntax exemplified here.\nsequenceDiagram A-\u003e\u003eB: I #9829; you! B-\u003e\u003eA: I #9829; you #infin; times more! sequenceDiagram A-\u003e\u003eB: I #9829; you! B-\u003e\u003eA: I #9829; you #infin; times more! Numbers given are base 10, so # can be encoded as #35;. It is also supported to use HTML character names.\nBecause semicolons can be used instead of line breaks to define the markup, you need to use #59; to include a semicolon in message text.\nsequenceNumbers linkIt is possible to get a sequence number attached to each arrow in a sequence diagram. This can be configured when adding mermaid to the website as shown below:\nIt can also be turned on via the diagram code as in the diagram:\nsequenceDiagram autonumber Alice-\u003e\u003eJohn: Hello John, how are you? loop Healthcheck John-\u003e\u003eJohn: Fight against hypochondria end Note right of John: Rational thoughts! John--\u003e\u003eAlice: Great! John-\u003e\u003eBob: How about you? Bob--\u003e\u003eJohn: Jolly good! sequenceDiagram autonumber Alice-\u003e\u003eJohn: Hello John, how are you? loop Healthcheck John-\u003e\u003eJohn: Fight against hypochondria end Note right of John: Rational thoughts! John--\u003e\u003eAlice: Great! John-\u003e\u003eBob: How about you? Bob--\u003e\u003eJohn: Jolly good! Actor Menus linkActors can have popup-menus containing individualized links to external pages. For example, if an actor represented a web service, useful links might include a link to the service health dashboard, repo containing the code for the service, or a wiki page describing the service.\nThis can be configured by adding one or more link lines with the format:\nlink : @ sequenceDiagram participant Alice participant John link Alice: Dashboard @ https://dashboard.contoso.com/alice link Alice: Wiki @ https://wiki.contoso.com/alice link John: Dashboard @ https://dashboard.contoso.com/john link John: Wiki @ https://wiki.contoso.com/john Alice-\u003e\u003eJohn: Hello John, how are you? John--\u003e\u003eAlice: Great! Alice-)John: See you later! sequenceDiagram participant Alice participant John link Alice: Dashboard @ https://dashboard.contoso.com/alice link Alice: Wiki @ https://wiki.contoso.com/alice link John: Dashboard @ https://dashboard.contoso.com/john link John: Wiki @ https://wiki.contoso.com/john Alice-\u003e\u003eJohn: Hello John, how are you? John--\u003e\u003eAlice: Great! Alice-)John: See you later! Advanced Menu Syntax linkThere is an advanced syntax that relies on JSON formatting. If you are comfortable with JSON format, then this exists as well.\nThis can be configured by adding the links lines with the format:\nlinks : An example is below:\nsequenceDiagram participant Alice participant John links Alice: {\"Dashboard\": \"https://dashboard.contoso.com/alice\", \"Wiki\": \"https://wiki.contoso.com/alice\"} links John: {\"Dashboard\": \"https://dashboard.contoso.com/john\", \"Wiki\": \"https://wiki.contoso.com/john\"} Alice-\u003e\u003eJohn: Hello John, how are you? John--\u003e\u003eAlice: Great! Alice-)John: See you later! sequenceDiagram participant Alice participant John links Alice: {\"Dashboard\": \"https://dashboard.contoso.com/alice\", \"Wiki\": \"https://wiki.contoso.com/alice\"} links John: {\"Dashboard\": \"https://dashboard.contoso.com/john\", \"Wiki\": \"https://wiki.contoso.com/john\"} Alice-\u003e\u003eJohn: Hello John, how are you? John--\u003e\u003eAlice: Great! Alice-)John: See you later! Styling linkStyling of a sequence diagram is done by defining a number of css classes. During rendering these classes are extracted from the file located at src/themes/sequence.scss\nClasses used link Class Description actor Style for the actor box at the top of the diagram. text.actor Styles for text in the actor box at the top of the diagram. actor-line The vertical line for an actor. messageLine0 Styles for the solid message line. messageLine1 Styles for the dotted message line. messageText Defines styles for the text on the message arrows. labelBox Defines styles label to left in a loop. labelText Styles for the text in label for loops. loopText Styles for the text in the loop box. loopLine Defines styles for the lines in the loop box. note Styles for the note box. noteText Styles for the text on in the note boxes. Sample stylesheet link body { background: white; } .actor { stroke: #ccccff; fill: #ececff; } text.actor { fill: black; stroke: none; font-family: Helvetica; } .actor-line { stroke: grey; } .messageLine0 { stroke-width: 1.5; stroke-dasharray: '2 2'; marker-end: 'url(#arrowhead)'; stroke: black; } .messageLine1 { stroke-width: 1.5; stroke-dasharray: '2 2'; stroke: black; } #arrowhead { fill: black; } .messageText { fill: black; stroke: none; font-family: 'trebuchet ms', verdana, arial; font-size: 14px; } .labelBox { stroke: #ccccff; fill: #ececff; } .labelText { fill: black; stroke: none; font-family: 'trebuchet ms', verdana, arial; } .loopText { fill: black; stroke: none; font-family: 'trebuchet ms', verdana, arial; } .loopLine { stroke-width: 2; stroke-dasharray: '2 2'; marker-end: 'url(#arrowhead)'; stroke: #ccccff; } .note { stroke: #decc93; fill: #fff5ad; } .noteText { fill: black; stroke: none; font-family: 'trebuchet ms', verdana, arial; font-size: 14px; } Configuration linkIt is possible to adjust the margins for rendering the sequence diagram.\nThis is done by defining mermaid.sequenceConfig or by the CLI to use a json file with the configuration. How to use the CLI is described in the mermaidCLI page. mermaid.sequenceConfig can be set to a JSON string with config parameters or the corresponding object.\nmermaid.sequenceConfig = { diagramMarginX: 50, diagramMarginY: 10, boxTextMargin: 5, noteMargin: 10, messageMargin: 35, mirrorActors: true, }; Possible configuration parameters: link Parameter Description Default value mirrorActors Turns on/off the rendering of actors below the diagram as well as above it false bottomMarginAdj Adjusts how far down the graph ended. Wide borders styles with css could generate unwanted clipping which is why this config param exists. 1 actorFontSize Sets the font size for the actorâ€™s description 14 actorFontFamily Sets the font family for the actorâ€™s description â€œOpen Sansâ€, sans-serif actorFontWeight Sets the font weight for the actorâ€™s description â€œOpen Sansâ€, sans-serif noteFontSize Sets the font size for actor-attached notes 14 noteFontFamily Sets the font family for actor-attached notes â€œtrebuchet msâ€, verdana, arial noteFontWeight Sets the font weight for actor-attached notes â€œtrebuchet msâ€, verdana, arial noteAlign Sets the text alignment for text in actor-attached notes center messageFontSize Sets the font size for actor\u003c-\u003eactor messages 16 messageFontFamily Sets the font family for actor\u003c-\u003eactor messages â€œtrebuchet msâ€, verdana, arial messageFontWeight Sets the font weight for actor\u003c-\u003eactor messages â€œtrebuchet msâ€, verdana, arial "
            }
        );
    index.add(
            {
                id:  80 ,
                href: "\/docs\/mix\/mermaid\/syntax\/statediagram\/",
                title: "State diagrams",
                description: "State diagrams link â€œA state diagram is a type of diagram used in computer science and related fields to describe the behavior of systems. State diagrams require that the system described is composed of a finite number of states; sometimes, this is indeed the case, while at other times this is a reasonable abstraction.â€ Wikipedia\nMermaid can render state diagrams. The syntax tries to be compliant with the syntax used in plantUml as this will make it easier for users to share diagrams between mermaid and plantUml.\n",
                content: "State diagrams link â€œA state diagram is a type of diagram used in computer science and related fields to describe the behavior of systems. State diagrams require that the system described is composed of a finite number of states; sometimes, this is indeed the case, while at other times this is a reasonable abstraction.â€ Wikipedia\nMermaid can render state diagrams. The syntax tries to be compliant with the syntax used in plantUml as this will make it easier for users to share diagrams between mermaid and plantUml.\n--- title: Simple sample --- stateDiagram-v2 [*] --\u003e Still Still --\u003e [*] Still --\u003e Moving Moving --\u003e Still Moving --\u003e Crash Crash --\u003e [*] --- title: Simple sample --- stateDiagram-v2 [*] --\u003e Still Still --\u003e [*] Still --\u003e Moving Moving --\u003e Still Moving --\u003e Crash Crash --\u003e [*] Older renderer:\nstateDiagram [*] --\u003e Still Still --\u003e [*] Still --\u003e Moving Moving --\u003e Still Moving --\u003e Crash Crash --\u003e [*] stateDiagram [*] --\u003e Still Still --\u003e [*] Still --\u003e Moving Moving --\u003e Still Moving --\u003e Crash Crash --\u003e [*] In state diagrams systems are described in terms of states and how one state can change to another state via a transition. The example diagram above shows three states: Still, Moving and Crash. You start in the Still state. From Still you can change to the Moving state. From Moving you can change either back to the Still state or to the Crash state. There is no transition from Still to Crash. (You canâ€™t crash if youâ€™re still.)\nStates linkA state can be declared in multiple ways. The simplest way is to define a state with just an id:\nstateDiagram-v2 stateId stateDiagram-v2 stateId Another way is by using the state keyword with a description as per below:\nstateDiagram-v2 state \"This is a state description\" as s2 stateDiagram-v2 state \"This is a state description\" as s2 Another way to define a state with a description is to define the state id followed by a colon and the description:\nstateDiagram-v2 s2 : This is a state description stateDiagram-v2 s2 : This is a state description Transitions linkTransitions are path/edges when one state passes into another. This is represented using text arrow, â€œâ€“\u003eâ€.\nWhen you define a transition between two states and the states are not already defined, the undefined states are defined with the id from the transition. You can later add descriptions to states defined this way.\nstateDiagram-v2 s1 --\u003e s2 stateDiagram-v2 s1 --\u003e s2 It is possible to add text to a transition to describe what it represents:\nstateDiagram-v2 s1 --\u003e s2: A transition stateDiagram-v2 s1 --\u003e s2: A transition Start and End linkThere are two special states indicating the start and stop of the diagram. These are written with the [*] syntax and the direction of the transition to it defines it either as a start or a stop state.\nstateDiagram-v2 [*] --\u003e s1 s1 --\u003e [*] stateDiagram-v2 [*] --\u003e s1 s1 --\u003e [*] Composite states linkIn a real world use of state diagrams you often end up with diagrams that are multidimensional as one state can have several internal states. These are called composite states in this terminology.\nIn order to define a composite state you need to use the state keyword followed by an id and the body of the composite state between {}. See the example below:\nstateDiagram-v2 [*] --\u003e First state First { [*] --\u003e second second --\u003e [*] } stateDiagram-v2 [*] --\u003e First state First { [*] --\u003e second second --\u003e [*] } You can do this in several layers:\nstateDiagram-v2 [*] --\u003e First state First { [*] --\u003e Second state Second { [*] --\u003e second second --\u003e Third state Third { [*] --\u003e third third --\u003e [*] } } } stateDiagram-v2 [*] --\u003e First state First { [*] --\u003e Second state Second { [*] --\u003e second second --\u003e Third state Third { [*] --\u003e third third --\u003e [*] } } } You can also define transitions also between composite states:\nstateDiagram-v2 [*] --\u003e First First --\u003e Second First --\u003e Third state First { [*] --\u003e fir fir --\u003e [*] } state Second { [*] --\u003e sec sec --\u003e [*] } state Third { [*] --\u003e thi thi --\u003e [*] } stateDiagram-v2 [*] --\u003e First First --\u003e Second First --\u003e Third state First { [*] --\u003e fir fir --\u003e [*] } state Second { [*] --\u003e sec sec --\u003e [*] } state Third { [*] --\u003e thi thi --\u003e [*] } You can not define transitions between internal states belonging to different composite states\nChoice linkSometimes you need to model a choice between two or more paths, you can do so using \u003c"
            }
        );
    index.add(
            {
                id:  81 ,
                href: "\/docs\/mix\/mermaid\/syntax\/timeline\/",
                title: "Timeline Diagram",
                description: "Timeline Diagram link Timeline: This is an experimental diagram for now. The syntax and properties can change in future releases. The syntax is stable except for the icon integration which is the experimental part.\nâ€œA timeline is a type of diagram used to illustrate a chronology of events, dates, or periods of time. It is usually presented graphically to indicate the passing of time, and it is usually organized chronologically. A basic timeline presents a list of events in chronological order, usually using dates as markers. A timeline can also be used to show the relationship between events, such as the relationship between the events of a personâ€™s life.â€ Wikipedia\n",
                content: "Timeline Diagram link Timeline: This is an experimental diagram for now. The syntax and properties can change in future releases. The syntax is stable except for the icon integration which is the experimental part.\nâ€œA timeline is a type of diagram used to illustrate a chronology of events, dates, or periods of time. It is usually presented graphically to indicate the passing of time, and it is usually organized chronologically. A basic timeline presents a list of events in chronological order, usually using dates as markers. A timeline can also be used to show the relationship between events, such as the relationship between the events of a personâ€™s life.â€ Wikipedia\nAn example of a timeline. link timeline title History of Social Media Platform 2002 : LinkedIn 2004 : Facebook : Google 2005 : Youtube 2006 : Twitter timeline title History of Social Media Platform 2002 : LinkedIn 2004 : Facebook : Google 2005 : Youtube 2006 : Twitter Syntax linkThe syntax for creating Timeline diagram is simple. You always start with the timeline keyword to let mermaid know that you want to create a timeline diagram.\nAfter that there is a possibility to add a title to the timeline. This is done by adding a line with the keyword title followed by the title text.\nThen you add the timeline data, where you always start with a time period, followed by a colon and then the text for the event. Optionally you can add a second colon and then the text for the event. So, you can have one or more events per time period.\n{time period} : {event} or\n{time period} : {event} : {event} or\n{time period} : {event} : {event} : {event} NOTE: Both time period and event are simple text, and not limited to numbers.\nLet us look at the syntax for the example above.\ntimeline title History of Social Media Platform 2002 : LinkedIn 2004 : Facebook : Google 2005 : Youtube 2006 : Twitter timeline title History of Social Media Platform 2002 : LinkedIn 2004 : Facebook : Google 2005 : Youtube 2006 : Twitter In this way we can use a text outline to generate a timeline diagram. The sequence of time period and events is important, as it will be used to draw the timeline. The first time period will be placed at the left side of the timeline, and the last time period will be placed at the right side of the timeline.\nSimilarly, the first event will be placed at the top for that specific time period, and the last event will be placed at the bottom.\nGrouping of time periods in sections/ages linkYou can group time periods in sections/ages. This is done by adding a line with the keyword section followed by the section name.\nAll subsequent time periods will be placed in this section until a new section is defined.\nIf no section is defined, all time periods will be placed in the default section.\nLet us look at an example, where we have grouped the time periods in sections.\ntimeline title Timeline of Industrial Revolution section 17th-20th century Industry 1.0 : Machinery, Water power, Steam power Industry 2.0 : Electricity, Internal combustion engine, Mass production Industry 3.0 : Electronics, Computers, Automation section 21st century Industry 4.0 : Internet, Robotics, Internet of Things Industry 5.0 : Artificial intelligence, Big data,3D printing timeline title Timeline of Industrial Revolution section 17th-20th century Industry 1.0 : Machinery, Water power, Steam power Industry 2.0 : Electricity, Internal combustion engine, Mass production Industry 3.0 : Electronics, Computers, Automation section 21st century Industry 4.0 : Internet, Robotics, Internet of Things Industry 5.0 : Artificial intelligence, Big data,3D printing As you can see, the time periods are placed in the sections, and the sections are placed in the order they are defined.\nAll time periods and events under a given section follow a similar color scheme. This is done to make it easier to see the relationship between time periods and events.\nWrapping of text for long time-periods or events linkBy default, the text for time-periods and events will be wrapped if it is too long. This is done to avoid that the text is drawn outside the diagram.\nYou can also use to force a line break.\nLet us look at another example, where we have a long time period, and a long event.\ntimeline title England's History Timeline section Stone Age 7600 BC : Britain's oldest known house was built in Orkney, Scotland 6000 BC : Sea levels rise and Britain becomes an island.\nThe people who live here are hunter-gatherers. section Bronze Age 2300 BC : People arrive from Europe and settle in Britain. They bring farming and metalworking. : New styles of pottery and ways of burying the dead appear. 2200 BC : The last major building works are completed at Stonehenge.\nPeople now bury their dead in stone circles. : The first metal objects are made in Britain.Some other nice things happen. it is a good time to be alive. timeline title England's History Timeline section Stone Age 7600 BC : Britain's oldest known house was built in Orkney, Scotland 6000 BC : Sea levels rise and Britain becomes an island.\nThe people who live here are hunter-gatherers. section Bronze Age 2300 BC : People arrive from Europe and settle in Britain. They bring farming and metalworking. : New styles of pottery and ways of burying the dead appear. 2200 BC : The last major building works are completed at Stonehenge.\nPeople now bury their dead in stone circles. : The first metal objects are made in Britain.Some other nice things happen. it is a good time to be alive. timeline title MermaidChart 2023 Timeline section 2023 Q1 Release Personal Tier Buttet 1 : sub-point 1a : sub-point 1b : sub-point 1c Bullet 2 : sub-point 2a : sub-point 2b section 2023 Q2 Release XYZ Tier Buttet 3 : sub-point 3a : sub-point 3b : sub-point 3c Bullet 4 : sub-point 4a : sub-point 4b timeline title MermaidChart 2023 Timeline section 2023 Q1 Release Personal Tier Buttet 1 : sub-point 1a : sub-point 1b : sub-point 1c Bullet 2 : sub-point 2a : sub-point 2b section 2023 Q2 Release XYZ Tier Buttet 3 : sub-point 3a : sub-point 3b : sub-point 3c Bullet 4 : sub-point 4a : sub-point 4b Styling of time periods and events linkAs explained earlier, each section has a color scheme, and each time period and event under a section follow the similar color scheme.\nHowever, if there is no section defined, then we have two possibilities:\nStyle time periods individually, i.e. each time period(and its coressponding events) will have its own color scheme. This is the DEFAULT behavior. timeline title History of Social Media Platform 2002 : LinkedIn 2004 : Facebook : Google 2005 : Youtube 2006 : Twitter timeline title History of Social Media Platform 2002 : LinkedIn 2004 : Facebook : Google 2005 : Youtube 2006 : Twitter Note that there are no sections defined, and each time period and its corresponding events will have its own color scheme.\nDisable the multiColor option using the disableMultiColor option. This will make all time periods and events follow the same color scheme. You will need to add this option either via mermaid.initialize function or directives.\nmermaid.initialize({ theme: 'base', startOnLoad: true, logLevel: 0, timeline: { disableMulticolor: false, }, ... ... let us look at same example, where we have disabled the multiColor option.\n%%{init: { 'logLevel': 'debug', 'theme': 'base', 'timeline': {'disableMulticolor': true}}}%% timeline title History of Social Media Platform 2002 : LinkedIn 2004 : Facebook : Google 2005 : Youtube 2006 : Twitter %%{init: { 'logLevel': 'debug', 'theme': 'base', 'timeline': {'disableMulticolor': true}}}%% timeline title History of Social Media Platform 2002 : LinkedIn 2004 : Facebook : Google 2005 : Youtube 2006 : Twitter Customizing Color scheme linkYou can customize the color scheme using the cScale0 to cScale11 theme variables, which will change the background colors. Mermaid allows you to set unique colors for up-to 12 sections, where cScale0 variable will drive the value of the first section or time-period, cScale1 will drive the value of the second section and so on. In case you have more than 12 sections, the color scheme will start to repeat.\nIf you also want to change the foreground color of a section, you can do so use theme variables corresponding cScaleLabel0 to cScaleLabel11 variables.\nNOTE: Default values for these theme variables are picked from the selected theme. If you want to override the default values, you can use the initialize call to add your custom theme variable values.\nExample:\nNow letâ€™s override the default values for the cScale0 to cScale2 variables:\n%%{init: { 'logLevel': 'debug', 'theme': 'default' , 'themeVariables': { 'cScale0': '#ff0000', 'cScaleLabel0': '#ffffff', 'cScale1': '#00ff00', 'cScale2': '#0000ff', 'cScaleLabel2': '#ffffff' } } }%% timeline title History of Social Media Platform 2002 : LinkedIn 2004 : Facebook : Google 2005 : Youtube 2006 : Twitter 2007 : Tumblr 2008 : Instagram 2010 : Pinterest %%{init: { 'logLevel': 'debug', 'theme': 'default' , 'themeVariables': { 'cScale0': '#ff0000', 'cScaleLabel0': '#ffffff', 'cScale1': '#00ff00', 'cScale2': '#0000ff', 'cScaleLabel2': '#ffffff' } } }%% timeline title History of Social Media Platform 2002 : LinkedIn 2004 : Facebook : Google 2005 : Youtube 2006 : Twitter 2007 : Tumblr 2008 : Instagram 2010 : Pinterest See how the colors are changed to the values specified in the theme variables.\nThemes linkMermaid supports a bunch of pre-defined themes which you can use to find the right one for you. PS: you can actually override an existing themeâ€™s variable to get your own custom theme going. Learn more about theming your diagram here.\nThe following are the different pre-defined theme options:\nbase forest dark default neutral NOTE: To change theme you can either use the initialize call or directives. Learn more about directives Letâ€™s put them to use, and see how our sample diagram looks in different themes:\nBase Theme link %%{init: { 'logLevel': 'debug', 'theme': 'base' } }%% timeline title History of Social Media Platform 2002 : LinkedIn 2004 : Facebook : Google 2005 : Youtube 2006 : Twitter 2007 : Tumblr 2008 : Instagram 2010 : Pinterest %%{init: { 'logLevel': 'debug', 'theme': 'base' } }%% timeline title History of Social Media Platform 2002 : LinkedIn 2004 : Facebook : Google 2005 : Youtube 2006 : Twitter 2007 : Tumblr 2008 : Instagram 2010 : Pinterest Forest Theme link %%{init: { 'logLevel': 'debug', 'theme': 'forest' } }%% timeline title History of Social Media Platform 2002 : LinkedIn 2004 : Facebook : Google 2005 : Youtube 2006 : Twitter 2007 : Tumblr 2008 : Instagram 2010 : Pinterest %%{init: { 'logLevel': 'debug', 'theme': 'forest' } }%% timeline title History of Social Media Platform 2002 : LinkedIn 2004 : Facebook : Google 2005 : Youtube 2006 : Twitter 2007 : Tumblr 2008 : Instagram 2010 : Pinterest Dark Theme link %%{init: { 'logLevel': 'debug', 'theme': 'dark' } }%% timeline title History of Social Media Platform 2002 : LinkedIn 2004 : Facebook : Google 2005 : Youtube 2006 : Twitter 2007 : Tumblr 2008 : Instagram 2010 : Pinterest %%{init: { 'logLevel': 'debug', 'theme': 'dark' } }%% timeline title History of Social Media Platform 2002 : LinkedIn 2004 : Facebook : Google 2005 : Youtube 2006 : Twitter 2007 : Tumblr 2008 : Instagram 2010 : Pinterest Default Theme link %%{init: { 'logLevel': 'debug', 'theme': 'default' } }%% timeline title History of Social Media Platform 2002 : LinkedIn 2004 : Facebook : Google 2005 : Youtube 2006 : Twitter 2007 : Tumblr 2008 : Instagram 2010 : Pinterest %%{init: { 'logLevel': 'debug', 'theme': 'default' } }%% timeline title History of Social Media Platform 2002 : LinkedIn 2004 : Facebook : Google 2005 : Youtube 2006 : Twitter 2007 : Tumblr 2008 : Instagram 2010 : Pinterest Neutral Theme link %%{init: { 'logLevel': 'debug', 'theme': 'neutral' } }%% timeline title History of Social Media Platform 2002 : LinkedIn 2004 : Facebook : Google 2005 : Youtube 2006 : Twitter 2007 : Tumblr 2008 : Instagram 2010 : Pinterest %%{init: { 'logLevel': 'debug', 'theme': 'neutral' } }%% timeline title History of Social Media Platform 2002 : LinkedIn 2004 : Facebook : Google 2005 : Youtube 2006 : Twitter 2007 : Tumblr 2008 : Instagram 2010 : Pinterest Integrating with your library/website. linkTimeline uses experimental lazy loading \u0026 async rendering features which could change in the future.The lazy loading is important in order to be able to add additional diagrams going forward.\nYou can use this method to add mermaid including the timeline diagram to a web page:\nYou can also refer the implementation in the live editor here to see how the async loading is done.\n"
            }
        );
    index.add(
            {
                id:  82 ,
                href: "\/docs\/mix\/mermaid\/syntax\/userjourney\/",
                title: "User Journey Diagram",
                description: "User Journey Diagram link User journeys describe at a high level of detail exactly what steps different users take to complete a specific task within a system, application or website. This technique shows the current (as-is) user workflow, and reveals areas of improvement for the to-be workflow. (Wikipedia)\nMermaid can render user journey diagrams:\njourney title My working day section Go to work Make tea: 5: Me Go upstairs: 3: Me Do work: 1: Me, Cat section Go home Go downstairs: 5: Me Sit down: 5: Me journey title My working day section Go to work Make tea: 5: Me Go upstairs: 3: Me Do work: 1: Me, Cat section Go home Go downstairs: 5: Me Sit down: 5: Me Each user journey is split into sections, these describe the part of the task the user is trying to complete.\n",
                content: "User Journey Diagram link User journeys describe at a high level of detail exactly what steps different users take to complete a specific task within a system, application or website. This technique shows the current (as-is) user workflow, and reveals areas of improvement for the to-be workflow. (Wikipedia)\nMermaid can render user journey diagrams:\njourney title My working day section Go to work Make tea: 5: Me Go upstairs: 3: Me Do work: 1: Me, Cat section Go home Go downstairs: 5: Me Sit down: 5: Me journey title My working day section Go to work Make tea: 5: Me Go upstairs: 3: Me Do work: 1: Me, Cat section Go home Go downstairs: 5: Me Sit down: 5: Me Each user journey is split into sections, these describe the part of the task the user is trying to complete.\nTasks syntax is Task name: : "
            }
        );
    index.add(
            {
                id:  83 ,
                href: "\/docs\/mix\/mermaid\/syntax\/xychart\/",
                title: "XY Chart",
                description: "XY Chart link In the context of mermaid-js, the XY chart is a comprehensive charting module that encompasses various types of charts that utilize both x-axis and y-axis for data representation. Presently, it includes two fundamental chart types: the bar chart and the line chart. These charts are designed to visually display and analyze data that involve two numerical variables.\nItâ€™s important to note that while the current implementation of mermaid-js includes these two chart types, the framework is designed to be dynamic and adaptable. Therefore, it has the capacity for expansion and the inclusion of additional chart types in the future. This means that users can expect an evolving suite of charting options within the XY chart module, catering to various data visualization needs as new chart types are introduced over time.\n",
                content: "XY Chart link In the context of mermaid-js, the XY chart is a comprehensive charting module that encompasses various types of charts that utilize both x-axis and y-axis for data representation. Presently, it includes two fundamental chart types: the bar chart and the line chart. These charts are designed to visually display and analyze data that involve two numerical variables.\nItâ€™s important to note that while the current implementation of mermaid-js includes these two chart types, the framework is designed to be dynamic and adaptable. Therefore, it has the capacity for expansion and the inclusion of additional chart types in the future. This means that users can expect an evolving suite of charting options within the XY chart module, catering to various data visualization needs as new chart types are introduced over time.\nExample link xychart-beta title \"Sales Revenue\" x-axis [jan, feb, mar, apr, may, jun, jul, aug, sep, oct, nov, dec] y-axis \"Revenue (in $)\" 4000 --\u003e 11000 bar [5000, 6000, 7500, 8200, 9500, 10500, 11000, 10200, 9200, 8500, 7000, 6000] line [5000, 6000, 7500, 8200, 9500, 10500, 11000, 10200, 9200, 8500, 7000, 6000] xychart-beta title \"Sales Revenue\" x-axis [jan, feb, mar, apr, may, jun, jul, aug, sep, oct, nov, dec] y-axis \"Revenue (in $)\" 4000 --\u003e 11000 bar [5000, 6000, 7500, 8200, 9500, 10500, 11000, 10200, 9200, 8500, 7000, 6000] line [5000, 6000, 7500, 8200, 9500, 10500, 11000, 10200, 9200, 8500, 7000, 6000] Syntax link Note All text values that contain only one word can be written without \". If a text value has many words in it, specifically if it contains spaces, enclose the value in \"\nOrientations linkThe chart can be drawn horizontal or vertical, default value is vertical.\nxychart-beta horizontal ... Title linkThe title is a short description of the chart and it will always render on top of the chart.\nExample linkxychart-beta title \"This is a simple example\" ... Note If the title is a single word one no need to use \", but if it has space \" is needed\nx-axis linkThe x-axis primarily serves as a categorical value, although it can also function as a numeric range value when needed.\nExample link x-axis title min --\u003e max x-axis will function as numeric with the given range x-axis \"title with space\" [cat1, \"cat2 with space\", cat3] x-axis if categorical, categories are text type y-axis linkThe y-axis is employed to represent numerical range values, it cannot have categorical values.\nExample link y-axis title min --\u003e max y-axis title it will only add the title, the range will be auto generated from data. Note Both x and y axis are optional if not provided we will try to create the range\nLine chart linkA line chart offers the capability to graphically depict lines.\nExample link line [2.3, 45, .98, -3.4] it can have all valid numeric values. Bar chart linkA bar chart offers the capability to graphically depict bars.\nExample link bar [2.3, 45, .98, -3.4] it can have all valid numeric values. Simplest example linkThe only two things required are the chart name (xychart-beta) and one data set. So you will be able to draw a chart with a simple config like\nxychart-beta line [+1.3, .6, 2.4, -.34] Chart Configurations link Parameter Description Default value width Width of the chart 700 height Height of the chart 500 titlePadding Top and Bottom padding of the title 10 titleFontSize Title font size 20 showTitle Title to be shown or not true xAxis xAxis configuration AxisConfig yAxis yAxis configuration AxisConfig chartOrientation â€˜verticalâ€™ or â€˜horizontalâ€™ â€˜verticalâ€™ plotReservedSpacePercent Minimum space plots will take inside the chart 50 AxisConfig link Parameter Description Default value showLabel Show axis labels or tick values true labelFontSize Font size of the label to be drawn 14 labelPadding Top and Bottom padding of the label 5 showTitle Axis title to be shown or not true titleFontSize Axis title font size 16 titlePadding Top and Bottom padding of Axis title 5 showTick Tick to be shown or not true tickLength How long the tick will be 5 tickWidth How width the tick will be 2 showAxisLine Axis line to be shown or not true axisLineWidth Thickness of the axis line 2 Chart Theme Variables link Note Themes for xychart resides inside xychart attribute so to set the variables use this syntax %%{init: { â€œthemeVariablesâ€: {â€œxyChartâ€: {â€œtitleColorâ€: â€œ#ff0000â€} } }}%%\nParameter Description backgroundColor Background color of the whole chart titleColor Color of the Title text xAxisLableColor Color of the x-axis labels xAxisTitleColor Color of the x-axis title xAxisTickColor Color of the x-axis tick xAxisLineColor Color of the x-axis line yAxisLableColor Color of the y-axis labels yAxisTitleColor Color of the y-axis title yAxisTickColor Color of the y-axis tick yAxisLineColor Color of the y-axis line plotColorPalette String of colors separated by comma e.g. â€œ#f3456, #43445â€ Example on config and theme link --- config: xyChart: width: 900 height: 600 themeVariables: xyChart: titleColor: \"#ff0000\" --- xychart-beta title \"Sales Revenue\" x-axis [jan, feb, mar, apr, may, jun, jul, aug, sep, oct, nov, dec] y-axis \"Revenue (in $)\" 4000 --\u003e 11000 bar [5000, 6000, 7500, 8200, 9500, 10500, 11000, 10200, 9200, 8500, 7000, 6000] line [5000, 6000, 7500, 8200, 9500, 10500, 11000, 10200, 9200, 8500, 7000, 6000] --- config: xyChart: width: 900 height: 600 themeVariables: xyChart: titleColor: \"#ff0000\" --- xychart-beta title \"Sales Revenue\" x-axis [jan, feb, mar, apr, may, jun, jul, aug, sep, oct, nov, dec] y-axis \"Revenue (in $)\" 4000 --\u003e 11000 bar [5000, 6000, 7500, 8200, 9500, 10500, 11000, 10200, 9200, 8500, 7000, 6000] line [5000, 6000, 7500, 8200, 9500, 10500, 11000, 10200, 9200, 8500, 7000, 6000] "
            }
        );
    index.add(
            {
                id:  84 ,
                href: "\/docs\/mix\/",
                title: "æ‚",
                description: "",
                content: ""
            }
        );
    index.add(
            {
                id:  85 ,
                href: "\/docs\/",
                title: "Docs",
                description: "",
                content: ""
            }
        );
    search.addEventListener('input', show_results, true);

    function show_results(){
        const maxResult =  5 ;
        const minlength =  0 ;
        var searchQuery = sanitizeHTML(this.value);
        var results = index.search(searchQuery, {limit: maxResult, enrich: true});

        
        const flatResults = new Map(); 
        for (const result of results.flatMap(r => r.result)) {
        if (flatResults.has(result.doc.href)) continue;
        flatResults.set(result.doc.href, result.doc);
        }

        suggestions.innerHTML = "";
        suggestions.classList.remove('d-none');

        
        if (searchQuery.length < minlength) {
            const minCharMessage = document.createElement('div')
            minCharMessage.innerHTML = `Please type at least <strong>${minlength}</strong> characters`
            minCharMessage.classList.add("suggestion__no-results");
            suggestions.appendChild(minCharMessage);
            return;
        } else {
            
            if (flatResults.size === 0 && searchQuery) {
                const noResultsMessage = document.createElement('div')
                noResultsMessage.innerHTML = "No results for" + ` "<strong>${searchQuery}</strong>"`
                noResultsMessage.classList.add("suggestion__no-results");
                suggestions.appendChild(noResultsMessage);
                return;
            }
        }

        
        for(const [href, doc] of flatResults) {
            const entry = document.createElement('div');
            suggestions.appendChild(entry);

            const a = document.createElement('a');
            a.href = href;
            entry.appendChild(a);

            const title = document.createElement('span');
            title.textContent = doc.title;
            title.classList.add("suggestion__title");
            a.appendChild(title);

            const description = document.createElement('span');
            description.textContent = doc.description;
            description.classList.add("suggestion__description");
            a.appendChild(description);

            suggestions.appendChild(entry);

            if(suggestions.childElementCount == maxResult) break;
        }
    }
    }());
</script></body></html>